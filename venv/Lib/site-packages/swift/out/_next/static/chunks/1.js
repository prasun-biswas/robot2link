(window["webpackJsonp_N_E"] = window["webpackJsonp_N_E"] || []).push([[1],{

/***/ "./components/Loader.tsx":
/*!*******************************!*\
  !*** ./components/Loader.tsx ***!
  \*******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* WEBPACK VAR INJECTION */(function(module) {/* harmony import */ var _home_jesse_python_swift_next_swift_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/defineProperty */ \"./node_modules/@babel/runtime/helpers/esm/defineProperty.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"./node_modules/react/jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var react_three_fiber__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-three-fiber */ \"./node_modules/react-three-fiber/web.js\");\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! three */ \"./node_modules/three/build/three.module.js\");\n/* harmony import */ var three_examples_jsm_loaders_STLLoader__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! three/examples/jsm/loaders/STLLoader */ \"./node_modules/three/examples/jsm/loaders/STLLoader.js\");\n/* harmony import */ var three_examples_jsm_loaders_GLTFLoader__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! three/examples/jsm/loaders/GLTFLoader */ \"./node_modules/three/examples/jsm/loaders/GLTFLoader.js\");\n/* harmony import */ var three_examples_jsm_loaders_ColladaLoader__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! three/examples/jsm/loaders/ColladaLoader */ \"./node_modules/three/examples/jsm/loaders/ColladaLoader.js\");\n/* harmony import */ var three_examples_jsm_loaders_OBJLoader__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! three/examples/jsm/loaders/OBJLoader */ \"./node_modules/three/examples/jsm/loaders/OBJLoader.js\");\n/* harmony import */ var three_examples_jsm_loaders_MTLLoader__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! three/examples/jsm/loaders/MTLLoader */ \"./node_modules/three/examples/jsm/loaders/MTLLoader.js\");\n/* harmony import */ var three_examples_jsm_loaders_VRMLLoader__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! three/examples/jsm/loaders/VRMLLoader */ \"./node_modules/three/examples/jsm/loaders/VRMLLoader.js\");\n/* harmony import */ var three_examples_jsm_loaders_PCDLoader__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! three/examples/jsm/loaders/PCDLoader */ \"./node_modules/three/examples/jsm/loaders/PCDLoader.js\");\n/* harmony import */ var three_examples_jsm_loaders_PLYLoader__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! three/examples/jsm/loaders/PLYLoader */ \"./node_modules/three/examples/jsm/loaders/PLYLoader.js\");\n/* harmony import */ var three_examples_jsm_loaders_FBXLoader__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! three/examples/jsm/loaders/FBXLoader */ \"./node_modules/three/examples/jsm/loaders/FBXLoader.js\");\n/* harmony import */ var three_examples_jsm_loaders_SVGLoader__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! three/examples/jsm/loaders/SVGLoader */ \"./node_modules/three/examples/jsm/loaders/SVGLoader.js\");\n\n\n\nvar _jsxFileName = \"/home/jesse/python/swift/next-swift/components/Loader.tsx\",\n    _this = undefined,\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$(),\n    _s4 = $RefreshSig$(),\n    _s5 = $RefreshSig$(),\n    _s6 = $RefreshSig$(),\n    _s7 = $RefreshSig$(),\n    _s8 = $RefreshSig$(),\n    _s9 = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { Object(_home_jesse_python_swift_next_swift_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n\n\n\nthree__WEBPACK_IMPORTED_MODULE_4__[\"Object3D\"].DefaultUp.set(0, 0, 1);\n\n\n\n\n\n\n\n\n\n\nvar defaultColor = 'hotpink';\n\nvar traverseChildren = function traverseChildren(child, opacity, shadow) {\n  if (child.isMesh) {\n    if (shadow) {\n      child.castShadow = true;\n      child.receiveShadow = true;\n    }\n\n    if (opacity !== 1.0) {\n      if (child.material.isMaterial) {\n        child.material.transparent = true;\n        child.material.opacity = opacity;\n      } else if (Array.isArray(child.material)) {\n        child.material.forEach(function (mat) {\n          mat.transparent = true;\n          mat.opacity = opacity;\n        });\n      }\n    }\n  } else if (child.type === 'PointLight') {\n    child.visible = false;\n  } else if (child.isObject3D || child.isGroup) {\n    child.children.forEach(function (child2) {\n      traverseChildren(child2, opacity, shadow);\n    });\n  }\n};\n\nvar STLAsset = function STLAsset(props) {\n  _s();\n\n  var model = Object(react_three_fiber__WEBPACK_IMPORTED_MODULE_3__[\"useLoader\"])(three_examples_jsm_loaders_STLLoader__WEBPACK_IMPORTED_MODULE_5__[\"STLLoader\"], props.url);\n  return /*#__PURE__*/Object(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__[\"jsxDEV\"])(\"mesh\", {\n    position: props.t,\n    quaternion: props.q,\n    castShadow: true,\n    receiveShadow: true,\n    scale: props.scale,\n    children: [/*#__PURE__*/Object(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__[\"jsxDEV\"])(\"primitive\", {\n      object: model,\n      attach: \"geometry\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }, _this), /*#__PURE__*/Object(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__[\"jsxDEV\"])(\"meshStandardMaterial\", {\n      color: props.color ? props.color : defaultColor,\n      transparent: props.opacity !== 1.0 ? true : false,\n      opacity: props.opacity ? props.opacity : 1.0\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 9\n  }, _this);\n};\n\n_s(STLAsset, \"0nwA5bXkUKRb0DDsv7EdY3eFqew=\", false, function () {\n  return [react_three_fiber__WEBPACK_IMPORTED_MODULE_3__[\"useLoader\"]];\n});\n\n_c = STLAsset;\n\nvar GLTFAsset = function GLTFAsset(props) {\n  _s2();\n\n  var model = Object(react_three_fiber__WEBPACK_IMPORTED_MODULE_3__[\"useLoader\"])(three_examples_jsm_loaders_GLTFLoader__WEBPACK_IMPORTED_MODULE_6__[\"GLTFLoader\"], props.url);\n  Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useEffect\"])(function () {\n    model.scene.children.forEach(function (child) {\n      traverseChildren(child, props.opacity, true);\n    });\n  });\n  return /*#__PURE__*/Object(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__[\"jsxDEV\"])(\"mesh\", {\n    position: props.t,\n    quaternion: props.q,\n    castShadow: true,\n    receiveShadow: true,\n    scale: props.scale,\n    children: /*#__PURE__*/Object(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__[\"jsxDEV\"])(\"primitive\", {\n      object: model.scene,\n      opacity: props.opacity,\n      castShadow: true,\n      receiveShadow: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 81,\n    columnNumber: 9\n  }, _this);\n};\n\n_s2(GLTFAsset, \"W9Q6hq84pBY0oMoQcYVpSrc5s3s=\", false, function () {\n  return [react_three_fiber__WEBPACK_IMPORTED_MODULE_3__[\"useLoader\"]];\n});\n\n_c2 = GLTFAsset;\n\nvar ColladaAsset = function ColladaAsset(props) {\n  _s3();\n\n  var model = Object(react_three_fiber__WEBPACK_IMPORTED_MODULE_3__[\"useLoader\"])(three_examples_jsm_loaders_ColladaLoader__WEBPACK_IMPORTED_MODULE_7__[\"ColladaLoader\"], props.url);\n  var scene = Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useMemo\"])(function () {\n    return model.scene.clone();\n  }, [model.scene]);\n  Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useEffect\"])(function () {\n    scene.children.forEach(function (child) {\n      traverseChildren(child, props.opacity, true);\n    });\n    scene.name = 'loaded'; // if (props.q) {\n    //     model.scene.quaternion.set(\n    //         props.q[0],\n    //         props.q[1],\n    //         props.q[2],\n    //         props.q[3]\n    //     )\n    // }\n  }); // return (\n  //     <group\n  //         position={props.t}\n  //         castShadow={true}\n  //         receiveShadow={true}\n  //         scale={props.scale}\n  //         quaternion={props.q}\n  //     >\n  //         <primitive object={model.scene} />\n  //     </group>\n  // )\n\n  return /*#__PURE__*/Object(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__[\"jsxDEV\"])(\"primitive\", {\n    object: scene,\n    position: props.t,\n    scale: props.scale,\n    quaternion: props.q\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 132,\n    columnNumber: 9\n  }, _this);\n};\n\n_s3(ColladaAsset, \"CZz9iqTZvPeYWDBO2hj8xO/5CNE=\", false, function () {\n  return [react_three_fiber__WEBPACK_IMPORTED_MODULE_3__[\"useLoader\"]];\n});\n\n_c3 = ColladaAsset;\n\nvar OBJAsset = function OBJAsset(props) {\n  _s4();\n\n  var mtlurl = props.url.slice(0, props.url.length - 3) + 'mtl';\n  var materials = Object(react_three_fiber__WEBPACK_IMPORTED_MODULE_3__[\"useLoader\"])(three_examples_jsm_loaders_MTLLoader__WEBPACK_IMPORTED_MODULE_9__[\"MTLLoader\"], mtlurl);\n  var model = Object(react_three_fiber__WEBPACK_IMPORTED_MODULE_3__[\"useLoader\"])(three_examples_jsm_loaders_OBJLoader__WEBPACK_IMPORTED_MODULE_8__[\"OBJLoader\"], props.url, function (loader) {\n    materials.preload();\n    loader.setMaterials(materials);\n  });\n  Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useEffect\"])(function () {\n    model.children.forEach(function (child) {\n      traverseChildren(child, props.opacity, true);\n    });\n  });\n  return /*#__PURE__*/Object(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__[\"jsxDEV\"])(\"mesh\", {\n    position: props.t,\n    quaternion: props.q,\n    castShadow: true,\n    receiveShadow: true,\n    scale: props.scale,\n    children: /*#__PURE__*/Object(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__[\"jsxDEV\"])(\"primitive\", {\n      object: model\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 13\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 156,\n    columnNumber: 9\n  }, _this);\n};\n\n_s4(OBJAsset, \"5ccjoLLRkUDIRpZqDOF8Te/+4yg=\", false, function () {\n  return [react_three_fiber__WEBPACK_IMPORTED_MODULE_3__[\"useLoader\"], react_three_fiber__WEBPACK_IMPORTED_MODULE_3__[\"useLoader\"]];\n});\n\n_c4 = OBJAsset;\n\nvar VRMLAsset = function VRMLAsset(props) {\n  _s5();\n\n  var model = Object(react_three_fiber__WEBPACK_IMPORTED_MODULE_3__[\"useLoader\"])(three_examples_jsm_loaders_VRMLLoader__WEBPACK_IMPORTED_MODULE_10__[\"VRMLLoader\"], props.url);\n  Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useEffect\"])(function () {\n    model.children.forEach(function (child) {\n      traverseChildren(child, props.opacity, true);\n    });\n  });\n  return /*#__PURE__*/Object(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__[\"jsxDEV\"])(\"mesh\", {\n    position: props.t,\n    quaternion: props.q,\n    castShadow: true,\n    receiveShadow: true,\n    scale: props.scale,\n    children: /*#__PURE__*/Object(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__[\"jsxDEV\"])(\"primitive\", {\n      object: model\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 13\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 178,\n    columnNumber: 9\n  }, _this);\n};\n\n_s5(VRMLAsset, \"W9Q6hq84pBY0oMoQcYVpSrc5s3s=\", false, function () {\n  return [react_three_fiber__WEBPACK_IMPORTED_MODULE_3__[\"useLoader\"]];\n});\n\n_c5 = VRMLAsset;\n\nvar PCDAsset = function PCDAsset(props) {\n  _s6();\n\n  var model = Object(react_three_fiber__WEBPACK_IMPORTED_MODULE_3__[\"useLoader\"])(three_examples_jsm_loaders_PCDLoader__WEBPACK_IMPORTED_MODULE_11__[\"PCDLoader\"], props.url);\n  Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useEffect\"])(function () {\n    model.material.color = props.color ? new three__WEBPACK_IMPORTED_MODULE_4__[\"Color\"](props.color) : new three__WEBPACK_IMPORTED_MODULE_4__[\"Color\"](defaultColor);\n    model.material.transparent = props.opacity !== 1.0 ? true : false;\n    model.material.opacity = props.opacity ? props.opacity : 1.0;\n  });\n  return /*#__PURE__*/Object(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__[\"jsxDEV\"])(\"mesh\", {\n    position: props.t,\n    quaternion: props.q,\n    castShadow: true,\n    receiveShadow: true,\n    scale: props.scale,\n    children: /*#__PURE__*/Object(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__[\"jsxDEV\"])(\"primitive\", {\n      object: model\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 13\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 202,\n    columnNumber: 9\n  }, _this);\n};\n\n_s6(PCDAsset, \"W9Q6hq84pBY0oMoQcYVpSrc5s3s=\", false, function () {\n  return [react_three_fiber__WEBPACK_IMPORTED_MODULE_3__[\"useLoader\"]];\n});\n\n_c6 = PCDAsset;\n\nvar PLYAsset = function PLYAsset(props) {\n  _s7();\n\n  var model = Object(react_three_fiber__WEBPACK_IMPORTED_MODULE_3__[\"useLoader\"])(three_examples_jsm_loaders_PLYLoader__WEBPACK_IMPORTED_MODULE_12__[\"PLYLoader\"], props.url);\n  return /*#__PURE__*/Object(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__[\"jsxDEV\"])(\"mesh\", {\n    position: props.t,\n    quaternion: props.q,\n    castShadow: true,\n    receiveShadow: true,\n    scale: props.scale,\n    children: [/*#__PURE__*/Object(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__[\"jsxDEV\"])(\"primitive\", {\n      object: model,\n      attach: \"geometry\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 13\n    }, _this), /*#__PURE__*/Object(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__[\"jsxDEV\"])(\"meshStandardMaterial\", {\n      color: props.color ? props.color : defaultColor,\n      transparent: props.opacity !== 1.0 ? true : false,\n      opacity: props.opacity ? props.opacity : 1.0\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 13\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 218,\n    columnNumber: 9\n  }, _this);\n};\n\n_s7(PLYAsset, \"0nwA5bXkUKRb0DDsv7EdY3eFqew=\", false, function () {\n  return [react_three_fiber__WEBPACK_IMPORTED_MODULE_3__[\"useLoader\"]];\n});\n\n_c7 = PLYAsset;\n\nvar FBXAsset = function FBXAsset(props) {\n  _s8();\n\n  var model = Object(react_three_fiber__WEBPACK_IMPORTED_MODULE_3__[\"useLoader\"])(three_examples_jsm_loaders_FBXLoader__WEBPACK_IMPORTED_MODULE_13__[\"FBXLoader\"], props.url);\n  Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useEffect\"])(function () {\n    model.children.forEach(function (child) {\n      traverseChildren(child, props.opacity, true);\n    });\n  });\n  return /*#__PURE__*/Object(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__[\"jsxDEV\"])(\"mesh\", {\n    position: props.t,\n    quaternion: props.q,\n    castShadow: true,\n    receiveShadow: true,\n    scale: props.scale,\n    children: /*#__PURE__*/Object(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__[\"jsxDEV\"])(\"primitive\", {\n      object: model\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 13\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 245,\n    columnNumber: 9\n  }, _this);\n};\n\n_s8(FBXAsset, \"W9Q6hq84pBY0oMoQcYVpSrc5s3s=\", false, function () {\n  return [react_three_fiber__WEBPACK_IMPORTED_MODULE_3__[\"useLoader\"]];\n});\n\n_c8 = FBXAsset;\n\nvar SVGShape = function SVGShape(_ref) {\n  var shape = _ref.shape,\n      color = _ref.color,\n      index = _ref.index,\n      opacity = _ref.opacity;\n  return /*#__PURE__*/Object(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__[\"jsxDEV\"])(\"mesh\", {\n    children: [/*#__PURE__*/Object(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__[\"jsxDEV\"])(\"meshLambertMaterial\", {\n      attach: \"material\",\n      color: color,\n      polygonOffset: true,\n      polygonOffsetFactor: index * -0.1,\n      transparent: opacity !== 1.0 ? true : false,\n      opacity: opacity ? opacity : 1.0\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 9\n    }, _this), /*#__PURE__*/Object(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__[\"jsxDEV\"])(\"shapeBufferGeometry\", {\n      attach: \"geometry\",\n      args: [shape]\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 9\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 258,\n    columnNumber: 5\n  }, _this);\n};\n\n_c9 = SVGShape;\nvar SVGAsset = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.memo(_c10 = _s9(function (props) {\n  _s9();\n\n  var _useLoader = Object(react_three_fiber__WEBPACK_IMPORTED_MODULE_3__[\"useLoader\"])(three_examples_jsm_loaders_SVGLoader__WEBPACK_IMPORTED_MODULE_14__[\"SVGLoader\"], props.url),\n      paths = _useLoader.paths;\n\n  var shapes = Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useMemo\"])(function () {\n    return paths.flatMap(function (path, index) {\n      return path.toShapes(true).map(function (shape) {\n        return {\n          index: index,\n          shape: shape,\n          color: path.color\n        };\n      });\n    });\n  }, [paths]);\n  return /*#__PURE__*/Object(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__[\"jsxDEV\"])(\"group\", {\n    children: shapes.map(function (newProps, key) {\n      return /*#__PURE__*/Object(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__[\"jsxDEV\"])(SVGShape, _objectSpread({\n        opacity: props.opacity\n      }, newProps), key, false, {\n        fileName: _jsxFileName,\n        lineNumber: 286,\n        columnNumber: 21\n      }, _this);\n    }),\n    scale: [-0.01 * props.scale[0], 0.01 * props.scale[1], 0.01 * props.scale[2]],\n    position: props.t,\n    quaternion: props.q\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 284,\n    columnNumber: 13\n  }, _this);\n}, \"ujlw/uNOT5avJbCruxXaN3SgsDI=\", false, function () {\n  return [react_three_fiber__WEBPACK_IMPORTED_MODULE_3__[\"useLoader\"]];\n}));\n_c11 = SVGAsset;\n\nvar Loader = function Loader(props) {\n  var ext = props.filename.split('.').pop().toLowerCase();\n  var url = props.filename;\n\n  if (navigator.appVersion.indexOf('Win') != -1) {\n    url = url.slice(2);\n  }\n\n  switch (ext) {\n    case 'stl':\n      return /*#__PURE__*/Object(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__[\"jsxDEV\"])(STLAsset, _objectSpread({\n        url: url\n      }, props), void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 20\n      }, _this);\n      break;\n\n    case 'gltf':\n    case 'glb':\n      return /*#__PURE__*/Object(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__[\"jsxDEV\"])(GLTFAsset, _objectSpread({\n        url: url\n      }, props), void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 20\n      }, _this);\n      break;\n\n    case 'dae':\n      return /*#__PURE__*/Object(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__[\"jsxDEV\"])(ColladaAsset, _objectSpread({\n        url: url\n      }, props), void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 319,\n        columnNumber: 20\n      }, _this);\n      break;\n\n    case 'obj':\n      return /*#__PURE__*/Object(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__[\"jsxDEV\"])(OBJAsset, _objectSpread({\n        url: url\n      }, props), void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 323,\n        columnNumber: 20\n      }, _this);\n      break;\n\n    case 'wrl':\n      return /*#__PURE__*/Object(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__[\"jsxDEV\"])(VRMLAsset, _objectSpread({\n        url: url\n      }, props), void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 327,\n        columnNumber: 20\n      }, _this);\n      break;\n\n    case 'pcd':\n      return /*#__PURE__*/Object(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__[\"jsxDEV\"])(PCDAsset, _objectSpread({\n        url: url\n      }, props), void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 331,\n        columnNumber: 20\n      }, _this);\n      break;\n\n    case 'ply':\n      return /*#__PURE__*/Object(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__[\"jsxDEV\"])(PLYAsset, _objectSpread({\n        url: url\n      }, props), void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 335,\n        columnNumber: 20\n      }, _this);\n      break;\n\n    case 'fbx':\n      return /*#__PURE__*/Object(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__[\"jsxDEV\"])(FBXAsset, _objectSpread({\n        url: url\n      }, props), void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 339,\n        columnNumber: 20\n      }, _this);\n      break;\n\n    case 'svg':\n      return /*#__PURE__*/Object(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__[\"jsxDEV\"])(SVGAsset, _objectSpread({\n        url: url\n      }, props), void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 343,\n        columnNumber: 20\n      }, _this);\n      break;\n\n    default:\n      return /*#__PURE__*/Object(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__[\"jsxDEV\"])(ColladaAsset, _objectSpread({\n        url: url\n      }, props), void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 347,\n        columnNumber: 20\n      }, _this);\n  }\n};\n\n_c12 = Loader;\n/* harmony default export */ __webpack_exports__[\"default\"] = (Loader);\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c10, _c11, _c12;\n\n$RefreshReg$(_c, \"STLAsset\");\n$RefreshReg$(_c2, \"GLTFAsset\");\n$RefreshReg$(_c3, \"ColladaAsset\");\n$RefreshReg$(_c4, \"OBJAsset\");\n$RefreshReg$(_c5, \"VRMLAsset\");\n$RefreshReg$(_c6, \"PCDAsset\");\n$RefreshReg$(_c7, \"PLYAsset\");\n$RefreshReg$(_c8, \"FBXAsset\");\n$RefreshReg$(_c9, \"SVGShape\");\n$RefreshReg$(_c10, \"SVGAsset$React.memo\");\n$RefreshReg$(_c11, \"SVGAsset\");\n$RefreshReg$(_c12, \"Loader\");\n\n;\n    var _a, _b;\n    // Legacy CSS implementations will `eval` browser code in a Node.js context\n    // to extract CSS. For backwards compatibility, we need to check we're in a\n    // browser context before continuing.\n    if (typeof self !== 'undefined' &&\n        // AMP / No-JS mode does not inject these helpers:\n        '$RefreshHelpers$' in self) {\n        var currentExports = module.__proto__.exports;\n        var prevExports = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevExports) !== null && _b !== void 0 ? _b : null;\n        // This cannot happen in MainTemplate because the exports mismatch between\n        // templating and execution.\n        self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.i);\n        // A module can be accepted automatically based on its exports, e.g. when\n        // it is a Refresh Boundary.\n        if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n            // Save the previous exports on update so we can compare the boundary\n            // signatures.\n            module.hot.dispose(function (data) {\n                data.prevExports = currentExports;\n            });\n            // Unconditionally accept an update to this module, we'll check if it's\n            // still a Refresh Boundary later.\n            module.hot.accept();\n            // This field is set when the previous version of this module was a\n            // Refresh Boundary, letting us know we need to check for invalidation or\n            // enqueue an update.\n            if (prevExports !== null) {\n                // A boundary can become ineligible if its exports are incompatible\n                // with the previous exports.\n                //\n                // For example, if you add/remove/change exports, we'll want to\n                // re-execute the importing modules, and force those components to\n                // re-render. Similarly, if you convert a class component to a\n                // function, we want to invalidate the boundary.\n                if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevExports, currentExports)) {\n                    module.hot.invalidate();\n                }\n                else {\n                    self.$RefreshHelpers$.scheduleUpdate();\n                }\n            }\n        }\n        else {\n            // Since we just executed the code for the module, it's possible that the\n            // new exports made it ineligible for being a boundary.\n            // We only care about the case when we were _previously_ a boundary,\n            // because we already accepted this update (accidental side effect).\n            var isNoLongerABoundary = prevExports !== null;\n            if (isNoLongerABoundary) {\n                module.hot.invalidate();\n            }\n        }\n    }\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../node_modules/next/dist/compiled/webpack/harmony-module.js */ \"./node_modules/next/dist/compiled/webpack/harmony-module.js\")(module)))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vY29tcG9uZW50cy9Mb2FkZXIudHN4PzczODIiXSwibmFtZXMiOlsiVEhSRUUiLCJEZWZhdWx0VXAiLCJzZXQiLCJkZWZhdWx0Q29sb3IiLCJ0cmF2ZXJzZUNoaWxkcmVuIiwiY2hpbGQiLCJvcGFjaXR5Iiwic2hhZG93IiwiaXNNZXNoIiwiY2FzdFNoYWRvdyIsInJlY2VpdmVTaGFkb3ciLCJtYXRlcmlhbCIsImlzTWF0ZXJpYWwiLCJ0cmFuc3BhcmVudCIsIkFycmF5IiwiaXNBcnJheSIsImZvckVhY2giLCJtYXQiLCJ0eXBlIiwidmlzaWJsZSIsImlzT2JqZWN0M0QiLCJpc0dyb3VwIiwiY2hpbGRyZW4iLCJjaGlsZDIiLCJTVExBc3NldCIsInByb3BzIiwibW9kZWwiLCJ1c2VMb2FkZXIiLCJTVExMb2FkZXIiLCJ1cmwiLCJ0IiwicSIsInNjYWxlIiwiY29sb3IiLCJHTFRGQXNzZXQiLCJHTFRGTG9hZGVyIiwidXNlRWZmZWN0Iiwic2NlbmUiLCJDb2xsYWRhQXNzZXQiLCJDb2xsYWRhTG9hZGVyIiwidXNlTWVtbyIsImNsb25lIiwibmFtZSIsIk9CSkFzc2V0IiwibXRsdXJsIiwic2xpY2UiLCJsZW5ndGgiLCJtYXRlcmlhbHMiLCJNVExMb2FkZXIiLCJPQkpMb2FkZXIiLCJsb2FkZXIiLCJwcmVsb2FkIiwic2V0TWF0ZXJpYWxzIiwiVlJNTEFzc2V0IiwiVlJNTExvYWRlciIsIlBDREFzc2V0IiwiUENETG9hZGVyIiwiUExZQXNzZXQiLCJQTFlMb2FkZXIiLCJGQlhBc3NldCIsIkZCWExvYWRlciIsIlNWR1NoYXBlIiwic2hhcGUiLCJpbmRleCIsIlNWR0Fzc2V0IiwiUmVhY3QiLCJtZW1vIiwiU1ZHTG9hZGVyIiwicGF0aHMiLCJzaGFwZXMiLCJmbGF0TWFwIiwicGF0aCIsInRvU2hhcGVzIiwibWFwIiwibmV3UHJvcHMiLCJrZXkiLCJMb2FkZXIiLCJleHQiLCJmaWxlbmFtZSIsInNwbGl0IiwicG9wIiwidG9Mb3dl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O0FBQUEsZUFBUDtBQUNBOztBQUVKLFNBQUssS0FBTDtBQUNJLDBCQUFPLHFFQUFDLFNBQUQ7QUFBVyxXQUFHLEVBQUVJO0FBQWhCLFNBQXlCSixLQUF6QjtBQUFBO0FBQUE7QUFBQTtBQUFBLGVBQVA7QUFDQTs7QUFFSixTQUFLLEtBQUw7QUFDSSwwQkFBTyxxRUFBQyxRQUFEO0FBQVUsV0FBRyxFQUFFSTtBQUFmLFNBQXdCSixLQUF4QjtBQUFBO0FBQUE7QUFBQTtBQUFBLGVBQVA7QUFDQTs7QUFFSixTQUFLLEtBQUw7QUFDSSwwQkFBTyxxRUFBQyxRQUFEO0FBQVUsV0FBRyxFQUFFSTtBQUFmLFNBQXdCSixLQUF4QjtBQUFBO0FBQUE7QUFBQTtBQUFBLGVBQVA7QUFDQTs7QUFFSixTQUFLLEtBQUw7QUFDSSwwQkFBTyxxRUFBQyxRQUFEO0FBQVUsV0FBRyxFQUFFSTtBQUFmLFNBQXdCSixLQUF4QjtBQUFBO0FBQUE7QUFBQTtBQUFBLGVBQVA7QUFDQTs7QUFFSixTQUFLLEtBQUw7QUFDSSwwQkFBTyxxRUFBQyxRQUFEO0FBQVUsV0FBRyxFQUFFSTtBQUFmLFNBQXdCSixLQUF4QjtBQUFBO0FBQUE7QUFBQTtBQUFBLGVBQVA7QUFDQTs7QUFFSjtBQUNJLDBCQUFPLHFFQUFDLFlBQUQ7QUFBYyxXQUFHLEVBQUVJO0FBQW5CLFNBQTRCSixLQUE1QjtBQUFBO0FBQUE7QUFBQTtBQUFBLGVBQVA7QUF2Q1I7QUF5Q0gsQ0FqREQ7O09BQU1tRCxNO0FBbURTQSxxRUFBZiIsImZpbGUiOiIuL2NvbXBvbmVudHMvTG9hZGVyLnRzeC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyB1c2VNZW1vLCB1c2VFZmZlY3QsIFN1c3BlbnNlIH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgeyB1c2VMb2FkZXIgfSBmcm9tICdyZWFjdC10aHJlZS1maWJlcidcbmltcG9ydCAqIGFzIFRIUkVFIGZyb20gJ3RocmVlJ1xuVEhSRUUuT2JqZWN0M0QuRGVmYXVsdFVwLnNldCgwLCAwLCAxKVxuaW1wb3J0IHsgSVNoYXBlUHJvcHMgfSBmcm9tICcuL1N3aWZ0Q29tcG9uZW50cydcbmltcG9ydCB7IFNUTExvYWRlciB9IGZyb20gJ3RocmVlL2V4YW1wbGVzL2pzbS9sb2FkZXJzL1NUTExvYWRlcidcbmltcG9ydCB7IEdMVEZMb2FkZXIgfSBmcm9tICd0aHJlZS9leGFtcGxlcy9qc20vbG9hZGVycy9HTFRGTG9hZGVyJ1xuaW1wb3J0IHsgQ29sbGFkYUxvYWRlciB9IGZyb20gJ3RocmVlL2V4YW1wbGVzL2pzbS9sb2FkZXJzL0NvbGxhZGFMb2FkZXInXG5pbXBvcnQgeyBPQkpMb2FkZXIgfSBmcm9tICd0aHJlZS9leGFtcGxlcy9qc20vbG9hZGVycy9PQkpMb2FkZXInXG5pbXBvcnQgeyBNVExMb2FkZXIgfSBmcm9tICd0aHJlZS9leGFtcGxlcy9qc20vbG9hZGVycy9NVExMb2FkZXInXG5pbXBvcnQgeyBWUk1MTG9hZGVyIH0gZnJvbSAndGhyZWUvZXhhbXBsZXMvanNtL2xvYWRlcnMvVlJNTExvYWRlcidcbmltcG9ydCB7IFBDRExvYWRlciB9IGZyb20gJ3RocmVlL2V4YW1wbGVzL2pzbS9sb2FkZXJzL1BDRExvYWRlcidcbmltcG9ydCB7IFBMWUxvYWRlciB9IGZyb20gJ3RocmVlL2V4YW1wbGVzL2pzbS9sb2FkZXJzL1BMWUxvYWRlcidcbmltcG9ydCB7IEZCWExvYWRlciB9IGZyb20gJ3RocmVlL2V4YW1wbGVzL2pzbS9sb2FkZXJzL0ZCWExvYWRlcidcbmltcG9ydCB7IFNWR0xvYWRlciB9IGZyb20gJ3RocmVlL2V4YW1wbGVzL2pzbS9sb2FkZXJzL1NWR0xvYWRlcidcblxuY29uc3QgZGVmYXVsdENvbG9yID0gJ2hvdHBpbmsnXG5cbmV4cG9ydCBpbnRlcmZhY2UgSU1lc2hTaGFwZVByb3BzIGV4dGVuZHMgSVNoYXBlUHJvcHMge1xuICAgIHVybDogc3RyaW5nXG59XG5cbmNvbnN0IHRyYXZlcnNlQ2hpbGRyZW4gPSAoY2hpbGQsIG9wYWNpdHksIHNoYWRvdykgPT4ge1xuICAgIGlmIChjaGlsZC5pc01lc2gpIHtcbiAgICAgICAgaWYgKHNoYWRvdykge1xuICAgICAgICAgICAgY2hpbGQuY2FzdFNoYWRvdyA9IHRydWVcbiAgICAgICAgICAgIGNoaWxkLnJlY2VpdmVTaGFkb3cgPSB0cnVlXG4gICAgICAgIH1cblxuICAgICAgICBpZiAob3BhY2l0eSAhPT0gMS4wKSB7XG4gICAgICAgICAgICBpZiAoY2hpbGQubWF0ZXJpYWwuaXNNYXRlcmlhbCkge1xuICAgICAgICAgICAgICAgIGNoaWxkLm1hdGVyaWFsLnRyYW5zcGFyZW50ID0gdHJ1ZVxuICAgICAgICAgICAgICAgIGNoaWxkLm1hdGVyaWFsLm9wYWNpdHkgPSBvcGFjaXR5XG4gICAgICAgICAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoY2hpbGQubWF0ZXJpYWwpKSB7XG4gICAgICAgICAgICAgICAgY2hpbGQubWF0ZXJpYWwuZm9yRWFjaCgobWF0KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIG1hdC50cmFuc3BhcmVudCA9IHRydWVcbiAgICAgICAgICAgICAgICAgICAgbWF0Lm9wYWNpdHkgPSBvcGFjaXR5XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0gZWxzZSBpZiAoY2hpbGQudHlwZSA9PT0gJ1BvaW50TGlnaHQnKSB7XG4gICAgICAgIGNoaWxkLnZpc2libGUgPSBmYWxzZVxuICAgIH0gZWxzZSBpZiAoY2hpbGQuaXNPYmplY3QzRCB8fCBjaGlsZC5pc0dyb3VwKSB7XG4gICAgICAgIGNoaWxkLmNoaWxkcmVuLmZvckVhY2goKGNoaWxkMikgPT4ge1xuICAgICAgICAgICAgdHJhdmVyc2VDaGlsZHJlbihjaGlsZDIsIG9wYWNpdHksIHNoYWRvdylcbiAgICAgICAgfSlcbiAgICB9XG59XG5cbmNvbnN0IFNUTEFzc2V0ID0gKHByb3BzOiBJTWVzaFNoYXBlUHJvcHMpOiBKU1guRWxlbWVudCA9PiB7XG4gICAgY29uc3QgbW9kZWwgPSB1c2VMb2FkZXIoU1RMTG9hZGVyLCBwcm9wcy51cmwpXG5cbiAgICByZXR1cm4gKFxuICAgICAgICA8bWVzaFxuICAgICAgICAgICAgcG9zaXRpb249e3Byb3BzLnR9XG4gICAgICAgICAgICBxdWF0ZXJuaW9uPXtwcm9wcy5xfVxuICAgICAgICAgICAgY2FzdFNoYWRvdz17dHJ1ZX1cbiAgICAgICAgICAgIHJlY2VpdmVTaGFkb3c9e3RydWV9XG4gICAgICAgICAgICBzY2FsZT17cHJvcHMuc2NhbGV9XG4gICAgICAgID5cbiAgICAgICAgICAgIDxwcmltaXRpdmUgb2JqZWN0PXttb2RlbH0gYXR0YWNoPVwiZ2VvbWV0cnlcIiAvPlxuICAgICAgICAgICAgPG1lc2hTdGFuZGFyZE1hdGVyaWFsXG4gICAgICAgICAgICAgICAgY29sb3I9e3Byb3BzLmNvbG9yID8gcHJvcHMuY29sb3IgOiBkZWZhdWx0Q29sb3J9XG4gICAgICAgICAgICAgICAgdHJhbnNwYXJlbnQ9e3Byb3BzLm9wYWNpdHkgIT09IDEuMCA/IHRydWUgOiBmYWxzZX1cbiAgICAgICAgICAgICAgICBvcGFjaXR5PXtwcm9wcy5vcGFjaXR5ID8gcHJvcHMub3BhY2l0eSA6IDEuMH1cbiAgICAgICAgICAgIC8+XG4gICAgICAgIDwvbWVzaD5cbiAgICApXG59XG5cbmNvbnN0IEdMVEZBc3NldCA9IChwcm9wczogSU1lc2hTaGFwZVByb3BzKTogSlNYLkVsZW1lbnQgPT4ge1xuICAgIGNvbnN0IG1vZGVsID0gdXNlTG9hZGVyKEdMVEZMb2FkZXIsIHByb3BzLnVybClcblxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIG1vZGVsLnNjZW5lLmNoaWxkcmVuLmZvckVhY2goKGNoaWxkKSA9PiB7XG4gICAgICAgICAgICB0cmF2ZXJzZUNoaWxkcmVuKGNoaWxkLCBwcm9wcy5vcGFjaXR5LCB0cnVlKVxuICAgICAgICB9KVxuICAgIH0pXG5cbiAgICByZXR1cm4gKFxuICAgICAgICA8bWVzaFxuICAgICAgICAgICAgcG9zaXRpb249e3Byb3BzLnR9XG4gICAgICAgICAgICBxdWF0ZXJuaW9uPXtwcm9wcy5xfVxuICAgICAgICAgICAgY2FzdFNoYWRvdz17dHJ1ZX1cbiAgICAgICAgICAgIHJlY2VpdmVTaGFkb3c9e3RydWV9XG4gICAgICAgICAgICBzY2FsZT17cHJvcHMuc2NhbGV9XG4gICAgICAgID5cbiAgICAgICAgICAgIDxwcmltaXRpdmVcbiAgICAgICAgICAgICAgICBvYmplY3Q9e21vZGVsLnNjZW5lfVxuICAgICAgICAgICAgICAgIG9wYWNpdHk9e3Byb3BzLm9wYWNpdHl9XG4gICAgICAgICAgICAgICAgY2FzdFNoYWRvdz17dHJ1ZX1cbiAgICAgICAgICAgICAgICByZWNlaXZlU2hhZG93PXt0cnVlfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgPC9tZXNoPlxuICAgIClcbn1cblxuY29uc3QgQ29sbGFkYUFzc2V0ID0gKHByb3BzOiBJTWVzaFNoYXBlUHJvcHMpOiBKU1guRWxlbWVudCA9PiB7XG4gICAgY29uc3QgbW9kZWwgPSB1c2VMb2FkZXIoQ29sbGFkYUxvYWRlciwgcHJvcHMudXJsKVxuICAgIGNvbnN0IHNjZW5lID0gdXNlTWVtbygoKSA9PiBtb2RlbC5zY2VuZS5jbG9uZSgpLCBbbW9kZWwuc2NlbmVdKVxuXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgc2NlbmUuY2hpbGRyZW4uZm9yRWFjaCgoY2hpbGQpID0+IHtcbiAgICAgICAgICAgIHRyYXZlcnNlQ2hpbGRyZW4oY2hpbGQsIHByb3BzLm9wYWNpdHksIHRydWUpXG4gICAgICAgIH0pXG5cbiAgICAgICAgc2NlbmUubmFtZSA9ICdsb2FkZWQnXG5cbiAgICAgICAgLy8gaWYgKHByb3BzLnEpIHtcbiAgICAgICAgLy8gICAgIG1vZGVsLnNjZW5lLnF1YXRlcm5pb24uc2V0KFxuICAgICAgICAvLyAgICAgICAgIHByb3BzLnFbMF0sXG4gICAgICAgIC8vICAgICAgICAgcHJvcHMucVsxXSxcbiAgICAgICAgLy8gICAgICAgICBwcm9wcy5xWzJdLFxuICAgICAgICAvLyAgICAgICAgIHByb3BzLnFbM11cbiAgICAgICAgLy8gICAgIClcbiAgICAgICAgLy8gfVxuICAgIH0pXG5cbiAgICAvLyByZXR1cm4gKFxuICAgIC8vICAgICA8Z3JvdXBcbiAgICAvLyAgICAgICAgIHBvc2l0aW9uPXtwcm9wcy50fVxuICAgIC8vICAgICAgICAgY2FzdFNoYWRvdz17dHJ1ZX1cbiAgICAvLyAgICAgICAgIHJlY2VpdmVTaGFkb3c9e3RydWV9XG4gICAgLy8gICAgICAgICBzY2FsZT17cHJvcHMuc2NhbGV9XG4gICAgLy8gICAgICAgICBxdWF0ZXJuaW9uPXtwcm9wcy5xfVxuICAgIC8vICAgICA+XG4gICAgLy8gICAgICAgICA8cHJpbWl0aXZlIG9iamVjdD17bW9kZWwuc2NlbmV9IC8+XG4gICAgLy8gICAgIDwvZ3JvdXA+XG4gICAgLy8gKVxuXG4gICAgcmV0dXJuIChcbiAgICAgICAgPHByaW1pdGl2ZVxuICAgICAgICAgICAgb2JqZWN0PXtzY2VuZX1cbiAgICAgICAgICAgIHBvc2l0aW9uPXtwcm9wcy50fVxuICAgICAgICAgICAgc2NhbGU9e3Byb3BzLnNjYWxlfVxuICAgICAgICAgICAgcXVhdGVybmlvbj17cHJvcHMucX1cbiAgICAgICAgLz5cbiAgICApXG59XG5cbmNvbnN0IE9CSkFzc2V0ID0gKHByb3BzOiBJTWVzaFNoYXBlUHJvcHMpOiBKU1guRWxlbWVudCA9PiB7XG4gICAgY29uc3QgbXRsdXJsID0gcHJvcHMudXJsLnNsaWNlKDAsIHByb3BzLnVybC5sZW5ndGggLSAzKSArICdtdGwnXG4gICAgY29uc3QgbWF0ZXJpYWxzID0gdXNlTG9hZGVyKE1UTExvYWRlciwgbXRsdXJsKVxuICAgIGNvbnN0IG1vZGVsID0gdXNlTG9hZGVyKE9CSkxvYWRlciwgcHJvcHMudXJsLCAobG9hZGVyKSA9PiB7XG4gICAgICAgIG1hdGVyaWFscy5wcmVsb2FkKClcbiAgICAgICAgbG9hZGVyLnNldE1hdGVyaWFscyhtYXRlcmlhbHMpXG4gICAgfSlcblxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIG1vZGVsLmNoaWxkcmVuLmZvckVhY2goKGNoaWxkKSA9PiB7XG4gICAgICAgICAgICB0cmF2ZXJzZUNoaWxkcmVuKGNoaWxkLCBwcm9wcy5vcGFjaXR5LCB0cnVlKVxuICAgICAgICB9KVxuICAgIH0pXG5cbiAgICByZXR1cm4gKFxuICAgICAgICA8bWVzaFxuICAgICAgICAgICAgcG9zaXRpb249e3Byb3BzLnR9XG4gICAgICAgICAgICBxdWF0ZXJuaW9uPXtwcm9wcy5xfVxuICAgICAgICAgICAgY2FzdFNoYWRvdz17dHJ1ZX1cbiAgICAgICAgICAgIHJlY2VpdmVTaGFkb3c9e3RydWV9XG4gICAgICAgICAgICBzY2FsZT17cHJvcHMuc2NhbGV9XG4gICAgICAgID5cbiAgICAgICAgICAgIDxwcmltaXRpdmUgb2JqZWN0PXttb2RlbH0gLz5cbiAgICAgICAgPC9tZXNoPlxuICAgIClcbn1cblxuY29uc3QgVlJNTEFzc2V0ID0gKHByb3BzOiBJTWVzaFNoYXBlUHJvcHMpOiBKU1guRWxlbWVudCA9PiB7XG4gICAgY29uc3QgbW9kZWwgPSB1c2VMb2FkZXIoVlJNTExvYWRlciwgcHJvcHMudXJsKVxuXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgbW9kZWwuY2hpbGRyZW4uZm9yRWFjaCgoY2hpbGQpID0+IHtcbiAgICAgICAgICAgIHRyYXZlcnNlQ2hpbGRyZW4oY2hpbGQsIHByb3BzLm9wYWNpdHksIHRydWUpXG4gICAgICAgIH0pXG4gICAgfSlcblxuICAgIHJldHVybiAoXG4gICAgICAgIDxtZXNoXG4gICAgICAgICAgICBwb3NpdGlvbj17cHJvcHMudH1cbiAgICAgICAgICAgIHF1YXRlcm5pb249e3Byb3BzLnF9XG4gICAgICAgICAgICBjYXN0U2hhZG93PXt0cnVlfVxuICAgICAgICAgICAgcmVjZWl2ZVNoYWRvdz17dHJ1ZX1cbiAgICAgICAgICAgIHNjYWxlPXtwcm9wcy5zY2FsZX1cbiAgICAgICAgPlxuICAgICAgICAgICAgPHByaW1pdGl2ZSBvYmplY3Q9e21vZGVsfSAvPlxuICAgICAgICA8L21lc2g+XG4gICAgKVxufVxuXG5jb25zdCBQQ0RBc3NldCA9IChwcm9wczogSU1lc2hTaGFwZVByb3BzKTogSlNYLkVsZW1lbnQgPT4ge1xuICAgIGNvbnN0IG1vZGVsID0gdXNlTG9hZGVyKFBDRExvYWRlciwgcHJvcHMudXJsKVxuXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgbW9kZWwubWF0ZXJpYWwuY29sb3IgPSBwcm9wcy5jb2xvclxuICAgICAgICAgICAgPyBuZXcgVEhSRUUuQ29sb3IocHJvcHMuY29sb3IpXG4gICAgICAgICAgICA6IG5ldyBUSFJFRS5Db2xvcihkZWZhdWx0Q29sb3IpXG4gICAgICAgIG1vZGVsLm1hdGVyaWFsLnRyYW5zcGFyZW50ID0gcHJvcHMub3BhY2l0eSAhPT0gMS4wID8gdHJ1ZSA6IGZhbHNlXG4gICAgICAgIG1vZGVsLm1hdGVyaWFsLm9wYWNpdHkgPSBwcm9wcy5vcGFjaXR5ID8gcHJvcHMub3BhY2l0eSA6IDEuMFxuICAgIH0pXG5cbiAgICByZXR1cm4gKFxuICAgICAgICA8bWVzaFxuICAgICAgICAgICAgcG9zaXRpb249e3Byb3BzLnR9XG4gICAgICAgICAgICBxdWF0ZXJuaW9uPXtwcm9wcy5xfVxuICAgICAgICAgICAgY2FzdFNoYWRvdz17dHJ1ZX1cbiAgICAgICAgICAgIHJlY2VpdmVTaGFkb3c9e3RydWV9XG4gICAgICAgICAgICBzY2FsZT17cHJvcHMuc2NhbGV9XG4gICAgICAgID5cbiAgICAgICAgICAgIDxwcmltaXRpdmUgb2JqZWN0PXttb2RlbH0gLz5cbiAgICAgICAgPC9tZXNoPlxuICAgIClcbn1cblxuY29uc3QgUExZQXNzZXQgPSAocHJvcHM6IElNZXNoU2hhcGVQcm9wcyk6IEpTWC5FbGVtZW50ID0+IHtcbiAgICBjb25zdCBtb2RlbCA9IHVzZUxvYWRlcihQTFlMb2FkZXIsIHByb3BzLnVybClcblxuICAgIHJldHVybiAoXG4gICAgICAgIDxtZXNoXG4gICAgICAgICAgICBwb3NpdGlvbj17cHJvcHMudH1cbiAgICAgICAgICAgIHF1YXRlcm5pb249e3Byb3BzLnF9XG4gICAgICAgICAgICBjYXN0U2hhZG93PXt0cnVlfVxuICAgICAgICAgICAgcmVjZWl2ZVNoYWRvdz17dHJ1ZX1cbiAgICAgICAgICAgIHNjYWxlPXtwcm9wcy5zY2FsZX1cbiAgICAgICAgPlxuICAgICAgICAgICAgPHByaW1pdGl2ZSBvYmplY3Q9e21vZGVsfSBhdHRhY2g9XCJnZW9tZXRyeVwiIC8+XG4gICAgICAgICAgICA8bWVzaFN0YW5kYXJkTWF0ZXJpYWxcbiAgICAgICAgICAgICAgICBjb2xvcj17cHJvcHMuY29sb3IgPyBwcm9wcy5jb2xvciA6IGRlZmF1bHRDb2xvcn1cbiAgICAgICAgICAgICAgICB0cmFuc3BhcmVudD17cHJvcHMub3BhY2l0eSAhPT0gMS4wID8gdHJ1ZSA6IGZhbHNlfVxuICAgICAgICAgICAgICAgIG9wYWNpdHk9e3Byb3BzLm9wYWNpdHkgPyBwcm9wcy5vcGFjaXR5IDogMS4wfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgPC9tZXNoPlxuICAgIClcbn1cblxuY29uc3QgRkJYQXNzZXQgPSAocHJvcHM6IElNZXNoU2hhcGVQcm9wcyk6IEpTWC5FbGVtZW50ID0+IHtcbiAgICBjb25zdCBtb2RlbCA9IHVzZUxvYWRlcihGQlhMb2FkZXIsIHByb3BzLnVybClcblxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIG1vZGVsLmNoaWxkcmVuLmZvckVhY2goKGNoaWxkKSA9PiB7XG4gICAgICAgICAgICB0cmF2ZXJzZUNoaWxkcmVuKGNoaWxkLCBwcm9wcy5vcGFjaXR5LCB0cnVlKVxuICAgICAgICB9KVxuICAgIH0pXG5cbiAgICByZXR1cm4gKFxuICAgICAgICA8bWVzaFxuICAgICAgICAgICAgcG9zaXRpb249e3Byb3BzLnR9XG4gICAgICAgICAgICBxdWF0ZXJuaW9uPXtwcm9wcy5xfVxuICAgICAgICAgICAgY2FzdFNoYWRvdz17dHJ1ZX1cbiAgICAgICAgICAgIHJlY2VpdmVTaGFkb3c9e3RydWV9XG4gICAgICAgICAgICBzY2FsZT17cHJvcHMuc2NhbGV9XG4gICAgICAgID5cbiAgICAgICAgICAgIDxwcmltaXRpdmUgb2JqZWN0PXttb2RlbH0gLz5cbiAgICAgICAgPC9tZXNoPlxuICAgIClcbn1cblxuY29uc3QgU1ZHU2hhcGUgPSAoeyBzaGFwZSwgY29sb3IsIGluZGV4LCBvcGFjaXR5IH0pID0+IChcbiAgICA8bWVzaD5cbiAgICAgICAgPG1lc2hMYW1iZXJ0TWF0ZXJpYWxcbiAgICAgICAgICAgIGF0dGFjaD1cIm1hdGVyaWFsXCJcbiAgICAgICAgICAgIGNvbG9yPXtjb2xvcn1cbiAgICAgICAgICAgIHBvbHlnb25PZmZzZXRcbiAgICAgICAgICAgIHBvbHlnb25PZmZzZXRGYWN0b3I9e2luZGV4ICogLTAuMX1cbiAgICAgICAgICAgIHRyYW5zcGFyZW50PXtvcGFjaXR5ICE9PSAxLjAgPyB0cnVlIDogZmFsc2V9XG4gICAgICAgICAgICBvcGFjaXR5PXtvcGFjaXR5ID8gb3BhY2l0eSA6IDEuMH1cbiAgICAgICAgLz5cbiAgICAgICAgPHNoYXBlQnVmZmVyR2VvbWV0cnkgYXR0YWNoPVwiZ2VvbWV0cnlcIiBhcmdzPXtbc2hhcGVdfSAvPlxuICAgIDwvbWVzaD5cbilcblxuY29uc3QgU1ZHQXNzZXQgPSBSZWFjdC5tZW1vKFxuICAgIChwcm9wczogSU1lc2hTaGFwZVByb3BzKTogSlNYLkVsZW1lbnQgPT4ge1xuICAgICAgICBjb25zdCB7IHBhdGhzIH0gPSB1c2VMb2FkZXIoU1ZHTG9hZGVyLCBwcm9wcy51cmwpXG4gICAgICAgIGNvbnN0IHNoYXBlcyA9IHVzZU1lbW8oXG4gICAgICAgICAgICAoKSA9PlxuICAgICAgICAgICAgICAgIHBhdGhzLmZsYXRNYXAoKHBhdGgsIGluZGV4KSA9PlxuICAgICAgICAgICAgICAgICAgICBwYXRoXG4gICAgICAgICAgICAgICAgICAgICAgICAudG9TaGFwZXModHJ1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKHNoYXBlKSA9PiAoeyBpbmRleCwgc2hhcGUsIGNvbG9yOiBwYXRoLmNvbG9yIH0pKVxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICBbcGF0aHNdXG4gICAgICAgIClcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxncm91cFxuICAgICAgICAgICAgICAgIGNoaWxkcmVuPXtzaGFwZXMubWFwKChuZXdQcm9wcywga2V5KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgIDxTVkdTaGFwZSBrZXk9e2tleX0gb3BhY2l0eT17cHJvcHMub3BhY2l0eX0gey4uLm5ld1Byb3BzfSAvPlxuICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgIHNjYWxlPXtbXG4gICAgICAgICAgICAgICAgICAgIC0wLjAxICogcHJvcHMuc2NhbGVbMF0sXG4gICAgICAgICAgICAgICAgICAgIDAuMDEgKiBwcm9wcy5zY2FsZVsxXSxcbiAgICAgICAgICAgICAgICAgICAgMC4wMSAqIHByb3BzLnNjYWxlWzJdLFxuICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgICAgcG9zaXRpb249e3Byb3BzLnR9XG4gICAgICAgICAgICAgICAgcXVhdGVybmlvbj17cHJvcHMucX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgIClcbiAgICB9XG4pXG5cbmNvbnN0IExvYWRlciA9IChwcm9wczogSVNoYXBlUHJvcHMpOiBKU1guRWxlbWVudCA9PiB7XG4gICAgY29uc3QgZXh0ID0gcHJvcHMuZmlsZW5hbWUuc3BsaXQoJy4nKS5wb3AoKS50b0xvd2VyQ2FzZSgpXG4gICAgbGV0IHVybCA9IHByb3BzLmZpbGVuYW1lXG5cbiAgICBpZiAobmF2aWdhdG9yLmFwcFZlcnNpb24uaW5kZXhPZignV2luJykgIT0gLTEpIHtcbiAgICAgICAgdXJsID0gdXJsLnNsaWNlKDIpXG4gICAgfVxuXG4gICAgc3dpdGNoIChleHQpIHtcbiAgICAgICAgY2FzZSAnc3RsJzpcbiAgICAgICAgICAgIHJldHVybiA8U1RMQXNzZXQgdXJsPXt1cmx9IHsuLi5wcm9wc30gLz5cbiAgICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgY2FzZSAnZ2x0Zic6XG4gICAgICAgIGNhc2UgJ2dsYic6XG4gICAgICAgICAgICByZXR1cm4gPEdMVEZBc3NldCB1cmw9e3VybH0gey4uLnByb3BzfSAvPlxuICAgICAgICAgICAgYnJlYWtcblxuICAgICAgICBjYXNlICdkYWUnOlxuICAgICAgICAgICAgcmV0dXJuIDxDb2xsYWRhQXNzZXQgdXJsPXt1cmx9IHsuLi5wcm9wc30gLz5cbiAgICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgY2FzZSAnb2JqJzpcbiAgICAgICAgICAgIHJldHVybiA8T0JKQXNzZXQgdXJsPXt1cmx9IHsuLi5wcm9wc30gLz5cbiAgICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgY2FzZSAnd3JsJzpcbiAgICAgICAgICAgIHJldHVybiA8VlJNTEFzc2V0IHVybD17dXJsfSB7Li4ucHJvcHN9IC8+XG4gICAgICAgICAgICBicmVha1xuXG4gICAgICAgIGNhc2UgJ3BjZCc6XG4gICAgICAgICAgICByZXR1cm4gPFBDREFzc2V0IHVybD17dXJsfSB7Li4ucHJvcHN9IC8+XG4gICAgICAgICAgICBicmVha1xuXG4gICAgICAgIGNhc2UgJ3BseSc6XG4gICAgICAgICAgICByZXR1cm4gPFBMWUFzc2V0IHVybD17dXJsfSB7Li4ucHJvcHN9IC8+XG4gICAgICAgICAgICBicmVha1xuXG4gICAgICAgIGNhc2UgJ2ZieCc6XG4gICAgICAgICAgICByZXR1cm4gPEZCWEFzc2V0IHVybD17dXJsfSB7Li4ucHJvcHN9IC8+XG4gICAgICAgICAgICBicmVha1xuXG4gICAgICAgIGNhc2UgJ3N2Zyc6XG4gICAgICAgICAgICByZXR1cm4gPFNWR0Fzc2V0IHVybD17dXJsfSB7Li4ucHJvcHN9IC8+XG4gICAgICAgICAgICBicmVha1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gPENvbGxhZGFBc3NldCB1cmw9e3VybH0gey4uLnByb3BzfSAvPlxuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgTG9hZGVyXG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./components/Loader.tsx\n");

/***/ }),

/***/ "./node_modules/next/dist/compiled/webpack/amd-options.js":
/*!****************************************!*\
  !*** (webpack)/webpack/amd-options.js ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("/* WEBPACK VAR INJECTION */(function(__webpack_amd_options__, __dirname) {module.exports =\n/******/ (function() { // webpackBootstrap\n/******/ \tvar __webpack_modules__ = ({\n\n/***/ 929:\n/***/ (function(module) {\n\n/* globals __webpack_amd_options__ */\nmodule.exports = __webpack_amd_options__;\n\n\n/***/ })\n\n/******/ \t});\n/************************************************************************/\n/******/ \t// The module cache\n/******/ \tvar __webpack_module_cache__ = {};\n/******/ \t\n/******/ \t// The require function\n/******/ \tfunction __nccwpck_require__(moduleId) {\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(__webpack_module_cache__[moduleId]) {\n/******/ \t\t\treturn __webpack_module_cache__[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = __webpack_module_cache__[moduleId] = {\n/******/ \t\t\t// no module.id needed\n/******/ \t\t\t// no module.loaded needed\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/ \t\n/******/ \t\t// Execute the module function\n/******/ \t\tvar threw = true;\n/******/ \t\ttry {\n/******/ \t\t\t__webpack_modules__[moduleId](module, module.exports, __nccwpck_require__);\n/******/ \t\t\tthrew = false;\n/******/ \t\t} finally {\n/******/ \t\t\tif(threw) delete __webpack_module_cache__[moduleId];\n/******/ \t\t}\n/******/ \t\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/ \t\n/************************************************************************/\n/******/ \t/* webpack/runtime/compat */\n/******/ \t\n/******/ \t__nccwpck_require__.ab = __dirname + \"/\";/************************************************************************/\n/******/ \t// module exports must be returned from runtime so entry inlining is disabled\n/******/ \t// startup\n/******/ \t// Load entry module and return exports\n/******/ \treturn __nccwpck_require__(929);\n/******/ })()\n;\n/* WEBPACK VAR INJECTION */}.call(this, {}, \"/\"))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLyh3ZWJwYWNrKS93ZWJwYWNrL2FtZC1vcHRpb25zLmpzPzc2YzUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQSxzQkFBc0I7QUFDdEI7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOzs7QUFHQSxPQUFPOztBQUVQLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFtRDtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVixDIiwiZmlsZSI6Ii4vbm9kZV9tb2R1bGVzL25leHQvZGlzdC9jb21waWxlZC93ZWJwYWNrL2FtZC1vcHRpb25zLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPVxuLyoqKioqKi8gKGZ1bmN0aW9uKCkgeyAvLyB3ZWJwYWNrQm9vdHN0cmFwXG4vKioqKioqLyBcdHZhciBfX3dlYnBhY2tfbW9kdWxlc19fID0gKHtcblxuLyoqKi8gOTI5OlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSkge1xuXG4vKiBnbG9iYWxzIF9fd2VicGFja19hbWRfb3B0aW9uc19fICovXG5tb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19hbWRfb3B0aW9uc19fO1xuXG5cbi8qKiovIH0pXG5cbi8qKioqKiovIFx0fSk7XG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKioqKi8gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdHZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcbi8qKioqKiovIFx0XG4vKioqKioqLyBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4vKioqKioqLyBcdGZ1bmN0aW9uIF9fbmNjd3Bja19yZXF1aXJlX18obW9kdWxlSWQpIHtcbi8qKioqKiovIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbi8qKioqKiovIFx0XHRpZihfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdKSB7XG4vKioqKioqLyBcdFx0XHRyZXR1cm4gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXS5leHBvcnRzO1xuLyoqKioqKi8gXHRcdH1cbi8qKioqKiovIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuLyoqKioqKi8gXHRcdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuLyoqKioqKi8gXHRcdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuLyoqKioqKi8gXHRcdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcbi8qKioqKiovIFx0XHRcdGV4cG9ydHM6IHt9XG4vKioqKioqLyBcdFx0fTtcbi8qKioqKiovIFx0XG4vKioqKioqLyBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4vKioqKioqLyBcdFx0dmFyIHRocmV3ID0gdHJ1ZTtcbi8qKioqKiovIFx0XHR0cnkge1xuLyoqKioqKi8gXHRcdFx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX19uY2N3cGNrX3JlcXVpcmVfXyk7XG4vKioqKioqLyBcdFx0XHR0aHJldyA9IGZhbHNlO1xuLyoqKioqKi8gXHRcdH0gZmluYWxseSB7XG4vKioqKioqLyBcdFx0XHRpZih0aHJldykgZGVsZXRlIF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG4vKioqKioqLyBcdFx0fVxuLyoqKioqKi8gXHRcbi8qKioqKiovIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuLyoqKioqKi8gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbi8qKioqKiovIFx0fVxuLyoqKioqKi8gXHRcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqKioqLyBcdC8qIHdlYnBhY2svcnVudGltZS9jb21wYXQgKi9cbi8qKioqKiovIFx0XG4vKioqKioqLyBcdF9fbmNjd3Bja19yZXF1aXJlX18uYWIgPSBfX2Rpcm5hbWUgKyBcIi9cIjsvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKioqKi8gXHQvLyBtb2R1bGUgZXhwb3J0cyBtdXN0IGJlIHJldHVybmVkIGZyb20gcnVudGltZSBzbyBlbnRyeSBpbmxpbmluZyBpcyBkaXNhYmxlZFxuLyoqKioqKi8gXHQvLyBzdGFydHVwXG4vKioqKioqLyBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLyoqKioqKi8gXHRyZXR1cm4gX19uY2N3cGNrX3JlcXVpcmVfXyg5MjkpO1xuLyoqKioqKi8gfSkoKVxuOyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/next/dist/compiled/webpack/amd-options.js\n");

/***/ }),

/***/ "./node_modules/three/examples/jsm/curves/NURBSCurve.js":
/*!**************************************************************!*\
  !*** ./node_modules/three/examples/jsm/curves/NURBSCurve.js ***!
  \**************************************************************/
/*! exports provided: NURBSCurve */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"NURBSCurve\", function() { return NURBSCurve; });\n/* harmony import */ var _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../build/three.module.js */ \"./node_modules/three/build/three.module.js\");\n/* harmony import */ var _curves_NURBSUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../curves/NURBSUtils.js */ \"./node_modules/three/examples/jsm/curves/NURBSUtils.js\");\n\n\n\n/**\n * NURBS curve object\n *\n * Derives from Curve, overriding getPoint and getTangent.\n *\n * Implementation is based on (x, y [, z=0 [, w=1]]) control points with w=weight.\n *\n **/\n\nvar NURBSCurve = function ( degree, knots /* array of reals */, controlPoints /* array of Vector(2|3|4) */, startKnot /* index in knots */, endKnot /* index in knots */ ) {\n\n\t_build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Curve\"].call( this );\n\n\tthis.degree = degree;\n\tthis.knots = knots;\n\tthis.controlPoints = [];\n\t// Used by periodic NURBS to remove hidden spans\n\tthis.startKnot = startKnot || 0;\n\tthis.endKnot = endKnot || ( this.knots.length - 1 );\n\tfor ( var i = 0; i < controlPoints.length; ++ i ) {\n\n\t\t// ensure Vector4 for control points\n\t\tvar point = controlPoints[ i ];\n\t\tthis.controlPoints[ i ] = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector4\"]( point.x, point.y, point.z, point.w );\n\n\t}\n\n};\n\n\nNURBSCurve.prototype = Object.create( _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Curve\"].prototype );\nNURBSCurve.prototype.constructor = NURBSCurve;\n\n\nNURBSCurve.prototype.getPoint = function ( t, optionalTarget ) {\n\n\tvar point = optionalTarget || new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector3\"]();\n\n\tvar u = this.knots[ this.startKnot ] + t * ( this.knots[ this.endKnot ] - this.knots[ this.startKnot ] ); // linear mapping t->u\n\n\t// following results in (wx, wy, wz, w) homogeneous point\n\tvar hpoint = _curves_NURBSUtils_js__WEBPACK_IMPORTED_MODULE_1__[\"NURBSUtils\"].calcBSplinePoint( this.degree, this.knots, this.controlPoints, u );\n\n\tif ( hpoint.w != 1.0 ) {\n\n\t\t// project to 3D space: (wx, wy, wz, w) -> (x, y, z, 1)\n\t\thpoint.divideScalar( hpoint.w );\n\n\t}\n\n\treturn point.set( hpoint.x, hpoint.y, hpoint.z );\n\n};\n\n\nNURBSCurve.prototype.getTangent = function ( t, optionalTarget ) {\n\n\tvar tangent = optionalTarget || new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector3\"]();\n\n\tvar u = this.knots[ 0 ] + t * ( this.knots[ this.knots.length - 1 ] - this.knots[ 0 ] );\n\tvar ders = _curves_NURBSUtils_js__WEBPACK_IMPORTED_MODULE_1__[\"NURBSUtils\"].calcNURBSDerivatives( this.degree, this.knots, this.controlPoints, u, 1 );\n\ttangent.copy( ders[ 1 ] ).normalize();\n\n\treturn tangent;\n\n};\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL3RocmVlL2V4YW1wbGVzL2pzbS9jdXJ2ZXMvTlVSQlNDdXJ2ZS5qcz8xNGUyIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBSXdDO0FBQ2E7O0FBRXJEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsQ0FBQyw0REFBSzs7QUFFTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsMEJBQTBCOztBQUUzQztBQUNBO0FBQ0EsZ0NBQWdDLDhEQUFPOztBQUV2Qzs7QUFFQTs7O0FBR0Esc0NBQXNDLDREQUFLO0FBQzNDOzs7QUFHQTs7QUFFQSxtQ0FBbUMsOERBQU87O0FBRTFDLDBHQUEwRzs7QUFFMUc7QUFDQSxjQUFjLGdFQUFVOztBQUV4Qjs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOzs7QUFHQTs7QUFFQSxxQ0FBcUMsOERBQU87O0FBRTVDO0FBQ0EsWUFBWSxnRUFBVTtBQUN0Qjs7QUFFQTs7QUFFQTs7QUFFc0IiLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvdGhyZWUvZXhhbXBsZXMvanNtL2N1cnZlcy9OVVJCU0N1cnZlLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcblx0Q3VydmUsXG5cdFZlY3RvcjMsXG5cdFZlY3RvcjRcbn0gZnJvbSAnLi4vLi4vLi4vYnVpbGQvdGhyZWUubW9kdWxlLmpzJztcbmltcG9ydCB7IE5VUkJTVXRpbHMgfSBmcm9tICcuLi9jdXJ2ZXMvTlVSQlNVdGlscy5qcyc7XG5cbi8qKlxuICogTlVSQlMgY3VydmUgb2JqZWN0XG4gKlxuICogRGVyaXZlcyBmcm9tIEN1cnZlLCBvdmVycmlkaW5nIGdldFBvaW50IGFuZCBnZXRUYW5nZW50LlxuICpcbiAqIEltcGxlbWVudGF0aW9uIGlzIGJhc2VkIG9uICh4LCB5IFssIHo9MCBbLCB3PTFdXSkgY29udHJvbCBwb2ludHMgd2l0aCB3PXdlaWdodC5cbiAqXG4gKiovXG5cbnZhciBOVVJCU0N1cnZlID0gZnVuY3Rpb24gKCBkZWdyZWUsIGtub3RzIC8qIGFycmF5IG9mIHJlYWxzICovLCBjb250cm9sUG9pbnRzIC8qIGFycmF5IG9mIFZlY3RvcigyfDN8NCkgKi8sIHN0YXJ0S25vdCAvKiBpbmRleCBpbiBrbm90cyAqLywgZW5kS25vdCAvKiBpbmRleCBpbiBrbm90cyAqLyApIHtcblxuXHRDdXJ2ZS5jYWxsKCB0aGlzICk7XG5cblx0dGhpcy5kZWdyZWUgPSBkZWdyZWU7XG5cdHRoaXMua25vdHMgPSBrbm90cztcblx0dGhpcy5jb250cm9sUG9pbnRzID0gW107XG5cdC8vIFVzZWQgYnkgcGVyaW9kaWMgTlVSQlMgdG8gcmVtb3ZlIGhpZGRlbiBzcGFuc1xuXHR0aGlzLnN0YXJ0S25vdCA9IHN0YXJ0S25vdCB8fCAwO1xuXHR0aGlzLmVuZEtub3QgPSBlbmRLbm90IHx8ICggdGhpcy5rbm90cy5sZW5ndGggLSAxICk7XG5cdGZvciAoIHZhciBpID0gMDsgaSA8IGNvbnRyb2xQb2ludHMubGVuZ3RoOyArKyBpICkge1xuXG5cdFx0Ly8gZW5zdXJlIFZlY3RvcjQgZm9yIGNvbnRyb2wgcG9pbnRzXG5cdFx0dmFyIHBvaW50ID0gY29udHJvbFBvaW50c1sgaSBdO1xuXHRcdHRoaXMuY29udHJvbFBvaW50c1sgaSBdID0gbmV3IFZlY3RvcjQoIHBvaW50LngsIHBvaW50LnksIHBvaW50LnosIHBvaW50LncgKTtcblxuXHR9XG5cbn07XG5cblxuTlVSQlNDdXJ2ZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBDdXJ2ZS5wcm90b3R5cGUgKTtcbk5VUkJTQ3VydmUucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gTlVSQlNDdXJ2ZTtcblxuXG5OVVJCU0N1cnZlLnByb3RvdHlwZS5nZXRQb2ludCA9IGZ1bmN0aW9uICggdCwgb3B0aW9uYWxUYXJnZXQgKSB7XG5cblx0dmFyIHBvaW50ID0gb3B0aW9uYWxUYXJnZXQgfHwgbmV3IFZlY3RvcjMoKTtcblxuXHR2YXIgdSA9IHRoaXMua25vdHNbIHRoaXMuc3RhcnRLbm90IF0gKyB0ICogKCB0aGlzLmtub3RzWyB0aGlzLmVuZEtub3QgXSAtIHRoaXMua25vdHNbIHRoaXMuc3RhcnRLbm90IF0gKTsgLy8gbGluZWFyIG1hcHBpbmcgdC0+dVxuXG5cdC8vIGZvbGxvd2luZyByZXN1bHRzIGluICh3eCwgd3ksIHd6LCB3KSBob21vZ2VuZW91cyBwb2ludFxuXHR2YXIgaHBvaW50ID0gTlVSQlNVdGlscy5jYWxjQlNwbGluZVBvaW50KCB0aGlzLmRlZ3JlZSwgdGhpcy5rbm90cywgdGhpcy5jb250cm9sUG9pbnRzLCB1ICk7XG5cblx0aWYgKCBocG9pbnQudyAhPSAxLjAgKSB7XG5cblx0XHQvLyBwcm9qZWN0IHRvIDNEIHNwYWNlOiAod3gsIHd5LCB3eiwgdykgLT4gKHgsIHksIHosIDEpXG5cdFx0aHBvaW50LmRpdmlkZVNjYWxhciggaHBvaW50LncgKTtcblxuXHR9XG5cblx0cmV0dXJuIHBvaW50LnNldCggaHBvaW50LngsIGhwb2ludC55LCBocG9pbnQueiApO1xuXG59O1xuXG5cbk5VUkJTQ3VydmUucHJvdG90eXBlLmdldFRhbmdlbnQgPSBmdW5jdGlvbiAoIHQsIG9wdGlvbmFsVGFyZ2V0ICkge1xuXG5cdHZhciB0YW5nZW50ID0gb3B0aW9uYWxUYXJnZXQgfHwgbmV3IFZlY3RvcjMoKTtcblxuXHR2YXIgdSA9IHRoaXMua25vdHNbIDAgXSArIHQgKiAoIHRoaXMua25vdHNbIHRoaXMua25vdHMubGVuZ3RoIC0gMSBdIC0gdGhpcy5rbm90c1sgMCBdICk7XG5cdHZhciBkZXJzID0gTlVSQlNVdGlscy5jYWxjTlVSQlNEZXJpdmF0aXZlcyggdGhpcy5kZWdyZWUsIHRoaXMua25vdHMsIHRoaXMuY29udHJvbFBvaW50cywgdSwgMSApO1xuXHR0YW5nZW50LmNvcHkoIGRlcnNbIDEgXSApLm5vcm1hbGl6ZSgpO1xuXG5cdHJldHVybiB0YW5nZW50O1xuXG59O1xuXG5leHBvcnQgeyBOVVJCU0N1cnZlIH07XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/three/examples/jsm/curves/NURBSCurve.js\n");

/***/ }),

/***/ "./node_modules/three/examples/jsm/curves/NURBSUtils.js":
/*!**************************************************************!*\
  !*** ./node_modules/three/examples/jsm/curves/NURBSUtils.js ***!
  \**************************************************************/
/*! exports provided: NURBSUtils */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"NURBSUtils\", function() { return NURBSUtils; });\n/* harmony import */ var _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../build/three.module.js */ \"./node_modules/three/build/three.module.js\");\n\n\n/**\n * NURBS utils\n *\n * See NURBSCurve and NURBSSurface.\n **/\n\n\n/**************************************************************\n *\tNURBS Utils\n **************************************************************/\n\nvar NURBSUtils = {\n\n\t/*\n\tFinds knot vector span.\n\n\tp : degree\n\tu : parametric value\n\tU : knot vector\n\n\treturns the span\n\t*/\n\tfindSpan: function ( p, u, U ) {\n\n\t\tvar n = U.length - p - 1;\n\n\t\tif ( u >= U[ n ] ) {\n\n\t\t\treturn n - 1;\n\n\t\t}\n\n\t\tif ( u <= U[ p ] ) {\n\n\t\t\treturn p;\n\n\t\t}\n\n\t\tvar low = p;\n\t\tvar high = n;\n\t\tvar mid = Math.floor( ( low + high ) / 2 );\n\n\t\twhile ( u < U[ mid ] || u >= U[ mid + 1 ] ) {\n\n\t\t\tif ( u < U[ mid ] ) {\n\n\t\t\t\thigh = mid;\n\n\t\t\t} else {\n\n\t\t\t\tlow = mid;\n\n\t\t\t}\n\n\t\t\tmid = Math.floor( ( low + high ) / 2 );\n\n\t\t}\n\n\t\treturn mid;\n\n\t},\n\n\n\t/*\n\tCalculate basis functions. See The NURBS Book, page 70, algorithm A2.2\n\n\tspan : span in which u lies\n\tu    : parametric point\n\tp    : degree\n\tU    : knot vector\n\n\treturns array[p+1] with basis functions values.\n\t*/\n\tcalcBasisFunctions: function ( span, u, p, U ) {\n\n\t\tvar N = [];\n\t\tvar left = [];\n\t\tvar right = [];\n\t\tN[ 0 ] = 1.0;\n\n\t\tfor ( var j = 1; j <= p; ++ j ) {\n\n\t\t\tleft[ j ] = u - U[ span + 1 - j ];\n\t\t\tright[ j ] = U[ span + j ] - u;\n\n\t\t\tvar saved = 0.0;\n\n\t\t\tfor ( var r = 0; r < j; ++ r ) {\n\n\t\t\t\tvar rv = right[ r + 1 ];\n\t\t\t\tvar lv = left[ j - r ];\n\t\t\t\tvar temp = N[ r ] / ( rv + lv );\n\t\t\t\tN[ r ] = saved + rv * temp;\n\t\t\t\tsaved = lv * temp;\n\n\t\t\t }\n\n\t\t\t N[ j ] = saved;\n\n\t\t }\n\n\t\t return N;\n\n\t},\n\n\n\t/*\n\tCalculate B-Spline curve points. See The NURBS Book, page 82, algorithm A3.1.\n\n\tp : degree of B-Spline\n\tU : knot vector\n\tP : control points (x, y, z, w)\n\tu : parametric point\n\n\treturns point for given u\n\t*/\n\tcalcBSplinePoint: function ( p, U, P, u ) {\n\n\t\tvar span = this.findSpan( p, u, U );\n\t\tvar N = this.calcBasisFunctions( span, u, p, U );\n\t\tvar C = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector4\"]( 0, 0, 0, 0 );\n\n\t\tfor ( var j = 0; j <= p; ++ j ) {\n\n\t\t\tvar point = P[ span - p + j ];\n\t\t\tvar Nj = N[ j ];\n\t\t\tvar wNj = point.w * Nj;\n\t\t\tC.x += point.x * wNj;\n\t\t\tC.y += point.y * wNj;\n\t\t\tC.z += point.z * wNj;\n\t\t\tC.w += point.w * Nj;\n\n\t\t}\n\n\t\treturn C;\n\n\t},\n\n\n\t/*\n\tCalculate basis functions derivatives. See The NURBS Book, page 72, algorithm A2.3.\n\n\tspan : span in which u lies\n\tu    : parametric point\n\tp    : degree\n\tn    : number of derivatives to calculate\n\tU    : knot vector\n\n\treturns array[n+1][p+1] with basis functions derivatives\n\t*/\n\tcalcBasisFunctionDerivatives: function ( span, u, p, n, U ) {\n\n\t\tvar zeroArr = [];\n\t\tfor ( var i = 0; i <= p; ++ i )\n\t\t\tzeroArr[ i ] = 0.0;\n\n\t\tvar ders = [];\n\t\tfor ( var i = 0; i <= n; ++ i )\n\t\t\tders[ i ] = zeroArr.slice( 0 );\n\n\t\tvar ndu = [];\n\t\tfor ( var i = 0; i <= p; ++ i )\n\t\t\tndu[ i ] = zeroArr.slice( 0 );\n\n\t\tndu[ 0 ][ 0 ] = 1.0;\n\n\t\tvar left = zeroArr.slice( 0 );\n\t\tvar right = zeroArr.slice( 0 );\n\n\t\tfor ( var j = 1; j <= p; ++ j ) {\n\n\t\t\tleft[ j ] = u - U[ span + 1 - j ];\n\t\t\tright[ j ] = U[ span + j ] - u;\n\n\t\t\tvar saved = 0.0;\n\n\t\t\tfor ( var r = 0; r < j; ++ r ) {\n\n\t\t\t\tvar rv = right[ r + 1 ];\n\t\t\t\tvar lv = left[ j - r ];\n\t\t\t\tndu[ j ][ r ] = rv + lv;\n\n\t\t\t\tvar temp = ndu[ r ][ j - 1 ] / ndu[ j ][ r ];\n\t\t\t\tndu[ r ][ j ] = saved + rv * temp;\n\t\t\t\tsaved = lv * temp;\n\n\t\t\t}\n\n\t\t\tndu[ j ][ j ] = saved;\n\n\t\t}\n\n\t\tfor ( var j = 0; j <= p; ++ j ) {\n\n\t\t\tders[ 0 ][ j ] = ndu[ j ][ p ];\n\n\t\t}\n\n\t\tfor ( var r = 0; r <= p; ++ r ) {\n\n\t\t\tvar s1 = 0;\n\t\t\tvar s2 = 1;\n\n\t\t\tvar a = [];\n\t\t\tfor ( var i = 0; i <= p; ++ i ) {\n\n\t\t\t\ta[ i ] = zeroArr.slice( 0 );\n\n\t\t\t}\n\n\t\t\ta[ 0 ][ 0 ] = 1.0;\n\n\t\t\tfor ( var k = 1; k <= n; ++ k ) {\n\n\t\t\t\tvar d = 0.0;\n\t\t\t\tvar rk = r - k;\n\t\t\t\tvar pk = p - k;\n\n\t\t\t\tif ( r >= k ) {\n\n\t\t\t\t\ta[ s2 ][ 0 ] = a[ s1 ][ 0 ] / ndu[ pk + 1 ][ rk ];\n\t\t\t\t\td = a[ s2 ][ 0 ] * ndu[ rk ][ pk ];\n\n\t\t\t\t}\n\n\t\t\t\tvar j1 = ( rk >= - 1 ) ? 1 : - rk;\n\t\t\t\tvar j2 = ( r - 1 <= pk ) ? k - 1 : p - r;\n\n\t\t\t\tfor ( var j = j1; j <= j2; ++ j ) {\n\n\t\t\t\t\ta[ s2 ][ j ] = ( a[ s1 ][ j ] - a[ s1 ][ j - 1 ] ) / ndu[ pk + 1 ][ rk + j ];\n\t\t\t\t\td += a[ s2 ][ j ] * ndu[ rk + j ][ pk ];\n\n\t\t\t\t}\n\n\t\t\t\tif ( r <= pk ) {\n\n\t\t\t\t\ta[ s2 ][ k ] = - a[ s1 ][ k - 1 ] / ndu[ pk + 1 ][ r ];\n\t\t\t\t\td += a[ s2 ][ k ] * ndu[ r ][ pk ];\n\n\t\t\t\t}\n\n\t\t\t\tders[ k ][ r ] = d;\n\n\t\t\t\tvar j = s1;\n\t\t\t\ts1 = s2;\n\t\t\t\ts2 = j;\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar r = p;\n\n\t\tfor ( var k = 1; k <= n; ++ k ) {\n\n\t\t\tfor ( var j = 0; j <= p; ++ j ) {\n\n\t\t\t\tders[ k ][ j ] *= r;\n\n\t\t\t}\n\n\t\t\tr *= p - k;\n\n\t\t}\n\n\t\treturn ders;\n\n\t},\n\n\n\t/*\n\t\tCalculate derivatives of a B-Spline. See The NURBS Book, page 93, algorithm A3.2.\n\n\t\tp  : degree\n\t\tU  : knot vector\n\t\tP  : control points\n\t\tu  : Parametric points\n\t\tnd : number of derivatives\n\n\t\treturns array[d+1] with derivatives\n\t\t*/\n\tcalcBSplineDerivatives: function ( p, U, P, u, nd ) {\n\n\t\tvar du = nd < p ? nd : p;\n\t\tvar CK = [];\n\t\tvar span = this.findSpan( p, u, U );\n\t\tvar nders = this.calcBasisFunctionDerivatives( span, u, p, du, U );\n\t\tvar Pw = [];\n\n\t\tfor ( var i = 0; i < P.length; ++ i ) {\n\n\t\t\tvar point = P[ i ].clone();\n\t\t\tvar w = point.w;\n\n\t\t\tpoint.x *= w;\n\t\t\tpoint.y *= w;\n\t\t\tpoint.z *= w;\n\n\t\t\tPw[ i ] = point;\n\n\t\t}\n\n\t\tfor ( var k = 0; k <= du; ++ k ) {\n\n\t\t\tvar point = Pw[ span - p ].clone().multiplyScalar( nders[ k ][ 0 ] );\n\n\t\t\tfor ( var j = 1; j <= p; ++ j ) {\n\n\t\t\t\tpoint.add( Pw[ span - p + j ].clone().multiplyScalar( nders[ k ][ j ] ) );\n\n\t\t\t}\n\n\t\t\tCK[ k ] = point;\n\n\t\t}\n\n\t\tfor ( var k = du + 1; k <= nd + 1; ++ k ) {\n\n\t\t\tCK[ k ] = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector4\"]( 0, 0, 0 );\n\n\t\t}\n\n\t\treturn CK;\n\n\t},\n\n\n\t/*\n\tCalculate \"K over I\"\n\n\treturns k!/(i!(k-i)!)\n\t*/\n\tcalcKoverI: function ( k, i ) {\n\n\t\tvar nom = 1;\n\n\t\tfor ( var j = 2; j <= k; ++ j ) {\n\n\t\t\tnom *= j;\n\n\t\t}\n\n\t\tvar denom = 1;\n\n\t\tfor ( var j = 2; j <= i; ++ j ) {\n\n\t\t\tdenom *= j;\n\n\t\t}\n\n\t\tfor ( var j = 2; j <= k - i; ++ j ) {\n\n\t\t\tdenom *= j;\n\n\t\t}\n\n\t\treturn nom / denom;\n\n\t},\n\n\n\t/*\n\tCalculate derivatives (0-nd) of rational curve. See The NURBS Book, page 127, algorithm A4.2.\n\n\tPders : result of function calcBSplineDerivatives\n\n\treturns array with derivatives for rational curve.\n\t*/\n\tcalcRationalCurveDerivatives: function ( Pders ) {\n\n\t\tvar nd = Pders.length;\n\t\tvar Aders = [];\n\t\tvar wders = [];\n\n\t\tfor ( var i = 0; i < nd; ++ i ) {\n\n\t\t\tvar point = Pders[ i ];\n\t\t\tAders[ i ] = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector3\"]( point.x, point.y, point.z );\n\t\t\twders[ i ] = point.w;\n\n\t\t}\n\n\t\tvar CK = [];\n\n\t\tfor ( var k = 0; k < nd; ++ k ) {\n\n\t\t\tvar v = Aders[ k ].clone();\n\n\t\t\tfor ( var i = 1; i <= k; ++ i ) {\n\n\t\t\t\tv.sub( CK[ k - i ].clone().multiplyScalar( this.calcKoverI( k, i ) * wders[ i ] ) );\n\n\t\t\t}\n\n\t\t\tCK[ k ] = v.divideScalar( wders[ 0 ] );\n\n\t\t}\n\n\t\treturn CK;\n\n\t},\n\n\n\t/*\n\tCalculate NURBS curve derivatives. See The NURBS Book, page 127, algorithm A4.2.\n\n\tp  : degree\n\tU  : knot vector\n\tP  : control points in homogeneous space\n\tu  : parametric points\n\tnd : number of derivatives\n\n\treturns array with derivatives.\n\t*/\n\tcalcNURBSDerivatives: function ( p, U, P, u, nd ) {\n\n\t\tvar Pders = this.calcBSplineDerivatives( p, U, P, u, nd );\n\t\treturn this.calcRationalCurveDerivatives( Pders );\n\n\t},\n\n\n\t/*\n\tCalculate rational B-Spline surface point. See The NURBS Book, page 134, algorithm A4.3.\n\n\tp1, p2 : degrees of B-Spline surface\n\tU1, U2 : knot vectors\n\tP      : control points (x, y, z, w)\n\tu, v   : parametric values\n\n\treturns point for given (u, v)\n\t*/\n\tcalcSurfacePoint: function ( p, q, U, V, P, u, v, target ) {\n\n\t\tvar uspan = this.findSpan( p, u, U );\n\t\tvar vspan = this.findSpan( q, v, V );\n\t\tvar Nu = this.calcBasisFunctions( uspan, u, p, U );\n\t\tvar Nv = this.calcBasisFunctions( vspan, v, q, V );\n\t\tvar temp = [];\n\n\t\tfor ( var l = 0; l <= q; ++ l ) {\n\n\t\t\ttemp[ l ] = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector4\"]( 0, 0, 0, 0 );\n\t\t\tfor ( var k = 0; k <= p; ++ k ) {\n\n\t\t\t\tvar point = P[ uspan - p + k ][ vspan - q + l ].clone();\n\t\t\t\tvar w = point.w;\n\t\t\t\tpoint.x *= w;\n\t\t\t\tpoint.y *= w;\n\t\t\t\tpoint.z *= w;\n\t\t\t\ttemp[ l ].add( point.multiplyScalar( Nu[ k ] ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar Sw = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector4\"]( 0, 0, 0, 0 );\n\t\tfor ( var l = 0; l <= q; ++ l ) {\n\n\t\t\tSw.add( temp[ l ].multiplyScalar( Nv[ l ] ) );\n\n\t\t}\n\n\t\tSw.divideScalar( Sw.w );\n\t\ttarget.set( Sw.x, Sw.y, Sw.z );\n\n\t}\n\n};\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL3RocmVlL2V4YW1wbGVzL2pzbS9jdXJ2ZXMvTlVSQlNVdGlscy5qcz9hYmRjIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUd3Qzs7QUFFeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUEsSUFBSTs7QUFFSjs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQSxFQUFFOzs7QUFHRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxrQkFBa0IsUUFBUTs7QUFFMUI7QUFDQTs7QUFFQTs7QUFFQSxtQkFBbUIsT0FBTzs7QUFFMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQSxFQUFFOzs7QUFHRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsY0FBYyw4REFBTzs7QUFFckIsa0JBQWtCLFFBQVE7O0FBRTFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBLEVBQUU7OztBQUdGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxrQkFBa0IsUUFBUTtBQUMxQjs7QUFFQTtBQUNBLGtCQUFrQixRQUFRO0FBQzFCOztBQUVBO0FBQ0Esa0JBQWtCLFFBQVE7QUFDMUI7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQSxrQkFBa0IsUUFBUTs7QUFFMUI7QUFDQTs7QUFFQTs7QUFFQSxtQkFBbUIsT0FBTzs7QUFFMUI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQSxrQkFBa0IsUUFBUTs7QUFFMUI7O0FBRUE7O0FBRUEsa0JBQWtCLFFBQVE7O0FBRTFCO0FBQ0E7O0FBRUE7QUFDQSxtQkFBbUIsUUFBUTs7QUFFM0I7O0FBRUE7O0FBRUE7O0FBRUEsbUJBQW1CLFFBQVE7O0FBRTNCO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUEscUJBQXFCLFNBQVM7O0FBRTlCO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUEsa0JBQWtCLFFBQVE7O0FBRTFCLG1CQUFtQixRQUFROztBQUUzQjs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQSxFQUFFOzs7QUFHRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsa0JBQWtCLGNBQWM7O0FBRWhDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBLGtCQUFrQixTQUFTOztBQUUzQjs7QUFFQSxtQkFBbUIsUUFBUTs7QUFFM0I7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUEsdUJBQXVCLGFBQWE7O0FBRXBDLGlCQUFpQiw4REFBTzs7QUFFeEI7O0FBRUE7O0FBRUEsRUFBRTs7O0FBR0Y7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsa0JBQWtCLFFBQVE7O0FBRTFCOztBQUVBOztBQUVBOztBQUVBLGtCQUFrQixRQUFROztBQUUxQjs7QUFFQTs7QUFFQSxrQkFBa0IsWUFBWTs7QUFFOUI7O0FBRUE7O0FBRUE7O0FBRUEsRUFBRTs7O0FBR0Y7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLGtCQUFrQixRQUFROztBQUUxQjtBQUNBLG9CQUFvQiw4REFBTztBQUMzQjs7QUFFQTs7QUFFQTs7QUFFQSxrQkFBa0IsUUFBUTs7QUFFMUI7O0FBRUEsbUJBQW1CLFFBQVE7O0FBRTNCOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBLEVBQUU7OztBQUdGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxFQUFFOzs7QUFHRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGtCQUFrQixRQUFROztBQUUxQixtQkFBbUIsOERBQU87QUFDMUIsbUJBQW1CLFFBQVE7O0FBRTNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQSxlQUFlLDhEQUFPO0FBQ3RCLGtCQUFrQixRQUFROztBQUUxQjs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVzQiIsImZpbGUiOiIuL25vZGVfbW9kdWxlcy90aHJlZS9leGFtcGxlcy9qc20vY3VydmVzL05VUkJTVXRpbHMuanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuXHRWZWN0b3IzLFxuXHRWZWN0b3I0XG59IGZyb20gJy4uLy4uLy4uL2J1aWxkL3RocmVlLm1vZHVsZS5qcyc7XG5cbi8qKlxuICogTlVSQlMgdXRpbHNcbiAqXG4gKiBTZWUgTlVSQlNDdXJ2ZSBhbmQgTlVSQlNTdXJmYWNlLlxuICoqL1xuXG5cbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICpcdE5VUkJTIFV0aWxzXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbnZhciBOVVJCU1V0aWxzID0ge1xuXG5cdC8qXG5cdEZpbmRzIGtub3QgdmVjdG9yIHNwYW4uXG5cblx0cCA6IGRlZ3JlZVxuXHR1IDogcGFyYW1ldHJpYyB2YWx1ZVxuXHRVIDoga25vdCB2ZWN0b3JcblxuXHRyZXR1cm5zIHRoZSBzcGFuXG5cdCovXG5cdGZpbmRTcGFuOiBmdW5jdGlvbiAoIHAsIHUsIFUgKSB7XG5cblx0XHR2YXIgbiA9IFUubGVuZ3RoIC0gcCAtIDE7XG5cblx0XHRpZiAoIHUgPj0gVVsgbiBdICkge1xuXG5cdFx0XHRyZXR1cm4gbiAtIDE7XG5cblx0XHR9XG5cblx0XHRpZiAoIHUgPD0gVVsgcCBdICkge1xuXG5cdFx0XHRyZXR1cm4gcDtcblxuXHRcdH1cblxuXHRcdHZhciBsb3cgPSBwO1xuXHRcdHZhciBoaWdoID0gbjtcblx0XHR2YXIgbWlkID0gTWF0aC5mbG9vciggKCBsb3cgKyBoaWdoICkgLyAyICk7XG5cblx0XHR3aGlsZSAoIHUgPCBVWyBtaWQgXSB8fCB1ID49IFVbIG1pZCArIDEgXSApIHtcblxuXHRcdFx0aWYgKCB1IDwgVVsgbWlkIF0gKSB7XG5cblx0XHRcdFx0aGlnaCA9IG1pZDtcblxuXHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRsb3cgPSBtaWQ7XG5cblx0XHRcdH1cblxuXHRcdFx0bWlkID0gTWF0aC5mbG9vciggKCBsb3cgKyBoaWdoICkgLyAyICk7XG5cblx0XHR9XG5cblx0XHRyZXR1cm4gbWlkO1xuXG5cdH0sXG5cblxuXHQvKlxuXHRDYWxjdWxhdGUgYmFzaXMgZnVuY3Rpb25zLiBTZWUgVGhlIE5VUkJTIEJvb2ssIHBhZ2UgNzAsIGFsZ29yaXRobSBBMi4yXG5cblx0c3BhbiA6IHNwYW4gaW4gd2hpY2ggdSBsaWVzXG5cdHUgICAgOiBwYXJhbWV0cmljIHBvaW50XG5cdHAgICAgOiBkZWdyZWVcblx0VSAgICA6IGtub3QgdmVjdG9yXG5cblx0cmV0dXJucyBhcnJheVtwKzFdIHdpdGggYmFzaXMgZnVuY3Rpb25zIHZhbHVlcy5cblx0Ki9cblx0Y2FsY0Jhc2lzRnVuY3Rpb25zOiBmdW5jdGlvbiAoIHNwYW4sIHUsIHAsIFUgKSB7XG5cblx0XHR2YXIgTiA9IFtdO1xuXHRcdHZhciBsZWZ0ID0gW107XG5cdFx0dmFyIHJpZ2h0ID0gW107XG5cdFx0TlsgMCBdID0gMS4wO1xuXG5cdFx0Zm9yICggdmFyIGogPSAxOyBqIDw9IHA7ICsrIGogKSB7XG5cblx0XHRcdGxlZnRbIGogXSA9IHUgLSBVWyBzcGFuICsgMSAtIGogXTtcblx0XHRcdHJpZ2h0WyBqIF0gPSBVWyBzcGFuICsgaiBdIC0gdTtcblxuXHRcdFx0dmFyIHNhdmVkID0gMC4wO1xuXG5cdFx0XHRmb3IgKCB2YXIgciA9IDA7IHIgPCBqOyArKyByICkge1xuXG5cdFx0XHRcdHZhciBydiA9IHJpZ2h0WyByICsgMSBdO1xuXHRcdFx0XHR2YXIgbHYgPSBsZWZ0WyBqIC0gciBdO1xuXHRcdFx0XHR2YXIgdGVtcCA9IE5bIHIgXSAvICggcnYgKyBsdiApO1xuXHRcdFx0XHROWyByIF0gPSBzYXZlZCArIHJ2ICogdGVtcDtcblx0XHRcdFx0c2F2ZWQgPSBsdiAqIHRlbXA7XG5cblx0XHRcdCB9XG5cblx0XHRcdCBOWyBqIF0gPSBzYXZlZDtcblxuXHRcdCB9XG5cblx0XHQgcmV0dXJuIE47XG5cblx0fSxcblxuXG5cdC8qXG5cdENhbGN1bGF0ZSBCLVNwbGluZSBjdXJ2ZSBwb2ludHMuIFNlZSBUaGUgTlVSQlMgQm9vaywgcGFnZSA4MiwgYWxnb3JpdGhtIEEzLjEuXG5cblx0cCA6IGRlZ3JlZSBvZiBCLVNwbGluZVxuXHRVIDoga25vdCB2ZWN0b3Jcblx0UCA6IGNvbnRyb2wgcG9pbnRzICh4LCB5LCB6LCB3KVxuXHR1IDogcGFyYW1ldHJpYyBwb2ludFxuXG5cdHJldHVybnMgcG9pbnQgZm9yIGdpdmVuIHVcblx0Ki9cblx0Y2FsY0JTcGxpbmVQb2ludDogZnVuY3Rpb24gKCBwLCBVLCBQLCB1ICkge1xuXG5cdFx0dmFyIHNwYW4gPSB0aGlzLmZpbmRTcGFuKCBwLCB1LCBVICk7XG5cdFx0dmFyIE4gPSB0aGlzLmNhbGNCYXNpc0Z1bmN0aW9ucyggc3BhbiwgdSwgcCwgVSApO1xuXHRcdHZhciBDID0gbmV3IFZlY3RvcjQoIDAsIDAsIDAsIDAgKTtcblxuXHRcdGZvciAoIHZhciBqID0gMDsgaiA8PSBwOyArKyBqICkge1xuXG5cdFx0XHR2YXIgcG9pbnQgPSBQWyBzcGFuIC0gcCArIGogXTtcblx0XHRcdHZhciBOaiA9IE5bIGogXTtcblx0XHRcdHZhciB3TmogPSBwb2ludC53ICogTmo7XG5cdFx0XHRDLnggKz0gcG9pbnQueCAqIHdOajtcblx0XHRcdEMueSArPSBwb2ludC55ICogd05qO1xuXHRcdFx0Qy56ICs9IHBvaW50LnogKiB3Tmo7XG5cdFx0XHRDLncgKz0gcG9pbnQudyAqIE5qO1xuXG5cdFx0fVxuXG5cdFx0cmV0dXJuIEM7XG5cblx0fSxcblxuXG5cdC8qXG5cdENhbGN1bGF0ZSBiYXNpcyBmdW5jdGlvbnMgZGVyaXZhdGl2ZXMuIFNlZSBUaGUgTlVSQlMgQm9vaywgcGFnZSA3MiwgYWxnb3JpdGhtIEEyLjMuXG5cblx0c3BhbiA6IHNwYW4gaW4gd2hpY2ggdSBsaWVzXG5cdHUgICAgOiBwYXJhbWV0cmljIHBvaW50XG5cdHAgICAgOiBkZWdyZWVcblx0biAgICA6IG51bWJlciBvZiBkZXJpdmF0aXZlcyB0byBjYWxjdWxhdGVcblx0VSAgICA6IGtub3QgdmVjdG9yXG5cblx0cmV0dXJucyBhcnJheVtuKzFdW3ArMV0gd2l0aCBiYXNpcyBmdW5jdGlvbnMgZGVyaXZhdGl2ZXNcblx0Ki9cblx0Y2FsY0Jhc2lzRnVuY3Rpb25EZXJpdmF0aXZlczogZnVuY3Rpb24gKCBzcGFuLCB1LCBwLCBuLCBVICkge1xuXG5cdFx0dmFyIHplcm9BcnIgPSBbXTtcblx0XHRmb3IgKCB2YXIgaSA9IDA7IGkgPD0gcDsgKysgaSApXG5cdFx0XHR6ZXJvQXJyWyBpIF0gPSAwLjA7XG5cblx0XHR2YXIgZGVycyA9IFtdO1xuXHRcdGZvciAoIHZhciBpID0gMDsgaSA8PSBuOyArKyBpIClcblx0XHRcdGRlcnNbIGkgXSA9IHplcm9BcnIuc2xpY2UoIDAgKTtcblxuXHRcdHZhciBuZHUgPSBbXTtcblx0XHRmb3IgKCB2YXIgaSA9IDA7IGkgPD0gcDsgKysgaSApXG5cdFx0XHRuZHVbIGkgXSA9IHplcm9BcnIuc2xpY2UoIDAgKTtcblxuXHRcdG5kdVsgMCBdWyAwIF0gPSAxLjA7XG5cblx0XHR2YXIgbGVmdCA9IHplcm9BcnIuc2xpY2UoIDAgKTtcblx0XHR2YXIgcmlnaHQgPSB6ZXJvQXJyLnNsaWNlKCAwICk7XG5cblx0XHRmb3IgKCB2YXIgaiA9IDE7IGogPD0gcDsgKysgaiApIHtcblxuXHRcdFx0bGVmdFsgaiBdID0gdSAtIFVbIHNwYW4gKyAxIC0gaiBdO1xuXHRcdFx0cmlnaHRbIGogXSA9IFVbIHNwYW4gKyBqIF0gLSB1O1xuXG5cdFx0XHR2YXIgc2F2ZWQgPSAwLjA7XG5cblx0XHRcdGZvciAoIHZhciByID0gMDsgciA8IGo7ICsrIHIgKSB7XG5cblx0XHRcdFx0dmFyIHJ2ID0gcmlnaHRbIHIgKyAxIF07XG5cdFx0XHRcdHZhciBsdiA9IGxlZnRbIGogLSByIF07XG5cdFx0XHRcdG5kdVsgaiBdWyByIF0gPSBydiArIGx2O1xuXG5cdFx0XHRcdHZhciB0ZW1wID0gbmR1WyByIF1bIGogLSAxIF0gLyBuZHVbIGogXVsgciBdO1xuXHRcdFx0XHRuZHVbIHIgXVsgaiBdID0gc2F2ZWQgKyBydiAqIHRlbXA7XG5cdFx0XHRcdHNhdmVkID0gbHYgKiB0ZW1wO1xuXG5cdFx0XHR9XG5cblx0XHRcdG5kdVsgaiBdWyBqIF0gPSBzYXZlZDtcblxuXHRcdH1cblxuXHRcdGZvciAoIHZhciBqID0gMDsgaiA8PSBwOyArKyBqICkge1xuXG5cdFx0XHRkZXJzWyAwIF1bIGogXSA9IG5kdVsgaiBdWyBwIF07XG5cblx0XHR9XG5cblx0XHRmb3IgKCB2YXIgciA9IDA7IHIgPD0gcDsgKysgciApIHtcblxuXHRcdFx0dmFyIHMxID0gMDtcblx0XHRcdHZhciBzMiA9IDE7XG5cblx0XHRcdHZhciBhID0gW107XG5cdFx0XHRmb3IgKCB2YXIgaSA9IDA7IGkgPD0gcDsgKysgaSApIHtcblxuXHRcdFx0XHRhWyBpIF0gPSB6ZXJvQXJyLnNsaWNlKCAwICk7XG5cblx0XHRcdH1cblxuXHRcdFx0YVsgMCBdWyAwIF0gPSAxLjA7XG5cblx0XHRcdGZvciAoIHZhciBrID0gMTsgayA8PSBuOyArKyBrICkge1xuXG5cdFx0XHRcdHZhciBkID0gMC4wO1xuXHRcdFx0XHR2YXIgcmsgPSByIC0gaztcblx0XHRcdFx0dmFyIHBrID0gcCAtIGs7XG5cblx0XHRcdFx0aWYgKCByID49IGsgKSB7XG5cblx0XHRcdFx0XHRhWyBzMiBdWyAwIF0gPSBhWyBzMSBdWyAwIF0gLyBuZHVbIHBrICsgMSBdWyByayBdO1xuXHRcdFx0XHRcdGQgPSBhWyBzMiBdWyAwIF0gKiBuZHVbIHJrIF1bIHBrIF07XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdHZhciBqMSA9ICggcmsgPj0gLSAxICkgPyAxIDogLSByaztcblx0XHRcdFx0dmFyIGoyID0gKCByIC0gMSA8PSBwayApID8gayAtIDEgOiBwIC0gcjtcblxuXHRcdFx0XHRmb3IgKCB2YXIgaiA9IGoxOyBqIDw9IGoyOyArKyBqICkge1xuXG5cdFx0XHRcdFx0YVsgczIgXVsgaiBdID0gKCBhWyBzMSBdWyBqIF0gLSBhWyBzMSBdWyBqIC0gMSBdICkgLyBuZHVbIHBrICsgMSBdWyByayArIGogXTtcblx0XHRcdFx0XHRkICs9IGFbIHMyIF1bIGogXSAqIG5kdVsgcmsgKyBqIF1bIHBrIF07XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmICggciA8PSBwayApIHtcblxuXHRcdFx0XHRcdGFbIHMyIF1bIGsgXSA9IC0gYVsgczEgXVsgayAtIDEgXSAvIG5kdVsgcGsgKyAxIF1bIHIgXTtcblx0XHRcdFx0XHRkICs9IGFbIHMyIF1bIGsgXSAqIG5kdVsgciBdWyBwayBdO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRkZXJzWyBrIF1bIHIgXSA9IGQ7XG5cblx0XHRcdFx0dmFyIGogPSBzMTtcblx0XHRcdFx0czEgPSBzMjtcblx0XHRcdFx0czIgPSBqO1xuXG5cdFx0XHR9XG5cblx0XHR9XG5cblx0XHR2YXIgciA9IHA7XG5cblx0XHRmb3IgKCB2YXIgayA9IDE7IGsgPD0gbjsgKysgayApIHtcblxuXHRcdFx0Zm9yICggdmFyIGogPSAwOyBqIDw9IHA7ICsrIGogKSB7XG5cblx0XHRcdFx0ZGVyc1sgayBdWyBqIF0gKj0gcjtcblxuXHRcdFx0fVxuXG5cdFx0XHRyICo9IHAgLSBrO1xuXG5cdFx0fVxuXG5cdFx0cmV0dXJuIGRlcnM7XG5cblx0fSxcblxuXG5cdC8qXG5cdFx0Q2FsY3VsYXRlIGRlcml2YXRpdmVzIG9mIGEgQi1TcGxpbmUuIFNlZSBUaGUgTlVSQlMgQm9vaywgcGFnZSA5MywgYWxnb3JpdGhtIEEzLjIuXG5cblx0XHRwICA6IGRlZ3JlZVxuXHRcdFUgIDoga25vdCB2ZWN0b3Jcblx0XHRQICA6IGNvbnRyb2wgcG9pbnRzXG5cdFx0dSAgOiBQYXJhbWV0cmljIHBvaW50c1xuXHRcdG5kIDogbnVtYmVyIG9mIGRlcml2YXRpdmVzXG5cblx0XHRyZXR1cm5zIGFycmF5W2QrMV0gd2l0aCBkZXJpdmF0aXZlc1xuXHRcdCovXG5cdGNhbGNCU3BsaW5lRGVyaXZhdGl2ZXM6IGZ1bmN0aW9uICggcCwgVSwgUCwgdSwgbmQgKSB7XG5cblx0XHR2YXIgZHUgPSBuZCA8IHAgPyBuZCA6IHA7XG5cdFx0dmFyIENLID0gW107XG5cdFx0dmFyIHNwYW4gPSB0aGlzLmZpbmRTcGFuKCBwLCB1LCBVICk7XG5cdFx0dmFyIG5kZXJzID0gdGhpcy5jYWxjQmFzaXNGdW5jdGlvbkRlcml2YXRpdmVzKCBzcGFuLCB1LCBwLCBkdSwgVSApO1xuXHRcdHZhciBQdyA9IFtdO1xuXG5cdFx0Zm9yICggdmFyIGkgPSAwOyBpIDwgUC5sZW5ndGg7ICsrIGkgKSB7XG5cblx0XHRcdHZhciBwb2ludCA9IFBbIGkgXS5jbG9uZSgpO1xuXHRcdFx0dmFyIHcgPSBwb2ludC53O1xuXG5cdFx0XHRwb2ludC54ICo9IHc7XG5cdFx0XHRwb2ludC55ICo9IHc7XG5cdFx0XHRwb2ludC56ICo9IHc7XG5cblx0XHRcdFB3WyBpIF0gPSBwb2ludDtcblxuXHRcdH1cblxuXHRcdGZvciAoIHZhciBrID0gMDsgayA8PSBkdTsgKysgayApIHtcblxuXHRcdFx0dmFyIHBvaW50ID0gUHdbIHNwYW4gLSBwIF0uY2xvbmUoKS5tdWx0aXBseVNjYWxhciggbmRlcnNbIGsgXVsgMCBdICk7XG5cblx0XHRcdGZvciAoIHZhciBqID0gMTsgaiA8PSBwOyArKyBqICkge1xuXG5cdFx0XHRcdHBvaW50LmFkZCggUHdbIHNwYW4gLSBwICsgaiBdLmNsb25lKCkubXVsdGlwbHlTY2FsYXIoIG5kZXJzWyBrIF1bIGogXSApICk7XG5cblx0XHRcdH1cblxuXHRcdFx0Q0tbIGsgXSA9IHBvaW50O1xuXG5cdFx0fVxuXG5cdFx0Zm9yICggdmFyIGsgPSBkdSArIDE7IGsgPD0gbmQgKyAxOyArKyBrICkge1xuXG5cdFx0XHRDS1sgayBdID0gbmV3IFZlY3RvcjQoIDAsIDAsIDAgKTtcblxuXHRcdH1cblxuXHRcdHJldHVybiBDSztcblxuXHR9LFxuXG5cblx0Lypcblx0Q2FsY3VsYXRlIFwiSyBvdmVyIElcIlxuXG5cdHJldHVybnMgayEvKGkhKGstaSkhKVxuXHQqL1xuXHRjYWxjS292ZXJJOiBmdW5jdGlvbiAoIGssIGkgKSB7XG5cblx0XHR2YXIgbm9tID0gMTtcblxuXHRcdGZvciAoIHZhciBqID0gMjsgaiA8PSBrOyArKyBqICkge1xuXG5cdFx0XHRub20gKj0gajtcblxuXHRcdH1cblxuXHRcdHZhciBkZW5vbSA9IDE7XG5cblx0XHRmb3IgKCB2YXIgaiA9IDI7IGogPD0gaTsgKysgaiApIHtcblxuXHRcdFx0ZGVub20gKj0gajtcblxuXHRcdH1cblxuXHRcdGZvciAoIHZhciBqID0gMjsgaiA8PSBrIC0gaTsgKysgaiApIHtcblxuXHRcdFx0ZGVub20gKj0gajtcblxuXHRcdH1cblxuXHRcdHJldHVybiBub20gLyBkZW5vbTtcblxuXHR9LFxuXG5cblx0Lypcblx0Q2FsY3VsYXRlIGRlcml2YXRpdmVzICgwLW5kKSBvZiByYXRpb25hbCBjdXJ2ZS4gU2VlIFRoZSBOVVJCUyBCb29rLCBwYWdlIDEyNywgYWxnb3JpdGhtIEE0LjIuXG5cblx0UGRlcnMgOiByZXN1bHQgb2YgZnVuY3Rpb24gY2FsY0JTcGxpbmVEZXJpdmF0aXZlc1xuXG5cdHJldHVybnMgYXJyYXkgd2l0aCBkZXJpdmF0aXZlcyBmb3IgcmF0aW9uYWwgY3VydmUuXG5cdCovXG5cdGNhbGNSYXRpb25hbEN1cnZlRGVyaXZhdGl2ZXM6IGZ1bmN0aW9uICggUGRlcnMgKSB7XG5cblx0XHR2YXIgbmQgPSBQZGVycy5sZW5ndGg7XG5cdFx0dmFyIEFkZXJzID0gW107XG5cdFx0dmFyIHdkZXJzID0gW107XG5cblx0XHRmb3IgKCB2YXIgaSA9IDA7IGkgPCBuZDsgKysgaSApIHtcblxuXHRcdFx0dmFyIHBvaW50ID0gUGRlcnNbIGkgXTtcblx0XHRcdEFkZXJzWyBpIF0gPSBuZXcgVmVjdG9yMyggcG9pbnQueCwgcG9pbnQueSwgcG9pbnQueiApO1xuXHRcdFx0d2RlcnNbIGkgXSA9IHBvaW50Lnc7XG5cblx0XHR9XG5cblx0XHR2YXIgQ0sgPSBbXTtcblxuXHRcdGZvciAoIHZhciBrID0gMDsgayA8IG5kOyArKyBrICkge1xuXG5cdFx0XHR2YXIgdiA9IEFkZXJzWyBrIF0uY2xvbmUoKTtcblxuXHRcdFx0Zm9yICggdmFyIGkgPSAxOyBpIDw9IGs7ICsrIGkgKSB7XG5cblx0XHRcdFx0di5zdWIoIENLWyBrIC0gaSBdLmNsb25lKCkubXVsdGlwbHlTY2FsYXIoIHRoaXMuY2FsY0tvdmVySSggaywgaSApICogd2RlcnNbIGkgXSApICk7XG5cblx0XHRcdH1cblxuXHRcdFx0Q0tbIGsgXSA9IHYuZGl2aWRlU2NhbGFyKCB3ZGVyc1sgMCBdICk7XG5cblx0XHR9XG5cblx0XHRyZXR1cm4gQ0s7XG5cblx0fSxcblxuXG5cdC8qXG5cdENhbGN1bGF0ZSBOVVJCUyBjdXJ2ZSBkZXJpdmF0aXZlcy4gU2VlIFRoZSBOVVJCUyBCb29rLCBwYWdlIDEyNywgYWxnb3JpdGhtIEE0LjIuXG5cblx0cCAgOiBkZWdyZWVcblx0VSAgOiBrbm90IHZlY3RvclxuXHRQICA6IGNvbnRyb2wgcG9pbnRzIGluIGhvbW9nZW5lb3VzIHNwYWNlXG5cdHUgIDogcGFyYW1ldHJpYyBwb2ludHNcblx0bmQgOiBudW1iZXIgb2YgZGVyaXZhdGl2ZXNcblxuXHRyZXR1cm5zIGFycmF5IHdpdGggZGVyaXZhdGl2ZXMuXG5cdCovXG5cdGNhbGNOVVJCU0Rlcml2YXRpdmVzOiBmdW5jdGlvbiAoIHAsIFUsIFAsIHUsIG5kICkge1xuXG5cdFx0dmFyIFBkZXJzID0gdGhpcy5jYWxjQlNwbGluZURlcml2YXRpdmVzKCBwLCBVLCBQLCB1LCBuZCApO1xuXHRcdHJldHVybiB0aGlzLmNhbGNSYXRpb25hbEN1cnZlRGVyaXZhdGl2ZXMoIFBkZXJzICk7XG5cblx0fSxcblxuXG5cdC8qXG5cdENhbGN1bGF0ZSByYXRpb25hbCBCLVNwbGluZSBzdXJmYWNlIHBvaW50LiBTZWUgVGhlIE5VUkJTIEJvb2ssIHBhZ2UgMTM0LCBhbGdvcml0aG0gQTQuMy5cblxuXHRwMSwgcDIgOiBkZWdyZWVzIG9mIEItU3BsaW5lIHN1cmZhY2Vcblx0VTEsIFUyIDoga25vdCB2ZWN0b3JzXG5cdFAgICAgICA6IGNvbnRyb2wgcG9pbnRzICh4LCB5LCB6LCB3KVxuXHR1LCB2ICAgOiBwYXJhbWV0cmljIHZhbHVlc1xuXG5cdHJldHVybnMgcG9pbnQgZm9yIGdpdmVuICh1LCB2KVxuXHQqL1xuXHRjYWxjU3VyZmFjZVBvaW50OiBmdW5jdGlvbiAoIHAsIHEsIFUsIFYsIFAsIHUsIHYsIHRhcmdldCApIHtcblxuXHRcdHZhciB1c3BhbiA9IHRoaXMuZmluZFNwYW4oIHAsIHUsIFUgKTtcblx0XHR2YXIgdnNwYW4gPSB0aGlzLmZpbmRTcGFuKCBxLCB2LCBWICk7XG5cdFx0dmFyIE51ID0gdGhpcy5jYWxjQmFzaXNGdW5jdGlvbnMoIHVzcGFuLCB1LCBwLCBVICk7XG5cdFx0dmFyIE52ID0gdGhpcy5jYWxjQmFzaXNGdW5jdGlvbnMoIHZzcGFuLCB2LCBxLCBWICk7XG5cdFx0dmFyIHRlbXAgPSBbXTtcblxuXHRcdGZvciAoIHZhciBsID0gMDsgbCA8PSBxOyArKyBsICkge1xuXG5cdFx0XHR0ZW1wWyBsIF0gPSBuZXcgVmVjdG9yNCggMCwgMCwgMCwgMCApO1xuXHRcdFx0Zm9yICggdmFyIGsgPSAwOyBrIDw9IHA7ICsrIGsgKSB7XG5cblx0XHRcdFx0dmFyIHBvaW50ID0gUFsgdXNwYW4gLSBwICsgayBdWyB2c3BhbiAtIHEgKyBsIF0uY2xvbmUoKTtcblx0XHRcdFx0dmFyIHcgPSBwb2ludC53O1xuXHRcdFx0XHRwb2ludC54ICo9IHc7XG5cdFx0XHRcdHBvaW50LnkgKj0gdztcblx0XHRcdFx0cG9pbnQueiAqPSB3O1xuXHRcdFx0XHR0ZW1wWyBsIF0uYWRkKCBwb2ludC5tdWx0aXBseVNjYWxhciggTnVbIGsgXSApICk7XG5cblx0XHRcdH1cblxuXHRcdH1cblxuXHRcdHZhciBTdyA9IG5ldyBWZWN0b3I0KCAwLCAwLCAwLCAwICk7XG5cdFx0Zm9yICggdmFyIGwgPSAwOyBsIDw9IHE7ICsrIGwgKSB7XG5cblx0XHRcdFN3LmFkZCggdGVtcFsgbCBdLm11bHRpcGx5U2NhbGFyKCBOdlsgbCBdICkgKTtcblxuXHRcdH1cblxuXHRcdFN3LmRpdmlkZVNjYWxhciggU3cudyApO1xuXHRcdHRhcmdldC5zZXQoIFN3LngsIFN3LnksIFN3LnogKTtcblxuXHR9XG5cbn07XG5cbmV4cG9ydCB7IE5VUkJTVXRpbHMgfTtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/three/examples/jsm/curves/NURBSUtils.js\n");

/***/ }),

/***/ "./node_modules/three/examples/jsm/libs/chevrotain.module.min.js":
/*!***********************************************************************!*\
  !*** ./node_modules/three/examples/jsm/libs/chevrotain.module.min.js ***!
  \***********************************************************************/
/*! exports provided: chevrotain */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* WEBPACK VAR INJECTION */(function(module) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"chevrotain\", function() { return chevrotain; });\n/*! chevrotain - v4.6.0 */\n!function(t,e){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=e():\"function\"==typeof define&&__webpack_require__(/*! !webpack amd options */ \"./node_modules/next/dist/compiled/webpack/amd-options.js\")?define(\"chevrotain\",[],e):\"object\"==typeof exports?exports.chevrotain=e():t.chevrotain=e()}(\"undefined\"!=typeof self?self:undefined,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,\"a\",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p=\"\",n(n.s=18)}([function(t,e,n){\"use strict\";function r(t){return t&&0===t.length}function i(t){return null==t?[]:Object.keys(t)}function o(t){for(var e=[],n=Object.keys(t),r=0;r<n.length;r++)e.push(t[n[r]]);return e}function a(t,e){for(var n=[],r=i(t),o=0;o<r.length;o++){var a=r[o];n.push(e.call(null,t[a],a))}return n}function s(t,e){for(var n=[],r=0;r<t.length;r++)n.push(e.call(null,t[r],r));return n}function u(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];Array.isArray(r)?e=e.concat(u(r)):e.push(r)}return e}function c(t){return r(t)?void 0:t[0]}function p(t){var e=t&&t.length;return e?t[e-1]:void 0}function l(t,e){if(Array.isArray(t))for(var n=0;n<t.length;n++)e.call(null,t[n],n);else{if(!C(t))throw Error(\"non exhaustive match\");var r=i(t);for(n=0;n<r.length;n++){var o=r[n],a=t[o];e.call(null,a,o)}}}function h(t){return\"string\"==typeof t}function f(t){return void 0===t}function d(t){return t instanceof Function}function E(t,e){return void 0===e&&(e=1),t.slice(e,t.length)}function m(t,e){return void 0===e&&(e=1),t.slice(0,t.length-e)}function y(t,e){var n=[];if(Array.isArray(t))for(var r=0;r<t.length;r++){var i=t[r];e.call(null,i)&&n.push(i)}return n}function T(t,e){return y(t,function(t){return!e(t)})}function v(t,e){for(var n=Object.keys(t),r={},i=0;i<n.length;i++){var o=n[i],a=t[o];e(a)&&(r[o]=a)}return r}function g(t,e){return!!C(t)&&t.hasOwnProperty(e)}function _(t,e){return void 0!==N(t,function(t){return t===e})}function R(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n]);return e}function A(t){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function N(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(e.call(null,r))return r}}function O(t,e){for(var n=[],r=0;r<t.length;r++){var i=t[r];e.call(null,i)&&n.push(i)}return n}function S(t,e,n){for(var r=Array.isArray(t),a=r?t:o(t),s=r?[]:i(t),u=n,c=0;c<a.length;c++)u=e.call(null,u,a[c],r?c:s[c]);return u}function I(t){return T(t,function(t){return null==t})}function L(t,e){void 0===e&&(e=function(t){return t});var n=[];return S(t,function(t,r){var i=e(r);return _(n,i)?t:(n.push(i),t.concat(r))},[])}function k(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=[null].concat(e);return Function.bind.apply(t,r)}function P(t){return Array.isArray(t)}function x(t){return t instanceof RegExp}function C(t){return t instanceof Object}function M(t,e){for(var n=0;n<t.length;n++)if(!e(t[n],n))return!1;return!0}function F(t,e){return T(t,function(t){return _(e,t)})}function b(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return!0;return!1}function D(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}function w(t,e){var n=R(t);return n.sort(function(t,n){return e(t)-e(n)}),n}function U(t,e){if(t.length!==e.length)throw Error(\"can't zipObject with different number of keys and values!\");for(var n={},r=0;r<t.length;r++)n[t[r]]=e[r];return n}function G(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r++)for(var o=e[r],a=i(o),s=0;s<a.length;s++){var u=a[s];t[u]=o[u]}return t}function B(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r++){var o=e[r];if(!f(o))for(var a=i(o),s=0;s<a.length;s++){var u=a[s];g(t,u)||(t[u]=o[u])}}return t}function K(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return B.apply(null,[{}].concat(t))}function W(t,e){var n={};return l(t,function(t){var r=e(t),i=n[r];i?i.push(t):n[r]=[t]}),n}function j(t,e){for(var n=A(t),r=i(e),o=0;o<r.length;o++){var a=r[o],s=e[a];n[a]=s}return n}function V(){}function Y(t){return t}function H(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];e.push(void 0!==r?r:void 0)}return e}function X(t){console&&console.error&&console.error(\"Error: \"+t)}function z(t){console&&console.warn&&console.warn(\"Warning: \"+t)}function q(){return\"function\"==typeof Map}function $(t,e){e.forEach(function(e){var n=e.prototype;Object.getOwnPropertyNames(n).forEach(function(r){if(\"constructor\"!==r){var i=Object.getOwnPropertyDescriptor(n,r);i&&(i.get||i.set)?Object.defineProperty(t.prototype,r,i):t.prototype[r]=e.prototype[r]}})})}function Z(t){function e(){}e.prototype=t;var n=new e;function r(){return typeof n.bar}return r(),r(),t}Object.defineProperty(e,\"__esModule\",{value:!0}),e.isEmpty=r,e.keys=i,e.values=o,e.mapValues=a,e.map=s,e.flatten=u,e.first=c,e.last=p,e.forEach=l,e.isString=h,e.isUndefined=f,e.isFunction=d,e.drop=E,e.dropRight=m,e.filter=y,e.reject=T,e.pick=v,e.has=g,e.contains=_,e.cloneArr=R,e.cloneObj=A,e.find=N,e.findAll=O,e.reduce=S,e.compact=I,e.uniq=L,e.partial=k,e.isArray=P,e.isRegExp=x,e.isObject=C,e.every=M,e.difference=F,e.some=b,e.indexOf=D,e.sortBy=w,e.zipObject=U,e.assign=G,e.assignNoOverwrite=B,e.defaults=K,e.groupBy=W,e.merge=j,e.NOOP=V,e.IDENTITY=Y,e.packArray=H,e.PRINT_ERROR=X,e.PRINT_WARNING=z,e.isES2015MapSupported=q,e.applyMixins=$,e.toFastProperties=Z},function(t,e,n){\"use strict\";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,\"__esModule\",{value:!0});var o=n(0),a=n(2),s=function(){function t(t){this.definition=t}return t.prototype.accept=function(t){t.visit(this),o.forEach(this.definition,function(e){e.accept(t)})},t}();e.AbstractProduction=s;var u=function(t){function e(e){var n=t.call(this,[])||this;return n.idx=1,o.assign(n,o.pick(e,function(t){return void 0!==t})),n}return i(e,t),Object.defineProperty(e.prototype,\"definition\",{get:function(){return void 0!==this.referencedRule?this.referencedRule.definition:[]},set:function(t){},enumerable:!0,configurable:!0}),e.prototype.accept=function(t){t.visit(this)},e}(s);e.NonTerminal=u;var c=function(t){function e(e){var n=t.call(this,e.definition)||this;return n.orgText=\"\",o.assign(n,o.pick(e,function(t){return void 0!==t})),n}return i(e,t),e}(s);e.Rule=c;var p=function(t){function e(e){var n=t.call(this,e.definition)||this;return o.assign(n,o.pick(e,function(t){return void 0!==t})),n}return i(e,t),e}(s);e.Flat=p;var l=function(t){function e(e){var n=t.call(this,e.definition)||this;return n.idx=1,o.assign(n,o.pick(e,function(t){return void 0!==t})),n}return i(e,t),e}(s);e.Option=l;var h=function(t){function e(e){var n=t.call(this,e.definition)||this;return n.idx=1,o.assign(n,o.pick(e,function(t){return void 0!==t})),n}return i(e,t),e}(s);e.RepetitionMandatory=h;var f=function(t){function e(e){var n=t.call(this,e.definition)||this;return n.idx=1,o.assign(n,o.pick(e,function(t){return void 0!==t})),n}return i(e,t),e}(s);e.RepetitionMandatoryWithSeparator=f;var d=function(t){function e(e){var n=t.call(this,e.definition)||this;return n.idx=1,o.assign(n,o.pick(e,function(t){return void 0!==t})),n}return i(e,t),e}(s);e.Repetition=d;var E=function(t){function e(e){var n=t.call(this,e.definition)||this;return n.idx=1,o.assign(n,o.pick(e,function(t){return void 0!==t})),n}return i(e,t),e}(s);e.RepetitionWithSeparator=E;var m=function(t){function e(e){var n=t.call(this,e.definition)||this;return n.idx=1,o.assign(n,o.pick(e,function(t){return void 0!==t})),n}return i(e,t),e}(s);e.Alternation=m;var y=function(){function t(t){this.idx=1,o.assign(this,o.pick(t,function(t){return void 0!==t}))}return t.prototype.accept=function(t){t.visit(this)},t}();function T(t){function e(t){return o.map(t,T)}if(t instanceof u)return{type:\"NonTerminal\",name:t.nonTerminalName,idx:t.idx};if(t instanceof p)return{type:\"Flat\",definition:e(t.definition)};if(t instanceof l)return{type:\"Option\",idx:t.idx,definition:e(t.definition)};if(t instanceof h)return{type:\"RepetitionMandatory\",name:t.name,idx:t.idx,definition:e(t.definition)};if(t instanceof f)return{type:\"RepetitionMandatoryWithSeparator\",name:t.name,idx:t.idx,separator:T(new y({terminalType:t.separator})),definition:e(t.definition)};if(t instanceof E)return{type:\"RepetitionWithSeparator\",name:t.name,idx:t.idx,separator:T(new y({terminalType:t.separator})),definition:e(t.definition)};if(t instanceof d)return{type:\"Repetition\",name:t.name,idx:t.idx,definition:e(t.definition)};if(t instanceof m)return{type:\"Alternation\",name:t.name,idx:t.idx,definition:e(t.definition)};if(t instanceof y){var n={type:\"Terminal\",name:a.tokenName(t.terminalType),label:a.tokenLabel(t.terminalType),idx:t.idx},r=t.terminalType.PATTERN;return t.terminalType.PATTERN&&(n.pattern=o.isRegExp(r)?r.source:r),n}if(t instanceof c)return{type:\"Rule\",name:t.name,orgText:t.orgText,definition:e(t.definition)};throw Error(\"non exhaustive match\")}e.Terminal=y,e.serializeGrammar=function(t){return o.map(t,T)},e.serializeProduction=T},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(0),i=n(4),o=n(15),a=n(7);function s(t){return r.isString(t.LABEL)&&\"\"!==t.LABEL}function u(t){return r.isObject(t)&&t.hasOwnProperty(\"tokenName\")&&r.isString(t.tokenName)?t.tokenName:i.functionName(t)}e.tokenLabel=function(t){return s(t)?t.LABEL:u(t)},e.hasTokenLabel=s,e.tokenName=u;var c=\"parent\",p=\"categories\",l=\"label\",h=\"group\",f=\"push_mode\",d=\"pop_mode\",E=\"longer_alt\",m=\"line_breaks\",y=\"start_chars_hint\";function T(t){return function(t){var e=t.name,n=t.pattern,o={};i.defineNameProp(o,e)||(o.tokenName=e);r.isUndefined(n)||(o.PATTERN=n);if(r.has(t,c))throw\"The parent property is no longer supported.\\nSee: https://github.com/SAP/chevrotain/issues/564#issuecomment-349062346 for details.\";r.has(t,p)&&(o.CATEGORIES=t[p]);a.augmentTokenTypes([o]),r.has(t,l)&&(o.LABEL=t[l]);r.has(t,h)&&(o.GROUP=t[h]);r.has(t,d)&&(o.POP_MODE=t[d]);r.has(t,f)&&(o.PUSH_MODE=t[f]);r.has(t,E)&&(o.LONGER_ALT=t[E]);r.has(t,m)&&(o.LINE_BREAKS=t[m]);r.has(t,y)&&(o.START_CHARS_HINT=t[y]);return o}(t)}e.createToken=T,e.EOF=T({name:\"EOF\",pattern:o.Lexer.NA}),a.augmentTokenTypes([e.EOF]),e.createTokenInstance=function(t,e,n,r,i,o,a,s){return{image:e,startOffset:n,endOffset:r,startLine:i,endLine:o,startColumn:a,endColumn:s,tokenTypeIdx:t.tokenTypeIdx,tokenType:t}},e.tokenMatcher=function(t,e){return a.tokenStructuredMatcher(t,e)}},function(t,e,n){\"use strict\";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,\"__esModule\",{value:!0});var o=n(4),a=n(0),s=n(26),u=n(2),c=n(23),p=n(16),l=n(10),h=n(24),f=n(25),d=n(31),E=n(32),m=n(34),y=n(35),T=n(36),v=n(37),g=n(38);e.END_OF_FILE=u.createTokenInstance(u.EOF,\"\",NaN,NaN,NaN,NaN,NaN,NaN),Object.freeze(e.END_OF_FILE),e.DEFAULT_PARSER_CONFIG=Object.freeze({recoveryEnabled:!1,maxLookahead:4,ignoredIssues:{},dynamicTokensEnabled:!1,outputCst:!0,errorMessageProvider:l.defaultParserErrorProvider,serializedGrammar:null}),e.DEFAULT_RULE_CONFIG=Object.freeze({recoveryValueFunc:function(){},resyncEnabled:!0}),function(t){t[t.INVALID_RULE_NAME=0]=\"INVALID_RULE_NAME\",t[t.DUPLICATE_RULE_NAME=1]=\"DUPLICATE_RULE_NAME\",t[t.INVALID_RULE_OVERRIDE=2]=\"INVALID_RULE_OVERRIDE\",t[t.DUPLICATE_PRODUCTIONS=3]=\"DUPLICATE_PRODUCTIONS\",t[t.UNRESOLVED_SUBRULE_REF=4]=\"UNRESOLVED_SUBRULE_REF\",t[t.LEFT_RECURSION=5]=\"LEFT_RECURSION\",t[t.NONE_LAST_EMPTY_ALT=6]=\"NONE_LAST_EMPTY_ALT\",t[t.AMBIGUOUS_ALTS=7]=\"AMBIGUOUS_ALTS\",t[t.CONFLICT_TOKENS_RULES_NAMESPACE=8]=\"CONFLICT_TOKENS_RULES_NAMESPACE\",t[t.INVALID_TOKEN_NAME=9]=\"INVALID_TOKEN_NAME\",t[t.INVALID_NESTED_RULE_NAME=10]=\"INVALID_NESTED_RULE_NAME\",t[t.DUPLICATE_NESTED_NAME=11]=\"DUPLICATE_NESTED_NAME\",t[t.NO_NON_EMPTY_LOOKAHEAD=12]=\"NO_NON_EMPTY_LOOKAHEAD\",t[t.AMBIGUOUS_PREFIX_ALTS=13]=\"AMBIGUOUS_PREFIX_ALTS\",t[t.TOO_MANY_ALTS=14]=\"TOO_MANY_ALTS\"}(e.ParserDefinitionErrorType||(e.ParserDefinitionErrorType={})),e.EMPTY_ALT=function(t){return void 0===t&&(t=void 0),function(){return t}};var _=function(){function t(t,n){void 0===n&&(n=e.DEFAULT_PARSER_CONFIG),this.ignoredIssues=e.DEFAULT_PARSER_CONFIG.ignoredIssues,this.definitionErrors=[],this.selfAnalysisDone=!1;this.initErrorHandler(n),this.initLexerAdapter(),this.initLooksAhead(n),this.initRecognizerEngine(t,n),this.initRecoverable(n),this.initTreeBuilder(n),this.initContentAssist(),this.ignoredIssues=a.has(n,\"ignoredIssues\")?n.ignoredIssues:e.DEFAULT_PARSER_CONFIG.ignoredIssues,a.toFastProperties(this)}return t.performSelfAnalysis=function(t){t.performSelfAnalysis()},t.prototype.performSelfAnalysis=function(){var e,n=this;this.selfAnalysisDone=!0;var r=o.classNameFromInstance(this),i=this.gastProductionsCache;if(this.serializedGrammar){var u=c.deserializeGrammar(this.serializedGrammar,this.tokensMap);a.forEach(u,function(t){n.gastProductionsCache.put(t.name,t)})}var f=h.resolveGrammar({rules:i.values()});if(this.definitionErrors.push.apply(this.definitionErrors,f),a.isEmpty(f)){var d=h.validateGrammar({rules:i.values(),maxLookahead:this.maxLookahead,tokenTypes:a.values(this.tokensMap),ignoredIssues:this.ignoredIssues,errMsgProvider:l.defaultGrammarValidatorErrorProvider,grammarName:r});this.definitionErrors.push.apply(this.definitionErrors,d)}if(a.isEmpty(this.definitionErrors)){var E=s.computeAllProdsFollows(i.values());this.resyncFollows=E}var m=p.analyzeCst(i.values(),this.fullRuleNameToShort);if(this.allRuleNames=m.allRuleNames,!t.DEFER_DEFINITION_ERRORS_HANDLING&&!a.isEmpty(this.definitionErrors))throw e=a.map(this.definitionErrors,function(t){return t.message}),new Error(\"Parser Definition Errors detected:\\n \"+e.join(\"\\n-------------------------------\\n\"))},t.DEFER_DEFINITION_ERRORS_HANDLING=!1,t}();e.Parser=_,a.applyMixins(_,[f.Recoverable,d.LooksAhead,E.TreeBuilder,m.LexerAdapter,T.RecognizerEngine,y.RecognizerApi,v.ErrorHandler,g.ContentAssist]);var R=function(t){function n(n,r){void 0===r&&(r=e.DEFAULT_PARSER_CONFIG);var i=a.cloneObj(r);return i.outputCst=!0,t.call(this,n,i)||this}return i(n,t),n}(_);e.CstParser=R;var A=function(t){function n(n,r){void 0===r&&(r=e.DEFAULT_PARSER_CONFIG);var i=a.cloneObj(r);return i.outputCst=!1,t.call(this,n,i)||this}return i(n,t),n}(_);e.EmbeddedActionsParser=A},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(0);e.classNameFromInstance=function(t){return a(t.constructor)};var i=/^\\s*function\\s*(\\S*)\\s*\\(/,o=\"name\";function a(t){var e=t.name;return e||t.toString().match(i)[1]}e.functionName=a,e.defineNameProp=function(t,e){var n=Object.getOwnPropertyDescriptor(t,o);return!(!r.isUndefined(n)&&!n.configurable||(Object.defineProperty(t,o,{enumerable:!1,configurable:!0,writable:!1,value:e}),0))};var s=function(){function t(){this._state={}}return t.prototype.keys=function(){return r.keys(this._state)},t.prototype.values=function(){return r.values(this._state)},t.prototype.put=function(t,e){this._state[t]=e},t.prototype.putAll=function(t){this._state=r.assign(this._state,t._state)},t.prototype.get=function(t){return this._state[t]},t.prototype.containsKey=function(t){return r.has(this._state,t)},t.prototype.clear=function(){this._state={}},t}();e.HashTable=s},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(1),i=function(){function t(){}return t.prototype.visit=function(t){if(t instanceof r.NonTerminal)return this.visitNonTerminal(t);if(t instanceof r.Flat)return this.visitFlat(t);if(t instanceof r.Option)return this.visitOption(t);if(t instanceof r.RepetitionMandatory)return this.visitRepetitionMandatory(t);if(t instanceof r.RepetitionMandatoryWithSeparator)return this.visitRepetitionMandatoryWithSeparator(t);if(t instanceof r.RepetitionWithSeparator)return this.visitRepetitionWithSeparator(t);if(t instanceof r.Repetition)return this.visitRepetition(t);if(t instanceof r.Alternation)return this.visitAlternation(t);if(t instanceof r.Terminal)return this.visitTerminal(t);if(t instanceof r.Rule)return this.visitRule(t);throw Error(\"non exhaustive match\")},t.prototype.visitNonTerminal=function(t){},t.prototype.visitFlat=function(t){},t.prototype.visitOption=function(t){},t.prototype.visitRepetition=function(t){},t.prototype.visitRepetitionMandatory=function(t){},t.prototype.visitRepetitionMandatoryWithSeparator=function(t){},t.prototype.visitRepetitionWithSeparator=function(t){},t.prototype.visitAlternation=function(t){},t.prototype.visitTerminal=function(t){},t.prototype.visitRule=function(t){},t}();e.GAstVisitor=i},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(0),i=\"MismatchedTokenException\",o=\"NoViableAltException\",a=\"EarlyExitException\",s=\"NotAllInputParsedException\",u=[i,o,a,s];function c(t,e,n){this.name=i,this.message=t,this.token=e,this.previousToken=n,this.resyncedTokens=[]}function p(t,e,n){this.name=o,this.message=t,this.token=e,this.previousToken=n,this.resyncedTokens=[]}function l(t,e){this.name=s,this.message=t,this.token=e,this.resyncedTokens=[]}function h(t,e,n){this.name=a,this.message=t,this.token=e,this.previousToken=n,this.resyncedTokens=[]}Object.freeze(u),e.isRecognitionException=function(t){return r.contains(u,t.name)},e.MismatchedTokenException=c,c.prototype=Error.prototype,e.NoViableAltException=p,p.prototype=Error.prototype,e.NotAllInputParsedException=l,l.prototype=Error.prototype,e.EarlyExitException=h,h.prototype=Error.prototype},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(0),i=n(4),o=n(2);function a(t){for(var e=r.cloneArr(t),n=t,i=!0;i;){n=r.compact(r.flatten(r.map(n,function(t){return t.CATEGORIES})));var o=r.difference(n,e);e=e.concat(o),r.isEmpty(o)?i=!1:n=o}return e}function s(t){r.forEach(t,function(t){l(t)||(e.tokenIdxToClass.put(e.tokenShortNameIdx,t),t.tokenTypeIdx=e.tokenShortNameIdx++),h(t)&&!r.isArray(t.CATEGORIES)&&(t.CATEGORIES=[t.CATEGORIES]),h(t)||(t.CATEGORIES=[]),f(t)||(t.categoryMatches=[]),d(t)||(t.categoryMatchesMap={}),E(t)||(t.tokenName=o.tokenName(t))})}function u(t){r.forEach(t,function(t){t.categoryMatches=[],r.forEach(t.categoryMatchesMap,function(n,r){t.categoryMatches.push(e.tokenIdxToClass.get(r).tokenTypeIdx)})})}function c(t){r.forEach(t,function(t){p([],t)})}function p(t,e){r.forEach(t,function(t){e.categoryMatchesMap[t.tokenTypeIdx]=!0}),r.forEach(e.CATEGORIES,function(n){var i=t.concat(e);r.contains(i,n)||p(i,n)})}function l(t){return r.has(t,\"tokenTypeIdx\")}function h(t){return r.has(t,\"CATEGORIES\")}function f(t){return r.has(t,\"categoryMatches\")}function d(t){return r.has(t,\"categoryMatchesMap\")}function E(t){return r.has(t,\"tokenName\")}e.tokenStructuredMatcher=function(t,e){var n=t.tokenTypeIdx;return n===e.tokenTypeIdx||!0===e.isParent&&!0===e.categoryMatchesMap[n]},e.tokenStructuredMatcherNoCategories=function(t,e){return t.tokenTypeIdx===e.tokenTypeIdx},e.tokenShortNameIdx=1,e.tokenIdxToClass=new i.HashTable,e.augmentTokenTypes=function(t){var e=a(t);s(e),c(e),u(e),r.forEach(e,function(t){t.isParent=t.categoryMatches.length>0})},e.expandCategories=a,e.assignTokenDefaultProps=s,e.assignCategoriesTokensProp=u,e.assignCategoriesMapProp=c,e.singleAssignCategoriesToksMap=p,e.hasShortKeyProperty=l,e.hasCategoriesProperty=h,e.hasExtendingTokensTypesProperty=f,e.hasExtendingTokensTypesMapProperty=d,e.hasTokenNameProperty=E,e.isTokenType=function(t){return r.has(t,\"tokenTypeIdx\")}},function(t,e,n){\"use strict\";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,\"__esModule\",{value:!0});var o=n(0),a=n(1),s=n(5),u=n(2);e.isSequenceProd=function(t){return t instanceof a.Flat||t instanceof a.Option||t instanceof a.Repetition||t instanceof a.RepetitionMandatory||t instanceof a.RepetitionMandatoryWithSeparator||t instanceof a.RepetitionWithSeparator||t instanceof a.Terminal||t instanceof a.Rule},e.isOptionalProd=function t(e,n){return void 0===n&&(n=[]),!!(e instanceof a.Option||e instanceof a.Repetition||e instanceof a.RepetitionWithSeparator)||(e instanceof a.Alternation?o.some(e.definition,function(e){return t(e,n)}):!(e instanceof a.NonTerminal&&o.contains(n,e))&&e instanceof a.AbstractProduction&&(e instanceof a.NonTerminal&&n.push(e),o.every(e.definition,function(e){return t(e,n)})))},e.isBranchingProd=function(t){return t instanceof a.Alternation},e.getProductionDslName=function(t){if(t instanceof a.NonTerminal)return\"SUBRULE\";if(t instanceof a.Option)return\"OPTION\";if(t instanceof a.Alternation)return\"OR\";if(t instanceof a.RepetitionMandatory)return\"AT_LEAST_ONE\";if(t instanceof a.RepetitionMandatoryWithSeparator)return\"AT_LEAST_ONE_SEP\";if(t instanceof a.RepetitionWithSeparator)return\"MANY_SEP\";if(t instanceof a.Repetition)return\"MANY\";if(t instanceof a.Terminal)return\"CONSUME\";throw Error(\"non exhaustive match\")};var c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.separator=\"-\",e.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]},e}return i(e,t),e.prototype.visitTerminal=function(t){var e=u.tokenName(t.terminalType)+this.separator+\"Terminal\";o.has(this.dslMethods,e)||(this.dslMethods[e]=[]),this.dslMethods[e].push(t)},e.prototype.visitNonTerminal=function(t){var e=t.nonTerminalName+this.separator+\"Terminal\";o.has(this.dslMethods,e)||(this.dslMethods[e]=[]),this.dslMethods[e].push(t)},e.prototype.visitOption=function(t){this.dslMethods.option.push(t)},e.prototype.visitRepetitionWithSeparator=function(t){this.dslMethods.repetitionWithSeparator.push(t)},e.prototype.visitRepetitionMandatory=function(t){this.dslMethods.repetitionMandatory.push(t)},e.prototype.visitRepetitionMandatoryWithSeparator=function(t){this.dslMethods.repetitionMandatoryWithSeparator.push(t)},e.prototype.visitRepetition=function(t){this.dslMethods.repetition.push(t)},e.prototype.visitAlternation=function(t){this.dslMethods.alternation.push(t)},e}(s.GAstVisitor);e.DslMethodsCollectorVisitor=c},function(t,e,n){\"use strict\";function r(t,e,n){return n|e|t}Object.defineProperty(e,\"__esModule\",{value:!0}),e.BITS_FOR_METHOD_IDX=4,e.BITS_FOR_OCCURRENCE_IDX=4,e.BITS_FOR_RULE_IDX=24,e.BITS_FOR_ALT_IDX=8,e.OR_IDX=1<<e.BITS_FOR_METHOD_IDX,e.OPTION_IDX=2<<e.BITS_FOR_METHOD_IDX,e.MANY_IDX=3<<e.BITS_FOR_METHOD_IDX,e.AT_LEAST_ONE_IDX=4<<e.BITS_FOR_METHOD_IDX,e.MANY_SEP_IDX=5<<e.BITS_FOR_METHOD_IDX,e.AT_LEAST_ONE_SEP_IDX=6<<e.BITS_FOR_METHOD_IDX,e.getKeyForAutomaticLookahead=r;var i=32-e.BITS_FOR_ALT_IDX;e.getKeyForAltIndex=function(t,e,n,o){var a=o+1<<i;return r(t,e,n)|a}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(2),i=n(0),o=n(0),a=n(1),s=n(8),u=n(11),c=n(17),p=n(3);e.defaultParserErrorProvider={buildMismatchTokenMessage:function(t){var e=t.expected,n=t.actual;t.previous,t.ruleName;return\"Expecting \"+(r.hasTokenLabel(e)?\"--\\x3e \"+r.tokenLabel(e)+\" <--\":\"token of type --\\x3e \"+r.tokenName(e)+\" <--\")+\" but found --\\x3e '\"+n.image+\"' <--\"},buildNotAllInputParsedMessage:function(t){var e=t.firstRedundant;t.ruleName;return\"Redundant input, expecting EOF but found: \"+e.image},buildNoViableAltMessage:function(t){var e=t.expectedPathsPerAlt,n=t.actual,i=(t.previous,t.customUserDescription),a=(t.ruleName,\"\\nbut found: '\"+o.first(n).image+\"'\");if(i)return\"Expecting: \"+i+a;var s=o.reduce(e,function(t,e){return t.concat(e)},[]),u=o.map(s,function(t){return\"[\"+o.map(t,function(t){return r.tokenLabel(t)}).join(\", \")+\"]\"});return\"Expecting: \"+(\"one of these possible Token sequences:\\n\"+o.map(u,function(t,e){return\"  \"+(e+1)+\". \"+t}).join(\"\\n\"))+a},buildEarlyExitMessage:function(t){var e=t.expectedIterationPaths,n=t.actual,i=t.customUserDescription,a=(t.ruleName,\"\\nbut found: '\"+o.first(n).image+\"'\");return i?\"Expecting: \"+i+a:\"Expecting: \"+(\"expecting at least one iteration which starts with one of these possible Token sequences::\\n  <\"+o.map(e,function(t){return\"[\"+o.map(t,function(t){return r.tokenLabel(t)}).join(\",\")+\"]\"}).join(\" ,\")+\">\")+a}},Object.freeze(e.defaultParserErrorProvider),e.defaultGrammarResolverErrorProvider={buildRuleNotFoundError:function(t,e){return\"Invalid grammar, reference to a rule which is not defined: ->\"+e.nonTerminalName+\"<-\\ninside top level rule: ->\"+t.name+\"<-\"}},e.defaultGrammarValidatorErrorProvider={buildDuplicateFoundError:function(t,e){var n,i=t.name,u=o.first(e),c=u.idx,p=s.getProductionDslName(u),l=(n=u)instanceof a.Terminal?r.tokenName(n.terminalType):n instanceof a.NonTerminal?n.nonTerminalName:\"\",h=\"->\"+p+\"<- with numerical suffix: ->\"+c+\"<-\\n                  \"+(l?\"and argument: ->\"+l+\"<-\":\"\")+\"\\n                  appears more than once (\"+e.length+\" times) in the top level rule: ->\"+i+\"<-.\\n                  \"+(0===c?\"Also note that numerical suffix 0 means \"+p+\" without any suffix.\":\"\")+\"\\n                  To fix this make sure each usage of \"+p+\" \"+(l?\"with the argument: ->\"+l+\"<-\":\"\")+\"\\n                  in the rule ->\"+i+\"<- has a different occurrence index (0-5), as that combination acts as a unique\\n                  position key in the grammar, which is needed by the parsing engine.\\n                  \\n                  For further details see: https://sap.github.io/chevrotain/docs/FAQ.html#NUMERICAL_SUFFIXES \\n                  \";return h=(h=h.replace(/[ \\t]+/g,\" \")).replace(/\\s\\s+/g,\"\\n\")},buildInvalidNestedRuleNameError:function(t,e){return\"Invalid nested rule name: ->\"+e.name+\"<- inside rule: ->\"+t.name+\"<-\\nit must match the pattern: ->\"+u.validNestedRuleName.toString()+\"<-.\\nNote that this means a nested rule name must start with the '$'(dollar) sign.\"},buildDuplicateNestedRuleNameError:function(t,e){return\"Duplicate nested rule name: ->\"+o.first(e).name+\"<- inside rule: ->\"+t.name+\"<-\\nA nested name must be unique in the scope of a top level grammar rule.\"},buildNamespaceConflictError:function(t){return\"Namespace conflict found in grammar.\\nThe grammar has both a Terminal(Token) and a Non-Terminal(Rule) named: <\"+t.name+\">.\\nTo resolve this make sure each Terminal and Non-Terminal names are unique\\nThis is easy to accomplish by using the convention that Terminal names start with an uppercase letter\\nand Non-Terminal names start with a lower case letter.\"},buildAlternationPrefixAmbiguityError:function(t){var e=o.map(t.prefixPath,function(t){return r.tokenLabel(t)}).join(\", \"),n=0===t.alternation.idx?\"\":t.alternation.idx;return\"Ambiguous alternatives: <\"+t.ambiguityIndices.join(\" ,\")+\"> due to common lookahead prefix\\nin <OR\"+n+\"> inside <\"+t.topLevelRule.name+\"> Rule,\\n<\"+e+\"> may appears as a prefix path in all these alternatives.\\nhttps://sap.github.io/chevrotain/docs/guide/resolving_grammar_errors.html#COMMON_PREFIX\\nFor Further details.\"},buildAlternationAmbiguityError:function(t){var e=o.map(t.prefixPath,function(t){return r.tokenLabel(t)}).join(\", \"),n=0===t.alternation.idx?\"\":t.alternation.idx,i=\"Ambiguous alternatives: <\"+t.ambiguityIndices.join(\" ,\")+\"> in <OR\"+n+\"> inside <\"+t.topLevelRule.name+\"> Rule,\\n<\"+e+\"> may appears as a prefix path in all these alternatives.\\n\",a=c.VERSION.replace(/\\./g,\"_\");return i=i+\"To Resolve this, try one of of the following: \\n1. Refactor your grammar to be LL(K) for the current value of k (by default k=\"+p.DEFAULT_PARSER_CONFIG.maxLookahead+\"})\\n2. Increase the value of K for your grammar by providing a larger 'maxLookahead' value in the parser's config\\n3. This issue can be ignored (if you know what you are doing...), see https://sap.github.io/chevrotain/documentation/\"+a+\"/interfaces/iparserconfig.html#ignoredissues for more details\\n\"},buildEmptyRepetitionError:function(t){var e=s.getProductionDslName(t.repetition);return 0!==t.repetition.idx&&(e+=t.repetition.idx),\"The repetition <\"+e+\"> within Rule <\"+t.topLevelRule.name+\"> can never consume any tokens.\\nThis could lead to an infinite loop.\"},buildTokenNameError:function(t){return\"Invalid Grammar Token name: ->\"+r.tokenName(t.tokenType)+\"<- it must match the pattern: ->\"+t.expectedPattern.toString()+\"<-\"},buildEmptyAlternationError:function(t){return\"Ambiguous empty alternative: <\"+(t.emptyChoiceIdx+1)+\"> in <OR\"+t.alternation.idx+\"> inside <\"+t.topLevelRule.name+\"> Rule.\\nOnly the last alternative may be an empty alternative.\"},buildTooManyAlternativesError:function(t){return\"An Alternation cannot have more than 256 alternatives:\\n<OR\"+t.alternation.idx+\"> inside <\"+t.topLevelRule.name+\"> Rule.\\n has \"+(t.alternation.definition.length+1)+\" alternatives.\"},buildLeftRecursionError:function(t){var e=t.topLevelRule.name;return\"Left Recursion found in grammar.\\nrule: <\"+e+\"> can be invoked from itself (directly or indirectly)\\nwithout consuming any Tokens. The grammar path that causes this is: \\n \"+(e+\" --\\x3e \"+i.map(t.leftRecursionPath,function(t){return t.name}).concat([e]).join(\" --\\x3e \"))+\"\\n To fix this refactor your grammar to remove the left recursion.\\nsee: https://en.wikipedia.org/wiki/LL_parser#Left_Factoring.\"},buildInvalidRuleNameError:function(t){return\"Invalid grammar rule name: ->\"+t.topLevelRule.name+\"<- it must match the pattern: ->\"+t.expectedPattern.toString()+\"<-\"},buildDuplicateRuleNameError:function(t){return\"Duplicate definition, rule: ->\"+(t.topLevelRule instanceof a.Rule?t.topLevelRule.name:t.topLevelRule)+\"<- is already defined in the grammar: ->\"+t.grammarName+\"<-\"}}},function(t,e,n){\"use strict\";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,\"__esModule\",{value:!0});var o=n(0),a=n(0),s=n(3),u=n(8),c=n(2),p=n(12),l=n(16),h=n(13),f=n(1),d=n(5);function E(t){return u.getProductionDslName(t)+\"_#_\"+t.idx+\"_#_\"+m(t)}function m(t){return t instanceof f.Terminal?c.tokenName(t.terminalType):t instanceof f.NonTerminal?t.nonTerminalName:\"\"}e.validateGrammar=function(t,e,n,r,i,p){var h=o.map(t,function(t){return function(t,e){var n=new y;t.accept(n);var r=n.allProductions,i=o.groupBy(r,E),a=o.pick(i,function(t){return t.length>1});return o.map(o.values(a),function(n){var r=o.first(n),i=e.buildDuplicateFoundError(t,n),a=u.getProductionDslName(r),c={message:i,type:s.ParserDefinitionErrorType.DUPLICATE_PRODUCTIONS,ruleName:t.name,dslName:a,occurrence:r.idx},p=m(r);return p&&(c.parameter=p),c})}(t,i)}),f=o.map(t,function(t){return R(t,t,i)}),d=[],A=[],N=[];a.every(f,a.isEmpty)&&(d=a.map(t,function(t){return O(t,i)}),A=a.map(t,function(t){return S(t,e,r,i)}),N=k(t,e,i));var I=function(t,e,n){var r=[],i=a.map(e,function(t){return c.tokenName(t)});return a.forEach(t,function(t){var e=t.name;if(a.contains(i,e)){var o=n.buildNamespaceConflictError(t);r.push({message:o,type:s.ParserDefinitionErrorType.CONFLICT_TOKENS_RULES_NAMESPACE,ruleName:e})}}),r}(t,n,i),P=o.map(n,function(t){return g(t,i)}),x=function(t,e){var n=[];return a.forEach(t,function(t){var r=new l.NamedDSLMethodsCollectorVisitor(\"\");t.accept(r);var i=a.map(r.result,function(t){return t.orgProd});n.push(a.map(i,function(n){return v(t,n,e)}))}),a.flatten(n)}(t,i),C=function(t,e){var n=[];return a.forEach(t,function(t){var r=new l.NamedDSLMethodsCollectorVisitor(\"\");t.accept(r);var i=a.groupBy(r.result,function(t){return t.name}),o=a.pick(i,function(t){return t.length>1});a.forEach(a.values(o),function(r){var i=a.map(r,function(t){return t.orgProd}),o=e.buildDuplicateNestedRuleNameError(t,i);n.push({message:o,type:s.ParserDefinitionErrorType.DUPLICATE_NESTED_NAME,ruleName:t.name})})}),n}(t,i),M=a.map(t,function(t){return L(t,i)}),F=a.map(t,function(t){return T(t,i)}),b=a.map(t,function(e){return _(e,t,p,i)});return o.flatten(h.concat(P,x,C,N,f,d,A,I,M,F,b))},e.identifyProductionForDuplicates=E;var y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.allProductions=[],e}return i(e,t),e.prototype.visitNonTerminal=function(t){this.allProductions.push(t)},e.prototype.visitOption=function(t){this.allProductions.push(t)},e.prototype.visitRepetitionWithSeparator=function(t){this.allProductions.push(t)},e.prototype.visitRepetitionMandatory=function(t){this.allProductions.push(t)},e.prototype.visitRepetitionMandatoryWithSeparator=function(t){this.allProductions.push(t)},e.prototype.visitRepetition=function(t){this.allProductions.push(t)},e.prototype.visitAlternation=function(t){this.allProductions.push(t)},e.prototype.visitTerminal=function(t){this.allProductions.push(t)},e}(d.GAstVisitor);function T(t,n){var r=[],i=t.name;return i.match(e.validTermsPattern)||r.push({message:n.buildInvalidRuleNameError({topLevelRule:t,expectedPattern:e.validTermsPattern}),type:s.ParserDefinitionErrorType.INVALID_RULE_NAME,ruleName:i}),r}function v(t,n,r){var i,o=[];return n.name.match(e.validNestedRuleName)||(i=r.buildInvalidNestedRuleNameError(t,n),o.push({message:i,type:s.ParserDefinitionErrorType.INVALID_NESTED_RULE_NAME,ruleName:t.name})),o}function g(t,n){var r=[];return c.tokenName(t).match(e.validTermsPattern)||r.push({message:n.buildTokenNameError({tokenType:t,expectedPattern:e.validTermsPattern}),type:s.ParserDefinitionErrorType.INVALID_TOKEN_NAME}),r}function _(t,e,n,r){var i=[];if(a.reduce(e,function(e,n){return n.name===t.name?e+1:e},0)>1){var o=r.buildDuplicateRuleNameError({topLevelRule:t,grammarName:n});i.push({message:o,type:s.ParserDefinitionErrorType.DUPLICATE_RULE_NAME,ruleName:t.name})}return i}function R(t,e,n,r){void 0===r&&(r=[]);var i=[],a=A(e.definition);if(o.isEmpty(a))return[];var u=t.name;o.contains(a,t)&&i.push({message:n.buildLeftRecursionError({topLevelRule:t,leftRecursionPath:r}),type:s.ParserDefinitionErrorType.LEFT_RECURSION,ruleName:u});var c=o.difference(a,r.concat([t])),p=o.map(c,function(e){var i=o.cloneArr(r);return i.push(e),R(t,e,n,i)});return i.concat(o.flatten(p))}function A(t){var e=[];if(o.isEmpty(t))return e;var n=o.first(t);if(n instanceof f.NonTerminal)e.push(n.referencedRule);else if(n instanceof f.Flat||n instanceof f.Option||n instanceof f.RepetitionMandatory||n instanceof f.RepetitionMandatoryWithSeparator||n instanceof f.RepetitionWithSeparator||n instanceof f.Repetition)e=e.concat(A(n.definition));else if(n instanceof f.Alternation)e=o.flatten(o.map(n.definition,function(t){return A(t.definition)}));else if(!(n instanceof f.Terminal))throw Error(\"non exhaustive match\");var r=u.isOptionalProd(n),i=t.length>1;if(r&&i){var a=o.drop(t);return e.concat(A(a))}return e}e.OccurrenceValidationCollector=y,e.validTermsPattern=/^[a-zA-Z_]\\w*$/,e.validNestedRuleName=new RegExp(e.validTermsPattern.source.replace(\"^\",\"^\\\\$\")),e.validateRuleName=T,e.validateNestedRuleName=v,e.validateTokenName=g,e.validateRuleDoesNotAlreadyExist=_,e.validateRuleIsOverridden=function(t,e,n){var r,i=[];return o.contains(e,t)||(r=\"Invalid rule override, rule: ->\"+t+\"<- cannot be overridden in the grammar: ->\"+n+\"<-as it is not defined in any of the super grammars \",i.push({message:r,type:s.ParserDefinitionErrorType.INVALID_RULE_OVERRIDE,ruleName:t})),i},e.validateNoLeftRecursion=R,e.getFirstNoneTerminal=A;var N=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.alternations=[],e}return i(e,t),e.prototype.visitAlternation=function(t){this.alternations.push(t)},e}(d.GAstVisitor);function O(t,e){var n=new N;t.accept(n);var r=n.alternations;return o.reduce(r,function(n,r){var i=o.dropRight(r.definition),a=o.map(i,function(n,i){var a=h.nextPossibleTokensAfter([n],[],null,1);return o.isEmpty(a)?{message:e.buildEmptyAlternationError({topLevelRule:t,alternation:r,emptyChoiceIdx:i}),type:s.ParserDefinitionErrorType.NONE_LAST_EMPTY_ALT,ruleName:t.name,occurrence:r.idx,alternative:i+1}:null});return n.concat(o.compact(a))},[])}function S(t,e,n,r){var i=new N;t.accept(i);var c=i.alternations,l=n[t.name];return l&&(c=a.reject(c,function(t){return l[u.getProductionDslName(t)+(0===t.idx?\"\":t.idx)]})),o.reduce(c,function(n,i){var u=i.idx,c=p.getLookaheadPathsForOr(u,t,e),l=function(t,e,n,r){var i=[],u=a.reduce(t,function(e,n,r){return a.forEach(n,function(n){var o=[r];a.forEach(t,function(t,e){r!==e&&p.containsPath(t,n)&&o.push(e)}),o.length>1&&!p.containsPath(i,n)&&(i.push(n),e.push({alts:o,path:n}))}),e},[]);return o.map(u,function(t){var i=a.map(t.alts,function(t){return t+1}),o=r.buildAlternationAmbiguityError({topLevelRule:n,alternation:e,ambiguityIndices:i,prefixPath:t.path});return{message:o,type:s.ParserDefinitionErrorType.AMBIGUOUS_ALTS,ruleName:n.name,occurrence:e.idx,alternatives:[t.alts]}})}(c,i,t,r),h=P(c,i,t,r);return n.concat(l,h)},[])}e.validateEmptyOrAlternative=O,e.validateAmbiguousAlternationAlternatives=S;var I=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.allProductions=[],e}return i(e,t),e.prototype.visitRepetitionWithSeparator=function(t){this.allProductions.push(t)},e.prototype.visitRepetitionMandatory=function(t){this.allProductions.push(t)},e.prototype.visitRepetitionMandatoryWithSeparator=function(t){this.allProductions.push(t)},e.prototype.visitRepetition=function(t){this.allProductions.push(t)},e}(d.GAstVisitor);function L(t,e){var n=new N;t.accept(n);var r=n.alternations;return o.reduce(r,function(n,r){return r.definition.length>255&&n.push({message:e.buildTooManyAlternativesError({topLevelRule:t,alternation:r}),type:s.ParserDefinitionErrorType.TOO_MANY_ALTS,ruleName:t.name,occurrence:r.idx}),n},[])}function k(t,e,n){var r=[];return a.forEach(t,function(t){var i=new I;t.accept(i);var o=i.allProductions;a.forEach(o,function(i){var o=p.getProdType(i),u=i.idx,c=p.getLookaheadPathsForOptionalProd(u,t,o,e)[0];if(a.isEmpty(a.flatten(c))){var l=n.buildEmptyRepetitionError({topLevelRule:t,repetition:i});r.push({message:l,type:s.ParserDefinitionErrorType.NO_NON_EMPTY_LOOKAHEAD,ruleName:t.name})}})}),r}function P(t,e,n,r){var i=[],o=a.reduce(t,function(t,e,n){var r=a.map(e,function(t){return{idx:n,path:t}});return t.concat(r)},[]);return a.forEach(o,function(t){var u=t.idx,c=t.path,l=a.findAll(o,function(t){return t.idx<u&&p.isStrictPrefixOfPath(t.path,c)}),h=a.map(l,function(t){var i=[t.idx+1,u+1],o=0===e.idx?\"\":e.idx;return{message:r.buildAlternationPrefixAmbiguityError({topLevelRule:n,alternation:e,ambiguityIndices:i,prefixPath:t.path}),type:s.ParserDefinitionErrorType.AMBIGUOUS_PREFIX_ALTS,ruleName:n.name,occurrence:o,alternatives:i}});i=i.concat(h)}),i}e.RepetionCollector=I,e.validateTooManyAlts=L,e.validateSomeNonEmptyLookaheadPath=k,e.checkPrefixAlternativesAmbiguities=P},function(t,e,n){\"use strict\";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,\"__esModule\",{value:!0});var o,a=n(0),s=n(13),u=n(14),c=n(7),p=n(1),l=n(5);!function(t){t[t.OPTION=0]=\"OPTION\",t[t.REPETITION=1]=\"REPETITION\",t[t.REPETITION_MANDATORY=2]=\"REPETITION_MANDATORY\",t[t.REPETITION_MANDATORY_WITH_SEPARATOR=3]=\"REPETITION_MANDATORY_WITH_SEPARATOR\",t[t.REPETITION_WITH_SEPARATOR=4]=\"REPETITION_WITH_SEPARATOR\",t[t.ALTERNATION=5]=\"ALTERNATION\"}(o=e.PROD_TYPE||(e.PROD_TYPE={})),e.getProdType=function(t){if(t instanceof p.Option)return o.OPTION;if(t instanceof p.Repetition)return o.REPETITION;if(t instanceof p.RepetitionMandatory)return o.REPETITION_MANDATORY;if(t instanceof p.RepetitionMandatoryWithSeparator)return o.REPETITION_MANDATORY_WITH_SEPARATOR;if(t instanceof p.RepetitionWithSeparator)return o.REPETITION_WITH_SEPARATOR;if(t instanceof p.Alternation)return o.ALTERNATION;throw Error(\"non exhaustive match\")},e.buildLookaheadFuncForOr=function(t,e,n,r,i,o){var a=E(t,e,n);return o(a,r,T(a)?c.tokenStructuredMatcherNoCategories:c.tokenStructuredMatcher,i)},e.buildLookaheadFuncForOptionalProd=function(t,e,n,r,i,o){var a=m(t,e,i,n),s=T(a)?c.tokenStructuredMatcherNoCategories:c.tokenStructuredMatcher;return o(a[0],s,r)},e.buildAlternativesLookAheadFunc=function(t,e,n,r){var i=t.length,o=a.every(t,function(t){return a.every(t,function(t){return 1===t.length})});if(e)return function(e){for(var r=a.map(e,function(t){return t.GATE}),o=0;o<i;o++){var s=t[o],u=s.length,c=r[o];if(void 0===c||!1!==c.call(this))t:for(var p=0;p<u;p++){for(var l=s[p],h=l.length,f=0;f<h;f++){var d=this.LA(f+1);if(!1===n(d,l[f]))continue t}return o}}};if(o&&!r){var s=a.map(t,function(t){return a.flatten(t)}),u=a.reduce(s,function(t,e,n){return a.forEach(e,function(e){a.has(t,e.tokenTypeIdx)||(t[e.tokenTypeIdx]=n),a.forEach(e.categoryMatches,function(e){a.has(t,e)||(t[e]=n)})}),t},[]);return function(){var t=this.LA(1);return u[t.tokenTypeIdx]}}return function(){for(var e=0;e<i;e++){var r=t[e],o=r.length;t:for(var a=0;a<o;a++){for(var s=r[a],u=s.length,c=0;c<u;c++){var p=this.LA(c+1);if(!1===n(p,s[c]))continue t}return e}}}},e.buildSingleAlternativeLookaheadFunction=function(t,e,n){var r=a.every(t,function(t){return 1===t.length}),i=t.length;if(r&&!n){var o=a.flatten(t);if(1===o.length&&a.isEmpty(o[0].categoryMatches)){var s=o[0].tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===s}}var u=a.reduce(o,function(t,e,n){return t[e.tokenTypeIdx]=!0,a.forEach(e.categoryMatches,function(e){t[e]=!0}),t},[]);return function(){var t=this.LA(1);return!0===u[t.tokenTypeIdx]}}return function(){t:for(var n=0;n<i;n++){for(var r=t[n],o=r.length,a=0;a<o;a++){var s=this.LA(a+1);if(!1===e(s,r[a]))continue t}return!0}return!1}};var h=function(t){function e(e,n,r){var i=t.call(this)||this;return i.topProd=e,i.targetOccurrence=n,i.targetProdType=r,i}return i(e,t),e.prototype.startWalking=function(){return this.walk(this.topProd),this.restDef},e.prototype.checkIsTarget=function(t,e,n,r){return t.idx===this.targetOccurrence&&this.targetProdType===e&&(this.restDef=n.concat(r),!0)},e.prototype.walkOption=function(e,n,r){this.checkIsTarget(e,o.OPTION,n,r)||t.prototype.walkOption.call(this,e,n,r)},e.prototype.walkAtLeastOne=function(e,n,r){this.checkIsTarget(e,o.REPETITION_MANDATORY,n,r)||t.prototype.walkOption.call(this,e,n,r)},e.prototype.walkAtLeastOneSep=function(e,n,r){this.checkIsTarget(e,o.REPETITION_MANDATORY_WITH_SEPARATOR,n,r)||t.prototype.walkOption.call(this,e,n,r)},e.prototype.walkMany=function(e,n,r){this.checkIsTarget(e,o.REPETITION,n,r)||t.prototype.walkOption.call(this,e,n,r)},e.prototype.walkManySep=function(e,n,r){this.checkIsTarget(e,o.REPETITION_WITH_SEPARATOR,n,r)||t.prototype.walkOption.call(this,e,n,r)},e}(u.RestWalker),f=function(t){function e(e,n){var r=t.call(this)||this;return r.targetOccurrence=e,r.targetProdType=n,r.result=[],r}return i(e,t),e.prototype.checkIsTarget=function(t,e){t.idx===this.targetOccurrence&&this.targetProdType===e&&(this.result=t.definition)},e.prototype.visitOption=function(t){this.checkIsTarget(t,o.OPTION)},e.prototype.visitRepetition=function(t){this.checkIsTarget(t,o.REPETITION)},e.prototype.visitRepetitionMandatory=function(t){this.checkIsTarget(t,o.REPETITION_MANDATORY)},e.prototype.visitRepetitionMandatoryWithSeparator=function(t){this.checkIsTarget(t,o.REPETITION_MANDATORY_WITH_SEPARATOR)},e.prototype.visitRepetitionWithSeparator=function(t){this.checkIsTarget(t,o.REPETITION_WITH_SEPARATOR)},e.prototype.visitAlternation=function(t){this.checkIsTarget(t,o.ALTERNATION)},e}(l.GAstVisitor);function d(t,e){function n(t,e){return a.reduce(t,function(t,n,r){if(r!==e){var i=a.map(n,function(t){return t.partialPath});return t.concat(i)}return t},[])}function r(t,e){return void 0===a.find(t,function(t){return a.every(e,function(e,n){return r=e,i=t[n],r===i||r&&i&&(r.categoryMatchesMap[i.tokenTypeIdx]||i.categoryMatchesMap[r.tokenTypeIdx]);var r,i})})}function i(t){for(var e=[],n=0;n<t;n++)e.push([]);return e}for(var o=a.map(t,function(t){return s.possiblePathsFrom([t],1)}),u=i(o.length),c=o,p=1;p<=e;p++){var l=c;c=i(l.length);for(var h=0;h<l.length;h++)for(var f=l[h],d=n(l,h),E=0;E<f.length;E++){var m=f[E].partialPath,T=f[E].suffixDef;if(r(d,m)||a.isEmpty(T)||m.length===e){var v=u[h];y(v,m)||v.push(m)}else{var g=s.possiblePathsFrom(T,p+1,m);c[h]=c[h].concat(g)}}}return u}function E(t,e,n){var r=new f(t,o.ALTERNATION);return e.accept(r),d(r.result,n)}function m(t,e,n,r){var i=new f(t,n);e.accept(i);var o=i.result,a=new h(e,t,n).startWalking();return d([new p.Flat({definition:o}),new p.Flat({definition:a})],r)}function y(t,e){return void 0!==a.find(t,function(t){return e.length===t.length&&a.every(e,function(e,n){return e===t[n]||t[n].categoryMatchesMap[e.tokenTypeIdx]})})}function T(t){return a.every(t,function(t){return a.every(t,function(t){return a.every(t,function(t){return a.isEmpty(t.categoryMatches)})})})}e.lookAheadSequenceFromAlternatives=d,e.getLookaheadPathsForOr=E,e.getLookaheadPathsForOptionalProd=m,e.containsPath=y,e.isStrictPrefixOfPath=function(t,e){return t.length<e.length&&a.every(t,function(t,n){var r=e[n];return t===r||r.categoryMatchesMap[t.tokenTypeIdx]})},e.areTokenCategoriesNotUsed=T},function(t,e,n){\"use strict\";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,\"__esModule\",{value:!0});var o=n(14),a=n(0),s=n(2),u=n(21),c=n(1),p=function(t){function e(e,n){var r=t.call(this)||this;return r.topProd=e,r.path=n,r.possibleTokTypes=[],r.nextProductionName=\"\",r.nextProductionOccurrence=0,r.found=!1,r.isAtEndOfPath=!1,r}return i(e,t),e.prototype.startWalking=function(){if(this.found=!1,this.path.ruleStack[0]!==this.topProd.name)throw Error(\"The path does not start with the walker's top Rule!\");return this.ruleStack=a.cloneArr(this.path.ruleStack).reverse(),this.occurrenceStack=a.cloneArr(this.path.occurrenceStack).reverse(),this.ruleStack.pop(),this.occurrenceStack.pop(),this.updateExpectedNext(),this.walk(this.topProd),this.possibleTokTypes},e.prototype.walk=function(e,n){void 0===n&&(n=[]),this.found||t.prototype.walk.call(this,e,n)},e.prototype.walkProdRef=function(t,e,n){if(t.referencedRule.name===this.nextProductionName&&t.idx===this.nextProductionOccurrence){var r=e.concat(n);this.updateExpectedNext(),this.walk(t.referencedRule,r)}},e.prototype.updateExpectedNext=function(){a.isEmpty(this.ruleStack)?(this.nextProductionName=\"\",this.nextProductionOccurrence=0,this.isAtEndOfPath=!0):(this.nextProductionName=this.ruleStack.pop(),this.nextProductionOccurrence=this.occurrenceStack.pop())},e}(o.RestWalker);e.AbstractNextPossibleTokensWalker=p;var l=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.path=n,r.nextTerminalName=\"\",r.nextTerminalOccurrence=0,r.nextTerminalName=s.tokenName(r.path.lastTok),r.nextTerminalOccurrence=r.path.lastTokOccurrence,r}return i(e,t),e.prototype.walkTerminal=function(t,e,n){if(this.isAtEndOfPath&&s.tokenName(t.terminalType)===this.nextTerminalName&&t.idx===this.nextTerminalOccurrence&&!this.found){var r=e.concat(n),i=new c.Flat({definition:r});this.possibleTokTypes=u.first(i),this.found=!0}},e}(p);e.NextAfterTokenWalker=l;var h=function(t){function e(e,n){var r=t.call(this)||this;return r.topRule=e,r.occurrence=n,r.result={token:void 0,occurrence:void 0,isEndOfRule:void 0},r}return i(e,t),e.prototype.startWalking=function(){return this.walk(this.topRule),this.result},e}(o.RestWalker);e.AbstractNextTerminalAfterProductionWalker=h;var f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.walkMany=function(e,n,r){if(e.idx===this.occurrence){var i=a.first(n.concat(r));this.result.isEndOfRule=void 0===i,i instanceof c.Terminal&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else t.prototype.walkMany.call(this,e,n,r)},e}(h);e.NextTerminalAfterManyWalker=f;var d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.walkManySep=function(e,n,r){if(e.idx===this.occurrence){var i=a.first(n.concat(r));this.result.isEndOfRule=void 0===i,i instanceof c.Terminal&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else t.prototype.walkManySep.call(this,e,n,r)},e}(h);e.NextTerminalAfterManySepWalker=d;var E=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.walkAtLeastOne=function(e,n,r){if(e.idx===this.occurrence){var i=a.first(n.concat(r));this.result.isEndOfRule=void 0===i,i instanceof c.Terminal&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else t.prototype.walkAtLeastOne.call(this,e,n,r)},e}(h);e.NextTerminalAfterAtLeastOneWalker=E;var m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.walkAtLeastOneSep=function(e,n,r){if(e.idx===this.occurrence){var i=a.first(n.concat(r));this.result.isEndOfRule=void 0===i,i instanceof c.Terminal&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else t.prototype.walkAtLeastOneSep.call(this,e,n,r)},e}(h);function y(t,e,n,r){var i=a.cloneArr(n);i.push(t.name);var o=a.cloneArr(r);return o.push(1),{idx:e,def:t.definition,ruleStack:i,occurrenceStack:o}}e.NextTerminalAfterAtLeastOneSepWalker=m,e.possiblePathsFrom=function t(e,n,r){void 0===r&&(r=[]),r=a.cloneArr(r);var i=[],o=0;function s(s){var u=t(s.concat(a.drop(e,o+1)),n,r);return i.concat(u)}for(;r.length<n&&o<e.length;){var u=e[o];if(u instanceof c.Flat)return s(u.definition);if(u instanceof c.NonTerminal)return s(u.definition);if(u instanceof c.Option)i=s(u.definition);else{if(u instanceof c.RepetitionMandatory)return s(p=u.definition.concat([new c.Repetition({definition:u.definition})]));if(u instanceof c.RepetitionMandatoryWithSeparator)return s(p=[new c.Flat({definition:u.definition}),new c.Repetition({definition:[new c.Terminal({terminalType:u.separator})].concat(u.definition)})]);if(u instanceof c.RepetitionWithSeparator){var p=u.definition.concat([new c.Repetition({definition:[new c.Terminal({terminalType:u.separator})].concat(u.definition)})]);i=s(p)}else if(u instanceof c.Repetition)p=u.definition.concat([new c.Repetition({definition:u.definition})]),i=s(p);else{if(u instanceof c.Alternation)return a.forEach(u.definition,function(t){i=s(t.definition)}),i;if(!(u instanceof c.Terminal))throw Error(\"non exhaustive match\");r.push(u.terminalType)}}o++}return i.push({partialPath:r,suffixDef:a.drop(e,o)}),i},e.nextPossibleTokensAfter=function(t,e,n,r){var i=[\"EXIT_NONE_TERMINAL\"],o=!1,s=e.length,u=s-r-1,p=[],l=[];for(l.push({idx:-1,def:t,ruleStack:[],occurrenceStack:[]});!a.isEmpty(l);){var h=l.pop();if(\"EXIT_ALTERNATIVE\"!==h){var f=h.def,d=h.idx,E=h.ruleStack,m=h.occurrenceStack;if(!a.isEmpty(f)){var T=f[0];if(\"EXIT_NONE_TERMINAL\"===T){var v={idx:d,def:a.drop(f),ruleStack:a.dropRight(E),occurrenceStack:a.dropRight(m)};l.push(v)}else if(T instanceof c.Terminal)if(d<s-1){var g=d+1;n(e[g],T.terminalType)&&(v={idx:g,def:a.drop(f),ruleStack:E,occurrenceStack:m},l.push(v))}else{if(d!==s-1)throw Error(\"non exhaustive match\");p.push({nextTokenType:T.terminalType,nextTokenOccurrence:T.idx,ruleStack:E,occurrenceStack:m}),o=!0}else if(T instanceof c.NonTerminal){var _=a.cloneArr(E);_.push(T.nonTerminalName);var R=a.cloneArr(m);R.push(T.idx),v={idx:d,def:T.definition.concat(i,a.drop(f)),ruleStack:_,occurrenceStack:R},l.push(v)}else if(T instanceof c.Option){var A={idx:d,def:a.drop(f),ruleStack:E,occurrenceStack:m};l.push(A),l.push(\"EXIT_ALTERNATIVE\");var N={idx:d,def:T.definition.concat(a.drop(f)),ruleStack:E,occurrenceStack:m};l.push(N)}else if(T instanceof c.RepetitionMandatory){var O=new c.Repetition({definition:T.definition,idx:T.idx});v={idx:d,def:T.definition.concat([O],a.drop(f)),ruleStack:E,occurrenceStack:m},l.push(v)}else if(T instanceof c.RepetitionMandatoryWithSeparator){var S=new c.Terminal({terminalType:T.separator});O=new c.Repetition({definition:[S].concat(T.definition),idx:T.idx}),v={idx:d,def:T.definition.concat([O],a.drop(f)),ruleStack:E,occurrenceStack:m},l.push(v)}else if(T instanceof c.RepetitionWithSeparator){A={idx:d,def:a.drop(f),ruleStack:E,occurrenceStack:m},l.push(A),l.push(\"EXIT_ALTERNATIVE\"),S=new c.Terminal({terminalType:T.separator});var I=new c.Repetition({definition:[S].concat(T.definition),idx:T.idx});N={idx:d,def:T.definition.concat([I],a.drop(f)),ruleStack:E,occurrenceStack:m},l.push(N)}else if(T instanceof c.Repetition)A={idx:d,def:a.drop(f),ruleStack:E,occurrenceStack:m},l.push(A),l.push(\"EXIT_ALTERNATIVE\"),I=new c.Repetition({definition:T.definition,idx:T.idx}),N={idx:d,def:T.definition.concat([I],a.drop(f)),ruleStack:E,occurrenceStack:m},l.push(N);else if(T instanceof c.Alternation)for(var L=T.definition.length-1;L>=0;L--){var k={idx:d,def:T.definition[L].definition.concat(a.drop(f)),ruleStack:E,occurrenceStack:m};l.push(k),l.push(\"EXIT_ALTERNATIVE\")}else if(T instanceof c.Flat)l.push({idx:d,def:T.definition.concat(a.drop(f)),ruleStack:E,occurrenceStack:m});else{if(!(T instanceof c.Rule))throw Error(\"non exhaustive match\");l.push(y(T,d,E,m))}}}else o&&a.last(l).idx<=u&&l.pop()}return p}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(0),i=n(1),o=function(){function t(){}return t.prototype.walk=function(t,e){var n=this;void 0===e&&(e=[]),r.forEach(t.definition,function(o,a){var s=r.drop(t.definition,a+1);if(o instanceof i.NonTerminal)n.walkProdRef(o,s,e);else if(o instanceof i.Terminal)n.walkTerminal(o,s,e);else if(o instanceof i.Flat)n.walkFlat(o,s,e);else if(o instanceof i.Option)n.walkOption(o,s,e);else if(o instanceof i.RepetitionMandatory)n.walkAtLeastOne(o,s,e);else if(o instanceof i.RepetitionMandatoryWithSeparator)n.walkAtLeastOneSep(o,s,e);else if(o instanceof i.RepetitionWithSeparator)n.walkManySep(o,s,e);else if(o instanceof i.Repetition)n.walkMany(o,s,e);else{if(!(o instanceof i.Alternation))throw Error(\"non exhaustive match\");n.walkOr(o,s,e)}})},t.prototype.walkTerminal=function(t,e,n){},t.prototype.walkProdRef=function(t,e,n){},t.prototype.walkFlat=function(t,e,n){var r=e.concat(n);this.walk(t,r)},t.prototype.walkOption=function(t,e,n){var r=e.concat(n);this.walk(t,r)},t.prototype.walkAtLeastOne=function(t,e,n){var r=[new i.Option({definition:t.definition})].concat(e,n);this.walk(t,r)},t.prototype.walkAtLeastOneSep=function(t,e,n){var r=a(t,e,n);this.walk(t,r)},t.prototype.walkMany=function(t,e,n){var r=[new i.Option({definition:t.definition})].concat(e,n);this.walk(t,r)},t.prototype.walkManySep=function(t,e,n){var r=a(t,e,n);this.walk(t,r)},t.prototype.walkOr=function(t,e,n){var o=this,a=e.concat(n);r.forEach(t.definition,function(t){var e=new i.Flat({definition:[t]});o.walk(e,a)})},t}();function a(t,e,n){return[new i.Option({definition:[new i.Terminal({terminalType:t.separator})].concat(t.definition)})].concat(e,n)}e.RestWalker=o},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(27),i=n(0),o=n(7),a=n(20);!function(t){t[t.MISSING_PATTERN=0]=\"MISSING_PATTERN\",t[t.INVALID_PATTERN=1]=\"INVALID_PATTERN\",t[t.EOI_ANCHOR_FOUND=2]=\"EOI_ANCHOR_FOUND\",t[t.UNSUPPORTED_FLAGS_FOUND=3]=\"UNSUPPORTED_FLAGS_FOUND\",t[t.DUPLICATE_PATTERNS_FOUND=4]=\"DUPLICATE_PATTERNS_FOUND\",t[t.INVALID_GROUP_TYPE_FOUND=5]=\"INVALID_GROUP_TYPE_FOUND\",t[t.PUSH_MODE_DOES_NOT_EXIST=6]=\"PUSH_MODE_DOES_NOT_EXIST\",t[t.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE=7]=\"MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE\",t[t.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY=8]=\"MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY\",t[t.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST=9]=\"MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST\",t[t.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED=10]=\"LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED\",t[t.SOI_ANCHOR_FOUND=11]=\"SOI_ANCHOR_FOUND\",t[t.EMPTY_MATCH_PATTERN=12]=\"EMPTY_MATCH_PATTERN\",t[t.NO_LINE_BREAKS_FLAGS=13]=\"NO_LINE_BREAKS_FLAGS\",t[t.UNREACHABLE_PATTERN=14]=\"UNREACHABLE_PATTERN\",t[t.IDENTIFY_TERMINATOR=15]=\"IDENTIFY_TERMINATOR\",t[t.CUSTOM_LINE_BREAK=16]=\"CUSTOM_LINE_BREAK\"}(e.LexerDefinitionErrorType||(e.LexerDefinitionErrorType={}));var s={deferDefinitionErrorsHandling:!1,positionTracking:\"full\",lineTerminatorsPattern:/\\n|\\r\\n?/g,lineTerminatorCharacters:[\"\\n\",\"\\r\"],ensureOptimizations:!1,safeMode:!1,errorMessageProvider:a.defaultLexerErrorProvider};Object.freeze(s);var u=function(){function t(t,e){var n=this;if(void 0===e&&(e=s),this.lexerDefinition=t,this.lexerDefinitionErrors=[],this.lexerDefinitionWarning=[],this.patternIdxToConfig={},this.charCodeToPatternIdxToConfig={},this.modes=[],this.emptyGroups={},this.config=void 0,this.trackStartLines=!0,this.trackEndLines=!0,this.hasCustom=!1,this.canModeBeOptimized={},\"boolean\"==typeof e)throw Error(\"The second argument to the Lexer constructor is now an ILexerConfig Object.\\na boolean 2nd argument is no longer supported\");if(this.config=i.merge(s,e),this.config.lineTerminatorsPattern===s.lineTerminatorsPattern)this.config.lineTerminatorsPattern=r.LineTerminatorOptimizedTester;else if(this.config.lineTerminatorCharacters===s.lineTerminatorCharacters)throw Error(\"Error: Missing <lineTerminatorCharacters> property on the Lexer config.\\n\\tFor details See: https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#MISSING_LINE_TERM_CHARS\");if(e.safeMode&&e.ensureOptimizations)throw Error('\"safeMode\" and \"ensureOptimizations\" flags are mutually exclusive.');this.trackStartLines=/full|onlyStart/i.test(this.config.positionTracking),this.trackEndLines=/full/i.test(this.config.positionTracking);var a,u=!0;i.isArray(t)?((a={modes:{}}).modes[r.DEFAULT_MODE]=i.cloneArr(t),a[r.DEFAULT_MODE]=r.DEFAULT_MODE):(u=!1,a=i.cloneObj(t)),this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(r.performRuntimeChecks(a,this.trackStartLines,this.config.lineTerminatorCharacters)),this.lexerDefinitionWarning=this.lexerDefinitionWarning.concat(r.performWarningRuntimeChecks(a,this.trackStartLines,this.config.lineTerminatorCharacters)),a.modes=a.modes?a.modes:{},i.forEach(a.modes,function(t,e){a.modes[e]=i.reject(t,function(t){return i.isUndefined(t)})});var c=i.keys(a.modes);if(i.forEach(a.modes,function(t,a){if(n.modes.push(a),n.lexerDefinitionErrors=n.lexerDefinitionErrors.concat(r.validatePatterns(t,c)),i.isEmpty(n.lexerDefinitionErrors)){o.augmentTokenTypes(t);var s=r.analyzeTokenTypes(t,{lineTerminatorCharacters:n.config.lineTerminatorCharacters,positionTracking:e.positionTracking,ensureOptimizations:e.ensureOptimizations,safeMode:e.safeMode});n.patternIdxToConfig[a]=s.patternIdxToConfig,n.charCodeToPatternIdxToConfig[a]=s.charCodeToPatternIdxToConfig,n.emptyGroups=i.merge(n.emptyGroups,s.emptyGroups),n.hasCustom=s.hasCustom||n.hasCustom,n.canModeBeOptimized[a]=s.canBeOptimized}}),this.defaultMode=a.defaultMode,!i.isEmpty(this.lexerDefinitionErrors)&&!this.config.deferDefinitionErrorsHandling){var p=i.map(this.lexerDefinitionErrors,function(t){return t.message}).join(\"-----------------------\\n\");throw new Error(\"Errors detected in definition of Lexer:\\n\"+p)}if(i.forEach(this.lexerDefinitionWarning,function(t){i.PRINT_WARNING(t.message)}),r.SUPPORT_STICKY?(this.chopInput=i.IDENTITY,this.match=this.matchWithTest):(this.updateLastIndex=i.NOOP,this.match=this.matchWithExec),u&&(this.handleModes=i.NOOP),!1===this.trackStartLines&&(this.computeNewColumn=i.IDENTITY),!1===this.trackEndLines&&(this.updateTokenEndLineColumnLocation=i.NOOP),/full/i.test(this.config.positionTracking))this.createTokenInstance=this.createFullToken;else if(/onlyStart/i.test(this.config.positionTracking))this.createTokenInstance=this.createStartOnlyToken;else{if(!/onlyOffset/i.test(this.config.positionTracking))throw Error('Invalid <positionTracking> config option: \"'+this.config.positionTracking+'\"');this.createTokenInstance=this.createOffsetOnlyToken}this.hasCustom?this.addToken=this.addTokenUsingPush:this.addToken=this.addTokenUsingMemberAccess;var l=i.reduce(this.canModeBeOptimized,function(t,e,n){return!1===e&&t.push(n),t},[]);if(e.ensureOptimizations&&!i.isEmpty(l))throw Error(\"Lexer Modes: < \"+l.join(\", \")+' > cannot be optimized.\\n\\t Disable the \"ensureOptimizations\" lexer config flag to silently ignore this and run the lexer in an un-optimized mode.\\n\\t Or inspect the console log for details on how to resolve these issues.')}return t.prototype.tokenize=function(t,e){if(void 0===e&&(e=this.defaultMode),!i.isEmpty(this.lexerDefinitionErrors)){var n=i.map(this.lexerDefinitionErrors,function(t){return t.message}).join(\"-----------------------\\n\");throw new Error(\"Unable to Tokenize because Errors detected in definition of Lexer:\\n\"+n)}return this.tokenizeInternal(t,e)},t.prototype.tokenizeInternal=function(t,e){var n,o,a,s,u,c,p,l,h,f,d,E,m=this,y=t,T=y.length,v=0,g=0,_=this.hasCustom?0:Math.floor(t.length/10),R=new Array(_),A=[],N=this.trackStartLines?1:void 0,O=this.trackStartLines?1:void 0,S=r.cloneEmptyGroups(this.emptyGroups),I=this.trackStartLines,L=this.config.lineTerminatorsPattern,k=0,P=[],x=[],C=[],M=[];Object.freeze(M);var F,b=void 0,D=function(t){if(1===C.length&&void 0===t.tokenType.PUSH_MODE){var e=m.config.errorMessageProvider.buildUnableToPopLexerModeMessage(t);A.push({offset:t.startOffset,line:void 0!==t.startLine?t.startLine:void 0,column:void 0!==t.startColumn?t.startColumn:void 0,length:t.image.length,message:e})}else{C.pop();var n=i.last(C);P=m.patternIdxToConfig[n],x=m.charCodeToPatternIdxToConfig[n],k=P.length;var r=m.canModeBeOptimized[n]&&!1===m.config.safeMode;b=x&&r?function(t){var e=x[t];return void 0===e?M:e}:function(){return P}}};function w(t){C.push(t),x=this.charCodeToPatternIdxToConfig[t],P=this.patternIdxToConfig[t],k=P.length,k=P.length;var e=this.canModeBeOptimized[t]&&!1===this.config.safeMode;b=x&&e?function(t){var e=x[t];return void 0===e?M:e}:function(){return P}}for(w.call(this,e);v<T;){u=null;var U=y.charCodeAt(v),G=b(U),B=G.length;for(n=0;n<B;n++){var K=(F=G[n]).pattern;if(!1!==(Z=F.short)?U===Z&&(u=K):!0===F.isCustom?u=null!==(E=K.exec(y,v,R,S))?E[0]:E:(this.updateLastIndex(K,v),u=this.match(K,t,v)),null!==u){if(void 0!==(s=F.longerAlt)){var W=P[s],j=W.pattern;!0===W.isCustom?a=null!==(E=j.exec(y,v,R,S))?E[0]:E:(this.updateLastIndex(j,v),a=this.match(j,t,v)),a&&a.length>u.length&&(u=a,F=W)}break}}if(null!==u){if(c=u.length,void 0!==(p=F.group)&&(l=F.tokenTypeIdx,h=this.createTokenInstance(u,v,l,F.tokenType,N,O,c),!1===p?g=this.addToken(R,g,h):S[p].push(h)),t=this.chopInput(t,c),v+=c,O=this.computeNewColumn(O,c),!0===I&&!0===F.canLineTerminator){var V=0,Y=void 0,H=void 0;L.lastIndex=0;do{!0===(Y=L.test(u))&&(H=L.lastIndex-1,V++)}while(Y);0!==V&&(N+=V,O=c-H,this.updateTokenEndLineColumnLocation(h,p,H,V,N,O,c))}this.handleModes(F,D,w,h)}else{for(var X=v,z=N,q=O,$=!1;!$&&v<T;)for(y.charCodeAt(v),t=this.chopInput(t,1),v++,o=0;o<k;o++){var Z,Q=P[o];K=Q.pattern;if(!1!==(Z=Q.short)?y.charCodeAt(v)===Z&&($=!0):!0===Q.isCustom?$=null!==K.exec(y,v,R,S):(this.updateLastIndex(K,v),$=null!==K.exec(t)),!0===$)break}f=v-X,d=this.config.errorMessageProvider.buildUnexpectedCharactersMessage(y,X,f,z,q),A.push({offset:X,line:z,column:q,length:f,message:d})}}return this.hasCustom||(R.length=g),{tokens:R,groups:S,errors:A}},t.prototype.handleModes=function(t,e,n,r){if(!0===t.pop){var i=t.push;e(r),void 0!==i&&n.call(this,i)}else void 0!==t.push&&n.call(this,t.push)},t.prototype.chopInput=function(t,e){return t.substring(e)},t.prototype.updateLastIndex=function(t,e){t.lastIndex=e},t.prototype.updateTokenEndLineColumnLocation=function(t,e,n,r,i,o,a){var s,u;void 0!==e&&(u=(s=n===a-1)?-1:0,1===r&&!0===s||(t.endLine=i+u,t.endColumn=o-1-u))},t.prototype.computeNewColumn=function(t,e){return t+e},t.prototype.createTokenInstance=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return null},t.prototype.createOffsetOnlyToken=function(t,e,n,r){return{image:t,startOffset:e,tokenTypeIdx:n,tokenType:r}},t.prototype.createStartOnlyToken=function(t,e,n,r,i,o){return{image:t,startOffset:e,startLine:i,startColumn:o,tokenTypeIdx:n,tokenType:r}},t.prototype.createFullToken=function(t,e,n,r,i,o,a){return{image:t,startOffset:e,endOffset:e+a-1,startLine:i,endLine:i,startColumn:o,endColumn:o+a-1,tokenTypeIdx:n,tokenType:r}},t.prototype.addToken=function(t,e,n){return 666},t.prototype.addTokenUsingPush=function(t,e,n){return t.push(n),e},t.prototype.addTokenUsingMemberAccess=function(t,e,n){return t[e]=n,++e},t.prototype.match=function(t,e,n){return null},t.prototype.matchWithTest=function(t,e,n){return!0===t.test(e)?e.substring(n,t.lastIndex):null},t.prototype.matchWithExec=function(t,e){var n=t.exec(e);return null!==n?n[0]:n},t.SKIPPED=\"This marks a skipped Token pattern, this means each token identified by it willbe consumed and then thrown into oblivion, this can be used to for example to completely ignore whitespace.\",t.NA=/NOT_APPLICABLE/,t}();e.Lexer=u},function(t,e,n){\"use strict\";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,\"__esModule\",{value:!0});var o=n(0),a=n(4),s=n(9),u=n(1),c=n(5);e.addTerminalToCst=function(t,e,n){void 0===t.children[n]?t.children[n]=[e]:t.children[n].push(e)},e.addNoneTerminalToCst=function(t,e,n){void 0===t.children[e]?t.children[e]=[n]:t.children[e].push(n)};var p=function(t){function e(e){var n=t.call(this)||this;return n.result=[],n.ruleIdx=e,n}return i(e,t),e.prototype.collectNamedDSLMethod=function(t,e,n){if(!o.isUndefined(t.name)){var r=void 0;if(t instanceof u.Option||t instanceof u.Repetition||t instanceof u.RepetitionMandatory||t instanceof u.Alternation)r=new e({definition:t.definition,idx:t.idx});else{if(!(t instanceof u.RepetitionMandatoryWithSeparator||t instanceof u.RepetitionWithSeparator))throw Error(\"non exhaustive match\");r=new e({definition:t.definition,idx:t.idx,separator:t.separator})}var i=[r],a=s.getKeyForAutomaticLookahead(this.ruleIdx,n,t.idx);this.result.push({def:i,key:a,name:t.name,orgProd:t})}},e.prototype.visitOption=function(t){this.collectNamedDSLMethod(t,u.Option,s.OPTION_IDX)},e.prototype.visitRepetition=function(t){this.collectNamedDSLMethod(t,u.Repetition,s.MANY_IDX)},e.prototype.visitRepetitionMandatory=function(t){this.collectNamedDSLMethod(t,u.RepetitionMandatory,s.AT_LEAST_ONE_IDX)},e.prototype.visitRepetitionMandatoryWithSeparator=function(t){this.collectNamedDSLMethod(t,u.RepetitionMandatoryWithSeparator,s.AT_LEAST_ONE_SEP_IDX)},e.prototype.visitRepetitionWithSeparator=function(t){this.collectNamedDSLMethod(t,u.RepetitionWithSeparator,s.MANY_SEP_IDX)},e.prototype.visitAlternation=function(t){var e=this;this.collectNamedDSLMethod(t,u.Alternation,s.OR_IDX);var n=t.definition.length>1;o.forEach(t.definition,function(r,i){if(!o.isUndefined(r.name)){var a=r.definition;a=n?[new u.Option({definition:r.definition})]:r.definition;var c=s.getKeyForAltIndex(e.ruleIdx,s.OR_IDX,t.idx,i);e.result.push({def:a,key:c,name:r.name,orgProd:r})}})},e}(c.GAstVisitor);e.NamedDSLMethodsCollectorVisitor=p,e.analyzeCst=function(t,e){var n={dictDef:new a.HashTable,allRuleNames:[]};return o.forEach(t,function(t){var r=e.get(t.name);n.allRuleNames.push(t.name);var i=new p(r);t.accept(i),o.forEach(i.result,function(e){e.def,e.key;var r=e.name;n.allRuleNames.push(t.name+r)})}),n}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.VERSION=\"4.6.0\"},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(3),i=n(15),o=n(2),a=n(6),s=n(17),u=n(10),c=n(39),p=n(5),l=n(1),h=n(24),f=n(40),d=n(20),E={};E.VERSION=s.VERSION,E.Parser=r.Parser,E.CstParser=r.CstParser,E.EmbeddedActionsParser=r.EmbeddedActionsParser;E.ParserDefinitionErrorType=r.ParserDefinitionErrorType,E.Lexer=i.Lexer,E.LexerDefinitionErrorType=i.LexerDefinitionErrorType,E.EOF=o.EOF,E.tokenName=o.tokenName,E.tokenLabel=o.tokenLabel,E.tokenMatcher=o.tokenMatcher,E.createToken=o.createToken,E.createTokenInstance=o.createTokenInstance,E.EMPTY_ALT=r.EMPTY_ALT,E.defaultParserErrorProvider=u.defaultParserErrorProvider,E.isRecognitionException=a.isRecognitionException,E.EarlyExitException=a.EarlyExitException,E.MismatchedTokenException=a.MismatchedTokenException,E.NotAllInputParsedException=a.NotAllInputParsedException,E.NoViableAltException=a.NoViableAltException,E.defaultLexerErrorProvider=d.defaultLexerErrorProvider,E.Flat=l.Flat,E.Repetition=l.Repetition,E.RepetitionWithSeparator=l.RepetitionWithSeparator,E.RepetitionMandatory=l.RepetitionMandatory,E.RepetitionMandatoryWithSeparator=l.RepetitionMandatoryWithSeparator,E.Option=l.Option,E.Alternation=l.Alternation,E.NonTerminal=l.NonTerminal,E.Terminal=l.Terminal,E.Rule=l.Rule,E.GAstVisitor=p.GAstVisitor,E.serializeGrammar=l.serializeGrammar,E.serializeProduction=l.serializeProduction,E.resolveGrammar=h.resolveGrammar,E.defaultGrammarResolverErrorProvider=u.defaultGrammarResolverErrorProvider,E.validateGrammar=h.validateGrammar,E.defaultGrammarValidatorErrorProvider=u.defaultGrammarValidatorErrorProvider,E.assignOccurrenceIndices=h.assignOccurrenceIndices,E.clearCache=function(){console.warn(\"The clearCache function was 'soft' removed from the Chevrotain API.\\n\\t It performs no action other than printing this message.\\n\\t Please avoid using it as it will be completely removed in the future\")},E.createSyntaxDiagramsCode=c.createSyntaxDiagramsCode,E.generateParserFactory=f.generateParserFactory,E.generateParserModule=f.generateParserModule,t.exports=E},function(t,e,n){var r,i,o;\"undefined\"!=typeof self&&self,i=[],void 0===(o=\"function\"==typeof(r=function(){function t(){}t.prototype.saveState=function(){return{idx:this.idx,input:this.input,groupIdx:this.groupIdx}},t.prototype.restoreState=function(t){this.idx=t.idx,this.input=t.input,this.groupIdx=t.groupIdx},t.prototype.pattern=function(t){this.idx=0,this.input=t,this.groupIdx=0,this.consumeChar(\"/\");var e=this.disjunction();this.consumeChar(\"/\");for(var n={type:\"Flags\",global:!1,ignoreCase:!1,multiLine:!1,unicode:!1,sticky:!1};this.isRegExpFlag();)switch(this.popChar()){case\"g\":s(n,\"global\");break;case\"i\":s(n,\"ignoreCase\");break;case\"m\":s(n,\"multiLine\");break;case\"u\":s(n,\"unicode\");break;case\"y\":s(n,\"sticky\")}if(this.idx!==this.input.length)throw Error(\"Redundant input: \"+this.input.substring(this.idx));return{type:\"Pattern\",flags:n,value:e}},t.prototype.disjunction=function(){var t=[];for(t.push(this.alternative());\"|\"===this.peekChar();)this.consumeChar(\"|\"),t.push(this.alternative());return{type:\"Disjunction\",value:t}},t.prototype.alternative=function(){for(var t=[];this.isTerm();)t.push(this.term());return{type:\"Alternative\",value:t}},t.prototype.term=function(){return this.isAssertion()?this.assertion():this.atom()},t.prototype.assertion=function(){switch(this.popChar()){case\"^\":return{type:\"StartAnchor\"};case\"$\":return{type:\"EndAnchor\"};case\"\\\\\":switch(this.popChar()){case\"b\":return{type:\"WordBoundary\"};case\"B\":return{type:\"NonWordBoundary\"}}throw Error(\"Invalid Assertion Escape\");case\"(\":var t;switch(this.consumeChar(\"?\"),this.popChar()){case\"=\":t=\"Lookahead\";break;case\"!\":t=\"NegativeLookahead\"}u(t);var e=this.disjunction();return this.consumeChar(\")\"),{type:t,value:e}}!function(){throw Error(\"Internal Error - Should never get here!\")}()},t.prototype.quantifier=function(t){var e;switch(this.popChar()){case\"*\":e={atLeast:0,atMost:1/0};break;case\"+\":e={atLeast:1,atMost:1/0};break;case\"?\":e={atLeast:0,atMost:1};break;case\"{\":var n=this.integerIncludingZero();switch(this.popChar()){case\"}\":e={atLeast:n,atMost:n};break;case\",\":var r;this.isDigit()?(r=this.integerIncludingZero(),e={atLeast:n,atMost:r}):e={atLeast:n,atMost:1/0},this.consumeChar(\"}\")}if(!0===t&&void 0===e)return;u(e)}if(!0!==t||void 0!==e)return u(e),\"?\"===this.peekChar(0)?(this.consumeChar(\"?\"),e.greedy=!1):e.greedy=!0,e.type=\"Quantifier\",e},t.prototype.atom=function(){var t;switch(this.peekChar()){case\".\":t=this.dotAll();break;case\"\\\\\":t=this.atomEscape();break;case\"[\":t=this.characterClass();break;case\"(\":t=this.group()}return void 0===t&&this.isPatternCharacter()&&(t=this.patternCharacter()),u(t),this.isQuantifier()&&(t.quantifier=this.quantifier()),t},t.prototype.dotAll=function(){return this.consumeChar(\".\"),{type:\"Set\",complement:!0,value:[o(\"\\n\"),o(\"\\r\"),o(\"\\u2028\"),o(\"\\u2029\")]}},t.prototype.atomEscape=function(){switch(this.consumeChar(\"\\\\\"),this.peekChar()){case\"1\":case\"2\":case\"3\":case\"4\":case\"5\":case\"6\":case\"7\":case\"8\":case\"9\":return this.decimalEscapeAtom();case\"d\":case\"D\":case\"s\":case\"S\":case\"w\":case\"W\":return this.characterClassEscape();case\"f\":case\"n\":case\"r\":case\"t\":case\"v\":return this.controlEscapeAtom();case\"c\":return this.controlLetterEscapeAtom();case\"0\":return this.nulCharacterAtom();case\"x\":return this.hexEscapeSequenceAtom();case\"u\":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}},t.prototype.decimalEscapeAtom=function(){var t=this.positiveInteger();return{type:\"GroupBackReference\",value:t}},t.prototype.characterClassEscape=function(){var t,e=!1;switch(this.popChar()){case\"d\":t=c;break;case\"D\":t=c,e=!0;break;case\"s\":t=l;break;case\"S\":t=l,e=!0;break;case\"w\":t=p;break;case\"W\":t=p,e=!0}return u(t),{type:\"Set\",value:t,complement:e}},t.prototype.controlEscapeAtom=function(){var t;switch(this.popChar()){case\"f\":t=o(\"\\f\");break;case\"n\":t=o(\"\\n\");break;case\"r\":t=o(\"\\r\");break;case\"t\":t=o(\"\\t\");break;case\"v\":t=o(\"\\v\")}return u(t),{type:\"Character\",value:t}},t.prototype.controlLetterEscapeAtom=function(){this.consumeChar(\"c\");var t=this.popChar();if(!1===/[a-zA-Z]/.test(t))throw Error(\"Invalid \");var e=t.toUpperCase().charCodeAt(0)-64;return{type:\"Character\",value:e}},t.prototype.nulCharacterAtom=function(){return this.consumeChar(\"0\"),{type:\"Character\",value:o(\"\\0\")}},t.prototype.hexEscapeSequenceAtom=function(){return this.consumeChar(\"x\"),this.parseHexDigits(2)},t.prototype.regExpUnicodeEscapeSequenceAtom=function(){return this.consumeChar(\"u\"),this.parseHexDigits(4)},t.prototype.identityEscapeAtom=function(){var t=this.popChar();return{type:\"Character\",value:o(t)}},t.prototype.classPatternCharacterAtom=function(){switch(this.peekChar()){case\"\\n\":case\"\\r\":case\"\\u2028\":case\"\\u2029\":case\"\\\\\":case\"]\":throw Error(\"TBD\");default:var t=this.popChar();return{type:\"Character\",value:o(t)}}},t.prototype.characterClass=function(){var t=[],e=!1;for(this.consumeChar(\"[\"),\"^\"===this.peekChar(0)&&(this.consumeChar(\"^\"),e=!0);this.isClassAtom();){var n=this.classAtom(),r=\"Character\"===n.type;if(r&&this.isRangeDash()){this.consumeChar(\"-\");var i=this.classAtom(),s=\"Character\"===i.type;if(s){if(i.value<n.value)throw Error(\"Range out of order in character class\");t.push({from:n.value,to:i.value})}else a(n.value,t),t.push(o(\"-\")),a(i.value,t)}else a(n.value,t)}return this.consumeChar(\"]\"),{type:\"Set\",complement:e,value:t}},t.prototype.classAtom=function(){switch(this.peekChar()){case\"]\":case\"\\n\":case\"\\r\":case\"\\u2028\":case\"\\u2029\":throw Error(\"TBD\");case\"\\\\\":return this.classEscape();default:return this.classPatternCharacterAtom()}},t.prototype.classEscape=function(){switch(this.consumeChar(\"\\\\\"),this.peekChar()){case\"b\":return this.consumeChar(\"b\"),{type:\"Character\",value:o(\"\\b\")};case\"d\":case\"D\":case\"s\":case\"S\":case\"w\":case\"W\":return this.characterClassEscape();case\"f\":case\"n\":case\"r\":case\"t\":case\"v\":return this.controlEscapeAtom();case\"c\":return this.controlLetterEscapeAtom();case\"0\":return this.nulCharacterAtom();case\"x\":return this.hexEscapeSequenceAtom();case\"u\":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}},t.prototype.group=function(){var t=!0;switch(this.consumeChar(\"(\"),this.peekChar(0)){case\"?\":this.consumeChar(\"?\"),this.consumeChar(\":\"),t=!1;break;default:this.groupIdx++}var e=this.disjunction();this.consumeChar(\")\");var n={type:\"Group\",capturing:t,value:e};return t&&(n.idx=this.groupIdx),n},t.prototype.positiveInteger=function(){var t=this.popChar();if(!1===i.test(t))throw Error(\"Expecting a positive integer\");for(;r.test(this.peekChar(0));)t+=this.popChar();return parseInt(t,10)},t.prototype.integerIncludingZero=function(){var t=this.popChar();if(!1===r.test(t))throw Error(\"Expecting an integer\");for(;r.test(this.peekChar(0));)t+=this.popChar();return parseInt(t,10)},t.prototype.patternCharacter=function(){var t=this.popChar();switch(t){case\"\\n\":case\"\\r\":case\"\\u2028\":case\"\\u2029\":case\"^\":case\"$\":case\"\\\\\":case\".\":case\"*\":case\"+\":case\"?\":case\"(\":case\")\":case\"[\":case\"|\":throw Error(\"TBD\");default:return{type:\"Character\",value:o(t)}}},t.prototype.isRegExpFlag=function(){switch(this.peekChar(0)){case\"g\":case\"i\":case\"m\":case\"u\":case\"y\":return!0;default:return!1}},t.prototype.isRangeDash=function(){return\"-\"===this.peekChar()&&this.isClassAtom(1)},t.prototype.isDigit=function(){return r.test(this.peekChar(0))},t.prototype.isClassAtom=function(t){switch(void 0===t&&(t=0),this.peekChar(t)){case\"]\":case\"\\n\":case\"\\r\":case\"\\u2028\":case\"\\u2029\":return!1;default:return!0}},t.prototype.isTerm=function(){return this.isAtom()||this.isAssertion()},t.prototype.isAtom=function(){if(this.isPatternCharacter())return!0;switch(this.peekChar(0)){case\".\":case\"\\\\\":case\"[\":case\"(\":return!0;default:return!1}},t.prototype.isAssertion=function(){switch(this.peekChar(0)){case\"^\":case\"$\":return!0;case\"\\\\\":switch(this.peekChar(1)){case\"b\":case\"B\":return!0;default:return!1}case\"(\":return\"?\"===this.peekChar(1)&&(\"=\"===this.peekChar(2)||\"!\"===this.peekChar(2));default:return!1}},t.prototype.isQuantifier=function(){var t=this.saveState();try{return void 0!==this.quantifier(!0)}catch(t){return!1}finally{this.restoreState(t)}},t.prototype.isPatternCharacter=function(){switch(this.peekChar()){case\"^\":case\"$\":case\"\\\\\":case\".\":case\"*\":case\"+\":case\"?\":case\"(\":case\")\":case\"[\":case\"|\":case\"/\":case\"\\n\":case\"\\r\":case\"\\u2028\":case\"\\u2029\":return!1;default:return!0}},t.prototype.parseHexDigits=function(t){for(var e=\"\",r=0;r<t;r++){var i=this.popChar();if(!1===n.test(i))throw Error(\"Expecting a HexDecimal digits\");e+=i}var o=parseInt(e,16);return{type:\"Character\",value:o}},t.prototype.peekChar=function(t){return void 0===t&&(t=0),this.input[this.idx+t]},t.prototype.popChar=function(){var t=this.peekChar(0);return this.consumeChar(),t},t.prototype.consumeChar=function(t){if(void 0!==t&&this.input[this.idx]!==t)throw Error(\"Expected: '\"+t+\"' but found: '\"+this.input[this.idx]+\"' at offset: \"+this.idx);if(this.idx>=this.input.length)throw Error(\"Unexpected end of input\");this.idx++};var e,n=/[0-9a-fA-F]/,r=/[0-9]/,i=/[1-9]/;function o(t){return t.charCodeAt(0)}function a(t,e){void 0!==t.length?t.forEach(function(t){e.push(t)}):e.push(t)}function s(t,e){if(!0===t[e])throw\"duplicate flag \"+e;t[e]=!0}function u(t){if(void 0===t)throw Error(\"Internal Error - Should never get here!\")}var c=[];for(e=o(\"0\");e<=o(\"9\");e++)c.push(e);var p=[o(\"_\")].concat(c);for(e=o(\"a\");e<=o(\"z\");e++)p.push(e);for(e=o(\"A\");e<=o(\"Z\");e++)p.push(e);var l=[o(\" \"),o(\"\\f\"),o(\"\\n\"),o(\"\\r\"),o(\"\\t\"),o(\"\\v\"),o(\"\\t\"),o(\" \"),o(\" \"),o(\" \"),o(\" \"),o(\" \"),o(\" \"),o(\" \"),o(\" \"),o(\" \"),o(\" \"),o(\" \"),o(\" \"),o(\" \"),o(\"\\u2028\"),o(\"\\u2029\"),o(\" \"),o(\" \"),o(\"　\"),o(\"\\ufeff\")];function h(){}return h.prototype.visitChildren=function(t){for(var e in t){var n=t[e];t.hasOwnProperty(e)&&(void 0!==n.type?this.visit(n):Array.isArray(n)&&n.forEach(function(t){this.visit(t)},this))}},h.prototype.visit=function(t){switch(t.type){case\"Pattern\":this.visitPattern(t);break;case\"Flags\":this.visitFlags(t);break;case\"Disjunction\":this.visitDisjunction(t);break;case\"Alternative\":this.visitAlternative(t);break;case\"StartAnchor\":this.visitStartAnchor(t);break;case\"EndAnchor\":this.visitEndAnchor(t);break;case\"WordBoundary\":this.visitWordBoundary(t);break;case\"NonWordBoundary\":this.visitNonWordBoundary(t);break;case\"Lookahead\":this.visitLookahead(t);break;case\"NegativeLookahead\":this.visitNegativeLookahead(t);break;case\"Character\":this.visitCharacter(t);break;case\"Set\":this.visitSet(t);break;case\"Group\":this.visitGroup(t);break;case\"GroupBackReference\":this.visitGroupBackReference(t);break;case\"Quantifier\":this.visitQuantifier(t)}this.visitChildren(t)},h.prototype.visitPattern=function(t){},h.prototype.visitFlags=function(t){},h.prototype.visitDisjunction=function(t){},h.prototype.visitAlternative=function(t){},h.prototype.visitStartAnchor=function(t){},h.prototype.visitEndAnchor=function(t){},h.prototype.visitWordBoundary=function(t){},h.prototype.visitNonWordBoundary=function(t){},h.prototype.visitLookahead=function(t){},h.prototype.visitNegativeLookahead=function(t){},h.prototype.visitCharacter=function(t){},h.prototype.visitSet=function(t){},h.prototype.visitGroup=function(t){},h.prototype.visitGroupBackReference=function(t){},h.prototype.visitQuantifier=function(t){},{RegExpParser:t,BaseRegExpVisitor:h,VERSION:\"0.4.0\"}})?r.apply(e,i):r)||(t.exports=o)},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.defaultLexerErrorProvider={buildUnableToPopLexerModeMessage:function(t){return\"Unable to pop Lexer Mode after encountering Token ->\"+t.image+\"<- The Mode Stack is empty\"},buildUnexpectedCharactersMessage:function(t,e,n,r,i){return\"unexpected character: ->\"+t.charAt(e)+\"<- at offset: \"+e+\", skipped \"+n+\" characters.\"}}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(0),i=n(1),o=n(8);function a(t){if(t instanceof i.NonTerminal)return a(t.referencedRule);if(t instanceof i.Terminal)return c(t);if(o.isSequenceProd(t))return s(t);if(o.isBranchingProd(t))return u(t);throw Error(\"non exhaustive match\")}function s(t){for(var e,n=[],i=t.definition,s=0,u=i.length>s,c=!0;u&&c;)e=i[s],c=o.isOptionalProd(e),n=n.concat(a(e)),s+=1,u=i.length>s;return r.uniq(n)}function u(t){var e=r.map(t.definition,function(t){return a(t)});return r.uniq(r.flatten(e))}function c(t){return[t.terminalType]}e.first=a,e.firstForSequence=s,e.firstForBranching=u,e.firstForTerminal=c},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.IN=\"_~IN~_\"},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r,i=n(29),o=n(0),a=n(1);!function(t){t[t.OPTION=0]=\"OPTION\",t[t.OR=1]=\"OR\",t[t.MANY=2]=\"MANY\",t[t.MANY_SEP=3]=\"MANY_SEP\",t[t.AT_LEAST_ONE=4]=\"AT_LEAST_ONE\",t[t.AT_LEAST_ONE_SEP=5]=\"AT_LEAST_ONE_SEP\",t[t.REF=6]=\"REF\",t[t.TERMINAL=7]=\"TERMINAL\",t[t.FLAT=8]=\"FLAT\"}(r=e.ProdType||(e.ProdType={}));var s=/(?:\\s*{\\s*NAME\\s*:\\s*[\"'`]([\\w$]*)[\"'`])?/,u=new RegExp(s.source.replace(\"{\",\"\").replace(\")?\",\"\\\\s*,)?\")),c=/\\.\\s*CONSUME(\\d+)?\\s*\\(\\s*(?:[a-zA-Z_$]\\w*\\s*\\.\\s*)*([a-zA-Z_$]\\w*)/,p=new RegExp(c.source,\"g\"),l=/\\.\\s*SUBRULE(\\d+)?\\s*\\(\\s*(?:[a-zA-Z_$]\\w*\\s*\\.\\s*)*([a-zA-Z_$]\\w*)/,h=new RegExp(l.source,\"g\"),f=/\\.\\s*OPTION(\\d+)?\\s*\\(/,d=new RegExp(f.source+s.source),E=new RegExp(f.source,\"g\"),m=/\\.\\s*MANY(\\d+)?\\s*\\(/,y=new RegExp(m.source+s.source),T=new RegExp(m.source,\"g\"),v=/\\s*SEP\\s*:\\s*(?:[a-zA-Z_$]\\w*\\s*\\.\\s*)*([a-zA-Z_$]\\w*)/,g=new RegExp(/\\.\\s*MANY_SEP(\\d+)?\\s*\\(\\s*{/.source+u.source+v.source),_=new RegExp(g.source,\"g\"),R=new RegExp(/\\.\\s*AT_LEAST_ONE_SEP(\\d+)?\\s*\\(\\s*{/.source+u.source+v.source),A=new RegExp(R.source,\"g\"),N=/\\.\\s*AT_LEAST_ONE(\\d+)?\\s*\\(/,O=new RegExp(N.source+s.source),S=new RegExp(N.source,\"g\"),I=/\\.\\s*OR(\\d+)?\\s*\\(/,L=new RegExp(I.source+s.source),k=new RegExp(I.source,\"g\"),P=new RegExp(u.source+/\\s*(ALT)\\s*:/.source),x=new RegExp(P.source,\"g\");function C(t,n,i){switch(t.type){case r.AT_LEAST_ONE:return function(t,e,n){return M(O,new a.RepetitionMandatory({definition:[]}),t,e,n)}(t,n,i);case r.AT_LEAST_ONE_SEP:return function(t,e,n){return F(t,e,a.RepetitionMandatoryWithSeparator,R,n)}(t,n,i);case r.MANY_SEP:return function(t,e,n){return F(t,e,a.RepetitionWithSeparator,g,n)}(t,n,i);case r.MANY:return function(t,e,n){return M(y,new a.Repetition({definition:[]}),t,e,n)}(t,n,i);case r.OPTION:return function(t,e,n){return M(d,new a.Option({definition:[]}),t,e,n)}(t,n,i);case r.OR:return function(t,e,n){return M(L,new a.Alternation({definition:[]}),t,e,n)}(t,n,i);case r.FLAT:return function(t,e,n){var r=new a.Flat({definition:[]}),i=P.exec(t.text)[1];o.isUndefined(i)||(r.name=i);return b(r,t.range,e,n)}(t,n,i);case r.REF:return function(t){var e=l.exec(t.text),n=void 0===e[1]?0:parseInt(e[1],10),r=e[2];return new a.NonTerminal({nonTerminalName:r,idx:n})}(t);case r.TERMINAL:return function(t,n){var r=c.exec(t.text),i=void 0===r[1]?0:parseInt(r[1],10),o=r[2],s=e.terminalNameToConstructor[o];if(!s)throw Error(\"Terminal Token name: <\"+o+\"> not found in rule: <\"+n+\">  \\n\\tSee: https://sap.github.io/chevrotain/docs/guide/resolving_grammar_errors.html#TERMINAL_NAME_NOT_FOUND\\n\\tFor Further details.\");return new a.Terminal({terminalType:s,idx:i})}(t,i);default:throw Error(\"non exhaustive match\")}}function M(t,e,n,r,i){var a=t.exec(n.text),s=void 0===a[1];e.idx=s?0:parseInt(a[1],10);var u=a[2];return o.isUndefined(u)||(e.name=u),b(e,n.range,r,i)}function F(t,n,r,i,a){var s=i.exec(t.text),u=void 0===s[1]?0:parseInt(s[1],10),c=s[3],p=e.terminalNameToConstructor[c];if(!p)throw Error(\"Separator Terminal Token name: \"+c+\" not found\");var l=new r({definition:[],separator:p,idx:u}),h=s[2];return o.isUndefined(h)||(l.name=h),b(l,t.range,n,a)}function b(t,e,n,r){var i=D(e,n),a=o.sortBy(i,function(t){return t.range.start}),s=[];return o.forEach(a,function(t){s.push(C(t,n,r))}),t.definition=s,t}function D(t,e){return o.filter(e,function(n){var r=t.strictlyContainsRange(n.range),i=o.every(e,function(e){var r=e.range.strictlyContainsRange(n.range),i=e.range.isStrictlyContainedInRange(t);return!(r&&i)});return r&&i})}e.terminalNameToConstructor={},e.buildTopProduction=function(t,n,r){e.terminalNameToConstructor=r;var o=V(j(K(\"  \"+t)));return function(t,e,n,r){return b(new a.Rule({name:t,definition:[],orgText:r}),e,n,t)}(n,new i.Range(0,t.length+2),o,t)},e.buildProdGast=C,e.getDirectlyContainedRanges=D;var w=/\\/\\/.*/g,U=/\\/\\*([^*]|[\\r\\n]|(\\*+([^*\\/]|[\\r\\n])))*\\*+\\//g,G=/(NAME\\s*:\\s*)?\"([^\\\\\"]|\\\\([bfnrtv\"\\\\\\/]|u[0-9a-fA-F]{4}))*\"/g,B=/(NAME\\s*:\\s*)?'([^\\\\']|\\\\([bfnrtv'\\\\\\/]|u[0-9a-fA-F]{4}))*'/g;function K(t){return t.replace(w,\"\").replace(U,\"\")}function W(t,e){return void 0!==e?t:\"\"}function j(t){return t.replace(G,W).replace(B,W)}function V(t){var e=Y(t),n=H(t),r=X(t),i=z(t),o=q(t),a=$(t),s=Z(t),u=Q(t);return[].concat(e,n,r,i,o,a,s,u)}function Y(t){return nt(t,r.TERMINAL,p)}function H(t){return nt(t,r.REF,h)}function X(t){return rt(t,r.AT_LEAST_ONE,S)}function z(t){return rt(t,r.AT_LEAST_ONE_SEP,A)}function q(t){return rt(t,r.MANY,T)}function $(t){return rt(t,r.MANY_SEP,_)}function Z(t){return rt(t,r.OPTION,E)}function Q(t){var e=rt(t,r.OR,k),n=et(e);return e.concat(n)}e.removeComments=K,e.removeStringLiterals=j,e.createRanges=V,e.createTerminalRanges=Y,e.createRefsRanges=H,e.createAtLeastOneRanges=X,e.createAtLeastOneSepRanges=z,e.createManyRanges=q,e.createManySepRanges=$,e.createOptionRanges=Z,e.createOrRanges=Q;var J=o.partial(ot,\"{\",\"}\"),tt=o.partial(ot,\"(\",\")\");function et(t){var e=[];return o.forEach(t,function(t){var n=it(t.text,r.FLAT,x,J),i=t.range.start;o.forEach(n,function(t){t.range.start+=i,t.range.end+=i}),e=e.concat(n)}),o.uniq(e,function(t){return t.type+\"~\"+t.range.start+\"~\"+t.range.end+\"~\"+t.text})}function nt(t,e,n){for(var r,o=[];r=n.exec(t);){var a=r.index,s=n.lastIndex,u=new i.Range(a,s),c=r[0];o.push({range:u,text:c,type:e})}return o}function rt(t,e,n){return it(t,e,n,tt)}function it(t,e,n,r){for(var o,a=[];o=n.exec(t);){var s=o.index,u=r(s+o[0].length,t),c=new i.Range(s,u),p=t.substr(s,u-s+1);a.push({range:c,text:p,type:e})}return a}function ot(t,e,n,r){for(var i=[1],a=-1;!o.isEmpty(i)&&a+n<r.length;){a++;var s=r.charAt(n+a);s===t?i.push(1):s===e&&i.pop()}if(o.isEmpty(i))return a+n;throw new Error(\"INVALID INPUT TEXT, UNTERMINATED PARENTHESIS\")}function at(t,e){return o.map(t,function(t){return st(t,e)})}function st(t,e){switch(t.type){case\"NonTerminal\":return new a.NonTerminal({nonTerminalName:t.name,idx:t.idx});case\"Flat\":return new a.Flat({name:t.name,definition:at(t.definition,e)});case\"Option\":return new a.Option({name:t.name,idx:t.idx,definition:at(t.definition,e)});case\"RepetitionMandatory\":return new a.RepetitionMandatory({name:t.name,idx:t.idx,definition:at(t.definition,e)});case\"RepetitionMandatoryWithSeparator\":return new a.RepetitionMandatoryWithSeparator({name:t.name,idx:t.idx,separator:e[t.separator.name],definition:at(t.definition,e)});case\"RepetitionWithSeparator\":return new a.RepetitionWithSeparator({name:t.name,idx:t.idx,separator:e[t.separator.name],definition:at(t.definition,e)});case\"Repetition\":return new a.Repetition({name:t.name,idx:t.idx,definition:at(t.definition,e)});case\"Alternation\":return new a.Alternation({name:t.name,idx:t.idx,definition:at(t.definition,e)});case\"Terminal\":return new a.Terminal({terminalType:e[t.name],idx:t.idx});case\"Rule\":return new a.Rule({name:t.name,orgText:t.orgText,definition:at(t.definition,e)});default:}}e.createOrPartRanges=et,e.findClosingOffset=ot,e.deserializeGrammar=at,e.deserializeProduction=st},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(0),i=n(4),o=n(30),a=n(11),s=n(10),u=n(8);e.resolveGrammar=function(t){t=r.defaults(t,{errMsgProvider:s.defaultGrammarResolverErrorProvider});var e=new i.HashTable;return r.forEach(t.rules,function(t){e.put(t.name,t)}),o.resolveGrammar(e,t.errMsgProvider)},e.validateGrammar=function(t){return t=r.defaults(t,{errMsgProvider:s.defaultGrammarValidatorErrorProvider,ignoredIssues:{}}),a.validateGrammar(t.rules,t.maxLookahead,t.tokenTypes,t.ignoredIssues,t.errMsgProvider,t.grammarName)},e.assignOccurrenceIndices=function(t){r.forEach(t.rules,function(t){var e=new u.DslMethodsCollectorVisitor;t.accept(e),r.forEach(e.dslMethods,function(t){r.forEach(t,function(t,e){t.idx=e+1})})})}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(2),i=n(0),o=n(6),a=n(22),s=n(4),u=n(3);function c(t){this.name=e.IN_RULE_RECOVERY_EXCEPTION,this.message=t}e.EOF_FOLLOW_KEY={},e.IN_RULE_RECOVERY_EXCEPTION=\"InRuleRecoveryException\",e.InRuleRecoveryException=c,c.prototype=Error.prototype;var p=function(){function t(){}return t.prototype.initRecoverable=function(t){this.firstAfterRepMap=new s.HashTable,this.resyncFollows=new s.HashTable,this.recoveryEnabled=i.has(t,\"recoveryEnabled\")?t.recoveryEnabled:u.DEFAULT_PARSER_CONFIG.recoveryEnabled,this.recoveryEnabled&&(this.attemptInRepetitionRecovery=l)},t.prototype.getTokenToInsert=function(t){var e=r.createTokenInstance(t,\"\",NaN,NaN,NaN,NaN,NaN,NaN);return e.isInsertedInRecovery=!0,e},t.prototype.canTokenTypeBeInsertedInRecovery=function(t){return!0},t.prototype.tryInRepetitionRecovery=function(t,e,n,r){for(var a=this,s=this.findReSyncTokenType(),u=this.exportLexerState(),c=[],p=!1,l=this.LA(1),h=this.LA(1),f=function(){var t=a.LA(0),e=a.errorMessageProvider.buildMismatchTokenMessage({expected:r,actual:l,previous:t,ruleName:a.getCurrRuleFullName()}),n=new o.MismatchedTokenException(e,l,a.LA(0));n.resyncedTokens=i.dropRight(c),a.SAVE_ERROR(n)};!p;){if(this.tokenMatcher(h,r))return void f();if(n.call(this))return f(),void t.apply(this,e);this.tokenMatcher(h,s)?p=!0:(h=this.SKIP_TOKEN(),this.addToResyncTokens(h,c))}this.importLexerState(u)},t.prototype.shouldInRepetitionRecoveryBeTried=function(t,e){return void 0!==t&&void 0!==e&&(!this.tokenMatcher(this.LA(1),t)&&(!this.isBackTracking()&&!this.canPerformInRuleRecovery(t,this.getFollowsForInRuleRecovery(t,e))))},t.prototype.getFollowsForInRuleRecovery=function(t,e){var n=this.getCurrentGrammarPath(t,e);return this.getNextPossibleTokenTypes(n)},t.prototype.tryInRuleRecovery=function(t,e){if(this.canRecoverWithSingleTokenInsertion(t,e))return this.getTokenToInsert(t);if(this.canRecoverWithSingleTokenDeletion(t)){var n=this.SKIP_TOKEN();return this.consumeToken(),n}throw new c(\"sad sad panda\")},t.prototype.canPerformInRuleRecovery=function(t,e){return this.canRecoverWithSingleTokenInsertion(t,e)||this.canRecoverWithSingleTokenDeletion(t)},t.prototype.canRecoverWithSingleTokenInsertion=function(t,e){var n=this;if(!this.canTokenTypeBeInsertedInRecovery(t))return!1;if(i.isEmpty(e))return!1;var r=this.LA(1);return void 0!==i.find(e,function(t){return n.tokenMatcher(r,t)})},t.prototype.canRecoverWithSingleTokenDeletion=function(t){return this.tokenMatcher(this.LA(2),t)},t.prototype.isInCurrentRuleReSyncSet=function(t){var e=this.getCurrFollowKey(),n=this.getFollowSetFromFollowKey(e);return i.contains(n,t)},t.prototype.findReSyncTokenType=function(){for(var t=this.flattenFollowSet(),e=this.LA(1),n=2;;){var r=e.tokenType;if(i.contains(t,r))return r;e=this.LA(n),n++}},t.prototype.getCurrFollowKey=function(){if(1===this.RULE_STACK.length)return e.EOF_FOLLOW_KEY;var t=this.getLastExplicitRuleShortName(),n=this.getLastExplicitRuleOccurrenceIndex(),r=this.getPreviousExplicitRuleShortName();return{ruleName:this.shortRuleNameToFullName(t),idxInCallingRule:n,inRule:this.shortRuleNameToFullName(r)}},t.prototype.buildFullFollowKeyStack=function(){var t=this,n=this.RULE_STACK,r=this.RULE_OCCURRENCE_STACK;return i.isEmpty(this.LAST_EXPLICIT_RULE_STACK)||(n=i.map(this.LAST_EXPLICIT_RULE_STACK,function(e){return t.RULE_STACK[e]}),r=i.map(this.LAST_EXPLICIT_RULE_STACK,function(e){return t.RULE_OCCURRENCE_STACK[e]})),i.map(n,function(i,o){return 0===o?e.EOF_FOLLOW_KEY:{ruleName:t.shortRuleNameToFullName(i),idxInCallingRule:r[o],inRule:t.shortRuleNameToFullName(n[o-1])}})},t.prototype.flattenFollowSet=function(){var t=this,e=i.map(this.buildFullFollowKeyStack(),function(e){return t.getFollowSetFromFollowKey(e)});return i.flatten(e)},t.prototype.getFollowSetFromFollowKey=function(t){if(t===e.EOF_FOLLOW_KEY)return[r.EOF];var n=t.ruleName+t.idxInCallingRule+a.IN+t.inRule;return this.resyncFollows.get(n)},t.prototype.addToResyncTokens=function(t,e){return this.tokenMatcher(t,r.EOF)||e.push(t),e},t.prototype.reSyncTo=function(t){for(var e=[],n=this.LA(1);!1===this.tokenMatcher(n,t);)n=this.SKIP_TOKEN(),this.addToResyncTokens(n,e);return i.dropRight(e)},t.prototype.attemptInRepetitionRecovery=function(t,e,n,r,i,o){},t.prototype.getCurrentGrammarPath=function(t,e){return{ruleStack:this.getHumanReadableRuleStack(),occurrenceStack:i.cloneArr(this.RULE_OCCURRENCE_STACK),lastTok:t,lastTokOccurrence:e}},t.prototype.getHumanReadableRuleStack=function(){var t=this;return i.isEmpty(this.LAST_EXPLICIT_RULE_STACK)?i.map(this.RULE_STACK,function(e){return t.shortRuleNameToFullName(e)}):i.map(this.LAST_EXPLICIT_RULE_STACK,function(e){return t.shortRuleNameToFullName(t.RULE_STACK[e])})},t}();function l(t,e,n,i,o,a){var s=this.getKeyForAutomaticLookahead(i,o),u=this.firstAfterRepMap.get(s);if(void 0===u){var c=this.getCurrRuleFullName();u=new a(this.getGAstProductions().get(c),o).startWalking(),this.firstAfterRepMap.put(s,u)}var p=u.token,l=u.occurrence,h=u.isEndOfRule;1===this.RULE_STACK.length&&h&&void 0===p&&(p=r.EOF,l=1),this.shouldInRepetitionRecoveryBeTried(p,l)&&this.tryInRepetitionRecovery(t,e,n,p)}e.Recoverable=p,e.attemptInRepetitionRecovery=l},function(t,e,n){\"use strict\";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,\"__esModule\",{value:!0});var o=n(14),a=n(4),s=n(21),u=n(0),c=n(22),p=n(2),l=n(1),h=function(t){function e(e){var n=t.call(this)||this;return n.topProd=e,n.follows=new a.HashTable,n}return i(e,t),e.prototype.startWalking=function(){return this.walk(this.topProd),this.follows},e.prototype.walkTerminal=function(t,e,n){},e.prototype.walkProdRef=function(t,e,n){var r=f(t.referencedRule,t.idx)+this.topProd.name,i=e.concat(n),o=new l.Flat({definition:i}),a=s.first(o);this.follows.put(r,a)},e}(o.RestWalker);function f(t,e){return t.name+e+c.IN}e.ResyncFollowsWalker=h,e.computeAllProdsFollows=function(t){var e=new a.HashTable;return u.forEach(t,function(t){var n=new h(t).startWalking();e.putAll(n)}),e},e.buildBetweenProdsFollowPrefix=f,e.buildInProdFollowPrefix=function(t){return p.tokenName(t.terminalType)+t.idx+c.IN}},function(t,e,n){\"use strict\";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,\"__esModule\",{value:!0});var o=n(19),a=n(2),s=n(15),u=n(0),c=n(28),p=new o.RegExpParser,l=\"PATTERN\";function h(t){var e=u.filter(t,function(t){return!u.has(t,l)});return{errors:u.map(e,function(t){return{message:\"Token Type: ->\"+a.tokenName(t)+\"<- missing static 'PATTERN' property\",type:s.LexerDefinitionErrorType.MISSING_PATTERN,tokenTypes:[t]}}),valid:u.difference(t,e)}}function f(t){var e=u.filter(t,function(t){var e=t[l];return!(u.isRegExp(e)||u.isFunction(e)||u.has(e,\"exec\")||u.isString(e))});return{errors:u.map(e,function(t){return{message:\"Token Type: ->\"+a.tokenName(t)+\"<- static 'PATTERN' can only be a RegExp, a Function matching the {CustomPatternMatcherFunc} type or an Object matching the {ICustomPattern} interface.\",type:s.LexerDefinitionErrorType.INVALID_PATTERN,tokenTypes:[t]}}),valid:u.difference(t,e)}}e.DEFAULT_MODE=\"defaultMode\",e.MODES=\"modes\",e.SUPPORT_STICKY=\"boolean\"==typeof new RegExp(\"(?:)\").sticky,e.disableSticky=function(){e.SUPPORT_STICKY=!1},e.enableSticky=function(){e.SUPPORT_STICKY=!0},e.analyzeTokenTypes=function(t,n){n=u.defaults(n,{useSticky:e.SUPPORT_STICKY,debug:!1,safeMode:!1,positionTracking:\"full\",lineTerminatorCharacters:[\"\\r\",\"\\n\"]});var r=u.reject(t,function(t){return t[l]===s.Lexer.NA}),i=!1,o=u.map(r,function(t){var e=t[l];if(u.isRegExp(e)){var r=e.source;return 1===r.length&&\"^\"!==r&&\"$\"!==r&&\".\"!==r?r:2!==r.length||\"\\\\\"!==r[0]||u.contains([\"d\",\"D\",\"s\",\"S\",\"t\",\"r\",\"n\",\"t\",\"0\",\"c\",\"b\",\"B\",\"f\",\"v\",\"w\",\"W\"],r[1])?n.useSticky?O(e):N(e):r[1]}if(u.isFunction(e))return i=!0,{exec:e};if(u.has(e,\"exec\"))return i=!0,e;if(\"string\"==typeof e){if(1===e.length)return e;var o=e.replace(/[\\\\^$.*+?()[\\]{}|]/g,\"\\\\$&\"),a=new RegExp(o);return n.useSticky?O(a):N(a)}throw Error(\"non exhaustive match\")}),p=u.map(r,function(t){return t.tokenTypeIdx}),h=u.map(r,function(t){var e=t.GROUP;if(e!==s.Lexer.SKIPPED){if(u.isString(e))return e;if(u.isUndefined(e))return!1;throw Error(\"non exhaustive match\")}}),f=u.map(r,function(t){var e=t.LONGER_ALT;if(e)return u.indexOf(r,e)}),d=u.map(r,function(t){return t.PUSH_MODE}),E=u.map(r,function(t){return u.has(t,\"POP_MODE\")}),m=P(n.lineTerminatorCharacters),y=u.map(r,function(t){return!1});\"onlyOffset\"!==n.positionTracking&&(y=u.map(r,function(t){return u.has(t,\"LINE_BREAKS\")?t.LINE_BREAKS:!1===L(t,m)?c.canMatchCharCode(m,t.PATTERN):void 0}));var T=u.map(r,S),v=u.map(o,I),g=u.reduce(r,function(t,e){var n=e.GROUP;return u.isString(n)&&n!==s.Lexer.SKIPPED&&(t[n]=[]),t},{}),_=u.map(o,function(t,e){return{pattern:o[e],longerAlt:f[e],canLineTerminator:y[e],isCustom:T[e],short:v[e],group:h[e],push:d[e],pop:E[e],tokenTypeIdx:p[e],tokenType:r[e]}});function R(t,e,n){void 0===t[e]&&(t[e]=[]),t[e].push(n)}var A=!0,k=[];return n.safeMode||(k=u.reduce(r,function(t,e,r){if(\"string\"==typeof e.PATTERN){var i=e.PATTERN.charCodeAt(0);R(t,i,_[r])}else if(u.isArray(e.START_CHARS_HINT))u.forEach(e.START_CHARS_HINT,function(e){var n=\"string\"==typeof e?e.charCodeAt(0):e;R(t,n,_[r])});else if(u.isRegExp(e.PATTERN))if(e.PATTERN.unicode)A=!1,n.ensureOptimizations&&u.PRINT_ERROR(c.failedOptimizationPrefixMsg+\"\\tUnable to analyze < \"+e.PATTERN.toString()+\" > pattern.\\n\\tThe regexp unicode flag is not currently supported by the regexp-to-ast library.\\n\\tThis will disable the lexer's first char optimizations.\\n\\tFor details See: https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#UNICODE_OPTIMIZE\");else{var o=c.getStartCodes(e.PATTERN,n.ensureOptimizations);u.isEmpty(o)&&(A=!1),u.forEach(o,function(e){R(t,e,_[r])})}else n.ensureOptimizations&&u.PRINT_ERROR(c.failedOptimizationPrefixMsg+\"\\tTokenType: <\"+a.tokenName(e)+\"> is using a custom token pattern without providing <start_chars_hint> parameter.\\n\\tThis will disable the lexer's first char optimizations.\\n\\tFor details See: https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#CUSTOM_OPTIMIZE\"),A=!1;return t},[])),A&&k.length<65536&&(k=u.packArray(k)),{emptyGroups:g,patternIdxToConfig:_,charCodeToPatternIdxToConfig:k,hasCustom:i,canBeOptimized:A}},e.validatePatterns=function(t,e){var n=[],r=h(t);n=n.concat(r.errors);var i=f(r.valid),o=i.valid;return n=(n=(n=(n=(n=n.concat(i.errors)).concat(function(t){var e=[],n=u.filter(t,function(t){return u.isRegExp(t[l])});return e=(e=(e=(e=(e=e.concat(E(n))).concat(T(n))).concat(v(n))).concat(g(n))).concat(m(n))}(o))).concat(_(o))).concat(R(o,e))).concat(A(o))},e.findMissingPatterns=h,e.findInvalidPatterns=f;var d=/[^\\\\][\\$]/;function E(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.found=!1,e}return i(e,t),e.prototype.visitEndAnchor=function(t){this.found=!0},e}(o.BaseRegExpVisitor),n=u.filter(t,function(t){var n=t[l];try{var r=p.pattern(n.toString()),i=new e;return i.visit(r),i.found}catch(t){return d.test(n.source)}});return u.map(n,function(t){return{message:\"Unexpected RegExp Anchor Error:\\n\\tToken Type: ->\"+a.tokenName(t)+\"<- static 'PATTERN' cannot contain end of input anchor '$'\\n\\tSee sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#ANCHORS\\tfor details.\",type:s.LexerDefinitionErrorType.EOI_ANCHOR_FOUND,tokenTypes:[t]}})}function m(t){var e=u.filter(t,function(t){return t[l].test(\"\")});return u.map(e,function(t){return{message:\"Token Type: ->\"+a.tokenName(t)+\"<- static 'PATTERN' must not match an empty string\",type:s.LexerDefinitionErrorType.EMPTY_MATCH_PATTERN,tokenTypes:[t]}})}e.findEndOfInputAnchor=E,e.findEmptyMatchRegExps=m;var y=/[^\\\\[][\\^]|^\\^/;function T(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.found=!1,e}return i(e,t),e.prototype.visitStartAnchor=function(t){this.found=!0},e}(o.BaseRegExpVisitor),n=u.filter(t,function(t){var n=t[l];try{var r=p.pattern(n.toString()),i=new e;return i.visit(r),i.found}catch(t){return y.test(n.source)}});return u.map(n,function(t){return{message:\"Unexpected RegExp Anchor Error:\\n\\tToken Type: ->\"+a.tokenName(t)+\"<- static 'PATTERN' cannot contain start of input anchor '^'\\n\\tSee https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#ANCHORS\\tfor details.\",type:s.LexerDefinitionErrorType.SOI_ANCHOR_FOUND,tokenTypes:[t]}})}function v(t){var e=u.filter(t,function(t){var e=t[l];return e instanceof RegExp&&(e.multiline||e.global)});return u.map(e,function(t){return{message:\"Token Type: ->\"+a.tokenName(t)+\"<- static 'PATTERN' may NOT contain global('g') or multiline('m')\",type:s.LexerDefinitionErrorType.UNSUPPORTED_FLAGS_FOUND,tokenTypes:[t]}})}function g(t){var e=[],n=u.map(t,function(n){return u.reduce(t,function(t,r){return n.PATTERN.source!==r.PATTERN.source||u.contains(e,r)||r.PATTERN===s.Lexer.NA?t:(e.push(r),t.push(r),t)},[])});n=u.compact(n);var r=u.filter(n,function(t){return t.length>1});return u.map(r,function(t){var e=u.map(t,function(t){return a.tokenName(t)});return{message:\"The same RegExp pattern ->\"+u.first(t).PATTERN+\"<-has been used in all of the following Token Types: \"+e.join(\", \")+\" <-\",type:s.LexerDefinitionErrorType.DUPLICATE_PATTERNS_FOUND,tokenTypes:t}})}function _(t){var e=u.filter(t,function(t){if(!u.has(t,\"GROUP\"))return!1;var e=t.GROUP;return e!==s.Lexer.SKIPPED&&e!==s.Lexer.NA&&!u.isString(e)});return u.map(e,function(t){return{message:\"Token Type: ->\"+a.tokenName(t)+\"<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String\",type:s.LexerDefinitionErrorType.INVALID_GROUP_TYPE_FOUND,tokenTypes:[t]}})}function R(t,e){var n=u.filter(t,function(t){return void 0!==t.PUSH_MODE&&!u.contains(e,t.PUSH_MODE)});return u.map(n,function(t){return{message:\"Token Type: ->\"+a.tokenName(t)+\"<- static 'PUSH_MODE' value cannot refer to a Lexer Mode ->\"+t.PUSH_MODE+\"<-which does not exist\",type:s.LexerDefinitionErrorType.PUSH_MODE_DOES_NOT_EXIST,tokenTypes:[t]}})}function A(t){var e=[],n=u.reduce(t,function(t,e,n){var r,i=e.PATTERN;return i===s.Lexer.NA?t:(u.isString(i)?t.push({str:i,idx:n,tokenType:e}):u.isRegExp(i)&&(r=i,void 0===u.find([\".\",\"\\\\\",\"[\",\"]\",\"|\",\"^\",\"$\",\"(\",\")\",\"?\",\"*\",\"+\",\"{\"],function(t){return-1!==r.source.indexOf(t)}))&&t.push({str:i.source,idx:n,tokenType:e}),t)},[]);return u.forEach(t,function(t,r){u.forEach(n,function(n){var i=n.str,o=n.idx,c=n.tokenType;if(r<o&&function(t,e){if(u.isRegExp(e)){var n=e.exec(t);return null!==n&&0===n.index}if(u.isFunction(e))return e(t,0,[],{});if(u.has(e,\"exec\"))return e.exec(t,0,[],{});if(\"string\"==typeof e)return e===t;throw Error(\"non exhaustive match\")}(i,t.PATTERN)){var p=\"Token: ->\"+a.tokenName(c)+\"<- can never be matched.\\nBecause it appears AFTER the Token Type ->\"+a.tokenName(t)+\"<-in the lexer's definition.\\nSee https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#UNREACHABLE\";e.push({message:p,type:s.LexerDefinitionErrorType.UNREACHABLE_PATTERN,tokenTypes:[t,c]})}})}),e}function N(t){var e=t.ignoreCase?\"i\":\"\";return new RegExp(\"^(?:\"+t.source+\")\",e)}function O(t){var e=t.ignoreCase?\"iy\":\"y\";return new RegExp(\"\"+t.source,e)}function S(t){var e=t.PATTERN;if(u.isRegExp(e))return!1;if(u.isFunction(e))return!0;if(u.has(e,\"exec\"))return!0;if(u.isString(e))return!1;throw Error(\"non exhaustive match\")}function I(t){return!(!u.isString(t)||1!==t.length)&&t.charCodeAt(0)}function L(t,e){if(u.has(t,\"LINE_BREAKS\"))return!1;if(u.isRegExp(t.PATTERN)){try{c.canMatchCharCode(e,t.PATTERN)}catch(t){return{issue:s.LexerDefinitionErrorType.IDENTIFY_TERMINATOR,errMsg:t.message}}return!1}if(u.isString(t.PATTERN))return!1;if(S(t))return{issue:s.LexerDefinitionErrorType.CUSTOM_LINE_BREAK};throw Error(\"non exhaustive match\")}function k(t,e){if(e.issue===s.LexerDefinitionErrorType.IDENTIFY_TERMINATOR)return\"Warning: unable to identify line terminator usage in pattern.\\n\\tThe problem is in the <\"+t.name+\"> Token Type\\n\\t Root cause: \"+e.errMsg+\".\\n\\tFor details See: https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#IDENTIFY_TERMINATOR\";if(e.issue===s.LexerDefinitionErrorType.CUSTOM_LINE_BREAK)return\"Warning: A Custom Token Pattern should specify the <line_breaks> option.\\n\\tThe problem is in the <\"+t.name+\"> Token Type\\n\\tFor details See: https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#CUSTOM_LINE_BREAK\";throw Error(\"non exhaustive match\")}function P(t){return u.map(t,function(t){return u.isString(t)&&t.length>0?t.charCodeAt(0):t})}e.findStartOfInputAnchor=T,e.findUnsupportedFlags=v,e.findDuplicatePatterns=g,e.findInvalidGroupType=_,e.findModesThatDoNotExist=R,e.findUnreachablePatterns=A,e.addStartOfInput=N,e.addStickyFlag=O,e.performRuntimeChecks=function(t,n,r){var i=[];return u.has(t,e.DEFAULT_MODE)||i.push({message:\"A MultiMode Lexer cannot be initialized without a <\"+e.DEFAULT_MODE+\"> property in its definition\\n\",type:s.LexerDefinitionErrorType.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE}),u.has(t,e.MODES)||i.push({message:\"A MultiMode Lexer cannot be initialized without a <\"+e.MODES+\"> property in its definition\\n\",type:s.LexerDefinitionErrorType.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY}),u.has(t,e.MODES)&&u.has(t,e.DEFAULT_MODE)&&!u.has(t.modes,t.defaultMode)&&i.push({message:\"A MultiMode Lexer cannot be initialized with a \"+e.DEFAULT_MODE+\": <\"+t.defaultMode+\">which does not exist\\n\",type:s.LexerDefinitionErrorType.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST}),u.has(t,e.MODES)&&u.forEach(t.modes,function(t,e){u.forEach(t,function(t,n){u.isUndefined(t)&&i.push({message:\"A Lexer cannot be initialized using an undefined Token Type. Mode:<\"+e+\"> at index: <\"+n+\">\\n\",type:s.LexerDefinitionErrorType.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED})})}),i},e.performWarningRuntimeChecks=function(t,e,n){var r=[],i=!1,o=u.compact(u.flatten(u.mapValues(t.modes,function(t){return t}))),a=u.reject(o,function(t){return t[l]===s.Lexer.NA}),p=P(n);return e&&u.forEach(a,function(t){var e=L(t,p);if(!1!==e){var n={message:k(t,e),type:e.issue,tokenType:t};r.push(n)}else u.has(t,\"LINE_BREAKS\")?!0===t.LINE_BREAKS&&(i=!0):c.canMatchCharCode(p,t.PATTERN)&&(i=!0)}),e&&!i&&r.push({message:\"Warning: No LINE_BREAKS Found.\\n\\tThis Lexer has been defined to track line and column information,\\n\\tBut none of the Token Types can be identified as matching a line terminator.\\n\\tSee https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#LINE_BREAKS \\n\\tfor details.\",type:s.LexerDefinitionErrorType.NO_LINE_BREAKS_FLAGS}),r},e.cloneEmptyGroups=function(t){var e={},n=u.keys(t);return u.forEach(n,function(n){var r=t[n];if(!u.isArray(r))throw Error(\"non exhaustive match\");e[n]=[]}),e},e.isCustomPattern=S,e.isShortPattern=I,e.LineTerminatorOptimizedTester={test:function(t){for(var e=t.length,n=this.lastIndex;n<e;n++){var r=t.charCodeAt(n);if(10===r)return this.lastIndex=n+1,!0;if(13===r)return 10===t.charCodeAt(n+1)?this.lastIndex=n+2:this.lastIndex=n+1,!0}return!1},lastIndex:0},e.buildLineBreakIssueMessage=k},function(t,e,n){\"use strict\";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,\"__esModule\",{value:!0});var o=n(19),a=n(0),s=new o.RegExpParser,u=\"Complement Sets are not supported for first char optimization\";function c(t){switch(t.type){case\"Disjunction\":return a.flatten(a.map(t.value,c));case\"Alternative\":for(var e=[],n=t.value,r=0;r<n.length;r++){var i=n[r];if(!a.contains([\"GroupBackReference\",\"Lookahead\",\"NegativeLookahead\",\"StartAnchor\",\"EndAnchor\",\"WordBoundary\",\"NonWordBoundary\"],i.type)){var o=i;switch(o.type){case\"Character\":e.push(o.value);break;case\"Set\":if(!0===o.complement)throw Error(u);a.forEach(o.value,function(t){if(\"number\"==typeof t)e.push(t);else for(var n=t,r=n.from;r<=n.to;r++)e.push(r)});break;case\"Group\":var s=c(o.value);a.forEach(s,function(t){return e.push(t)});break;default:throw Error(\"Non Exhaustive Match\")}var p=void 0!==o.quantifier&&0===o.quantifier.atLeast;if(\"Group\"===o.type&&!1===h(o)||\"Group\"!==o.type&&!1===p)break}}return e;default:throw Error(\"non exhaustive match!\")}}function p(t){var e=[];return a.forEach(t,function(t){e.push(t);var n=String.fromCharCode(t);n.toUpperCase()!==n?e.push(n.toUpperCase().charCodeAt(0)):n.toLowerCase()!==n&&e.push(n.toLowerCase().charCodeAt(0))}),e}function l(t,e){return a.find(t.value,function(t){if(\"number\"==typeof t)return a.contains(e,t);var n=t;return void 0!==a.find(e,function(t){return n.from<=t&&t<=n.to})})}function h(t){return!(!t.quantifier||0!==t.quantifier.atLeast)||!!t.value&&(a.isArray(t.value)?a.every(t.value,h):h(t.value))}e.failedOptimizationPrefixMsg='Unable to use \"first char\" lexer optimizations:\\n',e.getStartCodes=function(t,n){void 0===n&&(n=!1);try{var r=s.pattern(t.toString()),i=c(r.value);return r.flags.ignoreCase&&(i=p(i)),i}catch(r){if(r.message===u)n&&a.PRINT_WARNING(e.failedOptimizationPrefixMsg+\"\\tUnable to optimize: < \"+t.toString()+\" >\\n\\tComplement Sets cannot be automatically optimized.\\n\\tThis will disable the lexer's first char optimizations.\\n\\tSee: https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#COMPLEMENT for details.\");else{var l=\"\";n&&(l=\"\\n\\tThis will disable the lexer's first char optimizations.\\n\\tSee: https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#REGEXP_PARSING for details.\"),a.PRINT_ERROR(e.failedOptimizationPrefixMsg+\"\\n\\tFailed parsing: < \"+t.toString()+\" >\\n\\tUsing the regexp-to-ast library version: \"+o.VERSION+\"\\n\\tPlease open an issue at: https://github.com/bd82/regexp-to-ast/issues\"+l)}}return[]},e.firstChar=c,e.applyIgnoreCase=p;var f=function(t){function e(e){var n=t.call(this)||this;return n.targetCharCodes=e,n.found=!1,n}return i(e,t),e.prototype.visitChildren=function(e){switch(e.type){case\"Lookahead\":return void this.visitLookahead(e);case\"NegativeLookahead\":return void this.visitNegativeLookahead(e)}t.prototype.visitChildren.call(this,e)},e.prototype.visitCharacter=function(t){a.contains(this.targetCharCodes,t.value)&&(this.found=!0)},e.prototype.visitSet=function(t){t.complement?void 0===l(t,this.targetCharCodes)&&(this.found=!0):void 0!==l(t,this.targetCharCodes)&&(this.found=!0)},e}(o.BaseRegExpVisitor);e.canMatchCharCode=function(t,e){if(e instanceof RegExp){var n=s.pattern(e.toString()),r=new f(t);return r.visit(n),r.found}return void 0!==a.find(e,function(e){return a.contains(t,e.charCodeAt(0))})}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=function(){function t(t,e){if(this.start=t,this.end=e,!i(t,e))throw new Error(\"INVALID RANGE\")}return t.prototype.contains=function(t){return this.start<=t&&this.end>=t},t.prototype.containsRange=function(t){return this.start<=t.start&&this.end>=t.end},t.prototype.isContainedInRange=function(t){return t.containsRange(this)},t.prototype.strictlyContainsRange=function(t){return this.start<t.start&&this.end>t.end},t.prototype.isStrictlyContainedInRange=function(t){return t.strictlyContainsRange(this)},t}();function i(t,e){return!(t<0||e<t)}e.Range=r,e.isValidRange=i},function(t,e,n){\"use strict\";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,\"__esModule\",{value:!0});var o=n(3),a=n(0),s=n(5);e.resolveGrammar=function(t,e){var n=new u(t,e);return n.resolveRefs(),n.errors};var u=function(t){function e(e,n){var r=t.call(this)||this;return r.nameToTopRule=e,r.errMsgProvider=n,r.errors=[],r}return i(e,t),e.prototype.resolveRefs=function(){var t=this;a.forEach(this.nameToTopRule.values(),function(e){t.currTopLevel=e,e.accept(t)})},e.prototype.visitNonTerminal=function(t){var e=this.nameToTopRule.get(t.nonTerminalName);if(e)t.referencedRule=e;else{var n=this.errMsgProvider.buildRuleNotFoundError(this.currTopLevel,t);this.errors.push({message:n,type:o.ParserDefinitionErrorType.UNRESOLVED_SUBRULE_REF,ruleName:this.currTopLevel.name,unresolvedRefName:t.nonTerminalName})}},e}(s.GAstVisitor);e.GastRefResolverVisitor=u},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(12),i=n(0),o=n(3),a=n(9),s=function(){function t(){}return t.prototype.initLooksAhead=function(t){this.dynamicTokensEnabled=i.has(t,\"dynamicTokensEnabled\")?t.dynamicTokensEnabled:o.DEFAULT_PARSER_CONFIG.dynamicTokensEnabled,this.maxLookahead=i.has(t,\"maxLookahead\")?t.maxLookahead:o.DEFAULT_PARSER_CONFIG.maxLookahead,this.lookAheadFuncsCache=i.isES2015MapSupported()?new Map:[],i.isES2015MapSupported()?(this.getLaFuncFromCache=this.getLaFuncFromMap,this.setLaFuncCache=this.setLaFuncCacheUsingMap):(this.getLaFuncFromCache=this.getLaFuncFromObj,this.setLaFuncCache=this.setLaFuncUsingObj)},t.prototype.lookAheadBuilderForOptional=function(t,e,n){return r.buildSingleAlternativeLookaheadFunction(t,e,n)},t.prototype.lookAheadBuilderForAlternatives=function(t,e,n,i){return r.buildAlternativesLookAheadFunc(t,e,n,i)},t.prototype.getKeyForAutomaticLookahead=function(t,e){var n=this.getLastExplicitRuleShortName();return a.getKeyForAutomaticLookahead(n,t,e)},t.prototype.getLookaheadFuncForOr=function(t,e){var n=this.getKeyForAutomaticLookahead(a.OR_IDX,t),o=this.getLaFuncFromCache(n);if(void 0===o){var s=this.getCurrRuleFullName(),u=this.getGAstProductions().get(s),c=i.some(e,function(t){return i.isFunction(t.GATE)});return o=r.buildLookaheadFuncForOr(t,u,this.maxLookahead,c,this.dynamicTokensEnabled,this.lookAheadBuilderForAlternatives),this.setLaFuncCache(n,o),o}return o},t.prototype.getLookaheadFuncForOption=function(t,e){return this.getLookaheadFuncFor(t,e,this.maxLookahead,r.PROD_TYPE.OPTION)},t.prototype.getLookaheadFuncForMany=function(t,e){return this.getLookaheadFuncFor(t,e,this.maxLookahead,r.PROD_TYPE.REPETITION)},t.prototype.getLookaheadFuncForManySep=function(t,e){return this.getLookaheadFuncFor(t,e,this.maxLookahead,r.PROD_TYPE.REPETITION_WITH_SEPARATOR)},t.prototype.getLookaheadFuncForAtLeastOne=function(t,e){return this.getLookaheadFuncFor(t,e,this.maxLookahead,r.PROD_TYPE.REPETITION_MANDATORY)},t.prototype.getLookaheadFuncForAtLeastOneSep=function(t,e){return this.getLookaheadFuncFor(t,e,this.maxLookahead,r.PROD_TYPE.REPETITION_MANDATORY_WITH_SEPARATOR)},t.prototype.getLookaheadFuncFor=function(t,e,n,i){var o=this.getLaFuncFromCache(t);if(void 0===o){var a=this.getCurrRuleFullName(),s=this.getGAstProductions().get(a);return o=r.buildLookaheadFuncForOptionalProd(e,s,n,this.dynamicTokensEnabled,i,this.lookAheadBuilderForOptional),this.setLaFuncCache(t,o),o}return o},t.prototype.getLaFuncFromCache=function(t){},t.prototype.getLaFuncFromMap=function(t){return this.lookAheadFuncsCache.get(t)},t.prototype.getLaFuncFromObj=function(t){return this.lookAheadFuncsCache[t]},t.prototype.setLaFuncCache=function(t,e){},t.prototype.setLaFuncCacheUsingMap=function(t,e){this.lookAheadFuncsCache.set(t,e)},t.prototype.setLaFuncUsingObj=function(t,e){this.lookAheadFuncsCache[t]=e},t}();e.LooksAhead=s},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(16),i=n(0),o=n(33),a=n(9),s=n(3),u=function(){function t(){}return t.prototype.initTreeBuilder=function(t){this.LAST_EXPLICIT_RULE_STACK=[],this.CST_STACK=[],this.outputCst=i.has(t,\"outputCst\")?t.outputCst:s.DEFAULT_PARSER_CONFIG.outputCst,this.outputCst||(this.cstInvocationStateUpdate=i.NOOP,this.cstFinallyStateUpdate=i.NOOP,this.cstPostTerminal=i.NOOP,this.cstPostNonTerminal=i.NOOP,this.getLastExplicitRuleShortName=this.getLastExplicitRuleShortNameNoCst,this.getPreviousExplicitRuleShortName=this.getPreviousExplicitRuleShortNameNoCst,this.getLastExplicitRuleOccurrenceIndex=this.getLastExplicitRuleOccurrenceIndexNoCst,this.manyInternal=this.manyInternalNoCst,this.orInternal=this.orInternalNoCst,this.optionInternal=this.optionInternalNoCst,this.atLeastOneInternal=this.atLeastOneInternalNoCst,this.manySepFirstInternal=this.manySepFirstInternalNoCst,this.atLeastOneSepFirstInternal=this.atLeastOneSepFirstInternalNoCst)},t.prototype.cstNestedInvocationStateUpdate=function(t,e){this.CST_STACK.push({name:t,fullName:this.shortRuleNameToFull.get(this.getLastExplicitRuleShortName())+t,children:{}})},t.prototype.cstInvocationStateUpdate=function(t,e){this.LAST_EXPLICIT_RULE_STACK.push(this.RULE_STACK.length-1),this.CST_STACK.push({name:t,children:{}})},t.prototype.cstFinallyStateUpdate=function(){this.LAST_EXPLICIT_RULE_STACK.pop(),this.CST_STACK.pop()},t.prototype.cstNestedFinallyStateUpdate=function(){this.CST_STACK.pop()},t.prototype.cstPostTerminal=function(t,e){var n=this.CST_STACK[this.CST_STACK.length-1];r.addTerminalToCst(n,e,t)},t.prototype.cstPostNonTerminal=function(t,e){r.addNoneTerminalToCst(this.CST_STACK[this.CST_STACK.length-1],e,t)},t.prototype.getBaseCstVisitorConstructor=function(){if(i.isUndefined(this.baseCstVisitorConstructor)){var t=o.createBaseSemanticVisitorConstructor(this.className,this.allRuleNames);return this.baseCstVisitorConstructor=t,t}return this.baseCstVisitorConstructor},t.prototype.getBaseCstVisitorConstructorWithDefaults=function(){if(i.isUndefined(this.baseCstVisitorWithDefaultsConstructor)){var t=o.createBaseVisitorConstructorWithDefaults(this.className,this.allRuleNames,this.getBaseCstVisitorConstructor());return this.baseCstVisitorWithDefaultsConstructor=t,t}return this.baseCstVisitorWithDefaultsConstructor},t.prototype.nestedRuleBeforeClause=function(t,e){var n;return void 0!==t.NAME?(n=t.NAME,this.nestedRuleInvocationStateUpdate(n,e),n):void 0},t.prototype.nestedAltBeforeClause=function(t,e,n,r){var i,o=this.getLastExplicitRuleShortName(),s=a.getKeyForAltIndex(o,n,e,r);return void 0!==t.NAME?(i=t.NAME,this.nestedRuleInvocationStateUpdate(i,s),{shortName:s,nestedName:i}):void 0},t.prototype.nestedRuleFinallyClause=function(t,e){var n=this.CST_STACK,i=n[n.length-1];this.nestedRuleFinallyStateUpdate();var o=n[n.length-1];r.addNoneTerminalToCst(o,e,i)},t.prototype.getLastExplicitRuleShortName=function(){var t=this.LAST_EXPLICIT_RULE_STACK[this.LAST_EXPLICIT_RULE_STACK.length-1];return this.RULE_STACK[t]},t.prototype.getLastExplicitRuleShortNameNoCst=function(){var t=this.RULE_STACK;return t[t.length-1]},t.prototype.getPreviousExplicitRuleShortName=function(){var t=this.LAST_EXPLICIT_RULE_STACK[this.LAST_EXPLICIT_RULE_STACK.length-2];return this.RULE_STACK[t]},t.prototype.getPreviousExplicitRuleShortNameNoCst=function(){var t=this.RULE_STACK;return t[t.length-2]},t.prototype.getLastExplicitRuleOccurrenceIndex=function(){var t=this.LAST_EXPLICIT_RULE_STACK[this.LAST_EXPLICIT_RULE_STACK.length-1];return this.RULE_OCCURRENCE_STACK[t]},t.prototype.getLastExplicitRuleOccurrenceIndexNoCst=function(){var t=this.RULE_OCCURRENCE_STACK;return t[t.length-1]},t.prototype.nestedRuleInvocationStateUpdate=function(t,e){this.RULE_OCCURRENCE_STACK.push(1),this.RULE_STACK.push(e),this.cstNestedInvocationStateUpdate(t,e)},t.prototype.nestedRuleFinallyStateUpdate=function(){this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),this.cstNestedFinallyStateUpdate()},t}();e.TreeBuilder=u},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r,i=n(0),o=n(4),a=n(11);function s(t,e){for(var n=i.keys(t),r=n.length,o=0;o<r;o++)for(var a=t[n[o]],s=a.length,u=0;u<s;u++){var c=a[u];void 0===c.tokenTypeIdx&&(void 0!==c.fullName?this[c.fullName](c.children,e):this[c.name](c.children,e))}}function u(t,e){var n=c(t,e),r=l(t,e);return n.concat(r)}function c(t,e){var n=i.map(e,function(e){if(!i.isFunction(t[e]))return{msg:\"Missing visitor method: <\"+e+\"> on \"+o.functionName(t.constructor)+\" CST Visitor.\",type:r.MISSING_METHOD,methodName:e}});return i.compact(n)}e.defaultVisit=s,e.createBaseSemanticVisitorConstructor=function(t,e){var n=function(){};return o.defineNameProp(n,t+\"BaseSemantics\"),(n.prototype={visit:function(t,e){if(i.isArray(t)&&(t=t[0]),!i.isUndefined(t))return void 0!==t.fullName?this[t.fullName](t.children,e):this[t.name](t.children,e)},validateVisitor:function(){var t=u(this,e);if(!i.isEmpty(t)){var n=i.map(t,function(t){return t.msg});throw Error(\"Errors Detected in CST Visitor <\"+o.functionName(this.constructor)+\">:\\n\\t\"+n.join(\"\\n\\n\").replace(/\\n/g,\"\\n\\t\"))}}}).constructor=n,n._RULE_NAMES=e,n},e.createBaseVisitorConstructorWithDefaults=function(t,e,n){var r=function(){};o.defineNameProp(r,t+\"BaseSemanticsWithDefaults\");var a=Object.create(n.prototype);return i.forEach(e,function(t){a[t]=s}),(r.prototype=a).constructor=r,r},function(t){t[t.REDUNDANT_METHOD=0]=\"REDUNDANT_METHOD\",t[t.MISSING_METHOD=1]=\"MISSING_METHOD\"}(r=e.CstVisitorDefinitionError||(e.CstVisitorDefinitionError={})),e.validateVisitor=u,e.validateMissingCstMethods=c;var p=[\"constructor\",\"visit\",\"validateVisitor\"];function l(t,e){var n=[];for(var s in t)a.validTermsPattern.test(s)&&i.isFunction(t[s])&&!i.contains(p,s)&&!i.contains(e,s)&&n.push({msg:\"Redundant visitor method: <\"+s+\"> on \"+o.functionName(t.constructor)+\" CST Visitor\\nThere is no Grammar Rule corresponding to this method's name.\\nFor utility methods on visitor classes use methods names that do not match /\"+a.validTermsPattern.source+\"/.\",type:r.REDUNDANT_METHOD,methodName:s});return n}e.validateRedundantMethods=l},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(3),i=function(){function t(){}return t.prototype.initLexerAdapter=function(){this.tokVector=[],this.tokVectorLength=0,this.currIdx=-1},Object.defineProperty(t.prototype,\"input\",{get:function(){return this.tokVector},set:function(t){this.reset(),this.tokVector=t,this.tokVectorLength=t.length},enumerable:!0,configurable:!0}),t.prototype.SKIP_TOKEN=function(){return this.currIdx<=this.tokVector.length-2?(this.consumeToken(),this.LA(1)):r.END_OF_FILE},t.prototype.LA=function(t){return this.currIdx+t<0||this.tokVectorLength<=this.currIdx+t?r.END_OF_FILE:this.tokVector[this.currIdx+t]},t.prototype.consumeToken=function(){this.currIdx++},t.prototype.exportLexerState=function(){return this.currIdx},t.prototype.importLexerState=function(t){this.currIdx=t},t.prototype.resetLexerState=function(){this.currIdx=-1},t.prototype.moveToTerminatedState=function(){this.currIdx=this.tokVector.length-1},t.prototype.getLexerPosition=function(){return this.exportLexerState()},t}();e.LexerAdapter=i},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(0),i=n(6),o=n(3),a=n(10),s=n(23),u=n(11),c=n(1),p=function(){function t(){}return t.prototype.CONSUME=function(t,e){return this.consumeInternal(t,0,e)},t.prototype.CONSUME1=function(t,e){return this.consumeInternal(t,1,e)},t.prototype.CONSUME2=function(t,e){return this.consumeInternal(t,2,e)},t.prototype.CONSUME3=function(t,e){return this.consumeInternal(t,3,e)},t.prototype.CONSUME4=function(t,e){return this.consumeInternal(t,4,e)},t.prototype.CONSUME5=function(t,e){return this.consumeInternal(t,5,e)},t.prototype.CONSUME6=function(t,e){return this.consumeInternal(t,6,e)},t.prototype.CONSUME7=function(t,e){return this.consumeInternal(t,7,e)},t.prototype.CONSUME8=function(t,e){return this.consumeInternal(t,8,e)},t.prototype.CONSUME9=function(t,e){return this.consumeInternal(t,9,e)},t.prototype.SUBRULE=function(t,e){return this.subruleInternal(t,0,e)},t.prototype.SUBRULE1=function(t,e){return this.subruleInternal(t,1,e)},t.prototype.SUBRULE2=function(t,e){return this.subruleInternal(t,2,e)},t.prototype.SUBRULE3=function(t,e){return this.subruleInternal(t,3,e)},t.prototype.SUBRULE4=function(t,e){return this.subruleInternal(t,4,e)},t.prototype.SUBRULE5=function(t,e){return this.subruleInternal(t,5,e)},t.prototype.SUBRULE6=function(t,e){return this.subruleInternal(t,6,e)},t.prototype.SUBRULE7=function(t,e){return this.subruleInternal(t,7,e)},t.prototype.SUBRULE8=function(t,e){return this.subruleInternal(t,8,e)},t.prototype.SUBRULE9=function(t,e){return this.subruleInternal(t,9,e)},t.prototype.OPTION=function(t){return this.optionInternal(t,0)},t.prototype.OPTION1=function(t){return this.optionInternal(t,1)},t.prototype.OPTION2=function(t){return this.optionInternal(t,2)},t.prototype.OPTION3=function(t){return this.optionInternal(t,3)},t.prototype.OPTION4=function(t){return this.optionInternal(t,4)},t.prototype.OPTION5=function(t){return this.optionInternal(t,5)},t.prototype.OPTION6=function(t){return this.optionInternal(t,6)},t.prototype.OPTION7=function(t){return this.optionInternal(t,7)},t.prototype.OPTION8=function(t){return this.optionInternal(t,8)},t.prototype.OPTION9=function(t){return this.optionInternal(t,9)},t.prototype.OR=function(t){return this.orInternal(t,0)},t.prototype.OR1=function(t){return this.orInternal(t,1)},t.prototype.OR2=function(t){return this.orInternal(t,2)},t.prototype.OR3=function(t){return this.orInternal(t,3)},t.prototype.OR4=function(t){return this.orInternal(t,4)},t.prototype.OR5=function(t){return this.orInternal(t,5)},t.prototype.OR6=function(t){return this.orInternal(t,6)},t.prototype.OR7=function(t){return this.orInternal(t,7)},t.prototype.OR8=function(t){return this.orInternal(t,8)},t.prototype.OR9=function(t){return this.orInternal(t,9)},t.prototype.MANY=function(t){this.manyInternal(0,t)},t.prototype.MANY1=function(t){this.manyInternal(1,t)},t.prototype.MANY2=function(t){this.manyInternal(2,t)},t.prototype.MANY3=function(t){this.manyInternal(3,t)},t.prototype.MANY4=function(t){this.manyInternal(4,t)},t.prototype.MANY5=function(t){this.manyInternal(5,t)},t.prototype.MANY6=function(t){this.manyInternal(6,t)},t.prototype.MANY7=function(t){this.manyInternal(7,t)},t.prototype.MANY8=function(t){this.manyInternal(8,t)},t.prototype.MANY9=function(t){this.manyInternal(9,t)},t.prototype.MANY_SEP=function(t){this.manySepFirstInternal(0,t)},t.prototype.MANY_SEP1=function(t){this.manySepFirstInternal(1,t)},t.prototype.MANY_SEP2=function(t){this.manySepFirstInternal(2,t)},t.prototype.MANY_SEP3=function(t){this.manySepFirstInternal(3,t)},t.prototype.MANY_SEP4=function(t){this.manySepFirstInternal(4,t)},t.prototype.MANY_SEP5=function(t){this.manySepFirstInternal(5,t)},t.prototype.MANY_SEP6=function(t){this.manySepFirstInternal(6,t)},t.prototype.MANY_SEP7=function(t){this.manySepFirstInternal(7,t)},t.prototype.MANY_SEP8=function(t){this.manySepFirstInternal(8,t)},t.prototype.MANY_SEP9=function(t){this.manySepFirstInternal(9,t)},t.prototype.AT_LEAST_ONE=function(t){this.atLeastOneInternal(0,t)},t.prototype.AT_LEAST_ONE1=function(t){return this.atLeastOneInternal(1,t)},t.prototype.AT_LEAST_ONE2=function(t){this.atLeastOneInternal(2,t)},t.prototype.AT_LEAST_ONE3=function(t){this.atLeastOneInternal(3,t)},t.prototype.AT_LEAST_ONE4=function(t){this.atLeastOneInternal(4,t)},t.prototype.AT_LEAST_ONE5=function(t){this.atLeastOneInternal(5,t)},t.prototype.AT_LEAST_ONE6=function(t){this.atLeastOneInternal(6,t)},t.prototype.AT_LEAST_ONE7=function(t){this.atLeastOneInternal(7,t)},t.prototype.AT_LEAST_ONE8=function(t){this.atLeastOneInternal(8,t)},t.prototype.AT_LEAST_ONE9=function(t){this.atLeastOneInternal(9,t)},t.prototype.AT_LEAST_ONE_SEP=function(t){this.atLeastOneSepFirstInternal(0,t)},t.prototype.AT_LEAST_ONE_SEP1=function(t){this.atLeastOneSepFirstInternal(1,t)},t.prototype.AT_LEAST_ONE_SEP2=function(t){this.atLeastOneSepFirstInternal(2,t)},t.prototype.AT_LEAST_ONE_SEP3=function(t){this.atLeastOneSepFirstInternal(3,t)},t.prototype.AT_LEAST_ONE_SEP4=function(t){this.atLeastOneSepFirstInternal(4,t)},t.prototype.AT_LEAST_ONE_SEP5=function(t){this.atLeastOneSepFirstInternal(5,t)},t.prototype.AT_LEAST_ONE_SEP6=function(t){this.atLeastOneSepFirstInternal(6,t)},t.prototype.AT_LEAST_ONE_SEP7=function(t){this.atLeastOneSepFirstInternal(7,t)},t.prototype.AT_LEAST_ONE_SEP8=function(t){this.atLeastOneSepFirstInternal(8,t)},t.prototype.AT_LEAST_ONE_SEP9=function(t){this.atLeastOneSepFirstInternal(9,t)},t.prototype.RULE=function(t,e,n){if(void 0===n&&(n=o.DEFAULT_RULE_CONFIG),r.contains(this.definedRulesNames,t)){var i={message:a.defaultGrammarValidatorErrorProvider.buildDuplicateRuleNameError({topLevelRule:t,grammarName:this.className}),type:o.ParserDefinitionErrorType.DUPLICATE_RULE_NAME,ruleName:t};this.definitionErrors.push(i)}if(this.definedRulesNames.push(t),!this.gastProductionsCache.containsKey(t)&&!this.serializedGrammar){var u=s.buildTopProduction(e.toString(),t,this.tokensMap);this.gastProductionsCache.put(t,u)}var c=this.defineRule(t,e,n);return this[t]=c,c},t.prototype.OVERRIDE_RULE=function(t,e,n){void 0===n&&(n=o.DEFAULT_RULE_CONFIG);var r=[];if(r=r.concat(u.validateRuleIsOverridden(t,this.definedRulesNames,this.className)),this.definitionErrors.push.apply(this.definitionErrors,r),!this.serializedGrammar){var i=s.buildTopProduction(e.toString(),t,this.tokensMap);this.gastProductionsCache.put(t,i)}var a=this.defineRule(t,e,n);return this[t]=a,a},t.prototype.BACKTRACK=function(t,e){return function(){this.isBackTrackingStack.push(1);var n=this.saveRecogState();try{return t.apply(this,e),!0}catch(t){if(i.isRecognitionException(t))return!1;throw t}finally{this.reloadRecogState(n),this.isBackTrackingStack.pop()}}},t.prototype.getGAstProductions=function(){return this.gastProductionsCache},t.prototype.getSerializedGastProductions=function(){return c.serializeGrammar(this.gastProductionsCache.values())},t}();e.RecognizerApi=p},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(0),i=n(9),o=n(6),a=n(12),s=n(13),u=n(3),c=n(25),p=n(2),l=n(7),h=n(4),f=function(){function t(){}return t.prototype.initRecognizerEngine=function(t,e){if(this.className=h.classNameFromInstance(this),this.shortRuleNameToFull=new h.HashTable,this.fullRuleNameToShort=new h.HashTable,this.ruleShortNameIdx=256,this.tokenMatcher=l.tokenStructuredMatcherNoCategories,this.definedRulesNames=[],this.tokensMap={},this.allRuleNames=[],this.isBackTrackingStack=[],this.RULE_STACK=[],this.RULE_OCCURRENCE_STACK=[],this.gastProductionsCache=new h.HashTable,this.serializedGrammar=r.has(e,\"serializedGrammar\")?e.serializedGrammar:u.DEFAULT_PARSER_CONFIG.serializedGrammar,r.isArray(t)){if(r.isEmpty(t))throw Error(\"A Token Vocabulary cannot be empty.\\n\\tNote that the first argument for the parser constructor\\n\\tis no longer a Token vector (since v4.0).\");if(\"number\"==typeof t[0].startOffset)throw Error(\"The Parser constructor no longer accepts a token vector as the first argument.\\n\\tSee: https://sap.github.io/chevrotain/docs/changes/BREAKING_CHANGES.html#_4-0-0\\n\\tFor Further details.\")}if(r.isArray(t))this.tokensMap=r.reduce(t,function(t,e){return t[p.tokenName(e)]=e,t},{});else if(r.has(t,\"modes\")&&r.every(r.flatten(r.values(t.modes)),l.isTokenType)){var n=r.flatten(r.values(t.modes)),i=r.uniq(n);this.tokensMap=r.reduce(i,function(t,e){return t[p.tokenName(e)]=e,t},{})}else{if(!r.isObject(t))throw new Error(\"<tokensDictionary> argument must be An Array of Token constructors, A dictionary of Token constructors or an IMultiModeLexerDefinition\");this.tokensMap=r.cloneObj(t)}this.tokensMap.EOF=p.EOF;var o=r.every(r.values(t),function(t){return r.isEmpty(t.categoryMatches)});this.tokenMatcher=o?l.tokenStructuredMatcherNoCategories:l.tokenStructuredMatcher,l.augmentTokenTypes(r.values(this.tokensMap))},t.prototype.defineRule=function(t,e,n){if(this.selfAnalysisDone)throw Error(\"Grammar rule <\"+t+\"> may not be defined after the 'performSelfAnalysis' method has been called'\\nMake sure that all grammar rule definitions are done before 'performSelfAnalysis' is called.\");var a,s=r.has(n,\"resyncEnabled\")?n.resyncEnabled:u.DEFAULT_RULE_CONFIG.resyncEnabled,c=r.has(n,\"recoveryValueFunc\")?n.recoveryValueFunc:u.DEFAULT_RULE_CONFIG.recoveryValueFunc,p=this.ruleShortNameIdx<<i.BITS_FOR_METHOD_IDX+i.BITS_FOR_OCCURRENCE_IDX;this.ruleShortNameIdx++,this.shortRuleNameToFull.put(p,t),this.fullRuleNameToShort.put(t,p);return(a=function(n,r){return void 0===n&&(n=0),this.ruleInvocationStateUpdate(p,t,n),function(t){try{return!0===this.outputCst?(e.apply(this,t),this.CST_STACK[this.CST_STACK.length-1]):e.apply(this,t)}catch(t){var n=1===this.RULE_STACK.length,r=s&&!this.isBackTracking()&&this.recoveryEnabled;if(o.isRecognitionException(t)){if(r){var i,a=this.findReSyncTokenType();if(this.isInCurrentRuleReSyncSet(a))return t.resyncedTokens=this.reSyncTo(a),this.outputCst?((i=this.CST_STACK[this.CST_STACK.length-1]).recoveredNode=!0,i):c();throw this.outputCst&&((i=this.CST_STACK[this.CST_STACK.length-1]).recoveredNode=!0,t.partialCstResult=i),t}if(n)return this.moveToTerminatedState(),c();throw t}throw t}finally{this.ruleFinallyStateUpdate()}}.call(this,r)}).ruleName=t,a},t.prototype.optionInternal=function(t,e){var n=this.getKeyForAutomaticLookahead(i.OPTION_IDX,e),r=this.nestedRuleBeforeClause(t,n);try{return this.optionInternalLogic(t,e,n)}finally{void 0!==r&&this.nestedRuleFinallyClause(n,r)}},t.prototype.optionInternalNoCst=function(t,e){var n=this.getKeyForAutomaticLookahead(i.OPTION_IDX,e);return this.optionInternalLogic(t,e,n)},t.prototype.optionInternalLogic=function(t,e,n){var r,i,o=this,a=this.getLookaheadFuncForOption(n,e);if(void 0!==t.DEF){if(r=t.DEF,void 0!==(i=t.GATE)){var s=a;a=function(){return i.call(o)&&s.call(o)}}}else r=t;if(!0===a.call(this))return r.call(this)},t.prototype.atLeastOneInternal=function(t,e){var n=this.getKeyForAutomaticLookahead(i.AT_LEAST_ONE_IDX,t),r=this.nestedRuleBeforeClause(e,n);try{return this.atLeastOneInternalLogic(t,e,n)}finally{void 0!==r&&this.nestedRuleFinallyClause(n,r)}},t.prototype.atLeastOneInternalNoCst=function(t,e){var n=this.getKeyForAutomaticLookahead(i.AT_LEAST_ONE_IDX,t);this.atLeastOneInternalLogic(t,e,n)},t.prototype.atLeastOneInternalLogic=function(t,e,n){var r,o,u=this,c=this.getLookaheadFuncForAtLeastOne(n,t);if(void 0!==e.DEF){if(r=e.DEF,void 0!==(o=e.GATE)){var p=c;c=function(){return o.call(u)&&p.call(u)}}}else r=e;if(!0!==c.call(this))throw this.raiseEarlyExitException(t,a.PROD_TYPE.REPETITION_MANDATORY,e.ERR_MSG);for(var l=this.doSingleRepetition(r);!0===c.call(this)&&!0===l;)l=this.doSingleRepetition(r);this.attemptInRepetitionRecovery(this.atLeastOneInternal,[t,e],c,i.AT_LEAST_ONE_IDX,t,s.NextTerminalAfterAtLeastOneWalker)},t.prototype.atLeastOneSepFirstInternal=function(t,e){var n=this.getKeyForAutomaticLookahead(i.AT_LEAST_ONE_SEP_IDX,t),r=this.nestedRuleBeforeClause(e,n);try{this.atLeastOneSepFirstInternalLogic(t,e,n)}finally{void 0!==r&&this.nestedRuleFinallyClause(n,r)}},t.prototype.atLeastOneSepFirstInternalNoCst=function(t,e){var n=this.getKeyForAutomaticLookahead(i.AT_LEAST_ONE_SEP_IDX,t);this.atLeastOneSepFirstInternalLogic(t,e,n)},t.prototype.atLeastOneSepFirstInternalLogic=function(t,e,n){var r=this,o=e.DEF,u=e.SEP;if(!0!==this.getLookaheadFuncForAtLeastOneSep(n,t).call(this))throw this.raiseEarlyExitException(t,a.PROD_TYPE.REPETITION_MANDATORY_WITH_SEPARATOR,e.ERR_MSG);o.call(this);for(var c=function(){return r.tokenMatcher(r.LA(1),u)};!0===this.tokenMatcher(this.LA(1),u);)this.CONSUME(u),o.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[t,u,c,o,s.NextTerminalAfterAtLeastOneSepWalker],c,i.AT_LEAST_ONE_SEP_IDX,t,s.NextTerminalAfterAtLeastOneSepWalker)},t.prototype.manyInternal=function(t,e){var n=this.getKeyForAutomaticLookahead(i.MANY_IDX,t),r=this.nestedRuleBeforeClause(e,n);try{return this.manyInternalLogic(t,e,n)}finally{void 0!==r&&this.nestedRuleFinallyClause(n,r)}},t.prototype.manyInternalNoCst=function(t,e){var n=this.getKeyForAutomaticLookahead(i.MANY_IDX,t);return this.manyInternalLogic(t,e,n)},t.prototype.manyInternalLogic=function(t,e,n){var r,o,a=this,u=this.getLookaheadFuncForMany(n,t);if(void 0!==e.DEF){if(r=e.DEF,void 0!==(o=e.GATE)){var c=u;u=function(){return o.call(a)&&c.call(a)}}}else r=e;for(var p=!0;!0===u.call(this)&&!0===p;)p=this.doSingleRepetition(r);this.attemptInRepetitionRecovery(this.manyInternal,[t,e],u,i.MANY_IDX,t,s.NextTerminalAfterManyWalker)},t.prototype.manySepFirstInternal=function(t,e){var n=this.getKeyForAutomaticLookahead(i.MANY_SEP_IDX,t),r=this.nestedRuleBeforeClause(e,n);try{this.manySepFirstInternalLogic(t,e,n)}finally{void 0!==r&&this.nestedRuleFinallyClause(n,r)}},t.prototype.manySepFirstInternalNoCst=function(t,e){var n=this.getKeyForAutomaticLookahead(i.MANY_SEP_IDX,t);this.manySepFirstInternalLogic(t,e,n)},t.prototype.manySepFirstInternalLogic=function(t,e,n){var r=this,o=e.DEF,a=e.SEP;if(!0===this.getLookaheadFuncForManySep(n,t).call(this)){o.call(this);for(var u=function(){return r.tokenMatcher(r.LA(1),a)};!0===this.tokenMatcher(this.LA(1),a);)this.CONSUME(a),o.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[t,a,u,o,s.NextTerminalAfterManySepWalker],u,i.MANY_SEP_IDX,t,s.NextTerminalAfterManySepWalker)}},t.prototype.repetitionSepSecondInternal=function(t,e,n,r,o){for(;n();)this.CONSUME(e),r.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[t,e,n,r,o],n,i.AT_LEAST_ONE_SEP_IDX,t,o)},t.prototype.doSingleRepetition=function(t){var e=this.getLexerPosition();return t.call(this),this.getLexerPosition()>e},t.prototype.orInternalNoCst=function(t,e){var n=r.isArray(t)?t:t.DEF,i=this.getLookaheadFuncForOr(e,n).call(this,n);if(void 0!==i)return n[i].ALT.call(this);this.raiseNoAltException(e,t.ERR_MSG)},t.prototype.orInternal=function(t,e){var n=this.getKeyForAutomaticLookahead(i.OR_IDX,e),o=this.nestedRuleBeforeClause(t,n);try{var a=r.isArray(t)?t:t.DEF,s=this.getLookaheadFuncForOr(e,a).call(this,a);if(void 0!==s){var u=a[s],c=this.nestedAltBeforeClause(u,e,i.OR_IDX,s);try{return u.ALT.call(this)}finally{void 0!==c&&this.nestedRuleFinallyClause(c.shortName,c.nestedName)}}this.raiseNoAltException(e,t.ERR_MSG)}finally{void 0!==o&&this.nestedRuleFinallyClause(n,o)}},t.prototype.ruleFinallyStateUpdate=function(){if(this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),this.cstFinallyStateUpdate(),0===this.RULE_STACK.length&&!this.isAtEndOfInput()){var t=this.LA(1),e=this.errorMessageProvider.buildNotAllInputParsedMessage({firstRedundant:t,ruleName:this.getCurrRuleFullName()});this.SAVE_ERROR(new o.NotAllInputParsedException(e,t))}},t.prototype.subruleInternal=function(t,e,n){var r;try{var i=void 0!==n?n.ARGS:void 0;return r=t.call(this,e,i),this.cstPostNonTerminal(r,void 0!==n&&void 0!==n.LABEL?n.LABEL:t.ruleName),r}catch(e){throw o.isRecognitionException(e)&&void 0!==e.partialCstResult&&(this.cstPostNonTerminal(e.partialCstResult,void 0!==n&&void 0!==n.LABEL?n.LABEL:t.ruleName),delete e.partialCstResult),e}},t.prototype.consumeInternal=function(t,e,n){var r;try{var i=this.LA(1);if(!0!==this.tokenMatcher(i,t)){var a=void 0,s=this.LA(0);throw a=void 0!==n&&n.ERR_MSG?n.ERR_MSG:this.errorMessageProvider.buildMismatchTokenMessage({expected:t,actual:i,previous:s,ruleName:this.getCurrRuleFullName()}),this.SAVE_ERROR(new o.MismatchedTokenException(a,i,s))}this.consumeToken(),r=i}catch(n){if(!this.recoveryEnabled||\"MismatchedTokenException\"!==n.name||this.isBackTracking())throw n;var u=this.getFollowsForInRuleRecovery(t,e);try{r=this.tryInRuleRecovery(t,u)}catch(t){throw t.name===c.IN_RULE_RECOVERY_EXCEPTION?n:t}}return this.cstPostTerminal(void 0!==n&&void 0!==n.LABEL?n.LABEL:t.tokenName,r),r},t.prototype.saveRecogState=function(){var t=this.errors,e=r.cloneArr(this.RULE_STACK);return{errors:t,lexerState:this.exportLexerState(),RULE_STACK:e,CST_STACK:this.CST_STACK,LAST_EXPLICIT_RULE_STACK:this.LAST_EXPLICIT_RULE_STACK}},t.prototype.reloadRecogState=function(t){this.errors=t.errors,this.importLexerState(t.lexerState),this.RULE_STACK=t.RULE_STACK},t.prototype.ruleInvocationStateUpdate=function(t,e,n){this.RULE_OCCURRENCE_STACK.push(n),this.RULE_STACK.push(t),this.cstInvocationStateUpdate(e,t)},t.prototype.isBackTracking=function(){return!r.isEmpty(this.isBackTrackingStack)},t.prototype.getCurrRuleFullName=function(){var t=this.getLastExplicitRuleShortName();return this.shortRuleNameToFull.get(t)},t.prototype.shortRuleNameToFullName=function(t){return this.shortRuleNameToFull.get(t)},t.prototype.isAtEndOfInput=function(){return this.tokenMatcher(this.LA(1),p.EOF)},t.prototype.reset=function(){this.resetLexerState(),this.isBackTrackingStack=[],this.errors=[],this.RULE_STACK=[],this.LAST_EXPLICIT_RULE_STACK=[],this.CST_STACK=[],this.RULE_OCCURRENCE_STACK=[]},t}();e.RecognizerEngine=f},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(6),i=n(0),o=n(12),a=n(3),s=function(){function t(){}return t.prototype.initErrorHandler=function(t){this._errors=[],this.errorMessageProvider=i.defaults(t.errorMessageProvider,a.DEFAULT_PARSER_CONFIG.errorMessageProvider)},t.prototype.SAVE_ERROR=function(t){if(r.isRecognitionException(t))return t.context={ruleStack:this.getHumanReadableRuleStack(),ruleOccurrenceStack:i.cloneArr(this.RULE_OCCURRENCE_STACK)},this._errors.push(t),t;throw Error(\"Trying to save an Error which is not a RecognitionException\")},Object.defineProperty(t.prototype,\"errors\",{get:function(){return i.cloneArr(this._errors)},set:function(t){this._errors=t},enumerable:!0,configurable:!0}),t.prototype.raiseEarlyExitException=function(t,e,n){for(var i=this.getCurrRuleFullName(),a=this.getGAstProductions().get(i),s=o.getLookaheadPathsForOptionalProd(t,a,e,this.maxLookahead)[0],u=[],c=1;c<this.maxLookahead;c++)u.push(this.LA(c));var p=this.errorMessageProvider.buildEarlyExitMessage({expectedIterationPaths:s,actual:u,previous:this.LA(0),customUserDescription:n,ruleName:i});throw this.SAVE_ERROR(new r.EarlyExitException(p,this.LA(1),this.LA(0)))},t.prototype.raiseNoAltException=function(t,e){for(var n=this.getCurrRuleFullName(),i=this.getGAstProductions().get(n),a=o.getLookaheadPathsForOr(t,i,this.maxLookahead),s=[],u=1;u<=this.maxLookahead;u++)s.push(this.LA(u));var c=this.LA(0),p=this.errorMessageProvider.buildNoViableAltMessage({expectedPathsPerAlt:a,actual:s,previous:c,customUserDescription:e,ruleName:this.getCurrRuleFullName()});throw this.SAVE_ERROR(new r.NoViableAltException(p,this.LA(1),c))},t}();e.ErrorHandler=s},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(13),i=n(0),o=function(){function t(){}return t.prototype.initContentAssist=function(){},t.prototype.computeContentAssist=function(t,e){var n=this.gastProductionsCache.get(t);if(i.isUndefined(n))throw Error(\"Rule ->\"+t+\"<- does not exist in this grammar.\");return r.nextPossibleTokensAfter([n],e,this.tokenMatcher,this.maxLookahead)},t.prototype.getNextPossibleTokenTypes=function(t){var e=i.first(t.ruleStack),n=this.getGAstProductions().get(e);return new r.NextAfterTokenWalker(n,t).startWalking()},t}();e.ContentAssist=o},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(17);e.createSyntaxDiagramsCode=function(t,e){var n=void 0===e?{}:e,i=n.resourceBase,o=void 0===i?\"https://unpkg.com/chevrotain@\"+r.VERSION+\"/diagrams/\":i,a=n.css;return\"\\n\\x3c!-- This is a generated file --\\x3e\\n<!DOCTYPE html>\\n<meta charset=\\\"utf-8\\\">\\n<style>\\n  body {\\n    background-color: hsl(30, 20%, 95%)\\n  }\\n</style>\\n\\n\\n<link rel='stylesheet' href='\"+(void 0===a?\"https://unpkg.com/chevrotain@\"+r.VERSION+\"/diagrams/diagrams.css\":a)+\"'>\\n\\n<script src='\"+o+\"vendor/railroad-diagrams.js'><\\/script>\\n<script src='\"+o+\"src/diagrams_builder.js'><\\/script>\\n<script src='\"+o+\"src/diagrams_behavior.js'><\\/script>\\n<script src='\"+o+'src/main.js\\'><\\/script>\\n\\n<div id=\"diagrams\" align=\"center\"></div>    \\n\\n<script>\\n    window.serializedGrammar = '+JSON.stringify(t,null,\"  \")+';\\n<\\/script>\\n\\n<script>\\n    var diagramsDiv = document.getElementById(\"diagrams\");\\n    main.drawDiagramsFromSerializedGrammar(serializedGrammar, diagramsDiv);\\n<\\/script>\\n'}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(41);e.generateParserFactory=function(t){var e=r.genWrapperFunction({name:t.name,rules:t.rules}),i=new Function(\"tokenVocabulary\",\"config\",\"chevrotain\",e);return function(e){return i(t.tokenVocabulary,e,n(18))}},e.generateParserModule=function(t){return r.genUmdModule({name:t.name,rules:t.rules})}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(0),i=n(2),o=n(1),a=\"\\n\";function s(t){return\"\\nfunction \"+t.name+\"(tokenVocabulary, config) {\\n    // invoke super constructor\\n    // No support for embedded actions currently, so we can 'hardcode'\\n    // The use of CstParser.\\n    chevrotain.CstParser.call(this, tokenVocabulary, config)\\n\\n    const $ = this\\n\\n    \"+u(t.rules)+\"\\n\\n    // very important to call this after all the rules have been defined.\\n    // otherwise the parser may not work correctly as it will lack information\\n    // derived during the self analysis phase.\\n    this.performSelfAnalysis(this)\\n}\\n\\n// inheritance as implemented in javascript in the previous decade... :(\\n\"+t.name+\".prototype = Object.create(chevrotain.CstParser.prototype)\\n\"+t.name+\".prototype.constructor = \"+t.name+\"    \\n    \"}function u(t){return r.map(t,function(t){return c(t,1)}).join(\"\\n\")}function c(t,e){var n=y(e,'$.RULE(\"'+t.name+'\", function() {')+a;return n+=m(t.definition,e+1),n+=y(e+1,\"})\")+a}function p(t,e){var n=i.tokenName(t.terminalType);return y(e,\"$.CONSUME\"+t.idx+\"(this.tokensMap.\"+n+\")\"+a)}function l(t,e){return y(e,\"$.SUBRULE\"+t.idx+\"($.\"+t.nonTerminalName+\")\"+a)}function h(t,e){var n=y(e,\"$.OR\"+t.idx+\"([\")+a;return n+=r.map(t.definition,function(t){return f(t,e+1)}).join(\",\"+a),n+=a+y(e,\"])\"+a)}function f(t,e){var n=y(e,\"{\")+a;return t.name&&(n+=y(e+1,'NAME: \"'+t.name+'\",')+a),n+=y(e+1,\"ALT: function() {\")+a,n+=m(t.definition,e+1),n+=y(e+1,\"}\")+a,n+=y(e,\"}\")}function d(t,e,n){var r=y(n,\"$.\"+(t+e.idx)+\"(\");return e.name||e.separator?(r+=\"{\"+a,e.name&&(r+=y(n+1,'NAME: \"'+e.name+'\"')+\",\"+a),e.separator&&(r+=y(n+1,\"SEP: this.tokensMap.\"+i.tokenName(e.separator))+\",\"+a),r+=\"DEF: \"+E(e.definition,n+2)+a,r+=y(n,\"}\")+a):r+=E(e.definition,n+1),r+=y(n,\")\")+a}function E(t,e){var n=\"function() {\"+a;return n+=m(t,e),n+=y(e,\"}\")+a}function m(t,e){var n=\"\";return r.forEach(t,function(t){n+=function(t,e){if(t instanceof o.NonTerminal)return l(t,e);if(t instanceof o.Option)return d(\"OPTION\",t,e);if(t instanceof o.RepetitionMandatory)return d(\"AT_LEAST_ONE\",t,e);if(t instanceof o.RepetitionMandatoryWithSeparator)return d(\"AT_LEAST_ONE_SEP\",t,e);if(t instanceof o.RepetitionWithSeparator)return d(\"MANY_SEP\",t,e);if(t instanceof o.Repetition)return d(\"MANY\",t,e);if(t instanceof o.Alternation)return h(t,e);if(t instanceof o.Terminal)return p(t,e);if(t instanceof o.Flat)return m(t.definition,e);throw Error(\"non exhaustive match\")}(t,e+1)}),n}function y(t,e){return Array(4*t+1).join(\" \")+e}e.genUmdModule=function(t){return\"\\n(function (root, factory) {\\n    if (typeof define === 'function' && define.amd) {\\n        // AMD. Register as an anonymous module.\\n        define(['chevrotain'], factory);\\n    } else if (typeof module === 'object' && module.exports) {\\n        // Node. Does not work with strict CommonJS, but\\n        // only CommonJS-like environments that support module.exports,\\n        // like Node.\\n        module.exports = factory(require('chevrotain'));\\n    } else {\\n        // Browser globals (root is window)\\n        root.returnExports = factory(root.b);\\n    }\\n}(typeof self !== 'undefined' ? self : this, function (chevrotain) {\\n\\n\"+s(t)+\"\\n    \\nreturn {\\n    \"+t.name+\": \"+t.name+\" \\n}\\n}));\\n\"},e.genWrapperFunction=function(t){return\"    \\n\"+s(t)+\"\\nreturn new \"+t.name+\"(tokenVocabulary, config)    \\n\"},e.genClass=s,e.genAllRules=u,e.genRule=c,e.genTerminal=p,e.genNonTerminal=l,e.genAlternation=h,e.genSingleAlt=f}])});\nvar chevrotain = window.chevrotain;\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../../next/dist/compiled/webpack/harmony-module.js */ \"./node_modules/next/dist/compiled/webpack/harmony-module.js\")(module)))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL3RocmVlL2V4YW1wbGVzL2pzbS9saWJzL2NoZXZyb3RhaW4ubW9kdWxlLm1pbi5qcz85YjVjIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUNBLGVBQWUsZ0dBQWdHLDJHQUFVLDRGQUE0RixvREFBb0QsbUJBQW1CLFNBQVMsY0FBYyw0QkFBNEIsWUFBWSxxQkFBcUIsMkRBQTJELHVDQUF1QyxxQ0FBcUMsb0JBQW9CLEVBQUUsaUJBQWlCLDRGQUE0RixlQUFlLHdDQUF3QyxTQUFTLEVBQUUsbUJBQW1CLDhCQUE4QixxREFBcUQsMEJBQTBCLDZDQUE2QyxzQkFBc0IsNkRBQTZELFlBQVksZUFBZSxTQUFTLGlCQUFpQixpQ0FBaUMsaUJBQWlCLFlBQVksVUFBVSxzQkFBc0IsbUJBQW1CLGlEQUFpRCxrQkFBa0Isa0JBQWtCLGFBQWEsY0FBYyx1QkFBdUIsY0FBYyxpQ0FBaUMsY0FBYyxrQ0FBa0MsV0FBVyxvQkFBb0IsU0FBUyxnQkFBZ0Isd0JBQXdCLFdBQVcsS0FBSyxXQUFXLDRCQUE0QixTQUFTLGdCQUFnQixpQkFBaUIsV0FBVyxnQ0FBZ0MsU0FBUyxjQUFjLGlCQUFpQixXQUFXLEtBQUssV0FBVyw0Q0FBNEMsU0FBUyxjQUFjLHdCQUF3QixjQUFjLGtCQUFrQix1QkFBdUIsZ0JBQWdCLGdDQUFnQyxXQUFXLHdCQUF3QixLQUFLLDZDQUE2QyxXQUFXLFFBQVEsV0FBVyxLQUFLLGtCQUFrQixtQkFBbUIsY0FBYyx5QkFBeUIsY0FBYyxrQkFBa0IsY0FBYyw2QkFBNkIsZ0JBQWdCLDZDQUE2QyxnQkFBZ0IsK0NBQStDLGdCQUFnQixTQUFTLGdDQUFnQyxXQUFXLEtBQUssV0FBVywwQkFBMEIsU0FBUyxnQkFBZ0IsdUJBQXVCLFlBQVksRUFBRSxnQkFBZ0IsNkJBQTZCLEtBQUssV0FBVyxLQUFLLGtCQUFrQixlQUFlLFNBQVMsZ0JBQWdCLGtDQUFrQyxnQkFBZ0IsZ0NBQWdD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S0FBNEssMkNBQTJDLGdCQUFnQixtQkFBbUIsSUFBSSwwQkFBMEIsS0FBSyxnQkFBZ0IsU0FBUywrQkFBK0IsaUJBQWlCLDRDQUE0QyxnREFBZ0QsbUVBQW1FLG9GQUFvRixtRUFBbUUsa0RBQWtELDRDQUE0Qyx5Q0FBeUMsZ0RBQWdELG9DQUFvQyxRQUFRLElBQUksZ0JBQWdCLGdDQUFnQywyQkFBMkIsb0NBQW9DLHVEQUF1RCw0RkFBNEYsT0FBTyx5REFBeUQsb05BQW9OLE9BQU8sT0FBTyw0RkFBNEYsT0FBTyxHQUFHLG1FQUFtRSw0QkFBNEIsZ0NBQWdDLEdBQUcsR0FBRyxJQUFJLGtDQUFrQyw2RUFBNkUsaUhBQWlILEdBQUc7QUFDNXJvSiIsImZpbGUiOiIuL25vZGVfbW9kdWxlcy90aHJlZS9leGFtcGxlcy9qc20vbGlicy9jaGV2cm90YWluLm1vZHVsZS5taW4uanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiEgY2hldnJvdGFpbiAtIHY0LjYuMCAqL1xuIWZ1bmN0aW9uKHQsZSl7XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHMmJlwib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGU/bW9kdWxlLmV4cG9ydHM9ZSgpOlwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoXCJjaGV2cm90YWluXCIsW10sZSk6XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHM/ZXhwb3J0cy5jaGV2cm90YWluPWUoKTp0LmNoZXZyb3RhaW49ZSgpfShcInVuZGVmaW5lZFwiIT10eXBlb2Ygc2VsZj9zZWxmOnVuZGVmaW5lZCxmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbih0KXt2YXIgZT17fTtmdW5jdGlvbiBuKHIpe2lmKGVbcl0pcmV0dXJuIGVbcl0uZXhwb3J0czt2YXIgaT1lW3JdPXtpOnIsbDohMSxleHBvcnRzOnt9fTtyZXR1cm4gdFtyXS5jYWxsKGkuZXhwb3J0cyxpLGkuZXhwb3J0cyxuKSxpLmw9ITAsaS5leHBvcnRzfXJldHVybiBuLm09dCxuLmM9ZSxuLmQ9ZnVuY3Rpb24odCxlLHIpe24ubyh0LGUpfHxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxlLHtlbnVtZXJhYmxlOiEwLGdldDpyfSl9LG4ucj1mdW5jdGlvbih0KXtcInVuZGVmaW5lZFwiIT10eXBlb2YgU3ltYm9sJiZTeW1ib2wudG9TdHJpbmdUYWcmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFN5bWJvbC50b1N0cmluZ1RhZyx7dmFsdWU6XCJNb2R1bGVcIn0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pfSxuLnQ9ZnVuY3Rpb24odCxlKXtpZigxJmUmJih0PW4odCkpLDgmZSlyZXR1cm4gdDtpZig0JmUmJlwib2JqZWN0XCI9PXR5cGVvZiB0JiZ0JiZ0Ll9fZXNNb2R1bGUpcmV0dXJuIHQ7dmFyIHI9T2JqZWN0LmNyZWF0ZShudWxsKTtpZihuLnIociksT2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJkZWZhdWx0XCIse2VudW1lcmFibGU6ITAsdmFsdWU6dH0pLDImZSYmXCJzdHJpbmdcIiE9dHlwZW9mIHQpZm9yKHZhciBpIGluIHQpbi5kKHIsaSxmdW5jdGlvbihlKXtyZXR1cm4gdFtlXX0uYmluZChudWxsLGkpKTtyZXR1cm4gcn0sbi5uPWZ1bmN0aW9uKHQpe3ZhciBlPXQmJnQuX19lc01vZHVsZT9mdW5jdGlvbigpe3JldHVybiB0LmRlZmF1bHR9OmZ1bmN0aW9uKCl7cmV0dXJuIHR9O3JldHVybiBuLmQoZSxcImFcIixlKSxlfSxuLm89ZnVuY3Rpb24odCxlKXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsZSl9LG4ucD1cIlwiLG4obi5zPTE4KX0oW2Z1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiByKHQpe3JldHVybiB0JiYwPT09dC5sZW5ndGh9ZnVuY3Rpb24gaSh0KXtyZXR1cm4gbnVsbD09dD9bXTpPYmplY3Qua2V5cyh0KX1mdW5jdGlvbiBvKHQpe2Zvcih2YXIgZT1bXSxuPU9iamVjdC5rZXlzKHQpLHI9MDtyPG4ubGVuZ3RoO3IrKyllLnB1c2godFtuW3JdXSk7cmV0dXJuIGV9ZnVuY3Rpb24gYSh0LGUpe2Zvcih2YXIgbj1bXSxyPWkodCksbz0wO288ci5sZW5ndGg7bysrKXt2YXIgYT1yW29dO24ucHVzaChlLmNhbGwobnVsbCx0W2FdLGEpKX1yZXR1cm4gbn1mdW5jdGlvbiBzKHQsZSl7Zm9yKHZhciBuPVtdLHI9MDtyPHQubGVuZ3RoO3IrKyluLnB1c2goZS5jYWxsKG51bGwsdFtyXSxyKSk7cmV0dXJuIG59ZnVuY3Rpb24gdSh0KXtmb3IodmFyIGU9W10sbj0wO248dC5sZW5ndGg7bisrKXt2YXIgcj10W25dO0FycmF5LmlzQXJyYXkocik/ZT1lLmNvbmNhdCh1KHIpKTplLnB1c2gocil9cmV0dXJuIGV9ZnVuY3Rpb24gYyh0KXtyZXR1cm4gcih0KT92b2lkIDA6dFswXX1mdW5jdGlvbiBwKHQpe3ZhciBlPXQmJnQubGVuZ3RoO3JldHVybiBlP3RbZS0xXTp2b2lkIDB9ZnVuY3Rpb24gbCh0LGUpe2lmKEFycmF5LmlzQXJyYXkodCkpZm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspZS5jYWxsKG51bGwsdFtuXSxuKTtlbHNle2lmKCFDKHQpKXRocm93IEVycm9yKFwibm9uIGV4aGF1c3RpdmUgbWF0Y2hcIik7dmFyIHI9aSh0KTtmb3Iobj0wO248ci5sZW5ndGg7bisrKXt2YXIgbz1yW25dLGE9dFtvXTtlLmNhbGwobnVsbCxhLG8pfX19ZnVuY3Rpb24gaCh0KXtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgdH1mdW5jdGlvbiBmKHQpe3JldHVybiB2b2lkIDA9PT10fWZ1bmN0aW9uIGQodCl7cmV0dXJuIHQgaW5zdGFuY2VvZiBGdW5jdGlvbn1mdW5jdGlvbiBFKHQsZSl7cmV0dXJuIHZvaWQgMD09PWUmJihlPTEpLHQuc2xpY2UoZSx0Lmxlbmd0aCl9ZnVuY3Rpb24gbSh0LGUpe3JldHVybiB2b2lkIDA9PT1lJiYoZT0xKSx0LnNsaWNlKDAsdC5sZW5ndGgtZSl9ZnVuY3Rpb24geSh0LGUpe3ZhciBuPVtdO2lmKEFycmF5LmlzQXJyYXkodCkpZm9yKHZhciByPTA7cjx0Lmxlbmd0aDtyKyspe3ZhciBpPXRbcl07ZS5jYWxsKG51bGwsaSkmJm4ucHVzaChpKX1yZXR1cm4gbn1mdW5jdGlvbiBUKHQsZSl7cmV0dXJuIHkodCxmdW5jdGlvbih0KXtyZXR1cm4hZSh0KX0pfWZ1bmN0aW9uIHYodCxlKXtmb3IodmFyIG49T2JqZWN0LmtleXModCkscj17fSxpPTA7aTxuLmxlbmd0aDtpKyspe3ZhciBvPW5baV0sYT10W29dO2UoYSkmJihyW29dPWEpfXJldHVybiByfWZ1bmN0aW9uIGcodCxlKXtyZXR1cm4hIUModCkmJnQuaGFzT3duUHJvcGVydHkoZSl9ZnVuY3Rpb24gXyh0LGUpe3JldHVybiB2b2lkIDAhPT1OKHQsZnVuY3Rpb24odCl7cmV0dXJuIHQ9PT1lfSl9ZnVuY3Rpb24gUih0KXtmb3IodmFyIGU9W10sbj0wO248dC5sZW5ndGg7bisrKWUucHVzaCh0W25dKTtyZXR1cm4gZX1mdW5jdGlvbiBBKHQpe3ZhciBlPXt9O2Zvcih2YXIgbiBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LG4pJiYoZVtuXT10W25dKTtyZXR1cm4gZX1mdW5jdGlvbiBOKHQsZSl7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspe3ZhciByPXRbbl07aWYoZS5jYWxsKG51bGwscikpcmV0dXJuIHJ9fWZ1bmN0aW9uIE8odCxlKXtmb3IodmFyIG49W10scj0wO3I8dC5sZW5ndGg7cisrKXt2YXIgaT10W3JdO2UuY2FsbChudWxsLGkpJiZuLnB1c2goaSl9cmV0dXJuIG59ZnVuY3Rpb24gUyh0LGUsbil7Zm9yKHZhciByPUFycmF5LmlzQXJyYXkodCksYT1yP3Q6byh0KSxzPXI/W106aSh0KSx1PW4sYz0wO2M8YS5sZW5ndGg7YysrKXU9ZS5jYWxsKG51bGwsdSxhW2NdLHI/YzpzW2NdKTtyZXR1cm4gdX1mdW5jdGlvbiBJKHQpe3JldHVybiBUKHQsZnVuY3Rpb24odCl7cmV0dXJuIG51bGw9PXR9KX1mdW5jdGlvbiBMKHQsZSl7dm9pZCAwPT09ZSYmKGU9ZnVuY3Rpb24odCl7cmV0dXJuIHR9KTt2YXIgbj1bXTtyZXR1cm4gUyh0LGZ1bmN0aW9uKHQscil7dmFyIGk9ZShyKTtyZXR1cm4gXyhuLGkpP3Q6KG4ucHVzaChpKSx0LmNvbmNhdChyKSl9LFtdKX1mdW5jdGlvbiBrKHQpe2Zvcih2YXIgZT1bXSxuPTE7bjxhcmd1bWVudHMubGVuZ3RoO24rKyllW24tMV09YXJndW1lbnRzW25dO3ZhciByPVtudWxsXS5jb25jYXQoZSk7cmV0dXJuIEZ1bmN0aW9uLmJpbmQuYXBwbHkodCxyKX1mdW5jdGlvbiBQKHQpe3JldHVybiBBcnJheS5pc0FycmF5KHQpfWZ1bmN0aW9uIHgodCl7cmV0dXJuIHQgaW5zdGFuY2VvZiBSZWdFeHB9ZnVuY3Rpb24gQyh0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIE9iamVjdH1mdW5jdGlvbiBNKHQsZSl7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspaWYoIWUodFtuXSxuKSlyZXR1cm4hMTtyZXR1cm4hMH1mdW5jdGlvbiBGKHQsZSl7cmV0dXJuIFQodCxmdW5jdGlvbih0KXtyZXR1cm4gXyhlLHQpfSl9ZnVuY3Rpb24gYih0LGUpe2Zvcih2YXIgbj0wO248dC5sZW5ndGg7bisrKWlmKGUodFtuXSkpcmV0dXJuITA7cmV0dXJuITF9ZnVuY3Rpb24gRCh0LGUpe2Zvcih2YXIgbj0wO248dC5sZW5ndGg7bisrKWlmKHRbbl09PT1lKXJldHVybiBuO3JldHVybi0xfWZ1bmN0aW9uIHcodCxlKXt2YXIgbj1SKHQpO3JldHVybiBuLnNvcnQoZnVuY3Rpb24odCxuKXtyZXR1cm4gZSh0KS1lKG4pfSksbn1mdW5jdGlvbiBVKHQsZSl7aWYodC5sZW5ndGghPT1lLmxlbmd0aCl0aHJvdyBFcnJvcihcImNhbid0IHppcE9iamVjdCB3aXRoIGRpZmZlcmVudCBudW1iZXIgb2Yga2V5cyBhbmQgdmFsdWVzIVwiKTtmb3IodmFyIG49e30scj0wO3I8dC5sZW5ndGg7cisrKW5bdFtyXV09ZVtyXTtyZXR1cm4gbn1mdW5jdGlvbiBHKHQpe2Zvcih2YXIgZT1bXSxuPTE7bjxhcmd1bWVudHMubGVuZ3RoO24rKyllW24tMV09YXJndW1lbnRzW25dO2Zvcih2YXIgcj0wO3I8ZS5sZW5ndGg7cisrKWZvcih2YXIgbz1lW3JdLGE9aShvKSxzPTA7czxhLmxlbmd0aDtzKyspe3ZhciB1PWFbc107dFt1XT1vW3VdfXJldHVybiB0fWZ1bmN0aW9uIEIodCl7Zm9yKHZhciBlPVtdLG49MTtuPGFyZ3VtZW50cy5sZW5ndGg7bisrKWVbbi0xXT1hcmd1bWVudHNbbl07Zm9yKHZhciByPTA7cjxlLmxlbmd0aDtyKyspe3ZhciBvPWVbcl07aWYoIWYobykpZm9yKHZhciBhPWkobykscz0wO3M8YS5sZW5ndGg7cysrKXt2YXIgdT1hW3NdO2codCx1KXx8KHRbdV09b1t1XSl9fXJldHVybiB0fWZ1bmN0aW9uIEsoKXtmb3IodmFyIHQ9W10sZT0wO2U8YXJndW1lbnRzLmxlbmd0aDtlKyspdFtlXT1hcmd1bWVudHNbZV07cmV0dXJuIEIuYXBwbHkobnVsbCxbe31dLmNvbmNhdCh0KSl9ZnVuY3Rpb24gVyh0LGUpe3ZhciBuPXt9O3JldHVybiBsKHQsZnVuY3Rpb24odCl7dmFyIHI9ZSh0KSxpPW5bcl07aT9pLnB1c2godCk6bltyXT1bdF19KSxufWZ1bmN0aW9uIGoodCxlKXtmb3IodmFyIG49QSh0KSxyPWkoZSksbz0wO288ci5sZW5ndGg7bysrKXt2YXIgYT1yW29dLHM9ZVthXTtuW2FdPXN9cmV0dXJuIG59ZnVuY3Rpb24gVigpe31mdW5jdGlvbiBZKHQpe3JldHVybiB0fWZ1bmN0aW9uIEgodCl7Zm9yKHZhciBlPVtdLG49MDtuPHQubGVuZ3RoO24rKyl7dmFyIHI9dFtuXTtlLnB1c2godm9pZCAwIT09cj9yOnZvaWQgMCl9cmV0dXJuIGV9ZnVuY3Rpb24gWCh0KXtjb25zb2xlJiZjb25zb2xlLmVycm9yJiZjb25zb2xlLmVycm9yKFwiRXJyb3I6IFwiK3QpfWZ1bmN0aW9uIHoodCl7Y29uc29sZSYmY29uc29sZS53YXJuJiZjb25zb2xlLndhcm4oXCJXYXJuaW5nOiBcIit0KX1mdW5jdGlvbiBxKCl7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgTWFwfWZ1bmN0aW9uICQodCxlKXtlLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIG49ZS5wcm90b3R5cGU7T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMobikuZm9yRWFjaChmdW5jdGlvbihyKXtpZihcImNvbnN0cnVjdG9yXCIhPT1yKXt2YXIgaT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG4scik7aSYmKGkuZ2V0fHxpLnNldCk/T2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLHIsaSk6dC5wcm90b3R5cGVbcl09ZS5wcm90b3R5cGVbcl19fSl9KX1mdW5jdGlvbiBaKHQpe2Z1bmN0aW9uIGUoKXt9ZS5wcm90b3R5cGU9dDt2YXIgbj1uZXcgZTtmdW5jdGlvbiByKCl7cmV0dXJuIHR5cGVvZiBuLmJhcn1yZXR1cm4gcigpLHIoKSx0fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGUuaXNFbXB0eT1yLGUua2V5cz1pLGUudmFsdWVzPW8sZS5tYXBWYWx1ZXM9YSxlLm1hcD1zLGUuZmxhdHRlbj11LGUuZmlyc3Q9YyxlLmxhc3Q9cCxlLmZvckVhY2g9bCxlLmlzU3RyaW5nPWgsZS5pc1VuZGVmaW5lZD1mLGUuaXNGdW5jdGlvbj1kLGUuZHJvcD1FLGUuZHJvcFJpZ2h0PW0sZS5maWx0ZXI9eSxlLnJlamVjdD1ULGUucGljaz12LGUuaGFzPWcsZS5jb250YWlucz1fLGUuY2xvbmVBcnI9UixlLmNsb25lT2JqPUEsZS5maW5kPU4sZS5maW5kQWxsPU8sZS5yZWR1Y2U9UyxlLmNvbXBhY3Q9SSxlLnVuaXE9TCxlLnBhcnRpYWw9ayxlLmlzQXJyYXk9UCxlLmlzUmVnRXhwPXgsZS5pc09iamVjdD1DLGUuZXZlcnk9TSxlLmRpZmZlcmVuY2U9RixlLnNvbWU9YixlLmluZGV4T2Y9RCxlLnNvcnRCeT13LGUuemlwT2JqZWN0PVUsZS5hc3NpZ249RyxlLmFzc2lnbk5vT3ZlcndyaXRlPUIsZS5kZWZhdWx0cz1LLGUuZ3JvdXBCeT1XLGUubWVyZ2U9aixlLk5PT1A9VixlLklERU5USVRZPVksZS5wYWNrQXJyYXk9SCxlLlBSSU5UX0VSUk9SPVgsZS5QUklOVF9XQVJOSU5HPXosZS5pc0VTMjAxNU1hcFN1cHBvcnRlZD1xLGUuYXBwbHlNaXhpbnM9JCxlLnRvRmFzdFByb3BlcnRpZXM9Wn0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO3ZhciByLGk9dGhpcyYmdGhpcy5fX2V4dGVuZHN8fChyPWZ1bmN0aW9uKHQsZSl7cmV0dXJuKHI9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKHQsZSl7dC5fX3Byb3RvX189ZX18fGZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuIGluIGUpZS5oYXNPd25Qcm9wZXJ0eShuKSYmKHRbbl09ZVtuXSl9KSh0LGUpfSxmdW5jdGlvbih0LGUpe2Z1bmN0aW9uIG4oKXt0aGlzLmNvbnN0cnVjdG9yPXR9cih0LGUpLHQucHJvdG90eXBlPW51bGw9PT1lP09iamVjdC5jcmVhdGUoZSk6KG4ucHJvdG90eXBlPWUucHJvdG90eXBlLG5ldyBuKX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBvPW4oMCksYT1uKDIpLHM9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe3RoaXMuZGVmaW5pdGlvbj10fXJldHVybiB0LnByb3RvdHlwZS5hY2NlcHQ9ZnVuY3Rpb24odCl7dC52aXNpdCh0aGlzKSxvLmZvckVhY2godGhpcy5kZWZpbml0aW9uLGZ1bmN0aW9uKGUpe2UuYWNjZXB0KHQpfSl9LHR9KCk7ZS5BYnN0cmFjdFByb2R1Y3Rpb249czt2YXIgdT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3ZhciBuPXQuY2FsbCh0aGlzLFtdKXx8dGhpcztyZXR1cm4gbi5pZHg9MSxvLmFzc2lnbihuLG8ucGljayhlLGZ1bmN0aW9uKHQpe3JldHVybiB2b2lkIDAhPT10fSkpLG59cmV0dXJuIGkoZSx0KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJkZWZpbml0aW9uXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB2b2lkIDAhPT10aGlzLnJlZmVyZW5jZWRSdWxlP3RoaXMucmVmZXJlbmNlZFJ1bGUuZGVmaW5pdGlvbjpbXX0sc2V0OmZ1bmN0aW9uKHQpe30sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS5hY2NlcHQ9ZnVuY3Rpb24odCl7dC52aXNpdCh0aGlzKX0sZX0ocyk7ZS5Ob25UZXJtaW5hbD11O3ZhciBjPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSl7dmFyIG49dC5jYWxsKHRoaXMsZS5kZWZpbml0aW9uKXx8dGhpcztyZXR1cm4gbi5vcmdUZXh0PVwiXCIsby5hc3NpZ24obixvLnBpY2soZSxmdW5jdGlvbih0KXtyZXR1cm4gdm9pZCAwIT09dH0pKSxufXJldHVybiBpKGUsdCksZX0ocyk7ZS5SdWxlPWM7dmFyIHA9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlKXt2YXIgbj10LmNhbGwodGhpcyxlLmRlZmluaXRpb24pfHx0aGlzO3JldHVybiBvLmFzc2lnbihuLG8ucGljayhlLGZ1bmN0aW9uKHQpe3JldHVybiB2b2lkIDAhPT10fSkpLG59cmV0dXJuIGkoZSx0KSxlfShzKTtlLkZsYXQ9cDt2YXIgbD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3ZhciBuPXQuY2FsbCh0aGlzLGUuZGVmaW5pdGlvbil8fHRoaXM7cmV0dXJuIG4uaWR4PTEsby5hc3NpZ24obixvLnBpY2soZSxmdW5jdGlvbih0KXtyZXR1cm4gdm9pZCAwIT09dH0pKSxufXJldHVybiBpKGUsdCksZX0ocyk7ZS5PcHRpb249bDt2YXIgaD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3ZhciBuPXQuY2FsbCh0aGlzLGUuZGVmaW5pdGlvbil8fHRoaXM7cmV0dXJuIG4uaWR4PTEsby5hc3NpZ24obixvLnBpY2soZSxmdW5jdGlvbih0KXtyZXR1cm4gdm9pZCAwIT09dH0pKSxufXJldHVybiBpKGUsdCksZX0ocyk7ZS5SZXBldGl0aW9uTWFuZGF0b3J5PWg7dmFyIGY9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlKXt2YXIgbj10LmNhbGwodGhpcyxlLmRlZmluaXRpb24pfHx0aGlzO3JldHVybiBuLmlkeD0xLG8uYXNzaWduKG4sby5waWNrKGUsZnVuY3Rpb24odCl7cmV0dXJuIHZvaWQgMCE9PXR9KSksbn1yZXR1cm4gaShlLHQpLGV9KHMpO2UuUmVwZXRpdGlvbk1hbmRhdG9yeVdpdGhTZXBhcmF0b3I9Zjt2YXIgZD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3ZhciBuPXQuY2FsbCh0aGlzLGUuZGVmaW5pdGlvbil8fHRoaXM7cmV0dXJuIG4uaWR4PTEsby5hc3NpZ24obixvLnBpY2soZSxmdW5jdGlvbih0KXtyZXR1cm4gdm9pZCAwIT09dH0pKSxufXJldHVybiBpKGUsdCksZX0ocyk7ZS5SZXBldGl0aW9uPWQ7dmFyIEU9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlKXt2YXIgbj10LmNhbGwodGhpcyxlLmRlZmluaXRpb24pfHx0aGlzO3JldHVybiBuLmlkeD0xLG8uYXNzaWduKG4sby5waWNrKGUsZnVuY3Rpb24odCl7cmV0dXJuIHZvaWQgMCE9PXR9KSksbn1yZXR1cm4gaShlLHQpLGV9KHMpO2UuUmVwZXRpdGlvbldpdGhTZXBhcmF0b3I9RTt2YXIgbT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3ZhciBuPXQuY2FsbCh0aGlzLGUuZGVmaW5pdGlvbil8fHRoaXM7cmV0dXJuIG4uaWR4PTEsby5hc3NpZ24obixvLnBpY2soZSxmdW5jdGlvbih0KXtyZXR1cm4gdm9pZCAwIT09dH0pKSxufXJldHVybiBpKGUsdCksZX0ocyk7ZS5BbHRlcm5hdGlvbj1tO3ZhciB5PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXt0aGlzLmlkeD0xLG8uYXNzaWduKHRoaXMsby5waWNrKHQsZnVuY3Rpb24odCl7cmV0dXJuIHZvaWQgMCE9PXR9KSl9cmV0dXJuIHQucHJvdG90eXBlLmFjY2VwdD1mdW5jdGlvbih0KXt0LnZpc2l0KHRoaXMpfSx0fSgpO2Z1bmN0aW9uIFQodCl7ZnVuY3Rpb24gZSh0KXtyZXR1cm4gby5tYXAodCxUKX1pZih0IGluc3RhbmNlb2YgdSlyZXR1cm57dHlwZTpcIk5vblRlcm1pbmFsXCIsbmFtZTp0Lm5vblRlcm1pbmFsTmFtZSxpZHg6dC5pZHh9O2lmKHQgaW5zdGFuY2VvZiBwKXJldHVybnt0eXBlOlwiRmxhdFwiLGRlZmluaXRpb246ZSh0LmRlZmluaXRpb24pfTtpZih0IGluc3RhbmNlb2YgbClyZXR1cm57dHlwZTpcIk9wdGlvblwiLGlkeDp0LmlkeCxkZWZpbml0aW9uOmUodC5kZWZpbml0aW9uKX07aWYodCBpbnN0YW5jZW9mIGgpcmV0dXJue3R5cGU6XCJSZXBldGl0aW9uTWFuZGF0b3J5XCIsbmFtZTp0Lm5hbWUsaWR4OnQuaWR4LGRlZmluaXRpb246ZSh0LmRlZmluaXRpb24pfTtpZih0IGluc3RhbmNlb2YgZilyZXR1cm57dHlwZTpcIlJlcGV0aXRpb25NYW5kYXRvcnlXaXRoU2VwYXJhdG9yXCIsbmFtZTp0Lm5hbWUsaWR4OnQuaWR4LHNlcGFyYXRvcjpUKG5ldyB5KHt0ZXJtaW5hbFR5cGU6dC5zZXBhcmF0b3J9KSksZGVmaW5pdGlvbjplKHQuZGVmaW5pdGlvbil9O2lmKHQgaW5zdGFuY2VvZiBFKXJldHVybnt0eXBlOlwiUmVwZXRpdGlvbldpdGhTZXBhcmF0b3JcIixuYW1lOnQubmFtZSxpZHg6dC5pZHgsc2VwYXJhdG9yOlQobmV3IHkoe3Rlcm1pbmFsVHlwZTp0LnNlcGFyYXRvcn0pKSxkZWZpbml0aW9uOmUodC5kZWZpbml0aW9uKX07aWYodCBpbnN0YW5jZW9mIGQpcmV0dXJue3R5cGU6XCJSZXBldGl0aW9uXCIsbmFtZTp0Lm5hbWUsaWR4OnQuaWR4LGRlZmluaXRpb246ZSh0LmRlZmluaXRpb24pfTtpZih0IGluc3RhbmNlb2YgbSlyZXR1cm57dHlwZTpcIkFsdGVybmF0aW9uXCIsbmFtZTp0Lm5hbWUsaWR4OnQuaWR4LGRlZmluaXRpb246ZSh0LmRlZmluaXRpb24pfTtpZih0IGluc3RhbmNlb2YgeSl7dmFyIG49e3R5cGU6XCJUZXJtaW5hbFwiLG5hbWU6YS50b2tlbk5hbWUodC50ZXJtaW5hbFR5cGUpLGxhYmVsOmEudG9rZW5MYWJlbCh0LnRlcm1pbmFsVHlwZSksaWR4OnQuaWR4fSxyPXQudGVybWluYWxUeXBlLlBBVFRFUk47cmV0dXJuIHQudGVybWluYWxUeXBlLlBBVFRFUk4mJihuLnBhdHRlcm49by5pc1JlZ0V4cChyKT9yLnNvdXJjZTpyKSxufWlmKHQgaW5zdGFuY2VvZiBjKXJldHVybnt0eXBlOlwiUnVsZVwiLG5hbWU6dC5uYW1lLG9yZ1RleHQ6dC5vcmdUZXh0LGRlZmluaXRpb246ZSh0LmRlZmluaXRpb24pfTt0aHJvdyBFcnJvcihcIm5vbiBleGhhdXN0aXZlIG1hdGNoXCIpfWUuVGVybWluYWw9eSxlLnNlcmlhbGl6ZUdyYW1tYXI9ZnVuY3Rpb24odCl7cmV0dXJuIG8ubWFwKHQsVCl9LGUuc2VyaWFsaXplUHJvZHVjdGlvbj1UfSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIHI9bigwKSxpPW4oNCksbz1uKDE1KSxhPW4oNyk7ZnVuY3Rpb24gcyh0KXtyZXR1cm4gci5pc1N0cmluZyh0LkxBQkVMKSYmXCJcIiE9PXQuTEFCRUx9ZnVuY3Rpb24gdSh0KXtyZXR1cm4gci5pc09iamVjdCh0KSYmdC5oYXNPd25Qcm9wZXJ0eShcInRva2VuTmFtZVwiKSYmci5pc1N0cmluZyh0LnRva2VuTmFtZSk/dC50b2tlbk5hbWU6aS5mdW5jdGlvbk5hbWUodCl9ZS50b2tlbkxhYmVsPWZ1bmN0aW9uKHQpe3JldHVybiBzKHQpP3QuTEFCRUw6dSh0KX0sZS5oYXNUb2tlbkxhYmVsPXMsZS50b2tlbk5hbWU9dTt2YXIgYz1cInBhcmVudFwiLHA9XCJjYXRlZ29yaWVzXCIsbD1cImxhYmVsXCIsaD1cImdyb3VwXCIsZj1cInB1c2hfbW9kZVwiLGQ9XCJwb3BfbW9kZVwiLEU9XCJsb25nZXJfYWx0XCIsbT1cImxpbmVfYnJlYWtzXCIseT1cInN0YXJ0X2NoYXJzX2hpbnRcIjtmdW5jdGlvbiBUKHQpe3JldHVybiBmdW5jdGlvbih0KXt2YXIgZT10Lm5hbWUsbj10LnBhdHRlcm4sbz17fTtpLmRlZmluZU5hbWVQcm9wKG8sZSl8fChvLnRva2VuTmFtZT1lKTtyLmlzVW5kZWZpbmVkKG4pfHwoby5QQVRURVJOPW4pO2lmKHIuaGFzKHQsYykpdGhyb3dcIlRoZSBwYXJlbnQgcHJvcGVydHkgaXMgbm8gbG9uZ2VyIHN1cHBvcnRlZC5cXG5TZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9TQVAvY2hldnJvdGFpbi9pc3N1ZXMvNTY0I2lzc3VlY29tbWVudC0zNDkwNjIzNDYgZm9yIGRldGFpbHMuXCI7ci5oYXModCxwKSYmKG8uQ0FURUdPUklFUz10W3BdKTthLmF1Z21lbnRUb2tlblR5cGVzKFtvXSksci5oYXModCxsKSYmKG8uTEFCRUw9dFtsXSk7ci5oYXModCxoKSYmKG8uR1JPVVA9dFtoXSk7ci5oYXModCxkKSYmKG8uUE9QX01PREU9dFtkXSk7ci5oYXModCxmKSYmKG8uUFVTSF9NT0RFPXRbZl0pO3IuaGFzKHQsRSkmJihvLkxPTkdFUl9BTFQ9dFtFXSk7ci5oYXModCxtKSYmKG8uTElORV9CUkVBS1M9dFttXSk7ci5oYXModCx5KSYmKG8uU1RBUlRfQ0hBUlNfSElOVD10W3ldKTtyZXR1cm4gb30odCl9ZS5jcmVhdGVUb2tlbj1ULGUuRU9GPVQoe25hbWU6XCJFT0ZcIixwYXR0ZXJuOm8uTGV4ZXIuTkF9KSxhLmF1Z21lbnRUb2tlblR5cGVzKFtlLkVPRl0pLGUuY3JlYXRlVG9rZW5JbnN0YW5jZT1mdW5jdGlvbih0LGUsbixyLGksbyxhLHMpe3JldHVybntpbWFnZTplLHN0YXJ0T2Zmc2V0Om4sZW5kT2Zmc2V0OnIsc3RhcnRMaW5lOmksZW5kTGluZTpvLHN0YXJ0Q29sdW1uOmEsZW5kQ29sdW1uOnMsdG9rZW5UeXBlSWR4OnQudG9rZW5UeXBlSWR4LHRva2VuVHlwZTp0fX0sZS50b2tlbk1hdGNoZXI9ZnVuY3Rpb24odCxlKXtyZXR1cm4gYS50b2tlblN0cnVjdHVyZWRNYXRjaGVyKHQsZSl9fSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7dmFyIHIsaT10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8KHI9ZnVuY3Rpb24odCxlKXtyZXR1cm4ocj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24odCxlKXt0Ll9fcHJvdG9fXz1lfXx8ZnVuY3Rpb24odCxlKXtmb3IodmFyIG4gaW4gZSllLmhhc093blByb3BlcnR5KG4pJiYodFtuXT1lW25dKX0pKHQsZSl9LGZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gbigpe3RoaXMuY29uc3RydWN0b3I9dH1yKHQsZSksdC5wcm90b3R5cGU9bnVsbD09PWU/T2JqZWN0LmNyZWF0ZShlKToobi5wcm90b3R5cGU9ZS5wcm90b3R5cGUsbmV3IG4pfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG89big0KSxhPW4oMCkscz1uKDI2KSx1PW4oMiksYz1uKDIzKSxwPW4oMTYpLGw9bigxMCksaD1uKDI0KSxmPW4oMjUpLGQ9bigzMSksRT1uKDMyKSxtPW4oMzQpLHk9bigzNSksVD1uKDM2KSx2PW4oMzcpLGc9bigzOCk7ZS5FTkRfT0ZfRklMRT11LmNyZWF0ZVRva2VuSW5zdGFuY2UodS5FT0YsXCJcIixOYU4sTmFOLE5hTixOYU4sTmFOLE5hTiksT2JqZWN0LmZyZWV6ZShlLkVORF9PRl9GSUxFKSxlLkRFRkFVTFRfUEFSU0VSX0NPTkZJRz1PYmplY3QuZnJlZXplKHtyZWNvdmVyeUVuYWJsZWQ6ITEsbWF4TG9va2FoZWFkOjQsaWdub3JlZElzc3Vlczp7fSxkeW5hbWljVG9rZW5zRW5hYmxlZDohMSxvdXRwdXRDc3Q6ITAsZXJyb3JNZXNzYWdlUHJvdmlkZXI6bC5kZWZhdWx0UGFyc2VyRXJyb3JQcm92aWRlcixzZXJpYWxpemVkR3JhbW1hcjpudWxsfSksZS5ERUZBVUxUX1JVTEVfQ09ORklHPU9iamVjdC5mcmVlemUoe3JlY292ZXJ5VmFsdWVGdW5jOmZ1bmN0aW9uKCl7fSxyZXN5bmNFbmFibGVkOiEwfSksZnVuY3Rpb24odCl7dFt0LklOVkFMSURfUlVMRV9OQU1FPTBdPVwiSU5WQUxJRF9SVUxFX05BTUVcIix0W3QuRFVQTElDQVRFX1JVTEVfTkFNRT0xXT1cIkRVUExJQ0FURV9SVUxFX05BTUVcIix0W3QuSU5WQUxJRF9SVUxFX09WRVJSSURFPTJdPVwiSU5WQUxJRF9SVUxFX09WRVJSSURFXCIsdFt0LkRVUExJQ0FURV9QUk9EVUNUSU9OUz0zXT1cIkRVUExJQ0FURV9QUk9EVUNUSU9OU1wiLHRbdC5VTlJFU09MVkVEX1NVQlJVTEVfUkVGPTRdPVwiVU5SRVNPTFZFRF9TVUJSVUxFX1JFRlwiLHRbdC5MRUZUX1JFQ1VSU0lPTj01XT1cIkxFRlRfUkVDVVJTSU9OXCIsdFt0Lk5PTkVfTEFTVF9FTVBUWV9BTFQ9Nl09XCJOT05FX0xBU1RfRU1QVFlfQUxUXCIsdFt0LkFNQklHVU9VU19BTFRTPTddPVwiQU1CSUdVT1VTX0FMVFNcIix0W3QuQ09ORkxJQ1RfVE9LRU5TX1JVTEVTX05BTUVTUEFDRT04XT1cIkNPTkZMSUNUX1RPS0VOU19SVUxFU19OQU1FU1BBQ0VcIix0W3QuSU5WQUxJRF9UT0tFTl9OQU1FPTldPVwiSU5WQUxJRF9UT0tFTl9OQU1FXCIsdFt0LklOVkFMSURfTkVTVEVEX1JVTEVfTkFNRT0xMF09XCJJTlZBTElEX05FU1RFRF9SVUxFX05BTUVcIix0W3QuRFVQTElDQVRFX05FU1RFRF9OQU1FPTExXT1cIkRVUExJQ0FURV9ORVNURURfTkFNRVwiLHRbdC5OT19OT05fRU1QVFlfTE9PS0FIRUFEPTEyXT1cIk5PX05PTl9FTVBUWV9MT09LQUhFQURcIix0W3QuQU1CSUdVT1VTX1BSRUZJWF9BTFRTPTEzXT1cIkFNQklHVU9VU19QUkVGSVhfQUxUU1wiLHRbdC5UT09fTUFOWV9BTFRTPTE0XT1cIlRPT19NQU5ZX0FMVFNcIn0oZS5QYXJzZXJEZWZpbml0aW9uRXJyb3JUeXBlfHwoZS5QYXJzZXJEZWZpbml0aW9uRXJyb3JUeXBlPXt9KSksZS5FTVBUWV9BTFQ9ZnVuY3Rpb24odCl7cmV0dXJuIHZvaWQgMD09PXQmJih0PXZvaWQgMCksZnVuY3Rpb24oKXtyZXR1cm4gdH19O3ZhciBfPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LG4pe3ZvaWQgMD09PW4mJihuPWUuREVGQVVMVF9QQVJTRVJfQ09ORklHKSx0aGlzLmlnbm9yZWRJc3N1ZXM9ZS5ERUZBVUxUX1BBUlNFUl9DT05GSUcuaWdub3JlZElzc3Vlcyx0aGlzLmRlZmluaXRpb25FcnJvcnM9W10sdGhpcy5zZWxmQW5hbHlzaXNEb25lPSExO3RoaXMuaW5pdEVycm9ySGFuZGxlcihuKSx0aGlzLmluaXRMZXhlckFkYXB0ZXIoKSx0aGlzLmluaXRMb29rc0FoZWFkKG4pLHRoaXMuaW5pdFJlY29nbml6ZXJFbmdpbmUodCxuKSx0aGlzLmluaXRSZWNvdmVyYWJsZShuKSx0aGlzLmluaXRUcmVlQnVpbGRlcihuKSx0aGlzLmluaXRDb250ZW50QXNzaXN0KCksdGhpcy5pZ25vcmVkSXNzdWVzPWEuaGFzKG4sXCJpZ25vcmVkSXNzdWVzXCIpP24uaWdub3JlZElzc3VlczplLkRFRkFVTFRfUEFSU0VSX0NPTkZJRy5pZ25vcmVkSXNzdWVzLGEudG9GYXN0UHJvcGVydGllcyh0aGlzKX1yZXR1cm4gdC5wZXJmb3JtU2VsZkFuYWx5c2lzPWZ1bmN0aW9uKHQpe3QucGVyZm9ybVNlbGZBbmFseXNpcygpfSx0LnByb3RvdHlwZS5wZXJmb3JtU2VsZkFuYWx5c2lzPWZ1bmN0aW9uKCl7dmFyIGUsbj10aGlzO3RoaXMuc2VsZkFuYWx5c2lzRG9uZT0hMDt2YXIgcj1vLmNsYXNzTmFtZUZyb21JbnN0YW5jZSh0aGlzKSxpPXRoaXMuZ2FzdFByb2R1Y3Rpb25zQ2FjaGU7aWYodGhpcy5zZXJpYWxpemVkR3JhbW1hcil7dmFyIHU9Yy5kZXNlcmlhbGl6ZUdyYW1tYXIodGhpcy5zZXJpYWxpemVkR3JhbW1hcix0aGlzLnRva2Vuc01hcCk7YS5mb3JFYWNoKHUsZnVuY3Rpb24odCl7bi5nYXN0UHJvZHVjdGlvbnNDYWNoZS5wdXQodC5uYW1lLHQpfSl9dmFyIGY9aC5yZXNvbHZlR3JhbW1hcih7cnVsZXM6aS52YWx1ZXMoKX0pO2lmKHRoaXMuZGVmaW5pdGlvbkVycm9ycy5wdXNoLmFwcGx5KHRoaXMuZGVmaW5pdGlvbkVycm9ycyxmKSxhLmlzRW1wdHkoZikpe3ZhciBkPWgudmFsaWRhdGVHcmFtbWFyKHtydWxlczppLnZhbHVlcygpLG1heExvb2thaGVhZDp0aGlzLm1heExvb2thaGVhZCx0b2tlblR5cGVzOmEudmFsdWVzKHRoaXMudG9rZW5zTWFwKSxpZ25vcmVkSXNzdWVzOnRoaXMuaWdub3JlZElzc3VlcyxlcnJNc2dQcm92aWRlcjpsLmRlZmF1bHRHcmFtbWFyVmFsaWRhdG9yRXJyb3JQcm92aWRlcixncmFtbWFyTmFtZTpyfSk7dGhpcy5kZWZpbml0aW9uRXJyb3JzLnB1c2guYXBwbHkodGhpcy5kZWZpbml0aW9uRXJyb3JzLGQpfWlmKGEuaXNFbXB0eSh0aGlzLmRlZmluaXRpb25FcnJvcnMpKXt2YXIgRT1zLmNvbXB1dGVBbGxQcm9kc0ZvbGxvd3MoaS52YWx1ZXMoKSk7dGhpcy5yZXN5bmNGb2xsb3dzPUV9dmFyIG09cC5hbmFseXplQ3N0KGkudmFsdWVzKCksdGhpcy5mdWxsUnVsZU5hbWVUb1Nob3J0KTtpZih0aGlzLmFsbFJ1bGVOYW1lcz1tLmFsbFJ1bGVOYW1lcywhdC5ERUZFUl9ERUZJTklUSU9OX0VSUk9SU19IQU5ETElORyYmIWEuaXNFbXB0eSh0aGlzLmRlZmluaXRpb25FcnJvcnMpKXRocm93IGU9YS5tYXAodGhpcy5kZWZpbml0aW9uRXJyb3JzLGZ1bmN0aW9uKHQpe3JldHVybiB0Lm1lc3NhZ2V9KSxuZXcgRXJyb3IoXCJQYXJzZXIgRGVmaW5pdGlvbiBFcnJvcnMgZGV0ZWN0ZWQ6XFxuIFwiK2Uuam9pbihcIlxcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cXG5cIikpfSx0LkRFRkVSX0RFRklOSVRJT05fRVJST1JTX0hBTkRMSU5HPSExLHR9KCk7ZS5QYXJzZXI9XyxhLmFwcGx5TWl4aW5zKF8sW2YuUmVjb3ZlcmFibGUsZC5Mb29rc0FoZWFkLEUuVHJlZUJ1aWxkZXIsbS5MZXhlckFkYXB0ZXIsVC5SZWNvZ25pemVyRW5naW5lLHkuUmVjb2duaXplckFwaSx2LkVycm9ySGFuZGxlcixnLkNvbnRlbnRBc3Npc3RdKTt2YXIgUj1mdW5jdGlvbih0KXtmdW5jdGlvbiBuKG4scil7dm9pZCAwPT09ciYmKHI9ZS5ERUZBVUxUX1BBUlNFUl9DT05GSUcpO3ZhciBpPWEuY2xvbmVPYmoocik7cmV0dXJuIGkub3V0cHV0Q3N0PSEwLHQuY2FsbCh0aGlzLG4saSl8fHRoaXN9cmV0dXJuIGkobix0KSxufShfKTtlLkNzdFBhcnNlcj1SO3ZhciBBPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIG4obixyKXt2b2lkIDA9PT1yJiYocj1lLkRFRkFVTFRfUEFSU0VSX0NPTkZJRyk7dmFyIGk9YS5jbG9uZU9iaihyKTtyZXR1cm4gaS5vdXRwdXRDc3Q9ITEsdC5jYWxsKHRoaXMsbixpKXx8dGhpc31yZXR1cm4gaShuLHQpLG59KF8pO2UuRW1iZWRkZWRBY3Rpb25zUGFyc2VyPUF9LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgcj1uKDApO2UuY2xhc3NOYW1lRnJvbUluc3RhbmNlPWZ1bmN0aW9uKHQpe3JldHVybiBhKHQuY29uc3RydWN0b3IpfTt2YXIgaT0vXlxccypmdW5jdGlvblxccyooXFxTKilcXHMqXFwoLyxvPVwibmFtZVwiO2Z1bmN0aW9uIGEodCl7dmFyIGU9dC5uYW1lO3JldHVybiBlfHx0LnRvU3RyaW5nKCkubWF0Y2goaSlbMV19ZS5mdW5jdGlvbk5hbWU9YSxlLmRlZmluZU5hbWVQcm9wPWZ1bmN0aW9uKHQsZSl7dmFyIG49T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LG8pO3JldHVybiEoIXIuaXNVbmRlZmluZWQobikmJiFuLmNvbmZpZ3VyYWJsZXx8KE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LG8se2VudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiExLHZhbHVlOmV9KSwwKSl9O3ZhciBzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3RoaXMuX3N0YXRlPXt9fXJldHVybiB0LnByb3RvdHlwZS5rZXlzPWZ1bmN0aW9uKCl7cmV0dXJuIHIua2V5cyh0aGlzLl9zdGF0ZSl9LHQucHJvdG90eXBlLnZhbHVlcz1mdW5jdGlvbigpe3JldHVybiByLnZhbHVlcyh0aGlzLl9zdGF0ZSl9LHQucHJvdG90eXBlLnB1dD1mdW5jdGlvbih0LGUpe3RoaXMuX3N0YXRlW3RdPWV9LHQucHJvdG90eXBlLnB1dEFsbD1mdW5jdGlvbih0KXt0aGlzLl9zdGF0ZT1yLmFzc2lnbih0aGlzLl9zdGF0ZSx0Ll9zdGF0ZSl9LHQucHJvdG90eXBlLmdldD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fc3RhdGVbdF19LHQucHJvdG90eXBlLmNvbnRhaW5zS2V5PWZ1bmN0aW9uKHQpe3JldHVybiByLmhhcyh0aGlzLl9zdGF0ZSx0KX0sdC5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLl9zdGF0ZT17fX0sdH0oKTtlLkhhc2hUYWJsZT1zfSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIHI9bigxKSxpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe31yZXR1cm4gdC5wcm90b3R5cGUudmlzaXQ9ZnVuY3Rpb24odCl7aWYodCBpbnN0YW5jZW9mIHIuTm9uVGVybWluYWwpcmV0dXJuIHRoaXMudmlzaXROb25UZXJtaW5hbCh0KTtpZih0IGluc3RhbmNlb2Ygci5GbGF0KXJldHVybiB0aGlzLnZpc2l0RmxhdCh0KTtpZih0IGluc3RhbmNlb2Ygci5PcHRpb24pcmV0dXJuIHRoaXMudmlzaXRPcHRpb24odCk7aWYodCBpbnN0YW5jZW9mIHIuUmVwZXRpdGlvbk1hbmRhdG9yeSlyZXR1cm4gdGhpcy52aXNpdFJlcGV0aXRpb25NYW5kYXRvcnkodCk7aWYodCBpbnN0YW5jZW9mIHIuUmVwZXRpdGlvbk1hbmRhdG9yeVdpdGhTZXBhcmF0b3IpcmV0dXJuIHRoaXMudmlzaXRSZXBldGl0aW9uTWFuZGF0b3J5V2l0aFNlcGFyYXRvcih0KTtpZih0IGluc3RhbmNlb2Ygci5SZXBldGl0aW9uV2l0aFNlcGFyYXRvcilyZXR1cm4gdGhpcy52aXNpdFJlcGV0aXRpb25XaXRoU2VwYXJhdG9yKHQpO2lmKHQgaW5zdGFuY2VvZiByLlJlcGV0aXRpb24pcmV0dXJuIHRoaXMudmlzaXRSZXBldGl0aW9uKHQpO2lmKHQgaW5zdGFuY2VvZiByLkFsdGVybmF0aW9uKXJldHVybiB0aGlzLnZpc2l0QWx0ZXJuYXRpb24odCk7aWYodCBpbnN0YW5jZW9mIHIuVGVybWluYWwpcmV0dXJuIHRoaXMudmlzaXRUZXJtaW5hbCh0KTtpZih0IGluc3RhbmNlb2Ygci5SdWxlKXJldHVybiB0aGlzLnZpc2l0UnVsZSh0KTt0aHJvdyBFcnJvcihcIm5vbiBleGhhdXN0aXZlIG1hdGNoXCIpfSx0LnByb3RvdHlwZS52aXNpdE5vblRlcm1pbmFsPWZ1bmN0aW9uKHQpe30sdC5wcm90b3R5cGUudmlzaXRGbGF0PWZ1bmN0aW9uKHQpe30sdC5wcm90b3R5cGUudmlzaXRPcHRpb249ZnVuY3Rpb24odCl7fSx0LnByb3RvdHlwZS52aXNpdFJlcGV0aXRpb249ZnVuY3Rpb24odCl7fSx0LnByb3RvdHlwZS52aXNpdFJlcGV0aXRpb25NYW5kYXRvcnk9ZnVuY3Rpb24odCl7fSx0LnByb3RvdHlwZS52aXNpdFJlcGV0aXRpb25NYW5kYXRvcnlXaXRoU2VwYXJhdG9yPWZ1bmN0aW9uKHQpe30sdC5wcm90b3R5cGUudmlzaXRSZXBldGl0aW9uV2l0aFNlcGFyYXRvcj1mdW5jdGlvbih0KXt9LHQucHJvdG90eXBlLnZpc2l0QWx0ZXJuYXRpb249ZnVuY3Rpb24odCl7fSx0LnByb3RvdHlwZS52aXNpdFRlcm1pbmFsPWZ1bmN0aW9uKHQpe30sdC5wcm90b3R5cGUudmlzaXRSdWxlPWZ1bmN0aW9uKHQpe30sdH0oKTtlLkdBc3RWaXNpdG9yPWl9LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgcj1uKDApLGk9XCJNaXNtYXRjaGVkVG9rZW5FeGNlcHRpb25cIixvPVwiTm9WaWFibGVBbHRFeGNlcHRpb25cIixhPVwiRWFybHlFeGl0RXhjZXB0aW9uXCIscz1cIk5vdEFsbElucHV0UGFyc2VkRXhjZXB0aW9uXCIsdT1baSxvLGEsc107ZnVuY3Rpb24gYyh0LGUsbil7dGhpcy5uYW1lPWksdGhpcy5tZXNzYWdlPXQsdGhpcy50b2tlbj1lLHRoaXMucHJldmlvdXNUb2tlbj1uLHRoaXMucmVzeW5jZWRUb2tlbnM9W119ZnVuY3Rpb24gcCh0LGUsbil7dGhpcy5uYW1lPW8sdGhpcy5tZXNzYWdlPXQsdGhpcy50b2tlbj1lLHRoaXMucHJldmlvdXNUb2tlbj1uLHRoaXMucmVzeW5jZWRUb2tlbnM9W119ZnVuY3Rpb24gbCh0LGUpe3RoaXMubmFtZT1zLHRoaXMubWVzc2FnZT10LHRoaXMudG9rZW49ZSx0aGlzLnJlc3luY2VkVG9rZW5zPVtdfWZ1bmN0aW9uIGgodCxlLG4pe3RoaXMubmFtZT1hLHRoaXMubWVzc2FnZT10LHRoaXMudG9rZW49ZSx0aGlzLnByZXZpb3VzVG9rZW49bix0aGlzLnJlc3luY2VkVG9rZW5zPVtdfU9iamVjdC5mcmVlemUodSksZS5pc1JlY29nbml0aW9uRXhjZXB0aW9uPWZ1bmN0aW9uKHQpe3JldHVybiByLmNvbnRhaW5zKHUsdC5uYW1lKX0sZS5NaXNtYXRjaGVkVG9rZW5FeGNlcHRpb249YyxjLnByb3RvdHlwZT1FcnJvci5wcm90b3R5cGUsZS5Ob1ZpYWJsZUFsdEV4Y2VwdGlvbj1wLHAucHJvdG90eXBlPUVycm9yLnByb3RvdHlwZSxlLk5vdEFsbElucHV0UGFyc2VkRXhjZXB0aW9uPWwsbC5wcm90b3R5cGU9RXJyb3IucHJvdG90eXBlLGUuRWFybHlFeGl0RXhjZXB0aW9uPWgsaC5wcm90b3R5cGU9RXJyb3IucHJvdG90eXBlfSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIHI9bigwKSxpPW4oNCksbz1uKDIpO2Z1bmN0aW9uIGEodCl7Zm9yKHZhciBlPXIuY2xvbmVBcnIodCksbj10LGk9ITA7aTspe249ci5jb21wYWN0KHIuZmxhdHRlbihyLm1hcChuLGZ1bmN0aW9uKHQpe3JldHVybiB0LkNBVEVHT1JJRVN9KSkpO3ZhciBvPXIuZGlmZmVyZW5jZShuLGUpO2U9ZS5jb25jYXQobyksci5pc0VtcHR5KG8pP2k9ITE6bj1vfXJldHVybiBlfWZ1bmN0aW9uIHModCl7ci5mb3JFYWNoKHQsZnVuY3Rpb24odCl7bCh0KXx8KGUudG9rZW5JZHhUb0NsYXNzLnB1dChlLnRva2VuU2hvcnROYW1lSWR4LHQpLHQudG9rZW5UeXBlSWR4PWUudG9rZW5TaG9ydE5hbWVJZHgrKyksaCh0KSYmIXIuaXNBcnJheSh0LkNBVEVHT1JJRVMpJiYodC5DQVRFR09SSUVTPVt0LkNBVEVHT1JJRVNdKSxoKHQpfHwodC5DQVRFR09SSUVTPVtdKSxmKHQpfHwodC5jYXRlZ29yeU1hdGNoZXM9W10pLGQodCl8fCh0LmNhdGVnb3J5TWF0Y2hlc01hcD17fSksRSh0KXx8KHQudG9rZW5OYW1lPW8udG9rZW5OYW1lKHQpKX0pfWZ1bmN0aW9uIHUodCl7ci5mb3JFYWNoKHQsZnVuY3Rpb24odCl7dC5jYXRlZ29yeU1hdGNoZXM9W10sci5mb3JFYWNoKHQuY2F0ZWdvcnlNYXRjaGVzTWFwLGZ1bmN0aW9uKG4scil7dC5jYXRlZ29yeU1hdGNoZXMucHVzaChlLnRva2VuSWR4VG9DbGFzcy5nZXQocikudG9rZW5UeXBlSWR4KX0pfSl9ZnVuY3Rpb24gYyh0KXtyLmZvckVhY2godCxmdW5jdGlvbih0KXtwKFtdLHQpfSl9ZnVuY3Rpb24gcCh0LGUpe3IuZm9yRWFjaCh0LGZ1bmN0aW9uKHQpe2UuY2F0ZWdvcnlNYXRjaGVzTWFwW3QudG9rZW5UeXBlSWR4XT0hMH0pLHIuZm9yRWFjaChlLkNBVEVHT1JJRVMsZnVuY3Rpb24obil7dmFyIGk9dC5jb25jYXQoZSk7ci5jb250YWlucyhpLG4pfHxwKGksbil9KX1mdW5jdGlvbiBsKHQpe3JldHVybiByLmhhcyh0LFwidG9rZW5UeXBlSWR4XCIpfWZ1bmN0aW9uIGgodCl7cmV0dXJuIHIuaGFzKHQsXCJDQVRFR09SSUVTXCIpfWZ1bmN0aW9uIGYodCl7cmV0dXJuIHIuaGFzKHQsXCJjYXRlZ29yeU1hdGNoZXNcIil9ZnVuY3Rpb24gZCh0KXtyZXR1cm4gci5oYXModCxcImNhdGVnb3J5TWF0Y2hlc01hcFwiKX1mdW5jdGlvbiBFKHQpe3JldHVybiByLmhhcyh0LFwidG9rZW5OYW1lXCIpfWUudG9rZW5TdHJ1Y3R1cmVkTWF0Y2hlcj1mdW5jdGlvbih0LGUpe3ZhciBuPXQudG9rZW5UeXBlSWR4O3JldHVybiBuPT09ZS50b2tlblR5cGVJZHh8fCEwPT09ZS5pc1BhcmVudCYmITA9PT1lLmNhdGVnb3J5TWF0Y2hlc01hcFtuXX0sZS50b2tlblN0cnVjdHVyZWRNYXRjaGVyTm9DYXRlZ29yaWVzPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQudG9rZW5UeXBlSWR4PT09ZS50b2tlblR5cGVJZHh9LGUudG9rZW5TaG9ydE5hbWVJZHg9MSxlLnRva2VuSWR4VG9DbGFzcz1uZXcgaS5IYXNoVGFibGUsZS5hdWdtZW50VG9rZW5UeXBlcz1mdW5jdGlvbih0KXt2YXIgZT1hKHQpO3MoZSksYyhlKSx1KGUpLHIuZm9yRWFjaChlLGZ1bmN0aW9uKHQpe3QuaXNQYXJlbnQ9dC5jYXRlZ29yeU1hdGNoZXMubGVuZ3RoPjB9KX0sZS5leHBhbmRDYXRlZ29yaWVzPWEsZS5hc3NpZ25Ub2tlbkRlZmF1bHRQcm9wcz1zLGUuYXNzaWduQ2F0ZWdvcmllc1Rva2Vuc1Byb3A9dSxlLmFzc2lnbkNhdGVnb3JpZXNNYXBQcm9wPWMsZS5zaW5nbGVBc3NpZ25DYXRlZ29yaWVzVG9rc01hcD1wLGUuaGFzU2hvcnRLZXlQcm9wZXJ0eT1sLGUuaGFzQ2F0ZWdvcmllc1Byb3BlcnR5PWgsZS5oYXNFeHRlbmRpbmdUb2tlbnNUeXBlc1Byb3BlcnR5PWYsZS5oYXNFeHRlbmRpbmdUb2tlbnNUeXBlc01hcFByb3BlcnR5PWQsZS5oYXNUb2tlbk5hbWVQcm9wZXJ0eT1FLGUuaXNUb2tlblR5cGU9ZnVuY3Rpb24odCl7cmV0dXJuIHIuaGFzKHQsXCJ0b2tlblR5cGVJZHhcIil9fSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7dmFyIHIsaT10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8KHI9ZnVuY3Rpb24odCxlKXtyZXR1cm4ocj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24odCxlKXt0Ll9fcHJvdG9fXz1lfXx8ZnVuY3Rpb24odCxlKXtmb3IodmFyIG4gaW4gZSllLmhhc093blByb3BlcnR5KG4pJiYodFtuXT1lW25dKX0pKHQsZSl9LGZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gbigpe3RoaXMuY29uc3RydWN0b3I9dH1yKHQsZSksdC5wcm90b3R5cGU9bnVsbD09PWU/T2JqZWN0LmNyZWF0ZShlKToobi5wcm90b3R5cGU9ZS5wcm90b3R5cGUsbmV3IG4pfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG89bigwKSxhPW4oMSkscz1uKDUpLHU9bigyKTtlLmlzU2VxdWVuY2VQcm9kPWZ1bmN0aW9uKHQpe3JldHVybiB0IGluc3RhbmNlb2YgYS5GbGF0fHx0IGluc3RhbmNlb2YgYS5PcHRpb258fHQgaW5zdGFuY2VvZiBhLlJlcGV0aXRpb258fHQgaW5zdGFuY2VvZiBhLlJlcGV0aXRpb25NYW5kYXRvcnl8fHQgaW5zdGFuY2VvZiBhLlJlcGV0aXRpb25NYW5kYXRvcnlXaXRoU2VwYXJhdG9yfHx0IGluc3RhbmNlb2YgYS5SZXBldGl0aW9uV2l0aFNlcGFyYXRvcnx8dCBpbnN0YW5jZW9mIGEuVGVybWluYWx8fHQgaW5zdGFuY2VvZiBhLlJ1bGV9LGUuaXNPcHRpb25hbFByb2Q9ZnVuY3Rpb24gdChlLG4pe3JldHVybiB2b2lkIDA9PT1uJiYobj1bXSksISEoZSBpbnN0YW5jZW9mIGEuT3B0aW9ufHxlIGluc3RhbmNlb2YgYS5SZXBldGl0aW9ufHxlIGluc3RhbmNlb2YgYS5SZXBldGl0aW9uV2l0aFNlcGFyYXRvcil8fChlIGluc3RhbmNlb2YgYS5BbHRlcm5hdGlvbj9vLnNvbWUoZS5kZWZpbml0aW9uLGZ1bmN0aW9uKGUpe3JldHVybiB0KGUsbil9KTohKGUgaW5zdGFuY2VvZiBhLk5vblRlcm1pbmFsJiZvLmNvbnRhaW5zKG4sZSkpJiZlIGluc3RhbmNlb2YgYS5BYnN0cmFjdFByb2R1Y3Rpb24mJihlIGluc3RhbmNlb2YgYS5Ob25UZXJtaW5hbCYmbi5wdXNoKGUpLG8uZXZlcnkoZS5kZWZpbml0aW9uLGZ1bmN0aW9uKGUpe3JldHVybiB0KGUsbil9KSkpfSxlLmlzQnJhbmNoaW5nUHJvZD1mdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIGEuQWx0ZXJuYXRpb259LGUuZ2V0UHJvZHVjdGlvbkRzbE5hbWU9ZnVuY3Rpb24odCl7aWYodCBpbnN0YW5jZW9mIGEuTm9uVGVybWluYWwpcmV0dXJuXCJTVUJSVUxFXCI7aWYodCBpbnN0YW5jZW9mIGEuT3B0aW9uKXJldHVyblwiT1BUSU9OXCI7aWYodCBpbnN0YW5jZW9mIGEuQWx0ZXJuYXRpb24pcmV0dXJuXCJPUlwiO2lmKHQgaW5zdGFuY2VvZiBhLlJlcGV0aXRpb25NYW5kYXRvcnkpcmV0dXJuXCJBVF9MRUFTVF9PTkVcIjtpZih0IGluc3RhbmNlb2YgYS5SZXBldGl0aW9uTWFuZGF0b3J5V2l0aFNlcGFyYXRvcilyZXR1cm5cIkFUX0xFQVNUX09ORV9TRVBcIjtpZih0IGluc3RhbmNlb2YgYS5SZXBldGl0aW9uV2l0aFNlcGFyYXRvcilyZXR1cm5cIk1BTllfU0VQXCI7aWYodCBpbnN0YW5jZW9mIGEuUmVwZXRpdGlvbilyZXR1cm5cIk1BTllcIjtpZih0IGluc3RhbmNlb2YgYS5UZXJtaW5hbClyZXR1cm5cIkNPTlNVTUVcIjt0aHJvdyBFcnJvcihcIm5vbiBleGhhdXN0aXZlIG1hdGNoXCIpfTt2YXIgYz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dmFyIGU9bnVsbCE9PXQmJnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzO3JldHVybiBlLnNlcGFyYXRvcj1cIi1cIixlLmRzbE1ldGhvZHM9e29wdGlvbjpbXSxhbHRlcm5hdGlvbjpbXSxyZXBldGl0aW9uOltdLHJlcGV0aXRpb25XaXRoU2VwYXJhdG9yOltdLHJlcGV0aXRpb25NYW5kYXRvcnk6W10scmVwZXRpdGlvbk1hbmRhdG9yeVdpdGhTZXBhcmF0b3I6W119LGV9cmV0dXJuIGkoZSx0KSxlLnByb3RvdHlwZS52aXNpdFRlcm1pbmFsPWZ1bmN0aW9uKHQpe3ZhciBlPXUudG9rZW5OYW1lKHQudGVybWluYWxUeXBlKSt0aGlzLnNlcGFyYXRvcitcIlRlcm1pbmFsXCI7by5oYXModGhpcy5kc2xNZXRob2RzLGUpfHwodGhpcy5kc2xNZXRob2RzW2VdPVtdKSx0aGlzLmRzbE1ldGhvZHNbZV0ucHVzaCh0KX0sZS5wcm90b3R5cGUudmlzaXROb25UZXJtaW5hbD1mdW5jdGlvbih0KXt2YXIgZT10Lm5vblRlcm1pbmFsTmFtZSt0aGlzLnNlcGFyYXRvcitcIlRlcm1pbmFsXCI7by5oYXModGhpcy5kc2xNZXRob2RzLGUpfHwodGhpcy5kc2xNZXRob2RzW2VdPVtdKSx0aGlzLmRzbE1ldGhvZHNbZV0ucHVzaCh0KX0sZS5wcm90b3R5cGUudmlzaXRPcHRpb249ZnVuY3Rpb24odCl7dGhpcy5kc2xNZXRob2RzLm9wdGlvbi5wdXNoKHQpfSxlLnByb3RvdHlwZS52aXNpdFJlcGV0aXRpb25XaXRoU2VwYXJhdG9yPWZ1bmN0aW9uKHQpe3RoaXMuZHNsTWV0aG9kcy5yZXBldGl0aW9uV2l0aFNlcGFyYXRvci5wdXNoKHQpfSxlLnByb3RvdHlwZS52aXNpdFJlcGV0aXRpb25NYW5kYXRvcnk9ZnVuY3Rpb24odCl7dGhpcy5kc2xNZXRob2RzLnJlcGV0aXRpb25NYW5kYXRvcnkucHVzaCh0KX0sZS5wcm90b3R5cGUudmlzaXRSZXBldGl0aW9uTWFuZGF0b3J5V2l0aFNlcGFyYXRvcj1mdW5jdGlvbih0KXt0aGlzLmRzbE1ldGhvZHMucmVwZXRpdGlvbk1hbmRhdG9yeVdpdGhTZXBhcmF0b3IucHVzaCh0KX0sZS5wcm90b3R5cGUudmlzaXRSZXBldGl0aW9uPWZ1bmN0aW9uKHQpe3RoaXMuZHNsTWV0aG9kcy5yZXBldGl0aW9uLnB1c2godCl9LGUucHJvdG90eXBlLnZpc2l0QWx0ZXJuYXRpb249ZnVuY3Rpb24odCl7dGhpcy5kc2xNZXRob2RzLmFsdGVybmF0aW9uLnB1c2godCl9LGV9KHMuR0FzdFZpc2l0b3IpO2UuRHNsTWV0aG9kc0NvbGxlY3RvclZpc2l0b3I9Y30sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHIodCxlLG4pe3JldHVybiBufGV8dH1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxlLkJJVFNfRk9SX01FVEhPRF9JRFg9NCxlLkJJVFNfRk9SX09DQ1VSUkVOQ0VfSURYPTQsZS5CSVRTX0ZPUl9SVUxFX0lEWD0yNCxlLkJJVFNfRk9SX0FMVF9JRFg9OCxlLk9SX0lEWD0xPDxlLkJJVFNfRk9SX01FVEhPRF9JRFgsZS5PUFRJT05fSURYPTI8PGUuQklUU19GT1JfTUVUSE9EX0lEWCxlLk1BTllfSURYPTM8PGUuQklUU19GT1JfTUVUSE9EX0lEWCxlLkFUX0xFQVNUX09ORV9JRFg9NDw8ZS5CSVRTX0ZPUl9NRVRIT0RfSURYLGUuTUFOWV9TRVBfSURYPTU8PGUuQklUU19GT1JfTUVUSE9EX0lEWCxlLkFUX0xFQVNUX09ORV9TRVBfSURYPTY8PGUuQklUU19GT1JfTUVUSE9EX0lEWCxlLmdldEtleUZvckF1dG9tYXRpY0xvb2thaGVhZD1yO3ZhciBpPTMyLWUuQklUU19GT1JfQUxUX0lEWDtlLmdldEtleUZvckFsdEluZGV4PWZ1bmN0aW9uKHQsZSxuLG8pe3ZhciBhPW8rMTw8aTtyZXR1cm4gcih0LGUsbil8YX19LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgcj1uKDIpLGk9bigwKSxvPW4oMCksYT1uKDEpLHM9big4KSx1PW4oMTEpLGM9bigxNykscD1uKDMpO2UuZGVmYXVsdFBhcnNlckVycm9yUHJvdmlkZXI9e2J1aWxkTWlzbWF0Y2hUb2tlbk1lc3NhZ2U6ZnVuY3Rpb24odCl7dmFyIGU9dC5leHBlY3RlZCxuPXQuYWN0dWFsO3QucHJldmlvdXMsdC5ydWxlTmFtZTtyZXR1cm5cIkV4cGVjdGluZyBcIisoci5oYXNUb2tlbkxhYmVsKGUpP1wiLS1cXHgzZSBcIityLnRva2VuTGFiZWwoZSkrXCIgPC0tXCI6XCJ0b2tlbiBvZiB0eXBlIC0tXFx4M2UgXCIrci50b2tlbk5hbWUoZSkrXCIgPC0tXCIpK1wiIGJ1dCBmb3VuZCAtLVxceDNlICdcIituLmltYWdlK1wiJyA8LS1cIn0sYnVpbGROb3RBbGxJbnB1dFBhcnNlZE1lc3NhZ2U6ZnVuY3Rpb24odCl7dmFyIGU9dC5maXJzdFJlZHVuZGFudDt0LnJ1bGVOYW1lO3JldHVyblwiUmVkdW5kYW50IGlucHV0LCBleHBlY3RpbmcgRU9GIGJ1dCBmb3VuZDogXCIrZS5pbWFnZX0sYnVpbGROb1ZpYWJsZUFsdE1lc3NhZ2U6ZnVuY3Rpb24odCl7dmFyIGU9dC5leHBlY3RlZFBhdGhzUGVyQWx0LG49dC5hY3R1YWwsaT0odC5wcmV2aW91cyx0LmN1c3RvbVVzZXJEZXNjcmlwdGlvbiksYT0odC5ydWxlTmFtZSxcIlxcbmJ1dCBmb3VuZDogJ1wiK28uZmlyc3QobikuaW1hZ2UrXCInXCIpO2lmKGkpcmV0dXJuXCJFeHBlY3Rpbmc6IFwiK2krYTt2YXIgcz1vLnJlZHVjZShlLGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQuY29uY2F0KGUpfSxbXSksdT1vLm1hcChzLGZ1bmN0aW9uKHQpe3JldHVyblwiW1wiK28ubWFwKHQsZnVuY3Rpb24odCl7cmV0dXJuIHIudG9rZW5MYWJlbCh0KX0pLmpvaW4oXCIsIFwiKStcIl1cIn0pO3JldHVyblwiRXhwZWN0aW5nOiBcIisoXCJvbmUgb2YgdGhlc2UgcG9zc2libGUgVG9rZW4gc2VxdWVuY2VzOlxcblwiK28ubWFwKHUsZnVuY3Rpb24odCxlKXtyZXR1cm5cIiAgXCIrKGUrMSkrXCIuIFwiK3R9KS5qb2luKFwiXFxuXCIpKSthfSxidWlsZEVhcmx5RXhpdE1lc3NhZ2U6ZnVuY3Rpb24odCl7dmFyIGU9dC5leHBlY3RlZEl0ZXJhdGlvblBhdGhzLG49dC5hY3R1YWwsaT10LmN1c3RvbVVzZXJEZXNjcmlwdGlvbixhPSh0LnJ1bGVOYW1lLFwiXFxuYnV0IGZvdW5kOiAnXCIrby5maXJzdChuKS5pbWFnZStcIidcIik7cmV0dXJuIGk/XCJFeHBlY3Rpbmc6IFwiK2krYTpcIkV4cGVjdGluZzogXCIrKFwiZXhwZWN0aW5nIGF0IGxlYXN0IG9uZSBpdGVyYXRpb24gd2hpY2ggc3RhcnRzIHdpdGggb25lIG9mIHRoZXNlIHBvc3NpYmxlIFRva2VuIHNlcXVlbmNlczo6XFxuICA8XCIrby5tYXAoZSxmdW5jdGlvbih0KXtyZXR1cm5cIltcIitvLm1hcCh0LGZ1bmN0aW9uKHQpe3JldHVybiByLnRva2VuTGFiZWwodCl9KS5qb2luKFwiLFwiKStcIl1cIn0pLmpvaW4oXCIgLFwiKStcIj5cIikrYX19LE9iamVjdC5mcmVlemUoZS5kZWZhdWx0UGFyc2VyRXJyb3JQcm92aWRlciksZS5kZWZhdWx0R3JhbW1hclJlc29sdmVyRXJyb3JQcm92aWRlcj17YnVpbGRSdWxlTm90Rm91bmRFcnJvcjpmdW5jdGlvbih0LGUpe3JldHVyblwiSW52YWxpZCBncmFtbWFyLCByZWZlcmVuY2UgdG8gYSBydWxlIHdoaWNoIGlzIG5vdCBkZWZpbmVkOiAtPlwiK2Uubm9uVGVybWluYWxOYW1lK1wiPC1cXG5pbnNpZGUgdG9wIGxldmVsIHJ1bGU6IC0+XCIrdC5uYW1lK1wiPC1cIn19LGUuZGVmYXVsdEdyYW1tYXJWYWxpZGF0b3JFcnJvclByb3ZpZGVyPXtidWlsZER1cGxpY2F0ZUZvdW5kRXJyb3I6ZnVuY3Rpb24odCxlKXt2YXIgbixpPXQubmFtZSx1PW8uZmlyc3QoZSksYz11LmlkeCxwPXMuZ2V0UHJvZHVjdGlvbkRzbE5hbWUodSksbD0obj11KWluc3RhbmNlb2YgYS5UZXJtaW5hbD9yLnRva2VuTmFtZShuLnRlcm1pbmFsVHlwZSk6biBpbnN0YW5jZW9mIGEuTm9uVGVybWluYWw/bi5ub25UZXJtaW5hbE5hbWU6XCJcIixoPVwiLT5cIitwK1wiPC0gd2l0aCBudW1lcmljYWwgc3VmZml4OiAtPlwiK2MrXCI8LVxcbiAgICAgICAgICAgICAgICAgIFwiKyhsP1wiYW5kIGFyZ3VtZW50OiAtPlwiK2wrXCI8LVwiOlwiXCIpK1wiXFxuICAgICAgICAgICAgICAgICAgYXBwZWFycyBtb3JlIHRoYW4gb25jZSAoXCIrZS5sZW5ndGgrXCIgdGltZXMpIGluIHRoZSB0b3AgbGV2ZWwgcnVsZTogLT5cIitpK1wiPC0uXFxuICAgICAgICAgICAgICAgICAgXCIrKDA9PT1jP1wiQWxzbyBub3RlIHRoYXQgbnVtZXJpY2FsIHN1ZmZpeCAwIG1lYW5zIFwiK3ArXCIgd2l0aG91dCBhbnkgc3VmZml4LlwiOlwiXCIpK1wiXFxuICAgICAgICAgICAgICAgICAgVG8gZml4IHRoaXMgbWFrZSBzdXJlIGVhY2ggdXNhZ2Ugb2YgXCIrcCtcIiBcIisobD9cIndpdGggdGhlIGFyZ3VtZW50OiAtPlwiK2wrXCI8LVwiOlwiXCIpK1wiXFxuICAgICAgICAgICAgICAgICAgaW4gdGhlIHJ1bGUgLT5cIitpK1wiPC0gaGFzIGEgZGlmZmVyZW50IG9jY3VycmVuY2UgaW5kZXggKDAtNSksIGFzIHRoYXQgY29tYmluYXRpb24gYWN0cyBhcyBhIHVuaXF1ZVxcbiAgICAgICAgICAgICAgICAgIHBvc2l0aW9uIGtleSBpbiB0aGUgZ3JhbW1hciwgd2hpY2ggaXMgbmVlZGVkIGJ5IHRoZSBwYXJzaW5nIGVuZ2luZS5cXG4gICAgICAgICAgICAgICAgICBcXG4gICAgICAgICAgICAgICAgICBGb3IgZnVydGhlciBkZXRhaWxzIHNlZTogaHR0cHM6Ly9zYXAuZ2l0aHViLmlvL2NoZXZyb3RhaW4vZG9jcy9GQVEuaHRtbCNOVU1FUklDQUxfU1VGRklYRVMgXFxuICAgICAgICAgICAgICAgICAgXCI7cmV0dXJuIGg9KGg9aC5yZXBsYWNlKC9bIFxcdF0rL2csXCIgXCIpKS5yZXBsYWNlKC9cXHNcXHMrL2csXCJcXG5cIil9LGJ1aWxkSW52YWxpZE5lc3RlZFJ1bGVOYW1lRXJyb3I6ZnVuY3Rpb24odCxlKXtyZXR1cm5cIkludmFsaWQgbmVzdGVkIHJ1bGUgbmFtZTogLT5cIitlLm5hbWUrXCI8LSBpbnNpZGUgcnVsZTogLT5cIit0Lm5hbWUrXCI8LVxcbml0IG11c3QgbWF0Y2ggdGhlIHBhdHRlcm46IC0+XCIrdS52YWxpZE5lc3RlZFJ1bGVOYW1lLnRvU3RyaW5nKCkrXCI8LS5cXG5Ob3RlIHRoYXQgdGhpcyBtZWFucyBhIG5lc3RlZCBydWxlIG5hbWUgbXVzdCBzdGFydCB3aXRoIHRoZSAnJCcoZG9sbGFyKSBzaWduLlwifSxidWlsZER1cGxpY2F0ZU5lc3RlZFJ1bGVOYW1lRXJyb3I6ZnVuY3Rpb24odCxlKXtyZXR1cm5cIkR1cGxpY2F0ZSBuZXN0ZWQgcnVsZSBuYW1lOiAtPlwiK28uZmlyc3QoZSkubmFtZStcIjwtIGluc2lkZSBydWxlOiAtPlwiK3QubmFtZStcIjwtXFxuQSBuZXN0ZWQgbmFtZSBtdXN0IGJlIHVuaXF1ZSBpbiB0aGUgc2NvcGUgb2YgYSB0b3AgbGV2ZWwgZ3JhbW1hciBydWxlLlwifSxidWlsZE5hbWVzcGFjZUNvbmZsaWN0RXJyb3I6ZnVuY3Rpb24odCl7cmV0dXJuXCJOYW1lc3BhY2UgY29uZmxpY3QgZm91bmQgaW4gZ3JhbW1hci5cXG5UaGUgZ3JhbW1hciBoYXMgYm90aCBhIFRlcm1pbmFsKFRva2VuKSBhbmQgYSBOb24tVGVybWluYWwoUnVsZSkgbmFtZWQ6IDxcIit0Lm5hbWUrXCI+LlxcblRvIHJlc29sdmUgdGhpcyBtYWtlIHN1cmUgZWFjaCBUZXJtaW5hbCBhbmQgTm9uLVRlcm1pbmFsIG5hbWVzIGFyZSB1bmlxdWVcXG5UaGlzIGlzIGVhc3kgdG8gYWNjb21wbGlzaCBieSB1c2luZyB0aGUgY29udmVudGlvbiB0aGF0IFRlcm1pbmFsIG5hbWVzIHN0YXJ0IHdpdGggYW4gdXBwZXJjYXNlIGxldHRlclxcbmFuZCBOb24tVGVybWluYWwgbmFtZXMgc3RhcnQgd2l0aCBhIGxvd2VyIGNhc2UgbGV0dGVyLlwifSxidWlsZEFsdGVybmF0aW9uUHJlZml4QW1iaWd1aXR5RXJyb3I6ZnVuY3Rpb24odCl7dmFyIGU9by5tYXAodC5wcmVmaXhQYXRoLGZ1bmN0aW9uKHQpe3JldHVybiByLnRva2VuTGFiZWwodCl9KS5qb2luKFwiLCBcIiksbj0wPT09dC5hbHRlcm5hdGlvbi5pZHg/XCJcIjp0LmFsdGVybmF0aW9uLmlkeDtyZXR1cm5cIkFtYmlndW91cyBhbHRlcm5hdGl2ZXM6IDxcIit0LmFtYmlndWl0eUluZGljZXMuam9pbihcIiAsXCIpK1wiPiBkdWUgdG8gY29tbW9uIGxvb2thaGVhZCBwcmVmaXhcXG5pbiA8T1JcIituK1wiPiBpbnNpZGUgPFwiK3QudG9wTGV2ZWxSdWxlLm5hbWUrXCI+IFJ1bGUsXFxuPFwiK2UrXCI+IG1heSBhcHBlYXJzIGFzIGEgcHJlZml4IHBhdGggaW4gYWxsIHRoZXNlIGFsdGVybmF0aXZlcy5cXG5odHRwczovL3NhcC5naXRodWIuaW8vY2hldnJvdGFpbi9kb2NzL2d1aWRlL3Jlc29sdmluZ19ncmFtbWFyX2Vycm9ycy5odG1sI0NPTU1PTl9QUkVGSVhcXG5Gb3IgRnVydGhlciBkZXRhaWxzLlwifSxidWlsZEFsdGVybmF0aW9uQW1iaWd1aXR5RXJyb3I6ZnVuY3Rpb24odCl7dmFyIGU9by5tYXAodC5wcmVmaXhQYXRoLGZ1bmN0aW9uKHQpe3JldHVybiByLnRva2VuTGFiZWwodCl9KS5qb2luKFwiLCBcIiksbj0wPT09dC5hbHRlcm5hdGlvbi5pZHg/XCJcIjp0LmFsdGVybmF0aW9uLmlkeCxpPVwiQW1iaWd1b3VzIGFsdGVybmF0aXZlczogPFwiK3QuYW1iaWd1aXR5SW5kaWNlcy5qb2luKFwiICxcIikrXCI+IGluIDxPUlwiK24rXCI+IGluc2lkZSA8XCIrdC50b3BMZXZlbFJ1bGUubmFtZStcIj4gUnVsZSxcXG48XCIrZStcIj4gbWF5IGFwcGVhcnMgYXMgYSBwcmVmaXggcGF0aCBpbiBhbGwgdGhlc2UgYWx0ZXJuYXRpdmVzLlxcblwiLGE9Yy5WRVJTSU9OLnJlcGxhY2UoL1xcLi9nLFwiX1wiKTtyZXR1cm4gaT1pK1wiVG8gUmVzb2x2ZSB0aGlzLCB0cnkgb25lIG9mIG9mIHRoZSBmb2xsb3dpbmc6IFxcbjEuIFJlZmFjdG9yIHlvdXIgZ3JhbW1hciB0byBiZSBMTChLKSBmb3IgdGhlIGN1cnJlbnQgdmFsdWUgb2YgayAoYnkgZGVmYXVsdCBrPVwiK3AuREVGQVVMVF9QQVJTRVJfQ09ORklHLm1heExvb2thaGVhZCtcIn0pXFxuMi4gSW5jcmVhc2UgdGhlIHZhbHVlIG9mIEsgZm9yIHlvdXIgZ3JhbW1hciBieSBwcm92aWRpbmcgYSBsYXJnZXIgJ21heExvb2thaGVhZCcgdmFsdWUgaW4gdGhlIHBhcnNlcidzIGNvbmZpZ1xcbjMuIFRoaXMgaXNzdWUgY2FuIGJlIGlnbm9yZWQgKGlmIHlvdSBrbm93IHdoYXQgeW91IGFyZSBkb2luZy4uLiksIHNlZSBodHRwczovL3NhcC5naXRodWIuaW8vY2hldnJvdGFpbi9kb2N1bWVudGF0aW9uL1wiK2ErXCIvaW50ZXJmYWNlcy9pcGFyc2VyY29uZmlnLmh0bWwjaWdub3JlZGlzc3VlcyBmb3IgbW9yZSBkZXRhaWxzXFxuXCJ9LGJ1aWxkRW1wdHlSZXBldGl0aW9uRXJyb3I6ZnVuY3Rpb24odCl7dmFyIGU9cy5nZXRQcm9kdWN0aW9uRHNsTmFtZSh0LnJlcGV0aXRpb24pO3JldHVybiAwIT09dC5yZXBldGl0aW9uLmlkeCYmKGUrPXQucmVwZXRpdGlvbi5pZHgpLFwiVGhlIHJlcGV0aXRpb24gPFwiK2UrXCI+IHdpdGhpbiBSdWxlIDxcIit0LnRvcExldmVsUnVsZS5uYW1lK1wiPiBjYW4gbmV2ZXIgY29uc3VtZSBhbnkgdG9rZW5zLlxcblRoaXMgY291bGQgbGVhZCB0byBhbiBpbmZpbml0ZSBsb29wLlwifSxidWlsZFRva2VuTmFtZUVycm9yOmZ1bmN0aW9uKHQpe3JldHVyblwiSW52YWxpZCBHcmFtbWFyIFRva2VuIG5hbWU6IC0+XCIrci50b2tlbk5hbWUodC50b2tlblR5cGUpK1wiPC0gaXQgbXVzdCBtYXRjaCB0aGUgcGF0dGVybjogLT5cIit0LmV4cGVjdGVkUGF0dGVybi50b1N0cmluZygpK1wiPC1cIn0sYnVpbGRFbXB0eUFsdGVybmF0aW9uRXJyb3I6ZnVuY3Rpb24odCl7cmV0dXJuXCJBbWJpZ3VvdXMgZW1wdHkgYWx0ZXJuYXRpdmU6IDxcIisodC5lbXB0eUNob2ljZUlkeCsxKStcIj4gaW4gPE9SXCIrdC5hbHRlcm5hdGlvbi5pZHgrXCI+IGluc2lkZSA8XCIrdC50b3BMZXZlbFJ1bGUubmFtZStcIj4gUnVsZS5cXG5Pbmx5IHRoZSBsYXN0IGFsdGVybmF0aXZlIG1heSBiZSBhbiBlbXB0eSBhbHRlcm5hdGl2ZS5cIn0sYnVpbGRUb29NYW55QWx0ZXJuYXRpdmVzRXJyb3I6ZnVuY3Rpb24odCl7cmV0dXJuXCJBbiBBbHRlcm5hdGlvbiBjYW5ub3QgaGF2ZSBtb3JlIHRoYW4gMjU2IGFsdGVybmF0aXZlczpcXG48T1JcIit0LmFsdGVybmF0aW9uLmlkeCtcIj4gaW5zaWRlIDxcIit0LnRvcExldmVsUnVsZS5uYW1lK1wiPiBSdWxlLlxcbiBoYXMgXCIrKHQuYWx0ZXJuYXRpb24uZGVmaW5pdGlvbi5sZW5ndGgrMSkrXCIgYWx0ZXJuYXRpdmVzLlwifSxidWlsZExlZnRSZWN1cnNpb25FcnJvcjpmdW5jdGlvbih0KXt2YXIgZT10LnRvcExldmVsUnVsZS5uYW1lO3JldHVyblwiTGVmdCBSZWN1cnNpb24gZm91bmQgaW4gZ3JhbW1hci5cXG5ydWxlOiA8XCIrZStcIj4gY2FuIGJlIGludm9rZWQgZnJvbSBpdHNlbGYgKGRpcmVjdGx5IG9yIGluZGlyZWN0bHkpXFxud2l0aG91dCBjb25zdW1pbmcgYW55IFRva2Vucy4gVGhlIGdyYW1tYXIgcGF0aCB0aGF0IGNhdXNlcyB0aGlzIGlzOiBcXG4gXCIrKGUrXCIgLS1cXHgzZSBcIitpLm1hcCh0LmxlZnRSZWN1cnNpb25QYXRoLGZ1bmN0aW9uKHQpe3JldHVybiB0Lm5hbWV9KS5jb25jYXQoW2VdKS5qb2luKFwiIC0tXFx4M2UgXCIpKStcIlxcbiBUbyBmaXggdGhpcyByZWZhY3RvciB5b3VyIGdyYW1tYXIgdG8gcmVtb3ZlIHRoZSBsZWZ0IHJlY3Vyc2lvbi5cXG5zZWU6IGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0xMX3BhcnNlciNMZWZ0X0ZhY3RvcmluZy5cIn0sYnVpbGRJbnZhbGlkUnVsZU5hbWVFcnJvcjpmdW5jdGlvbih0KXtyZXR1cm5cIkludmFsaWQgZ3JhbW1hciBydWxlIG5hbWU6IC0+XCIrdC50b3BMZXZlbFJ1bGUubmFtZStcIjwtIGl0IG11c3QgbWF0Y2ggdGhlIHBhdHRlcm46IC0+XCIrdC5leHBlY3RlZFBhdHRlcm4udG9TdHJpbmcoKStcIjwtXCJ9LGJ1aWxkRHVwbGljYXRlUnVsZU5hbWVFcnJvcjpmdW5jdGlvbih0KXtyZXR1cm5cIkR1cGxpY2F0ZSBkZWZpbml0aW9uLCBydWxlOiAtPlwiKyh0LnRvcExldmVsUnVsZSBpbnN0YW5jZW9mIGEuUnVsZT90LnRvcExldmVsUnVsZS5uYW1lOnQudG9wTGV2ZWxSdWxlKStcIjwtIGlzIGFscmVhZHkgZGVmaW5lZCBpbiB0aGUgZ3JhbW1hcjogLT5cIit0LmdyYW1tYXJOYW1lK1wiPC1cIn19fSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7dmFyIHIsaT10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8KHI9ZnVuY3Rpb24odCxlKXtyZXR1cm4ocj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24odCxlKXt0Ll9fcHJvdG9fXz1lfXx8ZnVuY3Rpb24odCxlKXtmb3IodmFyIG4gaW4gZSllLmhhc093blByb3BlcnR5KG4pJiYodFtuXT1lW25dKX0pKHQsZSl9LGZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gbigpe3RoaXMuY29uc3RydWN0b3I9dH1yKHQsZSksdC5wcm90b3R5cGU9bnVsbD09PWU/T2JqZWN0LmNyZWF0ZShlKToobi5wcm90b3R5cGU9ZS5wcm90b3R5cGUsbmV3IG4pfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG89bigwKSxhPW4oMCkscz1uKDMpLHU9big4KSxjPW4oMikscD1uKDEyKSxsPW4oMTYpLGg9bigxMyksZj1uKDEpLGQ9big1KTtmdW5jdGlvbiBFKHQpe3JldHVybiB1LmdldFByb2R1Y3Rpb25Ec2xOYW1lKHQpK1wiXyNfXCIrdC5pZHgrXCJfI19cIittKHQpfWZ1bmN0aW9uIG0odCl7cmV0dXJuIHQgaW5zdGFuY2VvZiBmLlRlcm1pbmFsP2MudG9rZW5OYW1lKHQudGVybWluYWxUeXBlKTp0IGluc3RhbmNlb2YgZi5Ob25UZXJtaW5hbD90Lm5vblRlcm1pbmFsTmFtZTpcIlwifWUudmFsaWRhdGVHcmFtbWFyPWZ1bmN0aW9uKHQsZSxuLHIsaSxwKXt2YXIgaD1vLm1hcCh0LGZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbih0LGUpe3ZhciBuPW5ldyB5O3QuYWNjZXB0KG4pO3ZhciByPW4uYWxsUHJvZHVjdGlvbnMsaT1vLmdyb3VwQnkocixFKSxhPW8ucGljayhpLGZ1bmN0aW9uKHQpe3JldHVybiB0Lmxlbmd0aD4xfSk7cmV0dXJuIG8ubWFwKG8udmFsdWVzKGEpLGZ1bmN0aW9uKG4pe3ZhciByPW8uZmlyc3QobiksaT1lLmJ1aWxkRHVwbGljYXRlRm91bmRFcnJvcih0LG4pLGE9dS5nZXRQcm9kdWN0aW9uRHNsTmFtZShyKSxjPXttZXNzYWdlOmksdHlwZTpzLlBhcnNlckRlZmluaXRpb25FcnJvclR5cGUuRFVQTElDQVRFX1BST0RVQ1RJT05TLHJ1bGVOYW1lOnQubmFtZSxkc2xOYW1lOmEsb2NjdXJyZW5jZTpyLmlkeH0scD1tKHIpO3JldHVybiBwJiYoYy5wYXJhbWV0ZXI9cCksY30pfSh0LGkpfSksZj1vLm1hcCh0LGZ1bmN0aW9uKHQpe3JldHVybiBSKHQsdCxpKX0pLGQ9W10sQT1bXSxOPVtdO2EuZXZlcnkoZixhLmlzRW1wdHkpJiYoZD1hLm1hcCh0LGZ1bmN0aW9uKHQpe3JldHVybiBPKHQsaSl9KSxBPWEubWFwKHQsZnVuY3Rpb24odCl7cmV0dXJuIFModCxlLHIsaSl9KSxOPWsodCxlLGkpKTt2YXIgST1mdW5jdGlvbih0LGUsbil7dmFyIHI9W10saT1hLm1hcChlLGZ1bmN0aW9uKHQpe3JldHVybiBjLnRva2VuTmFtZSh0KX0pO3JldHVybiBhLmZvckVhY2godCxmdW5jdGlvbih0KXt2YXIgZT10Lm5hbWU7aWYoYS5jb250YWlucyhpLGUpKXt2YXIgbz1uLmJ1aWxkTmFtZXNwYWNlQ29uZmxpY3RFcnJvcih0KTtyLnB1c2goe21lc3NhZ2U6byx0eXBlOnMuUGFyc2VyRGVmaW5pdGlvbkVycm9yVHlwZS5DT05GTElDVF9UT0tFTlNfUlVMRVNfTkFNRVNQQUNFLHJ1bGVOYW1lOmV9KX19KSxyfSh0LG4saSksUD1vLm1hcChuLGZ1bmN0aW9uKHQpe3JldHVybiBnKHQsaSl9KSx4PWZ1bmN0aW9uKHQsZSl7dmFyIG49W107cmV0dXJuIGEuZm9yRWFjaCh0LGZ1bmN0aW9uKHQpe3ZhciByPW5ldyBsLk5hbWVkRFNMTWV0aG9kc0NvbGxlY3RvclZpc2l0b3IoXCJcIik7dC5hY2NlcHQocik7dmFyIGk9YS5tYXAoci5yZXN1bHQsZnVuY3Rpb24odCl7cmV0dXJuIHQub3JnUHJvZH0pO24ucHVzaChhLm1hcChpLGZ1bmN0aW9uKG4pe3JldHVybiB2KHQsbixlKX0pKX0pLGEuZmxhdHRlbihuKX0odCxpKSxDPWZ1bmN0aW9uKHQsZSl7dmFyIG49W107cmV0dXJuIGEuZm9yRWFjaCh0LGZ1bmN0aW9uKHQpe3ZhciByPW5ldyBsLk5hbWVkRFNMTWV0aG9kc0NvbGxlY3RvclZpc2l0b3IoXCJcIik7dC5hY2NlcHQocik7dmFyIGk9YS5ncm91cEJ5KHIucmVzdWx0LGZ1bmN0aW9uKHQpe3JldHVybiB0Lm5hbWV9KSxvPWEucGljayhpLGZ1bmN0aW9uKHQpe3JldHVybiB0Lmxlbmd0aD4xfSk7YS5mb3JFYWNoKGEudmFsdWVzKG8pLGZ1bmN0aW9uKHIpe3ZhciBpPWEubWFwKHIsZnVuY3Rpb24odCl7cmV0dXJuIHQub3JnUHJvZH0pLG89ZS5idWlsZER1cGxpY2F0ZU5lc3RlZFJ1bGVOYW1lRXJyb3IodCxpKTtuLnB1c2goe21lc3NhZ2U6byx0eXBlOnMuUGFyc2VyRGVmaW5pdGlvbkVycm9yVHlwZS5EVVBMSUNBVEVfTkVTVEVEX05BTUUscnVsZU5hbWU6dC5uYW1lfSl9KX0pLG59KHQsaSksTT1hLm1hcCh0LGZ1bmN0aW9uKHQpe3JldHVybiBMKHQsaSl9KSxGPWEubWFwKHQsZnVuY3Rpb24odCl7cmV0dXJuIFQodCxpKX0pLGI9YS5tYXAodCxmdW5jdGlvbihlKXtyZXR1cm4gXyhlLHQscCxpKX0pO3JldHVybiBvLmZsYXR0ZW4oaC5jb25jYXQoUCx4LEMsTixmLGQsQSxJLE0sRixiKSl9LGUuaWRlbnRpZnlQcm9kdWN0aW9uRm9yRHVwbGljYXRlcz1FO3ZhciB5PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt2YXIgZT1udWxsIT09dCYmdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXM7cmV0dXJuIGUuYWxsUHJvZHVjdGlvbnM9W10sZX1yZXR1cm4gaShlLHQpLGUucHJvdG90eXBlLnZpc2l0Tm9uVGVybWluYWw9ZnVuY3Rpb24odCl7dGhpcy5hbGxQcm9kdWN0aW9ucy5wdXNoKHQpfSxlLnByb3RvdHlwZS52aXNpdE9wdGlvbj1mdW5jdGlvbih0KXt0aGlzLmFsbFByb2R1Y3Rpb25zLnB1c2godCl9LGUucHJvdG90eXBlLnZpc2l0UmVwZXRpdGlvbldpdGhTZXBhcmF0b3I9ZnVuY3Rpb24odCl7dGhpcy5hbGxQcm9kdWN0aW9ucy5wdXNoKHQpfSxlLnByb3RvdHlwZS52aXNpdFJlcGV0aXRpb25NYW5kYXRvcnk9ZnVuY3Rpb24odCl7dGhpcy5hbGxQcm9kdWN0aW9ucy5wdXNoKHQpfSxlLnByb3RvdHlwZS52aXNpdFJlcGV0aXRpb25NYW5kYXRvcnlXaXRoU2VwYXJhdG9yPWZ1bmN0aW9uKHQpe3RoaXMuYWxsUHJvZHVjdGlvbnMucHVzaCh0KX0sZS5wcm90b3R5cGUudmlzaXRSZXBldGl0aW9uPWZ1bmN0aW9uKHQpe3RoaXMuYWxsUHJvZHVjdGlvbnMucHVzaCh0KX0sZS5wcm90b3R5cGUudmlzaXRBbHRlcm5hdGlvbj1mdW5jdGlvbih0KXt0aGlzLmFsbFByb2R1Y3Rpb25zLnB1c2godCl9LGUucHJvdG90eXBlLnZpc2l0VGVybWluYWw9ZnVuY3Rpb24odCl7dGhpcy5hbGxQcm9kdWN0aW9ucy5wdXNoKHQpfSxlfShkLkdBc3RWaXNpdG9yKTtmdW5jdGlvbiBUKHQsbil7dmFyIHI9W10saT10Lm5hbWU7cmV0dXJuIGkubWF0Y2goZS52YWxpZFRlcm1zUGF0dGVybil8fHIucHVzaCh7bWVzc2FnZTpuLmJ1aWxkSW52YWxpZFJ1bGVOYW1lRXJyb3Ioe3RvcExldmVsUnVsZTp0LGV4cGVjdGVkUGF0dGVybjplLnZhbGlkVGVybXNQYXR0ZXJufSksdHlwZTpzLlBhcnNlckRlZmluaXRpb25FcnJvclR5cGUuSU5WQUxJRF9SVUxFX05BTUUscnVsZU5hbWU6aX0pLHJ9ZnVuY3Rpb24gdih0LG4scil7dmFyIGksbz1bXTtyZXR1cm4gbi5uYW1lLm1hdGNoKGUudmFsaWROZXN0ZWRSdWxlTmFtZSl8fChpPXIuYnVpbGRJbnZhbGlkTmVzdGVkUnVsZU5hbWVFcnJvcih0LG4pLG8ucHVzaCh7bWVzc2FnZTppLHR5cGU6cy5QYXJzZXJEZWZpbml0aW9uRXJyb3JUeXBlLklOVkFMSURfTkVTVEVEX1JVTEVfTkFNRSxydWxlTmFtZTp0Lm5hbWV9KSksb31mdW5jdGlvbiBnKHQsbil7dmFyIHI9W107cmV0dXJuIGMudG9rZW5OYW1lKHQpLm1hdGNoKGUudmFsaWRUZXJtc1BhdHRlcm4pfHxyLnB1c2goe21lc3NhZ2U6bi5idWlsZFRva2VuTmFtZUVycm9yKHt0b2tlblR5cGU6dCxleHBlY3RlZFBhdHRlcm46ZS52YWxpZFRlcm1zUGF0dGVybn0pLHR5cGU6cy5QYXJzZXJEZWZpbml0aW9uRXJyb3JUeXBlLklOVkFMSURfVE9LRU5fTkFNRX0pLHJ9ZnVuY3Rpb24gXyh0LGUsbixyKXt2YXIgaT1bXTtpZihhLnJlZHVjZShlLGZ1bmN0aW9uKGUsbil7cmV0dXJuIG4ubmFtZT09PXQubmFtZT9lKzE6ZX0sMCk+MSl7dmFyIG89ci5idWlsZER1cGxpY2F0ZVJ1bGVOYW1lRXJyb3Ioe3RvcExldmVsUnVsZTp0LGdyYW1tYXJOYW1lOm59KTtpLnB1c2goe21lc3NhZ2U6byx0eXBlOnMuUGFyc2VyRGVmaW5pdGlvbkVycm9yVHlwZS5EVVBMSUNBVEVfUlVMRV9OQU1FLHJ1bGVOYW1lOnQubmFtZX0pfXJldHVybiBpfWZ1bmN0aW9uIFIodCxlLG4scil7dm9pZCAwPT09ciYmKHI9W10pO3ZhciBpPVtdLGE9QShlLmRlZmluaXRpb24pO2lmKG8uaXNFbXB0eShhKSlyZXR1cm5bXTt2YXIgdT10Lm5hbWU7by5jb250YWlucyhhLHQpJiZpLnB1c2goe21lc3NhZ2U6bi5idWlsZExlZnRSZWN1cnNpb25FcnJvcih7dG9wTGV2ZWxSdWxlOnQsbGVmdFJlY3Vyc2lvblBhdGg6cn0pLHR5cGU6cy5QYXJzZXJEZWZpbml0aW9uRXJyb3JUeXBlLkxFRlRfUkVDVVJTSU9OLHJ1bGVOYW1lOnV9KTt2YXIgYz1vLmRpZmZlcmVuY2UoYSxyLmNvbmNhdChbdF0pKSxwPW8ubWFwKGMsZnVuY3Rpb24oZSl7dmFyIGk9by5jbG9uZUFycihyKTtyZXR1cm4gaS5wdXNoKGUpLFIodCxlLG4saSl9KTtyZXR1cm4gaS5jb25jYXQoby5mbGF0dGVuKHApKX1mdW5jdGlvbiBBKHQpe3ZhciBlPVtdO2lmKG8uaXNFbXB0eSh0KSlyZXR1cm4gZTt2YXIgbj1vLmZpcnN0KHQpO2lmKG4gaW5zdGFuY2VvZiBmLk5vblRlcm1pbmFsKWUucHVzaChuLnJlZmVyZW5jZWRSdWxlKTtlbHNlIGlmKG4gaW5zdGFuY2VvZiBmLkZsYXR8fG4gaW5zdGFuY2VvZiBmLk9wdGlvbnx8biBpbnN0YW5jZW9mIGYuUmVwZXRpdGlvbk1hbmRhdG9yeXx8biBpbnN0YW5jZW9mIGYuUmVwZXRpdGlvbk1hbmRhdG9yeVdpdGhTZXBhcmF0b3J8fG4gaW5zdGFuY2VvZiBmLlJlcGV0aXRpb25XaXRoU2VwYXJhdG9yfHxuIGluc3RhbmNlb2YgZi5SZXBldGl0aW9uKWU9ZS5jb25jYXQoQShuLmRlZmluaXRpb24pKTtlbHNlIGlmKG4gaW5zdGFuY2VvZiBmLkFsdGVybmF0aW9uKWU9by5mbGF0dGVuKG8ubWFwKG4uZGVmaW5pdGlvbixmdW5jdGlvbih0KXtyZXR1cm4gQSh0LmRlZmluaXRpb24pfSkpO2Vsc2UgaWYoIShuIGluc3RhbmNlb2YgZi5UZXJtaW5hbCkpdGhyb3cgRXJyb3IoXCJub24gZXhoYXVzdGl2ZSBtYXRjaFwiKTt2YXIgcj11LmlzT3B0aW9uYWxQcm9kKG4pLGk9dC5sZW5ndGg+MTtpZihyJiZpKXt2YXIgYT1vLmRyb3AodCk7cmV0dXJuIGUuY29uY2F0KEEoYSkpfXJldHVybiBlfWUuT2NjdXJyZW5jZVZhbGlkYXRpb25Db2xsZWN0b3I9eSxlLnZhbGlkVGVybXNQYXR0ZXJuPS9eW2EtekEtWl9dXFx3KiQvLGUudmFsaWROZXN0ZWRSdWxlTmFtZT1uZXcgUmVnRXhwKGUudmFsaWRUZXJtc1BhdHRlcm4uc291cmNlLnJlcGxhY2UoXCJeXCIsXCJeXFxcXCRcIikpLGUudmFsaWRhdGVSdWxlTmFtZT1ULGUudmFsaWRhdGVOZXN0ZWRSdWxlTmFtZT12LGUudmFsaWRhdGVUb2tlbk5hbWU9ZyxlLnZhbGlkYXRlUnVsZURvZXNOb3RBbHJlYWR5RXhpc3Q9XyxlLnZhbGlkYXRlUnVsZUlzT3ZlcnJpZGRlbj1mdW5jdGlvbih0LGUsbil7dmFyIHIsaT1bXTtyZXR1cm4gby5jb250YWlucyhlLHQpfHwocj1cIkludmFsaWQgcnVsZSBvdmVycmlkZSwgcnVsZTogLT5cIit0K1wiPC0gY2Fubm90IGJlIG92ZXJyaWRkZW4gaW4gdGhlIGdyYW1tYXI6IC0+XCIrbitcIjwtYXMgaXQgaXMgbm90IGRlZmluZWQgaW4gYW55IG9mIHRoZSBzdXBlciBncmFtbWFycyBcIixpLnB1c2goe21lc3NhZ2U6cix0eXBlOnMuUGFyc2VyRGVmaW5pdGlvbkVycm9yVHlwZS5JTlZBTElEX1JVTEVfT1ZFUlJJREUscnVsZU5hbWU6dH0pKSxpfSxlLnZhbGlkYXRlTm9MZWZ0UmVjdXJzaW9uPVIsZS5nZXRGaXJzdE5vbmVUZXJtaW5hbD1BO3ZhciBOPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt2YXIgZT1udWxsIT09dCYmdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXM7cmV0dXJuIGUuYWx0ZXJuYXRpb25zPVtdLGV9cmV0dXJuIGkoZSx0KSxlLnByb3RvdHlwZS52aXNpdEFsdGVybmF0aW9uPWZ1bmN0aW9uKHQpe3RoaXMuYWx0ZXJuYXRpb25zLnB1c2godCl9LGV9KGQuR0FzdFZpc2l0b3IpO2Z1bmN0aW9uIE8odCxlKXt2YXIgbj1uZXcgTjt0LmFjY2VwdChuKTt2YXIgcj1uLmFsdGVybmF0aW9ucztyZXR1cm4gby5yZWR1Y2UocixmdW5jdGlvbihuLHIpe3ZhciBpPW8uZHJvcFJpZ2h0KHIuZGVmaW5pdGlvbiksYT1vLm1hcChpLGZ1bmN0aW9uKG4saSl7dmFyIGE9aC5uZXh0UG9zc2libGVUb2tlbnNBZnRlcihbbl0sW10sbnVsbCwxKTtyZXR1cm4gby5pc0VtcHR5KGEpP3ttZXNzYWdlOmUuYnVpbGRFbXB0eUFsdGVybmF0aW9uRXJyb3Ioe3RvcExldmVsUnVsZTp0LGFsdGVybmF0aW9uOnIsZW1wdHlDaG9pY2VJZHg6aX0pLHR5cGU6cy5QYXJzZXJEZWZpbml0aW9uRXJyb3JUeXBlLk5PTkVfTEFTVF9FTVBUWV9BTFQscnVsZU5hbWU6dC5uYW1lLG9jY3VycmVuY2U6ci5pZHgsYWx0ZXJuYXRpdmU6aSsxfTpudWxsfSk7cmV0dXJuIG4uY29uY2F0KG8uY29tcGFjdChhKSl9LFtdKX1mdW5jdGlvbiBTKHQsZSxuLHIpe3ZhciBpPW5ldyBOO3QuYWNjZXB0KGkpO3ZhciBjPWkuYWx0ZXJuYXRpb25zLGw9blt0Lm5hbWVdO3JldHVybiBsJiYoYz1hLnJlamVjdChjLGZ1bmN0aW9uKHQpe3JldHVybiBsW3UuZ2V0UHJvZHVjdGlvbkRzbE5hbWUodCkrKDA9PT10LmlkeD9cIlwiOnQuaWR4KV19KSksby5yZWR1Y2UoYyxmdW5jdGlvbihuLGkpe3ZhciB1PWkuaWR4LGM9cC5nZXRMb29rYWhlYWRQYXRoc0Zvck9yKHUsdCxlKSxsPWZ1bmN0aW9uKHQsZSxuLHIpe3ZhciBpPVtdLHU9YS5yZWR1Y2UodCxmdW5jdGlvbihlLG4scil7cmV0dXJuIGEuZm9yRWFjaChuLGZ1bmN0aW9uKG4pe3ZhciBvPVtyXTthLmZvckVhY2godCxmdW5jdGlvbih0LGUpe3IhPT1lJiZwLmNvbnRhaW5zUGF0aCh0LG4pJiZvLnB1c2goZSl9KSxvLmxlbmd0aD4xJiYhcC5jb250YWluc1BhdGgoaSxuKSYmKGkucHVzaChuKSxlLnB1c2goe2FsdHM6byxwYXRoOm59KSl9KSxlfSxbXSk7cmV0dXJuIG8ubWFwKHUsZnVuY3Rpb24odCl7dmFyIGk9YS5tYXAodC5hbHRzLGZ1bmN0aW9uKHQpe3JldHVybiB0KzF9KSxvPXIuYnVpbGRBbHRlcm5hdGlvbkFtYmlndWl0eUVycm9yKHt0b3BMZXZlbFJ1bGU6bixhbHRlcm5hdGlvbjplLGFtYmlndWl0eUluZGljZXM6aSxwcmVmaXhQYXRoOnQucGF0aH0pO3JldHVybnttZXNzYWdlOm8sdHlwZTpzLlBhcnNlckRlZmluaXRpb25FcnJvclR5cGUuQU1CSUdVT1VTX0FMVFMscnVsZU5hbWU6bi5uYW1lLG9jY3VycmVuY2U6ZS5pZHgsYWx0ZXJuYXRpdmVzOlt0LmFsdHNdfX0pfShjLGksdCxyKSxoPVAoYyxpLHQscik7cmV0dXJuIG4uY29uY2F0KGwsaCl9LFtdKX1lLnZhbGlkYXRlRW1wdHlPckFsdGVybmF0aXZlPU8sZS52YWxpZGF0ZUFtYmlndW91c0FsdGVybmF0aW9uQWx0ZXJuYXRpdmVzPVM7dmFyIEk9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3ZhciBlPW51bGwhPT10JiZ0LmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpcztyZXR1cm4gZS5hbGxQcm9kdWN0aW9ucz1bXSxlfXJldHVybiBpKGUsdCksZS5wcm90b3R5cGUudmlzaXRSZXBldGl0aW9uV2l0aFNlcGFyYXRvcj1mdW5jdGlvbih0KXt0aGlzLmFsbFByb2R1Y3Rpb25zLnB1c2godCl9LGUucHJvdG90eXBlLnZpc2l0UmVwZXRpdGlvbk1hbmRhdG9yeT1mdW5jdGlvbih0KXt0aGlzLmFsbFByb2R1Y3Rpb25zLnB1c2godCl9LGUucHJvdG90eXBlLnZpc2l0UmVwZXRpdGlvbk1hbmRhdG9yeVdpdGhTZXBhcmF0b3I9ZnVuY3Rpb24odCl7dGhpcy5hbGxQcm9kdWN0aW9ucy5wdXNoKHQpfSxlLnByb3RvdHlwZS52aXNpdFJlcGV0aXRpb249ZnVuY3Rpb24odCl7dGhpcy5hbGxQcm9kdWN0aW9ucy5wdXNoKHQpfSxlfShkLkdBc3RWaXNpdG9yKTtmdW5jdGlvbiBMKHQsZSl7dmFyIG49bmV3IE47dC5hY2NlcHQobik7dmFyIHI9bi5hbHRlcm5hdGlvbnM7cmV0dXJuIG8ucmVkdWNlKHIsZnVuY3Rpb24obixyKXtyZXR1cm4gci5kZWZpbml0aW9uLmxlbmd0aD4yNTUmJm4ucHVzaCh7bWVzc2FnZTplLmJ1aWxkVG9vTWFueUFsdGVybmF0aXZlc0Vycm9yKHt0b3BMZXZlbFJ1bGU6dCxhbHRlcm5hdGlvbjpyfSksdHlwZTpzLlBhcnNlckRlZmluaXRpb25FcnJvclR5cGUuVE9PX01BTllfQUxUUyxydWxlTmFtZTp0Lm5hbWUsb2NjdXJyZW5jZTpyLmlkeH0pLG59LFtdKX1mdW5jdGlvbiBrKHQsZSxuKXt2YXIgcj1bXTtyZXR1cm4gYS5mb3JFYWNoKHQsZnVuY3Rpb24odCl7dmFyIGk9bmV3IEk7dC5hY2NlcHQoaSk7dmFyIG89aS5hbGxQcm9kdWN0aW9uczthLmZvckVhY2gobyxmdW5jdGlvbihpKXt2YXIgbz1wLmdldFByb2RUeXBlKGkpLHU9aS5pZHgsYz1wLmdldExvb2thaGVhZFBhdGhzRm9yT3B0aW9uYWxQcm9kKHUsdCxvLGUpWzBdO2lmKGEuaXNFbXB0eShhLmZsYXR0ZW4oYykpKXt2YXIgbD1uLmJ1aWxkRW1wdHlSZXBldGl0aW9uRXJyb3Ioe3RvcExldmVsUnVsZTp0LHJlcGV0aXRpb246aX0pO3IucHVzaCh7bWVzc2FnZTpsLHR5cGU6cy5QYXJzZXJEZWZpbml0aW9uRXJyb3JUeXBlLk5PX05PTl9FTVBUWV9MT09LQUhFQUQscnVsZU5hbWU6dC5uYW1lfSl9fSl9KSxyfWZ1bmN0aW9uIFAodCxlLG4scil7dmFyIGk9W10sbz1hLnJlZHVjZSh0LGZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1hLm1hcChlLGZ1bmN0aW9uKHQpe3JldHVybntpZHg6bixwYXRoOnR9fSk7cmV0dXJuIHQuY29uY2F0KHIpfSxbXSk7cmV0dXJuIGEuZm9yRWFjaChvLGZ1bmN0aW9uKHQpe3ZhciB1PXQuaWR4LGM9dC5wYXRoLGw9YS5maW5kQWxsKG8sZnVuY3Rpb24odCl7cmV0dXJuIHQuaWR4PHUmJnAuaXNTdHJpY3RQcmVmaXhPZlBhdGgodC5wYXRoLGMpfSksaD1hLm1hcChsLGZ1bmN0aW9uKHQpe3ZhciBpPVt0LmlkeCsxLHUrMV0sbz0wPT09ZS5pZHg/XCJcIjplLmlkeDtyZXR1cm57bWVzc2FnZTpyLmJ1aWxkQWx0ZXJuYXRpb25QcmVmaXhBbWJpZ3VpdHlFcnJvcih7dG9wTGV2ZWxSdWxlOm4sYWx0ZXJuYXRpb246ZSxhbWJpZ3VpdHlJbmRpY2VzOmkscHJlZml4UGF0aDp0LnBhdGh9KSx0eXBlOnMuUGFyc2VyRGVmaW5pdGlvbkVycm9yVHlwZS5BTUJJR1VPVVNfUFJFRklYX0FMVFMscnVsZU5hbWU6bi5uYW1lLG9jY3VycmVuY2U6byxhbHRlcm5hdGl2ZXM6aX19KTtpPWkuY29uY2F0KGgpfSksaX1lLlJlcGV0aW9uQ29sbGVjdG9yPUksZS52YWxpZGF0ZVRvb01hbnlBbHRzPUwsZS52YWxpZGF0ZVNvbWVOb25FbXB0eUxvb2thaGVhZFBhdGg9ayxlLmNoZWNrUHJlZml4QWx0ZXJuYXRpdmVzQW1iaWd1aXRpZXM9UH0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO3ZhciByLGk9dGhpcyYmdGhpcy5fX2V4dGVuZHN8fChyPWZ1bmN0aW9uKHQsZSl7cmV0dXJuKHI9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKHQsZSl7dC5fX3Byb3RvX189ZX18fGZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuIGluIGUpZS5oYXNPd25Qcm9wZXJ0eShuKSYmKHRbbl09ZVtuXSl9KSh0LGUpfSxmdW5jdGlvbih0LGUpe2Z1bmN0aW9uIG4oKXt0aGlzLmNvbnN0cnVjdG9yPXR9cih0LGUpLHQucHJvdG90eXBlPW51bGw9PT1lP09iamVjdC5jcmVhdGUoZSk6KG4ucHJvdG90eXBlPWUucHJvdG90eXBlLG5ldyBuKX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBvLGE9bigwKSxzPW4oMTMpLHU9bigxNCksYz1uKDcpLHA9bigxKSxsPW4oNSk7IWZ1bmN0aW9uKHQpe3RbdC5PUFRJT049MF09XCJPUFRJT05cIix0W3QuUkVQRVRJVElPTj0xXT1cIlJFUEVUSVRJT05cIix0W3QuUkVQRVRJVElPTl9NQU5EQVRPUlk9Ml09XCJSRVBFVElUSU9OX01BTkRBVE9SWVwiLHRbdC5SRVBFVElUSU9OX01BTkRBVE9SWV9XSVRIX1NFUEFSQVRPUj0zXT1cIlJFUEVUSVRJT05fTUFOREFUT1JZX1dJVEhfU0VQQVJBVE9SXCIsdFt0LlJFUEVUSVRJT05fV0lUSF9TRVBBUkFUT1I9NF09XCJSRVBFVElUSU9OX1dJVEhfU0VQQVJBVE9SXCIsdFt0LkFMVEVSTkFUSU9OPTVdPVwiQUxURVJOQVRJT05cIn0obz1lLlBST0RfVFlQRXx8KGUuUFJPRF9UWVBFPXt9KSksZS5nZXRQcm9kVHlwZT1mdW5jdGlvbih0KXtpZih0IGluc3RhbmNlb2YgcC5PcHRpb24pcmV0dXJuIG8uT1BUSU9OO2lmKHQgaW5zdGFuY2VvZiBwLlJlcGV0aXRpb24pcmV0dXJuIG8uUkVQRVRJVElPTjtpZih0IGluc3RhbmNlb2YgcC5SZXBldGl0aW9uTWFuZGF0b3J5KXJldHVybiBvLlJFUEVUSVRJT05fTUFOREFUT1JZO2lmKHQgaW5zdGFuY2VvZiBwLlJlcGV0aXRpb25NYW5kYXRvcnlXaXRoU2VwYXJhdG9yKXJldHVybiBvLlJFUEVUSVRJT05fTUFOREFUT1JZX1dJVEhfU0VQQVJBVE9SO2lmKHQgaW5zdGFuY2VvZiBwLlJlcGV0aXRpb25XaXRoU2VwYXJhdG9yKXJldHVybiBvLlJFUEVUSVRJT05fV0lUSF9TRVBBUkFUT1I7aWYodCBpbnN0YW5jZW9mIHAuQWx0ZXJuYXRpb24pcmV0dXJuIG8uQUxURVJOQVRJT047dGhyb3cgRXJyb3IoXCJub24gZXhoYXVzdGl2ZSBtYXRjaFwiKX0sZS5idWlsZExvb2thaGVhZEZ1bmNGb3JPcj1mdW5jdGlvbih0LGUsbixyLGksbyl7dmFyIGE9RSh0LGUsbik7cmV0dXJuIG8oYSxyLFQoYSk/Yy50b2tlblN0cnVjdHVyZWRNYXRjaGVyTm9DYXRlZ29yaWVzOmMudG9rZW5TdHJ1Y3R1cmVkTWF0Y2hlcixpKX0sZS5idWlsZExvb2thaGVhZEZ1bmNGb3JPcHRpb25hbFByb2Q9ZnVuY3Rpb24odCxlLG4scixpLG8pe3ZhciBhPW0odCxlLGksbikscz1UKGEpP2MudG9rZW5TdHJ1Y3R1cmVkTWF0Y2hlck5vQ2F0ZWdvcmllczpjLnRva2VuU3RydWN0dXJlZE1hdGNoZXI7cmV0dXJuIG8oYVswXSxzLHIpfSxlLmJ1aWxkQWx0ZXJuYXRpdmVzTG9va0FoZWFkRnVuYz1mdW5jdGlvbih0LGUsbixyKXt2YXIgaT10Lmxlbmd0aCxvPWEuZXZlcnkodCxmdW5jdGlvbih0KXtyZXR1cm4gYS5ldmVyeSh0LGZ1bmN0aW9uKHQpe3JldHVybiAxPT09dC5sZW5ndGh9KX0pO2lmKGUpcmV0dXJuIGZ1bmN0aW9uKGUpe2Zvcih2YXIgcj1hLm1hcChlLGZ1bmN0aW9uKHQpe3JldHVybiB0LkdBVEV9KSxvPTA7bzxpO28rKyl7dmFyIHM9dFtvXSx1PXMubGVuZ3RoLGM9cltvXTtpZih2b2lkIDA9PT1jfHwhMSE9PWMuY2FsbCh0aGlzKSl0OmZvcih2YXIgcD0wO3A8dTtwKyspe2Zvcih2YXIgbD1zW3BdLGg9bC5sZW5ndGgsZj0wO2Y8aDtmKyspe3ZhciBkPXRoaXMuTEEoZisxKTtpZighMT09PW4oZCxsW2ZdKSljb250aW51ZSB0fXJldHVybiBvfX19O2lmKG8mJiFyKXt2YXIgcz1hLm1hcCh0LGZ1bmN0aW9uKHQpe3JldHVybiBhLmZsYXR0ZW4odCl9KSx1PWEucmVkdWNlKHMsZnVuY3Rpb24odCxlLG4pe3JldHVybiBhLmZvckVhY2goZSxmdW5jdGlvbihlKXthLmhhcyh0LGUudG9rZW5UeXBlSWR4KXx8KHRbZS50b2tlblR5cGVJZHhdPW4pLGEuZm9yRWFjaChlLmNhdGVnb3J5TWF0Y2hlcyxmdW5jdGlvbihlKXthLmhhcyh0LGUpfHwodFtlXT1uKX0pfSksdH0sW10pO3JldHVybiBmdW5jdGlvbigpe3ZhciB0PXRoaXMuTEEoMSk7cmV0dXJuIHVbdC50b2tlblR5cGVJZHhdfX1yZXR1cm4gZnVuY3Rpb24oKXtmb3IodmFyIGU9MDtlPGk7ZSsrKXt2YXIgcj10W2VdLG89ci5sZW5ndGg7dDpmb3IodmFyIGE9MDthPG87YSsrKXtmb3IodmFyIHM9clthXSx1PXMubGVuZ3RoLGM9MDtjPHU7YysrKXt2YXIgcD10aGlzLkxBKGMrMSk7aWYoITE9PT1uKHAsc1tjXSkpY29udGludWUgdH1yZXR1cm4gZX19fX0sZS5idWlsZFNpbmdsZUFsdGVybmF0aXZlTG9va2FoZWFkRnVuY3Rpb249ZnVuY3Rpb24odCxlLG4pe3ZhciByPWEuZXZlcnkodCxmdW5jdGlvbih0KXtyZXR1cm4gMT09PXQubGVuZ3RofSksaT10Lmxlbmd0aDtpZihyJiYhbil7dmFyIG89YS5mbGF0dGVuKHQpO2lmKDE9PT1vLmxlbmd0aCYmYS5pc0VtcHR5KG9bMF0uY2F0ZWdvcnlNYXRjaGVzKSl7dmFyIHM9b1swXS50b2tlblR5cGVJZHg7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuTEEoMSkudG9rZW5UeXBlSWR4PT09c319dmFyIHU9YS5yZWR1Y2UobyxmdW5jdGlvbih0LGUsbil7cmV0dXJuIHRbZS50b2tlblR5cGVJZHhdPSEwLGEuZm9yRWFjaChlLmNhdGVnb3J5TWF0Y2hlcyxmdW5jdGlvbihlKXt0W2VdPSEwfSksdH0sW10pO3JldHVybiBmdW5jdGlvbigpe3ZhciB0PXRoaXMuTEEoMSk7cmV0dXJuITA9PT11W3QudG9rZW5UeXBlSWR4XX19cmV0dXJuIGZ1bmN0aW9uKCl7dDpmb3IodmFyIG49MDtuPGk7bisrKXtmb3IodmFyIHI9dFtuXSxvPXIubGVuZ3RoLGE9MDthPG87YSsrKXt2YXIgcz10aGlzLkxBKGErMSk7aWYoITE9PT1lKHMsclthXSkpY29udGludWUgdH1yZXR1cm4hMH1yZXR1cm4hMX19O3ZhciBoPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxuLHIpe3ZhciBpPXQuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gaS50b3BQcm9kPWUsaS50YXJnZXRPY2N1cnJlbmNlPW4saS50YXJnZXRQcm9kVHlwZT1yLGl9cmV0dXJuIGkoZSx0KSxlLnByb3RvdHlwZS5zdGFydFdhbGtpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy53YWxrKHRoaXMudG9wUHJvZCksdGhpcy5yZXN0RGVmfSxlLnByb3RvdHlwZS5jaGVja0lzVGFyZ2V0PWZ1bmN0aW9uKHQsZSxuLHIpe3JldHVybiB0LmlkeD09PXRoaXMudGFyZ2V0T2NjdXJyZW5jZSYmdGhpcy50YXJnZXRQcm9kVHlwZT09PWUmJih0aGlzLnJlc3REZWY9bi5jb25jYXQociksITApfSxlLnByb3RvdHlwZS53YWxrT3B0aW9uPWZ1bmN0aW9uKGUsbixyKXt0aGlzLmNoZWNrSXNUYXJnZXQoZSxvLk9QVElPTixuLHIpfHx0LnByb3RvdHlwZS53YWxrT3B0aW9uLmNhbGwodGhpcyxlLG4scil9LGUucHJvdG90eXBlLndhbGtBdExlYXN0T25lPWZ1bmN0aW9uKGUsbixyKXt0aGlzLmNoZWNrSXNUYXJnZXQoZSxvLlJFUEVUSVRJT05fTUFOREFUT1JZLG4scil8fHQucHJvdG90eXBlLndhbGtPcHRpb24uY2FsbCh0aGlzLGUsbixyKX0sZS5wcm90b3R5cGUud2Fsa0F0TGVhc3RPbmVTZXA9ZnVuY3Rpb24oZSxuLHIpe3RoaXMuY2hlY2tJc1RhcmdldChlLG8uUkVQRVRJVElPTl9NQU5EQVRPUllfV0lUSF9TRVBBUkFUT1IsbixyKXx8dC5wcm90b3R5cGUud2Fsa09wdGlvbi5jYWxsKHRoaXMsZSxuLHIpfSxlLnByb3RvdHlwZS53YWxrTWFueT1mdW5jdGlvbihlLG4scil7dGhpcy5jaGVja0lzVGFyZ2V0KGUsby5SRVBFVElUSU9OLG4scil8fHQucHJvdG90eXBlLndhbGtPcHRpb24uY2FsbCh0aGlzLGUsbixyKX0sZS5wcm90b3R5cGUud2Fsa01hbnlTZXA9ZnVuY3Rpb24oZSxuLHIpe3RoaXMuY2hlY2tJc1RhcmdldChlLG8uUkVQRVRJVElPTl9XSVRIX1NFUEFSQVRPUixuLHIpfHx0LnByb3RvdHlwZS53YWxrT3B0aW9uLmNhbGwodGhpcyxlLG4scil9LGV9KHUuUmVzdFdhbGtlciksZj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbil7dmFyIHI9dC5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiByLnRhcmdldE9jY3VycmVuY2U9ZSxyLnRhcmdldFByb2RUeXBlPW4sci5yZXN1bHQ9W10scn1yZXR1cm4gaShlLHQpLGUucHJvdG90eXBlLmNoZWNrSXNUYXJnZXQ9ZnVuY3Rpb24odCxlKXt0LmlkeD09PXRoaXMudGFyZ2V0T2NjdXJyZW5jZSYmdGhpcy50YXJnZXRQcm9kVHlwZT09PWUmJih0aGlzLnJlc3VsdD10LmRlZmluaXRpb24pfSxlLnByb3RvdHlwZS52aXNpdE9wdGlvbj1mdW5jdGlvbih0KXt0aGlzLmNoZWNrSXNUYXJnZXQodCxvLk9QVElPTil9LGUucHJvdG90eXBlLnZpc2l0UmVwZXRpdGlvbj1mdW5jdGlvbih0KXt0aGlzLmNoZWNrSXNUYXJnZXQodCxvLlJFUEVUSVRJT04pfSxlLnByb3RvdHlwZS52aXNpdFJlcGV0aXRpb25NYW5kYXRvcnk9ZnVuY3Rpb24odCl7dGhpcy5jaGVja0lzVGFyZ2V0KHQsby5SRVBFVElUSU9OX01BTkRBVE9SWSl9LGUucHJvdG90eXBlLnZpc2l0UmVwZXRpdGlvbk1hbmRhdG9yeVdpdGhTZXBhcmF0b3I9ZnVuY3Rpb24odCl7dGhpcy5jaGVja0lzVGFyZ2V0KHQsby5SRVBFVElUSU9OX01BTkRBVE9SWV9XSVRIX1NFUEFSQVRPUil9LGUucHJvdG90eXBlLnZpc2l0UmVwZXRpdGlvbldpdGhTZXBhcmF0b3I9ZnVuY3Rpb24odCl7dGhpcy5jaGVja0lzVGFyZ2V0KHQsby5SRVBFVElUSU9OX1dJVEhfU0VQQVJBVE9SKX0sZS5wcm90b3R5cGUudmlzaXRBbHRlcm5hdGlvbj1mdW5jdGlvbih0KXt0aGlzLmNoZWNrSXNUYXJnZXQodCxvLkFMVEVSTkFUSU9OKX0sZX0obC5HQXN0VmlzaXRvcik7ZnVuY3Rpb24gZCh0LGUpe2Z1bmN0aW9uIG4odCxlKXtyZXR1cm4gYS5yZWR1Y2UodCxmdW5jdGlvbih0LG4scil7aWYociE9PWUpe3ZhciBpPWEubWFwKG4sZnVuY3Rpb24odCl7cmV0dXJuIHQucGFydGlhbFBhdGh9KTtyZXR1cm4gdC5jb25jYXQoaSl9cmV0dXJuIHR9LFtdKX1mdW5jdGlvbiByKHQsZSl7cmV0dXJuIHZvaWQgMD09PWEuZmluZCh0LGZ1bmN0aW9uKHQpe3JldHVybiBhLmV2ZXJ5KGUsZnVuY3Rpb24oZSxuKXtyZXR1cm4gcj1lLGk9dFtuXSxyPT09aXx8ciYmaSYmKHIuY2F0ZWdvcnlNYXRjaGVzTWFwW2kudG9rZW5UeXBlSWR4XXx8aS5jYXRlZ29yeU1hdGNoZXNNYXBbci50b2tlblR5cGVJZHhdKTt2YXIgcixpfSl9KX1mdW5jdGlvbiBpKHQpe2Zvcih2YXIgZT1bXSxuPTA7bjx0O24rKyllLnB1c2goW10pO3JldHVybiBlfWZvcih2YXIgbz1hLm1hcCh0LGZ1bmN0aW9uKHQpe3JldHVybiBzLnBvc3NpYmxlUGF0aHNGcm9tKFt0XSwxKX0pLHU9aShvLmxlbmd0aCksYz1vLHA9MTtwPD1lO3ArKyl7dmFyIGw9YztjPWkobC5sZW5ndGgpO2Zvcih2YXIgaD0wO2g8bC5sZW5ndGg7aCsrKWZvcih2YXIgZj1sW2hdLGQ9bihsLGgpLEU9MDtFPGYubGVuZ3RoO0UrKyl7dmFyIG09ZltFXS5wYXJ0aWFsUGF0aCxUPWZbRV0uc3VmZml4RGVmO2lmKHIoZCxtKXx8YS5pc0VtcHR5KFQpfHxtLmxlbmd0aD09PWUpe3ZhciB2PXVbaF07eSh2LG0pfHx2LnB1c2gobSl9ZWxzZXt2YXIgZz1zLnBvc3NpYmxlUGF0aHNGcm9tKFQscCsxLG0pO2NbaF09Y1toXS5jb25jYXQoZyl9fX1yZXR1cm4gdX1mdW5jdGlvbiBFKHQsZSxuKXt2YXIgcj1uZXcgZih0LG8uQUxURVJOQVRJT04pO3JldHVybiBlLmFjY2VwdChyKSxkKHIucmVzdWx0LG4pfWZ1bmN0aW9uIG0odCxlLG4scil7dmFyIGk9bmV3IGYodCxuKTtlLmFjY2VwdChpKTt2YXIgbz1pLnJlc3VsdCxhPW5ldyBoKGUsdCxuKS5zdGFydFdhbGtpbmcoKTtyZXR1cm4gZChbbmV3IHAuRmxhdCh7ZGVmaW5pdGlvbjpvfSksbmV3IHAuRmxhdCh7ZGVmaW5pdGlvbjphfSldLHIpfWZ1bmN0aW9uIHkodCxlKXtyZXR1cm4gdm9pZCAwIT09YS5maW5kKHQsZnVuY3Rpb24odCl7cmV0dXJuIGUubGVuZ3RoPT09dC5sZW5ndGgmJmEuZXZlcnkoZSxmdW5jdGlvbihlLG4pe3JldHVybiBlPT09dFtuXXx8dFtuXS5jYXRlZ29yeU1hdGNoZXNNYXBbZS50b2tlblR5cGVJZHhdfSl9KX1mdW5jdGlvbiBUKHQpe3JldHVybiBhLmV2ZXJ5KHQsZnVuY3Rpb24odCl7cmV0dXJuIGEuZXZlcnkodCxmdW5jdGlvbih0KXtyZXR1cm4gYS5ldmVyeSh0LGZ1bmN0aW9uKHQpe3JldHVybiBhLmlzRW1wdHkodC5jYXRlZ29yeU1hdGNoZXMpfSl9KX0pfWUubG9va0FoZWFkU2VxdWVuY2VGcm9tQWx0ZXJuYXRpdmVzPWQsZS5nZXRMb29rYWhlYWRQYXRoc0Zvck9yPUUsZS5nZXRMb29rYWhlYWRQYXRoc0Zvck9wdGlvbmFsUHJvZD1tLGUuY29udGFpbnNQYXRoPXksZS5pc1N0cmljdFByZWZpeE9mUGF0aD1mdW5jdGlvbih0LGUpe3JldHVybiB0Lmxlbmd0aDxlLmxlbmd0aCYmYS5ldmVyeSh0LGZ1bmN0aW9uKHQsbil7dmFyIHI9ZVtuXTtyZXR1cm4gdD09PXJ8fHIuY2F0ZWdvcnlNYXRjaGVzTWFwW3QudG9rZW5UeXBlSWR4XX0pfSxlLmFyZVRva2VuQ2F0ZWdvcmllc05vdFVzZWQ9VH0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO3ZhciByLGk9dGhpcyYmdGhpcy5fX2V4dGVuZHN8fChyPWZ1bmN0aW9uKHQsZSl7cmV0dXJuKHI9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKHQsZSl7dC5fX3Byb3RvX189ZX18fGZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuIGluIGUpZS5oYXNPd25Qcm9wZXJ0eShuKSYmKHRbbl09ZVtuXSl9KSh0LGUpfSxmdW5jdGlvbih0LGUpe2Z1bmN0aW9uIG4oKXt0aGlzLmNvbnN0cnVjdG9yPXR9cih0LGUpLHQucHJvdG90eXBlPW51bGw9PT1lP09iamVjdC5jcmVhdGUoZSk6KG4ucHJvdG90eXBlPWUucHJvdG90eXBlLG5ldyBuKX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBvPW4oMTQpLGE9bigwKSxzPW4oMiksdT1uKDIxKSxjPW4oMSkscD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbil7dmFyIHI9dC5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiByLnRvcFByb2Q9ZSxyLnBhdGg9bixyLnBvc3NpYmxlVG9rVHlwZXM9W10sci5uZXh0UHJvZHVjdGlvbk5hbWU9XCJcIixyLm5leHRQcm9kdWN0aW9uT2NjdXJyZW5jZT0wLHIuZm91bmQ9ITEsci5pc0F0RW5kT2ZQYXRoPSExLHJ9cmV0dXJuIGkoZSx0KSxlLnByb3RvdHlwZS5zdGFydFdhbGtpbmc9ZnVuY3Rpb24oKXtpZih0aGlzLmZvdW5kPSExLHRoaXMucGF0aC5ydWxlU3RhY2tbMF0hPT10aGlzLnRvcFByb2QubmFtZSl0aHJvdyBFcnJvcihcIlRoZSBwYXRoIGRvZXMgbm90IHN0YXJ0IHdpdGggdGhlIHdhbGtlcidzIHRvcCBSdWxlIVwiKTtyZXR1cm4gdGhpcy5ydWxlU3RhY2s9YS5jbG9uZUFycih0aGlzLnBhdGgucnVsZVN0YWNrKS5yZXZlcnNlKCksdGhpcy5vY2N1cnJlbmNlU3RhY2s9YS5jbG9uZUFycih0aGlzLnBhdGgub2NjdXJyZW5jZVN0YWNrKS5yZXZlcnNlKCksdGhpcy5ydWxlU3RhY2sucG9wKCksdGhpcy5vY2N1cnJlbmNlU3RhY2sucG9wKCksdGhpcy51cGRhdGVFeHBlY3RlZE5leHQoKSx0aGlzLndhbGsodGhpcy50b3BQcm9kKSx0aGlzLnBvc3NpYmxlVG9rVHlwZXN9LGUucHJvdG90eXBlLndhbGs9ZnVuY3Rpb24oZSxuKXt2b2lkIDA9PT1uJiYobj1bXSksdGhpcy5mb3VuZHx8dC5wcm90b3R5cGUud2Fsay5jYWxsKHRoaXMsZSxuKX0sZS5wcm90b3R5cGUud2Fsa1Byb2RSZWY9ZnVuY3Rpb24odCxlLG4pe2lmKHQucmVmZXJlbmNlZFJ1bGUubmFtZT09PXRoaXMubmV4dFByb2R1Y3Rpb25OYW1lJiZ0LmlkeD09PXRoaXMubmV4dFByb2R1Y3Rpb25PY2N1cnJlbmNlKXt2YXIgcj1lLmNvbmNhdChuKTt0aGlzLnVwZGF0ZUV4cGVjdGVkTmV4dCgpLHRoaXMud2Fsayh0LnJlZmVyZW5jZWRSdWxlLHIpfX0sZS5wcm90b3R5cGUudXBkYXRlRXhwZWN0ZWROZXh0PWZ1bmN0aW9uKCl7YS5pc0VtcHR5KHRoaXMucnVsZVN0YWNrKT8odGhpcy5uZXh0UHJvZHVjdGlvbk5hbWU9XCJcIix0aGlzLm5leHRQcm9kdWN0aW9uT2NjdXJyZW5jZT0wLHRoaXMuaXNBdEVuZE9mUGF0aD0hMCk6KHRoaXMubmV4dFByb2R1Y3Rpb25OYW1lPXRoaXMucnVsZVN0YWNrLnBvcCgpLHRoaXMubmV4dFByb2R1Y3Rpb25PY2N1cnJlbmNlPXRoaXMub2NjdXJyZW5jZVN0YWNrLnBvcCgpKX0sZX0oby5SZXN0V2Fsa2VyKTtlLkFic3RyYWN0TmV4dFBvc3NpYmxlVG9rZW5zV2Fsa2VyPXA7dmFyIGw9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4pe3ZhciByPXQuY2FsbCh0aGlzLGUsbil8fHRoaXM7cmV0dXJuIHIucGF0aD1uLHIubmV4dFRlcm1pbmFsTmFtZT1cIlwiLHIubmV4dFRlcm1pbmFsT2NjdXJyZW5jZT0wLHIubmV4dFRlcm1pbmFsTmFtZT1zLnRva2VuTmFtZShyLnBhdGgubGFzdFRvayksci5uZXh0VGVybWluYWxPY2N1cnJlbmNlPXIucGF0aC5sYXN0VG9rT2NjdXJyZW5jZSxyfXJldHVybiBpKGUsdCksZS5wcm90b3R5cGUud2Fsa1Rlcm1pbmFsPWZ1bmN0aW9uKHQsZSxuKXtpZih0aGlzLmlzQXRFbmRPZlBhdGgmJnMudG9rZW5OYW1lKHQudGVybWluYWxUeXBlKT09PXRoaXMubmV4dFRlcm1pbmFsTmFtZSYmdC5pZHg9PT10aGlzLm5leHRUZXJtaW5hbE9jY3VycmVuY2UmJiF0aGlzLmZvdW5kKXt2YXIgcj1lLmNvbmNhdChuKSxpPW5ldyBjLkZsYXQoe2RlZmluaXRpb246cn0pO3RoaXMucG9zc2libGVUb2tUeXBlcz11LmZpcnN0KGkpLHRoaXMuZm91bmQ9ITB9fSxlfShwKTtlLk5leHRBZnRlclRva2VuV2Fsa2VyPWw7dmFyIGg9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4pe3ZhciByPXQuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gci50b3BSdWxlPWUsci5vY2N1cnJlbmNlPW4sci5yZXN1bHQ9e3Rva2VuOnZvaWQgMCxvY2N1cnJlbmNlOnZvaWQgMCxpc0VuZE9mUnVsZTp2b2lkIDB9LHJ9cmV0dXJuIGkoZSx0KSxlLnByb3RvdHlwZS5zdGFydFdhbGtpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy53YWxrKHRoaXMudG9wUnVsZSksdGhpcy5yZXN1bHR9LGV9KG8uUmVzdFdhbGtlcik7ZS5BYnN0cmFjdE5leHRUZXJtaW5hbEFmdGVyUHJvZHVjdGlvbldhbGtlcj1oO3ZhciBmPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gbnVsbCE9PXQmJnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzfXJldHVybiBpKGUsdCksZS5wcm90b3R5cGUud2Fsa01hbnk9ZnVuY3Rpb24oZSxuLHIpe2lmKGUuaWR4PT09dGhpcy5vY2N1cnJlbmNlKXt2YXIgaT1hLmZpcnN0KG4uY29uY2F0KHIpKTt0aGlzLnJlc3VsdC5pc0VuZE9mUnVsZT12b2lkIDA9PT1pLGkgaW5zdGFuY2VvZiBjLlRlcm1pbmFsJiYodGhpcy5yZXN1bHQudG9rZW49aS50ZXJtaW5hbFR5cGUsdGhpcy5yZXN1bHQub2NjdXJyZW5jZT1pLmlkeCl9ZWxzZSB0LnByb3RvdHlwZS53YWxrTWFueS5jYWxsKHRoaXMsZSxuLHIpfSxlfShoKTtlLk5leHRUZXJtaW5hbEFmdGVyTWFueVdhbGtlcj1mO3ZhciBkPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gbnVsbCE9PXQmJnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzfXJldHVybiBpKGUsdCksZS5wcm90b3R5cGUud2Fsa01hbnlTZXA9ZnVuY3Rpb24oZSxuLHIpe2lmKGUuaWR4PT09dGhpcy5vY2N1cnJlbmNlKXt2YXIgaT1hLmZpcnN0KG4uY29uY2F0KHIpKTt0aGlzLnJlc3VsdC5pc0VuZE9mUnVsZT12b2lkIDA9PT1pLGkgaW5zdGFuY2VvZiBjLlRlcm1pbmFsJiYodGhpcy5yZXN1bHQudG9rZW49aS50ZXJtaW5hbFR5cGUsdGhpcy5yZXN1bHQub2NjdXJyZW5jZT1pLmlkeCl9ZWxzZSB0LnByb3RvdHlwZS53YWxrTWFueVNlcC5jYWxsKHRoaXMsZSxuLHIpfSxlfShoKTtlLk5leHRUZXJtaW5hbEFmdGVyTWFueVNlcFdhbGtlcj1kO3ZhciBFPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gbnVsbCE9PXQmJnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzfXJldHVybiBpKGUsdCksZS5wcm90b3R5cGUud2Fsa0F0TGVhc3RPbmU9ZnVuY3Rpb24oZSxuLHIpe2lmKGUuaWR4PT09dGhpcy5vY2N1cnJlbmNlKXt2YXIgaT1hLmZpcnN0KG4uY29uY2F0KHIpKTt0aGlzLnJlc3VsdC5pc0VuZE9mUnVsZT12b2lkIDA9PT1pLGkgaW5zdGFuY2VvZiBjLlRlcm1pbmFsJiYodGhpcy5yZXN1bHQudG9rZW49aS50ZXJtaW5hbFR5cGUsdGhpcy5yZXN1bHQub2NjdXJyZW5jZT1pLmlkeCl9ZWxzZSB0LnByb3RvdHlwZS53YWxrQXRMZWFzdE9uZS5jYWxsKHRoaXMsZSxuLHIpfSxlfShoKTtlLk5leHRUZXJtaW5hbEFmdGVyQXRMZWFzdE9uZVdhbGtlcj1FO3ZhciBtPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gbnVsbCE9PXQmJnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzfXJldHVybiBpKGUsdCksZS5wcm90b3R5cGUud2Fsa0F0TGVhc3RPbmVTZXA9ZnVuY3Rpb24oZSxuLHIpe2lmKGUuaWR4PT09dGhpcy5vY2N1cnJlbmNlKXt2YXIgaT1hLmZpcnN0KG4uY29uY2F0KHIpKTt0aGlzLnJlc3VsdC5pc0VuZE9mUnVsZT12b2lkIDA9PT1pLGkgaW5zdGFuY2VvZiBjLlRlcm1pbmFsJiYodGhpcy5yZXN1bHQudG9rZW49aS50ZXJtaW5hbFR5cGUsdGhpcy5yZXN1bHQub2NjdXJyZW5jZT1pLmlkeCl9ZWxzZSB0LnByb3RvdHlwZS53YWxrQXRMZWFzdE9uZVNlcC5jYWxsKHRoaXMsZSxuLHIpfSxlfShoKTtmdW5jdGlvbiB5KHQsZSxuLHIpe3ZhciBpPWEuY2xvbmVBcnIobik7aS5wdXNoKHQubmFtZSk7dmFyIG89YS5jbG9uZUFycihyKTtyZXR1cm4gby5wdXNoKDEpLHtpZHg6ZSxkZWY6dC5kZWZpbml0aW9uLHJ1bGVTdGFjazppLG9jY3VycmVuY2VTdGFjazpvfX1lLk5leHRUZXJtaW5hbEFmdGVyQXRMZWFzdE9uZVNlcFdhbGtlcj1tLGUucG9zc2libGVQYXRoc0Zyb209ZnVuY3Rpb24gdChlLG4scil7dm9pZCAwPT09ciYmKHI9W10pLHI9YS5jbG9uZUFycihyKTt2YXIgaT1bXSxvPTA7ZnVuY3Rpb24gcyhzKXt2YXIgdT10KHMuY29uY2F0KGEuZHJvcChlLG8rMSkpLG4scik7cmV0dXJuIGkuY29uY2F0KHUpfWZvcig7ci5sZW5ndGg8biYmbzxlLmxlbmd0aDspe3ZhciB1PWVbb107aWYodSBpbnN0YW5jZW9mIGMuRmxhdClyZXR1cm4gcyh1LmRlZmluaXRpb24pO2lmKHUgaW5zdGFuY2VvZiBjLk5vblRlcm1pbmFsKXJldHVybiBzKHUuZGVmaW5pdGlvbik7aWYodSBpbnN0YW5jZW9mIGMuT3B0aW9uKWk9cyh1LmRlZmluaXRpb24pO2Vsc2V7aWYodSBpbnN0YW5jZW9mIGMuUmVwZXRpdGlvbk1hbmRhdG9yeSlyZXR1cm4gcyhwPXUuZGVmaW5pdGlvbi5jb25jYXQoW25ldyBjLlJlcGV0aXRpb24oe2RlZmluaXRpb246dS5kZWZpbml0aW9ufSldKSk7aWYodSBpbnN0YW5jZW9mIGMuUmVwZXRpdGlvbk1hbmRhdG9yeVdpdGhTZXBhcmF0b3IpcmV0dXJuIHMocD1bbmV3IGMuRmxhdCh7ZGVmaW5pdGlvbjp1LmRlZmluaXRpb259KSxuZXcgYy5SZXBldGl0aW9uKHtkZWZpbml0aW9uOltuZXcgYy5UZXJtaW5hbCh7dGVybWluYWxUeXBlOnUuc2VwYXJhdG9yfSldLmNvbmNhdCh1LmRlZmluaXRpb24pfSldKTtpZih1IGluc3RhbmNlb2YgYy5SZXBldGl0aW9uV2l0aFNlcGFyYXRvcil7dmFyIHA9dS5kZWZpbml0aW9uLmNvbmNhdChbbmV3IGMuUmVwZXRpdGlvbih7ZGVmaW5pdGlvbjpbbmV3IGMuVGVybWluYWwoe3Rlcm1pbmFsVHlwZTp1LnNlcGFyYXRvcn0pXS5jb25jYXQodS5kZWZpbml0aW9uKX0pXSk7aT1zKHApfWVsc2UgaWYodSBpbnN0YW5jZW9mIGMuUmVwZXRpdGlvbilwPXUuZGVmaW5pdGlvbi5jb25jYXQoW25ldyBjLlJlcGV0aXRpb24oe2RlZmluaXRpb246dS5kZWZpbml0aW9ufSldKSxpPXMocCk7ZWxzZXtpZih1IGluc3RhbmNlb2YgYy5BbHRlcm5hdGlvbilyZXR1cm4gYS5mb3JFYWNoKHUuZGVmaW5pdGlvbixmdW5jdGlvbih0KXtpPXModC5kZWZpbml0aW9uKX0pLGk7aWYoISh1IGluc3RhbmNlb2YgYy5UZXJtaW5hbCkpdGhyb3cgRXJyb3IoXCJub24gZXhoYXVzdGl2ZSBtYXRjaFwiKTtyLnB1c2godS50ZXJtaW5hbFR5cGUpfX1vKyt9cmV0dXJuIGkucHVzaCh7cGFydGlhbFBhdGg6cixzdWZmaXhEZWY6YS5kcm9wKGUsbyl9KSxpfSxlLm5leHRQb3NzaWJsZVRva2Vuc0FmdGVyPWZ1bmN0aW9uKHQsZSxuLHIpe3ZhciBpPVtcIkVYSVRfTk9ORV9URVJNSU5BTFwiXSxvPSExLHM9ZS5sZW5ndGgsdT1zLXItMSxwPVtdLGw9W107Zm9yKGwucHVzaCh7aWR4Oi0xLGRlZjp0LHJ1bGVTdGFjazpbXSxvY2N1cnJlbmNlU3RhY2s6W119KTshYS5pc0VtcHR5KGwpOyl7dmFyIGg9bC5wb3AoKTtpZihcIkVYSVRfQUxURVJOQVRJVkVcIiE9PWgpe3ZhciBmPWguZGVmLGQ9aC5pZHgsRT1oLnJ1bGVTdGFjayxtPWgub2NjdXJyZW5jZVN0YWNrO2lmKCFhLmlzRW1wdHkoZikpe3ZhciBUPWZbMF07aWYoXCJFWElUX05PTkVfVEVSTUlOQUxcIj09PVQpe3ZhciB2PXtpZHg6ZCxkZWY6YS5kcm9wKGYpLHJ1bGVTdGFjazphLmRyb3BSaWdodChFKSxvY2N1cnJlbmNlU3RhY2s6YS5kcm9wUmlnaHQobSl9O2wucHVzaCh2KX1lbHNlIGlmKFQgaW5zdGFuY2VvZiBjLlRlcm1pbmFsKWlmKGQ8cy0xKXt2YXIgZz1kKzE7bihlW2ddLFQudGVybWluYWxUeXBlKSYmKHY9e2lkeDpnLGRlZjphLmRyb3AoZikscnVsZVN0YWNrOkUsb2NjdXJyZW5jZVN0YWNrOm19LGwucHVzaCh2KSl9ZWxzZXtpZihkIT09cy0xKXRocm93IEVycm9yKFwibm9uIGV4aGF1c3RpdmUgbWF0Y2hcIik7cC5wdXNoKHtuZXh0VG9rZW5UeXBlOlQudGVybWluYWxUeXBlLG5leHRUb2tlbk9jY3VycmVuY2U6VC5pZHgscnVsZVN0YWNrOkUsb2NjdXJyZW5jZVN0YWNrOm19KSxvPSEwfWVsc2UgaWYoVCBpbnN0YW5jZW9mIGMuTm9uVGVybWluYWwpe3ZhciBfPWEuY2xvbmVBcnIoRSk7Xy5wdXNoKFQubm9uVGVybWluYWxOYW1lKTt2YXIgUj1hLmNsb25lQXJyKG0pO1IucHVzaChULmlkeCksdj17aWR4OmQsZGVmOlQuZGVmaW5pdGlvbi5jb25jYXQoaSxhLmRyb3AoZikpLHJ1bGVTdGFjazpfLG9jY3VycmVuY2VTdGFjazpSfSxsLnB1c2godil9ZWxzZSBpZihUIGluc3RhbmNlb2YgYy5PcHRpb24pe3ZhciBBPXtpZHg6ZCxkZWY6YS5kcm9wKGYpLHJ1bGVTdGFjazpFLG9jY3VycmVuY2VTdGFjazptfTtsLnB1c2goQSksbC5wdXNoKFwiRVhJVF9BTFRFUk5BVElWRVwiKTt2YXIgTj17aWR4OmQsZGVmOlQuZGVmaW5pdGlvbi5jb25jYXQoYS5kcm9wKGYpKSxydWxlU3RhY2s6RSxvY2N1cnJlbmNlU3RhY2s6bX07bC5wdXNoKE4pfWVsc2UgaWYoVCBpbnN0YW5jZW9mIGMuUmVwZXRpdGlvbk1hbmRhdG9yeSl7dmFyIE89bmV3IGMuUmVwZXRpdGlvbih7ZGVmaW5pdGlvbjpULmRlZmluaXRpb24saWR4OlQuaWR4fSk7dj17aWR4OmQsZGVmOlQuZGVmaW5pdGlvbi5jb25jYXQoW09dLGEuZHJvcChmKSkscnVsZVN0YWNrOkUsb2NjdXJyZW5jZVN0YWNrOm19LGwucHVzaCh2KX1lbHNlIGlmKFQgaW5zdGFuY2VvZiBjLlJlcGV0aXRpb25NYW5kYXRvcnlXaXRoU2VwYXJhdG9yKXt2YXIgUz1uZXcgYy5UZXJtaW5hbCh7dGVybWluYWxUeXBlOlQuc2VwYXJhdG9yfSk7Tz1uZXcgYy5SZXBldGl0aW9uKHtkZWZpbml0aW9uOltTXS5jb25jYXQoVC5kZWZpbml0aW9uKSxpZHg6VC5pZHh9KSx2PXtpZHg6ZCxkZWY6VC5kZWZpbml0aW9uLmNvbmNhdChbT10sYS5kcm9wKGYpKSxydWxlU3RhY2s6RSxvY2N1cnJlbmNlU3RhY2s6bX0sbC5wdXNoKHYpfWVsc2UgaWYoVCBpbnN0YW5jZW9mIGMuUmVwZXRpdGlvbldpdGhTZXBhcmF0b3Ipe0E9e2lkeDpkLGRlZjphLmRyb3AoZikscnVsZVN0YWNrOkUsb2NjdXJyZW5jZVN0YWNrOm19LGwucHVzaChBKSxsLnB1c2goXCJFWElUX0FMVEVSTkFUSVZFXCIpLFM9bmV3IGMuVGVybWluYWwoe3Rlcm1pbmFsVHlwZTpULnNlcGFyYXRvcn0pO3ZhciBJPW5ldyBjLlJlcGV0aXRpb24oe2RlZmluaXRpb246W1NdLmNvbmNhdChULmRlZmluaXRpb24pLGlkeDpULmlkeH0pO049e2lkeDpkLGRlZjpULmRlZmluaXRpb24uY29uY2F0KFtJXSxhLmRyb3AoZikpLHJ1bGVTdGFjazpFLG9jY3VycmVuY2VTdGFjazptfSxsLnB1c2goTil9ZWxzZSBpZihUIGluc3RhbmNlb2YgYy5SZXBldGl0aW9uKUE9e2lkeDpkLGRlZjphLmRyb3AoZikscnVsZVN0YWNrOkUsb2NjdXJyZW5jZVN0YWNrOm19LGwucHVzaChBKSxsLnB1c2goXCJFWElUX0FMVEVSTkFUSVZFXCIpLEk9bmV3IGMuUmVwZXRpdGlvbih7ZGVmaW5pdGlvbjpULmRlZmluaXRpb24saWR4OlQuaWR4fSksTj17aWR4OmQsZGVmOlQuZGVmaW5pdGlvbi5jb25jYXQoW0ldLGEuZHJvcChmKSkscnVsZVN0YWNrOkUsb2NjdXJyZW5jZVN0YWNrOm19LGwucHVzaChOKTtlbHNlIGlmKFQgaW5zdGFuY2VvZiBjLkFsdGVybmF0aW9uKWZvcih2YXIgTD1ULmRlZmluaXRpb24ubGVuZ3RoLTE7TD49MDtMLS0pe3ZhciBrPXtpZHg6ZCxkZWY6VC5kZWZpbml0aW9uW0xdLmRlZmluaXRpb24uY29uY2F0KGEuZHJvcChmKSkscnVsZVN0YWNrOkUsb2NjdXJyZW5jZVN0YWNrOm19O2wucHVzaChrKSxsLnB1c2goXCJFWElUX0FMVEVSTkFUSVZFXCIpfWVsc2UgaWYoVCBpbnN0YW5jZW9mIGMuRmxhdClsLnB1c2goe2lkeDpkLGRlZjpULmRlZmluaXRpb24uY29uY2F0KGEuZHJvcChmKSkscnVsZVN0YWNrOkUsb2NjdXJyZW5jZVN0YWNrOm19KTtlbHNle2lmKCEoVCBpbnN0YW5jZW9mIGMuUnVsZSkpdGhyb3cgRXJyb3IoXCJub24gZXhoYXVzdGl2ZSBtYXRjaFwiKTtsLnB1c2goeShULGQsRSxtKSl9fX1lbHNlIG8mJmEubGFzdChsKS5pZHg8PXUmJmwucG9wKCl9cmV0dXJuIHB9fSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIHI9bigwKSxpPW4oMSksbz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt9cmV0dXJuIHQucHJvdG90eXBlLndhbGs9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzO3ZvaWQgMD09PWUmJihlPVtdKSxyLmZvckVhY2godC5kZWZpbml0aW9uLGZ1bmN0aW9uKG8sYSl7dmFyIHM9ci5kcm9wKHQuZGVmaW5pdGlvbixhKzEpO2lmKG8gaW5zdGFuY2VvZiBpLk5vblRlcm1pbmFsKW4ud2Fsa1Byb2RSZWYobyxzLGUpO2Vsc2UgaWYobyBpbnN0YW5jZW9mIGkuVGVybWluYWwpbi53YWxrVGVybWluYWwobyxzLGUpO2Vsc2UgaWYobyBpbnN0YW5jZW9mIGkuRmxhdCluLndhbGtGbGF0KG8scyxlKTtlbHNlIGlmKG8gaW5zdGFuY2VvZiBpLk9wdGlvbiluLndhbGtPcHRpb24obyxzLGUpO2Vsc2UgaWYobyBpbnN0YW5jZW9mIGkuUmVwZXRpdGlvbk1hbmRhdG9yeSluLndhbGtBdExlYXN0T25lKG8scyxlKTtlbHNlIGlmKG8gaW5zdGFuY2VvZiBpLlJlcGV0aXRpb25NYW5kYXRvcnlXaXRoU2VwYXJhdG9yKW4ud2Fsa0F0TGVhc3RPbmVTZXAobyxzLGUpO2Vsc2UgaWYobyBpbnN0YW5jZW9mIGkuUmVwZXRpdGlvbldpdGhTZXBhcmF0b3Ipbi53YWxrTWFueVNlcChvLHMsZSk7ZWxzZSBpZihvIGluc3RhbmNlb2YgaS5SZXBldGl0aW9uKW4ud2Fsa01hbnkobyxzLGUpO2Vsc2V7aWYoIShvIGluc3RhbmNlb2YgaS5BbHRlcm5hdGlvbikpdGhyb3cgRXJyb3IoXCJub24gZXhoYXVzdGl2ZSBtYXRjaFwiKTtuLndhbGtPcihvLHMsZSl9fSl9LHQucHJvdG90eXBlLndhbGtUZXJtaW5hbD1mdW5jdGlvbih0LGUsbil7fSx0LnByb3RvdHlwZS53YWxrUHJvZFJlZj1mdW5jdGlvbih0LGUsbil7fSx0LnByb3RvdHlwZS53YWxrRmxhdD1mdW5jdGlvbih0LGUsbil7dmFyIHI9ZS5jb25jYXQobik7dGhpcy53YWxrKHQscil9LHQucHJvdG90eXBlLndhbGtPcHRpb249ZnVuY3Rpb24odCxlLG4pe3ZhciByPWUuY29uY2F0KG4pO3RoaXMud2Fsayh0LHIpfSx0LnByb3RvdHlwZS53YWxrQXRMZWFzdE9uZT1mdW5jdGlvbih0LGUsbil7dmFyIHI9W25ldyBpLk9wdGlvbih7ZGVmaW5pdGlvbjp0LmRlZmluaXRpb259KV0uY29uY2F0KGUsbik7dGhpcy53YWxrKHQscil9LHQucHJvdG90eXBlLndhbGtBdExlYXN0T25lU2VwPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1hKHQsZSxuKTt0aGlzLndhbGsodCxyKX0sdC5wcm90b3R5cGUud2Fsa01hbnk9ZnVuY3Rpb24odCxlLG4pe3ZhciByPVtuZXcgaS5PcHRpb24oe2RlZmluaXRpb246dC5kZWZpbml0aW9ufSldLmNvbmNhdChlLG4pO3RoaXMud2Fsayh0LHIpfSx0LnByb3RvdHlwZS53YWxrTWFueVNlcD1mdW5jdGlvbih0LGUsbil7dmFyIHI9YSh0LGUsbik7dGhpcy53YWxrKHQscil9LHQucHJvdG90eXBlLndhbGtPcj1mdW5jdGlvbih0LGUsbil7dmFyIG89dGhpcyxhPWUuY29uY2F0KG4pO3IuZm9yRWFjaCh0LmRlZmluaXRpb24sZnVuY3Rpb24odCl7dmFyIGU9bmV3IGkuRmxhdCh7ZGVmaW5pdGlvbjpbdF19KTtvLndhbGsoZSxhKX0pfSx0fSgpO2Z1bmN0aW9uIGEodCxlLG4pe3JldHVybltuZXcgaS5PcHRpb24oe2RlZmluaXRpb246W25ldyBpLlRlcm1pbmFsKHt0ZXJtaW5hbFR5cGU6dC5zZXBhcmF0b3J9KV0uY29uY2F0KHQuZGVmaW5pdGlvbil9KV0uY29uY2F0KGUsbil9ZS5SZXN0V2Fsa2VyPW99LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgcj1uKDI3KSxpPW4oMCksbz1uKDcpLGE9bigyMCk7IWZ1bmN0aW9uKHQpe3RbdC5NSVNTSU5HX1BBVFRFUk49MF09XCJNSVNTSU5HX1BBVFRFUk5cIix0W3QuSU5WQUxJRF9QQVRURVJOPTFdPVwiSU5WQUxJRF9QQVRURVJOXCIsdFt0LkVPSV9BTkNIT1JfRk9VTkQ9Ml09XCJFT0lfQU5DSE9SX0ZPVU5EXCIsdFt0LlVOU1VQUE9SVEVEX0ZMQUdTX0ZPVU5EPTNdPVwiVU5TVVBQT1JURURfRkxBR1NfRk9VTkRcIix0W3QuRFVQTElDQVRFX1BBVFRFUk5TX0ZPVU5EPTRdPVwiRFVQTElDQVRFX1BBVFRFUk5TX0ZPVU5EXCIsdFt0LklOVkFMSURfR1JPVVBfVFlQRV9GT1VORD01XT1cIklOVkFMSURfR1JPVVBfVFlQRV9GT1VORFwiLHRbdC5QVVNIX01PREVfRE9FU19OT1RfRVhJU1Q9Nl09XCJQVVNIX01PREVfRE9FU19OT1RfRVhJU1RcIix0W3QuTVVMVElfTU9ERV9MRVhFUl9XSVRIT1VUX0RFRkFVTFRfTU9ERT03XT1cIk1VTFRJX01PREVfTEVYRVJfV0lUSE9VVF9ERUZBVUxUX01PREVcIix0W3QuTVVMVElfTU9ERV9MRVhFUl9XSVRIT1VUX01PREVTX1BST1BFUlRZPThdPVwiTVVMVElfTU9ERV9MRVhFUl9XSVRIT1VUX01PREVTX1BST1BFUlRZXCIsdFt0Lk1VTFRJX01PREVfTEVYRVJfREVGQVVMVF9NT0RFX1ZBTFVFX0RPRVNfTk9UX0VYSVNUPTldPVwiTVVMVElfTU9ERV9MRVhFUl9ERUZBVUxUX01PREVfVkFMVUVfRE9FU19OT1RfRVhJU1RcIix0W3QuTEVYRVJfREVGSU5JVElPTl9DQU5OT1RfQ09OVEFJTl9VTkRFRklORUQ9MTBdPVwiTEVYRVJfREVGSU5JVElPTl9DQU5OT1RfQ09OVEFJTl9VTkRFRklORURcIix0W3QuU09JX0FOQ0hPUl9GT1VORD0xMV09XCJTT0lfQU5DSE9SX0ZPVU5EXCIsdFt0LkVNUFRZX01BVENIX1BBVFRFUk49MTJdPVwiRU1QVFlfTUFUQ0hfUEFUVEVSTlwiLHRbdC5OT19MSU5FX0JSRUFLU19GTEFHUz0xM109XCJOT19MSU5FX0JSRUFLU19GTEFHU1wiLHRbdC5VTlJFQUNIQUJMRV9QQVRURVJOPTE0XT1cIlVOUkVBQ0hBQkxFX1BBVFRFUk5cIix0W3QuSURFTlRJRllfVEVSTUlOQVRPUj0xNV09XCJJREVOVElGWV9URVJNSU5BVE9SXCIsdFt0LkNVU1RPTV9MSU5FX0JSRUFLPTE2XT1cIkNVU1RPTV9MSU5FX0JSRUFLXCJ9KGUuTGV4ZXJEZWZpbml0aW9uRXJyb3JUeXBlfHwoZS5MZXhlckRlZmluaXRpb25FcnJvclR5cGU9e30pKTt2YXIgcz17ZGVmZXJEZWZpbml0aW9uRXJyb3JzSGFuZGxpbmc6ITEscG9zaXRpb25UcmFja2luZzpcImZ1bGxcIixsaW5lVGVybWluYXRvcnNQYXR0ZXJuOi9cXG58XFxyXFxuPy9nLGxpbmVUZXJtaW5hdG9yQ2hhcmFjdGVyczpbXCJcXG5cIixcIlxcclwiXSxlbnN1cmVPcHRpbWl6YXRpb25zOiExLHNhZmVNb2RlOiExLGVycm9yTWVzc2FnZVByb3ZpZGVyOmEuZGVmYXVsdExleGVyRXJyb3JQcm92aWRlcn07T2JqZWN0LmZyZWV6ZShzKTt2YXIgdT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXt2YXIgbj10aGlzO2lmKHZvaWQgMD09PWUmJihlPXMpLHRoaXMubGV4ZXJEZWZpbml0aW9uPXQsdGhpcy5sZXhlckRlZmluaXRpb25FcnJvcnM9W10sdGhpcy5sZXhlckRlZmluaXRpb25XYXJuaW5nPVtdLHRoaXMucGF0dGVybklkeFRvQ29uZmlnPXt9LHRoaXMuY2hhckNvZGVUb1BhdHRlcm5JZHhUb0NvbmZpZz17fSx0aGlzLm1vZGVzPVtdLHRoaXMuZW1wdHlHcm91cHM9e30sdGhpcy5jb25maWc9dm9pZCAwLHRoaXMudHJhY2tTdGFydExpbmVzPSEwLHRoaXMudHJhY2tFbmRMaW5lcz0hMCx0aGlzLmhhc0N1c3RvbT0hMSx0aGlzLmNhbk1vZGVCZU9wdGltaXplZD17fSxcImJvb2xlYW5cIj09dHlwZW9mIGUpdGhyb3cgRXJyb3IoXCJUaGUgc2Vjb25kIGFyZ3VtZW50IHRvIHRoZSBMZXhlciBjb25zdHJ1Y3RvciBpcyBub3cgYW4gSUxleGVyQ29uZmlnIE9iamVjdC5cXG5hIGJvb2xlYW4gMm5kIGFyZ3VtZW50IGlzIG5vIGxvbmdlciBzdXBwb3J0ZWRcIik7aWYodGhpcy5jb25maWc9aS5tZXJnZShzLGUpLHRoaXMuY29uZmlnLmxpbmVUZXJtaW5hdG9yc1BhdHRlcm49PT1zLmxpbmVUZXJtaW5hdG9yc1BhdHRlcm4pdGhpcy5jb25maWcubGluZVRlcm1pbmF0b3JzUGF0dGVybj1yLkxpbmVUZXJtaW5hdG9yT3B0aW1pemVkVGVzdGVyO2Vsc2UgaWYodGhpcy5jb25maWcubGluZVRlcm1pbmF0b3JDaGFyYWN0ZXJzPT09cy5saW5lVGVybWluYXRvckNoYXJhY3RlcnMpdGhyb3cgRXJyb3IoXCJFcnJvcjogTWlzc2luZyA8bGluZVRlcm1pbmF0b3JDaGFyYWN0ZXJzPiBwcm9wZXJ0eSBvbiB0aGUgTGV4ZXIgY29uZmlnLlxcblxcdEZvciBkZXRhaWxzIFNlZTogaHR0cHM6Ly9zYXAuZ2l0aHViLmlvL2NoZXZyb3RhaW4vZG9jcy9ndWlkZS9yZXNvbHZpbmdfbGV4ZXJfZXJyb3JzLmh0bWwjTUlTU0lOR19MSU5FX1RFUk1fQ0hBUlNcIik7aWYoZS5zYWZlTW9kZSYmZS5lbnN1cmVPcHRpbWl6YXRpb25zKXRocm93IEVycm9yKCdcInNhZmVNb2RlXCIgYW5kIFwiZW5zdXJlT3B0aW1pemF0aW9uc1wiIGZsYWdzIGFyZSBtdXR1YWxseSBleGNsdXNpdmUuJyk7dGhpcy50cmFja1N0YXJ0TGluZXM9L2Z1bGx8b25seVN0YXJ0L2kudGVzdCh0aGlzLmNvbmZpZy5wb3NpdGlvblRyYWNraW5nKSx0aGlzLnRyYWNrRW5kTGluZXM9L2Z1bGwvaS50ZXN0KHRoaXMuY29uZmlnLnBvc2l0aW9uVHJhY2tpbmcpO3ZhciBhLHU9ITA7aS5pc0FycmF5KHQpPygoYT17bW9kZXM6e319KS5tb2Rlc1tyLkRFRkFVTFRfTU9ERV09aS5jbG9uZUFycih0KSxhW3IuREVGQVVMVF9NT0RFXT1yLkRFRkFVTFRfTU9ERSk6KHU9ITEsYT1pLmNsb25lT2JqKHQpKSx0aGlzLmxleGVyRGVmaW5pdGlvbkVycm9ycz10aGlzLmxleGVyRGVmaW5pdGlvbkVycm9ycy5jb25jYXQoci5wZXJmb3JtUnVudGltZUNoZWNrcyhhLHRoaXMudHJhY2tTdGFydExpbmVzLHRoaXMuY29uZmlnLmxpbmVUZXJtaW5hdG9yQ2hhcmFjdGVycykpLHRoaXMubGV4ZXJEZWZpbml0aW9uV2FybmluZz10aGlzLmxleGVyRGVmaW5pdGlvbldhcm5pbmcuY29uY2F0KHIucGVyZm9ybVdhcm5pbmdSdW50aW1lQ2hlY2tzKGEsdGhpcy50cmFja1N0YXJ0TGluZXMsdGhpcy5jb25maWcubGluZVRlcm1pbmF0b3JDaGFyYWN0ZXJzKSksYS5tb2Rlcz1hLm1vZGVzP2EubW9kZXM6e30saS5mb3JFYWNoKGEubW9kZXMsZnVuY3Rpb24odCxlKXthLm1vZGVzW2VdPWkucmVqZWN0KHQsZnVuY3Rpb24odCl7cmV0dXJuIGkuaXNVbmRlZmluZWQodCl9KX0pO3ZhciBjPWkua2V5cyhhLm1vZGVzKTtpZihpLmZvckVhY2goYS5tb2RlcyxmdW5jdGlvbih0LGEpe2lmKG4ubW9kZXMucHVzaChhKSxuLmxleGVyRGVmaW5pdGlvbkVycm9ycz1uLmxleGVyRGVmaW5pdGlvbkVycm9ycy5jb25jYXQoci52YWxpZGF0ZVBhdHRlcm5zKHQsYykpLGkuaXNFbXB0eShuLmxleGVyRGVmaW5pdGlvbkVycm9ycykpe28uYXVnbWVudFRva2VuVHlwZXModCk7dmFyIHM9ci5hbmFseXplVG9rZW5UeXBlcyh0LHtsaW5lVGVybWluYXRvckNoYXJhY3RlcnM6bi5jb25maWcubGluZVRlcm1pbmF0b3JDaGFyYWN0ZXJzLHBvc2l0aW9uVHJhY2tpbmc6ZS5wb3NpdGlvblRyYWNraW5nLGVuc3VyZU9wdGltaXphdGlvbnM6ZS5lbnN1cmVPcHRpbWl6YXRpb25zLHNhZmVNb2RlOmUuc2FmZU1vZGV9KTtuLnBhdHRlcm5JZHhUb0NvbmZpZ1thXT1zLnBhdHRlcm5JZHhUb0NvbmZpZyxuLmNoYXJDb2RlVG9QYXR0ZXJuSWR4VG9Db25maWdbYV09cy5jaGFyQ29kZVRvUGF0dGVybklkeFRvQ29uZmlnLG4uZW1wdHlHcm91cHM9aS5tZXJnZShuLmVtcHR5R3JvdXBzLHMuZW1wdHlHcm91cHMpLG4uaGFzQ3VzdG9tPXMuaGFzQ3VzdG9tfHxuLmhhc0N1c3RvbSxuLmNhbk1vZGVCZU9wdGltaXplZFthXT1zLmNhbkJlT3B0aW1pemVkfX0pLHRoaXMuZGVmYXVsdE1vZGU9YS5kZWZhdWx0TW9kZSwhaS5pc0VtcHR5KHRoaXMubGV4ZXJEZWZpbml0aW9uRXJyb3JzKSYmIXRoaXMuY29uZmlnLmRlZmVyRGVmaW5pdGlvbkVycm9yc0hhbmRsaW5nKXt2YXIgcD1pLm1hcCh0aGlzLmxleGVyRGVmaW5pdGlvbkVycm9ycyxmdW5jdGlvbih0KXtyZXR1cm4gdC5tZXNzYWdlfSkuam9pbihcIi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXFxuXCIpO3Rocm93IG5ldyBFcnJvcihcIkVycm9ycyBkZXRlY3RlZCBpbiBkZWZpbml0aW9uIG9mIExleGVyOlxcblwiK3ApfWlmKGkuZm9yRWFjaCh0aGlzLmxleGVyRGVmaW5pdGlvbldhcm5pbmcsZnVuY3Rpb24odCl7aS5QUklOVF9XQVJOSU5HKHQubWVzc2FnZSl9KSxyLlNVUFBPUlRfU1RJQ0tZPyh0aGlzLmNob3BJbnB1dD1pLklERU5USVRZLHRoaXMubWF0Y2g9dGhpcy5tYXRjaFdpdGhUZXN0KToodGhpcy51cGRhdGVMYXN0SW5kZXg9aS5OT09QLHRoaXMubWF0Y2g9dGhpcy5tYXRjaFdpdGhFeGVjKSx1JiYodGhpcy5oYW5kbGVNb2Rlcz1pLk5PT1ApLCExPT09dGhpcy50cmFja1N0YXJ0TGluZXMmJih0aGlzLmNvbXB1dGVOZXdDb2x1bW49aS5JREVOVElUWSksITE9PT10aGlzLnRyYWNrRW5kTGluZXMmJih0aGlzLnVwZGF0ZVRva2VuRW5kTGluZUNvbHVtbkxvY2F0aW9uPWkuTk9PUCksL2Z1bGwvaS50ZXN0KHRoaXMuY29uZmlnLnBvc2l0aW9uVHJhY2tpbmcpKXRoaXMuY3JlYXRlVG9rZW5JbnN0YW5jZT10aGlzLmNyZWF0ZUZ1bGxUb2tlbjtlbHNlIGlmKC9vbmx5U3RhcnQvaS50ZXN0KHRoaXMuY29uZmlnLnBvc2l0aW9uVHJhY2tpbmcpKXRoaXMuY3JlYXRlVG9rZW5JbnN0YW5jZT10aGlzLmNyZWF0ZVN0YXJ0T25seVRva2VuO2Vsc2V7aWYoIS9vbmx5T2Zmc2V0L2kudGVzdCh0aGlzLmNvbmZpZy5wb3NpdGlvblRyYWNraW5nKSl0aHJvdyBFcnJvcignSW52YWxpZCA8cG9zaXRpb25UcmFja2luZz4gY29uZmlnIG9wdGlvbjogXCInK3RoaXMuY29uZmlnLnBvc2l0aW9uVHJhY2tpbmcrJ1wiJyk7dGhpcy5jcmVhdGVUb2tlbkluc3RhbmNlPXRoaXMuY3JlYXRlT2Zmc2V0T25seVRva2VufXRoaXMuaGFzQ3VzdG9tP3RoaXMuYWRkVG9rZW49dGhpcy5hZGRUb2tlblVzaW5nUHVzaDp0aGlzLmFkZFRva2VuPXRoaXMuYWRkVG9rZW5Vc2luZ01lbWJlckFjY2Vzczt2YXIgbD1pLnJlZHVjZSh0aGlzLmNhbk1vZGVCZU9wdGltaXplZCxmdW5jdGlvbih0LGUsbil7cmV0dXJuITE9PT1lJiZ0LnB1c2gobiksdH0sW10pO2lmKGUuZW5zdXJlT3B0aW1pemF0aW9ucyYmIWkuaXNFbXB0eShsKSl0aHJvdyBFcnJvcihcIkxleGVyIE1vZGVzOiA8IFwiK2wuam9pbihcIiwgXCIpKycgPiBjYW5ub3QgYmUgb3B0aW1pemVkLlxcblxcdCBEaXNhYmxlIHRoZSBcImVuc3VyZU9wdGltaXphdGlvbnNcIiBsZXhlciBjb25maWcgZmxhZyB0byBzaWxlbnRseSBpZ25vcmUgdGhpcyBhbmQgcnVuIHRoZSBsZXhlciBpbiBhbiB1bi1vcHRpbWl6ZWQgbW9kZS5cXG5cXHQgT3IgaW5zcGVjdCB0aGUgY29uc29sZSBsb2cgZm9yIGRldGFpbHMgb24gaG93IHRvIHJlc29sdmUgdGhlc2UgaXNzdWVzLicpfXJldHVybiB0LnByb3RvdHlwZS50b2tlbml6ZT1mdW5jdGlvbih0LGUpe2lmKHZvaWQgMD09PWUmJihlPXRoaXMuZGVmYXVsdE1vZGUpLCFpLmlzRW1wdHkodGhpcy5sZXhlckRlZmluaXRpb25FcnJvcnMpKXt2YXIgbj1pLm1hcCh0aGlzLmxleGVyRGVmaW5pdGlvbkVycm9ycyxmdW5jdGlvbih0KXtyZXR1cm4gdC5tZXNzYWdlfSkuam9pbihcIi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXFxuXCIpO3Rocm93IG5ldyBFcnJvcihcIlVuYWJsZSB0byBUb2tlbml6ZSBiZWNhdXNlIEVycm9ycyBkZXRlY3RlZCBpbiBkZWZpbml0aW9uIG9mIExleGVyOlxcblwiK24pfXJldHVybiB0aGlzLnRva2VuaXplSW50ZXJuYWwodCxlKX0sdC5wcm90b3R5cGUudG9rZW5pemVJbnRlcm5hbD1mdW5jdGlvbih0LGUpe3ZhciBuLG8sYSxzLHUsYyxwLGwsaCxmLGQsRSxtPXRoaXMseT10LFQ9eS5sZW5ndGgsdj0wLGc9MCxfPXRoaXMuaGFzQ3VzdG9tPzA6TWF0aC5mbG9vcih0Lmxlbmd0aC8xMCksUj1uZXcgQXJyYXkoXyksQT1bXSxOPXRoaXMudHJhY2tTdGFydExpbmVzPzE6dm9pZCAwLE89dGhpcy50cmFja1N0YXJ0TGluZXM/MTp2b2lkIDAsUz1yLmNsb25lRW1wdHlHcm91cHModGhpcy5lbXB0eUdyb3VwcyksST10aGlzLnRyYWNrU3RhcnRMaW5lcyxMPXRoaXMuY29uZmlnLmxpbmVUZXJtaW5hdG9yc1BhdHRlcm4saz0wLFA9W10seD1bXSxDPVtdLE09W107T2JqZWN0LmZyZWV6ZShNKTt2YXIgRixiPXZvaWQgMCxEPWZ1bmN0aW9uKHQpe2lmKDE9PT1DLmxlbmd0aCYmdm9pZCAwPT09dC50b2tlblR5cGUuUFVTSF9NT0RFKXt2YXIgZT1tLmNvbmZpZy5lcnJvck1lc3NhZ2VQcm92aWRlci5idWlsZFVuYWJsZVRvUG9wTGV4ZXJNb2RlTWVzc2FnZSh0KTtBLnB1c2goe29mZnNldDp0LnN0YXJ0T2Zmc2V0LGxpbmU6dm9pZCAwIT09dC5zdGFydExpbmU/dC5zdGFydExpbmU6dm9pZCAwLGNvbHVtbjp2b2lkIDAhPT10LnN0YXJ0Q29sdW1uP3Quc3RhcnRDb2x1bW46dm9pZCAwLGxlbmd0aDp0LmltYWdlLmxlbmd0aCxtZXNzYWdlOmV9KX1lbHNle0MucG9wKCk7dmFyIG49aS5sYXN0KEMpO1A9bS5wYXR0ZXJuSWR4VG9Db25maWdbbl0seD1tLmNoYXJDb2RlVG9QYXR0ZXJuSWR4VG9Db25maWdbbl0saz1QLmxlbmd0aDt2YXIgcj1tLmNhbk1vZGVCZU9wdGltaXplZFtuXSYmITE9PT1tLmNvbmZpZy5zYWZlTW9kZTtiPXgmJnI/ZnVuY3Rpb24odCl7dmFyIGU9eFt0XTtyZXR1cm4gdm9pZCAwPT09ZT9NOmV9OmZ1bmN0aW9uKCl7cmV0dXJuIFB9fX07ZnVuY3Rpb24gdyh0KXtDLnB1c2godCkseD10aGlzLmNoYXJDb2RlVG9QYXR0ZXJuSWR4VG9Db25maWdbdF0sUD10aGlzLnBhdHRlcm5JZHhUb0NvbmZpZ1t0XSxrPVAubGVuZ3RoLGs9UC5sZW5ndGg7dmFyIGU9dGhpcy5jYW5Nb2RlQmVPcHRpbWl6ZWRbdF0mJiExPT09dGhpcy5jb25maWcuc2FmZU1vZGU7Yj14JiZlP2Z1bmN0aW9uKHQpe3ZhciBlPXhbdF07cmV0dXJuIHZvaWQgMD09PWU/TTplfTpmdW5jdGlvbigpe3JldHVybiBQfX1mb3Iody5jYWxsKHRoaXMsZSk7djxUOyl7dT1udWxsO3ZhciBVPXkuY2hhckNvZGVBdCh2KSxHPWIoVSksQj1HLmxlbmd0aDtmb3Iobj0wO248QjtuKyspe3ZhciBLPShGPUdbbl0pLnBhdHRlcm47aWYoITEhPT0oWj1GLnNob3J0KT9VPT09WiYmKHU9Syk6ITA9PT1GLmlzQ3VzdG9tP3U9bnVsbCE9PShFPUsuZXhlYyh5LHYsUixTKSk/RVswXTpFOih0aGlzLnVwZGF0ZUxhc3RJbmRleChLLHYpLHU9dGhpcy5tYXRjaChLLHQsdikpLG51bGwhPT11KXtpZih2b2lkIDAhPT0ocz1GLmxvbmdlckFsdCkpe3ZhciBXPVBbc10saj1XLnBhdHRlcm47ITA9PT1XLmlzQ3VzdG9tP2E9bnVsbCE9PShFPWouZXhlYyh5LHYsUixTKSk/RVswXTpFOih0aGlzLnVwZGF0ZUxhc3RJbmRleChqLHYpLGE9dGhpcy5tYXRjaChqLHQsdikpLGEmJmEubGVuZ3RoPnUubGVuZ3RoJiYodT1hLEY9Vyl9YnJlYWt9fWlmKG51bGwhPT11KXtpZihjPXUubGVuZ3RoLHZvaWQgMCE9PShwPUYuZ3JvdXApJiYobD1GLnRva2VuVHlwZUlkeCxoPXRoaXMuY3JlYXRlVG9rZW5JbnN0YW5jZSh1LHYsbCxGLnRva2VuVHlwZSxOLE8sYyksITE9PT1wP2c9dGhpcy5hZGRUb2tlbihSLGcsaCk6U1twXS5wdXNoKGgpKSx0PXRoaXMuY2hvcElucHV0KHQsYyksdis9YyxPPXRoaXMuY29tcHV0ZU5ld0NvbHVtbihPLGMpLCEwPT09SSYmITA9PT1GLmNhbkxpbmVUZXJtaW5hdG9yKXt2YXIgVj0wLFk9dm9pZCAwLEg9dm9pZCAwO0wubGFzdEluZGV4PTA7ZG97ITA9PT0oWT1MLnRlc3QodSkpJiYoSD1MLmxhc3RJbmRleC0xLFYrKyl9d2hpbGUoWSk7MCE9PVYmJihOKz1WLE89Yy1ILHRoaXMudXBkYXRlVG9rZW5FbmRMaW5lQ29sdW1uTG9jYXRpb24oaCxwLEgsVixOLE8sYykpfXRoaXMuaGFuZGxlTW9kZXMoRixELHcsaCl9ZWxzZXtmb3IodmFyIFg9dix6PU4scT1PLCQ9ITE7ISQmJnY8VDspZm9yKHkuY2hhckNvZGVBdCh2KSx0PXRoaXMuY2hvcElucHV0KHQsMSksdisrLG89MDtvPGs7bysrKXt2YXIgWixRPVBbb107Sz1RLnBhdHRlcm47aWYoITEhPT0oWj1RLnNob3J0KT95LmNoYXJDb2RlQXQodik9PT1aJiYoJD0hMCk6ITA9PT1RLmlzQ3VzdG9tPyQ9bnVsbCE9PUsuZXhlYyh5LHYsUixTKToodGhpcy51cGRhdGVMYXN0SW5kZXgoSyx2KSwkPW51bGwhPT1LLmV4ZWModCkpLCEwPT09JClicmVha31mPXYtWCxkPXRoaXMuY29uZmlnLmVycm9yTWVzc2FnZVByb3ZpZGVyLmJ1aWxkVW5leHBlY3RlZENoYXJhY3RlcnNNZXNzYWdlKHksWCxmLHoscSksQS5wdXNoKHtvZmZzZXQ6WCxsaW5lOnosY29sdW1uOnEsbGVuZ3RoOmYsbWVzc2FnZTpkfSl9fXJldHVybiB0aGlzLmhhc0N1c3RvbXx8KFIubGVuZ3RoPWcpLHt0b2tlbnM6Uixncm91cHM6UyxlcnJvcnM6QX19LHQucHJvdG90eXBlLmhhbmRsZU1vZGVzPWZ1bmN0aW9uKHQsZSxuLHIpe2lmKCEwPT09dC5wb3Ape3ZhciBpPXQucHVzaDtlKHIpLHZvaWQgMCE9PWkmJm4uY2FsbCh0aGlzLGkpfWVsc2Ugdm9pZCAwIT09dC5wdXNoJiZuLmNhbGwodGhpcyx0LnB1c2gpfSx0LnByb3RvdHlwZS5jaG9wSW5wdXQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5zdWJzdHJpbmcoZSl9LHQucHJvdG90eXBlLnVwZGF0ZUxhc3RJbmRleD1mdW5jdGlvbih0LGUpe3QubGFzdEluZGV4PWV9LHQucHJvdG90eXBlLnVwZGF0ZVRva2VuRW5kTGluZUNvbHVtbkxvY2F0aW9uPWZ1bmN0aW9uKHQsZSxuLHIsaSxvLGEpe3ZhciBzLHU7dm9pZCAwIT09ZSYmKHU9KHM9bj09PWEtMSk/LTE6MCwxPT09ciYmITA9PT1zfHwodC5lbmRMaW5lPWkrdSx0LmVuZENvbHVtbj1vLTEtdSkpfSx0LnByb3RvdHlwZS5jb21wdXRlTmV3Q29sdW1uPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQrZX0sdC5wcm90b3R5cGUuY3JlYXRlVG9rZW5JbnN0YW5jZT1mdW5jdGlvbigpe2Zvcih2YXIgdD1bXSxlPTA7ZTxhcmd1bWVudHMubGVuZ3RoO2UrKyl0W2VdPWFyZ3VtZW50c1tlXTtyZXR1cm4gbnVsbH0sdC5wcm90b3R5cGUuY3JlYXRlT2Zmc2V0T25seVRva2VuPWZ1bmN0aW9uKHQsZSxuLHIpe3JldHVybntpbWFnZTp0LHN0YXJ0T2Zmc2V0OmUsdG9rZW5UeXBlSWR4Om4sdG9rZW5UeXBlOnJ9fSx0LnByb3RvdHlwZS5jcmVhdGVTdGFydE9ubHlUb2tlbj1mdW5jdGlvbih0LGUsbixyLGksbyl7cmV0dXJue2ltYWdlOnQsc3RhcnRPZmZzZXQ6ZSxzdGFydExpbmU6aSxzdGFydENvbHVtbjpvLHRva2VuVHlwZUlkeDpuLHRva2VuVHlwZTpyfX0sdC5wcm90b3R5cGUuY3JlYXRlRnVsbFRva2VuPWZ1bmN0aW9uKHQsZSxuLHIsaSxvLGEpe3JldHVybntpbWFnZTp0LHN0YXJ0T2Zmc2V0OmUsZW5kT2Zmc2V0OmUrYS0xLHN0YXJ0TGluZTppLGVuZExpbmU6aSxzdGFydENvbHVtbjpvLGVuZENvbHVtbjpvK2EtMSx0b2tlblR5cGVJZHg6bix0b2tlblR5cGU6cn19LHQucHJvdG90eXBlLmFkZFRva2VuPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gNjY2fSx0LnByb3RvdHlwZS5hZGRUb2tlblVzaW5nUHVzaD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIHQucHVzaChuKSxlfSx0LnByb3RvdHlwZS5hZGRUb2tlblVzaW5nTWVtYmVyQWNjZXNzPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdFtlXT1uLCsrZX0sdC5wcm90b3R5cGUubWF0Y2g9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBudWxsfSx0LnByb3RvdHlwZS5tYXRjaFdpdGhUZXN0PWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4hMD09PXQudGVzdChlKT9lLnN1YnN0cmluZyhuLHQubGFzdEluZGV4KTpudWxsfSx0LnByb3RvdHlwZS5tYXRjaFdpdGhFeGVjPWZ1bmN0aW9uKHQsZSl7dmFyIG49dC5leGVjKGUpO3JldHVybiBudWxsIT09bj9uWzBdOm59LHQuU0tJUFBFRD1cIlRoaXMgbWFya3MgYSBza2lwcGVkIFRva2VuIHBhdHRlcm4sIHRoaXMgbWVhbnMgZWFjaCB0b2tlbiBpZGVudGlmaWVkIGJ5IGl0IHdpbGxiZSBjb25zdW1lZCBhbmQgdGhlbiB0aHJvd24gaW50byBvYmxpdmlvbiwgdGhpcyBjYW4gYmUgdXNlZCB0byBmb3IgZXhhbXBsZSB0byBjb21wbGV0ZWx5IGlnbm9yZSB3aGl0ZXNwYWNlLlwiLHQuTkE9L05PVF9BUFBMSUNBQkxFLyx0fSgpO2UuTGV4ZXI9dX0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO3ZhciByLGk9dGhpcyYmdGhpcy5fX2V4dGVuZHN8fChyPWZ1bmN0aW9uKHQsZSl7cmV0dXJuKHI9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKHQsZSl7dC5fX3Byb3RvX189ZX18fGZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuIGluIGUpZS5oYXNPd25Qcm9wZXJ0eShuKSYmKHRbbl09ZVtuXSl9KSh0LGUpfSxmdW5jdGlvbih0LGUpe2Z1bmN0aW9uIG4oKXt0aGlzLmNvbnN0cnVjdG9yPXR9cih0LGUpLHQucHJvdG90eXBlPW51bGw9PT1lP09iamVjdC5jcmVhdGUoZSk6KG4ucHJvdG90eXBlPWUucHJvdG90eXBlLG5ldyBuKX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBvPW4oMCksYT1uKDQpLHM9big5KSx1PW4oMSksYz1uKDUpO2UuYWRkVGVybWluYWxUb0NzdD1mdW5jdGlvbih0LGUsbil7dm9pZCAwPT09dC5jaGlsZHJlbltuXT90LmNoaWxkcmVuW25dPVtlXTp0LmNoaWxkcmVuW25dLnB1c2goZSl9LGUuYWRkTm9uZVRlcm1pbmFsVG9Dc3Q9ZnVuY3Rpb24odCxlLG4pe3ZvaWQgMD09PXQuY2hpbGRyZW5bZV0/dC5jaGlsZHJlbltlXT1bbl06dC5jaGlsZHJlbltlXS5wdXNoKG4pfTt2YXIgcD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3ZhciBuPXQuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gbi5yZXN1bHQ9W10sbi5ydWxlSWR4PWUsbn1yZXR1cm4gaShlLHQpLGUucHJvdG90eXBlLmNvbGxlY3ROYW1lZERTTE1ldGhvZD1mdW5jdGlvbih0LGUsbil7aWYoIW8uaXNVbmRlZmluZWQodC5uYW1lKSl7dmFyIHI9dm9pZCAwO2lmKHQgaW5zdGFuY2VvZiB1Lk9wdGlvbnx8dCBpbnN0YW5jZW9mIHUuUmVwZXRpdGlvbnx8dCBpbnN0YW5jZW9mIHUuUmVwZXRpdGlvbk1hbmRhdG9yeXx8dCBpbnN0YW5jZW9mIHUuQWx0ZXJuYXRpb24pcj1uZXcgZSh7ZGVmaW5pdGlvbjp0LmRlZmluaXRpb24saWR4OnQuaWR4fSk7ZWxzZXtpZighKHQgaW5zdGFuY2VvZiB1LlJlcGV0aXRpb25NYW5kYXRvcnlXaXRoU2VwYXJhdG9yfHx0IGluc3RhbmNlb2YgdS5SZXBldGl0aW9uV2l0aFNlcGFyYXRvcikpdGhyb3cgRXJyb3IoXCJub24gZXhoYXVzdGl2ZSBtYXRjaFwiKTtyPW5ldyBlKHtkZWZpbml0aW9uOnQuZGVmaW5pdGlvbixpZHg6dC5pZHgsc2VwYXJhdG9yOnQuc2VwYXJhdG9yfSl9dmFyIGk9W3JdLGE9cy5nZXRLZXlGb3JBdXRvbWF0aWNMb29rYWhlYWQodGhpcy5ydWxlSWR4LG4sdC5pZHgpO3RoaXMucmVzdWx0LnB1c2goe2RlZjppLGtleTphLG5hbWU6dC5uYW1lLG9yZ1Byb2Q6dH0pfX0sZS5wcm90b3R5cGUudmlzaXRPcHRpb249ZnVuY3Rpb24odCl7dGhpcy5jb2xsZWN0TmFtZWREU0xNZXRob2QodCx1Lk9wdGlvbixzLk9QVElPTl9JRFgpfSxlLnByb3RvdHlwZS52aXNpdFJlcGV0aXRpb249ZnVuY3Rpb24odCl7dGhpcy5jb2xsZWN0TmFtZWREU0xNZXRob2QodCx1LlJlcGV0aXRpb24scy5NQU5ZX0lEWCl9LGUucHJvdG90eXBlLnZpc2l0UmVwZXRpdGlvbk1hbmRhdG9yeT1mdW5jdGlvbih0KXt0aGlzLmNvbGxlY3ROYW1lZERTTE1ldGhvZCh0LHUuUmVwZXRpdGlvbk1hbmRhdG9yeSxzLkFUX0xFQVNUX09ORV9JRFgpfSxlLnByb3RvdHlwZS52aXNpdFJlcGV0aXRpb25NYW5kYXRvcnlXaXRoU2VwYXJhdG9yPWZ1bmN0aW9uKHQpe3RoaXMuY29sbGVjdE5hbWVkRFNMTWV0aG9kKHQsdS5SZXBldGl0aW9uTWFuZGF0b3J5V2l0aFNlcGFyYXRvcixzLkFUX0xFQVNUX09ORV9TRVBfSURYKX0sZS5wcm90b3R5cGUudmlzaXRSZXBldGl0aW9uV2l0aFNlcGFyYXRvcj1mdW5jdGlvbih0KXt0aGlzLmNvbGxlY3ROYW1lZERTTE1ldGhvZCh0LHUuUmVwZXRpdGlvbldpdGhTZXBhcmF0b3Iscy5NQU5ZX1NFUF9JRFgpfSxlLnByb3RvdHlwZS52aXNpdEFsdGVybmF0aW9uPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7dGhpcy5jb2xsZWN0TmFtZWREU0xNZXRob2QodCx1LkFsdGVybmF0aW9uLHMuT1JfSURYKTt2YXIgbj10LmRlZmluaXRpb24ubGVuZ3RoPjE7by5mb3JFYWNoKHQuZGVmaW5pdGlvbixmdW5jdGlvbihyLGkpe2lmKCFvLmlzVW5kZWZpbmVkKHIubmFtZSkpe3ZhciBhPXIuZGVmaW5pdGlvbjthPW4/W25ldyB1Lk9wdGlvbih7ZGVmaW5pdGlvbjpyLmRlZmluaXRpb259KV06ci5kZWZpbml0aW9uO3ZhciBjPXMuZ2V0S2V5Rm9yQWx0SW5kZXgoZS5ydWxlSWR4LHMuT1JfSURYLHQuaWR4LGkpO2UucmVzdWx0LnB1c2goe2RlZjphLGtleTpjLG5hbWU6ci5uYW1lLG9yZ1Byb2Q6cn0pfX0pfSxlfShjLkdBc3RWaXNpdG9yKTtlLk5hbWVkRFNMTWV0aG9kc0NvbGxlY3RvclZpc2l0b3I9cCxlLmFuYWx5emVDc3Q9ZnVuY3Rpb24odCxlKXt2YXIgbj17ZGljdERlZjpuZXcgYS5IYXNoVGFibGUsYWxsUnVsZU5hbWVzOltdfTtyZXR1cm4gby5mb3JFYWNoKHQsZnVuY3Rpb24odCl7dmFyIHI9ZS5nZXQodC5uYW1lKTtuLmFsbFJ1bGVOYW1lcy5wdXNoKHQubmFtZSk7dmFyIGk9bmV3IHAocik7dC5hY2NlcHQoaSksby5mb3JFYWNoKGkucmVzdWx0LGZ1bmN0aW9uKGUpe2UuZGVmLGUua2V5O3ZhciByPWUubmFtZTtuLmFsbFJ1bGVOYW1lcy5wdXNoKHQubmFtZStyKX0pfSksbn19LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxlLlZFUlNJT049XCI0LjYuMFwifSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIHI9bigzKSxpPW4oMTUpLG89bigyKSxhPW4oNikscz1uKDE3KSx1PW4oMTApLGM9bigzOSkscD1uKDUpLGw9bigxKSxoPW4oMjQpLGY9big0MCksZD1uKDIwKSxFPXt9O0UuVkVSU0lPTj1zLlZFUlNJT04sRS5QYXJzZXI9ci5QYXJzZXIsRS5Dc3RQYXJzZXI9ci5Dc3RQYXJzZXIsRS5FbWJlZGRlZEFjdGlvbnNQYXJzZXI9ci5FbWJlZGRlZEFjdGlvbnNQYXJzZXI7RS5QYXJzZXJEZWZpbml0aW9uRXJyb3JUeXBlPXIuUGFyc2VyRGVmaW5pdGlvbkVycm9yVHlwZSxFLkxleGVyPWkuTGV4ZXIsRS5MZXhlckRlZmluaXRpb25FcnJvclR5cGU9aS5MZXhlckRlZmluaXRpb25FcnJvclR5cGUsRS5FT0Y9by5FT0YsRS50b2tlbk5hbWU9by50b2tlbk5hbWUsRS50b2tlbkxhYmVsPW8udG9rZW5MYWJlbCxFLnRva2VuTWF0Y2hlcj1vLnRva2VuTWF0Y2hlcixFLmNyZWF0ZVRva2VuPW8uY3JlYXRlVG9rZW4sRS5jcmVhdGVUb2tlbkluc3RhbmNlPW8uY3JlYXRlVG9rZW5JbnN0YW5jZSxFLkVNUFRZX0FMVD1yLkVNUFRZX0FMVCxFLmRlZmF1bHRQYXJzZXJFcnJvclByb3ZpZGVyPXUuZGVmYXVsdFBhcnNlckVycm9yUHJvdmlkZXIsRS5pc1JlY29nbml0aW9uRXhjZXB0aW9uPWEuaXNSZWNvZ25pdGlvbkV4Y2VwdGlvbixFLkVhcmx5RXhpdEV4Y2VwdGlvbj1hLkVhcmx5RXhpdEV4Y2VwdGlvbixFLk1pc21hdGNoZWRUb2tlbkV4Y2VwdGlvbj1hLk1pc21hdGNoZWRUb2tlbkV4Y2VwdGlvbixFLk5vdEFsbElucHV0UGFyc2VkRXhjZXB0aW9uPWEuTm90QWxsSW5wdXRQYXJzZWRFeGNlcHRpb24sRS5Ob1ZpYWJsZUFsdEV4Y2VwdGlvbj1hLk5vVmlhYmxlQWx0RXhjZXB0aW9uLEUuZGVmYXVsdExleGVyRXJyb3JQcm92aWRlcj1kLmRlZmF1bHRMZXhlckVycm9yUHJvdmlkZXIsRS5GbGF0PWwuRmxhdCxFLlJlcGV0aXRpb249bC5SZXBldGl0aW9uLEUuUmVwZXRpdGlvbldpdGhTZXBhcmF0b3I9bC5SZXBldGl0aW9uV2l0aFNlcGFyYXRvcixFLlJlcGV0aXRpb25NYW5kYXRvcnk9bC5SZXBldGl0aW9uTWFuZGF0b3J5LEUuUmVwZXRpdGlvbk1hbmRhdG9yeVdpdGhTZXBhcmF0b3I9bC5SZXBldGl0aW9uTWFuZGF0b3J5V2l0aFNlcGFyYXRvcixFLk9wdGlvbj1sLk9wdGlvbixFLkFsdGVybmF0aW9uPWwuQWx0ZXJuYXRpb24sRS5Ob25UZXJtaW5hbD1sLk5vblRlcm1pbmFsLEUuVGVybWluYWw9bC5UZXJtaW5hbCxFLlJ1bGU9bC5SdWxlLEUuR0FzdFZpc2l0b3I9cC5HQXN0VmlzaXRvcixFLnNlcmlhbGl6ZUdyYW1tYXI9bC5zZXJpYWxpemVHcmFtbWFyLEUuc2VyaWFsaXplUHJvZHVjdGlvbj1sLnNlcmlhbGl6ZVByb2R1Y3Rpb24sRS5yZXNvbHZlR3JhbW1hcj1oLnJlc29sdmVHcmFtbWFyLEUuZGVmYXVsdEdyYW1tYXJSZXNvbHZlckVycm9yUHJvdmlkZXI9dS5kZWZhdWx0R3JhbW1hclJlc29sdmVyRXJyb3JQcm92aWRlcixFLnZhbGlkYXRlR3JhbW1hcj1oLnZhbGlkYXRlR3JhbW1hcixFLmRlZmF1bHRHcmFtbWFyVmFsaWRhdG9yRXJyb3JQcm92aWRlcj11LmRlZmF1bHRHcmFtbWFyVmFsaWRhdG9yRXJyb3JQcm92aWRlcixFLmFzc2lnbk9jY3VycmVuY2VJbmRpY2VzPWguYXNzaWduT2NjdXJyZW5jZUluZGljZXMsRS5jbGVhckNhY2hlPWZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVGhlIGNsZWFyQ2FjaGUgZnVuY3Rpb24gd2FzICdzb2Z0JyByZW1vdmVkIGZyb20gdGhlIENoZXZyb3RhaW4gQVBJLlxcblxcdCBJdCBwZXJmb3JtcyBubyBhY3Rpb24gb3RoZXIgdGhhbiBwcmludGluZyB0aGlzIG1lc3NhZ2UuXFxuXFx0IFBsZWFzZSBhdm9pZCB1c2luZyBpdCBhcyBpdCB3aWxsIGJlIGNvbXBsZXRlbHkgcmVtb3ZlZCBpbiB0aGUgZnV0dXJlXCIpfSxFLmNyZWF0ZVN5bnRheERpYWdyYW1zQ29kZT1jLmNyZWF0ZVN5bnRheERpYWdyYW1zQ29kZSxFLmdlbmVyYXRlUGFyc2VyRmFjdG9yeT1mLmdlbmVyYXRlUGFyc2VyRmFjdG9yeSxFLmdlbmVyYXRlUGFyc2VyTW9kdWxlPWYuZ2VuZXJhdGVQYXJzZXJNb2R1bGUsdC5leHBvcnRzPUV9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgcixpLG87XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNlbGYmJnNlbGYsaT1bXSx2b2lkIDA9PT0obz1cImZ1bmN0aW9uXCI9PXR5cGVvZihyPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe310LnByb3RvdHlwZS5zYXZlU3RhdGU9ZnVuY3Rpb24oKXtyZXR1cm57aWR4OnRoaXMuaWR4LGlucHV0OnRoaXMuaW5wdXQsZ3JvdXBJZHg6dGhpcy5ncm91cElkeH19LHQucHJvdG90eXBlLnJlc3RvcmVTdGF0ZT1mdW5jdGlvbih0KXt0aGlzLmlkeD10LmlkeCx0aGlzLmlucHV0PXQuaW5wdXQsdGhpcy5ncm91cElkeD10Lmdyb3VwSWR4fSx0LnByb3RvdHlwZS5wYXR0ZXJuPWZ1bmN0aW9uKHQpe3RoaXMuaWR4PTAsdGhpcy5pbnB1dD10LHRoaXMuZ3JvdXBJZHg9MCx0aGlzLmNvbnN1bWVDaGFyKFwiL1wiKTt2YXIgZT10aGlzLmRpc2p1bmN0aW9uKCk7dGhpcy5jb25zdW1lQ2hhcihcIi9cIik7Zm9yKHZhciBuPXt0eXBlOlwiRmxhZ3NcIixnbG9iYWw6ITEsaWdub3JlQ2FzZTohMSxtdWx0aUxpbmU6ITEsdW5pY29kZTohMSxzdGlja3k6ITF9O3RoaXMuaXNSZWdFeHBGbGFnKCk7KXN3aXRjaCh0aGlzLnBvcENoYXIoKSl7Y2FzZVwiZ1wiOnMobixcImdsb2JhbFwiKTticmVhaztjYXNlXCJpXCI6cyhuLFwiaWdub3JlQ2FzZVwiKTticmVhaztjYXNlXCJtXCI6cyhuLFwibXVsdGlMaW5lXCIpO2JyZWFrO2Nhc2VcInVcIjpzKG4sXCJ1bmljb2RlXCIpO2JyZWFrO2Nhc2VcInlcIjpzKG4sXCJzdGlja3lcIil9aWYodGhpcy5pZHghPT10aGlzLmlucHV0Lmxlbmd0aCl0aHJvdyBFcnJvcihcIlJlZHVuZGFudCBpbnB1dDogXCIrdGhpcy5pbnB1dC5zdWJzdHJpbmcodGhpcy5pZHgpKTtyZXR1cm57dHlwZTpcIlBhdHRlcm5cIixmbGFnczpuLHZhbHVlOmV9fSx0LnByb3RvdHlwZS5kaXNqdW5jdGlvbj1mdW5jdGlvbigpe3ZhciB0PVtdO2Zvcih0LnB1c2godGhpcy5hbHRlcm5hdGl2ZSgpKTtcInxcIj09PXRoaXMucGVla0NoYXIoKTspdGhpcy5jb25zdW1lQ2hhcihcInxcIiksdC5wdXNoKHRoaXMuYWx0ZXJuYXRpdmUoKSk7cmV0dXJue3R5cGU6XCJEaXNqdW5jdGlvblwiLHZhbHVlOnR9fSx0LnByb3RvdHlwZS5hbHRlcm5hdGl2ZT1mdW5jdGlvbigpe2Zvcih2YXIgdD1bXTt0aGlzLmlzVGVybSgpOyl0LnB1c2godGhpcy50ZXJtKCkpO3JldHVybnt0eXBlOlwiQWx0ZXJuYXRpdmVcIix2YWx1ZTp0fX0sdC5wcm90b3R5cGUudGVybT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmlzQXNzZXJ0aW9uKCk/dGhpcy5hc3NlcnRpb24oKTp0aGlzLmF0b20oKX0sdC5wcm90b3R5cGUuYXNzZXJ0aW9uPWZ1bmN0aW9uKCl7c3dpdGNoKHRoaXMucG9wQ2hhcigpKXtjYXNlXCJeXCI6cmV0dXJue3R5cGU6XCJTdGFydEFuY2hvclwifTtjYXNlXCIkXCI6cmV0dXJue3R5cGU6XCJFbmRBbmNob3JcIn07Y2FzZVwiXFxcXFwiOnN3aXRjaCh0aGlzLnBvcENoYXIoKSl7Y2FzZVwiYlwiOnJldHVybnt0eXBlOlwiV29yZEJvdW5kYXJ5XCJ9O2Nhc2VcIkJcIjpyZXR1cm57dHlwZTpcIk5vbldvcmRCb3VuZGFyeVwifX10aHJvdyBFcnJvcihcIkludmFsaWQgQXNzZXJ0aW9uIEVzY2FwZVwiKTtjYXNlXCIoXCI6dmFyIHQ7c3dpdGNoKHRoaXMuY29uc3VtZUNoYXIoXCI/XCIpLHRoaXMucG9wQ2hhcigpKXtjYXNlXCI9XCI6dD1cIkxvb2thaGVhZFwiO2JyZWFrO2Nhc2VcIiFcIjp0PVwiTmVnYXRpdmVMb29rYWhlYWRcIn11KHQpO3ZhciBlPXRoaXMuZGlzanVuY3Rpb24oKTtyZXR1cm4gdGhpcy5jb25zdW1lQ2hhcihcIilcIikse3R5cGU6dCx2YWx1ZTplfX0hZnVuY3Rpb24oKXt0aHJvdyBFcnJvcihcIkludGVybmFsIEVycm9yIC0gU2hvdWxkIG5ldmVyIGdldCBoZXJlIVwiKX0oKX0sdC5wcm90b3R5cGUucXVhbnRpZmllcj1mdW5jdGlvbih0KXt2YXIgZTtzd2l0Y2godGhpcy5wb3BDaGFyKCkpe2Nhc2VcIipcIjplPXthdExlYXN0OjAsYXRNb3N0OjEvMH07YnJlYWs7Y2FzZVwiK1wiOmU9e2F0TGVhc3Q6MSxhdE1vc3Q6MS8wfTticmVhaztjYXNlXCI/XCI6ZT17YXRMZWFzdDowLGF0TW9zdDoxfTticmVhaztjYXNlXCJ7XCI6dmFyIG49dGhpcy5pbnRlZ2VySW5jbHVkaW5nWmVybygpO3N3aXRjaCh0aGlzLnBvcENoYXIoKSl7Y2FzZVwifVwiOmU9e2F0TGVhc3Q6bixhdE1vc3Q6bn07YnJlYWs7Y2FzZVwiLFwiOnZhciByO3RoaXMuaXNEaWdpdCgpPyhyPXRoaXMuaW50ZWdlckluY2x1ZGluZ1plcm8oKSxlPXthdExlYXN0Om4sYXRNb3N0OnJ9KTplPXthdExlYXN0Om4sYXRNb3N0OjEvMH0sdGhpcy5jb25zdW1lQ2hhcihcIn1cIil9aWYoITA9PT10JiZ2b2lkIDA9PT1lKXJldHVybjt1KGUpfWlmKCEwIT09dHx8dm9pZCAwIT09ZSlyZXR1cm4gdShlKSxcIj9cIj09PXRoaXMucGVla0NoYXIoMCk/KHRoaXMuY29uc3VtZUNoYXIoXCI/XCIpLGUuZ3JlZWR5PSExKTplLmdyZWVkeT0hMCxlLnR5cGU9XCJRdWFudGlmaWVyXCIsZX0sdC5wcm90b3R5cGUuYXRvbT1mdW5jdGlvbigpe3ZhciB0O3N3aXRjaCh0aGlzLnBlZWtDaGFyKCkpe2Nhc2VcIi5cIjp0PXRoaXMuZG90QWxsKCk7YnJlYWs7Y2FzZVwiXFxcXFwiOnQ9dGhpcy5hdG9tRXNjYXBlKCk7YnJlYWs7Y2FzZVwiW1wiOnQ9dGhpcy5jaGFyYWN0ZXJDbGFzcygpO2JyZWFrO2Nhc2VcIihcIjp0PXRoaXMuZ3JvdXAoKX1yZXR1cm4gdm9pZCAwPT09dCYmdGhpcy5pc1BhdHRlcm5DaGFyYWN0ZXIoKSYmKHQ9dGhpcy5wYXR0ZXJuQ2hhcmFjdGVyKCkpLHUodCksdGhpcy5pc1F1YW50aWZpZXIoKSYmKHQucXVhbnRpZmllcj10aGlzLnF1YW50aWZpZXIoKSksdH0sdC5wcm90b3R5cGUuZG90QWxsPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3VtZUNoYXIoXCIuXCIpLHt0eXBlOlwiU2V0XCIsY29tcGxlbWVudDohMCx2YWx1ZTpbbyhcIlxcblwiKSxvKFwiXFxyXCIpLG8oXCJcXHUyMDI4XCIpLG8oXCJcXHUyMDI5XCIpXX19LHQucHJvdG90eXBlLmF0b21Fc2NhcGU9ZnVuY3Rpb24oKXtzd2l0Y2godGhpcy5jb25zdW1lQ2hhcihcIlxcXFxcIiksdGhpcy5wZWVrQ2hhcigpKXtjYXNlXCIxXCI6Y2FzZVwiMlwiOmNhc2VcIjNcIjpjYXNlXCI0XCI6Y2FzZVwiNVwiOmNhc2VcIjZcIjpjYXNlXCI3XCI6Y2FzZVwiOFwiOmNhc2VcIjlcIjpyZXR1cm4gdGhpcy5kZWNpbWFsRXNjYXBlQXRvbSgpO2Nhc2VcImRcIjpjYXNlXCJEXCI6Y2FzZVwic1wiOmNhc2VcIlNcIjpjYXNlXCJ3XCI6Y2FzZVwiV1wiOnJldHVybiB0aGlzLmNoYXJhY3RlckNsYXNzRXNjYXBlKCk7Y2FzZVwiZlwiOmNhc2VcIm5cIjpjYXNlXCJyXCI6Y2FzZVwidFwiOmNhc2VcInZcIjpyZXR1cm4gdGhpcy5jb250cm9sRXNjYXBlQXRvbSgpO2Nhc2VcImNcIjpyZXR1cm4gdGhpcy5jb250cm9sTGV0dGVyRXNjYXBlQXRvbSgpO2Nhc2VcIjBcIjpyZXR1cm4gdGhpcy5udWxDaGFyYWN0ZXJBdG9tKCk7Y2FzZVwieFwiOnJldHVybiB0aGlzLmhleEVzY2FwZVNlcXVlbmNlQXRvbSgpO2Nhc2VcInVcIjpyZXR1cm4gdGhpcy5yZWdFeHBVbmljb2RlRXNjYXBlU2VxdWVuY2VBdG9tKCk7ZGVmYXVsdDpyZXR1cm4gdGhpcy5pZGVudGl0eUVzY2FwZUF0b20oKX19LHQucHJvdG90eXBlLmRlY2ltYWxFc2NhcGVBdG9tPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5wb3NpdGl2ZUludGVnZXIoKTtyZXR1cm57dHlwZTpcIkdyb3VwQmFja1JlZmVyZW5jZVwiLHZhbHVlOnR9fSx0LnByb3RvdHlwZS5jaGFyYWN0ZXJDbGFzc0VzY2FwZT1mdW5jdGlvbigpe3ZhciB0LGU9ITE7c3dpdGNoKHRoaXMucG9wQ2hhcigpKXtjYXNlXCJkXCI6dD1jO2JyZWFrO2Nhc2VcIkRcIjp0PWMsZT0hMDticmVhaztjYXNlXCJzXCI6dD1sO2JyZWFrO2Nhc2VcIlNcIjp0PWwsZT0hMDticmVhaztjYXNlXCJ3XCI6dD1wO2JyZWFrO2Nhc2VcIldcIjp0PXAsZT0hMH1yZXR1cm4gdSh0KSx7dHlwZTpcIlNldFwiLHZhbHVlOnQsY29tcGxlbWVudDplfX0sdC5wcm90b3R5cGUuY29udHJvbEVzY2FwZUF0b209ZnVuY3Rpb24oKXt2YXIgdDtzd2l0Y2godGhpcy5wb3BDaGFyKCkpe2Nhc2VcImZcIjp0PW8oXCJcXGZcIik7YnJlYWs7Y2FzZVwiblwiOnQ9byhcIlxcblwiKTticmVhaztjYXNlXCJyXCI6dD1vKFwiXFxyXCIpO2JyZWFrO2Nhc2VcInRcIjp0PW8oXCJcXHRcIik7YnJlYWs7Y2FzZVwidlwiOnQ9byhcIlxcdlwiKX1yZXR1cm4gdSh0KSx7dHlwZTpcIkNoYXJhY3RlclwiLHZhbHVlOnR9fSx0LnByb3RvdHlwZS5jb250cm9sTGV0dGVyRXNjYXBlQXRvbT1mdW5jdGlvbigpe3RoaXMuY29uc3VtZUNoYXIoXCJjXCIpO3ZhciB0PXRoaXMucG9wQ2hhcigpO2lmKCExPT09L1thLXpBLVpdLy50ZXN0KHQpKXRocm93IEVycm9yKFwiSW52YWxpZCBcIik7dmFyIGU9dC50b1VwcGVyQ2FzZSgpLmNoYXJDb2RlQXQoMCktNjQ7cmV0dXJue3R5cGU6XCJDaGFyYWN0ZXJcIix2YWx1ZTplfX0sdC5wcm90b3R5cGUubnVsQ2hhcmFjdGVyQXRvbT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnN1bWVDaGFyKFwiMFwiKSx7dHlwZTpcIkNoYXJhY3RlclwiLHZhbHVlOm8oXCJcXDBcIil9fSx0LnByb3RvdHlwZS5oZXhFc2NhcGVTZXF1ZW5jZUF0b209ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdW1lQ2hhcihcInhcIiksdGhpcy5wYXJzZUhleERpZ2l0cygyKX0sdC5wcm90b3R5cGUucmVnRXhwVW5pY29kZUVzY2FwZVNlcXVlbmNlQXRvbT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnN1bWVDaGFyKFwidVwiKSx0aGlzLnBhcnNlSGV4RGlnaXRzKDQpfSx0LnByb3RvdHlwZS5pZGVudGl0eUVzY2FwZUF0b209ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnBvcENoYXIoKTtyZXR1cm57dHlwZTpcIkNoYXJhY3RlclwiLHZhbHVlOm8odCl9fSx0LnByb3RvdHlwZS5jbGFzc1BhdHRlcm5DaGFyYWN0ZXJBdG9tPWZ1bmN0aW9uKCl7c3dpdGNoKHRoaXMucGVla0NoYXIoKSl7Y2FzZVwiXFxuXCI6Y2FzZVwiXFxyXCI6Y2FzZVwiXFx1MjAyOFwiOmNhc2VcIlxcdTIwMjlcIjpjYXNlXCJcXFxcXCI6Y2FzZVwiXVwiOnRocm93IEVycm9yKFwiVEJEXCIpO2RlZmF1bHQ6dmFyIHQ9dGhpcy5wb3BDaGFyKCk7cmV0dXJue3R5cGU6XCJDaGFyYWN0ZXJcIix2YWx1ZTpvKHQpfX19LHQucHJvdG90eXBlLmNoYXJhY3RlckNsYXNzPWZ1bmN0aW9uKCl7dmFyIHQ9W10sZT0hMTtmb3IodGhpcy5jb25zdW1lQ2hhcihcIltcIiksXCJeXCI9PT10aGlzLnBlZWtDaGFyKDApJiYodGhpcy5jb25zdW1lQ2hhcihcIl5cIiksZT0hMCk7dGhpcy5pc0NsYXNzQXRvbSgpOyl7dmFyIG49dGhpcy5jbGFzc0F0b20oKSxyPVwiQ2hhcmFjdGVyXCI9PT1uLnR5cGU7aWYociYmdGhpcy5pc1JhbmdlRGFzaCgpKXt0aGlzLmNvbnN1bWVDaGFyKFwiLVwiKTt2YXIgaT10aGlzLmNsYXNzQXRvbSgpLHM9XCJDaGFyYWN0ZXJcIj09PWkudHlwZTtpZihzKXtpZihpLnZhbHVlPG4udmFsdWUpdGhyb3cgRXJyb3IoXCJSYW5nZSBvdXQgb2Ygb3JkZXIgaW4gY2hhcmFjdGVyIGNsYXNzXCIpO3QucHVzaCh7ZnJvbTpuLnZhbHVlLHRvOmkudmFsdWV9KX1lbHNlIGEobi52YWx1ZSx0KSx0LnB1c2gobyhcIi1cIikpLGEoaS52YWx1ZSx0KX1lbHNlIGEobi52YWx1ZSx0KX1yZXR1cm4gdGhpcy5jb25zdW1lQ2hhcihcIl1cIikse3R5cGU6XCJTZXRcIixjb21wbGVtZW50OmUsdmFsdWU6dH19LHQucHJvdG90eXBlLmNsYXNzQXRvbT1mdW5jdGlvbigpe3N3aXRjaCh0aGlzLnBlZWtDaGFyKCkpe2Nhc2VcIl1cIjpjYXNlXCJcXG5cIjpjYXNlXCJcXHJcIjpjYXNlXCJcXHUyMDI4XCI6Y2FzZVwiXFx1MjAyOVwiOnRocm93IEVycm9yKFwiVEJEXCIpO2Nhc2VcIlxcXFxcIjpyZXR1cm4gdGhpcy5jbGFzc0VzY2FwZSgpO2RlZmF1bHQ6cmV0dXJuIHRoaXMuY2xhc3NQYXR0ZXJuQ2hhcmFjdGVyQXRvbSgpfX0sdC5wcm90b3R5cGUuY2xhc3NFc2NhcGU9ZnVuY3Rpb24oKXtzd2l0Y2godGhpcy5jb25zdW1lQ2hhcihcIlxcXFxcIiksdGhpcy5wZWVrQ2hhcigpKXtjYXNlXCJiXCI6cmV0dXJuIHRoaXMuY29uc3VtZUNoYXIoXCJiXCIpLHt0eXBlOlwiQ2hhcmFjdGVyXCIsdmFsdWU6byhcIlxcYlwiKX07Y2FzZVwiZFwiOmNhc2VcIkRcIjpjYXNlXCJzXCI6Y2FzZVwiU1wiOmNhc2VcIndcIjpjYXNlXCJXXCI6cmV0dXJuIHRoaXMuY2hhcmFjdGVyQ2xhc3NFc2NhcGUoKTtjYXNlXCJmXCI6Y2FzZVwiblwiOmNhc2VcInJcIjpjYXNlXCJ0XCI6Y2FzZVwidlwiOnJldHVybiB0aGlzLmNvbnRyb2xFc2NhcGVBdG9tKCk7Y2FzZVwiY1wiOnJldHVybiB0aGlzLmNvbnRyb2xMZXR0ZXJFc2NhcGVBdG9tKCk7Y2FzZVwiMFwiOnJldHVybiB0aGlzLm51bENoYXJhY3RlckF0b20oKTtjYXNlXCJ4XCI6cmV0dXJuIHRoaXMuaGV4RXNjYXBlU2VxdWVuY2VBdG9tKCk7Y2FzZVwidVwiOnJldHVybiB0aGlzLnJlZ0V4cFVuaWNvZGVFc2NhcGVTZXF1ZW5jZUF0b20oKTtkZWZhdWx0OnJldHVybiB0aGlzLmlkZW50aXR5RXNjYXBlQXRvbSgpfX0sdC5wcm90b3R5cGUuZ3JvdXA9ZnVuY3Rpb24oKXt2YXIgdD0hMDtzd2l0Y2godGhpcy5jb25zdW1lQ2hhcihcIihcIiksdGhpcy5wZWVrQ2hhcigwKSl7Y2FzZVwiP1wiOnRoaXMuY29uc3VtZUNoYXIoXCI/XCIpLHRoaXMuY29uc3VtZUNoYXIoXCI6XCIpLHQ9ITE7YnJlYWs7ZGVmYXVsdDp0aGlzLmdyb3VwSWR4Kyt9dmFyIGU9dGhpcy5kaXNqdW5jdGlvbigpO3RoaXMuY29uc3VtZUNoYXIoXCIpXCIpO3ZhciBuPXt0eXBlOlwiR3JvdXBcIixjYXB0dXJpbmc6dCx2YWx1ZTplfTtyZXR1cm4gdCYmKG4uaWR4PXRoaXMuZ3JvdXBJZHgpLG59LHQucHJvdG90eXBlLnBvc2l0aXZlSW50ZWdlcj1mdW5jdGlvbigpe3ZhciB0PXRoaXMucG9wQ2hhcigpO2lmKCExPT09aS50ZXN0KHQpKXRocm93IEVycm9yKFwiRXhwZWN0aW5nIGEgcG9zaXRpdmUgaW50ZWdlclwiKTtmb3IoO3IudGVzdCh0aGlzLnBlZWtDaGFyKDApKTspdCs9dGhpcy5wb3BDaGFyKCk7cmV0dXJuIHBhcnNlSW50KHQsMTApfSx0LnByb3RvdHlwZS5pbnRlZ2VySW5jbHVkaW5nWmVybz1mdW5jdGlvbigpe3ZhciB0PXRoaXMucG9wQ2hhcigpO2lmKCExPT09ci50ZXN0KHQpKXRocm93IEVycm9yKFwiRXhwZWN0aW5nIGFuIGludGVnZXJcIik7Zm9yKDtyLnRlc3QodGhpcy5wZWVrQ2hhcigwKSk7KXQrPXRoaXMucG9wQ2hhcigpO3JldHVybiBwYXJzZUludCh0LDEwKX0sdC5wcm90b3R5cGUucGF0dGVybkNoYXJhY3Rlcj1mdW5jdGlvbigpe3ZhciB0PXRoaXMucG9wQ2hhcigpO3N3aXRjaCh0KXtjYXNlXCJcXG5cIjpjYXNlXCJcXHJcIjpjYXNlXCJcXHUyMDI4XCI6Y2FzZVwiXFx1MjAyOVwiOmNhc2VcIl5cIjpjYXNlXCIkXCI6Y2FzZVwiXFxcXFwiOmNhc2VcIi5cIjpjYXNlXCIqXCI6Y2FzZVwiK1wiOmNhc2VcIj9cIjpjYXNlXCIoXCI6Y2FzZVwiKVwiOmNhc2VcIltcIjpjYXNlXCJ8XCI6dGhyb3cgRXJyb3IoXCJUQkRcIik7ZGVmYXVsdDpyZXR1cm57dHlwZTpcIkNoYXJhY3RlclwiLHZhbHVlOm8odCl9fX0sdC5wcm90b3R5cGUuaXNSZWdFeHBGbGFnPWZ1bmN0aW9uKCl7c3dpdGNoKHRoaXMucGVla0NoYXIoMCkpe2Nhc2VcImdcIjpjYXNlXCJpXCI6Y2FzZVwibVwiOmNhc2VcInVcIjpjYXNlXCJ5XCI6cmV0dXJuITA7ZGVmYXVsdDpyZXR1cm4hMX19LHQucHJvdG90eXBlLmlzUmFuZ2VEYXNoPWZ1bmN0aW9uKCl7cmV0dXJuXCItXCI9PT10aGlzLnBlZWtDaGFyKCkmJnRoaXMuaXNDbGFzc0F0b20oMSl9LHQucHJvdG90eXBlLmlzRGlnaXQ9ZnVuY3Rpb24oKXtyZXR1cm4gci50ZXN0KHRoaXMucGVla0NoYXIoMCkpfSx0LnByb3RvdHlwZS5pc0NsYXNzQXRvbT1mdW5jdGlvbih0KXtzd2l0Y2godm9pZCAwPT09dCYmKHQ9MCksdGhpcy5wZWVrQ2hhcih0KSl7Y2FzZVwiXVwiOmNhc2VcIlxcblwiOmNhc2VcIlxcclwiOmNhc2VcIlxcdTIwMjhcIjpjYXNlXCJcXHUyMDI5XCI6cmV0dXJuITE7ZGVmYXVsdDpyZXR1cm4hMH19LHQucHJvdG90eXBlLmlzVGVybT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmlzQXRvbSgpfHx0aGlzLmlzQXNzZXJ0aW9uKCl9LHQucHJvdG90eXBlLmlzQXRvbT1mdW5jdGlvbigpe2lmKHRoaXMuaXNQYXR0ZXJuQ2hhcmFjdGVyKCkpcmV0dXJuITA7c3dpdGNoKHRoaXMucGVla0NoYXIoMCkpe2Nhc2VcIi5cIjpjYXNlXCJcXFxcXCI6Y2FzZVwiW1wiOmNhc2VcIihcIjpyZXR1cm4hMDtkZWZhdWx0OnJldHVybiExfX0sdC5wcm90b3R5cGUuaXNBc3NlcnRpb249ZnVuY3Rpb24oKXtzd2l0Y2godGhpcy5wZWVrQ2hhcigwKSl7Y2FzZVwiXlwiOmNhc2VcIiRcIjpyZXR1cm4hMDtjYXNlXCJcXFxcXCI6c3dpdGNoKHRoaXMucGVla0NoYXIoMSkpe2Nhc2VcImJcIjpjYXNlXCJCXCI6cmV0dXJuITA7ZGVmYXVsdDpyZXR1cm4hMX1jYXNlXCIoXCI6cmV0dXJuXCI/XCI9PT10aGlzLnBlZWtDaGFyKDEpJiYoXCI9XCI9PT10aGlzLnBlZWtDaGFyKDIpfHxcIiFcIj09PXRoaXMucGVla0NoYXIoMikpO2RlZmF1bHQ6cmV0dXJuITF9fSx0LnByb3RvdHlwZS5pc1F1YW50aWZpZXI9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnNhdmVTdGF0ZSgpO3RyeXtyZXR1cm4gdm9pZCAwIT09dGhpcy5xdWFudGlmaWVyKCEwKX1jYXRjaCh0KXtyZXR1cm4hMX1maW5hbGx5e3RoaXMucmVzdG9yZVN0YXRlKHQpfX0sdC5wcm90b3R5cGUuaXNQYXR0ZXJuQ2hhcmFjdGVyPWZ1bmN0aW9uKCl7c3dpdGNoKHRoaXMucGVla0NoYXIoKSl7Y2FzZVwiXlwiOmNhc2VcIiRcIjpjYXNlXCJcXFxcXCI6Y2FzZVwiLlwiOmNhc2VcIipcIjpjYXNlXCIrXCI6Y2FzZVwiP1wiOmNhc2VcIihcIjpjYXNlXCIpXCI6Y2FzZVwiW1wiOmNhc2VcInxcIjpjYXNlXCIvXCI6Y2FzZVwiXFxuXCI6Y2FzZVwiXFxyXCI6Y2FzZVwiXFx1MjAyOFwiOmNhc2VcIlxcdTIwMjlcIjpyZXR1cm4hMTtkZWZhdWx0OnJldHVybiEwfX0sdC5wcm90b3R5cGUucGFyc2VIZXhEaWdpdHM9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPVwiXCIscj0wO3I8dDtyKyspe3ZhciBpPXRoaXMucG9wQ2hhcigpO2lmKCExPT09bi50ZXN0KGkpKXRocm93IEVycm9yKFwiRXhwZWN0aW5nIGEgSGV4RGVjaW1hbCBkaWdpdHNcIik7ZSs9aX12YXIgbz1wYXJzZUludChlLDE2KTtyZXR1cm57dHlwZTpcIkNoYXJhY3RlclwiLHZhbHVlOm99fSx0LnByb3RvdHlwZS5wZWVrQ2hhcj1mdW5jdGlvbih0KXtyZXR1cm4gdm9pZCAwPT09dCYmKHQ9MCksdGhpcy5pbnB1dFt0aGlzLmlkeCt0XX0sdC5wcm90b3R5cGUucG9wQ2hhcj1mdW5jdGlvbigpe3ZhciB0PXRoaXMucGVla0NoYXIoMCk7cmV0dXJuIHRoaXMuY29uc3VtZUNoYXIoKSx0fSx0LnByb3RvdHlwZS5jb25zdW1lQ2hhcj1mdW5jdGlvbih0KXtpZih2b2lkIDAhPT10JiZ0aGlzLmlucHV0W3RoaXMuaWR4XSE9PXQpdGhyb3cgRXJyb3IoXCJFeHBlY3RlZDogJ1wiK3QrXCInIGJ1dCBmb3VuZDogJ1wiK3RoaXMuaW5wdXRbdGhpcy5pZHhdK1wiJyBhdCBvZmZzZXQ6IFwiK3RoaXMuaWR4KTtpZih0aGlzLmlkeD49dGhpcy5pbnB1dC5sZW5ndGgpdGhyb3cgRXJyb3IoXCJVbmV4cGVjdGVkIGVuZCBvZiBpbnB1dFwiKTt0aGlzLmlkeCsrfTt2YXIgZSxuPS9bMC05YS1mQS1GXS8scj0vWzAtOV0vLGk9L1sxLTldLztmdW5jdGlvbiBvKHQpe3JldHVybiB0LmNoYXJDb2RlQXQoMCl9ZnVuY3Rpb24gYSh0LGUpe3ZvaWQgMCE9PXQubGVuZ3RoP3QuZm9yRWFjaChmdW5jdGlvbih0KXtlLnB1c2godCl9KTplLnB1c2godCl9ZnVuY3Rpb24gcyh0LGUpe2lmKCEwPT09dFtlXSl0aHJvd1wiZHVwbGljYXRlIGZsYWcgXCIrZTt0W2VdPSEwfWZ1bmN0aW9uIHUodCl7aWYodm9pZCAwPT09dCl0aHJvdyBFcnJvcihcIkludGVybmFsIEVycm9yIC0gU2hvdWxkIG5ldmVyIGdldCBoZXJlIVwiKX12YXIgYz1bXTtmb3IoZT1vKFwiMFwiKTtlPD1vKFwiOVwiKTtlKyspYy5wdXNoKGUpO3ZhciBwPVtvKFwiX1wiKV0uY29uY2F0KGMpO2ZvcihlPW8oXCJhXCIpO2U8PW8oXCJ6XCIpO2UrKylwLnB1c2goZSk7Zm9yKGU9byhcIkFcIik7ZTw9byhcIlpcIik7ZSsrKXAucHVzaChlKTt2YXIgbD1bbyhcIiBcIiksbyhcIlxcZlwiKSxvKFwiXFxuXCIpLG8oXCJcXHJcIiksbyhcIlxcdFwiKSxvKFwiXFx2XCIpLG8oXCJcXHRcIiksbyhcIsKgXCIpLG8oXCLhmoBcIiksbyhcIuKAgFwiKSxvKFwi4oCBXCIpLG8oXCLigIJcIiksbyhcIuKAg1wiKSxvKFwi4oCEXCIpLG8oXCLigIVcIiksbyhcIuKAhlwiKSxvKFwi4oCHXCIpLG8oXCLigIhcIiksbyhcIuKAiVwiKSxvKFwi4oCKXCIpLG8oXCJcXHUyMDI4XCIpLG8oXCJcXHUyMDI5XCIpLG8oXCLigK9cIiksbyhcIuKBn1wiKSxvKFwi44CAXCIpLG8oXCJcXHVmZWZmXCIpXTtmdW5jdGlvbiBoKCl7fXJldHVybiBoLnByb3RvdHlwZS52aXNpdENoaWxkcmVuPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZSBpbiB0KXt2YXIgbj10W2VdO3QuaGFzT3duUHJvcGVydHkoZSkmJih2b2lkIDAhPT1uLnR5cGU/dGhpcy52aXNpdChuKTpBcnJheS5pc0FycmF5KG4pJiZuLmZvckVhY2goZnVuY3Rpb24odCl7dGhpcy52aXNpdCh0KX0sdGhpcykpfX0saC5wcm90b3R5cGUudmlzaXQ9ZnVuY3Rpb24odCl7c3dpdGNoKHQudHlwZSl7Y2FzZVwiUGF0dGVyblwiOnRoaXMudmlzaXRQYXR0ZXJuKHQpO2JyZWFrO2Nhc2VcIkZsYWdzXCI6dGhpcy52aXNpdEZsYWdzKHQpO2JyZWFrO2Nhc2VcIkRpc2p1bmN0aW9uXCI6dGhpcy52aXNpdERpc2p1bmN0aW9uKHQpO2JyZWFrO2Nhc2VcIkFsdGVybmF0aXZlXCI6dGhpcy52aXNpdEFsdGVybmF0aXZlKHQpO2JyZWFrO2Nhc2VcIlN0YXJ0QW5jaG9yXCI6dGhpcy52aXNpdFN0YXJ0QW5jaG9yKHQpO2JyZWFrO2Nhc2VcIkVuZEFuY2hvclwiOnRoaXMudmlzaXRFbmRBbmNob3IodCk7YnJlYWs7Y2FzZVwiV29yZEJvdW5kYXJ5XCI6dGhpcy52aXNpdFdvcmRCb3VuZGFyeSh0KTticmVhaztjYXNlXCJOb25Xb3JkQm91bmRhcnlcIjp0aGlzLnZpc2l0Tm9uV29yZEJvdW5kYXJ5KHQpO2JyZWFrO2Nhc2VcIkxvb2thaGVhZFwiOnRoaXMudmlzaXRMb29rYWhlYWQodCk7YnJlYWs7Y2FzZVwiTmVnYXRpdmVMb29rYWhlYWRcIjp0aGlzLnZpc2l0TmVnYXRpdmVMb29rYWhlYWQodCk7YnJlYWs7Y2FzZVwiQ2hhcmFjdGVyXCI6dGhpcy52aXNpdENoYXJhY3Rlcih0KTticmVhaztjYXNlXCJTZXRcIjp0aGlzLnZpc2l0U2V0KHQpO2JyZWFrO2Nhc2VcIkdyb3VwXCI6dGhpcy52aXNpdEdyb3VwKHQpO2JyZWFrO2Nhc2VcIkdyb3VwQmFja1JlZmVyZW5jZVwiOnRoaXMudmlzaXRHcm91cEJhY2tSZWZlcmVuY2UodCk7YnJlYWs7Y2FzZVwiUXVhbnRpZmllclwiOnRoaXMudmlzaXRRdWFudGlmaWVyKHQpfXRoaXMudmlzaXRDaGlsZHJlbih0KX0saC5wcm90b3R5cGUudmlzaXRQYXR0ZXJuPWZ1bmN0aW9uKHQpe30saC5wcm90b3R5cGUudmlzaXRGbGFncz1mdW5jdGlvbih0KXt9LGgucHJvdG90eXBlLnZpc2l0RGlzanVuY3Rpb249ZnVuY3Rpb24odCl7fSxoLnByb3RvdHlwZS52aXNpdEFsdGVybmF0aXZlPWZ1bmN0aW9uKHQpe30saC5wcm90b3R5cGUudmlzaXRTdGFydEFuY2hvcj1mdW5jdGlvbih0KXt9LGgucHJvdG90eXBlLnZpc2l0RW5kQW5jaG9yPWZ1bmN0aW9uKHQpe30saC5wcm90b3R5cGUudmlzaXRXb3JkQm91bmRhcnk9ZnVuY3Rpb24odCl7fSxoLnByb3RvdHlwZS52aXNpdE5vbldvcmRCb3VuZGFyeT1mdW5jdGlvbih0KXt9LGgucHJvdG90eXBlLnZpc2l0TG9va2FoZWFkPWZ1bmN0aW9uKHQpe30saC5wcm90b3R5cGUudmlzaXROZWdhdGl2ZUxvb2thaGVhZD1mdW5jdGlvbih0KXt9LGgucHJvdG90eXBlLnZpc2l0Q2hhcmFjdGVyPWZ1bmN0aW9uKHQpe30saC5wcm90b3R5cGUudmlzaXRTZXQ9ZnVuY3Rpb24odCl7fSxoLnByb3RvdHlwZS52aXNpdEdyb3VwPWZ1bmN0aW9uKHQpe30saC5wcm90b3R5cGUudmlzaXRHcm91cEJhY2tSZWZlcmVuY2U9ZnVuY3Rpb24odCl7fSxoLnByb3RvdHlwZS52aXNpdFF1YW50aWZpZXI9ZnVuY3Rpb24odCl7fSx7UmVnRXhwUGFyc2VyOnQsQmFzZVJlZ0V4cFZpc2l0b3I6aCxWRVJTSU9OOlwiMC40LjBcIn19KT9yLmFwcGx5KGUsaSk6cil8fCh0LmV4cG9ydHM9byl9LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxlLmRlZmF1bHRMZXhlckVycm9yUHJvdmlkZXI9e2J1aWxkVW5hYmxlVG9Qb3BMZXhlck1vZGVNZXNzYWdlOmZ1bmN0aW9uKHQpe3JldHVyblwiVW5hYmxlIHRvIHBvcCBMZXhlciBNb2RlIGFmdGVyIGVuY291bnRlcmluZyBUb2tlbiAtPlwiK3QuaW1hZ2UrXCI8LSBUaGUgTW9kZSBTdGFjayBpcyBlbXB0eVwifSxidWlsZFVuZXhwZWN0ZWRDaGFyYWN0ZXJzTWVzc2FnZTpmdW5jdGlvbih0LGUsbixyLGkpe3JldHVyblwidW5leHBlY3RlZCBjaGFyYWN0ZXI6IC0+XCIrdC5jaGFyQXQoZSkrXCI8LSBhdCBvZmZzZXQ6IFwiK2UrXCIsIHNraXBwZWQgXCIrbitcIiBjaGFyYWN0ZXJzLlwifX19LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgcj1uKDApLGk9bigxKSxvPW4oOCk7ZnVuY3Rpb24gYSh0KXtpZih0IGluc3RhbmNlb2YgaS5Ob25UZXJtaW5hbClyZXR1cm4gYSh0LnJlZmVyZW5jZWRSdWxlKTtpZih0IGluc3RhbmNlb2YgaS5UZXJtaW5hbClyZXR1cm4gYyh0KTtpZihvLmlzU2VxdWVuY2VQcm9kKHQpKXJldHVybiBzKHQpO2lmKG8uaXNCcmFuY2hpbmdQcm9kKHQpKXJldHVybiB1KHQpO3Rocm93IEVycm9yKFwibm9uIGV4aGF1c3RpdmUgbWF0Y2hcIil9ZnVuY3Rpb24gcyh0KXtmb3IodmFyIGUsbj1bXSxpPXQuZGVmaW5pdGlvbixzPTAsdT1pLmxlbmd0aD5zLGM9ITA7dSYmYzspZT1pW3NdLGM9by5pc09wdGlvbmFsUHJvZChlKSxuPW4uY29uY2F0KGEoZSkpLHMrPTEsdT1pLmxlbmd0aD5zO3JldHVybiByLnVuaXEobil9ZnVuY3Rpb24gdSh0KXt2YXIgZT1yLm1hcCh0LmRlZmluaXRpb24sZnVuY3Rpb24odCl7cmV0dXJuIGEodCl9KTtyZXR1cm4gci51bmlxKHIuZmxhdHRlbihlKSl9ZnVuY3Rpb24gYyh0KXtyZXR1cm5bdC50ZXJtaW5hbFR5cGVdfWUuZmlyc3Q9YSxlLmZpcnN0Rm9yU2VxdWVuY2U9cyxlLmZpcnN0Rm9yQnJhbmNoaW5nPXUsZS5maXJzdEZvclRlcm1pbmFsPWN9LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxlLklOPVwiX35JTn5fXCJ9LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgcixpPW4oMjkpLG89bigwKSxhPW4oMSk7IWZ1bmN0aW9uKHQpe3RbdC5PUFRJT049MF09XCJPUFRJT05cIix0W3QuT1I9MV09XCJPUlwiLHRbdC5NQU5ZPTJdPVwiTUFOWVwiLHRbdC5NQU5ZX1NFUD0zXT1cIk1BTllfU0VQXCIsdFt0LkFUX0xFQVNUX09ORT00XT1cIkFUX0xFQVNUX09ORVwiLHRbdC5BVF9MRUFTVF9PTkVfU0VQPTVdPVwiQVRfTEVBU1RfT05FX1NFUFwiLHRbdC5SRUY9Nl09XCJSRUZcIix0W3QuVEVSTUlOQUw9N109XCJURVJNSU5BTFwiLHRbdC5GTEFUPThdPVwiRkxBVFwifShyPWUuUHJvZFR5cGV8fChlLlByb2RUeXBlPXt9KSk7dmFyIHM9Lyg/Olxccyp7XFxzKk5BTUVcXHMqOlxccypbXCInYF0oW1xcdyRdKilbXCInYF0pPy8sdT1uZXcgUmVnRXhwKHMuc291cmNlLnJlcGxhY2UoXCJ7XCIsXCJcIikucmVwbGFjZShcIik/XCIsXCJcXFxccyosKT9cIikpLGM9L1xcLlxccypDT05TVU1FKFxcZCspP1xccypcXChcXHMqKD86W2EtekEtWl8kXVxcdypcXHMqXFwuXFxzKikqKFthLXpBLVpfJF1cXHcqKS8scD1uZXcgUmVnRXhwKGMuc291cmNlLFwiZ1wiKSxsPS9cXC5cXHMqU1VCUlVMRShcXGQrKT9cXHMqXFwoXFxzKig/OlthLXpBLVpfJF1cXHcqXFxzKlxcLlxccyopKihbYS16QS1aXyRdXFx3KikvLGg9bmV3IFJlZ0V4cChsLnNvdXJjZSxcImdcIiksZj0vXFwuXFxzKk9QVElPTihcXGQrKT9cXHMqXFwoLyxkPW5ldyBSZWdFeHAoZi5zb3VyY2Urcy5zb3VyY2UpLEU9bmV3IFJlZ0V4cChmLnNvdXJjZSxcImdcIiksbT0vXFwuXFxzKk1BTlkoXFxkKyk/XFxzKlxcKC8seT1uZXcgUmVnRXhwKG0uc291cmNlK3Muc291cmNlKSxUPW5ldyBSZWdFeHAobS5zb3VyY2UsXCJnXCIpLHY9L1xccypTRVBcXHMqOlxccyooPzpbYS16QS1aXyRdXFx3KlxccypcXC5cXHMqKSooW2EtekEtWl8kXVxcdyopLyxnPW5ldyBSZWdFeHAoL1xcLlxccypNQU5ZX1NFUChcXGQrKT9cXHMqXFwoXFxzKnsvLnNvdXJjZSt1LnNvdXJjZSt2LnNvdXJjZSksXz1uZXcgUmVnRXhwKGcuc291cmNlLFwiZ1wiKSxSPW5ldyBSZWdFeHAoL1xcLlxccypBVF9MRUFTVF9PTkVfU0VQKFxcZCspP1xccypcXChcXHMqey8uc291cmNlK3Uuc291cmNlK3Yuc291cmNlKSxBPW5ldyBSZWdFeHAoUi5zb3VyY2UsXCJnXCIpLE49L1xcLlxccypBVF9MRUFTVF9PTkUoXFxkKyk/XFxzKlxcKC8sTz1uZXcgUmVnRXhwKE4uc291cmNlK3Muc291cmNlKSxTPW5ldyBSZWdFeHAoTi5zb3VyY2UsXCJnXCIpLEk9L1xcLlxccypPUihcXGQrKT9cXHMqXFwoLyxMPW5ldyBSZWdFeHAoSS5zb3VyY2Urcy5zb3VyY2UpLGs9bmV3IFJlZ0V4cChJLnNvdXJjZSxcImdcIiksUD1uZXcgUmVnRXhwKHUuc291cmNlKy9cXHMqKEFMVClcXHMqOi8uc291cmNlKSx4PW5ldyBSZWdFeHAoUC5zb3VyY2UsXCJnXCIpO2Z1bmN0aW9uIEModCxuLGkpe3N3aXRjaCh0LnR5cGUpe2Nhc2Ugci5BVF9MRUFTVF9PTkU6cmV0dXJuIGZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gTShPLG5ldyBhLlJlcGV0aXRpb25NYW5kYXRvcnkoe2RlZmluaXRpb246W119KSx0LGUsbil9KHQsbixpKTtjYXNlIHIuQVRfTEVBU1RfT05FX1NFUDpyZXR1cm4gZnVuY3Rpb24odCxlLG4pe3JldHVybiBGKHQsZSxhLlJlcGV0aXRpb25NYW5kYXRvcnlXaXRoU2VwYXJhdG9yLFIsbil9KHQsbixpKTtjYXNlIHIuTUFOWV9TRVA6cmV0dXJuIGZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gRih0LGUsYS5SZXBldGl0aW9uV2l0aFNlcGFyYXRvcixnLG4pfSh0LG4saSk7Y2FzZSByLk1BTlk6cmV0dXJuIGZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gTSh5LG5ldyBhLlJlcGV0aXRpb24oe2RlZmluaXRpb246W119KSx0LGUsbil9KHQsbixpKTtjYXNlIHIuT1BUSU9OOnJldHVybiBmdW5jdGlvbih0LGUsbil7cmV0dXJuIE0oZCxuZXcgYS5PcHRpb24oe2RlZmluaXRpb246W119KSx0LGUsbil9KHQsbixpKTtjYXNlIHIuT1I6cmV0dXJuIGZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gTShMLG5ldyBhLkFsdGVybmF0aW9uKHtkZWZpbml0aW9uOltdfSksdCxlLG4pfSh0LG4saSk7Y2FzZSByLkZMQVQ6cmV0dXJuIGZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uZXcgYS5GbGF0KHtkZWZpbml0aW9uOltdfSksaT1QLmV4ZWModC50ZXh0KVsxXTtvLmlzVW5kZWZpbmVkKGkpfHwoci5uYW1lPWkpO3JldHVybiBiKHIsdC5yYW5nZSxlLG4pfSh0LG4saSk7Y2FzZSByLlJFRjpyZXR1cm4gZnVuY3Rpb24odCl7dmFyIGU9bC5leGVjKHQudGV4dCksbj12b2lkIDA9PT1lWzFdPzA6cGFyc2VJbnQoZVsxXSwxMCkscj1lWzJdO3JldHVybiBuZXcgYS5Ob25UZXJtaW5hbCh7bm9uVGVybWluYWxOYW1lOnIsaWR4Om59KX0odCk7Y2FzZSByLlRFUk1JTkFMOnJldHVybiBmdW5jdGlvbih0LG4pe3ZhciByPWMuZXhlYyh0LnRleHQpLGk9dm9pZCAwPT09clsxXT8wOnBhcnNlSW50KHJbMV0sMTApLG89clsyXSxzPWUudGVybWluYWxOYW1lVG9Db25zdHJ1Y3RvcltvXTtpZighcyl0aHJvdyBFcnJvcihcIlRlcm1pbmFsIFRva2VuIG5hbWU6IDxcIitvK1wiPiBub3QgZm91bmQgaW4gcnVsZTogPFwiK24rXCI+ICBcXG5cXHRTZWU6IGh0dHBzOi8vc2FwLmdpdGh1Yi5pby9jaGV2cm90YWluL2RvY3MvZ3VpZGUvcmVzb2x2aW5nX2dyYW1tYXJfZXJyb3JzLmh0bWwjVEVSTUlOQUxfTkFNRV9OT1RfRk9VTkRcXG5cXHRGb3IgRnVydGhlciBkZXRhaWxzLlwiKTtyZXR1cm4gbmV3IGEuVGVybWluYWwoe3Rlcm1pbmFsVHlwZTpzLGlkeDppfSl9KHQsaSk7ZGVmYXVsdDp0aHJvdyBFcnJvcihcIm5vbiBleGhhdXN0aXZlIG1hdGNoXCIpfX1mdW5jdGlvbiBNKHQsZSxuLHIsaSl7dmFyIGE9dC5leGVjKG4udGV4dCkscz12b2lkIDA9PT1hWzFdO2UuaWR4PXM/MDpwYXJzZUludChhWzFdLDEwKTt2YXIgdT1hWzJdO3JldHVybiBvLmlzVW5kZWZpbmVkKHUpfHwoZS5uYW1lPXUpLGIoZSxuLnJhbmdlLHIsaSl9ZnVuY3Rpb24gRih0LG4scixpLGEpe3ZhciBzPWkuZXhlYyh0LnRleHQpLHU9dm9pZCAwPT09c1sxXT8wOnBhcnNlSW50KHNbMV0sMTApLGM9c1szXSxwPWUudGVybWluYWxOYW1lVG9Db25zdHJ1Y3RvcltjXTtpZighcCl0aHJvdyBFcnJvcihcIlNlcGFyYXRvciBUZXJtaW5hbCBUb2tlbiBuYW1lOiBcIitjK1wiIG5vdCBmb3VuZFwiKTt2YXIgbD1uZXcgcih7ZGVmaW5pdGlvbjpbXSxzZXBhcmF0b3I6cCxpZHg6dX0pLGg9c1syXTtyZXR1cm4gby5pc1VuZGVmaW5lZChoKXx8KGwubmFtZT1oKSxiKGwsdC5yYW5nZSxuLGEpfWZ1bmN0aW9uIGIodCxlLG4scil7dmFyIGk9RChlLG4pLGE9by5zb3J0QnkoaSxmdW5jdGlvbih0KXtyZXR1cm4gdC5yYW5nZS5zdGFydH0pLHM9W107cmV0dXJuIG8uZm9yRWFjaChhLGZ1bmN0aW9uKHQpe3MucHVzaChDKHQsbixyKSl9KSx0LmRlZmluaXRpb249cyx0fWZ1bmN0aW9uIEQodCxlKXtyZXR1cm4gby5maWx0ZXIoZSxmdW5jdGlvbihuKXt2YXIgcj10LnN0cmljdGx5Q29udGFpbnNSYW5nZShuLnJhbmdlKSxpPW8uZXZlcnkoZSxmdW5jdGlvbihlKXt2YXIgcj1lLnJhbmdlLnN0cmljdGx5Q29udGFpbnNSYW5nZShuLnJhbmdlKSxpPWUucmFuZ2UuaXNTdHJpY3RseUNvbnRhaW5lZEluUmFuZ2UodCk7cmV0dXJuIShyJiZpKX0pO3JldHVybiByJiZpfSl9ZS50ZXJtaW5hbE5hbWVUb0NvbnN0cnVjdG9yPXt9LGUuYnVpbGRUb3BQcm9kdWN0aW9uPWZ1bmN0aW9uKHQsbixyKXtlLnRlcm1pbmFsTmFtZVRvQ29uc3RydWN0b3I9cjt2YXIgbz1WKGooSyhcIiAgXCIrdCkpKTtyZXR1cm4gZnVuY3Rpb24odCxlLG4scil7cmV0dXJuIGIobmV3IGEuUnVsZSh7bmFtZTp0LGRlZmluaXRpb246W10sb3JnVGV4dDpyfSksZSxuLHQpfShuLG5ldyBpLlJhbmdlKDAsdC5sZW5ndGgrMiksbyx0KX0sZS5idWlsZFByb2RHYXN0PUMsZS5nZXREaXJlY3RseUNvbnRhaW5lZFJhbmdlcz1EO3ZhciB3PS9cXC9cXC8uKi9nLFU9L1xcL1xcKihbXipdfFtcXHJcXG5dfChcXCorKFteKlxcL118W1xcclxcbl0pKSkqXFwqK1xcLy9nLEc9LyhOQU1FXFxzKjpcXHMqKT9cIihbXlxcXFxcIl18XFxcXChbYmZucnR2XCJcXFxcXFwvXXx1WzAtOWEtZkEtRl17NH0pKSpcIi9nLEI9LyhOQU1FXFxzKjpcXHMqKT8nKFteXFxcXCddfFxcXFwoW2JmbnJ0didcXFxcXFwvXXx1WzAtOWEtZkEtRl17NH0pKSonL2c7ZnVuY3Rpb24gSyh0KXtyZXR1cm4gdC5yZXBsYWNlKHcsXCJcIikucmVwbGFjZShVLFwiXCIpfWZ1bmN0aW9uIFcodCxlKXtyZXR1cm4gdm9pZCAwIT09ZT90OlwiXCJ9ZnVuY3Rpb24gaih0KXtyZXR1cm4gdC5yZXBsYWNlKEcsVykucmVwbGFjZShCLFcpfWZ1bmN0aW9uIFYodCl7dmFyIGU9WSh0KSxuPUgodCkscj1YKHQpLGk9eih0KSxvPXEodCksYT0kKHQpLHM9Wih0KSx1PVEodCk7cmV0dXJuW10uY29uY2F0KGUsbixyLGksbyxhLHMsdSl9ZnVuY3Rpb24gWSh0KXtyZXR1cm4gbnQodCxyLlRFUk1JTkFMLHApfWZ1bmN0aW9uIEgodCl7cmV0dXJuIG50KHQsci5SRUYsaCl9ZnVuY3Rpb24gWCh0KXtyZXR1cm4gcnQodCxyLkFUX0xFQVNUX09ORSxTKX1mdW5jdGlvbiB6KHQpe3JldHVybiBydCh0LHIuQVRfTEVBU1RfT05FX1NFUCxBKX1mdW5jdGlvbiBxKHQpe3JldHVybiBydCh0LHIuTUFOWSxUKX1mdW5jdGlvbiAkKHQpe3JldHVybiBydCh0LHIuTUFOWV9TRVAsXyl9ZnVuY3Rpb24gWih0KXtyZXR1cm4gcnQodCxyLk9QVElPTixFKX1mdW5jdGlvbiBRKHQpe3ZhciBlPXJ0KHQsci5PUixrKSxuPWV0KGUpO3JldHVybiBlLmNvbmNhdChuKX1lLnJlbW92ZUNvbW1lbnRzPUssZS5yZW1vdmVTdHJpbmdMaXRlcmFscz1qLGUuY3JlYXRlUmFuZ2VzPVYsZS5jcmVhdGVUZXJtaW5hbFJhbmdlcz1ZLGUuY3JlYXRlUmVmc1Jhbmdlcz1ILGUuY3JlYXRlQXRMZWFzdE9uZVJhbmdlcz1YLGUuY3JlYXRlQXRMZWFzdE9uZVNlcFJhbmdlcz16LGUuY3JlYXRlTWFueVJhbmdlcz1xLGUuY3JlYXRlTWFueVNlcFJhbmdlcz0kLGUuY3JlYXRlT3B0aW9uUmFuZ2VzPVosZS5jcmVhdGVPclJhbmdlcz1RO3ZhciBKPW8ucGFydGlhbChvdCxcIntcIixcIn1cIiksdHQ9by5wYXJ0aWFsKG90LFwiKFwiLFwiKVwiKTtmdW5jdGlvbiBldCh0KXt2YXIgZT1bXTtyZXR1cm4gby5mb3JFYWNoKHQsZnVuY3Rpb24odCl7dmFyIG49aXQodC50ZXh0LHIuRkxBVCx4LEopLGk9dC5yYW5nZS5zdGFydDtvLmZvckVhY2gobixmdW5jdGlvbih0KXt0LnJhbmdlLnN0YXJ0Kz1pLHQucmFuZ2UuZW5kKz1pfSksZT1lLmNvbmNhdChuKX0pLG8udW5pcShlLGZ1bmN0aW9uKHQpe3JldHVybiB0LnR5cGUrXCJ+XCIrdC5yYW5nZS5zdGFydCtcIn5cIit0LnJhbmdlLmVuZCtcIn5cIit0LnRleHR9KX1mdW5jdGlvbiBudCh0LGUsbil7Zm9yKHZhciByLG89W107cj1uLmV4ZWModCk7KXt2YXIgYT1yLmluZGV4LHM9bi5sYXN0SW5kZXgsdT1uZXcgaS5SYW5nZShhLHMpLGM9clswXTtvLnB1c2goe3JhbmdlOnUsdGV4dDpjLHR5cGU6ZX0pfXJldHVybiBvfWZ1bmN0aW9uIHJ0KHQsZSxuKXtyZXR1cm4gaXQodCxlLG4sdHQpfWZ1bmN0aW9uIGl0KHQsZSxuLHIpe2Zvcih2YXIgbyxhPVtdO289bi5leGVjKHQpOyl7dmFyIHM9by5pbmRleCx1PXIocytvWzBdLmxlbmd0aCx0KSxjPW5ldyBpLlJhbmdlKHMsdSkscD10LnN1YnN0cihzLHUtcysxKTthLnB1c2goe3JhbmdlOmMsdGV4dDpwLHR5cGU6ZX0pfXJldHVybiBhfWZ1bmN0aW9uIG90KHQsZSxuLHIpe2Zvcih2YXIgaT1bMV0sYT0tMTshby5pc0VtcHR5KGkpJiZhK248ci5sZW5ndGg7KXthKys7dmFyIHM9ci5jaGFyQXQobithKTtzPT09dD9pLnB1c2goMSk6cz09PWUmJmkucG9wKCl9aWYoby5pc0VtcHR5KGkpKXJldHVybiBhK247dGhyb3cgbmV3IEVycm9yKFwiSU5WQUxJRCBJTlBVVCBURVhULCBVTlRFUk1JTkFURUQgUEFSRU5USEVTSVNcIil9ZnVuY3Rpb24gYXQodCxlKXtyZXR1cm4gby5tYXAodCxmdW5jdGlvbih0KXtyZXR1cm4gc3QodCxlKX0pfWZ1bmN0aW9uIHN0KHQsZSl7c3dpdGNoKHQudHlwZSl7Y2FzZVwiTm9uVGVybWluYWxcIjpyZXR1cm4gbmV3IGEuTm9uVGVybWluYWwoe25vblRlcm1pbmFsTmFtZTp0Lm5hbWUsaWR4OnQuaWR4fSk7Y2FzZVwiRmxhdFwiOnJldHVybiBuZXcgYS5GbGF0KHtuYW1lOnQubmFtZSxkZWZpbml0aW9uOmF0KHQuZGVmaW5pdGlvbixlKX0pO2Nhc2VcIk9wdGlvblwiOnJldHVybiBuZXcgYS5PcHRpb24oe25hbWU6dC5uYW1lLGlkeDp0LmlkeCxkZWZpbml0aW9uOmF0KHQuZGVmaW5pdGlvbixlKX0pO2Nhc2VcIlJlcGV0aXRpb25NYW5kYXRvcnlcIjpyZXR1cm4gbmV3IGEuUmVwZXRpdGlvbk1hbmRhdG9yeSh7bmFtZTp0Lm5hbWUsaWR4OnQuaWR4LGRlZmluaXRpb246YXQodC5kZWZpbml0aW9uLGUpfSk7Y2FzZVwiUmVwZXRpdGlvbk1hbmRhdG9yeVdpdGhTZXBhcmF0b3JcIjpyZXR1cm4gbmV3IGEuUmVwZXRpdGlvbk1hbmRhdG9yeVdpdGhTZXBhcmF0b3Ioe25hbWU6dC5uYW1lLGlkeDp0LmlkeCxzZXBhcmF0b3I6ZVt0LnNlcGFyYXRvci5uYW1lXSxkZWZpbml0aW9uOmF0KHQuZGVmaW5pdGlvbixlKX0pO2Nhc2VcIlJlcGV0aXRpb25XaXRoU2VwYXJhdG9yXCI6cmV0dXJuIG5ldyBhLlJlcGV0aXRpb25XaXRoU2VwYXJhdG9yKHtuYW1lOnQubmFtZSxpZHg6dC5pZHgsc2VwYXJhdG9yOmVbdC5zZXBhcmF0b3IubmFtZV0sZGVmaW5pdGlvbjphdCh0LmRlZmluaXRpb24sZSl9KTtjYXNlXCJSZXBldGl0aW9uXCI6cmV0dXJuIG5ldyBhLlJlcGV0aXRpb24oe25hbWU6dC5uYW1lLGlkeDp0LmlkeCxkZWZpbml0aW9uOmF0KHQuZGVmaW5pdGlvbixlKX0pO2Nhc2VcIkFsdGVybmF0aW9uXCI6cmV0dXJuIG5ldyBhLkFsdGVybmF0aW9uKHtuYW1lOnQubmFtZSxpZHg6dC5pZHgsZGVmaW5pdGlvbjphdCh0LmRlZmluaXRpb24sZSl9KTtjYXNlXCJUZXJtaW5hbFwiOnJldHVybiBuZXcgYS5UZXJtaW5hbCh7dGVybWluYWxUeXBlOmVbdC5uYW1lXSxpZHg6dC5pZHh9KTtjYXNlXCJSdWxlXCI6cmV0dXJuIG5ldyBhLlJ1bGUoe25hbWU6dC5uYW1lLG9yZ1RleHQ6dC5vcmdUZXh0LGRlZmluaXRpb246YXQodC5kZWZpbml0aW9uLGUpfSk7ZGVmYXVsdDp9fWUuY3JlYXRlT3JQYXJ0UmFuZ2VzPWV0LGUuZmluZENsb3NpbmdPZmZzZXQ9b3QsZS5kZXNlcmlhbGl6ZUdyYW1tYXI9YXQsZS5kZXNlcmlhbGl6ZVByb2R1Y3Rpb249c3R9LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgcj1uKDApLGk9big0KSxvPW4oMzApLGE9bigxMSkscz1uKDEwKSx1PW4oOCk7ZS5yZXNvbHZlR3JhbW1hcj1mdW5jdGlvbih0KXt0PXIuZGVmYXVsdHModCx7ZXJyTXNnUHJvdmlkZXI6cy5kZWZhdWx0R3JhbW1hclJlc29sdmVyRXJyb3JQcm92aWRlcn0pO3ZhciBlPW5ldyBpLkhhc2hUYWJsZTtyZXR1cm4gci5mb3JFYWNoKHQucnVsZXMsZnVuY3Rpb24odCl7ZS5wdXQodC5uYW1lLHQpfSksby5yZXNvbHZlR3JhbW1hcihlLHQuZXJyTXNnUHJvdmlkZXIpfSxlLnZhbGlkYXRlR3JhbW1hcj1mdW5jdGlvbih0KXtyZXR1cm4gdD1yLmRlZmF1bHRzKHQse2Vyck1zZ1Byb3ZpZGVyOnMuZGVmYXVsdEdyYW1tYXJWYWxpZGF0b3JFcnJvclByb3ZpZGVyLGlnbm9yZWRJc3N1ZXM6e319KSxhLnZhbGlkYXRlR3JhbW1hcih0LnJ1bGVzLHQubWF4TG9va2FoZWFkLHQudG9rZW5UeXBlcyx0Lmlnbm9yZWRJc3N1ZXMsdC5lcnJNc2dQcm92aWRlcix0LmdyYW1tYXJOYW1lKX0sZS5hc3NpZ25PY2N1cnJlbmNlSW5kaWNlcz1mdW5jdGlvbih0KXtyLmZvckVhY2godC5ydWxlcyxmdW5jdGlvbih0KXt2YXIgZT1uZXcgdS5Ec2xNZXRob2RzQ29sbGVjdG9yVmlzaXRvcjt0LmFjY2VwdChlKSxyLmZvckVhY2goZS5kc2xNZXRob2RzLGZ1bmN0aW9uKHQpe3IuZm9yRWFjaCh0LGZ1bmN0aW9uKHQsZSl7dC5pZHg9ZSsxfSl9KX0pfX0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciByPW4oMiksaT1uKDApLG89big2KSxhPW4oMjIpLHM9big0KSx1PW4oMyk7ZnVuY3Rpb24gYyh0KXt0aGlzLm5hbWU9ZS5JTl9SVUxFX1JFQ09WRVJZX0VYQ0VQVElPTix0aGlzLm1lc3NhZ2U9dH1lLkVPRl9GT0xMT1dfS0VZPXt9LGUuSU5fUlVMRV9SRUNPVkVSWV9FWENFUFRJT049XCJJblJ1bGVSZWNvdmVyeUV4Y2VwdGlvblwiLGUuSW5SdWxlUmVjb3ZlcnlFeGNlcHRpb249YyxjLnByb3RvdHlwZT1FcnJvci5wcm90b3R5cGU7dmFyIHA9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7fXJldHVybiB0LnByb3RvdHlwZS5pbml0UmVjb3ZlcmFibGU9ZnVuY3Rpb24odCl7dGhpcy5maXJzdEFmdGVyUmVwTWFwPW5ldyBzLkhhc2hUYWJsZSx0aGlzLnJlc3luY0ZvbGxvd3M9bmV3IHMuSGFzaFRhYmxlLHRoaXMucmVjb3ZlcnlFbmFibGVkPWkuaGFzKHQsXCJyZWNvdmVyeUVuYWJsZWRcIik/dC5yZWNvdmVyeUVuYWJsZWQ6dS5ERUZBVUxUX1BBUlNFUl9DT05GSUcucmVjb3ZlcnlFbmFibGVkLHRoaXMucmVjb3ZlcnlFbmFibGVkJiYodGhpcy5hdHRlbXB0SW5SZXBldGl0aW9uUmVjb3Zlcnk9bCl9LHQucHJvdG90eXBlLmdldFRva2VuVG9JbnNlcnQ9ZnVuY3Rpb24odCl7dmFyIGU9ci5jcmVhdGVUb2tlbkluc3RhbmNlKHQsXCJcIixOYU4sTmFOLE5hTixOYU4sTmFOLE5hTik7cmV0dXJuIGUuaXNJbnNlcnRlZEluUmVjb3Zlcnk9ITAsZX0sdC5wcm90b3R5cGUuY2FuVG9rZW5UeXBlQmVJbnNlcnRlZEluUmVjb3Zlcnk9ZnVuY3Rpb24odCl7cmV0dXJuITB9LHQucHJvdG90eXBlLnRyeUluUmVwZXRpdGlvblJlY292ZXJ5PWZ1bmN0aW9uKHQsZSxuLHIpe2Zvcih2YXIgYT10aGlzLHM9dGhpcy5maW5kUmVTeW5jVG9rZW5UeXBlKCksdT10aGlzLmV4cG9ydExleGVyU3RhdGUoKSxjPVtdLHA9ITEsbD10aGlzLkxBKDEpLGg9dGhpcy5MQSgxKSxmPWZ1bmN0aW9uKCl7dmFyIHQ9YS5MQSgwKSxlPWEuZXJyb3JNZXNzYWdlUHJvdmlkZXIuYnVpbGRNaXNtYXRjaFRva2VuTWVzc2FnZSh7ZXhwZWN0ZWQ6cixhY3R1YWw6bCxwcmV2aW91czp0LHJ1bGVOYW1lOmEuZ2V0Q3VyclJ1bGVGdWxsTmFtZSgpfSksbj1uZXcgby5NaXNtYXRjaGVkVG9rZW5FeGNlcHRpb24oZSxsLGEuTEEoMCkpO24ucmVzeW5jZWRUb2tlbnM9aS5kcm9wUmlnaHQoYyksYS5TQVZFX0VSUk9SKG4pfTshcDspe2lmKHRoaXMudG9rZW5NYXRjaGVyKGgscikpcmV0dXJuIHZvaWQgZigpO2lmKG4uY2FsbCh0aGlzKSlyZXR1cm4gZigpLHZvaWQgdC5hcHBseSh0aGlzLGUpO3RoaXMudG9rZW5NYXRjaGVyKGgscyk/cD0hMDooaD10aGlzLlNLSVBfVE9LRU4oKSx0aGlzLmFkZFRvUmVzeW5jVG9rZW5zKGgsYykpfXRoaXMuaW1wb3J0TGV4ZXJTdGF0ZSh1KX0sdC5wcm90b3R5cGUuc2hvdWxkSW5SZXBldGl0aW9uUmVjb3ZlcnlCZVRyaWVkPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHZvaWQgMCE9PXQmJnZvaWQgMCE9PWUmJighdGhpcy50b2tlbk1hdGNoZXIodGhpcy5MQSgxKSx0KSYmKCF0aGlzLmlzQmFja1RyYWNraW5nKCkmJiF0aGlzLmNhblBlcmZvcm1JblJ1bGVSZWNvdmVyeSh0LHRoaXMuZ2V0Rm9sbG93c0ZvckluUnVsZVJlY292ZXJ5KHQsZSkpKSl9LHQucHJvdG90eXBlLmdldEZvbGxvd3NGb3JJblJ1bGVSZWNvdmVyeT1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuZ2V0Q3VycmVudEdyYW1tYXJQYXRoKHQsZSk7cmV0dXJuIHRoaXMuZ2V0TmV4dFBvc3NpYmxlVG9rZW5UeXBlcyhuKX0sdC5wcm90b3R5cGUudHJ5SW5SdWxlUmVjb3Zlcnk9ZnVuY3Rpb24odCxlKXtpZih0aGlzLmNhblJlY292ZXJXaXRoU2luZ2xlVG9rZW5JbnNlcnRpb24odCxlKSlyZXR1cm4gdGhpcy5nZXRUb2tlblRvSW5zZXJ0KHQpO2lmKHRoaXMuY2FuUmVjb3ZlcldpdGhTaW5nbGVUb2tlbkRlbGV0aW9uKHQpKXt2YXIgbj10aGlzLlNLSVBfVE9LRU4oKTtyZXR1cm4gdGhpcy5jb25zdW1lVG9rZW4oKSxufXRocm93IG5ldyBjKFwic2FkIHNhZCBwYW5kYVwiKX0sdC5wcm90b3R5cGUuY2FuUGVyZm9ybUluUnVsZVJlY292ZXJ5PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuY2FuUmVjb3ZlcldpdGhTaW5nbGVUb2tlbkluc2VydGlvbih0LGUpfHx0aGlzLmNhblJlY292ZXJXaXRoU2luZ2xlVG9rZW5EZWxldGlvbih0KX0sdC5wcm90b3R5cGUuY2FuUmVjb3ZlcldpdGhTaW5nbGVUb2tlbkluc2VydGlvbj1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXM7aWYoIXRoaXMuY2FuVG9rZW5UeXBlQmVJbnNlcnRlZEluUmVjb3ZlcnkodCkpcmV0dXJuITE7aWYoaS5pc0VtcHR5KGUpKXJldHVybiExO3ZhciByPXRoaXMuTEEoMSk7cmV0dXJuIHZvaWQgMCE9PWkuZmluZChlLGZ1bmN0aW9uKHQpe3JldHVybiBuLnRva2VuTWF0Y2hlcihyLHQpfSl9LHQucHJvdG90eXBlLmNhblJlY292ZXJXaXRoU2luZ2xlVG9rZW5EZWxldGlvbj1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy50b2tlbk1hdGNoZXIodGhpcy5MQSgyKSx0KX0sdC5wcm90b3R5cGUuaXNJbkN1cnJlbnRSdWxlUmVTeW5jU2V0PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZ2V0Q3VyckZvbGxvd0tleSgpLG49dGhpcy5nZXRGb2xsb3dTZXRGcm9tRm9sbG93S2V5KGUpO3JldHVybiBpLmNvbnRhaW5zKG4sdCl9LHQucHJvdG90eXBlLmZpbmRSZVN5bmNUb2tlblR5cGU9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcy5mbGF0dGVuRm9sbG93U2V0KCksZT10aGlzLkxBKDEpLG49Mjs7KXt2YXIgcj1lLnRva2VuVHlwZTtpZihpLmNvbnRhaW5zKHQscikpcmV0dXJuIHI7ZT10aGlzLkxBKG4pLG4rK319LHQucHJvdG90eXBlLmdldEN1cnJGb2xsb3dLZXk9ZnVuY3Rpb24oKXtpZigxPT09dGhpcy5SVUxFX1NUQUNLLmxlbmd0aClyZXR1cm4gZS5FT0ZfRk9MTE9XX0tFWTt2YXIgdD10aGlzLmdldExhc3RFeHBsaWNpdFJ1bGVTaG9ydE5hbWUoKSxuPXRoaXMuZ2V0TGFzdEV4cGxpY2l0UnVsZU9jY3VycmVuY2VJbmRleCgpLHI9dGhpcy5nZXRQcmV2aW91c0V4cGxpY2l0UnVsZVNob3J0TmFtZSgpO3JldHVybntydWxlTmFtZTp0aGlzLnNob3J0UnVsZU5hbWVUb0Z1bGxOYW1lKHQpLGlkeEluQ2FsbGluZ1J1bGU6bixpblJ1bGU6dGhpcy5zaG9ydFJ1bGVOYW1lVG9GdWxsTmFtZShyKX19LHQucHJvdG90eXBlLmJ1aWxkRnVsbEZvbGxvd0tleVN0YWNrPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxuPXRoaXMuUlVMRV9TVEFDSyxyPXRoaXMuUlVMRV9PQ0NVUlJFTkNFX1NUQUNLO3JldHVybiBpLmlzRW1wdHkodGhpcy5MQVNUX0VYUExJQ0lUX1JVTEVfU1RBQ0spfHwobj1pLm1hcCh0aGlzLkxBU1RfRVhQTElDSVRfUlVMRV9TVEFDSyxmdW5jdGlvbihlKXtyZXR1cm4gdC5SVUxFX1NUQUNLW2VdfSkscj1pLm1hcCh0aGlzLkxBU1RfRVhQTElDSVRfUlVMRV9TVEFDSyxmdW5jdGlvbihlKXtyZXR1cm4gdC5SVUxFX09DQ1VSUkVOQ0VfU1RBQ0tbZV19KSksaS5tYXAobixmdW5jdGlvbihpLG8pe3JldHVybiAwPT09bz9lLkVPRl9GT0xMT1dfS0VZOntydWxlTmFtZTp0LnNob3J0UnVsZU5hbWVUb0Z1bGxOYW1lKGkpLGlkeEluQ2FsbGluZ1J1bGU6cltvXSxpblJ1bGU6dC5zaG9ydFJ1bGVOYW1lVG9GdWxsTmFtZShuW28tMV0pfX0pfSx0LnByb3RvdHlwZS5mbGF0dGVuRm9sbG93U2V0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxlPWkubWFwKHRoaXMuYnVpbGRGdWxsRm9sbG93S2V5U3RhY2soKSxmdW5jdGlvbihlKXtyZXR1cm4gdC5nZXRGb2xsb3dTZXRGcm9tRm9sbG93S2V5KGUpfSk7cmV0dXJuIGkuZmxhdHRlbihlKX0sdC5wcm90b3R5cGUuZ2V0Rm9sbG93U2V0RnJvbUZvbGxvd0tleT1mdW5jdGlvbih0KXtpZih0PT09ZS5FT0ZfRk9MTE9XX0tFWSlyZXR1cm5bci5FT0ZdO3ZhciBuPXQucnVsZU5hbWUrdC5pZHhJbkNhbGxpbmdSdWxlK2EuSU4rdC5pblJ1bGU7cmV0dXJuIHRoaXMucmVzeW5jRm9sbG93cy5nZXQobil9LHQucHJvdG90eXBlLmFkZFRvUmVzeW5jVG9rZW5zPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMudG9rZW5NYXRjaGVyKHQsci5FT0YpfHxlLnB1c2godCksZX0sdC5wcm90b3R5cGUucmVTeW5jVG89ZnVuY3Rpb24odCl7Zm9yKHZhciBlPVtdLG49dGhpcy5MQSgxKTshMT09PXRoaXMudG9rZW5NYXRjaGVyKG4sdCk7KW49dGhpcy5TS0lQX1RPS0VOKCksdGhpcy5hZGRUb1Jlc3luY1Rva2VucyhuLGUpO3JldHVybiBpLmRyb3BSaWdodChlKX0sdC5wcm90b3R5cGUuYXR0ZW1wdEluUmVwZXRpdGlvblJlY292ZXJ5PWZ1bmN0aW9uKHQsZSxuLHIsaSxvKXt9LHQucHJvdG90eXBlLmdldEN1cnJlbnRHcmFtbWFyUGF0aD1mdW5jdGlvbih0LGUpe3JldHVybntydWxlU3RhY2s6dGhpcy5nZXRIdW1hblJlYWRhYmxlUnVsZVN0YWNrKCksb2NjdXJyZW5jZVN0YWNrOmkuY2xvbmVBcnIodGhpcy5SVUxFX09DQ1VSUkVOQ0VfU1RBQ0spLGxhc3RUb2s6dCxsYXN0VG9rT2NjdXJyZW5jZTplfX0sdC5wcm90b3R5cGUuZ2V0SHVtYW5SZWFkYWJsZVJ1bGVTdGFjaz1mdW5jdGlvbigpe3ZhciB0PXRoaXM7cmV0dXJuIGkuaXNFbXB0eSh0aGlzLkxBU1RfRVhQTElDSVRfUlVMRV9TVEFDSyk/aS5tYXAodGhpcy5SVUxFX1NUQUNLLGZ1bmN0aW9uKGUpe3JldHVybiB0LnNob3J0UnVsZU5hbWVUb0Z1bGxOYW1lKGUpfSk6aS5tYXAodGhpcy5MQVNUX0VYUExJQ0lUX1JVTEVfU1RBQ0ssZnVuY3Rpb24oZSl7cmV0dXJuIHQuc2hvcnRSdWxlTmFtZVRvRnVsbE5hbWUodC5SVUxFX1NUQUNLW2VdKX0pfSx0fSgpO2Z1bmN0aW9uIGwodCxlLG4saSxvLGEpe3ZhciBzPXRoaXMuZ2V0S2V5Rm9yQXV0b21hdGljTG9va2FoZWFkKGksbyksdT10aGlzLmZpcnN0QWZ0ZXJSZXBNYXAuZ2V0KHMpO2lmKHZvaWQgMD09PXUpe3ZhciBjPXRoaXMuZ2V0Q3VyclJ1bGVGdWxsTmFtZSgpO3U9bmV3IGEodGhpcy5nZXRHQXN0UHJvZHVjdGlvbnMoKS5nZXQoYyksbykuc3RhcnRXYWxraW5nKCksdGhpcy5maXJzdEFmdGVyUmVwTWFwLnB1dChzLHUpfXZhciBwPXUudG9rZW4sbD11Lm9jY3VycmVuY2UsaD11LmlzRW5kT2ZSdWxlOzE9PT10aGlzLlJVTEVfU1RBQ0subGVuZ3RoJiZoJiZ2b2lkIDA9PT1wJiYocD1yLkVPRixsPTEpLHRoaXMuc2hvdWxkSW5SZXBldGl0aW9uUmVjb3ZlcnlCZVRyaWVkKHAsbCkmJnRoaXMudHJ5SW5SZXBldGl0aW9uUmVjb3ZlcnkodCxlLG4scCl9ZS5SZWNvdmVyYWJsZT1wLGUuYXR0ZW1wdEluUmVwZXRpdGlvblJlY292ZXJ5PWx9LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjt2YXIgcixpPXRoaXMmJnRoaXMuX19leHRlbmRzfHwocj1mdW5jdGlvbih0LGUpe3JldHVybihyPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbih0LGUpe3QuX19wcm90b19fPWV9fHxmdW5jdGlvbih0LGUpe2Zvcih2YXIgbiBpbiBlKWUuaGFzT3duUHJvcGVydHkobikmJih0W25dPWVbbl0pfSkodCxlKX0sZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBuKCl7dGhpcy5jb25zdHJ1Y3Rvcj10fXIodCxlKSx0LnByb3RvdHlwZT1udWxsPT09ZT9PYmplY3QuY3JlYXRlKGUpOihuLnByb3RvdHlwZT1lLnByb3RvdHlwZSxuZXcgbil9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbz1uKDE0KSxhPW4oNCkscz1uKDIxKSx1PW4oMCksYz1uKDIyKSxwPW4oMiksbD1uKDEpLGg9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlKXt2YXIgbj10LmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIG4udG9wUHJvZD1lLG4uZm9sbG93cz1uZXcgYS5IYXNoVGFibGUsbn1yZXR1cm4gaShlLHQpLGUucHJvdG90eXBlLnN0YXJ0V2Fsa2luZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLndhbGsodGhpcy50b3BQcm9kKSx0aGlzLmZvbGxvd3N9LGUucHJvdG90eXBlLndhbGtUZXJtaW5hbD1mdW5jdGlvbih0LGUsbil7fSxlLnByb3RvdHlwZS53YWxrUHJvZFJlZj1mdW5jdGlvbih0LGUsbil7dmFyIHI9Zih0LnJlZmVyZW5jZWRSdWxlLHQuaWR4KSt0aGlzLnRvcFByb2QubmFtZSxpPWUuY29uY2F0KG4pLG89bmV3IGwuRmxhdCh7ZGVmaW5pdGlvbjppfSksYT1zLmZpcnN0KG8pO3RoaXMuZm9sbG93cy5wdXQocixhKX0sZX0oby5SZXN0V2Fsa2VyKTtmdW5jdGlvbiBmKHQsZSl7cmV0dXJuIHQubmFtZStlK2MuSU59ZS5SZXN5bmNGb2xsb3dzV2Fsa2VyPWgsZS5jb21wdXRlQWxsUHJvZHNGb2xsb3dzPWZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBhLkhhc2hUYWJsZTtyZXR1cm4gdS5mb3JFYWNoKHQsZnVuY3Rpb24odCl7dmFyIG49bmV3IGgodCkuc3RhcnRXYWxraW5nKCk7ZS5wdXRBbGwobil9KSxlfSxlLmJ1aWxkQmV0d2VlblByb2RzRm9sbG93UHJlZml4PWYsZS5idWlsZEluUHJvZEZvbGxvd1ByZWZpeD1mdW5jdGlvbih0KXtyZXR1cm4gcC50b2tlbk5hbWUodC50ZXJtaW5hbFR5cGUpK3QuaWR4K2MuSU59fSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7dmFyIHIsaT10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8KHI9ZnVuY3Rpb24odCxlKXtyZXR1cm4ocj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24odCxlKXt0Ll9fcHJvdG9fXz1lfXx8ZnVuY3Rpb24odCxlKXtmb3IodmFyIG4gaW4gZSllLmhhc093blByb3BlcnR5KG4pJiYodFtuXT1lW25dKX0pKHQsZSl9LGZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gbigpe3RoaXMuY29uc3RydWN0b3I9dH1yKHQsZSksdC5wcm90b3R5cGU9bnVsbD09PWU/T2JqZWN0LmNyZWF0ZShlKToobi5wcm90b3R5cGU9ZS5wcm90b3R5cGUsbmV3IG4pfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG89bigxOSksYT1uKDIpLHM9bigxNSksdT1uKDApLGM9bigyOCkscD1uZXcgby5SZWdFeHBQYXJzZXIsbD1cIlBBVFRFUk5cIjtmdW5jdGlvbiBoKHQpe3ZhciBlPXUuZmlsdGVyKHQsZnVuY3Rpb24odCl7cmV0dXJuIXUuaGFzKHQsbCl9KTtyZXR1cm57ZXJyb3JzOnUubWFwKGUsZnVuY3Rpb24odCl7cmV0dXJue21lc3NhZ2U6XCJUb2tlbiBUeXBlOiAtPlwiK2EudG9rZW5OYW1lKHQpK1wiPC0gbWlzc2luZyBzdGF0aWMgJ1BBVFRFUk4nIHByb3BlcnR5XCIsdHlwZTpzLkxleGVyRGVmaW5pdGlvbkVycm9yVHlwZS5NSVNTSU5HX1BBVFRFUk4sdG9rZW5UeXBlczpbdF19fSksdmFsaWQ6dS5kaWZmZXJlbmNlKHQsZSl9fWZ1bmN0aW9uIGYodCl7dmFyIGU9dS5maWx0ZXIodCxmdW5jdGlvbih0KXt2YXIgZT10W2xdO3JldHVybiEodS5pc1JlZ0V4cChlKXx8dS5pc0Z1bmN0aW9uKGUpfHx1LmhhcyhlLFwiZXhlY1wiKXx8dS5pc1N0cmluZyhlKSl9KTtyZXR1cm57ZXJyb3JzOnUubWFwKGUsZnVuY3Rpb24odCl7cmV0dXJue21lc3NhZ2U6XCJUb2tlbiBUeXBlOiAtPlwiK2EudG9rZW5OYW1lKHQpK1wiPC0gc3RhdGljICdQQVRURVJOJyBjYW4gb25seSBiZSBhIFJlZ0V4cCwgYSBGdW5jdGlvbiBtYXRjaGluZyB0aGUge0N1c3RvbVBhdHRlcm5NYXRjaGVyRnVuY30gdHlwZSBvciBhbiBPYmplY3QgbWF0Y2hpbmcgdGhlIHtJQ3VzdG9tUGF0dGVybn0gaW50ZXJmYWNlLlwiLHR5cGU6cy5MZXhlckRlZmluaXRpb25FcnJvclR5cGUuSU5WQUxJRF9QQVRURVJOLHRva2VuVHlwZXM6W3RdfX0pLHZhbGlkOnUuZGlmZmVyZW5jZSh0LGUpfX1lLkRFRkFVTFRfTU9ERT1cImRlZmF1bHRNb2RlXCIsZS5NT0RFUz1cIm1vZGVzXCIsZS5TVVBQT1JUX1NUSUNLWT1cImJvb2xlYW5cIj09dHlwZW9mIG5ldyBSZWdFeHAoXCIoPzopXCIpLnN0aWNreSxlLmRpc2FibGVTdGlja3k9ZnVuY3Rpb24oKXtlLlNVUFBPUlRfU1RJQ0tZPSExfSxlLmVuYWJsZVN0aWNreT1mdW5jdGlvbigpe2UuU1VQUE9SVF9TVElDS1k9ITB9LGUuYW5hbHl6ZVRva2VuVHlwZXM9ZnVuY3Rpb24odCxuKXtuPXUuZGVmYXVsdHMobix7dXNlU3RpY2t5OmUuU1VQUE9SVF9TVElDS1ksZGVidWc6ITEsc2FmZU1vZGU6ITEscG9zaXRpb25UcmFja2luZzpcImZ1bGxcIixsaW5lVGVybWluYXRvckNoYXJhY3RlcnM6W1wiXFxyXCIsXCJcXG5cIl19KTt2YXIgcj11LnJlamVjdCh0LGZ1bmN0aW9uKHQpe3JldHVybiB0W2xdPT09cy5MZXhlci5OQX0pLGk9ITEsbz11Lm1hcChyLGZ1bmN0aW9uKHQpe3ZhciBlPXRbbF07aWYodS5pc1JlZ0V4cChlKSl7dmFyIHI9ZS5zb3VyY2U7cmV0dXJuIDE9PT1yLmxlbmd0aCYmXCJeXCIhPT1yJiZcIiRcIiE9PXImJlwiLlwiIT09cj9yOjIhPT1yLmxlbmd0aHx8XCJcXFxcXCIhPT1yWzBdfHx1LmNvbnRhaW5zKFtcImRcIixcIkRcIixcInNcIixcIlNcIixcInRcIixcInJcIixcIm5cIixcInRcIixcIjBcIixcImNcIixcImJcIixcIkJcIixcImZcIixcInZcIixcIndcIixcIldcIl0sclsxXSk/bi51c2VTdGlja3k/TyhlKTpOKGUpOnJbMV19aWYodS5pc0Z1bmN0aW9uKGUpKXJldHVybiBpPSEwLHtleGVjOmV9O2lmKHUuaGFzKGUsXCJleGVjXCIpKXJldHVybiBpPSEwLGU7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGUpe2lmKDE9PT1lLmxlbmd0aClyZXR1cm4gZTt2YXIgbz1lLnJlcGxhY2UoL1tcXFxcXiQuKis/KClbXFxde318XS9nLFwiXFxcXCQmXCIpLGE9bmV3IFJlZ0V4cChvKTtyZXR1cm4gbi51c2VTdGlja3k/TyhhKTpOKGEpfXRocm93IEVycm9yKFwibm9uIGV4aGF1c3RpdmUgbWF0Y2hcIil9KSxwPXUubWFwKHIsZnVuY3Rpb24odCl7cmV0dXJuIHQudG9rZW5UeXBlSWR4fSksaD11Lm1hcChyLGZ1bmN0aW9uKHQpe3ZhciBlPXQuR1JPVVA7aWYoZSE9PXMuTGV4ZXIuU0tJUFBFRCl7aWYodS5pc1N0cmluZyhlKSlyZXR1cm4gZTtpZih1LmlzVW5kZWZpbmVkKGUpKXJldHVybiExO3Rocm93IEVycm9yKFwibm9uIGV4aGF1c3RpdmUgbWF0Y2hcIil9fSksZj11Lm1hcChyLGZ1bmN0aW9uKHQpe3ZhciBlPXQuTE9OR0VSX0FMVDtpZihlKXJldHVybiB1LmluZGV4T2YocixlKX0pLGQ9dS5tYXAocixmdW5jdGlvbih0KXtyZXR1cm4gdC5QVVNIX01PREV9KSxFPXUubWFwKHIsZnVuY3Rpb24odCl7cmV0dXJuIHUuaGFzKHQsXCJQT1BfTU9ERVwiKX0pLG09UChuLmxpbmVUZXJtaW5hdG9yQ2hhcmFjdGVycykseT11Lm1hcChyLGZ1bmN0aW9uKHQpe3JldHVybiExfSk7XCJvbmx5T2Zmc2V0XCIhPT1uLnBvc2l0aW9uVHJhY2tpbmcmJih5PXUubWFwKHIsZnVuY3Rpb24odCl7cmV0dXJuIHUuaGFzKHQsXCJMSU5FX0JSRUFLU1wiKT90LkxJTkVfQlJFQUtTOiExPT09TCh0LG0pP2MuY2FuTWF0Y2hDaGFyQ29kZShtLHQuUEFUVEVSTik6dm9pZCAwfSkpO3ZhciBUPXUubWFwKHIsUyksdj11Lm1hcChvLEkpLGc9dS5yZWR1Y2UocixmdW5jdGlvbih0LGUpe3ZhciBuPWUuR1JPVVA7cmV0dXJuIHUuaXNTdHJpbmcobikmJm4hPT1zLkxleGVyLlNLSVBQRUQmJih0W25dPVtdKSx0fSx7fSksXz11Lm1hcChvLGZ1bmN0aW9uKHQsZSl7cmV0dXJue3BhdHRlcm46b1tlXSxsb25nZXJBbHQ6ZltlXSxjYW5MaW5lVGVybWluYXRvcjp5W2VdLGlzQ3VzdG9tOlRbZV0sc2hvcnQ6dltlXSxncm91cDpoW2VdLHB1c2g6ZFtlXSxwb3A6RVtlXSx0b2tlblR5cGVJZHg6cFtlXSx0b2tlblR5cGU6cltlXX19KTtmdW5jdGlvbiBSKHQsZSxuKXt2b2lkIDA9PT10W2VdJiYodFtlXT1bXSksdFtlXS5wdXNoKG4pfXZhciBBPSEwLGs9W107cmV0dXJuIG4uc2FmZU1vZGV8fChrPXUucmVkdWNlKHIsZnVuY3Rpb24odCxlLHIpe2lmKFwic3RyaW5nXCI9PXR5cGVvZiBlLlBBVFRFUk4pe3ZhciBpPWUuUEFUVEVSTi5jaGFyQ29kZUF0KDApO1IodCxpLF9bcl0pfWVsc2UgaWYodS5pc0FycmF5KGUuU1RBUlRfQ0hBUlNfSElOVCkpdS5mb3JFYWNoKGUuU1RBUlRfQ0hBUlNfSElOVCxmdW5jdGlvbihlKXt2YXIgbj1cInN0cmluZ1wiPT10eXBlb2YgZT9lLmNoYXJDb2RlQXQoMCk6ZTtSKHQsbixfW3JdKX0pO2Vsc2UgaWYodS5pc1JlZ0V4cChlLlBBVFRFUk4pKWlmKGUuUEFUVEVSTi51bmljb2RlKUE9ITEsbi5lbnN1cmVPcHRpbWl6YXRpb25zJiZ1LlBSSU5UX0VSUk9SKGMuZmFpbGVkT3B0aW1pemF0aW9uUHJlZml4TXNnK1wiXFx0VW5hYmxlIHRvIGFuYWx5emUgPCBcIitlLlBBVFRFUk4udG9TdHJpbmcoKStcIiA+IHBhdHRlcm4uXFxuXFx0VGhlIHJlZ2V4cCB1bmljb2RlIGZsYWcgaXMgbm90IGN1cnJlbnRseSBzdXBwb3J0ZWQgYnkgdGhlIHJlZ2V4cC10by1hc3QgbGlicmFyeS5cXG5cXHRUaGlzIHdpbGwgZGlzYWJsZSB0aGUgbGV4ZXIncyBmaXJzdCBjaGFyIG9wdGltaXphdGlvbnMuXFxuXFx0Rm9yIGRldGFpbHMgU2VlOiBodHRwczovL3NhcC5naXRodWIuaW8vY2hldnJvdGFpbi9kb2NzL2d1aWRlL3Jlc29sdmluZ19sZXhlcl9lcnJvcnMuaHRtbCNVTklDT0RFX09QVElNSVpFXCIpO2Vsc2V7dmFyIG89Yy5nZXRTdGFydENvZGVzKGUuUEFUVEVSTixuLmVuc3VyZU9wdGltaXphdGlvbnMpO3UuaXNFbXB0eShvKSYmKEE9ITEpLHUuZm9yRWFjaChvLGZ1bmN0aW9uKGUpe1IodCxlLF9bcl0pfSl9ZWxzZSBuLmVuc3VyZU9wdGltaXphdGlvbnMmJnUuUFJJTlRfRVJST1IoYy5mYWlsZWRPcHRpbWl6YXRpb25QcmVmaXhNc2crXCJcXHRUb2tlblR5cGU6IDxcIithLnRva2VuTmFtZShlKStcIj4gaXMgdXNpbmcgYSBjdXN0b20gdG9rZW4gcGF0dGVybiB3aXRob3V0IHByb3ZpZGluZyA8c3RhcnRfY2hhcnNfaGludD4gcGFyYW1ldGVyLlxcblxcdFRoaXMgd2lsbCBkaXNhYmxlIHRoZSBsZXhlcidzIGZpcnN0IGNoYXIgb3B0aW1pemF0aW9ucy5cXG5cXHRGb3IgZGV0YWlscyBTZWU6IGh0dHBzOi8vc2FwLmdpdGh1Yi5pby9jaGV2cm90YWluL2RvY3MvZ3VpZGUvcmVzb2x2aW5nX2xleGVyX2Vycm9ycy5odG1sI0NVU1RPTV9PUFRJTUlaRVwiKSxBPSExO3JldHVybiB0fSxbXSkpLEEmJmsubGVuZ3RoPDY1NTM2JiYoaz11LnBhY2tBcnJheShrKSkse2VtcHR5R3JvdXBzOmcscGF0dGVybklkeFRvQ29uZmlnOl8sY2hhckNvZGVUb1BhdHRlcm5JZHhUb0NvbmZpZzprLGhhc0N1c3RvbTppLGNhbkJlT3B0aW1pemVkOkF9fSxlLnZhbGlkYXRlUGF0dGVybnM9ZnVuY3Rpb24odCxlKXt2YXIgbj1bXSxyPWgodCk7bj1uLmNvbmNhdChyLmVycm9ycyk7dmFyIGk9ZihyLnZhbGlkKSxvPWkudmFsaWQ7cmV0dXJuIG49KG49KG49KG49KG49bi5jb25jYXQoaS5lcnJvcnMpKS5jb25jYXQoZnVuY3Rpb24odCl7dmFyIGU9W10sbj11LmZpbHRlcih0LGZ1bmN0aW9uKHQpe3JldHVybiB1LmlzUmVnRXhwKHRbbF0pfSk7cmV0dXJuIGU9KGU9KGU9KGU9KGU9ZS5jb25jYXQoRShuKSkpLmNvbmNhdChUKG4pKSkuY29uY2F0KHYobikpKS5jb25jYXQoZyhuKSkpLmNvbmNhdChtKG4pKX0obykpKS5jb25jYXQoXyhvKSkpLmNvbmNhdChSKG8sZSkpKS5jb25jYXQoQShvKSl9LGUuZmluZE1pc3NpbmdQYXR0ZXJucz1oLGUuZmluZEludmFsaWRQYXR0ZXJucz1mO3ZhciBkPS9bXlxcXFxdW1xcJF0vO2Z1bmN0aW9uIEUodCl7dmFyIGU9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3ZhciBlPW51bGwhPT10JiZ0LmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpcztyZXR1cm4gZS5mb3VuZD0hMSxlfXJldHVybiBpKGUsdCksZS5wcm90b3R5cGUudmlzaXRFbmRBbmNob3I9ZnVuY3Rpb24odCl7dGhpcy5mb3VuZD0hMH0sZX0oby5CYXNlUmVnRXhwVmlzaXRvciksbj11LmZpbHRlcih0LGZ1bmN0aW9uKHQpe3ZhciBuPXRbbF07dHJ5e3ZhciByPXAucGF0dGVybihuLnRvU3RyaW5nKCkpLGk9bmV3IGU7cmV0dXJuIGkudmlzaXQociksaS5mb3VuZH1jYXRjaCh0KXtyZXR1cm4gZC50ZXN0KG4uc291cmNlKX19KTtyZXR1cm4gdS5tYXAobixmdW5jdGlvbih0KXtyZXR1cm57bWVzc2FnZTpcIlVuZXhwZWN0ZWQgUmVnRXhwIEFuY2hvciBFcnJvcjpcXG5cXHRUb2tlbiBUeXBlOiAtPlwiK2EudG9rZW5OYW1lKHQpK1wiPC0gc3RhdGljICdQQVRURVJOJyBjYW5ub3QgY29udGFpbiBlbmQgb2YgaW5wdXQgYW5jaG9yICckJ1xcblxcdFNlZSBzYXAuZ2l0aHViLmlvL2NoZXZyb3RhaW4vZG9jcy9ndWlkZS9yZXNvbHZpbmdfbGV4ZXJfZXJyb3JzLmh0bWwjQU5DSE9SU1xcdGZvciBkZXRhaWxzLlwiLHR5cGU6cy5MZXhlckRlZmluaXRpb25FcnJvclR5cGUuRU9JX0FOQ0hPUl9GT1VORCx0b2tlblR5cGVzOlt0XX19KX1mdW5jdGlvbiBtKHQpe3ZhciBlPXUuZmlsdGVyKHQsZnVuY3Rpb24odCl7cmV0dXJuIHRbbF0udGVzdChcIlwiKX0pO3JldHVybiB1Lm1hcChlLGZ1bmN0aW9uKHQpe3JldHVybnttZXNzYWdlOlwiVG9rZW4gVHlwZTogLT5cIithLnRva2VuTmFtZSh0KStcIjwtIHN0YXRpYyAnUEFUVEVSTicgbXVzdCBub3QgbWF0Y2ggYW4gZW1wdHkgc3RyaW5nXCIsdHlwZTpzLkxleGVyRGVmaW5pdGlvbkVycm9yVHlwZS5FTVBUWV9NQVRDSF9QQVRURVJOLHRva2VuVHlwZXM6W3RdfX0pfWUuZmluZEVuZE9mSW5wdXRBbmNob3I9RSxlLmZpbmRFbXB0eU1hdGNoUmVnRXhwcz1tO3ZhciB5PS9bXlxcXFxbXVtcXF5dfF5cXF4vO2Z1bmN0aW9uIFQodCl7dmFyIGU9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3ZhciBlPW51bGwhPT10JiZ0LmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpcztyZXR1cm4gZS5mb3VuZD0hMSxlfXJldHVybiBpKGUsdCksZS5wcm90b3R5cGUudmlzaXRTdGFydEFuY2hvcj1mdW5jdGlvbih0KXt0aGlzLmZvdW5kPSEwfSxlfShvLkJhc2VSZWdFeHBWaXNpdG9yKSxuPXUuZmlsdGVyKHQsZnVuY3Rpb24odCl7dmFyIG49dFtsXTt0cnl7dmFyIHI9cC5wYXR0ZXJuKG4udG9TdHJpbmcoKSksaT1uZXcgZTtyZXR1cm4gaS52aXNpdChyKSxpLmZvdW5kfWNhdGNoKHQpe3JldHVybiB5LnRlc3Qobi5zb3VyY2UpfX0pO3JldHVybiB1Lm1hcChuLGZ1bmN0aW9uKHQpe3JldHVybnttZXNzYWdlOlwiVW5leHBlY3RlZCBSZWdFeHAgQW5jaG9yIEVycm9yOlxcblxcdFRva2VuIFR5cGU6IC0+XCIrYS50b2tlbk5hbWUodCkrXCI8LSBzdGF0aWMgJ1BBVFRFUk4nIGNhbm5vdCBjb250YWluIHN0YXJ0IG9mIGlucHV0IGFuY2hvciAnXidcXG5cXHRTZWUgaHR0cHM6Ly9zYXAuZ2l0aHViLmlvL2NoZXZyb3RhaW4vZG9jcy9ndWlkZS9yZXNvbHZpbmdfbGV4ZXJfZXJyb3JzLmh0bWwjQU5DSE9SU1xcdGZvciBkZXRhaWxzLlwiLHR5cGU6cy5MZXhlckRlZmluaXRpb25FcnJvclR5cGUuU09JX0FOQ0hPUl9GT1VORCx0b2tlblR5cGVzOlt0XX19KX1mdW5jdGlvbiB2KHQpe3ZhciBlPXUuZmlsdGVyKHQsZnVuY3Rpb24odCl7dmFyIGU9dFtsXTtyZXR1cm4gZSBpbnN0YW5jZW9mIFJlZ0V4cCYmKGUubXVsdGlsaW5lfHxlLmdsb2JhbCl9KTtyZXR1cm4gdS5tYXAoZSxmdW5jdGlvbih0KXtyZXR1cm57bWVzc2FnZTpcIlRva2VuIFR5cGU6IC0+XCIrYS50b2tlbk5hbWUodCkrXCI8LSBzdGF0aWMgJ1BBVFRFUk4nIG1heSBOT1QgY29udGFpbiBnbG9iYWwoJ2cnKSBvciBtdWx0aWxpbmUoJ20nKVwiLHR5cGU6cy5MZXhlckRlZmluaXRpb25FcnJvclR5cGUuVU5TVVBQT1JURURfRkxBR1NfRk9VTkQsdG9rZW5UeXBlczpbdF19fSl9ZnVuY3Rpb24gZyh0KXt2YXIgZT1bXSxuPXUubWFwKHQsZnVuY3Rpb24obil7cmV0dXJuIHUucmVkdWNlKHQsZnVuY3Rpb24odCxyKXtyZXR1cm4gbi5QQVRURVJOLnNvdXJjZSE9PXIuUEFUVEVSTi5zb3VyY2V8fHUuY29udGFpbnMoZSxyKXx8ci5QQVRURVJOPT09cy5MZXhlci5OQT90OihlLnB1c2gociksdC5wdXNoKHIpLHQpfSxbXSl9KTtuPXUuY29tcGFjdChuKTt2YXIgcj11LmZpbHRlcihuLGZ1bmN0aW9uKHQpe3JldHVybiB0Lmxlbmd0aD4xfSk7cmV0dXJuIHUubWFwKHIsZnVuY3Rpb24odCl7dmFyIGU9dS5tYXAodCxmdW5jdGlvbih0KXtyZXR1cm4gYS50b2tlbk5hbWUodCl9KTtyZXR1cm57bWVzc2FnZTpcIlRoZSBzYW1lIFJlZ0V4cCBwYXR0ZXJuIC0+XCIrdS5maXJzdCh0KS5QQVRURVJOK1wiPC1oYXMgYmVlbiB1c2VkIGluIGFsbCBvZiB0aGUgZm9sbG93aW5nIFRva2VuIFR5cGVzOiBcIitlLmpvaW4oXCIsIFwiKStcIiA8LVwiLHR5cGU6cy5MZXhlckRlZmluaXRpb25FcnJvclR5cGUuRFVQTElDQVRFX1BBVFRFUk5TX0ZPVU5ELHRva2VuVHlwZXM6dH19KX1mdW5jdGlvbiBfKHQpe3ZhciBlPXUuZmlsdGVyKHQsZnVuY3Rpb24odCl7aWYoIXUuaGFzKHQsXCJHUk9VUFwiKSlyZXR1cm4hMTt2YXIgZT10LkdST1VQO3JldHVybiBlIT09cy5MZXhlci5TS0lQUEVEJiZlIT09cy5MZXhlci5OQSYmIXUuaXNTdHJpbmcoZSl9KTtyZXR1cm4gdS5tYXAoZSxmdW5jdGlvbih0KXtyZXR1cm57bWVzc2FnZTpcIlRva2VuIFR5cGU6IC0+XCIrYS50b2tlbk5hbWUodCkrXCI8LSBzdGF0aWMgJ0dST1VQJyBjYW4gb25seSBiZSBMZXhlci5TS0lQUEVEL0xleGVyLk5BL0EgU3RyaW5nXCIsdHlwZTpzLkxleGVyRGVmaW5pdGlvbkVycm9yVHlwZS5JTlZBTElEX0dST1VQX1RZUEVfRk9VTkQsdG9rZW5UeXBlczpbdF19fSl9ZnVuY3Rpb24gUih0LGUpe3ZhciBuPXUuZmlsdGVyKHQsZnVuY3Rpb24odCl7cmV0dXJuIHZvaWQgMCE9PXQuUFVTSF9NT0RFJiYhdS5jb250YWlucyhlLHQuUFVTSF9NT0RFKX0pO3JldHVybiB1Lm1hcChuLGZ1bmN0aW9uKHQpe3JldHVybnttZXNzYWdlOlwiVG9rZW4gVHlwZTogLT5cIithLnRva2VuTmFtZSh0KStcIjwtIHN0YXRpYyAnUFVTSF9NT0RFJyB2YWx1ZSBjYW5ub3QgcmVmZXIgdG8gYSBMZXhlciBNb2RlIC0+XCIrdC5QVVNIX01PREUrXCI8LXdoaWNoIGRvZXMgbm90IGV4aXN0XCIsdHlwZTpzLkxleGVyRGVmaW5pdGlvbkVycm9yVHlwZS5QVVNIX01PREVfRE9FU19OT1RfRVhJU1QsdG9rZW5UeXBlczpbdF19fSl9ZnVuY3Rpb24gQSh0KXt2YXIgZT1bXSxuPXUucmVkdWNlKHQsZnVuY3Rpb24odCxlLG4pe3ZhciByLGk9ZS5QQVRURVJOO3JldHVybiBpPT09cy5MZXhlci5OQT90Oih1LmlzU3RyaW5nKGkpP3QucHVzaCh7c3RyOmksaWR4Om4sdG9rZW5UeXBlOmV9KTp1LmlzUmVnRXhwKGkpJiYocj1pLHZvaWQgMD09PXUuZmluZChbXCIuXCIsXCJcXFxcXCIsXCJbXCIsXCJdXCIsXCJ8XCIsXCJeXCIsXCIkXCIsXCIoXCIsXCIpXCIsXCI/XCIsXCIqXCIsXCIrXCIsXCJ7XCJdLGZ1bmN0aW9uKHQpe3JldHVybi0xIT09ci5zb3VyY2UuaW5kZXhPZih0KX0pKSYmdC5wdXNoKHtzdHI6aS5zb3VyY2UsaWR4Om4sdG9rZW5UeXBlOmV9KSx0KX0sW10pO3JldHVybiB1LmZvckVhY2godCxmdW5jdGlvbih0LHIpe3UuZm9yRWFjaChuLGZ1bmN0aW9uKG4pe3ZhciBpPW4uc3RyLG89bi5pZHgsYz1uLnRva2VuVHlwZTtpZihyPG8mJmZ1bmN0aW9uKHQsZSl7aWYodS5pc1JlZ0V4cChlKSl7dmFyIG49ZS5leGVjKHQpO3JldHVybiBudWxsIT09biYmMD09PW4uaW5kZXh9aWYodS5pc0Z1bmN0aW9uKGUpKXJldHVybiBlKHQsMCxbXSx7fSk7aWYodS5oYXMoZSxcImV4ZWNcIikpcmV0dXJuIGUuZXhlYyh0LDAsW10se30pO2lmKFwic3RyaW5nXCI9PXR5cGVvZiBlKXJldHVybiBlPT09dDt0aHJvdyBFcnJvcihcIm5vbiBleGhhdXN0aXZlIG1hdGNoXCIpfShpLHQuUEFUVEVSTikpe3ZhciBwPVwiVG9rZW46IC0+XCIrYS50b2tlbk5hbWUoYykrXCI8LSBjYW4gbmV2ZXIgYmUgbWF0Y2hlZC5cXG5CZWNhdXNlIGl0IGFwcGVhcnMgQUZURVIgdGhlIFRva2VuIFR5cGUgLT5cIithLnRva2VuTmFtZSh0KStcIjwtaW4gdGhlIGxleGVyJ3MgZGVmaW5pdGlvbi5cXG5TZWUgaHR0cHM6Ly9zYXAuZ2l0aHViLmlvL2NoZXZyb3RhaW4vZG9jcy9ndWlkZS9yZXNvbHZpbmdfbGV4ZXJfZXJyb3JzLmh0bWwjVU5SRUFDSEFCTEVcIjtlLnB1c2goe21lc3NhZ2U6cCx0eXBlOnMuTGV4ZXJEZWZpbml0aW9uRXJyb3JUeXBlLlVOUkVBQ0hBQkxFX1BBVFRFUk4sdG9rZW5UeXBlczpbdCxjXX0pfX0pfSksZX1mdW5jdGlvbiBOKHQpe3ZhciBlPXQuaWdub3JlQ2FzZT9cImlcIjpcIlwiO3JldHVybiBuZXcgUmVnRXhwKFwiXig/OlwiK3Quc291cmNlK1wiKVwiLGUpfWZ1bmN0aW9uIE8odCl7dmFyIGU9dC5pZ25vcmVDYXNlP1wiaXlcIjpcInlcIjtyZXR1cm4gbmV3IFJlZ0V4cChcIlwiK3Quc291cmNlLGUpfWZ1bmN0aW9uIFModCl7dmFyIGU9dC5QQVRURVJOO2lmKHUuaXNSZWdFeHAoZSkpcmV0dXJuITE7aWYodS5pc0Z1bmN0aW9uKGUpKXJldHVybiEwO2lmKHUuaGFzKGUsXCJleGVjXCIpKXJldHVybiEwO2lmKHUuaXNTdHJpbmcoZSkpcmV0dXJuITE7dGhyb3cgRXJyb3IoXCJub24gZXhoYXVzdGl2ZSBtYXRjaFwiKX1mdW5jdGlvbiBJKHQpe3JldHVybiEoIXUuaXNTdHJpbmcodCl8fDEhPT10Lmxlbmd0aCkmJnQuY2hhckNvZGVBdCgwKX1mdW5jdGlvbiBMKHQsZSl7aWYodS5oYXModCxcIkxJTkVfQlJFQUtTXCIpKXJldHVybiExO2lmKHUuaXNSZWdFeHAodC5QQVRURVJOKSl7dHJ5e2MuY2FuTWF0Y2hDaGFyQ29kZShlLHQuUEFUVEVSTil9Y2F0Y2godCl7cmV0dXJue2lzc3VlOnMuTGV4ZXJEZWZpbml0aW9uRXJyb3JUeXBlLklERU5USUZZX1RFUk1JTkFUT1IsZXJyTXNnOnQubWVzc2FnZX19cmV0dXJuITF9aWYodS5pc1N0cmluZyh0LlBBVFRFUk4pKXJldHVybiExO2lmKFModCkpcmV0dXJue2lzc3VlOnMuTGV4ZXJEZWZpbml0aW9uRXJyb3JUeXBlLkNVU1RPTV9MSU5FX0JSRUFLfTt0aHJvdyBFcnJvcihcIm5vbiBleGhhdXN0aXZlIG1hdGNoXCIpfWZ1bmN0aW9uIGsodCxlKXtpZihlLmlzc3VlPT09cy5MZXhlckRlZmluaXRpb25FcnJvclR5cGUuSURFTlRJRllfVEVSTUlOQVRPUilyZXR1cm5cIldhcm5pbmc6IHVuYWJsZSB0byBpZGVudGlmeSBsaW5lIHRlcm1pbmF0b3IgdXNhZ2UgaW4gcGF0dGVybi5cXG5cXHRUaGUgcHJvYmxlbSBpcyBpbiB0aGUgPFwiK3QubmFtZStcIj4gVG9rZW4gVHlwZVxcblxcdCBSb290IGNhdXNlOiBcIitlLmVyck1zZytcIi5cXG5cXHRGb3IgZGV0YWlscyBTZWU6IGh0dHBzOi8vc2FwLmdpdGh1Yi5pby9jaGV2cm90YWluL2RvY3MvZ3VpZGUvcmVzb2x2aW5nX2xleGVyX2Vycm9ycy5odG1sI0lERU5USUZZX1RFUk1JTkFUT1JcIjtpZihlLmlzc3VlPT09cy5MZXhlckRlZmluaXRpb25FcnJvclR5cGUuQ1VTVE9NX0xJTkVfQlJFQUspcmV0dXJuXCJXYXJuaW5nOiBBIEN1c3RvbSBUb2tlbiBQYXR0ZXJuIHNob3VsZCBzcGVjaWZ5IHRoZSA8bGluZV9icmVha3M+IG9wdGlvbi5cXG5cXHRUaGUgcHJvYmxlbSBpcyBpbiB0aGUgPFwiK3QubmFtZStcIj4gVG9rZW4gVHlwZVxcblxcdEZvciBkZXRhaWxzIFNlZTogaHR0cHM6Ly9zYXAuZ2l0aHViLmlvL2NoZXZyb3RhaW4vZG9jcy9ndWlkZS9yZXNvbHZpbmdfbGV4ZXJfZXJyb3JzLmh0bWwjQ1VTVE9NX0xJTkVfQlJFQUtcIjt0aHJvdyBFcnJvcihcIm5vbiBleGhhdXN0aXZlIG1hdGNoXCIpfWZ1bmN0aW9uIFAodCl7cmV0dXJuIHUubWFwKHQsZnVuY3Rpb24odCl7cmV0dXJuIHUuaXNTdHJpbmcodCkmJnQubGVuZ3RoPjA/dC5jaGFyQ29kZUF0KDApOnR9KX1lLmZpbmRTdGFydE9mSW5wdXRBbmNob3I9VCxlLmZpbmRVbnN1cHBvcnRlZEZsYWdzPXYsZS5maW5kRHVwbGljYXRlUGF0dGVybnM9ZyxlLmZpbmRJbnZhbGlkR3JvdXBUeXBlPV8sZS5maW5kTW9kZXNUaGF0RG9Ob3RFeGlzdD1SLGUuZmluZFVucmVhY2hhYmxlUGF0dGVybnM9QSxlLmFkZFN0YXJ0T2ZJbnB1dD1OLGUuYWRkU3RpY2t5RmxhZz1PLGUucGVyZm9ybVJ1bnRpbWVDaGVja3M9ZnVuY3Rpb24odCxuLHIpe3ZhciBpPVtdO3JldHVybiB1Lmhhcyh0LGUuREVGQVVMVF9NT0RFKXx8aS5wdXNoKHttZXNzYWdlOlwiQSBNdWx0aU1vZGUgTGV4ZXIgY2Fubm90IGJlIGluaXRpYWxpemVkIHdpdGhvdXQgYSA8XCIrZS5ERUZBVUxUX01PREUrXCI+IHByb3BlcnR5IGluIGl0cyBkZWZpbml0aW9uXFxuXCIsdHlwZTpzLkxleGVyRGVmaW5pdGlvbkVycm9yVHlwZS5NVUxUSV9NT0RFX0xFWEVSX1dJVEhPVVRfREVGQVVMVF9NT0RFfSksdS5oYXModCxlLk1PREVTKXx8aS5wdXNoKHttZXNzYWdlOlwiQSBNdWx0aU1vZGUgTGV4ZXIgY2Fubm90IGJlIGluaXRpYWxpemVkIHdpdGhvdXQgYSA8XCIrZS5NT0RFUytcIj4gcHJvcGVydHkgaW4gaXRzIGRlZmluaXRpb25cXG5cIix0eXBlOnMuTGV4ZXJEZWZpbml0aW9uRXJyb3JUeXBlLk1VTFRJX01PREVfTEVYRVJfV0lUSE9VVF9NT0RFU19QUk9QRVJUWX0pLHUuaGFzKHQsZS5NT0RFUykmJnUuaGFzKHQsZS5ERUZBVUxUX01PREUpJiYhdS5oYXModC5tb2Rlcyx0LmRlZmF1bHRNb2RlKSYmaS5wdXNoKHttZXNzYWdlOlwiQSBNdWx0aU1vZGUgTGV4ZXIgY2Fubm90IGJlIGluaXRpYWxpemVkIHdpdGggYSBcIitlLkRFRkFVTFRfTU9ERStcIjogPFwiK3QuZGVmYXVsdE1vZGUrXCI+d2hpY2ggZG9lcyBub3QgZXhpc3RcXG5cIix0eXBlOnMuTGV4ZXJEZWZpbml0aW9uRXJyb3JUeXBlLk1VTFRJX01PREVfTEVYRVJfREVGQVVMVF9NT0RFX1ZBTFVFX0RPRVNfTk9UX0VYSVNUfSksdS5oYXModCxlLk1PREVTKSYmdS5mb3JFYWNoKHQubW9kZXMsZnVuY3Rpb24odCxlKXt1LmZvckVhY2godCxmdW5jdGlvbih0LG4pe3UuaXNVbmRlZmluZWQodCkmJmkucHVzaCh7bWVzc2FnZTpcIkEgTGV4ZXIgY2Fubm90IGJlIGluaXRpYWxpemVkIHVzaW5nIGFuIHVuZGVmaW5lZCBUb2tlbiBUeXBlLiBNb2RlOjxcIitlK1wiPiBhdCBpbmRleDogPFwiK24rXCI+XFxuXCIsdHlwZTpzLkxleGVyRGVmaW5pdGlvbkVycm9yVHlwZS5MRVhFUl9ERUZJTklUSU9OX0NBTk5PVF9DT05UQUlOX1VOREVGSU5FRH0pfSl9KSxpfSxlLnBlcmZvcm1XYXJuaW5nUnVudGltZUNoZWNrcz1mdW5jdGlvbih0LGUsbil7dmFyIHI9W10saT0hMSxvPXUuY29tcGFjdCh1LmZsYXR0ZW4odS5tYXBWYWx1ZXModC5tb2RlcyxmdW5jdGlvbih0KXtyZXR1cm4gdH0pKSksYT11LnJlamVjdChvLGZ1bmN0aW9uKHQpe3JldHVybiB0W2xdPT09cy5MZXhlci5OQX0pLHA9UChuKTtyZXR1cm4gZSYmdS5mb3JFYWNoKGEsZnVuY3Rpb24odCl7dmFyIGU9TCh0LHApO2lmKCExIT09ZSl7dmFyIG49e21lc3NhZ2U6ayh0LGUpLHR5cGU6ZS5pc3N1ZSx0b2tlblR5cGU6dH07ci5wdXNoKG4pfWVsc2UgdS5oYXModCxcIkxJTkVfQlJFQUtTXCIpPyEwPT09dC5MSU5FX0JSRUFLUyYmKGk9ITApOmMuY2FuTWF0Y2hDaGFyQ29kZShwLHQuUEFUVEVSTikmJihpPSEwKX0pLGUmJiFpJiZyLnB1c2goe21lc3NhZ2U6XCJXYXJuaW5nOiBObyBMSU5FX0JSRUFLUyBGb3VuZC5cXG5cXHRUaGlzIExleGVyIGhhcyBiZWVuIGRlZmluZWQgdG8gdHJhY2sgbGluZSBhbmQgY29sdW1uIGluZm9ybWF0aW9uLFxcblxcdEJ1dCBub25lIG9mIHRoZSBUb2tlbiBUeXBlcyBjYW4gYmUgaWRlbnRpZmllZCBhcyBtYXRjaGluZyBhIGxpbmUgdGVybWluYXRvci5cXG5cXHRTZWUgaHR0cHM6Ly9zYXAuZ2l0aHViLmlvL2NoZXZyb3RhaW4vZG9jcy9ndWlkZS9yZXNvbHZpbmdfbGV4ZXJfZXJyb3JzLmh0bWwjTElORV9CUkVBS1MgXFxuXFx0Zm9yIGRldGFpbHMuXCIsdHlwZTpzLkxleGVyRGVmaW5pdGlvbkVycm9yVHlwZS5OT19MSU5FX0JSRUFLU19GTEFHU30pLHJ9LGUuY2xvbmVFbXB0eUdyb3Vwcz1mdW5jdGlvbih0KXt2YXIgZT17fSxuPXUua2V5cyh0KTtyZXR1cm4gdS5mb3JFYWNoKG4sZnVuY3Rpb24obil7dmFyIHI9dFtuXTtpZighdS5pc0FycmF5KHIpKXRocm93IEVycm9yKFwibm9uIGV4aGF1c3RpdmUgbWF0Y2hcIik7ZVtuXT1bXX0pLGV9LGUuaXNDdXN0b21QYXR0ZXJuPVMsZS5pc1Nob3J0UGF0dGVybj1JLGUuTGluZVRlcm1pbmF0b3JPcHRpbWl6ZWRUZXN0ZXI9e3Rlc3Q6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXQubGVuZ3RoLG49dGhpcy5sYXN0SW5kZXg7bjxlO24rKyl7dmFyIHI9dC5jaGFyQ29kZUF0KG4pO2lmKDEwPT09cilyZXR1cm4gdGhpcy5sYXN0SW5kZXg9bisxLCEwO2lmKDEzPT09cilyZXR1cm4gMTA9PT10LmNoYXJDb2RlQXQobisxKT90aGlzLmxhc3RJbmRleD1uKzI6dGhpcy5sYXN0SW5kZXg9bisxLCEwfXJldHVybiExfSxsYXN0SW5kZXg6MH0sZS5idWlsZExpbmVCcmVha0lzc3VlTWVzc2FnZT1rfSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7dmFyIHIsaT10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8KHI9ZnVuY3Rpb24odCxlKXtyZXR1cm4ocj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24odCxlKXt0Ll9fcHJvdG9fXz1lfXx8ZnVuY3Rpb24odCxlKXtmb3IodmFyIG4gaW4gZSllLmhhc093blByb3BlcnR5KG4pJiYodFtuXT1lW25dKX0pKHQsZSl9LGZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gbigpe3RoaXMuY29uc3RydWN0b3I9dH1yKHQsZSksdC5wcm90b3R5cGU9bnVsbD09PWU/T2JqZWN0LmNyZWF0ZShlKToobi5wcm90b3R5cGU9ZS5wcm90b3R5cGUsbmV3IG4pfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG89bigxOSksYT1uKDApLHM9bmV3IG8uUmVnRXhwUGFyc2VyLHU9XCJDb21wbGVtZW50IFNldHMgYXJlIG5vdCBzdXBwb3J0ZWQgZm9yIGZpcnN0IGNoYXIgb3B0aW1pemF0aW9uXCI7ZnVuY3Rpb24gYyh0KXtzd2l0Y2godC50eXBlKXtjYXNlXCJEaXNqdW5jdGlvblwiOnJldHVybiBhLmZsYXR0ZW4oYS5tYXAodC52YWx1ZSxjKSk7Y2FzZVwiQWx0ZXJuYXRpdmVcIjpmb3IodmFyIGU9W10sbj10LnZhbHVlLHI9MDtyPG4ubGVuZ3RoO3IrKyl7dmFyIGk9bltyXTtpZighYS5jb250YWlucyhbXCJHcm91cEJhY2tSZWZlcmVuY2VcIixcIkxvb2thaGVhZFwiLFwiTmVnYXRpdmVMb29rYWhlYWRcIixcIlN0YXJ0QW5jaG9yXCIsXCJFbmRBbmNob3JcIixcIldvcmRCb3VuZGFyeVwiLFwiTm9uV29yZEJvdW5kYXJ5XCJdLGkudHlwZSkpe3ZhciBvPWk7c3dpdGNoKG8udHlwZSl7Y2FzZVwiQ2hhcmFjdGVyXCI6ZS5wdXNoKG8udmFsdWUpO2JyZWFrO2Nhc2VcIlNldFwiOmlmKCEwPT09by5jb21wbGVtZW50KXRocm93IEVycm9yKHUpO2EuZm9yRWFjaChvLnZhbHVlLGZ1bmN0aW9uKHQpe2lmKFwibnVtYmVyXCI9PXR5cGVvZiB0KWUucHVzaCh0KTtlbHNlIGZvcih2YXIgbj10LHI9bi5mcm9tO3I8PW4udG87cisrKWUucHVzaChyKX0pO2JyZWFrO2Nhc2VcIkdyb3VwXCI6dmFyIHM9YyhvLnZhbHVlKTthLmZvckVhY2gocyxmdW5jdGlvbih0KXtyZXR1cm4gZS5wdXNoKHQpfSk7YnJlYWs7ZGVmYXVsdDp0aHJvdyBFcnJvcihcIk5vbiBFeGhhdXN0aXZlIE1hdGNoXCIpfXZhciBwPXZvaWQgMCE9PW8ucXVhbnRpZmllciYmMD09PW8ucXVhbnRpZmllci5hdExlYXN0O2lmKFwiR3JvdXBcIj09PW8udHlwZSYmITE9PT1oKG8pfHxcIkdyb3VwXCIhPT1vLnR5cGUmJiExPT09cClicmVha319cmV0dXJuIGU7ZGVmYXVsdDp0aHJvdyBFcnJvcihcIm5vbiBleGhhdXN0aXZlIG1hdGNoIVwiKX19ZnVuY3Rpb24gcCh0KXt2YXIgZT1bXTtyZXR1cm4gYS5mb3JFYWNoKHQsZnVuY3Rpb24odCl7ZS5wdXNoKHQpO3ZhciBuPVN0cmluZy5mcm9tQ2hhckNvZGUodCk7bi50b1VwcGVyQ2FzZSgpIT09bj9lLnB1c2gobi50b1VwcGVyQ2FzZSgpLmNoYXJDb2RlQXQoMCkpOm4udG9Mb3dlckNhc2UoKSE9PW4mJmUucHVzaChuLnRvTG93ZXJDYXNlKCkuY2hhckNvZGVBdCgwKSl9KSxlfWZ1bmN0aW9uIGwodCxlKXtyZXR1cm4gYS5maW5kKHQudmFsdWUsZnVuY3Rpb24odCl7aWYoXCJudW1iZXJcIj09dHlwZW9mIHQpcmV0dXJuIGEuY29udGFpbnMoZSx0KTt2YXIgbj10O3JldHVybiB2b2lkIDAhPT1hLmZpbmQoZSxmdW5jdGlvbih0KXtyZXR1cm4gbi5mcm9tPD10JiZ0PD1uLnRvfSl9KX1mdW5jdGlvbiBoKHQpe3JldHVybiEoIXQucXVhbnRpZmllcnx8MCE9PXQucXVhbnRpZmllci5hdExlYXN0KXx8ISF0LnZhbHVlJiYoYS5pc0FycmF5KHQudmFsdWUpP2EuZXZlcnkodC52YWx1ZSxoKTpoKHQudmFsdWUpKX1lLmZhaWxlZE9wdGltaXphdGlvblByZWZpeE1zZz0nVW5hYmxlIHRvIHVzZSBcImZpcnN0IGNoYXJcIiBsZXhlciBvcHRpbWl6YXRpb25zOlxcbicsZS5nZXRTdGFydENvZGVzPWZ1bmN0aW9uKHQsbil7dm9pZCAwPT09biYmKG49ITEpO3RyeXt2YXIgcj1zLnBhdHRlcm4odC50b1N0cmluZygpKSxpPWMoci52YWx1ZSk7cmV0dXJuIHIuZmxhZ3MuaWdub3JlQ2FzZSYmKGk9cChpKSksaX1jYXRjaChyKXtpZihyLm1lc3NhZ2U9PT11KW4mJmEuUFJJTlRfV0FSTklORyhlLmZhaWxlZE9wdGltaXphdGlvblByZWZpeE1zZytcIlxcdFVuYWJsZSB0byBvcHRpbWl6ZTogPCBcIit0LnRvU3RyaW5nKCkrXCIgPlxcblxcdENvbXBsZW1lbnQgU2V0cyBjYW5ub3QgYmUgYXV0b21hdGljYWxseSBvcHRpbWl6ZWQuXFxuXFx0VGhpcyB3aWxsIGRpc2FibGUgdGhlIGxleGVyJ3MgZmlyc3QgY2hhciBvcHRpbWl6YXRpb25zLlxcblxcdFNlZTogaHR0cHM6Ly9zYXAuZ2l0aHViLmlvL2NoZXZyb3RhaW4vZG9jcy9ndWlkZS9yZXNvbHZpbmdfbGV4ZXJfZXJyb3JzLmh0bWwjQ09NUExFTUVOVCBmb3IgZGV0YWlscy5cIik7ZWxzZXt2YXIgbD1cIlwiO24mJihsPVwiXFxuXFx0VGhpcyB3aWxsIGRpc2FibGUgdGhlIGxleGVyJ3MgZmlyc3QgY2hhciBvcHRpbWl6YXRpb25zLlxcblxcdFNlZTogaHR0cHM6Ly9zYXAuZ2l0aHViLmlvL2NoZXZyb3RhaW4vZG9jcy9ndWlkZS9yZXNvbHZpbmdfbGV4ZXJfZXJyb3JzLmh0bWwjUkVHRVhQX1BBUlNJTkcgZm9yIGRldGFpbHMuXCIpLGEuUFJJTlRfRVJST1IoZS5mYWlsZWRPcHRpbWl6YXRpb25QcmVmaXhNc2crXCJcXG5cXHRGYWlsZWQgcGFyc2luZzogPCBcIit0LnRvU3RyaW5nKCkrXCIgPlxcblxcdFVzaW5nIHRoZSByZWdleHAtdG8tYXN0IGxpYnJhcnkgdmVyc2lvbjogXCIrby5WRVJTSU9OK1wiXFxuXFx0UGxlYXNlIG9wZW4gYW4gaXNzdWUgYXQ6IGh0dHBzOi8vZ2l0aHViLmNvbS9iZDgyL3JlZ2V4cC10by1hc3QvaXNzdWVzXCIrbCl9fXJldHVybltdfSxlLmZpcnN0Q2hhcj1jLGUuYXBwbHlJZ25vcmVDYXNlPXA7dmFyIGY9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlKXt2YXIgbj10LmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIG4udGFyZ2V0Q2hhckNvZGVzPWUsbi5mb3VuZD0hMSxufXJldHVybiBpKGUsdCksZS5wcm90b3R5cGUudmlzaXRDaGlsZHJlbj1mdW5jdGlvbihlKXtzd2l0Y2goZS50eXBlKXtjYXNlXCJMb29rYWhlYWRcIjpyZXR1cm4gdm9pZCB0aGlzLnZpc2l0TG9va2FoZWFkKGUpO2Nhc2VcIk5lZ2F0aXZlTG9va2FoZWFkXCI6cmV0dXJuIHZvaWQgdGhpcy52aXNpdE5lZ2F0aXZlTG9va2FoZWFkKGUpfXQucHJvdG90eXBlLnZpc2l0Q2hpbGRyZW4uY2FsbCh0aGlzLGUpfSxlLnByb3RvdHlwZS52aXNpdENoYXJhY3Rlcj1mdW5jdGlvbih0KXthLmNvbnRhaW5zKHRoaXMudGFyZ2V0Q2hhckNvZGVzLHQudmFsdWUpJiYodGhpcy5mb3VuZD0hMCl9LGUucHJvdG90eXBlLnZpc2l0U2V0PWZ1bmN0aW9uKHQpe3QuY29tcGxlbWVudD92b2lkIDA9PT1sKHQsdGhpcy50YXJnZXRDaGFyQ29kZXMpJiYodGhpcy5mb3VuZD0hMCk6dm9pZCAwIT09bCh0LHRoaXMudGFyZ2V0Q2hhckNvZGVzKSYmKHRoaXMuZm91bmQ9ITApfSxlfShvLkJhc2VSZWdFeHBWaXNpdG9yKTtlLmNhbk1hdGNoQ2hhckNvZGU9ZnVuY3Rpb24odCxlKXtpZihlIGluc3RhbmNlb2YgUmVnRXhwKXt2YXIgbj1zLnBhdHRlcm4oZS50b1N0cmluZygpKSxyPW5ldyBmKHQpO3JldHVybiByLnZpc2l0KG4pLHIuZm91bmR9cmV0dXJuIHZvaWQgMCE9PWEuZmluZChlLGZ1bmN0aW9uKGUpe3JldHVybiBhLmNvbnRhaW5zKHQsZS5jaGFyQ29kZUF0KDApKX0pfX0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciByPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2lmKHRoaXMuc3RhcnQ9dCx0aGlzLmVuZD1lLCFpKHQsZSkpdGhyb3cgbmV3IEVycm9yKFwiSU5WQUxJRCBSQU5HRVwiKX1yZXR1cm4gdC5wcm90b3R5cGUuY29udGFpbnM9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuc3RhcnQ8PXQmJnRoaXMuZW5kPj10fSx0LnByb3RvdHlwZS5jb250YWluc1JhbmdlPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnN0YXJ0PD10LnN0YXJ0JiZ0aGlzLmVuZD49dC5lbmR9LHQucHJvdG90eXBlLmlzQ29udGFpbmVkSW5SYW5nZT1mdW5jdGlvbih0KXtyZXR1cm4gdC5jb250YWluc1JhbmdlKHRoaXMpfSx0LnByb3RvdHlwZS5zdHJpY3RseUNvbnRhaW5zUmFuZ2U9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuc3RhcnQ8dC5zdGFydCYmdGhpcy5lbmQ+dC5lbmR9LHQucHJvdG90eXBlLmlzU3RyaWN0bHlDb250YWluZWRJblJhbmdlPWZ1bmN0aW9uKHQpe3JldHVybiB0LnN0cmljdGx5Q29udGFpbnNSYW5nZSh0aGlzKX0sdH0oKTtmdW5jdGlvbiBpKHQsZSl7cmV0dXJuISh0PDB8fGU8dCl9ZS5SYW5nZT1yLGUuaXNWYWxpZFJhbmdlPWl9LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjt2YXIgcixpPXRoaXMmJnRoaXMuX19leHRlbmRzfHwocj1mdW5jdGlvbih0LGUpe3JldHVybihyPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbih0LGUpe3QuX19wcm90b19fPWV9fHxmdW5jdGlvbih0LGUpe2Zvcih2YXIgbiBpbiBlKWUuaGFzT3duUHJvcGVydHkobikmJih0W25dPWVbbl0pfSkodCxlKX0sZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBuKCl7dGhpcy5jb25zdHJ1Y3Rvcj10fXIodCxlKSx0LnByb3RvdHlwZT1udWxsPT09ZT9PYmplY3QuY3JlYXRlKGUpOihuLnByb3RvdHlwZT1lLnByb3RvdHlwZSxuZXcgbil9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbz1uKDMpLGE9bigwKSxzPW4oNSk7ZS5yZXNvbHZlR3JhbW1hcj1mdW5jdGlvbih0LGUpe3ZhciBuPW5ldyB1KHQsZSk7cmV0dXJuIG4ucmVzb2x2ZVJlZnMoKSxuLmVycm9yc307dmFyIHU9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4pe3ZhciByPXQuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gci5uYW1lVG9Ub3BSdWxlPWUsci5lcnJNc2dQcm92aWRlcj1uLHIuZXJyb3JzPVtdLHJ9cmV0dXJuIGkoZSx0KSxlLnByb3RvdHlwZS5yZXNvbHZlUmVmcz1mdW5jdGlvbigpe3ZhciB0PXRoaXM7YS5mb3JFYWNoKHRoaXMubmFtZVRvVG9wUnVsZS52YWx1ZXMoKSxmdW5jdGlvbihlKXt0LmN1cnJUb3BMZXZlbD1lLGUuYWNjZXB0KHQpfSl9LGUucHJvdG90eXBlLnZpc2l0Tm9uVGVybWluYWw9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5uYW1lVG9Ub3BSdWxlLmdldCh0Lm5vblRlcm1pbmFsTmFtZSk7aWYoZSl0LnJlZmVyZW5jZWRSdWxlPWU7ZWxzZXt2YXIgbj10aGlzLmVyck1zZ1Byb3ZpZGVyLmJ1aWxkUnVsZU5vdEZvdW5kRXJyb3IodGhpcy5jdXJyVG9wTGV2ZWwsdCk7dGhpcy5lcnJvcnMucHVzaCh7bWVzc2FnZTpuLHR5cGU6by5QYXJzZXJEZWZpbml0aW9uRXJyb3JUeXBlLlVOUkVTT0xWRURfU1VCUlVMRV9SRUYscnVsZU5hbWU6dGhpcy5jdXJyVG9wTGV2ZWwubmFtZSx1bnJlc29sdmVkUmVmTmFtZTp0Lm5vblRlcm1pbmFsTmFtZX0pfX0sZX0ocy5HQXN0VmlzaXRvcik7ZS5HYXN0UmVmUmVzb2x2ZXJWaXNpdG9yPXV9LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgcj1uKDEyKSxpPW4oMCksbz1uKDMpLGE9big5KSxzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe31yZXR1cm4gdC5wcm90b3R5cGUuaW5pdExvb2tzQWhlYWQ9ZnVuY3Rpb24odCl7dGhpcy5keW5hbWljVG9rZW5zRW5hYmxlZD1pLmhhcyh0LFwiZHluYW1pY1Rva2Vuc0VuYWJsZWRcIik/dC5keW5hbWljVG9rZW5zRW5hYmxlZDpvLkRFRkFVTFRfUEFSU0VSX0NPTkZJRy5keW5hbWljVG9rZW5zRW5hYmxlZCx0aGlzLm1heExvb2thaGVhZD1pLmhhcyh0LFwibWF4TG9va2FoZWFkXCIpP3QubWF4TG9va2FoZWFkOm8uREVGQVVMVF9QQVJTRVJfQ09ORklHLm1heExvb2thaGVhZCx0aGlzLmxvb2tBaGVhZEZ1bmNzQ2FjaGU9aS5pc0VTMjAxNU1hcFN1cHBvcnRlZCgpP25ldyBNYXA6W10saS5pc0VTMjAxNU1hcFN1cHBvcnRlZCgpPyh0aGlzLmdldExhRnVuY0Zyb21DYWNoZT10aGlzLmdldExhRnVuY0Zyb21NYXAsdGhpcy5zZXRMYUZ1bmNDYWNoZT10aGlzLnNldExhRnVuY0NhY2hlVXNpbmdNYXApOih0aGlzLmdldExhRnVuY0Zyb21DYWNoZT10aGlzLmdldExhRnVuY0Zyb21PYmosdGhpcy5zZXRMYUZ1bmNDYWNoZT10aGlzLnNldExhRnVuY1VzaW5nT2JqKX0sdC5wcm90b3R5cGUubG9va0FoZWFkQnVpbGRlckZvck9wdGlvbmFsPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gci5idWlsZFNpbmdsZUFsdGVybmF0aXZlTG9va2FoZWFkRnVuY3Rpb24odCxlLG4pfSx0LnByb3RvdHlwZS5sb29rQWhlYWRCdWlsZGVyRm9yQWx0ZXJuYXRpdmVzPWZ1bmN0aW9uKHQsZSxuLGkpe3JldHVybiByLmJ1aWxkQWx0ZXJuYXRpdmVzTG9va0FoZWFkRnVuYyh0LGUsbixpKX0sdC5wcm90b3R5cGUuZ2V0S2V5Rm9yQXV0b21hdGljTG9va2FoZWFkPWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5nZXRMYXN0RXhwbGljaXRSdWxlU2hvcnROYW1lKCk7cmV0dXJuIGEuZ2V0S2V5Rm9yQXV0b21hdGljTG9va2FoZWFkKG4sdCxlKX0sdC5wcm90b3R5cGUuZ2V0TG9va2FoZWFkRnVuY0Zvck9yPWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5nZXRLZXlGb3JBdXRvbWF0aWNMb29rYWhlYWQoYS5PUl9JRFgsdCksbz10aGlzLmdldExhRnVuY0Zyb21DYWNoZShuKTtpZih2b2lkIDA9PT1vKXt2YXIgcz10aGlzLmdldEN1cnJSdWxlRnVsbE5hbWUoKSx1PXRoaXMuZ2V0R0FzdFByb2R1Y3Rpb25zKCkuZ2V0KHMpLGM9aS5zb21lKGUsZnVuY3Rpb24odCl7cmV0dXJuIGkuaXNGdW5jdGlvbih0LkdBVEUpfSk7cmV0dXJuIG89ci5idWlsZExvb2thaGVhZEZ1bmNGb3JPcih0LHUsdGhpcy5tYXhMb29rYWhlYWQsYyx0aGlzLmR5bmFtaWNUb2tlbnNFbmFibGVkLHRoaXMubG9va0FoZWFkQnVpbGRlckZvckFsdGVybmF0aXZlcyksdGhpcy5zZXRMYUZ1bmNDYWNoZShuLG8pLG99cmV0dXJuIG99LHQucHJvdG90eXBlLmdldExvb2thaGVhZEZ1bmNGb3JPcHRpb249ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5nZXRMb29rYWhlYWRGdW5jRm9yKHQsZSx0aGlzLm1heExvb2thaGVhZCxyLlBST0RfVFlQRS5PUFRJT04pfSx0LnByb3RvdHlwZS5nZXRMb29rYWhlYWRGdW5jRm9yTWFueT1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmdldExvb2thaGVhZEZ1bmNGb3IodCxlLHRoaXMubWF4TG9va2FoZWFkLHIuUFJPRF9UWVBFLlJFUEVUSVRJT04pfSx0LnByb3RvdHlwZS5nZXRMb29rYWhlYWRGdW5jRm9yTWFueVNlcD1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmdldExvb2thaGVhZEZ1bmNGb3IodCxlLHRoaXMubWF4TG9va2FoZWFkLHIuUFJPRF9UWVBFLlJFUEVUSVRJT05fV0lUSF9TRVBBUkFUT1IpfSx0LnByb3RvdHlwZS5nZXRMb29rYWhlYWRGdW5jRm9yQXRMZWFzdE9uZT1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmdldExvb2thaGVhZEZ1bmNGb3IodCxlLHRoaXMubWF4TG9va2FoZWFkLHIuUFJPRF9UWVBFLlJFUEVUSVRJT05fTUFOREFUT1JZKX0sdC5wcm90b3R5cGUuZ2V0TG9va2FoZWFkRnVuY0ZvckF0TGVhc3RPbmVTZXA9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5nZXRMb29rYWhlYWRGdW5jRm9yKHQsZSx0aGlzLm1heExvb2thaGVhZCxyLlBST0RfVFlQRS5SRVBFVElUSU9OX01BTkRBVE9SWV9XSVRIX1NFUEFSQVRPUil9LHQucHJvdG90eXBlLmdldExvb2thaGVhZEZ1bmNGb3I9ZnVuY3Rpb24odCxlLG4saSl7dmFyIG89dGhpcy5nZXRMYUZ1bmNGcm9tQ2FjaGUodCk7aWYodm9pZCAwPT09byl7dmFyIGE9dGhpcy5nZXRDdXJyUnVsZUZ1bGxOYW1lKCkscz10aGlzLmdldEdBc3RQcm9kdWN0aW9ucygpLmdldChhKTtyZXR1cm4gbz1yLmJ1aWxkTG9va2FoZWFkRnVuY0Zvck9wdGlvbmFsUHJvZChlLHMsbix0aGlzLmR5bmFtaWNUb2tlbnNFbmFibGVkLGksdGhpcy5sb29rQWhlYWRCdWlsZGVyRm9yT3B0aW9uYWwpLHRoaXMuc2V0TGFGdW5jQ2FjaGUodCxvKSxvfXJldHVybiBvfSx0LnByb3RvdHlwZS5nZXRMYUZ1bmNGcm9tQ2FjaGU9ZnVuY3Rpb24odCl7fSx0LnByb3RvdHlwZS5nZXRMYUZ1bmNGcm9tTWFwPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmxvb2tBaGVhZEZ1bmNzQ2FjaGUuZ2V0KHQpfSx0LnByb3RvdHlwZS5nZXRMYUZ1bmNGcm9tT2JqPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmxvb2tBaGVhZEZ1bmNzQ2FjaGVbdF19LHQucHJvdG90eXBlLnNldExhRnVuY0NhY2hlPWZ1bmN0aW9uKHQsZSl7fSx0LnByb3RvdHlwZS5zZXRMYUZ1bmNDYWNoZVVzaW5nTWFwPWZ1bmN0aW9uKHQsZSl7dGhpcy5sb29rQWhlYWRGdW5jc0NhY2hlLnNldCh0LGUpfSx0LnByb3RvdHlwZS5zZXRMYUZ1bmNVc2luZ09iaj1mdW5jdGlvbih0LGUpe3RoaXMubG9va0FoZWFkRnVuY3NDYWNoZVt0XT1lfSx0fSgpO2UuTG9va3NBaGVhZD1zfSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIHI9bigxNiksaT1uKDApLG89bigzMyksYT1uKDkpLHM9bigzKSx1PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe31yZXR1cm4gdC5wcm90b3R5cGUuaW5pdFRyZWVCdWlsZGVyPWZ1bmN0aW9uKHQpe3RoaXMuTEFTVF9FWFBMSUNJVF9SVUxFX1NUQUNLPVtdLHRoaXMuQ1NUX1NUQUNLPVtdLHRoaXMub3V0cHV0Q3N0PWkuaGFzKHQsXCJvdXRwdXRDc3RcIik/dC5vdXRwdXRDc3Q6cy5ERUZBVUxUX1BBUlNFUl9DT05GSUcub3V0cHV0Q3N0LHRoaXMub3V0cHV0Q3N0fHwodGhpcy5jc3RJbnZvY2F0aW9uU3RhdGVVcGRhdGU9aS5OT09QLHRoaXMuY3N0RmluYWxseVN0YXRlVXBkYXRlPWkuTk9PUCx0aGlzLmNzdFBvc3RUZXJtaW5hbD1pLk5PT1AsdGhpcy5jc3RQb3N0Tm9uVGVybWluYWw9aS5OT09QLHRoaXMuZ2V0TGFzdEV4cGxpY2l0UnVsZVNob3J0TmFtZT10aGlzLmdldExhc3RFeHBsaWNpdFJ1bGVTaG9ydE5hbWVOb0NzdCx0aGlzLmdldFByZXZpb3VzRXhwbGljaXRSdWxlU2hvcnROYW1lPXRoaXMuZ2V0UHJldmlvdXNFeHBsaWNpdFJ1bGVTaG9ydE5hbWVOb0NzdCx0aGlzLmdldExhc3RFeHBsaWNpdFJ1bGVPY2N1cnJlbmNlSW5kZXg9dGhpcy5nZXRMYXN0RXhwbGljaXRSdWxlT2NjdXJyZW5jZUluZGV4Tm9Dc3QsdGhpcy5tYW55SW50ZXJuYWw9dGhpcy5tYW55SW50ZXJuYWxOb0NzdCx0aGlzLm9ySW50ZXJuYWw9dGhpcy5vckludGVybmFsTm9Dc3QsdGhpcy5vcHRpb25JbnRlcm5hbD10aGlzLm9wdGlvbkludGVybmFsTm9Dc3QsdGhpcy5hdExlYXN0T25lSW50ZXJuYWw9dGhpcy5hdExlYXN0T25lSW50ZXJuYWxOb0NzdCx0aGlzLm1hbnlTZXBGaXJzdEludGVybmFsPXRoaXMubWFueVNlcEZpcnN0SW50ZXJuYWxOb0NzdCx0aGlzLmF0TGVhc3RPbmVTZXBGaXJzdEludGVybmFsPXRoaXMuYXRMZWFzdE9uZVNlcEZpcnN0SW50ZXJuYWxOb0NzdCl9LHQucHJvdG90eXBlLmNzdE5lc3RlZEludm9jYXRpb25TdGF0ZVVwZGF0ZT1mdW5jdGlvbih0LGUpe3RoaXMuQ1NUX1NUQUNLLnB1c2goe25hbWU6dCxmdWxsTmFtZTp0aGlzLnNob3J0UnVsZU5hbWVUb0Z1bGwuZ2V0KHRoaXMuZ2V0TGFzdEV4cGxpY2l0UnVsZVNob3J0TmFtZSgpKSt0LGNoaWxkcmVuOnt9fSl9LHQucHJvdG90eXBlLmNzdEludm9jYXRpb25TdGF0ZVVwZGF0ZT1mdW5jdGlvbih0LGUpe3RoaXMuTEFTVF9FWFBMSUNJVF9SVUxFX1NUQUNLLnB1c2godGhpcy5SVUxFX1NUQUNLLmxlbmd0aC0xKSx0aGlzLkNTVF9TVEFDSy5wdXNoKHtuYW1lOnQsY2hpbGRyZW46e319KX0sdC5wcm90b3R5cGUuY3N0RmluYWxseVN0YXRlVXBkYXRlPWZ1bmN0aW9uKCl7dGhpcy5MQVNUX0VYUExJQ0lUX1JVTEVfU1RBQ0sucG9wKCksdGhpcy5DU1RfU1RBQ0sucG9wKCl9LHQucHJvdG90eXBlLmNzdE5lc3RlZEZpbmFsbHlTdGF0ZVVwZGF0ZT1mdW5jdGlvbigpe3RoaXMuQ1NUX1NUQUNLLnBvcCgpfSx0LnByb3RvdHlwZS5jc3RQb3N0VGVybWluYWw9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLkNTVF9TVEFDS1t0aGlzLkNTVF9TVEFDSy5sZW5ndGgtMV07ci5hZGRUZXJtaW5hbFRvQ3N0KG4sZSx0KX0sdC5wcm90b3R5cGUuY3N0UG9zdE5vblRlcm1pbmFsPWZ1bmN0aW9uKHQsZSl7ci5hZGROb25lVGVybWluYWxUb0NzdCh0aGlzLkNTVF9TVEFDS1t0aGlzLkNTVF9TVEFDSy5sZW5ndGgtMV0sZSx0KX0sdC5wcm90b3R5cGUuZ2V0QmFzZUNzdFZpc2l0b3JDb25zdHJ1Y3Rvcj1mdW5jdGlvbigpe2lmKGkuaXNVbmRlZmluZWQodGhpcy5iYXNlQ3N0VmlzaXRvckNvbnN0cnVjdG9yKSl7dmFyIHQ9by5jcmVhdGVCYXNlU2VtYW50aWNWaXNpdG9yQ29uc3RydWN0b3IodGhpcy5jbGFzc05hbWUsdGhpcy5hbGxSdWxlTmFtZXMpO3JldHVybiB0aGlzLmJhc2VDc3RWaXNpdG9yQ29uc3RydWN0b3I9dCx0fXJldHVybiB0aGlzLmJhc2VDc3RWaXNpdG9yQ29uc3RydWN0b3J9LHQucHJvdG90eXBlLmdldEJhc2VDc3RWaXNpdG9yQ29uc3RydWN0b3JXaXRoRGVmYXVsdHM9ZnVuY3Rpb24oKXtpZihpLmlzVW5kZWZpbmVkKHRoaXMuYmFzZUNzdFZpc2l0b3JXaXRoRGVmYXVsdHNDb25zdHJ1Y3Rvcikpe3ZhciB0PW8uY3JlYXRlQmFzZVZpc2l0b3JDb25zdHJ1Y3RvcldpdGhEZWZhdWx0cyh0aGlzLmNsYXNzTmFtZSx0aGlzLmFsbFJ1bGVOYW1lcyx0aGlzLmdldEJhc2VDc3RWaXNpdG9yQ29uc3RydWN0b3IoKSk7cmV0dXJuIHRoaXMuYmFzZUNzdFZpc2l0b3JXaXRoRGVmYXVsdHNDb25zdHJ1Y3Rvcj10LHR9cmV0dXJuIHRoaXMuYmFzZUNzdFZpc2l0b3JXaXRoRGVmYXVsdHNDb25zdHJ1Y3Rvcn0sdC5wcm90b3R5cGUubmVzdGVkUnVsZUJlZm9yZUNsYXVzZT1mdW5jdGlvbih0LGUpe3ZhciBuO3JldHVybiB2b2lkIDAhPT10Lk5BTUU/KG49dC5OQU1FLHRoaXMubmVzdGVkUnVsZUludm9jYXRpb25TdGF0ZVVwZGF0ZShuLGUpLG4pOnZvaWQgMH0sdC5wcm90b3R5cGUubmVzdGVkQWx0QmVmb3JlQ2xhdXNlPWZ1bmN0aW9uKHQsZSxuLHIpe3ZhciBpLG89dGhpcy5nZXRMYXN0RXhwbGljaXRSdWxlU2hvcnROYW1lKCkscz1hLmdldEtleUZvckFsdEluZGV4KG8sbixlLHIpO3JldHVybiB2b2lkIDAhPT10Lk5BTUU/KGk9dC5OQU1FLHRoaXMubmVzdGVkUnVsZUludm9jYXRpb25TdGF0ZVVwZGF0ZShpLHMpLHtzaG9ydE5hbWU6cyxuZXN0ZWROYW1lOml9KTp2b2lkIDB9LHQucHJvdG90eXBlLm5lc3RlZFJ1bGVGaW5hbGx5Q2xhdXNlPWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5DU1RfU1RBQ0ssaT1uW24ubGVuZ3RoLTFdO3RoaXMubmVzdGVkUnVsZUZpbmFsbHlTdGF0ZVVwZGF0ZSgpO3ZhciBvPW5bbi5sZW5ndGgtMV07ci5hZGROb25lVGVybWluYWxUb0NzdChvLGUsaSl9LHQucHJvdG90eXBlLmdldExhc3RFeHBsaWNpdFJ1bGVTaG9ydE5hbWU9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLkxBU1RfRVhQTElDSVRfUlVMRV9TVEFDS1t0aGlzLkxBU1RfRVhQTElDSVRfUlVMRV9TVEFDSy5sZW5ndGgtMV07cmV0dXJuIHRoaXMuUlVMRV9TVEFDS1t0XX0sdC5wcm90b3R5cGUuZ2V0TGFzdEV4cGxpY2l0UnVsZVNob3J0TmFtZU5vQ3N0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5SVUxFX1NUQUNLO3JldHVybiB0W3QubGVuZ3RoLTFdfSx0LnByb3RvdHlwZS5nZXRQcmV2aW91c0V4cGxpY2l0UnVsZVNob3J0TmFtZT1mdW5jdGlvbigpe3ZhciB0PXRoaXMuTEFTVF9FWFBMSUNJVF9SVUxFX1NUQUNLW3RoaXMuTEFTVF9FWFBMSUNJVF9SVUxFX1NUQUNLLmxlbmd0aC0yXTtyZXR1cm4gdGhpcy5SVUxFX1NUQUNLW3RdfSx0LnByb3RvdHlwZS5nZXRQcmV2aW91c0V4cGxpY2l0UnVsZVNob3J0TmFtZU5vQ3N0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5SVUxFX1NUQUNLO3JldHVybiB0W3QubGVuZ3RoLTJdfSx0LnByb3RvdHlwZS5nZXRMYXN0RXhwbGljaXRSdWxlT2NjdXJyZW5jZUluZGV4PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5MQVNUX0VYUExJQ0lUX1JVTEVfU1RBQ0tbdGhpcy5MQVNUX0VYUExJQ0lUX1JVTEVfU1RBQ0subGVuZ3RoLTFdO3JldHVybiB0aGlzLlJVTEVfT0NDVVJSRU5DRV9TVEFDS1t0XX0sdC5wcm90b3R5cGUuZ2V0TGFzdEV4cGxpY2l0UnVsZU9jY3VycmVuY2VJbmRleE5vQ3N0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5SVUxFX09DQ1VSUkVOQ0VfU1RBQ0s7cmV0dXJuIHRbdC5sZW5ndGgtMV19LHQucHJvdG90eXBlLm5lc3RlZFJ1bGVJbnZvY2F0aW9uU3RhdGVVcGRhdGU9ZnVuY3Rpb24odCxlKXt0aGlzLlJVTEVfT0NDVVJSRU5DRV9TVEFDSy5wdXNoKDEpLHRoaXMuUlVMRV9TVEFDSy5wdXNoKGUpLHRoaXMuY3N0TmVzdGVkSW52b2NhdGlvblN0YXRlVXBkYXRlKHQsZSl9LHQucHJvdG90eXBlLm5lc3RlZFJ1bGVGaW5hbGx5U3RhdGVVcGRhdGU9ZnVuY3Rpb24oKXt0aGlzLlJVTEVfU1RBQ0sucG9wKCksdGhpcy5SVUxFX09DQ1VSUkVOQ0VfU1RBQ0sucG9wKCksdGhpcy5jc3ROZXN0ZWRGaW5hbGx5U3RhdGVVcGRhdGUoKX0sdH0oKTtlLlRyZWVCdWlsZGVyPXV9LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgcixpPW4oMCksbz1uKDQpLGE9bigxMSk7ZnVuY3Rpb24gcyh0LGUpe2Zvcih2YXIgbj1pLmtleXModCkscj1uLmxlbmd0aCxvPTA7bzxyO28rKylmb3IodmFyIGE9dFtuW29dXSxzPWEubGVuZ3RoLHU9MDt1PHM7dSsrKXt2YXIgYz1hW3VdO3ZvaWQgMD09PWMudG9rZW5UeXBlSWR4JiYodm9pZCAwIT09Yy5mdWxsTmFtZT90aGlzW2MuZnVsbE5hbWVdKGMuY2hpbGRyZW4sZSk6dGhpc1tjLm5hbWVdKGMuY2hpbGRyZW4sZSkpfX1mdW5jdGlvbiB1KHQsZSl7dmFyIG49Yyh0LGUpLHI9bCh0LGUpO3JldHVybiBuLmNvbmNhdChyKX1mdW5jdGlvbiBjKHQsZSl7dmFyIG49aS5tYXAoZSxmdW5jdGlvbihlKXtpZighaS5pc0Z1bmN0aW9uKHRbZV0pKXJldHVybnttc2c6XCJNaXNzaW5nIHZpc2l0b3IgbWV0aG9kOiA8XCIrZStcIj4gb24gXCIrby5mdW5jdGlvbk5hbWUodC5jb25zdHJ1Y3RvcikrXCIgQ1NUIFZpc2l0b3IuXCIsdHlwZTpyLk1JU1NJTkdfTUVUSE9ELG1ldGhvZE5hbWU6ZX19KTtyZXR1cm4gaS5jb21wYWN0KG4pfWUuZGVmYXVsdFZpc2l0PXMsZS5jcmVhdGVCYXNlU2VtYW50aWNWaXNpdG9yQ29uc3RydWN0b3I9ZnVuY3Rpb24odCxlKXt2YXIgbj1mdW5jdGlvbigpe307cmV0dXJuIG8uZGVmaW5lTmFtZVByb3Aobix0K1wiQmFzZVNlbWFudGljc1wiKSwobi5wcm90b3R5cGU9e3Zpc2l0OmZ1bmN0aW9uKHQsZSl7aWYoaS5pc0FycmF5KHQpJiYodD10WzBdKSwhaS5pc1VuZGVmaW5lZCh0KSlyZXR1cm4gdm9pZCAwIT09dC5mdWxsTmFtZT90aGlzW3QuZnVsbE5hbWVdKHQuY2hpbGRyZW4sZSk6dGhpc1t0Lm5hbWVdKHQuY2hpbGRyZW4sZSl9LHZhbGlkYXRlVmlzaXRvcjpmdW5jdGlvbigpe3ZhciB0PXUodGhpcyxlKTtpZighaS5pc0VtcHR5KHQpKXt2YXIgbj1pLm1hcCh0LGZ1bmN0aW9uKHQpe3JldHVybiB0Lm1zZ30pO3Rocm93IEVycm9yKFwiRXJyb3JzIERldGVjdGVkIGluIENTVCBWaXNpdG9yIDxcIitvLmZ1bmN0aW9uTmFtZSh0aGlzLmNvbnN0cnVjdG9yKStcIj46XFxuXFx0XCIrbi5qb2luKFwiXFxuXFxuXCIpLnJlcGxhY2UoL1xcbi9nLFwiXFxuXFx0XCIpKX19fSkuY29uc3RydWN0b3I9bixuLl9SVUxFX05BTUVTPWUsbn0sZS5jcmVhdGVCYXNlVmlzaXRvckNvbnN0cnVjdG9yV2l0aERlZmF1bHRzPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1mdW5jdGlvbigpe307by5kZWZpbmVOYW1lUHJvcChyLHQrXCJCYXNlU2VtYW50aWNzV2l0aERlZmF1bHRzXCIpO3ZhciBhPU9iamVjdC5jcmVhdGUobi5wcm90b3R5cGUpO3JldHVybiBpLmZvckVhY2goZSxmdW5jdGlvbih0KXthW3RdPXN9KSwoci5wcm90b3R5cGU9YSkuY29uc3RydWN0b3I9cixyfSxmdW5jdGlvbih0KXt0W3QuUkVEVU5EQU5UX01FVEhPRD0wXT1cIlJFRFVOREFOVF9NRVRIT0RcIix0W3QuTUlTU0lOR19NRVRIT0Q9MV09XCJNSVNTSU5HX01FVEhPRFwifShyPWUuQ3N0VmlzaXRvckRlZmluaXRpb25FcnJvcnx8KGUuQ3N0VmlzaXRvckRlZmluaXRpb25FcnJvcj17fSkpLGUudmFsaWRhdGVWaXNpdG9yPXUsZS52YWxpZGF0ZU1pc3NpbmdDc3RNZXRob2RzPWM7dmFyIHA9W1wiY29uc3RydWN0b3JcIixcInZpc2l0XCIsXCJ2YWxpZGF0ZVZpc2l0b3JcIl07ZnVuY3Rpb24gbCh0LGUpe3ZhciBuPVtdO2Zvcih2YXIgcyBpbiB0KWEudmFsaWRUZXJtc1BhdHRlcm4udGVzdChzKSYmaS5pc0Z1bmN0aW9uKHRbc10pJiYhaS5jb250YWlucyhwLHMpJiYhaS5jb250YWlucyhlLHMpJiZuLnB1c2goe21zZzpcIlJlZHVuZGFudCB2aXNpdG9yIG1ldGhvZDogPFwiK3MrXCI+IG9uIFwiK28uZnVuY3Rpb25OYW1lKHQuY29uc3RydWN0b3IpK1wiIENTVCBWaXNpdG9yXFxuVGhlcmUgaXMgbm8gR3JhbW1hciBSdWxlIGNvcnJlc3BvbmRpbmcgdG8gdGhpcyBtZXRob2QncyBuYW1lLlxcbkZvciB1dGlsaXR5IG1ldGhvZHMgb24gdmlzaXRvciBjbGFzc2VzIHVzZSBtZXRob2RzIG5hbWVzIHRoYXQgZG8gbm90IG1hdGNoIC9cIithLnZhbGlkVGVybXNQYXR0ZXJuLnNvdXJjZStcIi8uXCIsdHlwZTpyLlJFRFVOREFOVF9NRVRIT0QsbWV0aG9kTmFtZTpzfSk7cmV0dXJuIG59ZS52YWxpZGF0ZVJlZHVuZGFudE1ldGhvZHM9bH0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciByPW4oMyksaT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt9cmV0dXJuIHQucHJvdG90eXBlLmluaXRMZXhlckFkYXB0ZXI9ZnVuY3Rpb24oKXt0aGlzLnRva1ZlY3Rvcj1bXSx0aGlzLnRva1ZlY3Rvckxlbmd0aD0wLHRoaXMuY3VycklkeD0tMX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwiaW5wdXRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudG9rVmVjdG9yfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5yZXNldCgpLHRoaXMudG9rVmVjdG9yPXQsdGhpcy50b2tWZWN0b3JMZW5ndGg9dC5sZW5ndGh9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksdC5wcm90b3R5cGUuU0tJUF9UT0tFTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmN1cnJJZHg8PXRoaXMudG9rVmVjdG9yLmxlbmd0aC0yPyh0aGlzLmNvbnN1bWVUb2tlbigpLHRoaXMuTEEoMSkpOnIuRU5EX09GX0ZJTEV9LHQucHJvdG90eXBlLkxBPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmN1cnJJZHgrdDwwfHx0aGlzLnRva1ZlY3Rvckxlbmd0aDw9dGhpcy5jdXJySWR4K3Q/ci5FTkRfT0ZfRklMRTp0aGlzLnRva1ZlY3Rvclt0aGlzLmN1cnJJZHgrdF19LHQucHJvdG90eXBlLmNvbnN1bWVUb2tlbj1mdW5jdGlvbigpe3RoaXMuY3VycklkeCsrfSx0LnByb3RvdHlwZS5leHBvcnRMZXhlclN0YXRlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY3VycklkeH0sdC5wcm90b3R5cGUuaW1wb3J0TGV4ZXJTdGF0ZT1mdW5jdGlvbih0KXt0aGlzLmN1cnJJZHg9dH0sdC5wcm90b3R5cGUucmVzZXRMZXhlclN0YXRlPWZ1bmN0aW9uKCl7dGhpcy5jdXJySWR4PS0xfSx0LnByb3RvdHlwZS5tb3ZlVG9UZXJtaW5hdGVkU3RhdGU9ZnVuY3Rpb24oKXt0aGlzLmN1cnJJZHg9dGhpcy50b2tWZWN0b3IubGVuZ3RoLTF9LHQucHJvdG90eXBlLmdldExleGVyUG9zaXRpb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5leHBvcnRMZXhlclN0YXRlKCl9LHR9KCk7ZS5MZXhlckFkYXB0ZXI9aX0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciByPW4oMCksaT1uKDYpLG89bigzKSxhPW4oMTApLHM9bigyMyksdT1uKDExKSxjPW4oMSkscD1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt9cmV0dXJuIHQucHJvdG90eXBlLkNPTlNVTUU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5jb25zdW1lSW50ZXJuYWwodCwwLGUpfSx0LnByb3RvdHlwZS5DT05TVU1FMT1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmNvbnN1bWVJbnRlcm5hbCh0LDEsZSl9LHQucHJvdG90eXBlLkNPTlNVTUUyPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuY29uc3VtZUludGVybmFsKHQsMixlKX0sdC5wcm90b3R5cGUuQ09OU1VNRTM9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5jb25zdW1lSW50ZXJuYWwodCwzLGUpfSx0LnByb3RvdHlwZS5DT05TVU1FND1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmNvbnN1bWVJbnRlcm5hbCh0LDQsZSl9LHQucHJvdG90eXBlLkNPTlNVTUU1PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuY29uc3VtZUludGVybmFsKHQsNSxlKX0sdC5wcm90b3R5cGUuQ09OU1VNRTY9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5jb25zdW1lSW50ZXJuYWwodCw2LGUpfSx0LnByb3RvdHlwZS5DT05TVU1FNz1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmNvbnN1bWVJbnRlcm5hbCh0LDcsZSl9LHQucHJvdG90eXBlLkNPTlNVTUU4PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuY29uc3VtZUludGVybmFsKHQsOCxlKX0sdC5wcm90b3R5cGUuQ09OU1VNRTk9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5jb25zdW1lSW50ZXJuYWwodCw5LGUpfSx0LnByb3RvdHlwZS5TVUJSVUxFPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuc3VicnVsZUludGVybmFsKHQsMCxlKX0sdC5wcm90b3R5cGUuU1VCUlVMRTE9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5zdWJydWxlSW50ZXJuYWwodCwxLGUpfSx0LnByb3RvdHlwZS5TVUJSVUxFMj1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLnN1YnJ1bGVJbnRlcm5hbCh0LDIsZSl9LHQucHJvdG90eXBlLlNVQlJVTEUzPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuc3VicnVsZUludGVybmFsKHQsMyxlKX0sdC5wcm90b3R5cGUuU1VCUlVMRTQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5zdWJydWxlSW50ZXJuYWwodCw0LGUpfSx0LnByb3RvdHlwZS5TVUJSVUxFNT1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLnN1YnJ1bGVJbnRlcm5hbCh0LDUsZSl9LHQucHJvdG90eXBlLlNVQlJVTEU2PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuc3VicnVsZUludGVybmFsKHQsNixlKX0sdC5wcm90b3R5cGUuU1VCUlVMRTc9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5zdWJydWxlSW50ZXJuYWwodCw3LGUpfSx0LnByb3RvdHlwZS5TVUJSVUxFOD1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLnN1YnJ1bGVJbnRlcm5hbCh0LDgsZSl9LHQucHJvdG90eXBlLlNVQlJVTEU5PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuc3VicnVsZUludGVybmFsKHQsOSxlKX0sdC5wcm90b3R5cGUuT1BUSU9OPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm9wdGlvbkludGVybmFsKHQsMCl9LHQucHJvdG90eXBlLk9QVElPTjE9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMub3B0aW9uSW50ZXJuYWwodCwxKX0sdC5wcm90b3R5cGUuT1BUSU9OMj1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5vcHRpb25JbnRlcm5hbCh0LDIpfSx0LnByb3RvdHlwZS5PUFRJT04zPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm9wdGlvbkludGVybmFsKHQsMyl9LHQucHJvdG90eXBlLk9QVElPTjQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMub3B0aW9uSW50ZXJuYWwodCw0KX0sdC5wcm90b3R5cGUuT1BUSU9ONT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5vcHRpb25JbnRlcm5hbCh0LDUpfSx0LnByb3RvdHlwZS5PUFRJT042PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm9wdGlvbkludGVybmFsKHQsNil9LHQucHJvdG90eXBlLk9QVElPTjc9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMub3B0aW9uSW50ZXJuYWwodCw3KX0sdC5wcm90b3R5cGUuT1BUSU9OOD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5vcHRpb25JbnRlcm5hbCh0LDgpfSx0LnByb3RvdHlwZS5PUFRJT045PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm9wdGlvbkludGVybmFsKHQsOSl9LHQucHJvdG90eXBlLk9SPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm9ySW50ZXJuYWwodCwwKX0sdC5wcm90b3R5cGUuT1IxPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm9ySW50ZXJuYWwodCwxKX0sdC5wcm90b3R5cGUuT1IyPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm9ySW50ZXJuYWwodCwyKX0sdC5wcm90b3R5cGUuT1IzPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm9ySW50ZXJuYWwodCwzKX0sdC5wcm90b3R5cGUuT1I0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm9ySW50ZXJuYWwodCw0KX0sdC5wcm90b3R5cGUuT1I1PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm9ySW50ZXJuYWwodCw1KX0sdC5wcm90b3R5cGUuT1I2PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm9ySW50ZXJuYWwodCw2KX0sdC5wcm90b3R5cGUuT1I3PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm9ySW50ZXJuYWwodCw3KX0sdC5wcm90b3R5cGUuT1I4PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm9ySW50ZXJuYWwodCw4KX0sdC5wcm90b3R5cGUuT1I5PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm9ySW50ZXJuYWwodCw5KX0sdC5wcm90b3R5cGUuTUFOWT1mdW5jdGlvbih0KXt0aGlzLm1hbnlJbnRlcm5hbCgwLHQpfSx0LnByb3RvdHlwZS5NQU5ZMT1mdW5jdGlvbih0KXt0aGlzLm1hbnlJbnRlcm5hbCgxLHQpfSx0LnByb3RvdHlwZS5NQU5ZMj1mdW5jdGlvbih0KXt0aGlzLm1hbnlJbnRlcm5hbCgyLHQpfSx0LnByb3RvdHlwZS5NQU5ZMz1mdW5jdGlvbih0KXt0aGlzLm1hbnlJbnRlcm5hbCgzLHQpfSx0LnByb3RvdHlwZS5NQU5ZND1mdW5jdGlvbih0KXt0aGlzLm1hbnlJbnRlcm5hbCg0LHQpfSx0LnByb3RvdHlwZS5NQU5ZNT1mdW5jdGlvbih0KXt0aGlzLm1hbnlJbnRlcm5hbCg1LHQpfSx0LnByb3RvdHlwZS5NQU5ZNj1mdW5jdGlvbih0KXt0aGlzLm1hbnlJbnRlcm5hbCg2LHQpfSx0LnByb3RvdHlwZS5NQU5ZNz1mdW5jdGlvbih0KXt0aGlzLm1hbnlJbnRlcm5hbCg3LHQpfSx0LnByb3RvdHlwZS5NQU5ZOD1mdW5jdGlvbih0KXt0aGlzLm1hbnlJbnRlcm5hbCg4LHQpfSx0LnByb3RvdHlwZS5NQU5ZOT1mdW5jdGlvbih0KXt0aGlzLm1hbnlJbnRlcm5hbCg5LHQpfSx0LnByb3RvdHlwZS5NQU5ZX1NFUD1mdW5jdGlvbih0KXt0aGlzLm1hbnlTZXBGaXJzdEludGVybmFsKDAsdCl9LHQucHJvdG90eXBlLk1BTllfU0VQMT1mdW5jdGlvbih0KXt0aGlzLm1hbnlTZXBGaXJzdEludGVybmFsKDEsdCl9LHQucHJvdG90eXBlLk1BTllfU0VQMj1mdW5jdGlvbih0KXt0aGlzLm1hbnlTZXBGaXJzdEludGVybmFsKDIsdCl9LHQucHJvdG90eXBlLk1BTllfU0VQMz1mdW5jdGlvbih0KXt0aGlzLm1hbnlTZXBGaXJzdEludGVybmFsKDMsdCl9LHQucHJvdG90eXBlLk1BTllfU0VQND1mdW5jdGlvbih0KXt0aGlzLm1hbnlTZXBGaXJzdEludGVybmFsKDQsdCl9LHQucHJvdG90eXBlLk1BTllfU0VQNT1mdW5jdGlvbih0KXt0aGlzLm1hbnlTZXBGaXJzdEludGVybmFsKDUsdCl9LHQucHJvdG90eXBlLk1BTllfU0VQNj1mdW5jdGlvbih0KXt0aGlzLm1hbnlTZXBGaXJzdEludGVybmFsKDYsdCl9LHQucHJvdG90eXBlLk1BTllfU0VQNz1mdW5jdGlvbih0KXt0aGlzLm1hbnlTZXBGaXJzdEludGVybmFsKDcsdCl9LHQucHJvdG90eXBlLk1BTllfU0VQOD1mdW5jdGlvbih0KXt0aGlzLm1hbnlTZXBGaXJzdEludGVybmFsKDgsdCl9LHQucHJvdG90eXBlLk1BTllfU0VQOT1mdW5jdGlvbih0KXt0aGlzLm1hbnlTZXBGaXJzdEludGVybmFsKDksdCl9LHQucHJvdG90eXBlLkFUX0xFQVNUX09ORT1mdW5jdGlvbih0KXt0aGlzLmF0TGVhc3RPbmVJbnRlcm5hbCgwLHQpfSx0LnByb3RvdHlwZS5BVF9MRUFTVF9PTkUxPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmF0TGVhc3RPbmVJbnRlcm5hbCgxLHQpfSx0LnByb3RvdHlwZS5BVF9MRUFTVF9PTkUyPWZ1bmN0aW9uKHQpe3RoaXMuYXRMZWFzdE9uZUludGVybmFsKDIsdCl9LHQucHJvdG90eXBlLkFUX0xFQVNUX09ORTM9ZnVuY3Rpb24odCl7dGhpcy5hdExlYXN0T25lSW50ZXJuYWwoMyx0KX0sdC5wcm90b3R5cGUuQVRfTEVBU1RfT05FND1mdW5jdGlvbih0KXt0aGlzLmF0TGVhc3RPbmVJbnRlcm5hbCg0LHQpfSx0LnByb3RvdHlwZS5BVF9MRUFTVF9PTkU1PWZ1bmN0aW9uKHQpe3RoaXMuYXRMZWFzdE9uZUludGVybmFsKDUsdCl9LHQucHJvdG90eXBlLkFUX0xFQVNUX09ORTY9ZnVuY3Rpb24odCl7dGhpcy5hdExlYXN0T25lSW50ZXJuYWwoNix0KX0sdC5wcm90b3R5cGUuQVRfTEVBU1RfT05FNz1mdW5jdGlvbih0KXt0aGlzLmF0TGVhc3RPbmVJbnRlcm5hbCg3LHQpfSx0LnByb3RvdHlwZS5BVF9MRUFTVF9PTkU4PWZ1bmN0aW9uKHQpe3RoaXMuYXRMZWFzdE9uZUludGVybmFsKDgsdCl9LHQucHJvdG90eXBlLkFUX0xFQVNUX09ORTk9ZnVuY3Rpb24odCl7dGhpcy5hdExlYXN0T25lSW50ZXJuYWwoOSx0KX0sdC5wcm90b3R5cGUuQVRfTEVBU1RfT05FX1NFUD1mdW5jdGlvbih0KXt0aGlzLmF0TGVhc3RPbmVTZXBGaXJzdEludGVybmFsKDAsdCl9LHQucHJvdG90eXBlLkFUX0xFQVNUX09ORV9TRVAxPWZ1bmN0aW9uKHQpe3RoaXMuYXRMZWFzdE9uZVNlcEZpcnN0SW50ZXJuYWwoMSx0KX0sdC5wcm90b3R5cGUuQVRfTEVBU1RfT05FX1NFUDI9ZnVuY3Rpb24odCl7dGhpcy5hdExlYXN0T25lU2VwRmlyc3RJbnRlcm5hbCgyLHQpfSx0LnByb3RvdHlwZS5BVF9MRUFTVF9PTkVfU0VQMz1mdW5jdGlvbih0KXt0aGlzLmF0TGVhc3RPbmVTZXBGaXJzdEludGVybmFsKDMsdCl9LHQucHJvdG90eXBlLkFUX0xFQVNUX09ORV9TRVA0PWZ1bmN0aW9uKHQpe3RoaXMuYXRMZWFzdE9uZVNlcEZpcnN0SW50ZXJuYWwoNCx0KX0sdC5wcm90b3R5cGUuQVRfTEVBU1RfT05FX1NFUDU9ZnVuY3Rpb24odCl7dGhpcy5hdExlYXN0T25lU2VwRmlyc3RJbnRlcm5hbCg1LHQpfSx0LnByb3RvdHlwZS5BVF9MRUFTVF9PTkVfU0VQNj1mdW5jdGlvbih0KXt0aGlzLmF0TGVhc3RPbmVTZXBGaXJzdEludGVybmFsKDYsdCl9LHQucHJvdG90eXBlLkFUX0xFQVNUX09ORV9TRVA3PWZ1bmN0aW9uKHQpe3RoaXMuYXRMZWFzdE9uZVNlcEZpcnN0SW50ZXJuYWwoNyx0KX0sdC5wcm90b3R5cGUuQVRfTEVBU1RfT05FX1NFUDg9ZnVuY3Rpb24odCl7dGhpcy5hdExlYXN0T25lU2VwRmlyc3RJbnRlcm5hbCg4LHQpfSx0LnByb3RvdHlwZS5BVF9MRUFTVF9PTkVfU0VQOT1mdW5jdGlvbih0KXt0aGlzLmF0TGVhc3RPbmVTZXBGaXJzdEludGVybmFsKDksdCl9LHQucHJvdG90eXBlLlJVTEU9ZnVuY3Rpb24odCxlLG4pe2lmKHZvaWQgMD09PW4mJihuPW8uREVGQVVMVF9SVUxFX0NPTkZJRyksci5jb250YWlucyh0aGlzLmRlZmluZWRSdWxlc05hbWVzLHQpKXt2YXIgaT17bWVzc2FnZTphLmRlZmF1bHRHcmFtbWFyVmFsaWRhdG9yRXJyb3JQcm92aWRlci5idWlsZER1cGxpY2F0ZVJ1bGVOYW1lRXJyb3Ioe3RvcExldmVsUnVsZTp0LGdyYW1tYXJOYW1lOnRoaXMuY2xhc3NOYW1lfSksdHlwZTpvLlBhcnNlckRlZmluaXRpb25FcnJvclR5cGUuRFVQTElDQVRFX1JVTEVfTkFNRSxydWxlTmFtZTp0fTt0aGlzLmRlZmluaXRpb25FcnJvcnMucHVzaChpKX1pZih0aGlzLmRlZmluZWRSdWxlc05hbWVzLnB1c2godCksIXRoaXMuZ2FzdFByb2R1Y3Rpb25zQ2FjaGUuY29udGFpbnNLZXkodCkmJiF0aGlzLnNlcmlhbGl6ZWRHcmFtbWFyKXt2YXIgdT1zLmJ1aWxkVG9wUHJvZHVjdGlvbihlLnRvU3RyaW5nKCksdCx0aGlzLnRva2Vuc01hcCk7dGhpcy5nYXN0UHJvZHVjdGlvbnNDYWNoZS5wdXQodCx1KX12YXIgYz10aGlzLmRlZmluZVJ1bGUodCxlLG4pO3JldHVybiB0aGlzW3RdPWMsY30sdC5wcm90b3R5cGUuT1ZFUlJJREVfUlVMRT1mdW5jdGlvbih0LGUsbil7dm9pZCAwPT09biYmKG49by5ERUZBVUxUX1JVTEVfQ09ORklHKTt2YXIgcj1bXTtpZihyPXIuY29uY2F0KHUudmFsaWRhdGVSdWxlSXNPdmVycmlkZGVuKHQsdGhpcy5kZWZpbmVkUnVsZXNOYW1lcyx0aGlzLmNsYXNzTmFtZSkpLHRoaXMuZGVmaW5pdGlvbkVycm9ycy5wdXNoLmFwcGx5KHRoaXMuZGVmaW5pdGlvbkVycm9ycyxyKSwhdGhpcy5zZXJpYWxpemVkR3JhbW1hcil7dmFyIGk9cy5idWlsZFRvcFByb2R1Y3Rpb24oZS50b1N0cmluZygpLHQsdGhpcy50b2tlbnNNYXApO3RoaXMuZ2FzdFByb2R1Y3Rpb25zQ2FjaGUucHV0KHQsaSl9dmFyIGE9dGhpcy5kZWZpbmVSdWxlKHQsZSxuKTtyZXR1cm4gdGhpc1t0XT1hLGF9LHQucHJvdG90eXBlLkJBQ0tUUkFDSz1mdW5jdGlvbih0LGUpe3JldHVybiBmdW5jdGlvbigpe3RoaXMuaXNCYWNrVHJhY2tpbmdTdGFjay5wdXNoKDEpO3ZhciBuPXRoaXMuc2F2ZVJlY29nU3RhdGUoKTt0cnl7cmV0dXJuIHQuYXBwbHkodGhpcyxlKSwhMH1jYXRjaCh0KXtpZihpLmlzUmVjb2duaXRpb25FeGNlcHRpb24odCkpcmV0dXJuITE7dGhyb3cgdH1maW5hbGx5e3RoaXMucmVsb2FkUmVjb2dTdGF0ZShuKSx0aGlzLmlzQmFja1RyYWNraW5nU3RhY2sucG9wKCl9fX0sdC5wcm90b3R5cGUuZ2V0R0FzdFByb2R1Y3Rpb25zPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2FzdFByb2R1Y3Rpb25zQ2FjaGV9LHQucHJvdG90eXBlLmdldFNlcmlhbGl6ZWRHYXN0UHJvZHVjdGlvbnM9ZnVuY3Rpb24oKXtyZXR1cm4gYy5zZXJpYWxpemVHcmFtbWFyKHRoaXMuZ2FzdFByb2R1Y3Rpb25zQ2FjaGUudmFsdWVzKCkpfSx0fSgpO2UuUmVjb2duaXplckFwaT1wfSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIHI9bigwKSxpPW4oOSksbz1uKDYpLGE9bigxMikscz1uKDEzKSx1PW4oMyksYz1uKDI1KSxwPW4oMiksbD1uKDcpLGg9big0KSxmPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe31yZXR1cm4gdC5wcm90b3R5cGUuaW5pdFJlY29nbml6ZXJFbmdpbmU9ZnVuY3Rpb24odCxlKXtpZih0aGlzLmNsYXNzTmFtZT1oLmNsYXNzTmFtZUZyb21JbnN0YW5jZSh0aGlzKSx0aGlzLnNob3J0UnVsZU5hbWVUb0Z1bGw9bmV3IGguSGFzaFRhYmxlLHRoaXMuZnVsbFJ1bGVOYW1lVG9TaG9ydD1uZXcgaC5IYXNoVGFibGUsdGhpcy5ydWxlU2hvcnROYW1lSWR4PTI1Nix0aGlzLnRva2VuTWF0Y2hlcj1sLnRva2VuU3RydWN0dXJlZE1hdGNoZXJOb0NhdGVnb3JpZXMsdGhpcy5kZWZpbmVkUnVsZXNOYW1lcz1bXSx0aGlzLnRva2Vuc01hcD17fSx0aGlzLmFsbFJ1bGVOYW1lcz1bXSx0aGlzLmlzQmFja1RyYWNraW5nU3RhY2s9W10sdGhpcy5SVUxFX1NUQUNLPVtdLHRoaXMuUlVMRV9PQ0NVUlJFTkNFX1NUQUNLPVtdLHRoaXMuZ2FzdFByb2R1Y3Rpb25zQ2FjaGU9bmV3IGguSGFzaFRhYmxlLHRoaXMuc2VyaWFsaXplZEdyYW1tYXI9ci5oYXMoZSxcInNlcmlhbGl6ZWRHcmFtbWFyXCIpP2Uuc2VyaWFsaXplZEdyYW1tYXI6dS5ERUZBVUxUX1BBUlNFUl9DT05GSUcuc2VyaWFsaXplZEdyYW1tYXIsci5pc0FycmF5KHQpKXtpZihyLmlzRW1wdHkodCkpdGhyb3cgRXJyb3IoXCJBIFRva2VuIFZvY2FidWxhcnkgY2Fubm90IGJlIGVtcHR5LlxcblxcdE5vdGUgdGhhdCB0aGUgZmlyc3QgYXJndW1lbnQgZm9yIHRoZSBwYXJzZXIgY29uc3RydWN0b3JcXG5cXHRpcyBubyBsb25nZXIgYSBUb2tlbiB2ZWN0b3IgKHNpbmNlIHY0LjApLlwiKTtpZihcIm51bWJlclwiPT10eXBlb2YgdFswXS5zdGFydE9mZnNldCl0aHJvdyBFcnJvcihcIlRoZSBQYXJzZXIgY29uc3RydWN0b3Igbm8gbG9uZ2VyIGFjY2VwdHMgYSB0b2tlbiB2ZWN0b3IgYXMgdGhlIGZpcnN0IGFyZ3VtZW50LlxcblxcdFNlZTogaHR0cHM6Ly9zYXAuZ2l0aHViLmlvL2NoZXZyb3RhaW4vZG9jcy9jaGFuZ2VzL0JSRUFLSU5HX0NIQU5HRVMuaHRtbCNfNC0wLTBcXG5cXHRGb3IgRnVydGhlciBkZXRhaWxzLlwiKX1pZihyLmlzQXJyYXkodCkpdGhpcy50b2tlbnNNYXA9ci5yZWR1Y2UodCxmdW5jdGlvbih0LGUpe3JldHVybiB0W3AudG9rZW5OYW1lKGUpXT1lLHR9LHt9KTtlbHNlIGlmKHIuaGFzKHQsXCJtb2Rlc1wiKSYmci5ldmVyeShyLmZsYXR0ZW4oci52YWx1ZXModC5tb2RlcykpLGwuaXNUb2tlblR5cGUpKXt2YXIgbj1yLmZsYXR0ZW4oci52YWx1ZXModC5tb2RlcykpLGk9ci51bmlxKG4pO3RoaXMudG9rZW5zTWFwPXIucmVkdWNlKGksZnVuY3Rpb24odCxlKXtyZXR1cm4gdFtwLnRva2VuTmFtZShlKV09ZSx0fSx7fSl9ZWxzZXtpZighci5pc09iamVjdCh0KSl0aHJvdyBuZXcgRXJyb3IoXCI8dG9rZW5zRGljdGlvbmFyeT4gYXJndW1lbnQgbXVzdCBiZSBBbiBBcnJheSBvZiBUb2tlbiBjb25zdHJ1Y3RvcnMsIEEgZGljdGlvbmFyeSBvZiBUb2tlbiBjb25zdHJ1Y3RvcnMgb3IgYW4gSU11bHRpTW9kZUxleGVyRGVmaW5pdGlvblwiKTt0aGlzLnRva2Vuc01hcD1yLmNsb25lT2JqKHQpfXRoaXMudG9rZW5zTWFwLkVPRj1wLkVPRjt2YXIgbz1yLmV2ZXJ5KHIudmFsdWVzKHQpLGZ1bmN0aW9uKHQpe3JldHVybiByLmlzRW1wdHkodC5jYXRlZ29yeU1hdGNoZXMpfSk7dGhpcy50b2tlbk1hdGNoZXI9bz9sLnRva2VuU3RydWN0dXJlZE1hdGNoZXJOb0NhdGVnb3JpZXM6bC50b2tlblN0cnVjdHVyZWRNYXRjaGVyLGwuYXVnbWVudFRva2VuVHlwZXMoci52YWx1ZXModGhpcy50b2tlbnNNYXApKX0sdC5wcm90b3R5cGUuZGVmaW5lUnVsZT1mdW5jdGlvbih0LGUsbil7aWYodGhpcy5zZWxmQW5hbHlzaXNEb25lKXRocm93IEVycm9yKFwiR3JhbW1hciBydWxlIDxcIit0K1wiPiBtYXkgbm90IGJlIGRlZmluZWQgYWZ0ZXIgdGhlICdwZXJmb3JtU2VsZkFuYWx5c2lzJyBtZXRob2QgaGFzIGJlZW4gY2FsbGVkJ1xcbk1ha2Ugc3VyZSB0aGF0IGFsbCBncmFtbWFyIHJ1bGUgZGVmaW5pdGlvbnMgYXJlIGRvbmUgYmVmb3JlICdwZXJmb3JtU2VsZkFuYWx5c2lzJyBpcyBjYWxsZWQuXCIpO3ZhciBhLHM9ci5oYXMobixcInJlc3luY0VuYWJsZWRcIik/bi5yZXN5bmNFbmFibGVkOnUuREVGQVVMVF9SVUxFX0NPTkZJRy5yZXN5bmNFbmFibGVkLGM9ci5oYXMobixcInJlY292ZXJ5VmFsdWVGdW5jXCIpP24ucmVjb3ZlcnlWYWx1ZUZ1bmM6dS5ERUZBVUxUX1JVTEVfQ09ORklHLnJlY292ZXJ5VmFsdWVGdW5jLHA9dGhpcy5ydWxlU2hvcnROYW1lSWR4PDxpLkJJVFNfRk9SX01FVEhPRF9JRFgraS5CSVRTX0ZPUl9PQ0NVUlJFTkNFX0lEWDt0aGlzLnJ1bGVTaG9ydE5hbWVJZHgrKyx0aGlzLnNob3J0UnVsZU5hbWVUb0Z1bGwucHV0KHAsdCksdGhpcy5mdWxsUnVsZU5hbWVUb1Nob3J0LnB1dCh0LHApO3JldHVybihhPWZ1bmN0aW9uKG4scil7cmV0dXJuIHZvaWQgMD09PW4mJihuPTApLHRoaXMucnVsZUludm9jYXRpb25TdGF0ZVVwZGF0ZShwLHQsbiksZnVuY3Rpb24odCl7dHJ5e3JldHVybiEwPT09dGhpcy5vdXRwdXRDc3Q/KGUuYXBwbHkodGhpcyx0KSx0aGlzLkNTVF9TVEFDS1t0aGlzLkNTVF9TVEFDSy5sZW5ndGgtMV0pOmUuYXBwbHkodGhpcyx0KX1jYXRjaCh0KXt2YXIgbj0xPT09dGhpcy5SVUxFX1NUQUNLLmxlbmd0aCxyPXMmJiF0aGlzLmlzQmFja1RyYWNraW5nKCkmJnRoaXMucmVjb3ZlcnlFbmFibGVkO2lmKG8uaXNSZWNvZ25pdGlvbkV4Y2VwdGlvbih0KSl7aWYocil7dmFyIGksYT10aGlzLmZpbmRSZVN5bmNUb2tlblR5cGUoKTtpZih0aGlzLmlzSW5DdXJyZW50UnVsZVJlU3luY1NldChhKSlyZXR1cm4gdC5yZXN5bmNlZFRva2Vucz10aGlzLnJlU3luY1RvKGEpLHRoaXMub3V0cHV0Q3N0PygoaT10aGlzLkNTVF9TVEFDS1t0aGlzLkNTVF9TVEFDSy5sZW5ndGgtMV0pLnJlY292ZXJlZE5vZGU9ITAsaSk6YygpO3Rocm93IHRoaXMub3V0cHV0Q3N0JiYoKGk9dGhpcy5DU1RfU1RBQ0tbdGhpcy5DU1RfU1RBQ0subGVuZ3RoLTFdKS5yZWNvdmVyZWROb2RlPSEwLHQucGFydGlhbENzdFJlc3VsdD1pKSx0fWlmKG4pcmV0dXJuIHRoaXMubW92ZVRvVGVybWluYXRlZFN0YXRlKCksYygpO3Rocm93IHR9dGhyb3cgdH1maW5hbGx5e3RoaXMucnVsZUZpbmFsbHlTdGF0ZVVwZGF0ZSgpfX0uY2FsbCh0aGlzLHIpfSkucnVsZU5hbWU9dCxhfSx0LnByb3RvdHlwZS5vcHRpb25JbnRlcm5hbD1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuZ2V0S2V5Rm9yQXV0b21hdGljTG9va2FoZWFkKGkuT1BUSU9OX0lEWCxlKSxyPXRoaXMubmVzdGVkUnVsZUJlZm9yZUNsYXVzZSh0LG4pO3RyeXtyZXR1cm4gdGhpcy5vcHRpb25JbnRlcm5hbExvZ2ljKHQsZSxuKX1maW5hbGx5e3ZvaWQgMCE9PXImJnRoaXMubmVzdGVkUnVsZUZpbmFsbHlDbGF1c2UobixyKX19LHQucHJvdG90eXBlLm9wdGlvbkludGVybmFsTm9Dc3Q9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLmdldEtleUZvckF1dG9tYXRpY0xvb2thaGVhZChpLk9QVElPTl9JRFgsZSk7cmV0dXJuIHRoaXMub3B0aW9uSW50ZXJuYWxMb2dpYyh0LGUsbil9LHQucHJvdG90eXBlLm9wdGlvbkludGVybmFsTG9naWM9ZnVuY3Rpb24odCxlLG4pe3ZhciByLGksbz10aGlzLGE9dGhpcy5nZXRMb29rYWhlYWRGdW5jRm9yT3B0aW9uKG4sZSk7aWYodm9pZCAwIT09dC5ERUYpe2lmKHI9dC5ERUYsdm9pZCAwIT09KGk9dC5HQVRFKSl7dmFyIHM9YTthPWZ1bmN0aW9uKCl7cmV0dXJuIGkuY2FsbChvKSYmcy5jYWxsKG8pfX19ZWxzZSByPXQ7aWYoITA9PT1hLmNhbGwodGhpcykpcmV0dXJuIHIuY2FsbCh0aGlzKX0sdC5wcm90b3R5cGUuYXRMZWFzdE9uZUludGVybmFsPWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5nZXRLZXlGb3JBdXRvbWF0aWNMb29rYWhlYWQoaS5BVF9MRUFTVF9PTkVfSURYLHQpLHI9dGhpcy5uZXN0ZWRSdWxlQmVmb3JlQ2xhdXNlKGUsbik7dHJ5e3JldHVybiB0aGlzLmF0TGVhc3RPbmVJbnRlcm5hbExvZ2ljKHQsZSxuKX1maW5hbGx5e3ZvaWQgMCE9PXImJnRoaXMubmVzdGVkUnVsZUZpbmFsbHlDbGF1c2UobixyKX19LHQucHJvdG90eXBlLmF0TGVhc3RPbmVJbnRlcm5hbE5vQ3N0PWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5nZXRLZXlGb3JBdXRvbWF0aWNMb29rYWhlYWQoaS5BVF9MRUFTVF9PTkVfSURYLHQpO3RoaXMuYXRMZWFzdE9uZUludGVybmFsTG9naWModCxlLG4pfSx0LnByb3RvdHlwZS5hdExlYXN0T25lSW50ZXJuYWxMb2dpYz1mdW5jdGlvbih0LGUsbil7dmFyIHIsbyx1PXRoaXMsYz10aGlzLmdldExvb2thaGVhZEZ1bmNGb3JBdExlYXN0T25lKG4sdCk7aWYodm9pZCAwIT09ZS5ERUYpe2lmKHI9ZS5ERUYsdm9pZCAwIT09KG89ZS5HQVRFKSl7dmFyIHA9YztjPWZ1bmN0aW9uKCl7cmV0dXJuIG8uY2FsbCh1KSYmcC5jYWxsKHUpfX19ZWxzZSByPWU7aWYoITAhPT1jLmNhbGwodGhpcykpdGhyb3cgdGhpcy5yYWlzZUVhcmx5RXhpdEV4Y2VwdGlvbih0LGEuUFJPRF9UWVBFLlJFUEVUSVRJT05fTUFOREFUT1JZLGUuRVJSX01TRyk7Zm9yKHZhciBsPXRoaXMuZG9TaW5nbGVSZXBldGl0aW9uKHIpOyEwPT09Yy5jYWxsKHRoaXMpJiYhMD09PWw7KWw9dGhpcy5kb1NpbmdsZVJlcGV0aXRpb24ocik7dGhpcy5hdHRlbXB0SW5SZXBldGl0aW9uUmVjb3ZlcnkodGhpcy5hdExlYXN0T25lSW50ZXJuYWwsW3QsZV0sYyxpLkFUX0xFQVNUX09ORV9JRFgsdCxzLk5leHRUZXJtaW5hbEFmdGVyQXRMZWFzdE9uZVdhbGtlcil9LHQucHJvdG90eXBlLmF0TGVhc3RPbmVTZXBGaXJzdEludGVybmFsPWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5nZXRLZXlGb3JBdXRvbWF0aWNMb29rYWhlYWQoaS5BVF9MRUFTVF9PTkVfU0VQX0lEWCx0KSxyPXRoaXMubmVzdGVkUnVsZUJlZm9yZUNsYXVzZShlLG4pO3RyeXt0aGlzLmF0TGVhc3RPbmVTZXBGaXJzdEludGVybmFsTG9naWModCxlLG4pfWZpbmFsbHl7dm9pZCAwIT09ciYmdGhpcy5uZXN0ZWRSdWxlRmluYWxseUNsYXVzZShuLHIpfX0sdC5wcm90b3R5cGUuYXRMZWFzdE9uZVNlcEZpcnN0SW50ZXJuYWxOb0NzdD1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuZ2V0S2V5Rm9yQXV0b21hdGljTG9va2FoZWFkKGkuQVRfTEVBU1RfT05FX1NFUF9JRFgsdCk7dGhpcy5hdExlYXN0T25lU2VwRmlyc3RJbnRlcm5hbExvZ2ljKHQsZSxuKX0sdC5wcm90b3R5cGUuYXRMZWFzdE9uZVNlcEZpcnN0SW50ZXJuYWxMb2dpYz1mdW5jdGlvbih0LGUsbil7dmFyIHI9dGhpcyxvPWUuREVGLHU9ZS5TRVA7aWYoITAhPT10aGlzLmdldExvb2thaGVhZEZ1bmNGb3JBdExlYXN0T25lU2VwKG4sdCkuY2FsbCh0aGlzKSl0aHJvdyB0aGlzLnJhaXNlRWFybHlFeGl0RXhjZXB0aW9uKHQsYS5QUk9EX1RZUEUuUkVQRVRJVElPTl9NQU5EQVRPUllfV0lUSF9TRVBBUkFUT1IsZS5FUlJfTVNHKTtvLmNhbGwodGhpcyk7Zm9yKHZhciBjPWZ1bmN0aW9uKCl7cmV0dXJuIHIudG9rZW5NYXRjaGVyKHIuTEEoMSksdSl9OyEwPT09dGhpcy50b2tlbk1hdGNoZXIodGhpcy5MQSgxKSx1KTspdGhpcy5DT05TVU1FKHUpLG8uY2FsbCh0aGlzKTt0aGlzLmF0dGVtcHRJblJlcGV0aXRpb25SZWNvdmVyeSh0aGlzLnJlcGV0aXRpb25TZXBTZWNvbmRJbnRlcm5hbCxbdCx1LGMsbyxzLk5leHRUZXJtaW5hbEFmdGVyQXRMZWFzdE9uZVNlcFdhbGtlcl0sYyxpLkFUX0xFQVNUX09ORV9TRVBfSURYLHQscy5OZXh0VGVybWluYWxBZnRlckF0TGVhc3RPbmVTZXBXYWxrZXIpfSx0LnByb3RvdHlwZS5tYW55SW50ZXJuYWw9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLmdldEtleUZvckF1dG9tYXRpY0xvb2thaGVhZChpLk1BTllfSURYLHQpLHI9dGhpcy5uZXN0ZWRSdWxlQmVmb3JlQ2xhdXNlKGUsbik7dHJ5e3JldHVybiB0aGlzLm1hbnlJbnRlcm5hbExvZ2ljKHQsZSxuKX1maW5hbGx5e3ZvaWQgMCE9PXImJnRoaXMubmVzdGVkUnVsZUZpbmFsbHlDbGF1c2UobixyKX19LHQucHJvdG90eXBlLm1hbnlJbnRlcm5hbE5vQ3N0PWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5nZXRLZXlGb3JBdXRvbWF0aWNMb29rYWhlYWQoaS5NQU5ZX0lEWCx0KTtyZXR1cm4gdGhpcy5tYW55SW50ZXJuYWxMb2dpYyh0LGUsbil9LHQucHJvdG90eXBlLm1hbnlJbnRlcm5hbExvZ2ljPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcixvLGE9dGhpcyx1PXRoaXMuZ2V0TG9va2FoZWFkRnVuY0Zvck1hbnkobix0KTtpZih2b2lkIDAhPT1lLkRFRil7aWYocj1lLkRFRix2b2lkIDAhPT0obz1lLkdBVEUpKXt2YXIgYz11O3U9ZnVuY3Rpb24oKXtyZXR1cm4gby5jYWxsKGEpJiZjLmNhbGwoYSl9fX1lbHNlIHI9ZTtmb3IodmFyIHA9ITA7ITA9PT11LmNhbGwodGhpcykmJiEwPT09cDspcD10aGlzLmRvU2luZ2xlUmVwZXRpdGlvbihyKTt0aGlzLmF0dGVtcHRJblJlcGV0aXRpb25SZWNvdmVyeSh0aGlzLm1hbnlJbnRlcm5hbCxbdCxlXSx1LGkuTUFOWV9JRFgsdCxzLk5leHRUZXJtaW5hbEFmdGVyTWFueVdhbGtlcil9LHQucHJvdG90eXBlLm1hbnlTZXBGaXJzdEludGVybmFsPWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5nZXRLZXlGb3JBdXRvbWF0aWNMb29rYWhlYWQoaS5NQU5ZX1NFUF9JRFgsdCkscj10aGlzLm5lc3RlZFJ1bGVCZWZvcmVDbGF1c2UoZSxuKTt0cnl7dGhpcy5tYW55U2VwRmlyc3RJbnRlcm5hbExvZ2ljKHQsZSxuKX1maW5hbGx5e3ZvaWQgMCE9PXImJnRoaXMubmVzdGVkUnVsZUZpbmFsbHlDbGF1c2UobixyKX19LHQucHJvdG90eXBlLm1hbnlTZXBGaXJzdEludGVybmFsTm9Dc3Q9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLmdldEtleUZvckF1dG9tYXRpY0xvb2thaGVhZChpLk1BTllfU0VQX0lEWCx0KTt0aGlzLm1hbnlTZXBGaXJzdEludGVybmFsTG9naWModCxlLG4pfSx0LnByb3RvdHlwZS5tYW55U2VwRmlyc3RJbnRlcm5hbExvZ2ljPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj10aGlzLG89ZS5ERUYsYT1lLlNFUDtpZighMD09PXRoaXMuZ2V0TG9va2FoZWFkRnVuY0Zvck1hbnlTZXAobix0KS5jYWxsKHRoaXMpKXtvLmNhbGwodGhpcyk7Zm9yKHZhciB1PWZ1bmN0aW9uKCl7cmV0dXJuIHIudG9rZW5NYXRjaGVyKHIuTEEoMSksYSl9OyEwPT09dGhpcy50b2tlbk1hdGNoZXIodGhpcy5MQSgxKSxhKTspdGhpcy5DT05TVU1FKGEpLG8uY2FsbCh0aGlzKTt0aGlzLmF0dGVtcHRJblJlcGV0aXRpb25SZWNvdmVyeSh0aGlzLnJlcGV0aXRpb25TZXBTZWNvbmRJbnRlcm5hbCxbdCxhLHUsbyxzLk5leHRUZXJtaW5hbEFmdGVyTWFueVNlcFdhbGtlcl0sdSxpLk1BTllfU0VQX0lEWCx0LHMuTmV4dFRlcm1pbmFsQWZ0ZXJNYW55U2VwV2Fsa2VyKX19LHQucHJvdG90eXBlLnJlcGV0aXRpb25TZXBTZWNvbmRJbnRlcm5hbD1mdW5jdGlvbih0LGUsbixyLG8pe2Zvcig7bigpOyl0aGlzLkNPTlNVTUUoZSksci5jYWxsKHRoaXMpO3RoaXMuYXR0ZW1wdEluUmVwZXRpdGlvblJlY292ZXJ5KHRoaXMucmVwZXRpdGlvblNlcFNlY29uZEludGVybmFsLFt0LGUsbixyLG9dLG4saS5BVF9MRUFTVF9PTkVfU0VQX0lEWCx0LG8pfSx0LnByb3RvdHlwZS5kb1NpbmdsZVJlcGV0aXRpb249ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5nZXRMZXhlclBvc2l0aW9uKCk7cmV0dXJuIHQuY2FsbCh0aGlzKSx0aGlzLmdldExleGVyUG9zaXRpb24oKT5lfSx0LnByb3RvdHlwZS5vckludGVybmFsTm9Dc3Q9ZnVuY3Rpb24odCxlKXt2YXIgbj1yLmlzQXJyYXkodCk/dDp0LkRFRixpPXRoaXMuZ2V0TG9va2FoZWFkRnVuY0Zvck9yKGUsbikuY2FsbCh0aGlzLG4pO2lmKHZvaWQgMCE9PWkpcmV0dXJuIG5baV0uQUxULmNhbGwodGhpcyk7dGhpcy5yYWlzZU5vQWx0RXhjZXB0aW9uKGUsdC5FUlJfTVNHKX0sdC5wcm90b3R5cGUub3JJbnRlcm5hbD1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuZ2V0S2V5Rm9yQXV0b21hdGljTG9va2FoZWFkKGkuT1JfSURYLGUpLG89dGhpcy5uZXN0ZWRSdWxlQmVmb3JlQ2xhdXNlKHQsbik7dHJ5e3ZhciBhPXIuaXNBcnJheSh0KT90OnQuREVGLHM9dGhpcy5nZXRMb29rYWhlYWRGdW5jRm9yT3IoZSxhKS5jYWxsKHRoaXMsYSk7aWYodm9pZCAwIT09cyl7dmFyIHU9YVtzXSxjPXRoaXMubmVzdGVkQWx0QmVmb3JlQ2xhdXNlKHUsZSxpLk9SX0lEWCxzKTt0cnl7cmV0dXJuIHUuQUxULmNhbGwodGhpcyl9ZmluYWxseXt2b2lkIDAhPT1jJiZ0aGlzLm5lc3RlZFJ1bGVGaW5hbGx5Q2xhdXNlKGMuc2hvcnROYW1lLGMubmVzdGVkTmFtZSl9fXRoaXMucmFpc2VOb0FsdEV4Y2VwdGlvbihlLHQuRVJSX01TRyl9ZmluYWxseXt2b2lkIDAhPT1vJiZ0aGlzLm5lc3RlZFJ1bGVGaW5hbGx5Q2xhdXNlKG4sbyl9fSx0LnByb3RvdHlwZS5ydWxlRmluYWxseVN0YXRlVXBkYXRlPWZ1bmN0aW9uKCl7aWYodGhpcy5SVUxFX1NUQUNLLnBvcCgpLHRoaXMuUlVMRV9PQ0NVUlJFTkNFX1NUQUNLLnBvcCgpLHRoaXMuY3N0RmluYWxseVN0YXRlVXBkYXRlKCksMD09PXRoaXMuUlVMRV9TVEFDSy5sZW5ndGgmJiF0aGlzLmlzQXRFbmRPZklucHV0KCkpe3ZhciB0PXRoaXMuTEEoMSksZT10aGlzLmVycm9yTWVzc2FnZVByb3ZpZGVyLmJ1aWxkTm90QWxsSW5wdXRQYXJzZWRNZXNzYWdlKHtmaXJzdFJlZHVuZGFudDp0LHJ1bGVOYW1lOnRoaXMuZ2V0Q3VyclJ1bGVGdWxsTmFtZSgpfSk7dGhpcy5TQVZFX0VSUk9SKG5ldyBvLk5vdEFsbElucHV0UGFyc2VkRXhjZXB0aW9uKGUsdCkpfX0sdC5wcm90b3R5cGUuc3VicnVsZUludGVybmFsPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcjt0cnl7dmFyIGk9dm9pZCAwIT09bj9uLkFSR1M6dm9pZCAwO3JldHVybiByPXQuY2FsbCh0aGlzLGUsaSksdGhpcy5jc3RQb3N0Tm9uVGVybWluYWwocix2b2lkIDAhPT1uJiZ2b2lkIDAhPT1uLkxBQkVMP24uTEFCRUw6dC5ydWxlTmFtZSkscn1jYXRjaChlKXt0aHJvdyBvLmlzUmVjb2duaXRpb25FeGNlcHRpb24oZSkmJnZvaWQgMCE9PWUucGFydGlhbENzdFJlc3VsdCYmKHRoaXMuY3N0UG9zdE5vblRlcm1pbmFsKGUucGFydGlhbENzdFJlc3VsdCx2b2lkIDAhPT1uJiZ2b2lkIDAhPT1uLkxBQkVMP24uTEFCRUw6dC5ydWxlTmFtZSksZGVsZXRlIGUucGFydGlhbENzdFJlc3VsdCksZX19LHQucHJvdG90eXBlLmNvbnN1bWVJbnRlcm5hbD1mdW5jdGlvbih0LGUsbil7dmFyIHI7dHJ5e3ZhciBpPXRoaXMuTEEoMSk7aWYoITAhPT10aGlzLnRva2VuTWF0Y2hlcihpLHQpKXt2YXIgYT12b2lkIDAscz10aGlzLkxBKDApO3Rocm93IGE9dm9pZCAwIT09biYmbi5FUlJfTVNHP24uRVJSX01TRzp0aGlzLmVycm9yTWVzc2FnZVByb3ZpZGVyLmJ1aWxkTWlzbWF0Y2hUb2tlbk1lc3NhZ2Uoe2V4cGVjdGVkOnQsYWN0dWFsOmkscHJldmlvdXM6cyxydWxlTmFtZTp0aGlzLmdldEN1cnJSdWxlRnVsbE5hbWUoKX0pLHRoaXMuU0FWRV9FUlJPUihuZXcgby5NaXNtYXRjaGVkVG9rZW5FeGNlcHRpb24oYSxpLHMpKX10aGlzLmNvbnN1bWVUb2tlbigpLHI9aX1jYXRjaChuKXtpZighdGhpcy5yZWNvdmVyeUVuYWJsZWR8fFwiTWlzbWF0Y2hlZFRva2VuRXhjZXB0aW9uXCIhPT1uLm5hbWV8fHRoaXMuaXNCYWNrVHJhY2tpbmcoKSl0aHJvdyBuO3ZhciB1PXRoaXMuZ2V0Rm9sbG93c0ZvckluUnVsZVJlY292ZXJ5KHQsZSk7dHJ5e3I9dGhpcy50cnlJblJ1bGVSZWNvdmVyeSh0LHUpfWNhdGNoKHQpe3Rocm93IHQubmFtZT09PWMuSU5fUlVMRV9SRUNPVkVSWV9FWENFUFRJT04/bjp0fX1yZXR1cm4gdGhpcy5jc3RQb3N0VGVybWluYWwodm9pZCAwIT09biYmdm9pZCAwIT09bi5MQUJFTD9uLkxBQkVMOnQudG9rZW5OYW1lLHIpLHJ9LHQucHJvdG90eXBlLnNhdmVSZWNvZ1N0YXRlPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5lcnJvcnMsZT1yLmNsb25lQXJyKHRoaXMuUlVMRV9TVEFDSyk7cmV0dXJue2Vycm9yczp0LGxleGVyU3RhdGU6dGhpcy5leHBvcnRMZXhlclN0YXRlKCksUlVMRV9TVEFDSzplLENTVF9TVEFDSzp0aGlzLkNTVF9TVEFDSyxMQVNUX0VYUExJQ0lUX1JVTEVfU1RBQ0s6dGhpcy5MQVNUX0VYUExJQ0lUX1JVTEVfU1RBQ0t9fSx0LnByb3RvdHlwZS5yZWxvYWRSZWNvZ1N0YXRlPWZ1bmN0aW9uKHQpe3RoaXMuZXJyb3JzPXQuZXJyb3JzLHRoaXMuaW1wb3J0TGV4ZXJTdGF0ZSh0LmxleGVyU3RhdGUpLHRoaXMuUlVMRV9TVEFDSz10LlJVTEVfU1RBQ0t9LHQucHJvdG90eXBlLnJ1bGVJbnZvY2F0aW9uU3RhdGVVcGRhdGU9ZnVuY3Rpb24odCxlLG4pe3RoaXMuUlVMRV9PQ0NVUlJFTkNFX1NUQUNLLnB1c2gobiksdGhpcy5SVUxFX1NUQUNLLnB1c2godCksdGhpcy5jc3RJbnZvY2F0aW9uU3RhdGVVcGRhdGUoZSx0KX0sdC5wcm90b3R5cGUuaXNCYWNrVHJhY2tpbmc9ZnVuY3Rpb24oKXtyZXR1cm4hci5pc0VtcHR5KHRoaXMuaXNCYWNrVHJhY2tpbmdTdGFjayl9LHQucHJvdG90eXBlLmdldEN1cnJSdWxlRnVsbE5hbWU9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmdldExhc3RFeHBsaWNpdFJ1bGVTaG9ydE5hbWUoKTtyZXR1cm4gdGhpcy5zaG9ydFJ1bGVOYW1lVG9GdWxsLmdldCh0KX0sdC5wcm90b3R5cGUuc2hvcnRSdWxlTmFtZVRvRnVsbE5hbWU9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuc2hvcnRSdWxlTmFtZVRvRnVsbC5nZXQodCl9LHQucHJvdG90eXBlLmlzQXRFbmRPZklucHV0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudG9rZW5NYXRjaGVyKHRoaXMuTEEoMSkscC5FT0YpfSx0LnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbigpe3RoaXMucmVzZXRMZXhlclN0YXRlKCksdGhpcy5pc0JhY2tUcmFja2luZ1N0YWNrPVtdLHRoaXMuZXJyb3JzPVtdLHRoaXMuUlVMRV9TVEFDSz1bXSx0aGlzLkxBU1RfRVhQTElDSVRfUlVMRV9TVEFDSz1bXSx0aGlzLkNTVF9TVEFDSz1bXSx0aGlzLlJVTEVfT0NDVVJSRU5DRV9TVEFDSz1bXX0sdH0oKTtlLlJlY29nbml6ZXJFbmdpbmU9Zn0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciByPW4oNiksaT1uKDApLG89bigxMiksYT1uKDMpLHM9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7fXJldHVybiB0LnByb3RvdHlwZS5pbml0RXJyb3JIYW5kbGVyPWZ1bmN0aW9uKHQpe3RoaXMuX2Vycm9ycz1bXSx0aGlzLmVycm9yTWVzc2FnZVByb3ZpZGVyPWkuZGVmYXVsdHModC5lcnJvck1lc3NhZ2VQcm92aWRlcixhLkRFRkFVTFRfUEFSU0VSX0NPTkZJRy5lcnJvck1lc3NhZ2VQcm92aWRlcil9LHQucHJvdG90eXBlLlNBVkVfRVJST1I9ZnVuY3Rpb24odCl7aWYoci5pc1JlY29nbml0aW9uRXhjZXB0aW9uKHQpKXJldHVybiB0LmNvbnRleHQ9e3J1bGVTdGFjazp0aGlzLmdldEh1bWFuUmVhZGFibGVSdWxlU3RhY2soKSxydWxlT2NjdXJyZW5jZVN0YWNrOmkuY2xvbmVBcnIodGhpcy5SVUxFX09DQ1VSUkVOQ0VfU1RBQ0spfSx0aGlzLl9lcnJvcnMucHVzaCh0KSx0O3Rocm93IEVycm9yKFwiVHJ5aW5nIHRvIHNhdmUgYW4gRXJyb3Igd2hpY2ggaXMgbm90IGEgUmVjb2duaXRpb25FeGNlcHRpb25cIil9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcImVycm9yc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gaS5jbG9uZUFycih0aGlzLl9lcnJvcnMpfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fZXJyb3JzPXR9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksdC5wcm90b3R5cGUucmFpc2VFYXJseUV4aXRFeGNlcHRpb249ZnVuY3Rpb24odCxlLG4pe2Zvcih2YXIgaT10aGlzLmdldEN1cnJSdWxlRnVsbE5hbWUoKSxhPXRoaXMuZ2V0R0FzdFByb2R1Y3Rpb25zKCkuZ2V0KGkpLHM9by5nZXRMb29rYWhlYWRQYXRoc0Zvck9wdGlvbmFsUHJvZCh0LGEsZSx0aGlzLm1heExvb2thaGVhZClbMF0sdT1bXSxjPTE7Yzx0aGlzLm1heExvb2thaGVhZDtjKyspdS5wdXNoKHRoaXMuTEEoYykpO3ZhciBwPXRoaXMuZXJyb3JNZXNzYWdlUHJvdmlkZXIuYnVpbGRFYXJseUV4aXRNZXNzYWdlKHtleHBlY3RlZEl0ZXJhdGlvblBhdGhzOnMsYWN0dWFsOnUscHJldmlvdXM6dGhpcy5MQSgwKSxjdXN0b21Vc2VyRGVzY3JpcHRpb246bixydWxlTmFtZTppfSk7dGhyb3cgdGhpcy5TQVZFX0VSUk9SKG5ldyByLkVhcmx5RXhpdEV4Y2VwdGlvbihwLHRoaXMuTEEoMSksdGhpcy5MQSgwKSkpfSx0LnByb3RvdHlwZS5yYWlzZU5vQWx0RXhjZXB0aW9uPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPXRoaXMuZ2V0Q3VyclJ1bGVGdWxsTmFtZSgpLGk9dGhpcy5nZXRHQXN0UHJvZHVjdGlvbnMoKS5nZXQobiksYT1vLmdldExvb2thaGVhZFBhdGhzRm9yT3IodCxpLHRoaXMubWF4TG9va2FoZWFkKSxzPVtdLHU9MTt1PD10aGlzLm1heExvb2thaGVhZDt1Kyspcy5wdXNoKHRoaXMuTEEodSkpO3ZhciBjPXRoaXMuTEEoMCkscD10aGlzLmVycm9yTWVzc2FnZVByb3ZpZGVyLmJ1aWxkTm9WaWFibGVBbHRNZXNzYWdlKHtleHBlY3RlZFBhdGhzUGVyQWx0OmEsYWN0dWFsOnMscHJldmlvdXM6YyxjdXN0b21Vc2VyRGVzY3JpcHRpb246ZSxydWxlTmFtZTp0aGlzLmdldEN1cnJSdWxlRnVsbE5hbWUoKX0pO3Rocm93IHRoaXMuU0FWRV9FUlJPUihuZXcgci5Ob1ZpYWJsZUFsdEV4Y2VwdGlvbihwLHRoaXMuTEEoMSksYykpfSx0fSgpO2UuRXJyb3JIYW5kbGVyPXN9LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgcj1uKDEzKSxpPW4oMCksbz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt9cmV0dXJuIHQucHJvdG90eXBlLmluaXRDb250ZW50QXNzaXN0PWZ1bmN0aW9uKCl7fSx0LnByb3RvdHlwZS5jb21wdXRlQ29udGVudEFzc2lzdD1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuZ2FzdFByb2R1Y3Rpb25zQ2FjaGUuZ2V0KHQpO2lmKGkuaXNVbmRlZmluZWQobikpdGhyb3cgRXJyb3IoXCJSdWxlIC0+XCIrdCtcIjwtIGRvZXMgbm90IGV4aXN0IGluIHRoaXMgZ3JhbW1hci5cIik7cmV0dXJuIHIubmV4dFBvc3NpYmxlVG9rZW5zQWZ0ZXIoW25dLGUsdGhpcy50b2tlbk1hdGNoZXIsdGhpcy5tYXhMb29rYWhlYWQpfSx0LnByb3RvdHlwZS5nZXROZXh0UG9zc2libGVUb2tlblR5cGVzPWZ1bmN0aW9uKHQpe3ZhciBlPWkuZmlyc3QodC5ydWxlU3RhY2spLG49dGhpcy5nZXRHQXN0UHJvZHVjdGlvbnMoKS5nZXQoZSk7cmV0dXJuIG5ldyByLk5leHRBZnRlclRva2VuV2Fsa2VyKG4sdCkuc3RhcnRXYWxraW5nKCl9LHR9KCk7ZS5Db250ZW50QXNzaXN0PW99LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgcj1uKDE3KTtlLmNyZWF0ZVN5bnRheERpYWdyYW1zQ29kZT1mdW5jdGlvbih0LGUpe3ZhciBuPXZvaWQgMD09PWU/e306ZSxpPW4ucmVzb3VyY2VCYXNlLG89dm9pZCAwPT09aT9cImh0dHBzOi8vdW5wa2cuY29tL2NoZXZyb3RhaW5AXCIrci5WRVJTSU9OK1wiL2RpYWdyYW1zL1wiOmksYT1uLmNzcztyZXR1cm5cIlxcblxceDNjIS0tIFRoaXMgaXMgYSBnZW5lcmF0ZWQgZmlsZSAtLVxceDNlXFxuPCFET0NUWVBFIGh0bWw+XFxuPG1ldGEgY2hhcnNldD1cXFwidXRmLThcXFwiPlxcbjxzdHlsZT5cXG4gIGJvZHkge1xcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiBoc2woMzAsIDIwJSwgOTUlKVxcbiAgfVxcbjwvc3R5bGU+XFxuXFxuXFxuPGxpbmsgcmVsPSdzdHlsZXNoZWV0JyBocmVmPSdcIisodm9pZCAwPT09YT9cImh0dHBzOi8vdW5wa2cuY29tL2NoZXZyb3RhaW5AXCIrci5WRVJTSU9OK1wiL2RpYWdyYW1zL2RpYWdyYW1zLmNzc1wiOmEpK1wiJz5cXG5cXG48c2NyaXB0IHNyYz0nXCIrbytcInZlbmRvci9yYWlscm9hZC1kaWFncmFtcy5qcyc+PFxcL3NjcmlwdD5cXG48c2NyaXB0IHNyYz0nXCIrbytcInNyYy9kaWFncmFtc19idWlsZGVyLmpzJz48XFwvc2NyaXB0PlxcbjxzY3JpcHQgc3JjPSdcIitvK1wic3JjL2RpYWdyYW1zX2JlaGF2aW9yLmpzJz48XFwvc2NyaXB0PlxcbjxzY3JpcHQgc3JjPSdcIitvKydzcmMvbWFpbi5qc1xcJz48XFwvc2NyaXB0PlxcblxcbjxkaXYgaWQ9XCJkaWFncmFtc1wiIGFsaWduPVwiY2VudGVyXCI+PC9kaXY+ICAgIFxcblxcbjxzY3JpcHQ+XFxuICAgIHdpbmRvdy5zZXJpYWxpemVkR3JhbW1hciA9ICcrSlNPTi5zdHJpbmdpZnkodCxudWxsLFwiICBcIikrJztcXG48XFwvc2NyaXB0PlxcblxcbjxzY3JpcHQ+XFxuICAgIHZhciBkaWFncmFtc0RpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGlhZ3JhbXNcIik7XFxuICAgIG1haW4uZHJhd0RpYWdyYW1zRnJvbVNlcmlhbGl6ZWRHcmFtbWFyKHNlcmlhbGl6ZWRHcmFtbWFyLCBkaWFncmFtc0Rpdik7XFxuPFxcL3NjcmlwdD5cXG4nfX0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciByPW4oNDEpO2UuZ2VuZXJhdGVQYXJzZXJGYWN0b3J5PWZ1bmN0aW9uKHQpe3ZhciBlPXIuZ2VuV3JhcHBlckZ1bmN0aW9uKHtuYW1lOnQubmFtZSxydWxlczp0LnJ1bGVzfSksaT1uZXcgRnVuY3Rpb24oXCJ0b2tlblZvY2FidWxhcnlcIixcImNvbmZpZ1wiLFwiY2hldnJvdGFpblwiLGUpO3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gaSh0LnRva2VuVm9jYWJ1bGFyeSxlLG4oMTgpKX19LGUuZ2VuZXJhdGVQYXJzZXJNb2R1bGU9ZnVuY3Rpb24odCl7cmV0dXJuIHIuZ2VuVW1kTW9kdWxlKHtuYW1lOnQubmFtZSxydWxlczp0LnJ1bGVzfSl9fSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIHI9bigwKSxpPW4oMiksbz1uKDEpLGE9XCJcXG5cIjtmdW5jdGlvbiBzKHQpe3JldHVyblwiXFxuZnVuY3Rpb24gXCIrdC5uYW1lK1wiKHRva2VuVm9jYWJ1bGFyeSwgY29uZmlnKSB7XFxuICAgIC8vIGludm9rZSBzdXBlciBjb25zdHJ1Y3RvclxcbiAgICAvLyBObyBzdXBwb3J0IGZvciBlbWJlZGRlZCBhY3Rpb25zIGN1cnJlbnRseSwgc28gd2UgY2FuICdoYXJkY29kZSdcXG4gICAgLy8gVGhlIHVzZSBvZiBDc3RQYXJzZXIuXFxuICAgIGNoZXZyb3RhaW4uQ3N0UGFyc2VyLmNhbGwodGhpcywgdG9rZW5Wb2NhYnVsYXJ5LCBjb25maWcpXFxuXFxuICAgIGNvbnN0ICQgPSB0aGlzXFxuXFxuICAgIFwiK3UodC5ydWxlcykrXCJcXG5cXG4gICAgLy8gdmVyeSBpbXBvcnRhbnQgdG8gY2FsbCB0aGlzIGFmdGVyIGFsbCB0aGUgcnVsZXMgaGF2ZSBiZWVuIGRlZmluZWQuXFxuICAgIC8vIG90aGVyd2lzZSB0aGUgcGFyc2VyIG1heSBub3Qgd29yayBjb3JyZWN0bHkgYXMgaXQgd2lsbCBsYWNrIGluZm9ybWF0aW9uXFxuICAgIC8vIGRlcml2ZWQgZHVyaW5nIHRoZSBzZWxmIGFuYWx5c2lzIHBoYXNlLlxcbiAgICB0aGlzLnBlcmZvcm1TZWxmQW5hbHlzaXModGhpcylcXG59XFxuXFxuLy8gaW5oZXJpdGFuY2UgYXMgaW1wbGVtZW50ZWQgaW4gamF2YXNjcmlwdCBpbiB0aGUgcHJldmlvdXMgZGVjYWRlLi4uIDooXFxuXCIrdC5uYW1lK1wiLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoY2hldnJvdGFpbi5Dc3RQYXJzZXIucHJvdG90eXBlKVxcblwiK3QubmFtZStcIi5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBcIit0Lm5hbWUrXCIgICAgXFxuICAgIFwifWZ1bmN0aW9uIHUodCl7cmV0dXJuIHIubWFwKHQsZnVuY3Rpb24odCl7cmV0dXJuIGModCwxKX0pLmpvaW4oXCJcXG5cIil9ZnVuY3Rpb24gYyh0LGUpe3ZhciBuPXkoZSwnJC5SVUxFKFwiJyt0Lm5hbWUrJ1wiLCBmdW5jdGlvbigpIHsnKSthO3JldHVybiBuKz1tKHQuZGVmaW5pdGlvbixlKzEpLG4rPXkoZSsxLFwifSlcIikrYX1mdW5jdGlvbiBwKHQsZSl7dmFyIG49aS50b2tlbk5hbWUodC50ZXJtaW5hbFR5cGUpO3JldHVybiB5KGUsXCIkLkNPTlNVTUVcIit0LmlkeCtcIih0aGlzLnRva2Vuc01hcC5cIituK1wiKVwiK2EpfWZ1bmN0aW9uIGwodCxlKXtyZXR1cm4geShlLFwiJC5TVUJSVUxFXCIrdC5pZHgrXCIoJC5cIit0Lm5vblRlcm1pbmFsTmFtZStcIilcIithKX1mdW5jdGlvbiBoKHQsZSl7dmFyIG49eShlLFwiJC5PUlwiK3QuaWR4K1wiKFtcIikrYTtyZXR1cm4gbis9ci5tYXAodC5kZWZpbml0aW9uLGZ1bmN0aW9uKHQpe3JldHVybiBmKHQsZSsxKX0pLmpvaW4oXCIsXCIrYSksbis9YSt5KGUsXCJdKVwiK2EpfWZ1bmN0aW9uIGYodCxlKXt2YXIgbj15KGUsXCJ7XCIpK2E7cmV0dXJuIHQubmFtZSYmKG4rPXkoZSsxLCdOQU1FOiBcIicrdC5uYW1lKydcIiwnKSthKSxuKz15KGUrMSxcIkFMVDogZnVuY3Rpb24oKSB7XCIpK2Esbis9bSh0LmRlZmluaXRpb24sZSsxKSxuKz15KGUrMSxcIn1cIikrYSxuKz15KGUsXCJ9XCIpfWZ1bmN0aW9uIGQodCxlLG4pe3ZhciByPXkobixcIiQuXCIrKHQrZS5pZHgpK1wiKFwiKTtyZXR1cm4gZS5uYW1lfHxlLnNlcGFyYXRvcj8ocis9XCJ7XCIrYSxlLm5hbWUmJihyKz15KG4rMSwnTkFNRTogXCInK2UubmFtZSsnXCInKStcIixcIithKSxlLnNlcGFyYXRvciYmKHIrPXkobisxLFwiU0VQOiB0aGlzLnRva2Vuc01hcC5cIitpLnRva2VuTmFtZShlLnNlcGFyYXRvcikpK1wiLFwiK2EpLHIrPVwiREVGOiBcIitFKGUuZGVmaW5pdGlvbixuKzIpK2Escis9eShuLFwifVwiKSthKTpyKz1FKGUuZGVmaW5pdGlvbixuKzEpLHIrPXkobixcIilcIikrYX1mdW5jdGlvbiBFKHQsZSl7dmFyIG49XCJmdW5jdGlvbigpIHtcIithO3JldHVybiBuKz1tKHQsZSksbis9eShlLFwifVwiKSthfWZ1bmN0aW9uIG0odCxlKXt2YXIgbj1cIlwiO3JldHVybiByLmZvckVhY2godCxmdW5jdGlvbih0KXtuKz1mdW5jdGlvbih0LGUpe2lmKHQgaW5zdGFuY2VvZiBvLk5vblRlcm1pbmFsKXJldHVybiBsKHQsZSk7aWYodCBpbnN0YW5jZW9mIG8uT3B0aW9uKXJldHVybiBkKFwiT1BUSU9OXCIsdCxlKTtpZih0IGluc3RhbmNlb2Ygby5SZXBldGl0aW9uTWFuZGF0b3J5KXJldHVybiBkKFwiQVRfTEVBU1RfT05FXCIsdCxlKTtpZih0IGluc3RhbmNlb2Ygby5SZXBldGl0aW9uTWFuZGF0b3J5V2l0aFNlcGFyYXRvcilyZXR1cm4gZChcIkFUX0xFQVNUX09ORV9TRVBcIix0LGUpO2lmKHQgaW5zdGFuY2VvZiBvLlJlcGV0aXRpb25XaXRoU2VwYXJhdG9yKXJldHVybiBkKFwiTUFOWV9TRVBcIix0LGUpO2lmKHQgaW5zdGFuY2VvZiBvLlJlcGV0aXRpb24pcmV0dXJuIGQoXCJNQU5ZXCIsdCxlKTtpZih0IGluc3RhbmNlb2Ygby5BbHRlcm5hdGlvbilyZXR1cm4gaCh0LGUpO2lmKHQgaW5zdGFuY2VvZiBvLlRlcm1pbmFsKXJldHVybiBwKHQsZSk7aWYodCBpbnN0YW5jZW9mIG8uRmxhdClyZXR1cm4gbSh0LmRlZmluaXRpb24sZSk7dGhyb3cgRXJyb3IoXCJub24gZXhoYXVzdGl2ZSBtYXRjaFwiKX0odCxlKzEpfSksbn1mdW5jdGlvbiB5KHQsZSl7cmV0dXJuIEFycmF5KDQqdCsxKS5qb2luKFwiIFwiKStlfWUuZ2VuVW1kTW9kdWxlPWZ1bmN0aW9uKHQpe3JldHVyblwiXFxuKGZ1bmN0aW9uIChyb290LCBmYWN0b3J5KSB7XFxuICAgIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcXG4gICAgICAgIC8vIEFNRC4gUmVnaXN0ZXIgYXMgYW4gYW5vbnltb3VzIG1vZHVsZS5cXG4gICAgICAgIGRlZmluZShbJ2NoZXZyb3RhaW4nXSwgZmFjdG9yeSk7XFxuICAgIH0gZWxzZSBpZiAodHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcgJiYgbW9kdWxlLmV4cG9ydHMpIHtcXG4gICAgICAgIC8vIE5vZGUuIERvZXMgbm90IHdvcmsgd2l0aCBzdHJpY3QgQ29tbW9uSlMsIGJ1dFxcbiAgICAgICAgLy8gb25seSBDb21tb25KUy1saWtlIGVudmlyb25tZW50cyB0aGF0IHN1cHBvcnQgbW9kdWxlLmV4cG9ydHMsXFxuICAgICAgICAvLyBsaWtlIE5vZGUuXFxuICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkocmVxdWlyZSgnY2hldnJvdGFpbicpKTtcXG4gICAgfSBlbHNlIHtcXG4gICAgICAgIC8vIEJyb3dzZXIgZ2xvYmFscyAocm9vdCBpcyB3aW5kb3cpXFxuICAgICAgICByb290LnJldHVybkV4cG9ydHMgPSBmYWN0b3J5KHJvb3QuYik7XFxuICAgIH1cXG59KHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyA/IHNlbGYgOiB0aGlzLCBmdW5jdGlvbiAoY2hldnJvdGFpbikge1xcblxcblwiK3ModCkrXCJcXG4gICAgXFxucmV0dXJuIHtcXG4gICAgXCIrdC5uYW1lK1wiOiBcIit0Lm5hbWUrXCIgXFxufVxcbn0pKTtcXG5cIn0sZS5nZW5XcmFwcGVyRnVuY3Rpb249ZnVuY3Rpb24odCl7cmV0dXJuXCIgICAgXFxuXCIrcyh0KStcIlxcbnJldHVybiBuZXcgXCIrdC5uYW1lK1wiKHRva2VuVm9jYWJ1bGFyeSwgY29uZmlnKSAgICBcXG5cIn0sZS5nZW5DbGFzcz1zLGUuZ2VuQWxsUnVsZXM9dSxlLmdlblJ1bGU9YyxlLmdlblRlcm1pbmFsPXAsZS5nZW5Ob25UZXJtaW5hbD1sLGUuZ2VuQWx0ZXJuYXRpb249aCxlLmdlblNpbmdsZUFsdD1mfV0pfSk7XG5leHBvcnQgdmFyIGNoZXZyb3RhaW4gPSB3aW5kb3cuY2hldnJvdGFpbjtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/three/examples/jsm/libs/chevrotain.module.min.js\n");

/***/ }),

/***/ "./node_modules/three/examples/jsm/libs/fflate.module.min.js":
/*!*******************************************************************!*\
  !*** ./node_modules/three/examples/jsm/libs/fflate.module.min.js ***!
  \*******************************************************************/
/*! exports provided: AsyncCompress, AsyncDecompress, AsyncDeflate, AsyncGunzip, AsyncGzip, AsyncInflate, AsyncUnzipInflate, AsyncUnzlib, AsyncZipDeflate, AsyncZlib, Compress, DecodeUTF8, Decompress, Deflate, EncodeUTF8, Gunzip, Gzip, Inflate, Unzip, UnzipInflate, UnzipPassThrough, Unzlib, Zip, ZipDeflate, ZipPassThrough, Zlib, compress, compressSync, decompress, decompressSync, deflate, deflateSync, gunzip, gunzipSync, gzip, gzipSync, inflate, inflateSync, strFromU8, strToU8, unzip, unzipSync, unzlib, unzlibSync, zip, zipSync, zlib, zlibSync, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AsyncCompress\", function() { return Rn; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AsyncDecompress\", function() { return et; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AsyncDeflate\", function() { return En; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AsyncGunzip\", function() { return Hn; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AsyncGzip\", function() { return Rn; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AsyncInflate\", function() { return en; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AsyncUnzipInflate\", function() { return pt; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AsyncUnzlib\", function() { return Yn; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AsyncZipDeflate\", function() { return ht; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AsyncZlib\", function() { return nt; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Compress\", function() { return qr; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"DecodeUTF8\", function() { return ot; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Decompress\", function() { return Jn; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Deflate\", function() { return rr; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"EncodeUTF8\", function() { return ft; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Gunzip\", function() { return Wr; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Gzip\", function() { return qr; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Inflate\", function() { return J; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Unzip\", function() { return gt; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"UnzipInflate\", function() { return ct; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"UnzipPassThrough\", function() { return dn; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Unzlib\", function() { return jr; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Zip\", function() { return ut; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ZipDeflate\", function() { return st; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ZipPassThrough\", function() { return Br; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Zlib\", function() { return on; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"compress\", function() { return qn; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"compressSync\", function() { return Hr; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"decompress\", function() { return it; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"decompressSync\", function() { return at; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"deflate\", function() { return Pn; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"deflateSync\", function() { return kr; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"gunzip\", function() { return Wn; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"gunzipSync\", function() { return Yr; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"gzip\", function() { return qn; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"gzipSync\", function() { return Hr; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"inflate\", function() { return an; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"inflateSync\", function() { return xr; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"strFromU8\", function() { return un; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"strToU8\", function() { return or; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"unzip\", function() { return wt; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"unzipSync\", function() { return yt; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"unzlib\", function() { return jn; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"unzlibSync\", function() { return Jr; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"zip\", function() { return lt; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"zipSync\", function() { return vt; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"zlib\", function() { return tt; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"zlibSync\", function() { return fn; });\n/*!\nfflate - fast JavaScript compression/decompression\n<https://101arrowz.github.io/fflate>\nLicensed under MIT. https://github.com/101arrowz/fflate/blob/master/LICENSE\n*/\nvar gn={},bn=function(n,r,t,e,i){var a=gn[r]||(gn[r]=URL.createObjectURL(new Blob([n],{type:\"text/javascript\"}))),o=new Worker(a);return o.onerror=function(f){return i(f.error,null)},o.onmessage=function(f){return i(null,f.data)},o.postMessage(t,e),o},A=Uint8Array,R=Uint16Array,nr=Uint32Array,ur=new A([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),lr=new A([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Mr=new A([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),wn=function(n,r){for(var t=new R(31),e=0;e<31;++e)t[e]=r+=1<<n[e-1];for(var i=new nr(t[30]),e=1;e<30;++e)for(var a=t[e];a<t[e+1];++a)i[a]=a-t[e]<<5|e;return[t,i]},yn=wn(ur,2),Nr=yn[0],Ir=yn[1];Nr[28]=258,Ir[258]=28;for(var mn=wn(lr,0),zn=mn[0],Qr=mn[1],Ur=new R(32768),T=0;T<32768;++T){var ir=(T&43690)>>>1|(T&21845)<<1;ir=(ir&52428)>>>2|(ir&13107)<<2,ir=(ir&61680)>>>4|(ir&3855)<<4,Ur[T]=((ir&65280)>>>8|(ir&255)<<8)>>>1}for(var V=function(n,r,t){for(var e=n.length,i=0,a=new R(r);i<e;++i)++a[n[i]-1];var o=new R(r);for(i=0;i<r;++i)o[i]=o[i-1]+a[i-1]<<1;var f;if(t){f=new R(1<<r);var h=15-r;for(i=0;i<e;++i)if(n[i])for(var s=i<<4|n[i],u=r-n[i],l=o[n[i]-1]++<<u,p=l|(1<<u)-1;l<=p;++l)f[Ur[l]>>>h]=s}else for(f=new R(e),i=0;i<e;++i)n[i]&&(f[i]=Ur[o[n[i]-1]++]>>>15-n[i]);return f},tr=new A(288),T=0;T<144;++T)tr[T]=8;for(var T=144;T<256;++T)tr[T]=9;for(var T=256;T<280;++T)tr[T]=7;for(var T=280;T<288;++T)tr[T]=8;for(var vr=new A(32),T=0;T<32;++T)vr[T]=5;var xn=V(tr,9,0),An=V(tr,9,1),Dn=V(vr,5,0),Mn=V(vr,5,1),Gr=function(n){for(var r=n[0],t=1;t<n.length;++t)n[t]>r&&(r=n[t]);return r},X=function(n,r,t){var e=r/8|0;return(n[e]|n[e+1]<<8)>>(r&7)&t},Or=function(n,r){var t=r/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(r&7)},Cr=function(n){return(n/8|0)+(n&7&&1)},$=function(n,r,t){(r==null||r<0)&&(r=0),(t==null||t>n.length)&&(t=n.length);var e=new(n instanceof R?R:n instanceof nr?nr:A)(t-r);return e.set(n.subarray(r,t)),e},Fr=function(n,r,t){var e=n.length;if(!e||t&&!t.l&&e<5)return r||new A(0);var i=!r||t,a=!t||t.i;t||(t={}),r||(r=new A(e*3));var o=function(Tr){var Dr=r.length;if(Tr>Dr){var hr=new A(Math.max(Dr*2,Tr));hr.set(r),r=hr}},f=t.f||0,h=t.p||0,s=t.b||0,u=t.l,l=t.d,p=t.m,y=t.n,c=e*8;do{if(!u){t.f=f=X(n,h,1);var g=X(n,h+1,3);if(h+=3,g)if(g==1)u=An,l=Mn,p=9,y=5;else if(g==2){var m=X(n,h,31)+257,D=X(n,h+10,15)+4,C=m+X(n,h+5,31)+1;h+=14;for(var U=new A(C),x=new A(19),v=0;v<D;++v)x[Mr[v]]=X(n,h+v*3,7);h+=D*3;var E=Gr(x),S=(1<<E)-1;if(!a&&h+C*(E+7)>c)break;for(var K=V(x,E,1),v=0;v<C;){var I=K[X(n,h,S)];h+=I&15;var w=I>>>4;if(w<16)U[v++]=w;else{var Z=0,B=0;for(w==16?(B=3+X(n,h,3),h+=2,Z=U[v-1]):w==17?(B=3+X(n,h,7),h+=3):w==18&&(B=11+X(n,h,127),h+=7);B--;)U[v++]=Z}}var G=U.subarray(0,m),k=U.subarray(m);p=Gr(G),y=Gr(k),u=V(G,p,1),l=V(k,y,1)}else throw\"invalid block type\";else{var w=Cr(h)+4,M=n[w-4]|n[w-3]<<8,z=w+M;if(z>e){if(a)throw\"unexpected EOF\";break}i&&o(s+M),r.set(n.subarray(w,z),s),t.b=s+=M,t.p=h=z*8;continue}if(h>c)throw\"unexpected EOF\"}i&&o(s+131072);for(var O=(1<<p)-1,H=(1<<y)-1,N=p+y+18;a||h+N<c;){var Z=u[Or(n,h)&O],Q=Z>>>4;if(h+=Z&15,h>c)throw\"unexpected EOF\";if(!Z)throw\"invalid length/literal\";if(Q<256)r[s++]=Q;else if(Q==256){u=null;break}else{var W=Q-254;if(Q>264){var v=Q-257,d=ur[v];W=X(n,h,(1<<d)-1)+Nr[v],h+=d}var _=l[Or(n,h)&H],j=_>>>4;if(!_)throw\"invalid distance\";h+=_&15;var k=zn[j];if(j>3){var d=lr[j];k+=Or(n,h)&(1<<d)-1,h+=d}if(h>c)throw\"unexpected EOF\";i&&o(s+131072);for(var q=s+W;s<q;s+=4)r[s]=r[s-k],r[s+1]=r[s+1-k],r[s+2]=r[s+2-k],r[s+3]=r[s+3-k];s=q}}t.l=u,t.p=h,t.b=s,u&&(f=1,t.m=p,t.d=l,t.n=y)}while(!f);return s==r.length?r:$(r,0,s)},b=function(n,r,t){t<<=r&7;var e=r/8|0;n[e]|=t,n[e+1]|=t>>>8},cr=function(n,r,t){t<<=r&7;var e=r/8|0;n[e]|=t,n[e+1]|=t>>>8,n[e+2]|=t>>>16},Er=function(n,r){for(var t=[],e=0;e<n.length;++e)n[e]&&t.push({s:e,f:n[e]});var i=t.length,a=t.slice();if(!i)return[er,0];if(i==1){var o=new A(t[0].s+1);return o[t[0].s]=1,[o,1]}t.sort(function(C,U){return C.f-U.f}),t.push({s:-1,f:25001});var f=t[0],h=t[1],s=0,u=1,l=2;for(t[0]={s:-1,f:f.f+h.f,l:f,r:h};u!=i-1;)f=t[t[s].f<t[l].f?s++:l++],h=t[s!=u&&t[s].f<t[l].f?s++:l++],t[u++]={s:-1,f:f.f+h.f,l:f,r:h};for(var p=a[0].s,e=1;e<i;++e)a[e].s>p&&(p=a[e].s);var y=new R(p+1),c=Pr(t[u-1],y,0);if(c>r){var e=0,g=0,w=c-r,M=1<<w;for(a.sort(function(U,x){return y[x.s]-y[U.s]||U.f-x.f});e<i;++e){var z=a[e].s;if(y[z]>r)g+=M-(1<<c-y[z]),y[z]=r;else break}for(g>>>=w;g>0;){var m=a[e].s;y[m]<r?g-=1<<r-y[m]++-1:++e}for(;e>=0&&g;--e){var D=a[e].s;y[D]==r&&(--y[D],++g)}c=r}return[new A(y),c]},Pr=function(n,r,t){return n.s==-1?Math.max(Pr(n.l,r,t+1),Pr(n.r,r,t+1)):r[n.s]=t},Vr=function(n){for(var r=n.length;r&&!n[--r];);for(var t=new R(++r),e=0,i=n[0],a=1,o=function(h){t[e++]=h},f=1;f<=r;++f)if(n[f]==i&&f!=r)++a;else{if(!i&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(i),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(i);a=1,i=n[f]}return[t.subarray(0,e),r]},pr=function(n,r){for(var t=0,e=0;e<r.length;++e)t+=n[e]*r[e];return t},Sr=function(n,r,t){var e=t.length,i=Cr(r+2);n[i]=e&255,n[i+1]=e>>>8,n[i+2]=n[i]^255,n[i+3]=n[i+1]^255;for(var a=0;a<e;++a)n[i+a+4]=t[a];return(i+4+e)*8},Xr=function(n,r,t,e,i,a,o,f,h,s,u){b(r,u++,t),++i[256];for(var l=Er(i,15),p=l[0],y=l[1],c=Er(a,15),g=c[0],w=c[1],M=Vr(p),z=M[0],m=M[1],D=Vr(g),C=D[0],U=D[1],x=new R(19),v=0;v<z.length;++v)x[z[v]&31]++;for(var v=0;v<C.length;++v)x[C[v]&31]++;for(var E=Er(x,7),S=E[0],K=E[1],I=19;I>4&&!S[Mr[I-1]];--I);var Z=s+5<<3,B=pr(i,tr)+pr(a,vr)+o,G=pr(i,p)+pr(a,g)+o+14+3*I+pr(x,S)+(2*x[16]+3*x[17]+7*x[18]);if(Z<=B&&Z<=G)return Sr(r,u,n.subarray(h,h+s));var k,O,H,N;if(b(r,u,1+(G<B)),u+=2,G<B){k=V(p,y,0),O=p,H=V(g,w,0),N=g;var Q=V(S,K,0);b(r,u,m-257),b(r,u+5,U-1),b(r,u+10,I-4),u+=14;for(var v=0;v<I;++v)b(r,u+3*v,S[Mr[v]]);u+=3*I;for(var W=[z,C],d=0;d<2;++d)for(var _=W[d],v=0;v<_.length;++v){var j=_[v]&31;b(r,u,Q[j]),u+=S[j],j>15&&(b(r,u,_[v]>>>5&127),u+=_[v]>>>12)}}else k=xn,O=tr,H=Dn,N=vr;for(var v=0;v<f;++v)if(e[v]>255){var j=e[v]>>>18&31;cr(r,u,k[j+257]),u+=O[j+257],j>7&&(b(r,u,e[v]>>>23&31),u+=ur[j]);var q=e[v]&31;cr(r,u,H[q]),u+=N[q],q>3&&(cr(r,u,e[v]>>>5&8191),u+=lr[q])}else cr(r,u,k[e[v]]),u+=O[e[v]];return cr(r,u,k[256]),u+O[256]},Un=new nr([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),er=new A(0),Cn=function(n,r,t,e,i,a){var o=n.length,f=new A(e+o+5*(1+Math.ceil(o/7e3))+i),h=f.subarray(e,f.length-i),s=0;if(!r||o<8)for(var u=0;u<=o;u+=65535){var l=u+65535;l<o?s=Sr(h,s,n.subarray(u,l)):(h[u]=a,s=Sr(h,s,n.subarray(u,o)))}else{for(var p=Un[r-1],y=p>>>13,c=p&8191,g=(1<<t)-1,w=new R(32768),M=new R(g+1),z=Math.ceil(t/3),m=2*z,D=function(Kr){return(n[Kr]^n[Kr+1]<<z^n[Kr+2]<<m)&g},C=new nr(25e3),U=new R(288),x=new R(32),v=0,E=0,u=0,S=0,K=0,I=0;u<o;++u){var Z=D(u),B=u&32767,G=M[Z];if(w[B]=G,M[Z]=B,K<=u){var k=o-u;if((v>7e3||S>24576)&&k>423){s=Xr(n,h,0,C,U,x,E,S,I,u-I,s),S=v=E=0,I=u;for(var O=0;O<286;++O)U[O]=0;for(var O=0;O<30;++O)x[O]=0}var H=2,N=0,Q=c,W=B-G&32767;if(k>2&&Z==D(u-W))for(var d=Math.min(y,k)-1,_=Math.min(32767,u),j=Math.min(258,k);W<=_&&--Q&&B!=G;){if(n[u+H]==n[u+H-W]){for(var q=0;q<j&&n[u+q]==n[u+q-W];++q);if(q>H){if(H=q,N=W,q>d)break;for(var Tr=Math.min(W,q-2),Dr=0,O=0;O<Tr;++O){var hr=u-W+O+32768&32767,_n=w[hr],vn=hr-_n+32768&32767;vn>Dr&&(Dr=vn,G=hr)}}}B=G,G=w[B],W+=B-G+32768&32767}if(N){C[S++]=268435456|Ir[H]<<18|Qr[N];var cn=Ir[H]&31,pn=Qr[N]&31;E+=ur[cn]+lr[pn],++U[257+cn],++x[pn],K=u+H,++v}else C[S++]=n[u],++U[n[u]]}}s=Xr(n,h,a,C,U,x,E,S,I,u-I,s),!a&&s&7&&(s=Sr(h,s+1,er))}return $(f,0,e+Cr(s)+i)},Fn=function(){for(var n=new nr(256),r=0;r<256;++r){for(var t=r,e=9;--e;)t=(t&1&&3988292384)^t>>>1;n[r]=t}return n}(),gr=function(){var n=-1;return{p:function(r){for(var t=n,e=0;e<r.length;++e)t=Fn[t&255^r[e]]^t>>>8;n=t},d:function(){return~n}}},$r=function(){var n=1,r=0;return{p:function(t){for(var e=n,i=r,a=t.length,o=0;o!=a;){for(var f=Math.min(o+2655,a);o<f;++o)i+=e+=t[o];e=(e&65535)+15*(e>>16),i=(i&65535)+15*(i>>16)}n=e,r=i},d:function(){return n%=65521,r%=65521,(n>>>8<<16|(r&255)<<8|r>>>8)+((n&255)<<23)*2}}},sr=function(n,r,t,e,i){return Cn(n,r.level==null?6:r.level,r.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):12+r.mem,t,e,!i)},Zr=function(n,r){var t={};for(var e in n)t[e]=n[e];for(var e in r)t[e]=r[e];return t},Sn=function(n,r,t){for(var e=n(),i=n.toString(),a=i.slice(i.indexOf(\"[\")+1,i.lastIndexOf(\"]\")).replace(/ /g,\"\").split(\",\"),o=0;o<e.length;++o){var f=e[o],h=a[o];if(typeof f==\"function\"){r+=\";\"+h+\"=\";var s=f.toString();if(f.prototype)if(s.indexOf(\"[native code]\")!=-1){var u=s.indexOf(\" \",8)+1;r+=s.slice(u,s.indexOf(\"(\",u))}else{r+=s;for(var l in f.prototype)r+=\";\"+h+\".prototype.\"+l+\"=\"+f.prototype[l].toString()}else r+=s}else t[h]=f}return[r,t]},Rr=[],rt=function(n){var r=[];for(var t in n)(n[t]instanceof A||n[t]instanceof R||n[t]instanceof nr)&&r.push((n[t]=new n[t].constructor(n[t])).buffer);return r},Zn=function(n,r,t,e){var i;if(!Rr[t]){for(var a=\"\",o={},f=n.length-1,h=0;h<f;++h)i=Sn(n[h],a,o),a=i[0],o=i[1];Rr[t]=Sn(n[f],a,o)}var s=Zr({},Rr[t][1]);return bn(Rr[t][0]+\";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage=\"+r.toString()+\"}\",t,s,rt(s),e)},wr=function(){return[A,R,nr,ur,lr,Mr,Nr,zn,An,Mn,Ur,V,Gr,X,Or,Cr,$,Fr,xr,ar,Lr]},yr=function(){return[A,R,nr,ur,lr,Mr,Ir,Qr,xn,tr,Dn,vr,Ur,Un,er,V,b,cr,Er,Pr,Vr,pr,Sr,Xr,Cr,$,Cn,sr,kr,ar]},kn=function(){return[_r,rn,F,gr,Fn]},Bn=function(){return[br,Gn]},Tn=function(){return[nn,F,$r]},In=function(){return[On]},ar=function(n){return postMessage(n,[n.buffer])},Lr=function(n){return n&&n.size&&new A(n.size)},mr=function(n,r,t,e,i,a){var o=Zn(t,e,i,function(f,h){o.terminate(),a(f,h)});return o.postMessage([n,r],r.consume?[n.buffer]:[]),function(){o.terminate()}},L=function(n){return n.ondata=function(r,t){return postMessage([r,t],[r.buffer])},function(r){return n.push(r.data[0],r.data[1])}},zr=function(n,r,t,e,i){var a,o=Zn(n,e,i,function(f,h){f?(o.terminate(),r.ondata.call(r,f)):(h[1]&&o.terminate(),r.ondata.call(r,f,h[0],h[1]))});o.postMessage(t),r.push=function(f,h){if(a)throw\"stream finished\";if(!r.ondata)throw\"no stream handler\";o.postMessage([f,a=h],[f.buffer])},r.terminate=function(){o.terminate()}},Y=function(n,r){return n[r]|n[r+1]<<8},P=function(n,r){return(n[r]|n[r+1]<<8|n[r+2]<<16)+(n[r+3]<<23)*2},dr=function(n,r){return P(n,r)|P(n,r)*4294967296},F=function(n,r,t){for(;t;++r)n[r]=t,t>>>=8},_r=function(n,r){var t=r.filename;if(n[0]=31,n[1]=139,n[2]=8,n[8]=r.level<2?4:r.level==9?2:0,n[9]=3,r.mtime!=0&&F(n,4,Math.floor(new Date(r.mtime||Date.now())/1e3)),t){n[3]=8;for(var e=0;e<=t.length;++e)n[e+10]=t.charCodeAt(e)}},br=function(n){if(n[0]!=31||n[1]!=139||n[2]!=8)throw\"invalid gzip data\";var r=n[3],t=10;r&4&&(t+=n[10]|(n[11]<<8)+2);for(var e=(r>>3&1)+(r>>4&1);e>0;e-=!n[t++]);return t+(r&2)},Gn=function(n){var r=n.length;return(n[r-4]|n[r-3]<<8|n[r-2]<<16)+2*(n[r-1]<<23)},rn=function(n){return 10+(n.filename&&n.filename.length+1||0)},nn=function(n,r){var t=r.level,e=t==0?0:t<6?1:t==9?3:2;n[0]=120,n[1]=e<<6|(e?32-2*e:1)},On=function(n){if((n[0]&15)!=8||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw\"invalid zlib data\";if(n[1]&32)throw\"invalid zlib data: preset dictionaries not supported\"};function tn(n,r){return!r&&typeof n==\"function\"&&(r=n,n={}),this.ondata=r,n}var rr=function(){function n(r,t){!t&&typeof r==\"function\"&&(t=r,r={}),this.ondata=t,this.o=r||{}}return n.prototype.p=function(r,t){this.ondata(sr(r,this.o,0,0,!t),t)},n.prototype.push=function(r,t){if(this.d)throw\"stream finished\";if(!this.ondata)throw\"no stream handler\";this.d=t,this.p(r,t||!1)},n}(),En=function(){function n(r,t){zr([yr,function(){return[L,rr]}],this,tn.call(this,r,t),function(e){var i=new rr(e.data);onmessage=L(i)},6)}return n}();function Pn(n,r,t){if(t||(t=r,r={}),typeof t!=\"function\")throw\"no callback\";return mr(n,r,[yr],function(e){return ar(kr(e.data[0],e.data[1]))},0,t)}function kr(n,r){return sr(n,r||{},0,0)}var J=function(){function n(r){this.s={},this.p=new A(0),this.ondata=r}return n.prototype.e=function(r){if(this.d)throw\"stream finished\";if(!this.ondata)throw\"no stream handler\";var t=this.p.length,e=new A(t+r.length);e.set(this.p),e.set(r,t),this.p=e},n.prototype.c=function(r){this.d=this.s.i=r||!1;var t=this.s.b,e=Fr(this.p,this.o,this.s);this.ondata($(e,t,this.s.b),this.d),this.o=$(e,this.s.b-32768),this.s.b=this.o.length,this.p=$(this.p,this.s.p/8|0),this.s.p&=7},n.prototype.push=function(r,t){this.e(r),this.c(t)},n}(),en=function(){function n(r){this.ondata=r,zr([wr,function(){return[L,J]}],this,0,function(){var t=new J;onmessage=L(t)},7)}return n}();function an(n,r,t){if(t||(t=r,r={}),typeof t!=\"function\")throw\"no callback\";return mr(n,r,[wr],function(e){return ar(xr(e.data[0],Lr(e.data[1])))},1,t)}function xr(n,r){return Fr(n,r)}var qr=function(){function n(r,t){this.c=gr(),this.l=0,this.v=1,rr.call(this,r,t)}return n.prototype.push=function(r,t){rr.prototype.push.call(this,r,t)},n.prototype.p=function(r,t){this.c.p(r),this.l+=r.length;var e=sr(r,this.o,this.v&&rn(this.o),t&&8,!t);this.v&&(_r(e,this.o),this.v=0),t&&(F(e,e.length-8,this.c.d()),F(e,e.length-4,this.l)),this.ondata(e,t)},n}(),Rn=function(){function n(r,t){zr([yr,kn,function(){return[L,rr,qr]}],this,tn.call(this,r,t),function(e){var i=new qr(e.data);onmessage=L(i)},8)}return n}();function qn(n,r,t){if(t||(t=r,r={}),typeof t!=\"function\")throw\"no callback\";return mr(n,r,[yr,kn,function(){return[Hr]}],function(e){return ar(Hr(e.data[0],e.data[1]))},2,t)}function Hr(n,r){r||(r={});var t=gr(),e=n.length;t.p(n);var i=sr(n,r,rn(r),8),a=i.length;return _r(i,r),F(i,a-8,t.d()),F(i,a-4,e),i}var Wr=function(){function n(r){this.v=1,J.call(this,r)}return n.prototype.push=function(r,t){if(J.prototype.e.call(this,r),this.v){var e=this.p.length>3?br(this.p):4;if(e>=this.p.length&&!t)return;this.p=this.p.subarray(e),this.v=0}if(t){if(this.p.length<8)throw\"invalid gzip stream\";this.p=this.p.subarray(0,-8)}J.prototype.c.call(this,t)},n}(),Hn=function(){function n(r){this.ondata=r,zr([wr,Bn,function(){return[L,J,Wr]}],this,0,function(){var t=new Wr;onmessage=L(t)},9)}return n}();function Wn(n,r,t){if(t||(t=r,r={}),typeof t!=\"function\")throw\"no callback\";return mr(n,r,[wr,Bn,function(){return[Yr]}],function(e){return ar(Yr(e.data[0]))},3,t)}function Yr(n,r){return Fr(n.subarray(br(n),-8),r||new A(Gn(n)))}var on=function(){function n(r,t){this.c=$r(),this.v=1,rr.call(this,r,t)}return n.prototype.push=function(r,t){rr.prototype.push.call(this,r,t)},n.prototype.p=function(r,t){this.c.p(r);var e=sr(r,this.o,this.v&&2,t&&4,!t);this.v&&(nn(e,this.o),this.v=0),t&&F(e,e.length-4,this.c.d()),this.ondata(e,t)},n}(),nt=function(){function n(r,t){zr([yr,Tn,function(){return[L,rr,on]}],this,tn.call(this,r,t),function(e){var i=new on(e.data);onmessage=L(i)},10)}return n}();function tt(n,r,t){if(t||(t=r,r={}),typeof t!=\"function\")throw\"no callback\";return mr(n,r,[yr,Tn,function(){return[fn]}],function(e){return ar(fn(e.data[0],e.data[1]))},4,t)}function fn(n,r){r||(r={});var t=$r();t.p(n);var e=sr(n,r,2,4);return nn(e,r),F(e,e.length-4,t.d()),e}var jr=function(){function n(r){this.v=1,J.call(this,r)}return n.prototype.push=function(r,t){if(J.prototype.e.call(this,r),this.v){if(this.p.length<2&&!t)return;this.p=this.p.subarray(2),this.v=0}if(t){if(this.p.length<4)throw\"invalid zlib stream\";this.p=this.p.subarray(0,-4)}J.prototype.c.call(this,t)},n}(),Yn=function(){function n(r){this.ondata=r,zr([wr,In,function(){return[L,J,jr]}],this,0,function(){var t=new jr;onmessage=L(t)},11)}return n}();function jn(n,r,t){if(t||(t=r,r={}),typeof t!=\"function\")throw\"no callback\";return mr(n,r,[wr,In,function(){return[Jr]}],function(e){return ar(Jr(e.data[0],Lr(e.data[1])))},5,t)}function Jr(n,r){return Fr((On(n),n.subarray(2,-4)),r)}var Jn=function(){function n(r){this.G=Wr,this.I=J,this.Z=jr,this.ondata=r}return n.prototype.push=function(r,t){if(!this.ondata)throw\"no stream handler\";if(this.s)this.s.push(r,t);else{if(this.p&&this.p.length){var e=new A(this.p.length+r.length);e.set(this.p),e.set(r,this.p.length)}else this.p=r;if(this.p.length>2){var i=this,a=function(){i.ondata.apply(i,arguments)};this.s=this.p[0]==31&&this.p[1]==139&&this.p[2]==8?new this.G(a):(this.p[0]&15)!=8||this.p[0]>>4>7||(this.p[0]<<8|this.p[1])%31?new this.I(a):new this.Z(a),this.s.push(this.p,t),this.p=null}}},n}(),et=function(){function n(r){this.G=Hn,this.I=en,this.Z=Yn,this.ondata=r}return n.prototype.push=function(r,t){Jn.prototype.push.call(this,r,t)},n}();function it(n,r,t){if(t||(t=r,r={}),typeof t!=\"function\")throw\"no callback\";return n[0]==31&&n[1]==139&&n[2]==8?Wn(n,r,t):(n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31?an(n,r,t):jn(n,r,t)}function at(n,r){return n[0]==31&&n[1]==139&&n[2]==8?Yr(n,r):(n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31?xr(n,r):Jr(n,r)}var sn=function(n,r,t,e){for(var i in n){var a=n[i],o=r+i;a instanceof A?t[o]=[a,e]:Array.isArray(a)?t[o]=[a[0],Zr(e,a[1])]:sn(a,o+\"/\",t,e)}},Kn=typeof TextEncoder!=\"undefined\"&&new TextEncoder,hn=typeof TextDecoder!=\"undefined\"&&new TextDecoder,Nn=0;try{hn.decode(er,{stream:!0}),Nn=1}catch(n){}var Qn=function(n){for(var r=\"\",t=0;;){var e=n[t++],i=(e>127)+(e>223)+(e>239);if(t+i>n.length)return[r,$(n,t-1)];i?i==3?(e=((e&15)<<18|(n[t++]&63)<<12|(n[t++]&63)<<6|n[t++]&63)-65536,r+=String.fromCharCode(55296|e>>10,56320|e&1023)):i&1?r+=String.fromCharCode((e&31)<<6|n[t++]&63):r+=String.fromCharCode((e&15)<<12|(n[t++]&63)<<6|n[t++]&63):r+=String.fromCharCode(e)}},ot=function(){function n(r){this.ondata=r,Nn?this.t=new TextDecoder:this.p=er}return n.prototype.push=function(r,t){if(!this.ondata)throw\"no callback\";if(t||(t=!1),this.t)return this.ondata(this.t.decode(r,{stream:!t}),t);var e=new A(this.p.length+r.length);e.set(this.p),e.set(r,this.p.length);var i=Qn(e),a=i[0],o=i[1];if(t&&o.length)throw\"invalid utf-8 data\";this.p=o,this.ondata(a,t)},n}(),ft=function(){function n(r){this.ondata=r}return n.prototype.push=function(r,t){if(!this.ondata)throw\"no callback\";this.ondata(or(r),t||!1)},n}();function or(n,r){if(r){for(var t=new A(n.length),e=0;e<n.length;++e)t[e]=n.charCodeAt(e);return t}if(Kn)return Kn.encode(n);for(var i=n.length,a=new A(n.length+(n.length>>1)),o=0,f=function(u){a[o++]=u},e=0;e<i;++e){if(o+5>a.length){var h=new A(o+8+(i-e<<1));h.set(a),a=h}var s=n.charCodeAt(e);s<128||r?f(s):s<2048?(f(192|s>>>6),f(128|s&63)):s>55295&&s<57344?(s=65536+(s&1023<<10)|n.charCodeAt(++e)&1023,f(240|s>>>18),f(128|s>>>12&63),f(128|s>>>6&63),f(128|s&63)):(f(224|s>>>12),f(128|s>>>6&63),f(128|s&63))}return $(a,0,o)}function un(n,r){if(r){for(var t=\"\",e=0;e<n.length;e+=16384)t+=String.fromCharCode.apply(null,n.subarray(e,e+16384));return t}else{if(hn)return hn.decode(n);var i=Qn(n),a=i[0],o=i[1];if(o.length)throw\"invalid utf-8 data\";return a}}var Vn=function(n){return n==1?3:n<6?2:n==9?1:0},Xn=function(n,r){return r+30+Y(n,r+26)+Y(n,r+28)},$n=function(n,r,t){var e=Y(n,r+28),i=un(n.subarray(r+46,r+46+e),!(Y(n,r+8)&2048)),a=r+46+e,o=P(n,r+20),f=t&&o==4294967295?Ln(n,a):[o,P(n,r+24),P(n,r+42)],h=f[0],s=f[1],u=f[2];return[Y(n,r+10),h,s,i,a+Y(n,r+30)+Y(n,r+32),u]},Ln=function(n,r){for(;Y(n,r)!=1;r+=4+Y(n,r+2));return[dr(n,r+12),dr(n,r+4),dr(n,r+20)]},fr=function(n){var r=0;if(n)for(var t in n){var e=n[t].length;if(e>65535)throw\"extra field too long\";r+=e+4}return r},Ar=function(n,r,t,e,i,a,o,f){var h=e.length,s=t.extra,u=f&&f.length,l=fr(s);F(n,r,o!=null?33639248:67324752),r+=4,o!=null&&(n[r++]=20,n[r++]=t.os),n[r]=20,r+=2,n[r++]=t.flag<<1|(a==null&&8),n[r++]=i&&8,n[r++]=t.compression&255,n[r++]=t.compression>>8;var p=new Date(t.mtime==null?Date.now():t.mtime),y=p.getFullYear()-1980;if(y<0||y>119)throw\"date not in range 1980-2099\";if(F(n,r,(y<<24)*2|p.getMonth()+1<<21|p.getDate()<<16|p.getHours()<<11|p.getMinutes()<<5|p.getSeconds()>>>1),r+=4,a!=null&&(F(n,r,t.crc),F(n,r+4,a),F(n,r+8,t.size)),F(n,r+12,h),F(n,r+14,l),r+=16,o!=null&&(F(n,r,u),F(n,r+6,t.attrs),F(n,r+10,o),r+=14),n.set(e,r),r+=h,l)for(var c in s){var g=s[c],w=g.length;F(n,r,+c),F(n,r+2,w),n.set(g,r+4),r+=4+w}return u&&(n.set(f,r),r+=u),r},ln=function(n,r,t,e,i){F(n,r,101010256),F(n,r+8,t),F(n,r+10,t),F(n,r+12,e),F(n,r+16,i)},Br=function(){function n(r){this.filename=r,this.c=gr(),this.size=0,this.compression=0}return n.prototype.process=function(r,t){this.ondata(null,r,t)},n.prototype.push=function(r,t){if(!this.ondata)throw\"no callback - add to ZIP archive before pushing\";this.c.p(r),this.size+=r.length,t&&(this.crc=this.c.d()),this.process(r,t||!1)},n}(),st=function(){function n(r,t){var e=this;t||(t={}),Br.call(this,r),this.d=new rr(t,function(i,a){e.ondata(null,i,a)}),this.compression=8,this.flag=Vn(t.level)}return n.prototype.process=function(r,t){try{this.d.push(r,t)}catch(e){this.ondata(e,null,t)}},n.prototype.push=function(r,t){Br.prototype.push.call(this,r,t)},n}(),ht=function(){function n(r,t){var e=this;t||(t={}),Br.call(this,r),this.d=new En(t,function(i,a,o){e.ondata(i,a,o)}),this.compression=8,this.flag=Vn(t.level),this.terminate=this.d.terminate}return n.prototype.process=function(r,t){this.d.push(r,t)},n.prototype.push=function(r,t){Br.prototype.push.call(this,r,t)},n}(),ut=function(){function n(r){this.ondata=r,this.u=[],this.d=1}return n.prototype.add=function(r){var t=this;if(this.d&2)throw\"stream finished\";var e=or(r.filename),i=e.length,a=r.comment,o=a&&or(a),f=i!=r.filename.length||o&&a.length!=o.length,h=i+fr(r.extra)+30;if(i>65535)throw\"filename too long\";var s=new A(h);Ar(s,0,r,e,f);var u=[s],l=function(){for(var w=0,M=u;w<M.length;w++){var z=M[w];t.ondata(null,z,!1)}u=[]},p=this.d;this.d=0;var y=this.u.length,c=Zr(r,{f:e,u:f,o,t:function(){r.terminate&&r.terminate()},r:function(){if(l(),p){var w=t.u[y+1];w?w.r():t.d=1}p=1}}),g=0;r.ondata=function(w,M,z){if(w)t.ondata(w,M,z),t.terminate();else if(g+=M.length,u.push(M),z){var m=new A(16);F(m,0,134695760),F(m,4,r.crc),F(m,8,g),F(m,12,r.size),u.push(m),c.c=g,c.b=h+g+16,c.crc=r.crc,c.size=r.size,p&&c.r(),p=1}else p&&l()},this.u.push(c)},n.prototype.end=function(){var r=this;if(this.d&2)throw this.d&1?\"stream finishing\":\"stream finished\";this.d?this.e():this.u.push({r:function(){if(!(r.d&1))return;r.u.splice(-1,1),r.e()},t:function(){}}),this.d=3},n.prototype.e=function(){for(var r=0,t=0,e=0,i=0,a=this.u;i<a.length;i++){var o=a[i];e+=46+o.f.length+fr(o.extra)+(o.o?o.o.length:0)}for(var f=new A(e+22),h=0,s=this.u;h<s.length;h++){var o=s[h];Ar(f,r,o,o.f,o.u,o.c,t,o.o),r+=46+o.f.length+fr(o.extra)+(o.o?o.o.length:0),t+=o.b}ln(f,r,this.u.length,e,t),this.ondata(null,f,!0),this.d=2},n.prototype.terminate=function(){for(var r=0,t=this.u;r<t.length;r++){var e=t[r];e.t()}this.d=2},n}();function lt(n,r,t){if(t||(t=r,r={}),typeof t!=\"function\")throw\"no callback\";var e={};sn(n,\"\",e,r);var i=Object.keys(e),a=i.length,o=0,f=0,h=a,s=new Array(a),u=[],l=function(){for(var g=0;g<u.length;++g)u[g]()},p=function(){var g=new A(f+22),w=o,M=f-o;f=0;for(var z=0;z<h;++z){var m=s[z];try{var D=m.c.length;Ar(g,f,m,m.f,m.u,D);var C=30+m.f.length+fr(m.extra),U=f+C;g.set(m.c,U),Ar(g,o,m,m.f,m.u,D,f,m.m),o+=16+C+(m.m?m.m.length:0),f=U+D}catch(x){return t(x,null)}}ln(g,o,s.length,M,w),t(null,g)};a||p();for(var y=function(g){var w=i[g],M=e[w],z=M[0],m=M[1],D=gr(),C=z.length;D.p(z);var U=or(w),x=U.length,v=m.comment,E=v&&or(v),S=E&&E.length,K=fr(m.extra),I=m.level==0?0:8,Z=function(B,G){if(B)l(),t(B,null);else{var k=G.length;s[g]=Zr(m,{size:C,crc:D.d(),c:G,f:U,m:E,u:x!=w.length||E&&v.length!=S,compression:I}),o+=30+x+K+k,f+=76+2*(x+K)+(S||0)+k,--a||p()}};if(x>65535&&Z(\"filename too long\",null),!I)Z(null,z);else if(C<16e4)try{Z(null,kr(z,m))}catch(B){Z(B,null)}else u.push(Pn(z,m,Z))},c=0;c<h;++c)y(c);return l}function vt(n,r){r||(r={});var t={},e=[];sn(n,\"\",t,r);var i=0,a=0;for(var o in t){var f=t[o],h=f[0],s=f[1],u=s.level==0?0:8,l=or(o),p=l.length,y=s.comment,c=y&&or(y),g=c&&c.length,w=fr(s.extra);if(p>65535)throw\"filename too long\";var M=u?kr(h,s):h,z=M.length,m=gr();m.p(h),e.push(Zr(s,{size:h.length,crc:m.d(),c:M,f:l,m:c,u:p!=o.length||c&&y.length!=g,o:i,compression:u})),i+=30+p+w+z,a+=76+2*(p+w)+(g||0)+z}for(var D=new A(a+22),C=i,U=a-i,x=0;x<e.length;++x){var l=e[x];Ar(D,l.o,l,l.f,l.u,l.c.length);var v=30+l.f.length+fr(l.extra);D.set(l.c,l.o+v),Ar(D,i,l,l.f,l.u,l.c.length,l.o,l.m),i+=16+v+(l.m?l.m.length:0)}return ln(D,i,e.length,U,C),D}var dn=function(){function n(){}return n.prototype.push=function(r,t){this.ondata(null,r,t)},n.compression=0,n}(),ct=function(){function n(){var r=this;this.i=new J(function(t,e){r.ondata(null,t,e)})}return n.prototype.push=function(r,t){try{this.i.push(r,t)}catch(e){this.ondata(e,r,t)}},n.compression=8,n}(),pt=function(){function n(r,t){var e=this;t<32e4?this.i=new J(function(i,a){e.ondata(null,i,a)}):(this.i=new en(function(i,a,o){e.ondata(i,a,o)}),this.terminate=this.i.terminate)}return n.prototype.push=function(r,t){this.i.terminate&&(r=$(r,0)),this.i.push(r,t)},n.compression=8,n}(),gt=function(){function n(r){this.onfile=r,this.k=[],this.o={0:dn},this.p=er}return n.prototype.push=function(r,t){var e=this;if(!this.onfile)throw\"no callback\";if(this.c>0){var i=Math.min(this.c,r.length),a=r.subarray(0,i);if(this.c-=i,this.d?this.d.push(a,!this.c):this.k[0].push(a),r=r.subarray(i),r.length)return this.push(r,t)}else{var o=0,f=0,h=void 0,s=void 0;this.p.length?r.length?(s=new A(this.p.length+r.length),s.set(this.p),s.set(r,this.p.length)):s=this.p:s=r;for(var u=s.length,l=this.c,p=l&&this.d,y=function(){var M,z=P(s,f);if(z==67324752){o=1,h=f,c.d=null,c.c=0;var m=Y(s,f+6),D=Y(s,f+8),C=m&2048,U=m&8,x=Y(s,f+26),v=Y(s,f+28);if(u>f+30+x+v){var E=[];c.k.unshift(E),o=2;var S=P(s,f+18),K=P(s,f+22),I=un(s.subarray(f+30,f+=30+x),!C);S==4294967295?(M=U?[-2]:Ln(s,f),S=M[0],K=M[1]):U&&(S=-1),f+=v,c.c=S;var Z={name:I,compression:D,start:function(){if(!Z.ondata)throw\"no callback\";if(!S)Z.ondata(null,er,!0);else{var B=e.o[D];if(!B)throw\"unknown compression type \"+D;var G=S<0?new B(I):new B(I,S,K);G.ondata=function(N,Q,W){Z.ondata(N,Q,W)};for(var k=0,O=E;k<O.length;k++){var H=O[k];G.push(H,!1)}e.k[0]==E?e.d=G:G.push(er,!0)}},terminate:function(){e.k[0]==E&&e.d.terminate&&e.d.terminate()}};S>=0&&(Z.size=S,Z.originalSize=K),c.onfile(Z)}return\"break\"}else if(l){if(z==134695760)return h=f+=12+(l==-2&&8),o=2,c.c=0,\"break\";if(z==33639248)return h=f-=4,o=2,c.c=0,\"break\"}},c=this;f<u-4;++f){var g=y();if(g===\"break\")break}if(this.p=er,l<0){var w=o?s.subarray(0,h-12-(l==-2&&8)-(P(s,h-16)==134695760&&4)):s.subarray(0,f);p?p.push(w,!!o):this.k[+(o==2)].push(w)}if(o&2)return this.push(s.subarray(f),t);this.p=s.subarray(f)}if(t&&this.c)throw\"invalid zip file\"},n.prototype.register=function(r){this.o[r.compression]=r},n}();function wt(n,r){if(typeof r!=\"function\")throw\"no callback\";for(var t=[],e=function(){for(var p=0;p<t.length;++p)t[p]()},i={},a=n.length-22;P(n,a)!=101010256;--a)if(!a||n.length-a>65558){r(\"invalid zip file\",null);return}var o=Y(n,a+8);o||r(null,{});var f=o,h=P(n,a+16),s=h==4294967295;if(s){if(a=P(n,a-12),P(n,a)!=101075792){r(\"invalid zip file\",null);return}f=o=P(n,a+32),h=P(n,a+48)}for(var u=function(p){var y=$n(n,h,s),c=y[0],g=y[1],w=y[2],M=y[3],z=y[4],m=y[5],D=Xn(n,m);h=z;var C=function(x,v){x?(e(),r(x,null)):(i[M]=v,--o||r(null,i))};if(!c)C(null,$(n,D,D+g));else if(c==8){var U=n.subarray(D,D+g);if(g<32e4)try{C(null,xr(U,new A(w)))}catch(x){C(x,null)}else t.push(an(U,{size:w},C))}else C(\"unknown compression type \"+c,null)},l=0;l<f;++l)u();return e}function yt(n){for(var r={},t=n.length-22;P(n,t)!=101010256;--t)if(!t||n.length-t>65558)throw\"invalid zip file\";var e=Y(n,t+8);if(!e)return{};var i=P(n,t+16),a=i==4294967295;if(a){if(t=P(n,t-12),P(n,t)!=101075792)throw\"invalid zip file\";e=P(n,t+32),i=P(n,t+48)}for(var o=0;o<e;++o){var f=$n(n,i,a),h=f[0],s=f[1],u=f[2],l=f[3],p=f[4],y=f[5],c=Xn(n,y);if(i=p,!h)r[l]=$(n,c,c+s);else if(h==8)r[l]=xr(n.subarray(c,c+s),new A(u));else throw\"unknown compression type \"+h}return r}/* harmony default export */ __webpack_exports__[\"default\"] = (null);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL3RocmVlL2V4YW1wbGVzL2pzbS9saWJzL2ZmbGF0ZS5tb2R1bGUubWluLmpzPzRkOTMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyx3QkFBd0Isc0RBQXNELHVCQUF1QixvQkFBb0IsNkJBQTZCLHVCQUF1Qix5QkFBeUIsc0JBQXNCLHNCQUFzQix1UkFBdVIsd0JBQXdCLEtBQUssc0JBQXNCLDRCQUE0QixLQUFLLG1CQUFtQixTQUFTLHFCQUFxQixZQUFZLCtCQUErQixzQkFBc0IsMERBQTBELFFBQVEsS0FBSyxrQ0FBa0Msc0dBQXNHLDBCQUEwQixrQ0FBa0MsSUFBSSxnQkFBZ0IsZUFBZSxRQUFRLElBQUksMEJBQTBCLE1BQU0sTUFBTSxjQUFjLFdBQVcsUUFBUSxJQUFJLHVFQUF1RSxLQUFLLG1CQUFtQix3QkFBd0IsSUFBSSwyQ0FBMkMsU0FBUyxtQkFBbUIsTUFBTSxZQUFZLGNBQWMsTUFBTSxZQUFZLGNBQWMsTUFBTSxZQUFZLGNBQWMsTUFBTSxZQUFZLHlCQUF5QixLQUFLLFlBQVksdUVBQXVFLG1CQUFtQixXQUFXLHFCQUFxQixTQUFTLG1CQUFtQixZQUFZLGdDQUFnQyxrQkFBa0IsWUFBWSx5Q0FBeUMsZ0JBQWdCLHVCQUF1QixtQkFBbUIsMERBQTBELHNEQUFzRCxnQ0FBZ0Msb0JBQW9CLGVB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Q0FBMkMseUJBQXlCLGNBQWMsd0JBQXdCLGNBQWMsdUJBQXVCLFNBQVMsVUFBVSxrQkFBa0IsT0FBTyxLQUFLLDJDQUEyQyxLQUFLLElBQUksUUFBUSxTQUFTLGVBQWUsWUFBWSxlQUFlLGtCQUFrQixvREFBb0QsZUFBZSxlQUFlLGdDQUFnQyxNQUFNLHlEQUF5RCx3QkFBd0IsWUFBWSxJQUFJLEtBQUssb0VBQW9FLDBCQUEwQixpREFBaUQsd0NBQXdDLFNBQSt4QixtRUFBSSxFQUFDIiwiZmlsZSI6Ii4vbm9kZV9tb2R1bGVzL3RocmVlL2V4YW1wbGVzL2pzbS9saWJzL2ZmbGF0ZS5tb2R1bGUubWluLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyohXG5mZmxhdGUgLSBmYXN0IEphdmFTY3JpcHQgY29tcHJlc3Npb24vZGVjb21wcmVzc2lvblxuPGh0dHBzOi8vMTAxYXJyb3d6LmdpdGh1Yi5pby9mZmxhdGU+XG5MaWNlbnNlZCB1bmRlciBNSVQuIGh0dHBzOi8vZ2l0aHViLmNvbS8xMDFhcnJvd3ovZmZsYXRlL2Jsb2IvbWFzdGVyL0xJQ0VOU0VcbiovXG52YXIgZ249e30sYm49ZnVuY3Rpb24obixyLHQsZSxpKXt2YXIgYT1nbltyXXx8KGduW3JdPVVSTC5jcmVhdGVPYmplY3RVUkwobmV3IEJsb2IoW25dLHt0eXBlOlwidGV4dC9qYXZhc2NyaXB0XCJ9KSkpLG89bmV3IFdvcmtlcihhKTtyZXR1cm4gby5vbmVycm9yPWZ1bmN0aW9uKGYpe3JldHVybiBpKGYuZXJyb3IsbnVsbCl9LG8ub25tZXNzYWdlPWZ1bmN0aW9uKGYpe3JldHVybiBpKG51bGwsZi5kYXRhKX0sby5wb3N0TWVzc2FnZSh0LGUpLG99LEE9VWludDhBcnJheSxSPVVpbnQxNkFycmF5LG5yPVVpbnQzMkFycmF5LHVyPW5ldyBBKFswLDAsMCwwLDAsMCwwLDAsMSwxLDEsMSwyLDIsMiwyLDMsMywzLDMsNCw0LDQsNCw1LDUsNSw1LDAsMCwwLDBdKSxscj1uZXcgQShbMCwwLDAsMCwxLDEsMiwyLDMsMyw0LDQsNSw1LDYsNiw3LDcsOCw4LDksOSwxMCwxMCwxMSwxMSwxMiwxMiwxMywxMywwLDBdKSxNcj1uZXcgQShbMTYsMTcsMTgsMCw4LDcsOSw2LDEwLDUsMTEsNCwxMiwzLDEzLDIsMTQsMSwxNV0pLHduPWZ1bmN0aW9uKG4scil7Zm9yKHZhciB0PW5ldyBSKDMxKSxlPTA7ZTwzMTsrK2UpdFtlXT1yKz0xPDxuW2UtMV07Zm9yKHZhciBpPW5ldyBucih0WzMwXSksZT0xO2U8MzA7KytlKWZvcih2YXIgYT10W2VdO2E8dFtlKzFdOysrYSlpW2FdPWEtdFtlXTw8NXxlO3JldHVyblt0LGldfSx5bj13bih1ciwyKSxOcj15blswXSxJcj15blsxXTtOclsyOF09MjU4LElyWzI1OF09Mjg7Zm9yKHZhciBtbj13bihsciwwKSx6bj1tblswXSxRcj1tblsxXSxVcj1uZXcgUigzMjc2OCksVD0wO1Q8MzI3Njg7KytUKXt2YXIgaXI9KFQmNDM2OTApPj4+MXwoVCYyMTg0NSk8PDE7aXI9KGlyJjUyNDI4KT4+PjJ8KGlyJjEzMTA3KTw8Mixpcj0oaXImNjE2ODApPj4+NHwoaXImMzg1NSk8PDQsVXJbVF09KChpciY2NTI4MCk+Pj44fChpciYyNTUpPDw4KT4+PjF9Zm9yKHZhciBWPWZ1bmN0aW9uKG4scix0KXtmb3IodmFyIGU9bi5sZW5ndGgsaT0wLGE9bmV3IFIocik7aTxlOysraSkrK2FbbltpXS0xXTt2YXIgbz1uZXcgUihyKTtmb3IoaT0wO2k8cjsrK2kpb1tpXT1vW2ktMV0rYVtpLTFdPDwxO3ZhciBmO2lmKHQpe2Y9bmV3IFIoMTw8cik7dmFyIGg9MTUtcjtmb3IoaT0wO2k8ZTsrK2kpaWYobltpXSlmb3IodmFyIHM9aTw8NHxuW2ldLHU9ci1uW2ldLGw9b1tuW2ldLTFdKys8PHUscD1sfCgxPDx1KS0xO2w8PXA7KytsKWZbVXJbbF0+Pj5oXT1zfWVsc2UgZm9yKGY9bmV3IFIoZSksaT0wO2k8ZTsrK2kpbltpXSYmKGZbaV09VXJbb1tuW2ldLTFdKytdPj4+MTUtbltpXSk7cmV0dXJuIGZ9LHRyPW5ldyBBKDI4OCksVD0wO1Q8MTQ0OysrVCl0cltUXT04O2Zvcih2YXIgVD0xNDQ7VDwyNTY7KytUKXRyW1RdPTk7Zm9yKHZhciBUPTI1NjtUPDI4MDsrK1QpdHJbVF09Nztmb3IodmFyIFQ9MjgwO1Q8Mjg4OysrVCl0cltUXT04O2Zvcih2YXIgdnI9bmV3IEEoMzIpLFQ9MDtUPDMyOysrVCl2cltUXT01O3ZhciB4bj1WKHRyLDksMCksQW49Vih0ciw5LDEpLERuPVYodnIsNSwwKSxNbj1WKHZyLDUsMSksR3I9ZnVuY3Rpb24obil7Zm9yKHZhciByPW5bMF0sdD0xO3Q8bi5sZW5ndGg7Kyt0KW5bdF0+ciYmKHI9blt0XSk7cmV0dXJuIHJ9LFg9ZnVuY3Rpb24obixyLHQpe3ZhciBlPXIvOHwwO3JldHVybihuW2VdfG5bZSsxXTw8OCk+PihyJjcpJnR9LE9yPWZ1bmN0aW9uKG4scil7dmFyIHQ9ci84fDA7cmV0dXJuKG5bdF18blt0KzFdPDw4fG5bdCsyXTw8MTYpPj4ociY3KX0sQ3I9ZnVuY3Rpb24obil7cmV0dXJuKG4vOHwwKSsobiY3JiYxKX0sJD1mdW5jdGlvbihuLHIsdCl7KHI9PW51bGx8fHI8MCkmJihyPTApLCh0PT1udWxsfHx0Pm4ubGVuZ3RoKSYmKHQ9bi5sZW5ndGgpO3ZhciBlPW5ldyhuIGluc3RhbmNlb2YgUj9SOm4gaW5zdGFuY2VvZiBucj9ucjpBKSh0LXIpO3JldHVybiBlLnNldChuLnN1YmFycmF5KHIsdCkpLGV9LEZyPWZ1bmN0aW9uKG4scix0KXt2YXIgZT1uLmxlbmd0aDtpZighZXx8dCYmIXQubCYmZTw1KXJldHVybiByfHxuZXcgQSgwKTt2YXIgaT0hcnx8dCxhPSF0fHx0Lmk7dHx8KHQ9e30pLHJ8fChyPW5ldyBBKGUqMykpO3ZhciBvPWZ1bmN0aW9uKFRyKXt2YXIgRHI9ci5sZW5ndGg7aWYoVHI+RHIpe3ZhciBocj1uZXcgQShNYXRoLm1heChEcioyLFRyKSk7aHIuc2V0KHIpLHI9aHJ9fSxmPXQuZnx8MCxoPXQucHx8MCxzPXQuYnx8MCx1PXQubCxsPXQuZCxwPXQubSx5PXQubixjPWUqODtkb3tpZighdSl7dC5mPWY9WChuLGgsMSk7dmFyIGc9WChuLGgrMSwzKTtpZihoKz0zLGcpaWYoZz09MSl1PUFuLGw9TW4scD05LHk9NTtlbHNlIGlmKGc9PTIpe3ZhciBtPVgobixoLDMxKSsyNTcsRD1YKG4saCsxMCwxNSkrNCxDPW0rWChuLGgrNSwzMSkrMTtoKz0xNDtmb3IodmFyIFU9bmV3IEEoQykseD1uZXcgQSgxOSksdj0wO3Y8RDsrK3YpeFtNclt2XV09WChuLGgrdiozLDcpO2grPUQqMzt2YXIgRT1Hcih4KSxTPSgxPDxFKS0xO2lmKCFhJiZoK0MqKEUrNyk+YylicmVhaztmb3IodmFyIEs9Vih4LEUsMSksdj0wO3Y8Qzspe3ZhciBJPUtbWChuLGgsUyldO2grPUkmMTU7dmFyIHc9ST4+PjQ7aWYodzwxNilVW3YrK109dztlbHNle3ZhciBaPTAsQj0wO2Zvcih3PT0xNj8oQj0zK1gobixoLDMpLGgrPTIsWj1VW3YtMV0pOnc9PTE3PyhCPTMrWChuLGgsNyksaCs9Myk6dz09MTgmJihCPTExK1gobixoLDEyNyksaCs9Nyk7Qi0tOylVW3YrK109Wn19dmFyIEc9VS5zdWJhcnJheSgwLG0pLGs9VS5zdWJhcnJheShtKTtwPUdyKEcpLHk9R3IoayksdT1WKEcscCwxKSxsPVYoayx5LDEpfWVsc2UgdGhyb3dcImludmFsaWQgYmxvY2sgdHlwZVwiO2Vsc2V7dmFyIHc9Q3IoaCkrNCxNPW5bdy00XXxuW3ctM108PDgsej13K007aWYoej5lKXtpZihhKXRocm93XCJ1bmV4cGVjdGVkIEVPRlwiO2JyZWFrfWkmJm8ocytNKSxyLnNldChuLnN1YmFycmF5KHcseikscyksdC5iPXMrPU0sdC5wPWg9eio4O2NvbnRpbnVlfWlmKGg+Yyl0aHJvd1widW5leHBlY3RlZCBFT0ZcIn1pJiZvKHMrMTMxMDcyKTtmb3IodmFyIE89KDE8PHApLTEsSD0oMTw8eSktMSxOPXAreSsxODthfHxoK048Yzspe3ZhciBaPXVbT3IobixoKSZPXSxRPVo+Pj40O2lmKGgrPVomMTUsaD5jKXRocm93XCJ1bmV4cGVjdGVkIEVPRlwiO2lmKCFaKXRocm93XCJpbnZhbGlkIGxlbmd0aC9saXRlcmFsXCI7aWYoUTwyNTYpcltzKytdPVE7ZWxzZSBpZihRPT0yNTYpe3U9bnVsbDticmVha31lbHNle3ZhciBXPVEtMjU0O2lmKFE+MjY0KXt2YXIgdj1RLTI1NyxkPXVyW3ZdO1c9WChuLGgsKDE8PGQpLTEpK05yW3ZdLGgrPWR9dmFyIF89bFtPcihuLGgpJkhdLGo9Xz4+PjQ7aWYoIV8pdGhyb3dcImludmFsaWQgZGlzdGFuY2VcIjtoKz1fJjE1O3ZhciBrPXpuW2pdO2lmKGo+Myl7dmFyIGQ9bHJbal07ays9T3IobixoKSYoMTw8ZCktMSxoKz1kfWlmKGg+Yyl0aHJvd1widW5leHBlY3RlZCBFT0ZcIjtpJiZvKHMrMTMxMDcyKTtmb3IodmFyIHE9cytXO3M8cTtzKz00KXJbc109cltzLWtdLHJbcysxXT1yW3MrMS1rXSxyW3MrMl09cltzKzIta10scltzKzNdPXJbcyszLWtdO3M9cX19dC5sPXUsdC5wPWgsdC5iPXMsdSYmKGY9MSx0Lm09cCx0LmQ9bCx0Lm49eSl9d2hpbGUoIWYpO3JldHVybiBzPT1yLmxlbmd0aD9yOiQociwwLHMpfSxiPWZ1bmN0aW9uKG4scix0KXt0PDw9ciY3O3ZhciBlPXIvOHwwO25bZV18PXQsbltlKzFdfD10Pj4+OH0sY3I9ZnVuY3Rpb24obixyLHQpe3Q8PD1yJjc7dmFyIGU9ci84fDA7bltlXXw9dCxuW2UrMV18PXQ+Pj44LG5bZSsyXXw9dD4+PjE2fSxFcj1mdW5jdGlvbihuLHIpe2Zvcih2YXIgdD1bXSxlPTA7ZTxuLmxlbmd0aDsrK2UpbltlXSYmdC5wdXNoKHtzOmUsZjpuW2VdfSk7dmFyIGk9dC5sZW5ndGgsYT10LnNsaWNlKCk7aWYoIWkpcmV0dXJuW2VyLDBdO2lmKGk9PTEpe3ZhciBvPW5ldyBBKHRbMF0ucysxKTtyZXR1cm4gb1t0WzBdLnNdPTEsW28sMV19dC5zb3J0KGZ1bmN0aW9uKEMsVSl7cmV0dXJuIEMuZi1VLmZ9KSx0LnB1c2goe3M6LTEsZjoyNTAwMX0pO3ZhciBmPXRbMF0saD10WzFdLHM9MCx1PTEsbD0yO2Zvcih0WzBdPXtzOi0xLGY6Zi5mK2guZixsOmYscjpofTt1IT1pLTE7KWY9dFt0W3NdLmY8dFtsXS5mP3MrKzpsKytdLGg9dFtzIT11JiZ0W3NdLmY8dFtsXS5mP3MrKzpsKytdLHRbdSsrXT17czotMSxmOmYuZitoLmYsbDpmLHI6aH07Zm9yKHZhciBwPWFbMF0ucyxlPTE7ZTxpOysrZSlhW2VdLnM+cCYmKHA9YVtlXS5zKTt2YXIgeT1uZXcgUihwKzEpLGM9UHIodFt1LTFdLHksMCk7aWYoYz5yKXt2YXIgZT0wLGc9MCx3PWMtcixNPTE8PHc7Zm9yKGEuc29ydChmdW5jdGlvbihVLHgpe3JldHVybiB5W3guc10teVtVLnNdfHxVLmYteC5mfSk7ZTxpOysrZSl7dmFyIHo9YVtlXS5zO2lmKHlbel0+cilnKz1NLSgxPDxjLXlbel0pLHlbel09cjtlbHNlIGJyZWFrfWZvcihnPj4+PXc7Zz4wOyl7dmFyIG09YVtlXS5zO3lbbV08cj9nLT0xPDxyLXlbbV0rKy0xOisrZX1mb3IoO2U+PTAmJmc7LS1lKXt2YXIgRD1hW2VdLnM7eVtEXT09ciYmKC0teVtEXSwrK2cpfWM9cn1yZXR1cm5bbmV3IEEoeSksY119LFByPWZ1bmN0aW9uKG4scix0KXtyZXR1cm4gbi5zPT0tMT9NYXRoLm1heChQcihuLmwscix0KzEpLFByKG4ucixyLHQrMSkpOnJbbi5zXT10fSxWcj1mdW5jdGlvbihuKXtmb3IodmFyIHI9bi5sZW5ndGg7ciYmIW5bLS1yXTspO2Zvcih2YXIgdD1uZXcgUigrK3IpLGU9MCxpPW5bMF0sYT0xLG89ZnVuY3Rpb24oaCl7dFtlKytdPWh9LGY9MTtmPD1yOysrZilpZihuW2ZdPT1pJiZmIT1yKSsrYTtlbHNle2lmKCFpJiZhPjIpe2Zvcig7YT4xMzg7YS09MTM4KW8oMzI3NTQpO2E+MiYmKG8oYT4xMD9hLTExPDw1fDI4NjkwOmEtMzw8NXwxMjMwNSksYT0wKX1lbHNlIGlmKGE+Myl7Zm9yKG8oaSksLS1hO2E+NjthLT02KW8oODMwNCk7YT4yJiYobyhhLTM8PDV8ODIwOCksYT0wKX1mb3IoO2EtLTspbyhpKTthPTEsaT1uW2ZdfXJldHVyblt0LnN1YmFycmF5KDAsZSkscl19LHByPWZ1bmN0aW9uKG4scil7Zm9yKHZhciB0PTAsZT0wO2U8ci5sZW5ndGg7KytlKXQrPW5bZV0qcltlXTtyZXR1cm4gdH0sU3I9ZnVuY3Rpb24obixyLHQpe3ZhciBlPXQubGVuZ3RoLGk9Q3IocisyKTtuW2ldPWUmMjU1LG5baSsxXT1lPj4+OCxuW2krMl09bltpXV4yNTUsbltpKzNdPW5baSsxXV4yNTU7Zm9yKHZhciBhPTA7YTxlOysrYSluW2krYSs0XT10W2FdO3JldHVybihpKzQrZSkqOH0sWHI9ZnVuY3Rpb24obixyLHQsZSxpLGEsbyxmLGgscyx1KXtiKHIsdSsrLHQpLCsraVsyNTZdO2Zvcih2YXIgbD1FcihpLDE1KSxwPWxbMF0seT1sWzFdLGM9RXIoYSwxNSksZz1jWzBdLHc9Y1sxXSxNPVZyKHApLHo9TVswXSxtPU1bMV0sRD1WcihnKSxDPURbMF0sVT1EWzFdLHg9bmV3IFIoMTkpLHY9MDt2PHoubGVuZ3RoOysrdil4W3pbdl0mMzFdKys7Zm9yKHZhciB2PTA7djxDLmxlbmd0aDsrK3YpeFtDW3ZdJjMxXSsrO2Zvcih2YXIgRT1Fcih4LDcpLFM9RVswXSxLPUVbMV0sST0xOTtJPjQmJiFTW01yW0ktMV1dOy0tSSk7dmFyIFo9cys1PDwzLEI9cHIoaSx0cikrcHIoYSx2cikrbyxHPXByKGkscCkrcHIoYSxnKStvKzE0KzMqSStwcih4LFMpKygyKnhbMTZdKzMqeFsxN10rNyp4WzE4XSk7aWYoWjw9QiYmWjw9RylyZXR1cm4gU3Iocix1LG4uc3ViYXJyYXkoaCxoK3MpKTt2YXIgayxPLEgsTjtpZihiKHIsdSwxKyhHPEIpKSx1Kz0yLEc8Qil7az1WKHAseSwwKSxPPXAsSD1WKGcsdywwKSxOPWc7dmFyIFE9VihTLEssMCk7YihyLHUsbS0yNTcpLGIocix1KzUsVS0xKSxiKHIsdSsxMCxJLTQpLHUrPTE0O2Zvcih2YXIgdj0wO3Y8STsrK3YpYihyLHUrMyp2LFNbTXJbdl1dKTt1Kz0zKkk7Zm9yKHZhciBXPVt6LENdLGQ9MDtkPDI7KytkKWZvcih2YXIgXz1XW2RdLHY9MDt2PF8ubGVuZ3RoOysrdil7dmFyIGo9X1t2XSYzMTtiKHIsdSxRW2pdKSx1Kz1TW2pdLGo+MTUmJihiKHIsdSxfW3ZdPj4+NSYxMjcpLHUrPV9bdl0+Pj4xMil9fWVsc2Ugaz14bixPPXRyLEg9RG4sTj12cjtmb3IodmFyIHY9MDt2PGY7Kyt2KWlmKGVbdl0+MjU1KXt2YXIgaj1lW3ZdPj4+MTgmMzE7Y3Iocix1LGtbaisyNTddKSx1Kz1PW2orMjU3XSxqPjcmJihiKHIsdSxlW3ZdPj4+MjMmMzEpLHUrPXVyW2pdKTt2YXIgcT1lW3ZdJjMxO2NyKHIsdSxIW3FdKSx1Kz1OW3FdLHE+MyYmKGNyKHIsdSxlW3ZdPj4+NSY4MTkxKSx1Kz1scltxXSl9ZWxzZSBjcihyLHUsa1tlW3ZdXSksdSs9T1tlW3ZdXTtyZXR1cm4gY3Iocix1LGtbMjU2XSksdStPWzI1Nl19LFVuPW5ldyBucihbNjU1NDAsMTMxMDgwLDEzMTA4OCwxMzExMDQsMjYyMTc2LDEwNDg3MDQsMTA0ODgzMiwyMTE0NTYwLDIxMTc2MzJdKSxlcj1uZXcgQSgwKSxDbj1mdW5jdGlvbihuLHIsdCxlLGksYSl7dmFyIG89bi5sZW5ndGgsZj1uZXcgQShlK28rNSooMStNYXRoLmNlaWwoby83ZTMpKStpKSxoPWYuc3ViYXJyYXkoZSxmLmxlbmd0aC1pKSxzPTA7aWYoIXJ8fG88OClmb3IodmFyIHU9MDt1PD1vO3UrPTY1NTM1KXt2YXIgbD11KzY1NTM1O2w8bz9zPVNyKGgscyxuLnN1YmFycmF5KHUsbCkpOihoW3VdPWEscz1TcihoLHMsbi5zdWJhcnJheSh1LG8pKSl9ZWxzZXtmb3IodmFyIHA9VW5bci0xXSx5PXA+Pj4xMyxjPXAmODE5MSxnPSgxPDx0KS0xLHc9bmV3IFIoMzI3NjgpLE09bmV3IFIoZysxKSx6PU1hdGguY2VpbCh0LzMpLG09Mip6LEQ9ZnVuY3Rpb24oS3Ipe3JldHVybihuW0tyXV5uW0tyKzFdPDx6Xm5bS3IrMl08PG0pJmd9LEM9bmV3IG5yKDI1ZTMpLFU9bmV3IFIoMjg4KSx4PW5ldyBSKDMyKSx2PTAsRT0wLHU9MCxTPTAsSz0wLEk9MDt1PG87Kyt1KXt2YXIgWj1EKHUpLEI9dSYzMjc2NyxHPU1bWl07aWYod1tCXT1HLE1bWl09QixLPD11KXt2YXIgaz1vLXU7aWYoKHY+N2UzfHxTPjI0NTc2KSYmaz40MjMpe3M9WHIobixoLDAsQyxVLHgsRSxTLEksdS1JLHMpLFM9dj1FPTAsST11O2Zvcih2YXIgTz0wO088Mjg2OysrTylVW09dPTA7Zm9yKHZhciBPPTA7TzwzMDsrK08peFtPXT0wfXZhciBIPTIsTj0wLFE9YyxXPUItRyYzMjc2NztpZihrPjImJlo9PUQodS1XKSlmb3IodmFyIGQ9TWF0aC5taW4oeSxrKS0xLF89TWF0aC5taW4oMzI3NjcsdSksaj1NYXRoLm1pbigyNTgsayk7Vzw9XyYmLS1RJiZCIT1HOyl7aWYoblt1K0hdPT1uW3UrSC1XXSl7Zm9yKHZhciBxPTA7cTxqJiZuW3UrcV09PW5bdStxLVddOysrcSk7aWYocT5IKXtpZihIPXEsTj1XLHE+ZClicmVhaztmb3IodmFyIFRyPU1hdGgubWluKFcscS0yKSxEcj0wLE89MDtPPFRyOysrTyl7dmFyIGhyPXUtVytPKzMyNzY4JjMyNzY3LF9uPXdbaHJdLHZuPWhyLV9uKzMyNzY4JjMyNzY3O3ZuPkRyJiYoRHI9dm4sRz1ocil9fX1CPUcsRz13W0JdLFcrPUItRyszMjc2OCYzMjc2N31pZihOKXtDW1MrK109MjY4NDM1NDU2fElyW0hdPDwxOHxRcltOXTt2YXIgY249SXJbSF0mMzEscG49UXJbTl0mMzE7RSs9dXJbY25dK2xyW3BuXSwrK1VbMjU3K2NuXSwrK3hbcG5dLEs9dStILCsrdn1lbHNlIENbUysrXT1uW3VdLCsrVVtuW3VdXX19cz1YcihuLGgsYSxDLFUseCxFLFMsSSx1LUkscyksIWEmJnMmNyYmKHM9U3IoaCxzKzEsZXIpKX1yZXR1cm4gJChmLDAsZStDcihzKStpKX0sRm49ZnVuY3Rpb24oKXtmb3IodmFyIG49bmV3IG5yKDI1Nikscj0wO3I8MjU2Oysrcil7Zm9yKHZhciB0PXIsZT05Oy0tZTspdD0odCYxJiYzOTg4MjkyMzg0KV50Pj4+MTtuW3JdPXR9cmV0dXJuIG59KCksZ3I9ZnVuY3Rpb24oKXt2YXIgbj0tMTtyZXR1cm57cDpmdW5jdGlvbihyKXtmb3IodmFyIHQ9bixlPTA7ZTxyLmxlbmd0aDsrK2UpdD1Gblt0JjI1NV5yW2VdXV50Pj4+ODtuPXR9LGQ6ZnVuY3Rpb24oKXtyZXR1cm5+bn19fSwkcj1mdW5jdGlvbigpe3ZhciBuPTEscj0wO3JldHVybntwOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1uLGk9cixhPXQubGVuZ3RoLG89MDtvIT1hOyl7Zm9yKHZhciBmPU1hdGgubWluKG8rMjY1NSxhKTtvPGY7KytvKWkrPWUrPXRbb107ZT0oZSY2NTUzNSkrMTUqKGU+PjE2KSxpPShpJjY1NTM1KSsxNSooaT4+MTYpfW49ZSxyPWl9LGQ6ZnVuY3Rpb24oKXtyZXR1cm4gbiU9NjU1MjEsciU9NjU1MjEsKG4+Pj44PDwxNnwociYyNTUpPDw4fHI+Pj44KSsoKG4mMjU1KTw8MjMpKjJ9fX0sc3I9ZnVuY3Rpb24obixyLHQsZSxpKXtyZXR1cm4gQ24obixyLmxldmVsPT1udWxsPzY6ci5sZXZlbCxyLm1lbT09bnVsbD9NYXRoLmNlaWwoTWF0aC5tYXgoOCxNYXRoLm1pbigxMyxNYXRoLmxvZyhuLmxlbmd0aCkpKSoxLjUpOjEyK3IubWVtLHQsZSwhaSl9LFpyPWZ1bmN0aW9uKG4scil7dmFyIHQ9e307Zm9yKHZhciBlIGluIG4pdFtlXT1uW2VdO2Zvcih2YXIgZSBpbiByKXRbZV09cltlXTtyZXR1cm4gdH0sU249ZnVuY3Rpb24obixyLHQpe2Zvcih2YXIgZT1uKCksaT1uLnRvU3RyaW5nKCksYT1pLnNsaWNlKGkuaW5kZXhPZihcIltcIikrMSxpLmxhc3RJbmRleE9mKFwiXVwiKSkucmVwbGFjZSgvIC9nLFwiXCIpLnNwbGl0KFwiLFwiKSxvPTA7bzxlLmxlbmd0aDsrK28pe3ZhciBmPWVbb10saD1hW29dO2lmKHR5cGVvZiBmPT1cImZ1bmN0aW9uXCIpe3IrPVwiO1wiK2grXCI9XCI7dmFyIHM9Zi50b1N0cmluZygpO2lmKGYucHJvdG90eXBlKWlmKHMuaW5kZXhPZihcIltuYXRpdmUgY29kZV1cIikhPS0xKXt2YXIgdT1zLmluZGV4T2YoXCIgXCIsOCkrMTtyKz1zLnNsaWNlKHUscy5pbmRleE9mKFwiKFwiLHUpKX1lbHNle3IrPXM7Zm9yKHZhciBsIGluIGYucHJvdG90eXBlKXIrPVwiO1wiK2grXCIucHJvdG90eXBlLlwiK2wrXCI9XCIrZi5wcm90b3R5cGVbbF0udG9TdHJpbmcoKX1lbHNlIHIrPXN9ZWxzZSB0W2hdPWZ9cmV0dXJuW3IsdF19LFJyPVtdLHJ0PWZ1bmN0aW9uKG4pe3ZhciByPVtdO2Zvcih2YXIgdCBpbiBuKShuW3RdaW5zdGFuY2VvZiBBfHxuW3RdaW5zdGFuY2VvZiBSfHxuW3RdaW5zdGFuY2VvZiBucikmJnIucHVzaCgoblt0XT1uZXcgblt0XS5jb25zdHJ1Y3RvcihuW3RdKSkuYnVmZmVyKTtyZXR1cm4gcn0sWm49ZnVuY3Rpb24obixyLHQsZSl7dmFyIGk7aWYoIVJyW3RdKXtmb3IodmFyIGE9XCJcIixvPXt9LGY9bi5sZW5ndGgtMSxoPTA7aDxmOysraClpPVNuKG5baF0sYSxvKSxhPWlbMF0sbz1pWzFdO1JyW3RdPVNuKG5bZl0sYSxvKX12YXIgcz1acih7fSxSclt0XVsxXSk7cmV0dXJuIGJuKFJyW3RdWzBdK1wiO29ubWVzc2FnZT1mdW5jdGlvbihlKXtmb3IodmFyIGsgaW4gZS5kYXRhKXNlbGZba109ZS5kYXRhW2tdO29ubWVzc2FnZT1cIityLnRvU3RyaW5nKCkrXCJ9XCIsdCxzLHJ0KHMpLGUpfSx3cj1mdW5jdGlvbigpe3JldHVybltBLFIsbnIsdXIsbHIsTXIsTnIsem4sQW4sTW4sVXIsVixHcixYLE9yLENyLCQsRnIseHIsYXIsTHJdfSx5cj1mdW5jdGlvbigpe3JldHVybltBLFIsbnIsdXIsbHIsTXIsSXIsUXIseG4sdHIsRG4sdnIsVXIsVW4sZXIsVixiLGNyLEVyLFByLFZyLHByLFNyLFhyLENyLCQsQ24sc3Isa3IsYXJdfSxrbj1mdW5jdGlvbigpe3JldHVybltfcixybixGLGdyLEZuXX0sQm49ZnVuY3Rpb24oKXtyZXR1cm5bYnIsR25dfSxUbj1mdW5jdGlvbigpe3JldHVybltubixGLCRyXX0sSW49ZnVuY3Rpb24oKXtyZXR1cm5bT25dfSxhcj1mdW5jdGlvbihuKXtyZXR1cm4gcG9zdE1lc3NhZ2Uobixbbi5idWZmZXJdKX0sTHI9ZnVuY3Rpb24obil7cmV0dXJuIG4mJm4uc2l6ZSYmbmV3IEEobi5zaXplKX0sbXI9ZnVuY3Rpb24obixyLHQsZSxpLGEpe3ZhciBvPVpuKHQsZSxpLGZ1bmN0aW9uKGYsaCl7by50ZXJtaW5hdGUoKSxhKGYsaCl9KTtyZXR1cm4gby5wb3N0TWVzc2FnZShbbixyXSxyLmNvbnN1bWU/W24uYnVmZmVyXTpbXSksZnVuY3Rpb24oKXtvLnRlcm1pbmF0ZSgpfX0sTD1mdW5jdGlvbihuKXtyZXR1cm4gbi5vbmRhdGE9ZnVuY3Rpb24ocix0KXtyZXR1cm4gcG9zdE1lc3NhZ2UoW3IsdF0sW3IuYnVmZmVyXSl9LGZ1bmN0aW9uKHIpe3JldHVybiBuLnB1c2goci5kYXRhWzBdLHIuZGF0YVsxXSl9fSx6cj1mdW5jdGlvbihuLHIsdCxlLGkpe3ZhciBhLG89Wm4obixlLGksZnVuY3Rpb24oZixoKXtmPyhvLnRlcm1pbmF0ZSgpLHIub25kYXRhLmNhbGwocixmKSk6KGhbMV0mJm8udGVybWluYXRlKCksci5vbmRhdGEuY2FsbChyLGYsaFswXSxoWzFdKSl9KTtvLnBvc3RNZXNzYWdlKHQpLHIucHVzaD1mdW5jdGlvbihmLGgpe2lmKGEpdGhyb3dcInN0cmVhbSBmaW5pc2hlZFwiO2lmKCFyLm9uZGF0YSl0aHJvd1wibm8gc3RyZWFtIGhhbmRsZXJcIjtvLnBvc3RNZXNzYWdlKFtmLGE9aF0sW2YuYnVmZmVyXSl9LHIudGVybWluYXRlPWZ1bmN0aW9uKCl7by50ZXJtaW5hdGUoKX19LFk9ZnVuY3Rpb24obixyKXtyZXR1cm4gbltyXXxuW3IrMV08PDh9LFA9ZnVuY3Rpb24obixyKXtyZXR1cm4obltyXXxuW3IrMV08PDh8bltyKzJdPDwxNikrKG5bciszXTw8MjMpKjJ9LGRyPWZ1bmN0aW9uKG4scil7cmV0dXJuIFAobixyKXxQKG4scikqNDI5NDk2NzI5Nn0sRj1mdW5jdGlvbihuLHIsdCl7Zm9yKDt0OysrciluW3JdPXQsdD4+Pj04fSxfcj1mdW5jdGlvbihuLHIpe3ZhciB0PXIuZmlsZW5hbWU7aWYoblswXT0zMSxuWzFdPTEzOSxuWzJdPTgsbls4XT1yLmxldmVsPDI/NDpyLmxldmVsPT05PzI6MCxuWzldPTMsci5tdGltZSE9MCYmRihuLDQsTWF0aC5mbG9vcihuZXcgRGF0ZShyLm10aW1lfHxEYXRlLm5vdygpKS8xZTMpKSx0KXtuWzNdPTg7Zm9yKHZhciBlPTA7ZTw9dC5sZW5ndGg7KytlKW5bZSsxMF09dC5jaGFyQ29kZUF0KGUpfX0sYnI9ZnVuY3Rpb24obil7aWYoblswXSE9MzF8fG5bMV0hPTEzOXx8blsyXSE9OCl0aHJvd1wiaW52YWxpZCBnemlwIGRhdGFcIjt2YXIgcj1uWzNdLHQ9MTA7ciY0JiYodCs9blsxMF18KG5bMTFdPDw4KSsyKTtmb3IodmFyIGU9KHI+PjMmMSkrKHI+PjQmMSk7ZT4wO2UtPSFuW3QrK10pO3JldHVybiB0KyhyJjIpfSxHbj1mdW5jdGlvbihuKXt2YXIgcj1uLmxlbmd0aDtyZXR1cm4obltyLTRdfG5bci0zXTw8OHxuW3ItMl08PDE2KSsyKihuW3ItMV08PDIzKX0scm49ZnVuY3Rpb24obil7cmV0dXJuIDEwKyhuLmZpbGVuYW1lJiZuLmZpbGVuYW1lLmxlbmd0aCsxfHwwKX0sbm49ZnVuY3Rpb24obixyKXt2YXIgdD1yLmxldmVsLGU9dD09MD8wOnQ8Nj8xOnQ9PTk/MzoyO25bMF09MTIwLG5bMV09ZTw8NnwoZT8zMi0yKmU6MSl9LE9uPWZ1bmN0aW9uKG4pe2lmKChuWzBdJjE1KSE9OHx8blswXT4+PjQ+N3x8KG5bMF08PDh8blsxXSklMzEpdGhyb3dcImludmFsaWQgemxpYiBkYXRhXCI7aWYoblsxXSYzMil0aHJvd1wiaW52YWxpZCB6bGliIGRhdGE6IHByZXNldCBkaWN0aW9uYXJpZXMgbm90IHN1cHBvcnRlZFwifTtmdW5jdGlvbiB0bihuLHIpe3JldHVybiFyJiZ0eXBlb2Ygbj09XCJmdW5jdGlvblwiJiYocj1uLG49e30pLHRoaXMub25kYXRhPXIsbn12YXIgcnI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBuKHIsdCl7IXQmJnR5cGVvZiByPT1cImZ1bmN0aW9uXCImJih0PXIscj17fSksdGhpcy5vbmRhdGE9dCx0aGlzLm89cnx8e319cmV0dXJuIG4ucHJvdG90eXBlLnA9ZnVuY3Rpb24ocix0KXt0aGlzLm9uZGF0YShzcihyLHRoaXMubywwLDAsIXQpLHQpfSxuLnByb3RvdHlwZS5wdXNoPWZ1bmN0aW9uKHIsdCl7aWYodGhpcy5kKXRocm93XCJzdHJlYW0gZmluaXNoZWRcIjtpZighdGhpcy5vbmRhdGEpdGhyb3dcIm5vIHN0cmVhbSBoYW5kbGVyXCI7dGhpcy5kPXQsdGhpcy5wKHIsdHx8ITEpfSxufSgpLEVuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gbihyLHQpe3pyKFt5cixmdW5jdGlvbigpe3JldHVybltMLHJyXX1dLHRoaXMsdG4uY2FsbCh0aGlzLHIsdCksZnVuY3Rpb24oZSl7dmFyIGk9bmV3IHJyKGUuZGF0YSk7b25tZXNzYWdlPUwoaSl9LDYpfXJldHVybiBufSgpO2Z1bmN0aW9uIFBuKG4scix0KXtpZih0fHwodD1yLHI9e30pLHR5cGVvZiB0IT1cImZ1bmN0aW9uXCIpdGhyb3dcIm5vIGNhbGxiYWNrXCI7cmV0dXJuIG1yKG4scixbeXJdLGZ1bmN0aW9uKGUpe3JldHVybiBhcihrcihlLmRhdGFbMF0sZS5kYXRhWzFdKSl9LDAsdCl9ZnVuY3Rpb24ga3IobixyKXtyZXR1cm4gc3IobixyfHx7fSwwLDApfXZhciBKPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gbihyKXt0aGlzLnM9e30sdGhpcy5wPW5ldyBBKDApLHRoaXMub25kYXRhPXJ9cmV0dXJuIG4ucHJvdG90eXBlLmU9ZnVuY3Rpb24ocil7aWYodGhpcy5kKXRocm93XCJzdHJlYW0gZmluaXNoZWRcIjtpZighdGhpcy5vbmRhdGEpdGhyb3dcIm5vIHN0cmVhbSBoYW5kbGVyXCI7dmFyIHQ9dGhpcy5wLmxlbmd0aCxlPW5ldyBBKHQrci5sZW5ndGgpO2Uuc2V0KHRoaXMucCksZS5zZXQocix0KSx0aGlzLnA9ZX0sbi5wcm90b3R5cGUuYz1mdW5jdGlvbihyKXt0aGlzLmQ9dGhpcy5zLmk9cnx8ITE7dmFyIHQ9dGhpcy5zLmIsZT1Gcih0aGlzLnAsdGhpcy5vLHRoaXMucyk7dGhpcy5vbmRhdGEoJChlLHQsdGhpcy5zLmIpLHRoaXMuZCksdGhpcy5vPSQoZSx0aGlzLnMuYi0zMjc2OCksdGhpcy5zLmI9dGhpcy5vLmxlbmd0aCx0aGlzLnA9JCh0aGlzLnAsdGhpcy5zLnAvOHwwKSx0aGlzLnMucCY9N30sbi5wcm90b3R5cGUucHVzaD1mdW5jdGlvbihyLHQpe3RoaXMuZShyKSx0aGlzLmModCl9LG59KCksZW49ZnVuY3Rpb24oKXtmdW5jdGlvbiBuKHIpe3RoaXMub25kYXRhPXIsenIoW3dyLGZ1bmN0aW9uKCl7cmV0dXJuW0wsSl19XSx0aGlzLDAsZnVuY3Rpb24oKXt2YXIgdD1uZXcgSjtvbm1lc3NhZ2U9TCh0KX0sNyl9cmV0dXJuIG59KCk7ZnVuY3Rpb24gYW4obixyLHQpe2lmKHR8fCh0PXIscj17fSksdHlwZW9mIHQhPVwiZnVuY3Rpb25cIil0aHJvd1wibm8gY2FsbGJhY2tcIjtyZXR1cm4gbXIobixyLFt3cl0sZnVuY3Rpb24oZSl7cmV0dXJuIGFyKHhyKGUuZGF0YVswXSxMcihlLmRhdGFbMV0pKSl9LDEsdCl9ZnVuY3Rpb24geHIobixyKXtyZXR1cm4gRnIobixyKX12YXIgcXI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBuKHIsdCl7dGhpcy5jPWdyKCksdGhpcy5sPTAsdGhpcy52PTEscnIuY2FsbCh0aGlzLHIsdCl9cmV0dXJuIG4ucHJvdG90eXBlLnB1c2g9ZnVuY3Rpb24ocix0KXtyci5wcm90b3R5cGUucHVzaC5jYWxsKHRoaXMscix0KX0sbi5wcm90b3R5cGUucD1mdW5jdGlvbihyLHQpe3RoaXMuYy5wKHIpLHRoaXMubCs9ci5sZW5ndGg7dmFyIGU9c3Iocix0aGlzLm8sdGhpcy52JiZybih0aGlzLm8pLHQmJjgsIXQpO3RoaXMudiYmKF9yKGUsdGhpcy5vKSx0aGlzLnY9MCksdCYmKEYoZSxlLmxlbmd0aC04LHRoaXMuYy5kKCkpLEYoZSxlLmxlbmd0aC00LHRoaXMubCkpLHRoaXMub25kYXRhKGUsdCl9LG59KCksUm49ZnVuY3Rpb24oKXtmdW5jdGlvbiBuKHIsdCl7enIoW3lyLGtuLGZ1bmN0aW9uKCl7cmV0dXJuW0wscnIscXJdfV0sdGhpcyx0bi5jYWxsKHRoaXMscix0KSxmdW5jdGlvbihlKXt2YXIgaT1uZXcgcXIoZS5kYXRhKTtvbm1lc3NhZ2U9TChpKX0sOCl9cmV0dXJuIG59KCk7ZnVuY3Rpb24gcW4obixyLHQpe2lmKHR8fCh0PXIscj17fSksdHlwZW9mIHQhPVwiZnVuY3Rpb25cIil0aHJvd1wibm8gY2FsbGJhY2tcIjtyZXR1cm4gbXIobixyLFt5cixrbixmdW5jdGlvbigpe3JldHVybltIcl19XSxmdW5jdGlvbihlKXtyZXR1cm4gYXIoSHIoZS5kYXRhWzBdLGUuZGF0YVsxXSkpfSwyLHQpfWZ1bmN0aW9uIEhyKG4scil7cnx8KHI9e30pO3ZhciB0PWdyKCksZT1uLmxlbmd0aDt0LnAobik7dmFyIGk9c3IobixyLHJuKHIpLDgpLGE9aS5sZW5ndGg7cmV0dXJuIF9yKGksciksRihpLGEtOCx0LmQoKSksRihpLGEtNCxlKSxpfXZhciBXcj1mdW5jdGlvbigpe2Z1bmN0aW9uIG4ocil7dGhpcy52PTEsSi5jYWxsKHRoaXMscil9cmV0dXJuIG4ucHJvdG90eXBlLnB1c2g9ZnVuY3Rpb24ocix0KXtpZihKLnByb3RvdHlwZS5lLmNhbGwodGhpcyxyKSx0aGlzLnYpe3ZhciBlPXRoaXMucC5sZW5ndGg+Mz9icih0aGlzLnApOjQ7aWYoZT49dGhpcy5wLmxlbmd0aCYmIXQpcmV0dXJuO3RoaXMucD10aGlzLnAuc3ViYXJyYXkoZSksdGhpcy52PTB9aWYodCl7aWYodGhpcy5wLmxlbmd0aDw4KXRocm93XCJpbnZhbGlkIGd6aXAgc3RyZWFtXCI7dGhpcy5wPXRoaXMucC5zdWJhcnJheSgwLC04KX1KLnByb3RvdHlwZS5jLmNhbGwodGhpcyx0KX0sbn0oKSxIbj1mdW5jdGlvbigpe2Z1bmN0aW9uIG4ocil7dGhpcy5vbmRhdGE9cix6cihbd3IsQm4sZnVuY3Rpb24oKXtyZXR1cm5bTCxKLFdyXX1dLHRoaXMsMCxmdW5jdGlvbigpe3ZhciB0PW5ldyBXcjtvbm1lc3NhZ2U9TCh0KX0sOSl9cmV0dXJuIG59KCk7ZnVuY3Rpb24gV24obixyLHQpe2lmKHR8fCh0PXIscj17fSksdHlwZW9mIHQhPVwiZnVuY3Rpb25cIil0aHJvd1wibm8gY2FsbGJhY2tcIjtyZXR1cm4gbXIobixyLFt3cixCbixmdW5jdGlvbigpe3JldHVybltZcl19XSxmdW5jdGlvbihlKXtyZXR1cm4gYXIoWXIoZS5kYXRhWzBdKSl9LDMsdCl9ZnVuY3Rpb24gWXIobixyKXtyZXR1cm4gRnIobi5zdWJhcnJheShicihuKSwtOCkscnx8bmV3IEEoR24obikpKX12YXIgb249ZnVuY3Rpb24oKXtmdW5jdGlvbiBuKHIsdCl7dGhpcy5jPSRyKCksdGhpcy52PTEscnIuY2FsbCh0aGlzLHIsdCl9cmV0dXJuIG4ucHJvdG90eXBlLnB1c2g9ZnVuY3Rpb24ocix0KXtyci5wcm90b3R5cGUucHVzaC5jYWxsKHRoaXMscix0KX0sbi5wcm90b3R5cGUucD1mdW5jdGlvbihyLHQpe3RoaXMuYy5wKHIpO3ZhciBlPXNyKHIsdGhpcy5vLHRoaXMudiYmMix0JiY0LCF0KTt0aGlzLnYmJihubihlLHRoaXMubyksdGhpcy52PTApLHQmJkYoZSxlLmxlbmd0aC00LHRoaXMuYy5kKCkpLHRoaXMub25kYXRhKGUsdCl9LG59KCksbnQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiBuKHIsdCl7enIoW3lyLFRuLGZ1bmN0aW9uKCl7cmV0dXJuW0wscnIsb25dfV0sdGhpcyx0bi5jYWxsKHRoaXMscix0KSxmdW5jdGlvbihlKXt2YXIgaT1uZXcgb24oZS5kYXRhKTtvbm1lc3NhZ2U9TChpKX0sMTApfXJldHVybiBufSgpO2Z1bmN0aW9uIHR0KG4scix0KXtpZih0fHwodD1yLHI9e30pLHR5cGVvZiB0IT1cImZ1bmN0aW9uXCIpdGhyb3dcIm5vIGNhbGxiYWNrXCI7cmV0dXJuIG1yKG4scixbeXIsVG4sZnVuY3Rpb24oKXtyZXR1cm5bZm5dfV0sZnVuY3Rpb24oZSl7cmV0dXJuIGFyKGZuKGUuZGF0YVswXSxlLmRhdGFbMV0pKX0sNCx0KX1mdW5jdGlvbiBmbihuLHIpe3J8fChyPXt9KTt2YXIgdD0kcigpO3QucChuKTt2YXIgZT1zcihuLHIsMiw0KTtyZXR1cm4gbm4oZSxyKSxGKGUsZS5sZW5ndGgtNCx0LmQoKSksZX12YXIganI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBuKHIpe3RoaXMudj0xLEouY2FsbCh0aGlzLHIpfXJldHVybiBuLnByb3RvdHlwZS5wdXNoPWZ1bmN0aW9uKHIsdCl7aWYoSi5wcm90b3R5cGUuZS5jYWxsKHRoaXMsciksdGhpcy52KXtpZih0aGlzLnAubGVuZ3RoPDImJiF0KXJldHVybjt0aGlzLnA9dGhpcy5wLnN1YmFycmF5KDIpLHRoaXMudj0wfWlmKHQpe2lmKHRoaXMucC5sZW5ndGg8NCl0aHJvd1wiaW52YWxpZCB6bGliIHN0cmVhbVwiO3RoaXMucD10aGlzLnAuc3ViYXJyYXkoMCwtNCl9Si5wcm90b3R5cGUuYy5jYWxsKHRoaXMsdCl9LG59KCksWW49ZnVuY3Rpb24oKXtmdW5jdGlvbiBuKHIpe3RoaXMub25kYXRhPXIsenIoW3dyLEluLGZ1bmN0aW9uKCl7cmV0dXJuW0wsSixqcl19XSx0aGlzLDAsZnVuY3Rpb24oKXt2YXIgdD1uZXcganI7b25tZXNzYWdlPUwodCl9LDExKX1yZXR1cm4gbn0oKTtmdW5jdGlvbiBqbihuLHIsdCl7aWYodHx8KHQ9cixyPXt9KSx0eXBlb2YgdCE9XCJmdW5jdGlvblwiKXRocm93XCJubyBjYWxsYmFja1wiO3JldHVybiBtcihuLHIsW3dyLEluLGZ1bmN0aW9uKCl7cmV0dXJuW0pyXX1dLGZ1bmN0aW9uKGUpe3JldHVybiBhcihKcihlLmRhdGFbMF0sTHIoZS5kYXRhWzFdKSkpfSw1LHQpfWZ1bmN0aW9uIEpyKG4scil7cmV0dXJuIEZyKChPbihuKSxuLnN1YmFycmF5KDIsLTQpKSxyKX12YXIgSm49ZnVuY3Rpb24oKXtmdW5jdGlvbiBuKHIpe3RoaXMuRz1Xcix0aGlzLkk9Six0aGlzLlo9anIsdGhpcy5vbmRhdGE9cn1yZXR1cm4gbi5wcm90b3R5cGUucHVzaD1mdW5jdGlvbihyLHQpe2lmKCF0aGlzLm9uZGF0YSl0aHJvd1wibm8gc3RyZWFtIGhhbmRsZXJcIjtpZih0aGlzLnMpdGhpcy5zLnB1c2gocix0KTtlbHNle2lmKHRoaXMucCYmdGhpcy5wLmxlbmd0aCl7dmFyIGU9bmV3IEEodGhpcy5wLmxlbmd0aCtyLmxlbmd0aCk7ZS5zZXQodGhpcy5wKSxlLnNldChyLHRoaXMucC5sZW5ndGgpfWVsc2UgdGhpcy5wPXI7aWYodGhpcy5wLmxlbmd0aD4yKXt2YXIgaT10aGlzLGE9ZnVuY3Rpb24oKXtpLm9uZGF0YS5hcHBseShpLGFyZ3VtZW50cyl9O3RoaXMucz10aGlzLnBbMF09PTMxJiZ0aGlzLnBbMV09PTEzOSYmdGhpcy5wWzJdPT04P25ldyB0aGlzLkcoYSk6KHRoaXMucFswXSYxNSkhPTh8fHRoaXMucFswXT4+ND43fHwodGhpcy5wWzBdPDw4fHRoaXMucFsxXSklMzE/bmV3IHRoaXMuSShhKTpuZXcgdGhpcy5aKGEpLHRoaXMucy5wdXNoKHRoaXMucCx0KSx0aGlzLnA9bnVsbH19fSxufSgpLGV0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gbihyKXt0aGlzLkc9SG4sdGhpcy5JPWVuLHRoaXMuWj1Zbix0aGlzLm9uZGF0YT1yfXJldHVybiBuLnByb3RvdHlwZS5wdXNoPWZ1bmN0aW9uKHIsdCl7Sm4ucHJvdG90eXBlLnB1c2guY2FsbCh0aGlzLHIsdCl9LG59KCk7ZnVuY3Rpb24gaXQobixyLHQpe2lmKHR8fCh0PXIscj17fSksdHlwZW9mIHQhPVwiZnVuY3Rpb25cIil0aHJvd1wibm8gY2FsbGJhY2tcIjtyZXR1cm4gblswXT09MzEmJm5bMV09PTEzOSYmblsyXT09OD9XbihuLHIsdCk6KG5bMF0mMTUpIT04fHxuWzBdPj40Pjd8fChuWzBdPDw4fG5bMV0pJTMxP2FuKG4scix0KTpqbihuLHIsdCl9ZnVuY3Rpb24gYXQobixyKXtyZXR1cm4gblswXT09MzEmJm5bMV09PTEzOSYmblsyXT09OD9ZcihuLHIpOihuWzBdJjE1KSE9OHx8blswXT4+ND43fHwoblswXTw8OHxuWzFdKSUzMT94cihuLHIpOkpyKG4scil9dmFyIHNuPWZ1bmN0aW9uKG4scix0LGUpe2Zvcih2YXIgaSBpbiBuKXt2YXIgYT1uW2ldLG89citpO2EgaW5zdGFuY2VvZiBBP3Rbb109W2EsZV06QXJyYXkuaXNBcnJheShhKT90W29dPVthWzBdLFpyKGUsYVsxXSldOnNuKGEsbytcIi9cIix0LGUpfX0sS249dHlwZW9mIFRleHRFbmNvZGVyIT1cInVuZGVmaW5lZFwiJiZuZXcgVGV4dEVuY29kZXIsaG49dHlwZW9mIFRleHREZWNvZGVyIT1cInVuZGVmaW5lZFwiJiZuZXcgVGV4dERlY29kZXIsTm49MDt0cnl7aG4uZGVjb2RlKGVyLHtzdHJlYW06ITB9KSxObj0xfWNhdGNoKG4pe312YXIgUW49ZnVuY3Rpb24obil7Zm9yKHZhciByPVwiXCIsdD0wOzspe3ZhciBlPW5bdCsrXSxpPShlPjEyNykrKGU+MjIzKSsoZT4yMzkpO2lmKHQraT5uLmxlbmd0aClyZXR1cm5bciwkKG4sdC0xKV07aT9pPT0zPyhlPSgoZSYxNSk8PDE4fChuW3QrK10mNjMpPDwxMnwoblt0KytdJjYzKTw8NnxuW3QrK10mNjMpLTY1NTM2LHIrPVN0cmluZy5mcm9tQ2hhckNvZGUoNTUyOTZ8ZT4+MTAsNTYzMjB8ZSYxMDIzKSk6aSYxP3IrPVN0cmluZy5mcm9tQ2hhckNvZGUoKGUmMzEpPDw2fG5bdCsrXSY2Myk6cis9U3RyaW5nLmZyb21DaGFyQ29kZSgoZSYxNSk8PDEyfChuW3QrK10mNjMpPDw2fG5bdCsrXSY2Myk6cis9U3RyaW5nLmZyb21DaGFyQ29kZShlKX19LG90PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gbihyKXt0aGlzLm9uZGF0YT1yLE5uP3RoaXMudD1uZXcgVGV4dERlY29kZXI6dGhpcy5wPWVyfXJldHVybiBuLnByb3RvdHlwZS5wdXNoPWZ1bmN0aW9uKHIsdCl7aWYoIXRoaXMub25kYXRhKXRocm93XCJubyBjYWxsYmFja1wiO2lmKHR8fCh0PSExKSx0aGlzLnQpcmV0dXJuIHRoaXMub25kYXRhKHRoaXMudC5kZWNvZGUocix7c3RyZWFtOiF0fSksdCk7dmFyIGU9bmV3IEEodGhpcy5wLmxlbmd0aCtyLmxlbmd0aCk7ZS5zZXQodGhpcy5wKSxlLnNldChyLHRoaXMucC5sZW5ndGgpO3ZhciBpPVFuKGUpLGE9aVswXSxvPWlbMV07aWYodCYmby5sZW5ndGgpdGhyb3dcImludmFsaWQgdXRmLTggZGF0YVwiO3RoaXMucD1vLHRoaXMub25kYXRhKGEsdCl9LG59KCksZnQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiBuKHIpe3RoaXMub25kYXRhPXJ9cmV0dXJuIG4ucHJvdG90eXBlLnB1c2g9ZnVuY3Rpb24ocix0KXtpZighdGhpcy5vbmRhdGEpdGhyb3dcIm5vIGNhbGxiYWNrXCI7dGhpcy5vbmRhdGEob3IociksdHx8ITEpfSxufSgpO2Z1bmN0aW9uIG9yKG4scil7aWYocil7Zm9yKHZhciB0PW5ldyBBKG4ubGVuZ3RoKSxlPTA7ZTxuLmxlbmd0aDsrK2UpdFtlXT1uLmNoYXJDb2RlQXQoZSk7cmV0dXJuIHR9aWYoS24pcmV0dXJuIEtuLmVuY29kZShuKTtmb3IodmFyIGk9bi5sZW5ndGgsYT1uZXcgQShuLmxlbmd0aCsobi5sZW5ndGg+PjEpKSxvPTAsZj1mdW5jdGlvbih1KXthW28rK109dX0sZT0wO2U8aTsrK2Upe2lmKG8rNT5hLmxlbmd0aCl7dmFyIGg9bmV3IEEobys4KyhpLWU8PDEpKTtoLnNldChhKSxhPWh9dmFyIHM9bi5jaGFyQ29kZUF0KGUpO3M8MTI4fHxyP2Yocyk6czwyMDQ4PyhmKDE5MnxzPj4+NiksZigxMjh8cyY2MykpOnM+NTUyOTUmJnM8NTczNDQ/KHM9NjU1MzYrKHMmMTAyMzw8MTApfG4uY2hhckNvZGVBdCgrK2UpJjEwMjMsZigyNDB8cz4+PjE4KSxmKDEyOHxzPj4+MTImNjMpLGYoMTI4fHM+Pj42JjYzKSxmKDEyOHxzJjYzKSk6KGYoMjI0fHM+Pj4xMiksZigxMjh8cz4+PjYmNjMpLGYoMTI4fHMmNjMpKX1yZXR1cm4gJChhLDAsbyl9ZnVuY3Rpb24gdW4obixyKXtpZihyKXtmb3IodmFyIHQ9XCJcIixlPTA7ZTxuLmxlbmd0aDtlKz0xNjM4NCl0Kz1TdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsbi5zdWJhcnJheShlLGUrMTYzODQpKTtyZXR1cm4gdH1lbHNle2lmKGhuKXJldHVybiBobi5kZWNvZGUobik7dmFyIGk9UW4obiksYT1pWzBdLG89aVsxXTtpZihvLmxlbmd0aCl0aHJvd1wiaW52YWxpZCB1dGYtOCBkYXRhXCI7cmV0dXJuIGF9fXZhciBWbj1mdW5jdGlvbihuKXtyZXR1cm4gbj09MT8zOm48Nj8yOm49PTk/MTowfSxYbj1mdW5jdGlvbihuLHIpe3JldHVybiByKzMwK1kobixyKzI2KStZKG4scisyOCl9LCRuPWZ1bmN0aW9uKG4scix0KXt2YXIgZT1ZKG4scisyOCksaT11bihuLnN1YmFycmF5KHIrNDYscis0NitlKSwhKFkobixyKzgpJjIwNDgpKSxhPXIrNDYrZSxvPVAobixyKzIwKSxmPXQmJm89PTQyOTQ5NjcyOTU/TG4obixhKTpbbyxQKG4scisyNCksUChuLHIrNDIpXSxoPWZbMF0scz1mWzFdLHU9ZlsyXTtyZXR1cm5bWShuLHIrMTApLGgscyxpLGErWShuLHIrMzApK1kobixyKzMyKSx1XX0sTG49ZnVuY3Rpb24obixyKXtmb3IoO1kobixyKSE9MTtyKz00K1kobixyKzIpKTtyZXR1cm5bZHIobixyKzEyKSxkcihuLHIrNCksZHIobixyKzIwKV19LGZyPWZ1bmN0aW9uKG4pe3ZhciByPTA7aWYobilmb3IodmFyIHQgaW4gbil7dmFyIGU9blt0XS5sZW5ndGg7aWYoZT42NTUzNSl0aHJvd1wiZXh0cmEgZmllbGQgdG9vIGxvbmdcIjtyKz1lKzR9cmV0dXJuIHJ9LEFyPWZ1bmN0aW9uKG4scix0LGUsaSxhLG8sZil7dmFyIGg9ZS5sZW5ndGgscz10LmV4dHJhLHU9ZiYmZi5sZW5ndGgsbD1mcihzKTtGKG4scixvIT1udWxsPzMzNjM5MjQ4OjY3MzI0NzUyKSxyKz00LG8hPW51bGwmJihuW3IrK109MjAsbltyKytdPXQub3MpLG5bcl09MjAscis9MixuW3IrK109dC5mbGFnPDwxfChhPT1udWxsJiY4KSxuW3IrK109aSYmOCxuW3IrK109dC5jb21wcmVzc2lvbiYyNTUsbltyKytdPXQuY29tcHJlc3Npb24+Pjg7dmFyIHA9bmV3IERhdGUodC5tdGltZT09bnVsbD9EYXRlLm5vdygpOnQubXRpbWUpLHk9cC5nZXRGdWxsWWVhcigpLTE5ODA7aWYoeTwwfHx5PjExOSl0aHJvd1wiZGF0ZSBub3QgaW4gcmFuZ2UgMTk4MC0yMDk5XCI7aWYoRihuLHIsKHk8PDI0KSoyfHAuZ2V0TW9udGgoKSsxPDwyMXxwLmdldERhdGUoKTw8MTZ8cC5nZXRIb3VycygpPDwxMXxwLmdldE1pbnV0ZXMoKTw8NXxwLmdldFNlY29uZHMoKT4+PjEpLHIrPTQsYSE9bnVsbCYmKEYobixyLHQuY3JjKSxGKG4scis0LGEpLEYobixyKzgsdC5zaXplKSksRihuLHIrMTIsaCksRihuLHIrMTQsbCkscis9MTYsbyE9bnVsbCYmKEYobixyLHUpLEYobixyKzYsdC5hdHRycyksRihuLHIrMTAsbykscis9MTQpLG4uc2V0KGUscikscis9aCxsKWZvcih2YXIgYyBpbiBzKXt2YXIgZz1zW2NdLHc9Zy5sZW5ndGg7RihuLHIsK2MpLEYobixyKzIsdyksbi5zZXQoZyxyKzQpLHIrPTQrd31yZXR1cm4gdSYmKG4uc2V0KGYscikscis9dSkscn0sbG49ZnVuY3Rpb24obixyLHQsZSxpKXtGKG4sciwxMDEwMTAyNTYpLEYobixyKzgsdCksRihuLHIrMTAsdCksRihuLHIrMTIsZSksRihuLHIrMTYsaSl9LEJyPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gbihyKXt0aGlzLmZpbGVuYW1lPXIsdGhpcy5jPWdyKCksdGhpcy5zaXplPTAsdGhpcy5jb21wcmVzc2lvbj0wfXJldHVybiBuLnByb3RvdHlwZS5wcm9jZXNzPWZ1bmN0aW9uKHIsdCl7dGhpcy5vbmRhdGEobnVsbCxyLHQpfSxuLnByb3RvdHlwZS5wdXNoPWZ1bmN0aW9uKHIsdCl7aWYoIXRoaXMub25kYXRhKXRocm93XCJubyBjYWxsYmFjayAtIGFkZCB0byBaSVAgYXJjaGl2ZSBiZWZvcmUgcHVzaGluZ1wiO3RoaXMuYy5wKHIpLHRoaXMuc2l6ZSs9ci5sZW5ndGgsdCYmKHRoaXMuY3JjPXRoaXMuYy5kKCkpLHRoaXMucHJvY2VzcyhyLHR8fCExKX0sbn0oKSxzdD1mdW5jdGlvbigpe2Z1bmN0aW9uIG4ocix0KXt2YXIgZT10aGlzO3R8fCh0PXt9KSxCci5jYWxsKHRoaXMsciksdGhpcy5kPW5ldyBycih0LGZ1bmN0aW9uKGksYSl7ZS5vbmRhdGEobnVsbCxpLGEpfSksdGhpcy5jb21wcmVzc2lvbj04LHRoaXMuZmxhZz1Wbih0LmxldmVsKX1yZXR1cm4gbi5wcm90b3R5cGUucHJvY2Vzcz1mdW5jdGlvbihyLHQpe3RyeXt0aGlzLmQucHVzaChyLHQpfWNhdGNoKGUpe3RoaXMub25kYXRhKGUsbnVsbCx0KX19LG4ucHJvdG90eXBlLnB1c2g9ZnVuY3Rpb24ocix0KXtCci5wcm90b3R5cGUucHVzaC5jYWxsKHRoaXMscix0KX0sbn0oKSxodD1mdW5jdGlvbigpe2Z1bmN0aW9uIG4ocix0KXt2YXIgZT10aGlzO3R8fCh0PXt9KSxCci5jYWxsKHRoaXMsciksdGhpcy5kPW5ldyBFbih0LGZ1bmN0aW9uKGksYSxvKXtlLm9uZGF0YShpLGEsbyl9KSx0aGlzLmNvbXByZXNzaW9uPTgsdGhpcy5mbGFnPVZuKHQubGV2ZWwpLHRoaXMudGVybWluYXRlPXRoaXMuZC50ZXJtaW5hdGV9cmV0dXJuIG4ucHJvdG90eXBlLnByb2Nlc3M9ZnVuY3Rpb24ocix0KXt0aGlzLmQucHVzaChyLHQpfSxuLnByb3RvdHlwZS5wdXNoPWZ1bmN0aW9uKHIsdCl7QnIucHJvdG90eXBlLnB1c2guY2FsbCh0aGlzLHIsdCl9LG59KCksdXQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiBuKHIpe3RoaXMub25kYXRhPXIsdGhpcy51PVtdLHRoaXMuZD0xfXJldHVybiBuLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24ocil7dmFyIHQ9dGhpcztpZih0aGlzLmQmMil0aHJvd1wic3RyZWFtIGZpbmlzaGVkXCI7dmFyIGU9b3Ioci5maWxlbmFtZSksaT1lLmxlbmd0aCxhPXIuY29tbWVudCxvPWEmJm9yKGEpLGY9aSE9ci5maWxlbmFtZS5sZW5ndGh8fG8mJmEubGVuZ3RoIT1vLmxlbmd0aCxoPWkrZnIoci5leHRyYSkrMzA7aWYoaT42NTUzNSl0aHJvd1wiZmlsZW5hbWUgdG9vIGxvbmdcIjt2YXIgcz1uZXcgQShoKTtBcihzLDAscixlLGYpO3ZhciB1PVtzXSxsPWZ1bmN0aW9uKCl7Zm9yKHZhciB3PTAsTT11O3c8TS5sZW5ndGg7dysrKXt2YXIgej1NW3ddO3Qub25kYXRhKG51bGwseiwhMSl9dT1bXX0scD10aGlzLmQ7dGhpcy5kPTA7dmFyIHk9dGhpcy51Lmxlbmd0aCxjPVpyKHIse2Y6ZSx1OmYsbyx0OmZ1bmN0aW9uKCl7ci50ZXJtaW5hdGUmJnIudGVybWluYXRlKCl9LHI6ZnVuY3Rpb24oKXtpZihsKCkscCl7dmFyIHc9dC51W3krMV07dz93LnIoKTp0LmQ9MX1wPTF9fSksZz0wO3Iub25kYXRhPWZ1bmN0aW9uKHcsTSx6KXtpZih3KXQub25kYXRhKHcsTSx6KSx0LnRlcm1pbmF0ZSgpO2Vsc2UgaWYoZys9TS5sZW5ndGgsdS5wdXNoKE0pLHope3ZhciBtPW5ldyBBKDE2KTtGKG0sMCwxMzQ2OTU3NjApLEYobSw0LHIuY3JjKSxGKG0sOCxnKSxGKG0sMTIsci5zaXplKSx1LnB1c2gobSksYy5jPWcsYy5iPWgrZysxNixjLmNyYz1yLmNyYyxjLnNpemU9ci5zaXplLHAmJmMucigpLHA9MX1lbHNlIHAmJmwoKX0sdGhpcy51LnB1c2goYyl9LG4ucHJvdG90eXBlLmVuZD1mdW5jdGlvbigpe3ZhciByPXRoaXM7aWYodGhpcy5kJjIpdGhyb3cgdGhpcy5kJjE/XCJzdHJlYW0gZmluaXNoaW5nXCI6XCJzdHJlYW0gZmluaXNoZWRcIjt0aGlzLmQ/dGhpcy5lKCk6dGhpcy51LnB1c2goe3I6ZnVuY3Rpb24oKXtpZighKHIuZCYxKSlyZXR1cm47ci51LnNwbGljZSgtMSwxKSxyLmUoKX0sdDpmdW5jdGlvbigpe319KSx0aGlzLmQ9M30sbi5wcm90b3R5cGUuZT1mdW5jdGlvbigpe2Zvcih2YXIgcj0wLHQ9MCxlPTAsaT0wLGE9dGhpcy51O2k8YS5sZW5ndGg7aSsrKXt2YXIgbz1hW2ldO2UrPTQ2K28uZi5sZW5ndGgrZnIoby5leHRyYSkrKG8ubz9vLm8ubGVuZ3RoOjApfWZvcih2YXIgZj1uZXcgQShlKzIyKSxoPTAscz10aGlzLnU7aDxzLmxlbmd0aDtoKyspe3ZhciBvPXNbaF07QXIoZixyLG8sby5mLG8udSxvLmMsdCxvLm8pLHIrPTQ2K28uZi5sZW5ndGgrZnIoby5leHRyYSkrKG8ubz9vLm8ubGVuZ3RoOjApLHQrPW8uYn1sbihmLHIsdGhpcy51Lmxlbmd0aCxlLHQpLHRoaXMub25kYXRhKG51bGwsZiwhMCksdGhpcy5kPTJ9LG4ucHJvdG90eXBlLnRlcm1pbmF0ZT1mdW5jdGlvbigpe2Zvcih2YXIgcj0wLHQ9dGhpcy51O3I8dC5sZW5ndGg7cisrKXt2YXIgZT10W3JdO2UudCgpfXRoaXMuZD0yfSxufSgpO2Z1bmN0aW9uIGx0KG4scix0KXtpZih0fHwodD1yLHI9e30pLHR5cGVvZiB0IT1cImZ1bmN0aW9uXCIpdGhyb3dcIm5vIGNhbGxiYWNrXCI7dmFyIGU9e307c24obixcIlwiLGUscik7dmFyIGk9T2JqZWN0LmtleXMoZSksYT1pLmxlbmd0aCxvPTAsZj0wLGg9YSxzPW5ldyBBcnJheShhKSx1PVtdLGw9ZnVuY3Rpb24oKXtmb3IodmFyIGc9MDtnPHUubGVuZ3RoOysrZyl1W2ddKCl9LHA9ZnVuY3Rpb24oKXt2YXIgZz1uZXcgQShmKzIyKSx3PW8sTT1mLW87Zj0wO2Zvcih2YXIgej0wO3o8aDsrK3ope3ZhciBtPXNbel07dHJ5e3ZhciBEPW0uYy5sZW5ndGg7QXIoZyxmLG0sbS5mLG0udSxEKTt2YXIgQz0zMCttLmYubGVuZ3RoK2ZyKG0uZXh0cmEpLFU9ZitDO2cuc2V0KG0uYyxVKSxBcihnLG8sbSxtLmYsbS51LEQsZixtLm0pLG8rPTE2K0MrKG0ubT9tLm0ubGVuZ3RoOjApLGY9VStEfWNhdGNoKHgpe3JldHVybiB0KHgsbnVsbCl9fWxuKGcsbyxzLmxlbmd0aCxNLHcpLHQobnVsbCxnKX07YXx8cCgpO2Zvcih2YXIgeT1mdW5jdGlvbihnKXt2YXIgdz1pW2ddLE09ZVt3XSx6PU1bMF0sbT1NWzFdLEQ9Z3IoKSxDPXoubGVuZ3RoO0QucCh6KTt2YXIgVT1vcih3KSx4PVUubGVuZ3RoLHY9bS5jb21tZW50LEU9diYmb3IodiksUz1FJiZFLmxlbmd0aCxLPWZyKG0uZXh0cmEpLEk9bS5sZXZlbD09MD8wOjgsWj1mdW5jdGlvbihCLEcpe2lmKEIpbCgpLHQoQixudWxsKTtlbHNle3ZhciBrPUcubGVuZ3RoO3NbZ109WnIobSx7c2l6ZTpDLGNyYzpELmQoKSxjOkcsZjpVLG06RSx1OnghPXcubGVuZ3RofHxFJiZ2Lmxlbmd0aCE9Uyxjb21wcmVzc2lvbjpJfSksbys9MzAreCtLK2ssZis9NzYrMiooeCtLKSsoU3x8MCkraywtLWF8fHAoKX19O2lmKHg+NjU1MzUmJlooXCJmaWxlbmFtZSB0b28gbG9uZ1wiLG51bGwpLCFJKVoobnVsbCx6KTtlbHNlIGlmKEM8MTZlNCl0cnl7WihudWxsLGtyKHosbSkpfWNhdGNoKEIpe1ooQixudWxsKX1lbHNlIHUucHVzaChQbih6LG0sWikpfSxjPTA7YzxoOysrYyl5KGMpO3JldHVybiBsfWZ1bmN0aW9uIHZ0KG4scil7cnx8KHI9e30pO3ZhciB0PXt9LGU9W107c24obixcIlwiLHQscik7dmFyIGk9MCxhPTA7Zm9yKHZhciBvIGluIHQpe3ZhciBmPXRbb10saD1mWzBdLHM9ZlsxXSx1PXMubGV2ZWw9PTA/MDo4LGw9b3IobykscD1sLmxlbmd0aCx5PXMuY29tbWVudCxjPXkmJm9yKHkpLGc9YyYmYy5sZW5ndGgsdz1mcihzLmV4dHJhKTtpZihwPjY1NTM1KXRocm93XCJmaWxlbmFtZSB0b28gbG9uZ1wiO3ZhciBNPXU/a3IoaCxzKTpoLHo9TS5sZW5ndGgsbT1ncigpO20ucChoKSxlLnB1c2goWnIocyx7c2l6ZTpoLmxlbmd0aCxjcmM6bS5kKCksYzpNLGY6bCxtOmMsdTpwIT1vLmxlbmd0aHx8YyYmeS5sZW5ndGghPWcsbzppLGNvbXByZXNzaW9uOnV9KSksaSs9MzArcCt3K3osYSs9NzYrMioocCt3KSsoZ3x8MCkren1mb3IodmFyIEQ9bmV3IEEoYSsyMiksQz1pLFU9YS1pLHg9MDt4PGUubGVuZ3RoOysreCl7dmFyIGw9ZVt4XTtBcihELGwubyxsLGwuZixsLnUsbC5jLmxlbmd0aCk7dmFyIHY9MzArbC5mLmxlbmd0aCtmcihsLmV4dHJhKTtELnNldChsLmMsbC5vK3YpLEFyKEQsaSxsLGwuZixsLnUsbC5jLmxlbmd0aCxsLm8sbC5tKSxpKz0xNit2KyhsLm0/bC5tLmxlbmd0aDowKX1yZXR1cm4gbG4oRCxpLGUubGVuZ3RoLFUsQyksRH12YXIgZG49ZnVuY3Rpb24oKXtmdW5jdGlvbiBuKCl7fXJldHVybiBuLnByb3RvdHlwZS5wdXNoPWZ1bmN0aW9uKHIsdCl7dGhpcy5vbmRhdGEobnVsbCxyLHQpfSxuLmNvbXByZXNzaW9uPTAsbn0oKSxjdD1mdW5jdGlvbigpe2Z1bmN0aW9uIG4oKXt2YXIgcj10aGlzO3RoaXMuaT1uZXcgSihmdW5jdGlvbih0LGUpe3Iub25kYXRhKG51bGwsdCxlKX0pfXJldHVybiBuLnByb3RvdHlwZS5wdXNoPWZ1bmN0aW9uKHIsdCl7dHJ5e3RoaXMuaS5wdXNoKHIsdCl9Y2F0Y2goZSl7dGhpcy5vbmRhdGEoZSxyLHQpfX0sbi5jb21wcmVzc2lvbj04LG59KCkscHQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiBuKHIsdCl7dmFyIGU9dGhpczt0PDMyZTQ/dGhpcy5pPW5ldyBKKGZ1bmN0aW9uKGksYSl7ZS5vbmRhdGEobnVsbCxpLGEpfSk6KHRoaXMuaT1uZXcgZW4oZnVuY3Rpb24oaSxhLG8pe2Uub25kYXRhKGksYSxvKX0pLHRoaXMudGVybWluYXRlPXRoaXMuaS50ZXJtaW5hdGUpfXJldHVybiBuLnByb3RvdHlwZS5wdXNoPWZ1bmN0aW9uKHIsdCl7dGhpcy5pLnRlcm1pbmF0ZSYmKHI9JChyLDApKSx0aGlzLmkucHVzaChyLHQpfSxuLmNvbXByZXNzaW9uPTgsbn0oKSxndD1mdW5jdGlvbigpe2Z1bmN0aW9uIG4ocil7dGhpcy5vbmZpbGU9cix0aGlzLms9W10sdGhpcy5vPXswOmRufSx0aGlzLnA9ZXJ9cmV0dXJuIG4ucHJvdG90eXBlLnB1c2g9ZnVuY3Rpb24ocix0KXt2YXIgZT10aGlzO2lmKCF0aGlzLm9uZmlsZSl0aHJvd1wibm8gY2FsbGJhY2tcIjtpZih0aGlzLmM+MCl7dmFyIGk9TWF0aC5taW4odGhpcy5jLHIubGVuZ3RoKSxhPXIuc3ViYXJyYXkoMCxpKTtpZih0aGlzLmMtPWksdGhpcy5kP3RoaXMuZC5wdXNoKGEsIXRoaXMuYyk6dGhpcy5rWzBdLnB1c2goYSkscj1yLnN1YmFycmF5KGkpLHIubGVuZ3RoKXJldHVybiB0aGlzLnB1c2gocix0KX1lbHNle3ZhciBvPTAsZj0wLGg9dm9pZCAwLHM9dm9pZCAwO3RoaXMucC5sZW5ndGg/ci5sZW5ndGg/KHM9bmV3IEEodGhpcy5wLmxlbmd0aCtyLmxlbmd0aCkscy5zZXQodGhpcy5wKSxzLnNldChyLHRoaXMucC5sZW5ndGgpKTpzPXRoaXMucDpzPXI7Zm9yKHZhciB1PXMubGVuZ3RoLGw9dGhpcy5jLHA9bCYmdGhpcy5kLHk9ZnVuY3Rpb24oKXt2YXIgTSx6PVAocyxmKTtpZih6PT02NzMyNDc1Mil7bz0xLGg9ZixjLmQ9bnVsbCxjLmM9MDt2YXIgbT1ZKHMsZis2KSxEPVkocyxmKzgpLEM9bSYyMDQ4LFU9bSY4LHg9WShzLGYrMjYpLHY9WShzLGYrMjgpO2lmKHU+ZiszMCt4K3Ype3ZhciBFPVtdO2Muay51bnNoaWZ0KEUpLG89Mjt2YXIgUz1QKHMsZisxOCksSz1QKHMsZisyMiksST11bihzLnN1YmFycmF5KGYrMzAsZis9MzAreCksIUMpO1M9PTQyOTQ5NjcyOTU/KE09VT9bLTJdOkxuKHMsZiksUz1NWzBdLEs9TVsxXSk6VSYmKFM9LTEpLGYrPXYsYy5jPVM7dmFyIFo9e25hbWU6SSxjb21wcmVzc2lvbjpELHN0YXJ0OmZ1bmN0aW9uKCl7aWYoIVoub25kYXRhKXRocm93XCJubyBjYWxsYmFja1wiO2lmKCFTKVoub25kYXRhKG51bGwsZXIsITApO2Vsc2V7dmFyIEI9ZS5vW0RdO2lmKCFCKXRocm93XCJ1bmtub3duIGNvbXByZXNzaW9uIHR5cGUgXCIrRDt2YXIgRz1TPDA/bmV3IEIoSSk6bmV3IEIoSSxTLEspO0cub25kYXRhPWZ1bmN0aW9uKE4sUSxXKXtaLm9uZGF0YShOLFEsVyl9O2Zvcih2YXIgaz0wLE89RTtrPE8ubGVuZ3RoO2srKyl7dmFyIEg9T1trXTtHLnB1c2goSCwhMSl9ZS5rWzBdPT1FP2UuZD1HOkcucHVzaChlciwhMCl9fSx0ZXJtaW5hdGU6ZnVuY3Rpb24oKXtlLmtbMF09PUUmJmUuZC50ZXJtaW5hdGUmJmUuZC50ZXJtaW5hdGUoKX19O1M+PTAmJihaLnNpemU9UyxaLm9yaWdpbmFsU2l6ZT1LKSxjLm9uZmlsZShaKX1yZXR1cm5cImJyZWFrXCJ9ZWxzZSBpZihsKXtpZih6PT0xMzQ2OTU3NjApcmV0dXJuIGg9Zis9MTIrKGw9PS0yJiY4KSxvPTIsYy5jPTAsXCJicmVha1wiO2lmKHo9PTMzNjM5MjQ4KXJldHVybiBoPWYtPTQsbz0yLGMuYz0wLFwiYnJlYWtcIn19LGM9dGhpcztmPHUtNDsrK2Ype3ZhciBnPXkoKTtpZihnPT09XCJicmVha1wiKWJyZWFrfWlmKHRoaXMucD1lcixsPDApe3ZhciB3PW8/cy5zdWJhcnJheSgwLGgtMTItKGw9PS0yJiY4KS0oUChzLGgtMTYpPT0xMzQ2OTU3NjAmJjQpKTpzLnN1YmFycmF5KDAsZik7cD9wLnB1c2godywhIW8pOnRoaXMua1srKG89PTIpXS5wdXNoKHcpfWlmKG8mMilyZXR1cm4gdGhpcy5wdXNoKHMuc3ViYXJyYXkoZiksdCk7dGhpcy5wPXMuc3ViYXJyYXkoZil9aWYodCYmdGhpcy5jKXRocm93XCJpbnZhbGlkIHppcCBmaWxlXCJ9LG4ucHJvdG90eXBlLnJlZ2lzdGVyPWZ1bmN0aW9uKHIpe3RoaXMub1tyLmNvbXByZXNzaW9uXT1yfSxufSgpO2Z1bmN0aW9uIHd0KG4scil7aWYodHlwZW9mIHIhPVwiZnVuY3Rpb25cIil0aHJvd1wibm8gY2FsbGJhY2tcIjtmb3IodmFyIHQ9W10sZT1mdW5jdGlvbigpe2Zvcih2YXIgcD0wO3A8dC5sZW5ndGg7KytwKXRbcF0oKX0saT17fSxhPW4ubGVuZ3RoLTIyO1AobixhKSE9MTAxMDEwMjU2Oy0tYSlpZighYXx8bi5sZW5ndGgtYT42NTU1OCl7cihcImludmFsaWQgemlwIGZpbGVcIixudWxsKTtyZXR1cm59dmFyIG89WShuLGErOCk7b3x8cihudWxsLHt9KTt2YXIgZj1vLGg9UChuLGErMTYpLHM9aD09NDI5NDk2NzI5NTtpZihzKXtpZihhPVAobixhLTEyKSxQKG4sYSkhPTEwMTA3NTc5Mil7cihcImludmFsaWQgemlwIGZpbGVcIixudWxsKTtyZXR1cm59Zj1vPVAobixhKzMyKSxoPVAobixhKzQ4KX1mb3IodmFyIHU9ZnVuY3Rpb24ocCl7dmFyIHk9JG4obixoLHMpLGM9eVswXSxnPXlbMV0sdz15WzJdLE09eVszXSx6PXlbNF0sbT15WzVdLEQ9WG4obixtKTtoPXo7dmFyIEM9ZnVuY3Rpb24oeCx2KXt4PyhlKCkscih4LG51bGwpKTooaVtNXT12LC0tb3x8cihudWxsLGkpKX07aWYoIWMpQyhudWxsLCQobixELEQrZykpO2Vsc2UgaWYoYz09OCl7dmFyIFU9bi5zdWJhcnJheShELEQrZyk7aWYoZzwzMmU0KXRyeXtDKG51bGwseHIoVSxuZXcgQSh3KSkpfWNhdGNoKHgpe0MoeCxudWxsKX1lbHNlIHQucHVzaChhbihVLHtzaXplOnd9LEMpKX1lbHNlIEMoXCJ1bmtub3duIGNvbXByZXNzaW9uIHR5cGUgXCIrYyxudWxsKX0sbD0wO2w8ZjsrK2wpdSgpO3JldHVybiBlfWZ1bmN0aW9uIHl0KG4pe2Zvcih2YXIgcj17fSx0PW4ubGVuZ3RoLTIyO1Aobix0KSE9MTAxMDEwMjU2Oy0tdClpZighdHx8bi5sZW5ndGgtdD42NTU1OCl0aHJvd1wiaW52YWxpZCB6aXAgZmlsZVwiO3ZhciBlPVkobix0KzgpO2lmKCFlKXJldHVybnt9O3ZhciBpPVAobix0KzE2KSxhPWk9PTQyOTQ5NjcyOTU7aWYoYSl7aWYodD1QKG4sdC0xMiksUChuLHQpIT0xMDEwNzU3OTIpdGhyb3dcImludmFsaWQgemlwIGZpbGVcIjtlPVAobix0KzMyKSxpPVAobix0KzQ4KX1mb3IodmFyIG89MDtvPGU7KytvKXt2YXIgZj0kbihuLGksYSksaD1mWzBdLHM9ZlsxXSx1PWZbMl0sbD1mWzNdLHA9Zls0XSx5PWZbNV0sYz1YbihuLHkpO2lmKGk9cCwhaClyW2xdPSQobixjLGMrcyk7ZWxzZSBpZihoPT04KXJbbF09eHIobi5zdWJhcnJheShjLGMrcyksbmV3IEEodSkpO2Vsc2UgdGhyb3dcInVua25vd24gY29tcHJlc3Npb24gdHlwZSBcIitofXJldHVybiByfWV4cG9ydHtSbiBhcyBBc3luY0NvbXByZXNzLGV0IGFzIEFzeW5jRGVjb21wcmVzcyxFbiBhcyBBc3luY0RlZmxhdGUsSG4gYXMgQXN5bmNHdW56aXAsUm4gYXMgQXN5bmNHemlwLGVuIGFzIEFzeW5jSW5mbGF0ZSxwdCBhcyBBc3luY1VuemlwSW5mbGF0ZSxZbiBhcyBBc3luY1VuemxpYixodCBhcyBBc3luY1ppcERlZmxhdGUsbnQgYXMgQXN5bmNabGliLHFyIGFzIENvbXByZXNzLG90IGFzIERlY29kZVVURjgsSm4gYXMgRGVjb21wcmVzcyxyciBhcyBEZWZsYXRlLGZ0IGFzIEVuY29kZVVURjgsV3IgYXMgR3VuemlwLHFyIGFzIEd6aXAsSiBhcyBJbmZsYXRlLGd0IGFzIFVuemlwLGN0IGFzIFVuemlwSW5mbGF0ZSxkbiBhcyBVbnppcFBhc3NUaHJvdWdoLGpyIGFzIFVuemxpYix1dCBhcyBaaXAsc3QgYXMgWmlwRGVmbGF0ZSxCciBhcyBaaXBQYXNzVGhyb3VnaCxvbiBhcyBabGliLHFuIGFzIGNvbXByZXNzLEhyIGFzIGNvbXByZXNzU3luYyxpdCBhcyBkZWNvbXByZXNzLGF0IGFzIGRlY29tcHJlc3NTeW5jLFBuIGFzIGRlZmxhdGUsa3IgYXMgZGVmbGF0ZVN5bmMsV24gYXMgZ3VuemlwLFlyIGFzIGd1bnppcFN5bmMscW4gYXMgZ3ppcCxIciBhcyBnemlwU3luYyxhbiBhcyBpbmZsYXRlLHhyIGFzIGluZmxhdGVTeW5jLHVuIGFzIHN0ckZyb21VOCxvciBhcyBzdHJUb1U4LHd0IGFzIHVuemlwLHl0IGFzIHVuemlwU3luYyxqbiBhcyB1bnpsaWIsSnIgYXMgdW56bGliU3luYyxsdCBhcyB6aXAsdnQgYXMgemlwU3luYyx0dCBhcyB6bGliLGZuIGFzIHpsaWJTeW5jfTtleHBvcnQgZGVmYXVsdCBudWxsO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/three/examples/jsm/libs/fflate.module.min.js\n");

/***/ }),

/***/ "./node_modules/three/examples/jsm/loaders/ColladaLoader.js":
/*!******************************************************************!*\
  !*** ./node_modules/three/examples/jsm/loaders/ColladaLoader.js ***!
  \******************************************************************/
/*! exports provided: ColladaLoader */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ColladaLoader\", function() { return ColladaLoader; });\n/* harmony import */ var _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../build/three.module.js */ \"./node_modules/three/build/three.module.js\");\n/* harmony import */ var _loaders_TGALoader_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../loaders/TGALoader.js */ \"./node_modules/three/examples/jsm/loaders/TGALoader.js\");\n\n\n\nvar ColladaLoader = function ( manager ) {\n\n\t_build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Loader\"].call( this, manager );\n\n};\n\nColladaLoader.prototype = Object.assign( Object.create( _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Loader\"].prototype ), {\n\n\tconstructor: ColladaLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar scope = this;\n\n\t\tvar path = ( scope.path === '' ) ? _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"LoaderUtils\"].extractUrlBase( url ) : scope.path;\n\n\t\tvar loader = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"FileLoader\"]( scope.manager );\n\t\tloader.setPath( scope.path );\n\t\tloader.setRequestHeader( scope.requestHeader );\n\t\tloader.setWithCredentials( scope.withCredentials );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\ttry {\n\n\t\t\t\tonLoad( scope.parse( text, path ) );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\tif ( onError ) {\n\n\t\t\t\t\tonError( e );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( e );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t},\n\n\toptions: {\n\n\t\tset convertUpAxis( value ) {\n\n\t\t\tconsole.warn( 'THREE.ColladaLoader: options.convertUpAxis() has been removed. Up axis is converted automatically.' );\n\n\t\t}\n\n\t},\n\n\tparse: function ( text, path ) {\n\n\t\tfunction getElementsByTagName( xml, name ) {\n\n\t\t\t// Non recursive xml.getElementsByTagName() ...\n\n\t\t\tvar array = [];\n\t\t\tvar childNodes = xml.childNodes;\n\n\t\t\tfor ( var i = 0, l = childNodes.length; i < l; i ++ ) {\n\n\t\t\t\tvar child = childNodes[ i ];\n\n\t\t\t\tif ( child.nodeName === name ) {\n\n\t\t\t\t\tarray.push( child );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn array;\n\n\t\t}\n\n\t\tfunction parseStrings( text ) {\n\n\t\t\tif ( text.length === 0 ) return [];\n\n\t\t\tvar parts = text.trim().split( /\\s+/ );\n\t\t\tvar array = new Array( parts.length );\n\n\t\t\tfor ( var i = 0, l = parts.length; i < l; i ++ ) {\n\n\t\t\t\tarray[ i ] = parts[ i ];\n\n\t\t\t}\n\n\t\t\treturn array;\n\n\t\t}\n\n\t\tfunction parseFloats( text ) {\n\n\t\t\tif ( text.length === 0 ) return [];\n\n\t\t\tvar parts = text.trim().split( /\\s+/ );\n\t\t\tvar array = new Array( parts.length );\n\n\t\t\tfor ( var i = 0, l = parts.length; i < l; i ++ ) {\n\n\t\t\t\tarray[ i ] = parseFloat( parts[ i ] );\n\n\t\t\t}\n\n\t\t\treturn array;\n\n\t\t}\n\n\t\tfunction parseInts( text ) {\n\n\t\t\tif ( text.length === 0 ) return [];\n\n\t\t\tvar parts = text.trim().split( /\\s+/ );\n\t\t\tvar array = new Array( parts.length );\n\n\t\t\tfor ( var i = 0, l = parts.length; i < l; i ++ ) {\n\n\t\t\t\tarray[ i ] = parseInt( parts[ i ] );\n\n\t\t\t}\n\n\t\t\treturn array;\n\n\t\t}\n\n\t\tfunction parseId( text ) {\n\n\t\t\treturn text.substring( 1 );\n\n\t\t}\n\n\t\tfunction generateId() {\n\n\t\t\treturn 'three_default_' + ( count ++ );\n\n\t\t}\n\n\t\tfunction isEmpty( object ) {\n\n\t\t\treturn Object.keys( object ).length === 0;\n\n\t\t}\n\n\t\t// asset\n\n\t\tfunction parseAsset( xml ) {\n\n\t\t\treturn {\n\t\t\t\tunit: parseAssetUnit( getElementsByTagName( xml, 'unit' )[ 0 ] ),\n\t\t\t\tupAxis: parseAssetUpAxis( getElementsByTagName( xml, 'up_axis' )[ 0 ] )\n\t\t\t};\n\n\t\t}\n\n\t\tfunction parseAssetUnit( xml ) {\n\n\t\t\tif ( ( xml !== undefined ) && ( xml.hasAttribute( 'meter' ) === true ) ) {\n\n\t\t\t\treturn parseFloat( xml.getAttribute( 'meter' ) );\n\n\t\t\t} else {\n\n\t\t\t\treturn 1; // default 1 meter\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction parseAssetUpAxis( xml ) {\n\n\t\t\treturn xml !== undefined ? xml.textContent : 'Y_UP';\n\n\t\t}\n\n\t\t// library\n\n\t\tfunction parseLibrary( xml, libraryName, nodeName, parser ) {\n\n\t\t\tvar library = getElementsByTagName( xml, libraryName )[ 0 ];\n\n\t\t\tif ( library !== undefined ) {\n\n\t\t\t\tvar elements = getElementsByTagName( library, nodeName );\n\n\t\t\t\tfor ( var i = 0; i < elements.length; i ++ ) {\n\n\t\t\t\t\tparser( elements[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction buildLibrary( data, builder ) {\n\n\t\t\tfor ( var name in data ) {\n\n\t\t\t\tvar object = data[ name ];\n\t\t\t\tobject.build = builder( data[ name ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// get\n\n\t\tfunction getBuild( data, builder ) {\n\n\t\t\tif ( data.build !== undefined ) return data.build;\n\n\t\t\tdata.build = builder( data );\n\n\t\t\treturn data.build;\n\n\t\t}\n\n\t\t// animation\n\n\t\tfunction parseAnimation( xml ) {\n\n\t\t\tvar data = {\n\t\t\t\tsources: {},\n\t\t\t\tsamplers: {},\n\t\t\t\tchannels: {}\n\t\t\t};\n\n\t\t\tvar hasChildren = false;\n\n\t\t\tfor ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n\t\t\t\tvar child = xml.childNodes[ i ];\n\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\n\n\t\t\t\tvar id;\n\n\t\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\t\tcase 'source':\n\t\t\t\t\t\tid = child.getAttribute( 'id' );\n\t\t\t\t\t\tdata.sources[ id ] = parseSource( child );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'sampler':\n\t\t\t\t\t\tid = child.getAttribute( 'id' );\n\t\t\t\t\t\tdata.samplers[ id ] = parseAnimationSampler( child );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'channel':\n\t\t\t\t\t\tid = child.getAttribute( 'target' );\n\t\t\t\t\t\tdata.channels[ id ] = parseAnimationChannel( child );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'animation':\n\t\t\t\t\t\t// hierarchy of related animations\n\t\t\t\t\t\tparseAnimation( child );\n\t\t\t\t\t\thasChildren = true;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tconsole.log( child );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( hasChildren === false ) {\n\n\t\t\t\t// since 'id' attributes can be optional, it's necessary to generate a UUID for unqiue assignment\n\n\t\t\t\tlibrary.animations[ xml.getAttribute( 'id' ) || _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"MathUtils\"].generateUUID() ] = data;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction parseAnimationSampler( xml ) {\n\n\t\t\tvar data = {\n\t\t\t\tinputs: {},\n\t\t\t};\n\n\t\t\tfor ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n\t\t\t\tvar child = xml.childNodes[ i ];\n\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\n\n\t\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\t\tcase 'input':\n\t\t\t\t\t\tvar id = parseId( child.getAttribute( 'source' ) );\n\t\t\t\t\t\tvar semantic = child.getAttribute( 'semantic' );\n\t\t\t\t\t\tdata.inputs[ semantic ] = id;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn data;\n\n\t\t}\n\n\t\tfunction parseAnimationChannel( xml ) {\n\n\t\t\tvar data = {};\n\n\t\t\tvar target = xml.getAttribute( 'target' );\n\n\t\t\t// parsing SID Addressing Syntax\n\n\t\t\tvar parts = target.split( '/' );\n\n\t\t\tvar id = parts.shift();\n\t\t\tvar sid = parts.shift();\n\n\t\t\t// check selection syntax\n\n\t\t\tvar arraySyntax = ( sid.indexOf( '(' ) !== - 1 );\n\t\t\tvar memberSyntax = ( sid.indexOf( '.' ) !== - 1 );\n\n\t\t\tif ( memberSyntax ) {\n\n\t\t\t\t//  member selection access\n\n\t\t\t\tparts = sid.split( '.' );\n\t\t\t\tsid = parts.shift();\n\t\t\t\tdata.member = parts.shift();\n\n\t\t\t} else if ( arraySyntax ) {\n\n\t\t\t\t// array-access syntax. can be used to express fields in one-dimensional vectors or two-dimensional matrices.\n\n\t\t\t\tvar indices = sid.split( '(' );\n\t\t\t\tsid = indices.shift();\n\n\t\t\t\tfor ( var i = 0; i < indices.length; i ++ ) {\n\n\t\t\t\t\tindices[ i ] = parseInt( indices[ i ].replace( /\\)/, '' ) );\n\n\t\t\t\t}\n\n\t\t\t\tdata.indices = indices;\n\n\t\t\t}\n\n\t\t\tdata.id = id;\n\t\t\tdata.sid = sid;\n\n\t\t\tdata.arraySyntax = arraySyntax;\n\t\t\tdata.memberSyntax = memberSyntax;\n\n\t\t\tdata.sampler = parseId( xml.getAttribute( 'source' ) );\n\n\t\t\treturn data;\n\n\t\t}\n\n\t\tfunction buildAnimation( data ) {\n\n\t\t\tvar tracks = [];\n\n\t\t\tvar channels = data.channels;\n\t\t\tvar samplers = data.samplers;\n\t\t\tvar sources = data.sources;\n\n\t\t\tfor ( var target in channels ) {\n\n\t\t\t\tif ( channels.hasOwnProperty( target ) ) {\n\n\t\t\t\t\tvar channel = channels[ target ];\n\t\t\t\t\tvar sampler = samplers[ channel.sampler ];\n\n\t\t\t\t\tvar inputId = sampler.inputs.INPUT;\n\t\t\t\t\tvar outputId = sampler.inputs.OUTPUT;\n\n\t\t\t\t\tvar inputSource = sources[ inputId ];\n\t\t\t\t\tvar outputSource = sources[ outputId ];\n\n\t\t\t\t\tvar animation = buildAnimationChannel( channel, inputSource, outputSource );\n\n\t\t\t\t\tcreateKeyframeTracks( animation, tracks );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn tracks;\n\n\t\t}\n\n\t\tfunction getAnimation( id ) {\n\n\t\t\treturn getBuild( library.animations[ id ], buildAnimation );\n\n\t\t}\n\n\t\tfunction buildAnimationChannel( channel, inputSource, outputSource ) {\n\n\t\t\tvar node = library.nodes[ channel.id ];\n\t\t\tvar object3D = getNode( node.id );\n\n\t\t\tvar transform = node.transforms[ channel.sid ];\n\t\t\tvar defaultMatrix = node.matrix.clone().transpose();\n\n\t\t\tvar time, stride;\n\t\t\tvar i, il, j, jl;\n\n\t\t\tvar data = {};\n\n\t\t\t// the collada spec allows the animation of data in various ways.\n\t\t\t// depending on the transform type (matrix, translate, rotate, scale), we execute different logic\n\n\t\t\tswitch ( transform ) {\n\n\t\t\t\tcase 'matrix':\n\n\t\t\t\t\tfor ( i = 0, il = inputSource.array.length; i < il; i ++ ) {\n\n\t\t\t\t\t\ttime = inputSource.array[ i ];\n\t\t\t\t\t\tstride = i * outputSource.stride;\n\n\t\t\t\t\t\tif ( data[ time ] === undefined ) data[ time ] = {};\n\n\t\t\t\t\t\tif ( channel.arraySyntax === true ) {\n\n\t\t\t\t\t\t\tvar value = outputSource.array[ stride ];\n\t\t\t\t\t\t\tvar index = channel.indices[ 0 ] + 4 * channel.indices[ 1 ];\n\n\t\t\t\t\t\t\tdata[ time ][ index ] = value;\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tfor ( j = 0, jl = outputSource.stride; j < jl; j ++ ) {\n\n\t\t\t\t\t\t\t\tdata[ time ][ j ] = outputSource.array[ stride + j ];\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'translate':\n\t\t\t\t\tconsole.warn( 'THREE.ColladaLoader: Animation transform type \"%s\" not yet implemented.', transform );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'rotate':\n\t\t\t\t\tconsole.warn( 'THREE.ColladaLoader: Animation transform type \"%s\" not yet implemented.', transform );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'scale':\n\t\t\t\t\tconsole.warn( 'THREE.ColladaLoader: Animation transform type \"%s\" not yet implemented.', transform );\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tvar keyframes = prepareAnimationData( data, defaultMatrix );\n\n\t\t\tvar animation = {\n\t\t\t\tname: object3D.uuid,\n\t\t\t\tkeyframes: keyframes\n\t\t\t};\n\n\t\t\treturn animation;\n\n\t\t}\n\n\t\tfunction prepareAnimationData( data, defaultMatrix ) {\n\n\t\t\tvar keyframes = [];\n\n\t\t\t// transfer data into a sortable array\n\n\t\t\tfor ( var time in data ) {\n\n\t\t\t\tkeyframes.push( { time: parseFloat( time ), value: data[ time ] } );\n\n\t\t\t}\n\n\t\t\t// ensure keyframes are sorted by time\n\n\t\t\tkeyframes.sort( ascending );\n\n\t\t\t// now we clean up all animation data, so we can use them for keyframe tracks\n\n\t\t\tfor ( var i = 0; i < 16; i ++ ) {\n\n\t\t\t\ttransformAnimationData( keyframes, i, defaultMatrix.elements[ i ] );\n\n\t\t\t}\n\n\t\t\treturn keyframes;\n\n\t\t\t// array sort function\n\n\t\t\tfunction ascending( a, b ) {\n\n\t\t\t\treturn a.time - b.time;\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar position = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector3\"]();\n\t\tvar scale = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector3\"]();\n\t\tvar quaternion = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Quaternion\"]();\n\n\t\tfunction createKeyframeTracks( animation, tracks ) {\n\n\t\t\tvar keyframes = animation.keyframes;\n\t\t\tvar name = animation.name;\n\n\t\t\tvar times = [];\n\t\t\tvar positionData = [];\n\t\t\tvar quaternionData = [];\n\t\t\tvar scaleData = [];\n\n\t\t\tfor ( var i = 0, l = keyframes.length; i < l; i ++ ) {\n\n\t\t\t\tvar keyframe = keyframes[ i ];\n\n\t\t\t\tvar time = keyframe.time;\n\t\t\t\tvar value = keyframe.value;\n\n\t\t\t\tmatrix.fromArray( value ).transpose();\n\t\t\t\tmatrix.decompose( position, quaternion, scale );\n\n\t\t\t\ttimes.push( time );\n\t\t\t\tpositionData.push( position.x, position.y, position.z );\n\t\t\t\tquaternionData.push( quaternion.x, quaternion.y, quaternion.z, quaternion.w );\n\t\t\t\tscaleData.push( scale.x, scale.y, scale.z );\n\n\t\t\t}\n\n\t\t\tif ( positionData.length > 0 ) tracks.push( new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"VectorKeyframeTrack\"]( name + '.position', times, positionData ) );\n\t\t\tif ( quaternionData.length > 0 ) tracks.push( new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"QuaternionKeyframeTrack\"]( name + '.quaternion', times, quaternionData ) );\n\t\t\tif ( scaleData.length > 0 ) tracks.push( new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"VectorKeyframeTrack\"]( name + '.scale', times, scaleData ) );\n\n\t\t\treturn tracks;\n\n\t\t}\n\n\t\tfunction transformAnimationData( keyframes, property, defaultValue ) {\n\n\t\t\tvar keyframe;\n\n\t\t\tvar empty = true;\n\t\t\tvar i, l;\n\n\t\t\t// check, if values of a property are missing in our keyframes\n\n\t\t\tfor ( i = 0, l = keyframes.length; i < l; i ++ ) {\n\n\t\t\t\tkeyframe = keyframes[ i ];\n\n\t\t\t\tif ( keyframe.value[ property ] === undefined ) {\n\n\t\t\t\t\tkeyframe.value[ property ] = null; // mark as missing\n\n\t\t\t\t} else {\n\n\t\t\t\t\tempty = false;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( empty === true ) {\n\n\t\t\t\t// no values at all, so we set a default value\n\n\t\t\t\tfor ( i = 0, l = keyframes.length; i < l; i ++ ) {\n\n\t\t\t\t\tkeyframe = keyframes[ i ];\n\n\t\t\t\t\tkeyframe.value[ property ] = defaultValue;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// filling gaps\n\n\t\t\t\tcreateMissingKeyframes( keyframes, property );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction createMissingKeyframes( keyframes, property ) {\n\n\t\t\tvar prev, next;\n\n\t\t\tfor ( var i = 0, l = keyframes.length; i < l; i ++ ) {\n\n\t\t\t\tvar keyframe = keyframes[ i ];\n\n\t\t\t\tif ( keyframe.value[ property ] === null ) {\n\n\t\t\t\t\tprev = getPrev( keyframes, i, property );\n\t\t\t\t\tnext = getNext( keyframes, i, property );\n\n\t\t\t\t\tif ( prev === null ) {\n\n\t\t\t\t\t\tkeyframe.value[ property ] = next.value[ property ];\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( next === null ) {\n\n\t\t\t\t\t\tkeyframe.value[ property ] = prev.value[ property ];\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tinterpolate( keyframe, prev, next, property );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction getPrev( keyframes, i, property ) {\n\n\t\t\twhile ( i >= 0 ) {\n\n\t\t\t\tvar keyframe = keyframes[ i ];\n\n\t\t\t\tif ( keyframe.value[ property ] !== null ) return keyframe;\n\n\t\t\t\ti --;\n\n\t\t\t}\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tfunction getNext( keyframes, i, property ) {\n\n\t\t\twhile ( i < keyframes.length ) {\n\n\t\t\t\tvar keyframe = keyframes[ i ];\n\n\t\t\t\tif ( keyframe.value[ property ] !== null ) return keyframe;\n\n\t\t\t\ti ++;\n\n\t\t\t}\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tfunction interpolate( key, prev, next, property ) {\n\n\t\t\tif ( ( next.time - prev.time ) === 0 ) {\n\n\t\t\t\tkey.value[ property ] = prev.value[ property ];\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tkey.value[ property ] = ( ( key.time - prev.time ) * ( next.value[ property ] - prev.value[ property ] ) / ( next.time - prev.time ) ) + prev.value[ property ];\n\n\t\t}\n\n\t\t// animation clips\n\n\t\tfunction parseAnimationClip( xml ) {\n\n\t\t\tvar data = {\n\t\t\t\tname: xml.getAttribute( 'id' ) || 'default',\n\t\t\t\tstart: parseFloat( xml.getAttribute( 'start' ) || 0 ),\n\t\t\t\tend: parseFloat( xml.getAttribute( 'end' ) || 0 ),\n\t\t\t\tanimations: []\n\t\t\t};\n\n\t\t\tfor ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n\t\t\t\tvar child = xml.childNodes[ i ];\n\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\n\n\t\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\t\tcase 'instance_animation':\n\t\t\t\t\t\tdata.animations.push( parseId( child.getAttribute( 'url' ) ) );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tlibrary.clips[ xml.getAttribute( 'id' ) ] = data;\n\n\t\t}\n\n\t\tfunction buildAnimationClip( data ) {\n\n\t\t\tvar tracks = [];\n\n\t\t\tvar name = data.name;\n\t\t\tvar duration = ( data.end - data.start ) || - 1;\n\t\t\tvar animations = data.animations;\n\n\t\t\tfor ( var i = 0, il = animations.length; i < il; i ++ ) {\n\n\t\t\t\tvar animationTracks = getAnimation( animations[ i ] );\n\n\t\t\t\tfor ( var j = 0, jl = animationTracks.length; j < jl; j ++ ) {\n\n\t\t\t\t\ttracks.push( animationTracks[ j ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"AnimationClip\"]( name, duration, tracks );\n\n\t\t}\n\n\t\tfunction getAnimationClip( id ) {\n\n\t\t\treturn getBuild( library.clips[ id ], buildAnimationClip );\n\n\t\t}\n\n\t\t// controller\n\n\t\tfunction parseController( xml ) {\n\n\t\t\tvar data = {};\n\n\t\t\tfor ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n\t\t\t\tvar child = xml.childNodes[ i ];\n\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\n\n\t\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\t\tcase 'skin':\n\t\t\t\t\t\t// there is exactly one skin per controller\n\t\t\t\t\t\tdata.id = parseId( child.getAttribute( 'source' ) );\n\t\t\t\t\t\tdata.skin = parseSkin( child );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'morph':\n\t\t\t\t\t\tdata.id = parseId( child.getAttribute( 'source' ) );\n\t\t\t\t\t\tconsole.warn( 'THREE.ColladaLoader: Morph target animation not supported yet.' );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tlibrary.controllers[ xml.getAttribute( 'id' ) ] = data;\n\n\t\t}\n\n\t\tfunction parseSkin( xml ) {\n\n\t\t\tvar data = {\n\t\t\t\tsources: {}\n\t\t\t};\n\n\t\t\tfor ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n\t\t\t\tvar child = xml.childNodes[ i ];\n\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\n\n\t\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\t\tcase 'bind_shape_matrix':\n\t\t\t\t\t\tdata.bindShapeMatrix = parseFloats( child.textContent );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'source':\n\t\t\t\t\t\tvar id = child.getAttribute( 'id' );\n\t\t\t\t\t\tdata.sources[ id ] = parseSource( child );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'joints':\n\t\t\t\t\t\tdata.joints = parseJoints( child );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'vertex_weights':\n\t\t\t\t\t\tdata.vertexWeights = parseVertexWeights( child );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn data;\n\n\t\t}\n\n\t\tfunction parseJoints( xml ) {\n\n\t\t\tvar data = {\n\t\t\t\tinputs: {}\n\t\t\t};\n\n\t\t\tfor ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n\t\t\t\tvar child = xml.childNodes[ i ];\n\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\n\n\t\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\t\tcase 'input':\n\t\t\t\t\t\tvar semantic = child.getAttribute( 'semantic' );\n\t\t\t\t\t\tvar id = parseId( child.getAttribute( 'source' ) );\n\t\t\t\t\t\tdata.inputs[ semantic ] = id;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn data;\n\n\t\t}\n\n\t\tfunction parseVertexWeights( xml ) {\n\n\t\t\tvar data = {\n\t\t\t\tinputs: {}\n\t\t\t};\n\n\t\t\tfor ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n\t\t\t\tvar child = xml.childNodes[ i ];\n\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\n\n\t\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\t\tcase 'input':\n\t\t\t\t\t\tvar semantic = child.getAttribute( 'semantic' );\n\t\t\t\t\t\tvar id = parseId( child.getAttribute( 'source' ) );\n\t\t\t\t\t\tvar offset = parseInt( child.getAttribute( 'offset' ) );\n\t\t\t\t\t\tdata.inputs[ semantic ] = { id: id, offset: offset };\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'vcount':\n\t\t\t\t\t\tdata.vcount = parseInts( child.textContent );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'v':\n\t\t\t\t\t\tdata.v = parseInts( child.textContent );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn data;\n\n\t\t}\n\n\t\tfunction buildController( data ) {\n\n\t\t\tvar build = {\n\t\t\t\tid: data.id\n\t\t\t};\n\n\t\t\tvar geometry = library.geometries[ build.id ];\n\n\t\t\tif ( data.skin !== undefined ) {\n\n\t\t\t\tbuild.skin = buildSkin( data.skin );\n\n\t\t\t\t// we enhance the 'sources' property of the corresponding geometry with our skin data\n\n\t\t\t\tgeometry.sources.skinIndices = build.skin.indices;\n\t\t\t\tgeometry.sources.skinWeights = build.skin.weights;\n\n\t\t\t}\n\n\t\t\treturn build;\n\n\t\t}\n\n\t\tfunction buildSkin( data ) {\n\n\t\t\tvar BONE_LIMIT = 4;\n\n\t\t\tvar build = {\n\t\t\t\tjoints: [], // this must be an array to preserve the joint order\n\t\t\t\tindices: {\n\t\t\t\t\tarray: [],\n\t\t\t\t\tstride: BONE_LIMIT\n\t\t\t\t},\n\t\t\t\tweights: {\n\t\t\t\t\tarray: [],\n\t\t\t\t\tstride: BONE_LIMIT\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tvar sources = data.sources;\n\t\t\tvar vertexWeights = data.vertexWeights;\n\n\t\t\tvar vcount = vertexWeights.vcount;\n\t\t\tvar v = vertexWeights.v;\n\t\t\tvar jointOffset = vertexWeights.inputs.JOINT.offset;\n\t\t\tvar weightOffset = vertexWeights.inputs.WEIGHT.offset;\n\n\t\t\tvar jointSource = data.sources[ data.joints.inputs.JOINT ];\n\t\t\tvar inverseSource = data.sources[ data.joints.inputs.INV_BIND_MATRIX ];\n\n\t\t\tvar weights = sources[ vertexWeights.inputs.WEIGHT.id ].array;\n\t\t\tvar stride = 0;\n\n\t\t\tvar i, j, l;\n\n\t\t\t// procces skin data for each vertex\n\n\t\t\tfor ( i = 0, l = vcount.length; i < l; i ++ ) {\n\n\t\t\t\tvar jointCount = vcount[ i ]; // this is the amount of joints that affect a single vertex\n\t\t\t\tvar vertexSkinData = [];\n\n\t\t\t\tfor ( j = 0; j < jointCount; j ++ ) {\n\n\t\t\t\t\tvar skinIndex = v[ stride + jointOffset ];\n\t\t\t\t\tvar weightId = v[ stride + weightOffset ];\n\t\t\t\t\tvar skinWeight = weights[ weightId ];\n\n\t\t\t\t\tvertexSkinData.push( { index: skinIndex, weight: skinWeight } );\n\n\t\t\t\t\tstride += 2;\n\n\t\t\t\t}\n\n\t\t\t\t// we sort the joints in descending order based on the weights.\n\t\t\t\t// this ensures, we only procced the most important joints of the vertex\n\n\t\t\t\tvertexSkinData.sort( descending );\n\n\t\t\t\t// now we provide for each vertex a set of four index and weight values.\n\t\t\t\t// the order of the skin data matches the order of vertices\n\n\t\t\t\tfor ( j = 0; j < BONE_LIMIT; j ++ ) {\n\n\t\t\t\t\tvar d = vertexSkinData[ j ];\n\n\t\t\t\t\tif ( d !== undefined ) {\n\n\t\t\t\t\t\tbuild.indices.array.push( d.index );\n\t\t\t\t\t\tbuild.weights.array.push( d.weight );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tbuild.indices.array.push( 0 );\n\t\t\t\t\t\tbuild.weights.array.push( 0 );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// setup bind matrix\n\n\t\t\tif ( data.bindShapeMatrix ) {\n\n\t\t\t\tbuild.bindMatrix = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Matrix4\"]().fromArray( data.bindShapeMatrix ).transpose();\n\n\t\t\t} else {\n\n\t\t\t\tbuild.bindMatrix = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Matrix4\"]().identity();\n\n\t\t\t}\n\n\t\t\t// process bones and inverse bind matrix data\n\n\t\t\tfor ( i = 0, l = jointSource.array.length; i < l; i ++ ) {\n\n\t\t\t\tvar name = jointSource.array[ i ];\n\t\t\t\tvar boneInverse = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Matrix4\"]().fromArray( inverseSource.array, i * inverseSource.stride ).transpose();\n\n\t\t\t\tbuild.joints.push( { name: name, boneInverse: boneInverse } );\n\n\t\t\t}\n\n\t\t\treturn build;\n\n\t\t\t// array sort function\n\n\t\t\tfunction descending( a, b ) {\n\n\t\t\t\treturn b.weight - a.weight;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction getController( id ) {\n\n\t\t\treturn getBuild( library.controllers[ id ], buildController );\n\n\t\t}\n\n\t\t// image\n\n\t\tfunction parseImage( xml ) {\n\n\t\t\tvar data = {\n\t\t\t\tinit_from: getElementsByTagName( xml, 'init_from' )[ 0 ].textContent\n\t\t\t};\n\n\t\t\tlibrary.images[ xml.getAttribute( 'id' ) ] = data;\n\n\t\t}\n\n\t\tfunction buildImage( data ) {\n\n\t\t\tif ( data.build !== undefined ) return data.build;\n\n\t\t\treturn data.init_from;\n\n\t\t}\n\n\t\tfunction getImage( id ) {\n\n\t\t\tvar data = library.images[ id ];\n\n\t\t\tif ( data !== undefined ) {\n\n\t\t\t\treturn getBuild( data, buildImage );\n\n\t\t\t}\n\n\t\t\tconsole.warn( 'THREE.ColladaLoader: Couldn\\'t find image with ID:', id );\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\t// effect\n\n\t\tfunction parseEffect( xml ) {\n\n\t\t\tvar data = {};\n\n\t\t\tfor ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n\t\t\t\tvar child = xml.childNodes[ i ];\n\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\n\n\t\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\t\tcase 'profile_COMMON':\n\t\t\t\t\t\tdata.profile = parseEffectProfileCOMMON( child );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tlibrary.effects[ xml.getAttribute( 'id' ) ] = data;\n\n\t\t}\n\n\t\tfunction parseEffectProfileCOMMON( xml ) {\n\n\t\t\tvar data = {\n\t\t\t\tsurfaces: {},\n\t\t\t\tsamplers: {}\n\t\t\t};\n\n\t\t\tfor ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n\t\t\t\tvar child = xml.childNodes[ i ];\n\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\n\n\t\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\t\tcase 'newparam':\n\t\t\t\t\t\tparseEffectNewparam( child, data );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'technique':\n\t\t\t\t\t\tdata.technique = parseEffectTechnique( child );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'extra':\n\t\t\t\t\t\tdata.extra = parseEffectExtra( child );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn data;\n\n\t\t}\n\n\t\tfunction parseEffectNewparam( xml, data ) {\n\n\t\t\tvar sid = xml.getAttribute( 'sid' );\n\n\t\t\tfor ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n\t\t\t\tvar child = xml.childNodes[ i ];\n\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\n\n\t\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\t\tcase 'surface':\n\t\t\t\t\t\tdata.surfaces[ sid ] = parseEffectSurface( child );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'sampler2D':\n\t\t\t\t\t\tdata.samplers[ sid ] = parseEffectSampler( child );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction parseEffectSurface( xml ) {\n\n\t\t\tvar data = {};\n\n\t\t\tfor ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n\t\t\t\tvar child = xml.childNodes[ i ];\n\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\n\n\t\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\t\tcase 'init_from':\n\t\t\t\t\t\tdata.init_from = child.textContent;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn data;\n\n\t\t}\n\n\t\tfunction parseEffectSampler( xml ) {\n\n\t\t\tvar data = {};\n\n\t\t\tfor ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n\t\t\t\tvar child = xml.childNodes[ i ];\n\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\n\n\t\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\t\tcase 'source':\n\t\t\t\t\t\tdata.source = child.textContent;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn data;\n\n\t\t}\n\n\t\tfunction parseEffectTechnique( xml ) {\n\n\t\t\tvar data = {};\n\n\t\t\tfor ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n\t\t\t\tvar child = xml.childNodes[ i ];\n\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\n\n\t\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\t\tcase 'constant':\n\t\t\t\t\tcase 'lambert':\n\t\t\t\t\tcase 'blinn':\n\t\t\t\t\tcase 'phong':\n\t\t\t\t\t\tdata.type = child.nodeName;\n\t\t\t\t\t\tdata.parameters = parseEffectParameters( child );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn data;\n\n\t\t}\n\n\t\tfunction parseEffectParameters( xml ) {\n\n\t\t\tvar data = {};\n\n\t\t\tfor ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n\t\t\t\tvar child = xml.childNodes[ i ];\n\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\n\n\t\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\t\tcase 'emission':\n\t\t\t\t\tcase 'diffuse':\n\t\t\t\t\tcase 'specular':\n\t\t\t\t\tcase 'bump':\n\t\t\t\t\tcase 'ambient':\n\t\t\t\t\tcase 'shininess':\n\t\t\t\t\tcase 'transparency':\n\t\t\t\t\t\tdata[ child.nodeName ] = parseEffectParameter( child );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'transparent':\n\t\t\t\t\t\tdata[ child.nodeName ] = {\n\t\t\t\t\t\t\topaque: child.getAttribute( 'opaque' ),\n\t\t\t\t\t\t\tdata: parseEffectParameter( child )\n\t\t\t\t\t\t};\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn data;\n\n\t\t}\n\n\t\tfunction parseEffectParameter( xml ) {\n\n\t\t\tvar data = {};\n\n\t\t\tfor ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n\t\t\t\tvar child = xml.childNodes[ i ];\n\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\n\n\t\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\t\tcase 'color':\n\t\t\t\t\t\tdata[ child.nodeName ] = parseFloats( child.textContent );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'float':\n\t\t\t\t\t\tdata[ child.nodeName ] = parseFloat( child.textContent );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'texture':\n\t\t\t\t\t\tdata[ child.nodeName ] = { id: child.getAttribute( 'texture' ), extra: parseEffectParameterTexture( child ) };\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn data;\n\n\t\t}\n\n\t\tfunction parseEffectParameterTexture( xml ) {\n\n\t\t\tvar data = {\n\t\t\t\ttechnique: {}\n\t\t\t};\n\n\t\t\tfor ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n\t\t\t\tvar child = xml.childNodes[ i ];\n\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\n\n\t\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\t\tcase 'extra':\n\t\t\t\t\t\tparseEffectParameterTextureExtra( child, data );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn data;\n\n\t\t}\n\n\t\tfunction parseEffectParameterTextureExtra( xml, data ) {\n\n\t\t\tfor ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n\t\t\t\tvar child = xml.childNodes[ i ];\n\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\n\n\t\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\t\tcase 'technique':\n\t\t\t\t\t\tparseEffectParameterTextureExtraTechnique( child, data );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction parseEffectParameterTextureExtraTechnique( xml, data ) {\n\n\t\t\tfor ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n\t\t\t\tvar child = xml.childNodes[ i ];\n\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\n\n\t\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\t\tcase 'repeatU':\n\t\t\t\t\tcase 'repeatV':\n\t\t\t\t\tcase 'offsetU':\n\t\t\t\t\tcase 'offsetV':\n\t\t\t\t\t\tdata.technique[ child.nodeName ] = parseFloat( child.textContent );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'wrapU':\n\t\t\t\t\tcase 'wrapV':\n\n\t\t\t\t\t\t// some files have values for wrapU/wrapV which become NaN via parseInt\n\n\t\t\t\t\t\tif ( child.textContent.toUpperCase() === 'TRUE' ) {\n\n\t\t\t\t\t\t\tdata.technique[ child.nodeName ] = 1;\n\n\t\t\t\t\t\t} else if ( child.textContent.toUpperCase() === 'FALSE' ) {\n\n\t\t\t\t\t\t\tdata.technique[ child.nodeName ] = 0;\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tdata.technique[ child.nodeName ] = parseInt( child.textContent );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction parseEffectExtra( xml ) {\n\n\t\t\tvar data = {};\n\n\t\t\tfor ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n\t\t\t\tvar child = xml.childNodes[ i ];\n\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\n\n\t\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\t\tcase 'technique':\n\t\t\t\t\t\tdata.technique = parseEffectExtraTechnique( child );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn data;\n\n\t\t}\n\n\t\tfunction parseEffectExtraTechnique( xml ) {\n\n\t\t\tvar data = {};\n\n\t\t\tfor ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n\t\t\t\tvar child = xml.childNodes[ i ];\n\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\n\n\t\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\t\tcase 'double_sided':\n\t\t\t\t\t\tdata[ child.nodeName ] = parseInt( child.textContent );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn data;\n\n\t\t}\n\n\t\tfunction buildEffect( data ) {\n\n\t\t\treturn data;\n\n\t\t}\n\n\t\tfunction getEffect( id ) {\n\n\t\t\treturn getBuild( library.effects[ id ], buildEffect );\n\n\t\t}\n\n\t\t// material\n\n\t\tfunction parseMaterial( xml ) {\n\n\t\t\tvar data = {\n\t\t\t\tname: xml.getAttribute( 'name' )\n\t\t\t};\n\n\t\t\tfor ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n\t\t\t\tvar child = xml.childNodes[ i ];\n\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\n\n\t\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\t\tcase 'instance_effect':\n\t\t\t\t\t\tdata.url = parseId( child.getAttribute( 'url' ) );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tlibrary.materials[ xml.getAttribute( 'id' ) ] = data;\n\n\t\t}\n\n\t\tfunction getTextureLoader( image ) {\n\n\t\t\tvar loader;\n\n\t\t\tvar extension = image.slice( ( image.lastIndexOf( '.' ) - 1 >>> 0 ) + 2 ); // http://www.jstips.co/en/javascript/get-file-extension/\n\t\t\textension = extension.toLowerCase();\n\n\t\t\tswitch ( extension ) {\n\n\t\t\t\tcase 'tga':\n\t\t\t\t\tloader = tgaLoader;\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tloader = textureLoader;\n\n\t\t\t}\n\n\t\t\treturn loader;\n\n\t\t}\n\n\t\tfunction buildMaterial( data ) {\n\n\t\t\tvar effect = getEffect( data.url );\n\t\t\tvar technique = effect.profile.technique;\n\t\t\tvar extra = effect.profile.extra;\n\n\t\t\tvar material;\n\n\t\t\tswitch ( technique.type ) {\n\n\t\t\t\tcase 'phong':\n\t\t\t\tcase 'blinn':\n\t\t\t\t\tmaterial = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"MeshPhongMaterial\"]();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'lambert':\n\t\t\t\t\tmaterial = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"MeshLambertMaterial\"]();\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tmaterial = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"MeshBasicMaterial\"]();\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tmaterial.name = data.name || '';\n\n\t\t\tfunction getTexture( textureObject ) {\n\n\t\t\t\tvar sampler = effect.profile.samplers[ textureObject.id ];\n\t\t\t\tvar image = null;\n\n\t\t\t\t// get image\n\n\t\t\t\tif ( sampler !== undefined ) {\n\n\t\t\t\t\tvar surface = effect.profile.surfaces[ sampler.source ];\n\t\t\t\t\timage = getImage( surface.init_from );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.ColladaLoader: Undefined sampler. Access image directly (see #12530).' );\n\t\t\t\t\timage = getImage( textureObject.id );\n\n\t\t\t\t}\n\n\t\t\t\t// create texture if image is avaiable\n\n\t\t\t\tif ( image !== null ) {\n\n\t\t\t\t\tvar loader = getTextureLoader( image );\n\n\t\t\t\t\tif ( loader !== undefined ) {\n\n\t\t\t\t\t\tvar texture = loader.load( image );\n\n\t\t\t\t\t\tvar extra = textureObject.extra;\n\n\t\t\t\t\t\tif ( extra !== undefined && extra.technique !== undefined && isEmpty( extra.technique ) === false ) {\n\n\t\t\t\t\t\t\tvar technique = extra.technique;\n\n\t\t\t\t\t\t\ttexture.wrapS = technique.wrapU ? _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"RepeatWrapping\"] : _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"ClampToEdgeWrapping\"];\n\t\t\t\t\t\t\ttexture.wrapT = technique.wrapV ? _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"RepeatWrapping\"] : _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"ClampToEdgeWrapping\"];\n\n\t\t\t\t\t\t\ttexture.offset.set( technique.offsetU || 0, technique.offsetV || 0 );\n\t\t\t\t\t\t\ttexture.repeat.set( technique.repeatU || 1, technique.repeatV || 1 );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\ttexture.wrapS = _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"RepeatWrapping\"];\n\t\t\t\t\t\t\ttexture.wrapT = _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"RepeatWrapping\"];\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn texture;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.ColladaLoader: Loader for texture %s not found.', image );\n\n\t\t\t\t\t\treturn null;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.ColladaLoader: Couldn\\'t create texture with ID:', textureObject.id );\n\n\t\t\t\t\treturn null;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar parameters = technique.parameters;\n\n\t\t\tfor ( var key in parameters ) {\n\n\t\t\t\tvar parameter = parameters[ key ];\n\n\t\t\t\tswitch ( key ) {\n\n\t\t\t\t\tcase 'diffuse':\n\t\t\t\t\t\tif ( parameter.color ) material.color.fromArray( parameter.color );\n\t\t\t\t\t\tif ( parameter.texture ) material.map = getTexture( parameter.texture );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'specular':\n\t\t\t\t\t\tif ( parameter.color && material.specular ) material.specular.fromArray( parameter.color );\n\t\t\t\t\t\tif ( parameter.texture ) material.specularMap = getTexture( parameter.texture );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'bump':\n\t\t\t\t\t\tif ( parameter.texture ) material.normalMap = getTexture( parameter.texture );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'ambient':\n\t\t\t\t\t\tif ( parameter.texture ) material.lightMap = getTexture( parameter.texture );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'shininess':\n\t\t\t\t\t\tif ( parameter.float && material.shininess ) material.shininess = parameter.float;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'emission':\n\t\t\t\t\t\tif ( parameter.color && material.emissive ) material.emissive.fromArray( parameter.color );\n\t\t\t\t\t\tif ( parameter.texture ) material.emissiveMap = getTexture( parameter.texture );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\tvar transparent = parameters[ 'transparent' ];\n\t\t\tvar transparency = parameters[ 'transparency' ];\n\n\t\t\t// <transparency> does not exist but <transparent>\n\n\t\t\tif ( transparency === undefined && transparent ) {\n\n\t\t\t\ttransparency = {\n\t\t\t\t\tfloat: 1\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t\t// <transparent> does not exist but <transparency>\n\n\t\t\tif ( transparent === undefined && transparency ) {\n\n\t\t\t\ttransparent = {\n\t\t\t\t\topaque: 'A_ONE',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tcolor: [ 1, 1, 1, 1 ]\n\t\t\t\t\t} };\n\n\t\t\t}\n\n\t\t\tif ( transparent && transparency ) {\n\n\t\t\t\t// handle case if a texture exists but no color\n\n\t\t\t\tif ( transparent.data.texture ) {\n\n\t\t\t\t\t// we do not set an alpha map (see #13792)\n\n\t\t\t\t\tmaterial.transparent = true;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tvar color = transparent.data.color;\n\n\t\t\t\t\tswitch ( transparent.opaque ) {\n\n\t\t\t\t\t\tcase 'A_ONE':\n\t\t\t\t\t\t\tmaterial.opacity = color[ 3 ] * transparency.float;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'RGB_ZERO':\n\t\t\t\t\t\t\tmaterial.opacity = 1 - ( color[ 0 ] * transparency.float );\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'A_ZERO':\n\t\t\t\t\t\t\tmaterial.opacity = 1 - ( color[ 3 ] * transparency.float );\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'RGB_ONE':\n\t\t\t\t\t\t\tmaterial.opacity = color[ 0 ] * transparency.float;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tconsole.warn( 'THREE.ColladaLoader: Invalid opaque type \"%s\" of transparent tag.', transparent.opaque );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( material.opacity < 1 ) material.transparent = true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\tif ( extra !== undefined && extra.technique !== undefined && extra.technique.double_sided === 1 ) {\n\n\t\t\t\tmaterial.side = _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"DoubleSide\"];\n\n\t\t\t}\n\n\t\t\treturn material;\n\n\t\t}\n\n\t\tfunction getMaterial( id ) {\n\n\t\t\treturn getBuild( library.materials[ id ], buildMaterial );\n\n\t\t}\n\n\t\t// camera\n\n\t\tfunction parseCamera( xml ) {\n\n\t\t\tvar data = {\n\t\t\t\tname: xml.getAttribute( 'name' )\n\t\t\t};\n\n\t\t\tfor ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n\t\t\t\tvar child = xml.childNodes[ i ];\n\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\n\n\t\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\t\tcase 'optics':\n\t\t\t\t\t\tdata.optics = parseCameraOptics( child );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tlibrary.cameras[ xml.getAttribute( 'id' ) ] = data;\n\n\t\t}\n\n\t\tfunction parseCameraOptics( xml ) {\n\n\t\t\tfor ( var i = 0; i < xml.childNodes.length; i ++ ) {\n\n\t\t\t\tvar child = xml.childNodes[ i ];\n\n\t\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\t\tcase 'technique_common':\n\t\t\t\t\t\treturn parseCameraTechnique( child );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn {};\n\n\t\t}\n\n\t\tfunction parseCameraTechnique( xml ) {\n\n\t\t\tvar data = {};\n\n\t\t\tfor ( var i = 0; i < xml.childNodes.length; i ++ ) {\n\n\t\t\t\tvar child = xml.childNodes[ i ];\n\n\t\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\t\tcase 'perspective':\n\t\t\t\t\tcase 'orthographic':\n\n\t\t\t\t\t\tdata.technique = child.nodeName;\n\t\t\t\t\t\tdata.parameters = parseCameraParameters( child );\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn data;\n\n\t\t}\n\n\t\tfunction parseCameraParameters( xml ) {\n\n\t\t\tvar data = {};\n\n\t\t\tfor ( var i = 0; i < xml.childNodes.length; i ++ ) {\n\n\t\t\t\tvar child = xml.childNodes[ i ];\n\n\t\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\t\tcase 'xfov':\n\t\t\t\t\tcase 'yfov':\n\t\t\t\t\tcase 'xmag':\n\t\t\t\t\tcase 'ymag':\n\t\t\t\t\tcase 'znear':\n\t\t\t\t\tcase 'zfar':\n\t\t\t\t\tcase 'aspect_ratio':\n\t\t\t\t\t\tdata[ child.nodeName ] = parseFloat( child.textContent );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn data;\n\n\t\t}\n\n\t\tfunction buildCamera( data ) {\n\n\t\t\tvar camera;\n\n\t\t\tswitch ( data.optics.technique ) {\n\n\t\t\t\tcase 'perspective':\n\t\t\t\t\tcamera = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"PerspectiveCamera\"](\n\t\t\t\t\t\tdata.optics.parameters.yfov,\n\t\t\t\t\t\tdata.optics.parameters.aspect_ratio,\n\t\t\t\t\t\tdata.optics.parameters.znear,\n\t\t\t\t\t\tdata.optics.parameters.zfar\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'orthographic':\n\t\t\t\t\tvar ymag = data.optics.parameters.ymag;\n\t\t\t\t\tvar xmag = data.optics.parameters.xmag;\n\t\t\t\t\tvar aspectRatio = data.optics.parameters.aspect_ratio;\n\n\t\t\t\t\txmag = ( xmag === undefined ) ? ( ymag * aspectRatio ) : xmag;\n\t\t\t\t\tymag = ( ymag === undefined ) ? ( xmag / aspectRatio ) : ymag;\n\n\t\t\t\t\txmag *= 0.5;\n\t\t\t\t\tymag *= 0.5;\n\n\t\t\t\t\tcamera = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"OrthographicCamera\"](\n\t\t\t\t\t\t- xmag, xmag, ymag, - ymag, // left, right, top, bottom\n\t\t\t\t\t\tdata.optics.parameters.znear,\n\t\t\t\t\t\tdata.optics.parameters.zfar\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tcamera = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"PerspectiveCamera\"]();\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tcamera.name = data.name || '';\n\n\t\t\treturn camera;\n\n\t\t}\n\n\t\tfunction getCamera( id ) {\n\n\t\t\tvar data = library.cameras[ id ];\n\n\t\t\tif ( data !== undefined ) {\n\n\t\t\t\treturn getBuild( data, buildCamera );\n\n\t\t\t}\n\n\t\t\tconsole.warn( 'THREE.ColladaLoader: Couldn\\'t find camera with ID:', id );\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\t// light\n\n\t\tfunction parseLight( xml ) {\n\n\t\t\tvar data = {};\n\n\t\t\tfor ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n\t\t\t\tvar child = xml.childNodes[ i ];\n\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\n\n\t\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\t\tcase 'technique_common':\n\t\t\t\t\t\tdata = parseLightTechnique( child );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tlibrary.lights[ xml.getAttribute( 'id' ) ] = data;\n\n\t\t}\n\n\t\tfunction parseLightTechnique( xml ) {\n\n\t\t\tvar data = {};\n\n\t\t\tfor ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n\t\t\t\tvar child = xml.childNodes[ i ];\n\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\n\n\t\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\t\tcase 'directional':\n\t\t\t\t\tcase 'point':\n\t\t\t\t\tcase 'spot':\n\t\t\t\t\tcase 'ambient':\n\n\t\t\t\t\t\tdata.technique = child.nodeName;\n\t\t\t\t\t\tdata.parameters = parseLightParameters( child );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn data;\n\n\t\t}\n\n\t\tfunction parseLightParameters( xml ) {\n\n\t\t\tvar data = {};\n\n\t\t\tfor ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n\t\t\t\tvar child = xml.childNodes[ i ];\n\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\n\n\t\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\t\tcase 'color':\n\t\t\t\t\t\tvar array = parseFloats( child.textContent );\n\t\t\t\t\t\tdata.color = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Color\"]().fromArray( array );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'falloff_angle':\n\t\t\t\t\t\tdata.falloffAngle = parseFloat( child.textContent );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'quadratic_attenuation':\n\t\t\t\t\t\tvar f = parseFloat( child.textContent );\n\t\t\t\t\t\tdata.distance = f ? Math.sqrt( 1 / f ) : 0;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn data;\n\n\t\t}\n\n\t\tfunction buildLight( data ) {\n\n\t\t\tvar light;\n\n\t\t\tswitch ( data.technique ) {\n\n\t\t\t\tcase 'directional':\n\t\t\t\t\tlight = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"DirectionalLight\"]();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'point':\n\t\t\t\t\tlight = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"PointLight\"]();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'spot':\n\t\t\t\t\tlight = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"SpotLight\"]();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'ambient':\n\t\t\t\t\tlight = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"AmbientLight\"]();\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tif ( data.parameters.color ) light.color.copy( data.parameters.color );\n\t\t\tif ( data.parameters.distance ) light.distance = data.parameters.distance;\n\n\t\t\treturn light;\n\n\t\t}\n\n\t\tfunction getLight( id ) {\n\n\t\t\tvar data = library.lights[ id ];\n\n\t\t\tif ( data !== undefined ) {\n\n\t\t\t\treturn getBuild( data, buildLight );\n\n\t\t\t}\n\n\t\t\tconsole.warn( 'THREE.ColladaLoader: Couldn\\'t find light with ID:', id );\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\t// geometry\n\n\t\tfunction parseGeometry( xml ) {\n\n\t\t\tvar data = {\n\t\t\t\tname: xml.getAttribute( 'name' ),\n\t\t\t\tsources: {},\n\t\t\t\tvertices: {},\n\t\t\t\tprimitives: []\n\t\t\t};\n\n\t\t\tvar mesh = getElementsByTagName( xml, 'mesh' )[ 0 ];\n\n\t\t\t// the following tags inside geometry are not supported yet (see https://github.com/mrdoob/three.js/pull/12606): convex_mesh, spline, brep\n\t\t\tif ( mesh === undefined ) return;\n\n\t\t\tfor ( var i = 0; i < mesh.childNodes.length; i ++ ) {\n\n\t\t\t\tvar child = mesh.childNodes[ i ];\n\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\n\n\t\t\t\tvar id = child.getAttribute( 'id' );\n\n\t\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\t\tcase 'source':\n\t\t\t\t\t\tdata.sources[ id ] = parseSource( child );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'vertices':\n\t\t\t\t\t\t// data.sources[ id ] = data.sources[ parseId( getElementsByTagName( child, 'input' )[ 0 ].getAttribute( 'source' ) ) ];\n\t\t\t\t\t\tdata.vertices = parseGeometryVertices( child );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'polygons':\n\t\t\t\t\t\tconsole.warn( 'THREE.ColladaLoader: Unsupported primitive type: ', child.nodeName );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'lines':\n\t\t\t\t\tcase 'linestrips':\n\t\t\t\t\tcase 'polylist':\n\t\t\t\t\tcase 'triangles':\n\t\t\t\t\t\tdata.primitives.push( parseGeometryPrimitive( child ) );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tconsole.log( child );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tlibrary.geometries[ xml.getAttribute( 'id' ) ] = data;\n\n\t\t}\n\n\t\tfunction parseSource( xml ) {\n\n\t\t\tvar data = {\n\t\t\t\tarray: [],\n\t\t\t\tstride: 3\n\t\t\t};\n\n\t\t\tfor ( var i = 0; i < xml.childNodes.length; i ++ ) {\n\n\t\t\t\tvar child = xml.childNodes[ i ];\n\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\n\n\t\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\t\tcase 'float_array':\n\t\t\t\t\t\tdata.array = parseFloats( child.textContent );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'Name_array':\n\t\t\t\t\t\tdata.array = parseStrings( child.textContent );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'technique_common':\n\t\t\t\t\t\tvar accessor = getElementsByTagName( child, 'accessor' )[ 0 ];\n\n\t\t\t\t\t\tif ( accessor !== undefined ) {\n\n\t\t\t\t\t\t\tdata.stride = parseInt( accessor.getAttribute( 'stride' ) );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn data;\n\n\t\t}\n\n\t\tfunction parseGeometryVertices( xml ) {\n\n\t\t\tvar data = {};\n\n\t\t\tfor ( var i = 0; i < xml.childNodes.length; i ++ ) {\n\n\t\t\t\tvar child = xml.childNodes[ i ];\n\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\n\n\t\t\t\tdata[ child.getAttribute( 'semantic' ) ] = parseId( child.getAttribute( 'source' ) );\n\n\t\t\t}\n\n\t\t\treturn data;\n\n\t\t}\n\n\t\tfunction parseGeometryPrimitive( xml ) {\n\n\t\t\tvar primitive = {\n\t\t\t\ttype: xml.nodeName,\n\t\t\t\tmaterial: xml.getAttribute( 'material' ),\n\t\t\t\tcount: parseInt( xml.getAttribute( 'count' ) ),\n\t\t\t\tinputs: {},\n\t\t\t\tstride: 0,\n\t\t\t\thasUV: false\n\t\t\t};\n\n\t\t\tfor ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n\t\t\t\tvar child = xml.childNodes[ i ];\n\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\n\n\t\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\t\tcase 'input':\n\t\t\t\t\t\tvar id = parseId( child.getAttribute( 'source' ) );\n\t\t\t\t\t\tvar semantic = child.getAttribute( 'semantic' );\n\t\t\t\t\t\tvar offset = parseInt( child.getAttribute( 'offset' ) );\n\t\t\t\t\t\tvar set = parseInt( child.getAttribute( 'set' ) );\n\t\t\t\t\t\tvar inputname = ( set > 0 ? semantic + set : semantic );\n\t\t\t\t\t\tprimitive.inputs[ inputname ] = { id: id, offset: offset };\n\t\t\t\t\t\tprimitive.stride = Math.max( primitive.stride, offset + 1 );\n\t\t\t\t\t\tif ( semantic === 'TEXCOORD' ) primitive.hasUV = true;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'vcount':\n\t\t\t\t\t\tprimitive.vcount = parseInts( child.textContent );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'p':\n\t\t\t\t\t\tprimitive.p = parseInts( child.textContent );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn primitive;\n\n\t\t}\n\n\t\tfunction groupPrimitives( primitives ) {\n\n\t\t\tvar build = {};\n\n\t\t\tfor ( var i = 0; i < primitives.length; i ++ ) {\n\n\t\t\t\tvar primitive = primitives[ i ];\n\n\t\t\t\tif ( build[ primitive.type ] === undefined ) build[ primitive.type ] = [];\n\n\t\t\t\tbuild[ primitive.type ].push( primitive );\n\n\t\t\t}\n\n\t\t\treturn build;\n\n\t\t}\n\n\t\tfunction checkUVCoordinates( primitives ) {\n\n\t\t\tvar count = 0;\n\n\t\t\tfor ( var i = 0, l = primitives.length; i < l; i ++ ) {\n\n\t\t\t\tvar primitive = primitives[ i ];\n\n\t\t\t\tif ( primitive.hasUV === true ) {\n\n\t\t\t\t\tcount ++;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( count > 0 && count < primitives.length ) {\n\n\t\t\t\tprimitives.uvsNeedsFix = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction buildGeometry( data ) {\n\n\t\t\tvar build = {};\n\n\t\t\tvar sources = data.sources;\n\t\t\tvar vertices = data.vertices;\n\t\t\tvar primitives = data.primitives;\n\n\t\t\tif ( primitives.length === 0 ) return {};\n\n\t\t\t// our goal is to create one buffer geometry for a single type of primitives\n\t\t\t// first, we group all primitives by their type\n\n\t\t\tvar groupedPrimitives = groupPrimitives( primitives );\n\n\t\t\tfor ( var type in groupedPrimitives ) {\n\n\t\t\t\tvar primitiveType = groupedPrimitives[ type ];\n\n\t\t\t\t// second, ensure consistent uv coordinates for each type of primitives (polylist,triangles or lines)\n\n\t\t\t\tcheckUVCoordinates( primitiveType );\n\n\t\t\t\t// third, create a buffer geometry for each type of primitives\n\n\t\t\t\tbuild[ type ] = buildGeometryType( primitiveType, sources, vertices );\n\n\t\t\t}\n\n\t\t\treturn build;\n\n\t\t}\n\n\t\tfunction buildGeometryType( primitives, sources, vertices ) {\n\n\t\t\tvar build = {};\n\n\t\t\tvar position = { array: [], stride: 0 };\n\t\t\tvar normal = { array: [], stride: 0 };\n\t\t\tvar uv = { array: [], stride: 0 };\n\t\t\tvar uv2 = { array: [], stride: 0 };\n\t\t\tvar color = { array: [], stride: 0 };\n\n\t\t\tvar skinIndex = { array: [], stride: 4 };\n\t\t\tvar skinWeight = { array: [], stride: 4 };\n\n\t\t\tvar geometry = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"BufferGeometry\"]();\n\n\t\t\tvar materialKeys = [];\n\n\t\t\tvar start = 0;\n\n\t\t\tfor ( var p = 0; p < primitives.length; p ++ ) {\n\n\t\t\t\tvar primitive = primitives[ p ];\n\t\t\t\tvar inputs = primitive.inputs;\n\n\t\t\t\t// groups\n\n\t\t\t\tvar count = 0;\n\n\t\t\t\tswitch ( primitive.type ) {\n\n\t\t\t\t\tcase 'lines':\n\t\t\t\t\tcase 'linestrips':\n\t\t\t\t\t\tcount = primitive.count * 2;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'triangles':\n\t\t\t\t\t\tcount = primitive.count * 3;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'polylist':\n\n\t\t\t\t\t\tfor ( var g = 0; g < primitive.count; g ++ ) {\n\n\t\t\t\t\t\t\tvar vc = primitive.vcount[ g ];\n\n\t\t\t\t\t\t\tswitch ( vc ) {\n\n\t\t\t\t\t\t\t\tcase 3:\n\t\t\t\t\t\t\t\t\tcount += 3; // single triangle\n\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 4:\n\t\t\t\t\t\t\t\t\tcount += 6; // quad, subdivided into two triangles\n\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\tcount += ( vc - 2 ) * 3; // polylist with more than four vertices\n\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tconsole.warn( 'THREE.ColladaLoader: Unknow primitive type:', primitive.type );\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.addGroup( start, count, p );\n\t\t\t\tstart += count;\n\n\t\t\t\t// material\n\n\t\t\t\tif ( primitive.material ) {\n\n\t\t\t\t\tmaterialKeys.push( primitive.material );\n\n\t\t\t\t}\n\n\t\t\t\t// geometry data\n\n\t\t\t\tfor ( var name in inputs ) {\n\n\t\t\t\t\tvar input = inputs[ name ];\n\n\t\t\t\t\tswitch ( name )\t{\n\n\t\t\t\t\t\tcase 'VERTEX':\n\t\t\t\t\t\t\tfor ( var key in vertices ) {\n\n\t\t\t\t\t\t\t\tvar id = vertices[ key ];\n\n\t\t\t\t\t\t\t\tswitch ( key ) {\n\n\t\t\t\t\t\t\t\t\tcase 'POSITION':\n\t\t\t\t\t\t\t\t\t\tvar prevLength = position.array.length;\n\t\t\t\t\t\t\t\t\t\tbuildGeometryData( primitive, sources[ id ], input.offset, position.array );\n\t\t\t\t\t\t\t\t\t\tposition.stride = sources[ id ].stride;\n\n\t\t\t\t\t\t\t\t\t\tif ( sources.skinWeights && sources.skinIndices ) {\n\n\t\t\t\t\t\t\t\t\t\t\tbuildGeometryData( primitive, sources.skinIndices, input.offset, skinIndex.array );\n\t\t\t\t\t\t\t\t\t\t\tbuildGeometryData( primitive, sources.skinWeights, input.offset, skinWeight.array );\n\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t// see #3803\n\n\t\t\t\t\t\t\t\t\t\tif ( primitive.hasUV === false && primitives.uvsNeedsFix === true ) {\n\n\t\t\t\t\t\t\t\t\t\t\tvar count = ( position.array.length - prevLength ) / position.stride;\n\n\t\t\t\t\t\t\t\t\t\t\tfor ( var i = 0; i < count; i ++ ) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t// fill missing uv coordinates\n\n\t\t\t\t\t\t\t\t\t\t\t\tuv.array.push( 0, 0 );\n\n\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\tcase 'NORMAL':\n\t\t\t\t\t\t\t\t\t\tbuildGeometryData( primitive, sources[ id ], input.offset, normal.array );\n\t\t\t\t\t\t\t\t\t\tnormal.stride = sources[ id ].stride;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\tcase 'COLOR':\n\t\t\t\t\t\t\t\t\t\tbuildGeometryData( primitive, sources[ id ], input.offset, color.array );\n\t\t\t\t\t\t\t\t\t\tcolor.stride = sources[ id ].stride;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\tcase 'TEXCOORD':\n\t\t\t\t\t\t\t\t\t\tbuildGeometryData( primitive, sources[ id ], input.offset, uv.array );\n\t\t\t\t\t\t\t\t\t\tuv.stride = sources[ id ].stride;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\tcase 'TEXCOORD1':\n\t\t\t\t\t\t\t\t\t\tbuildGeometryData( primitive, sources[ id ], input.offset, uv2.array );\n\t\t\t\t\t\t\t\t\t\tuv.stride = sources[ id ].stride;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\tconsole.warn( 'THREE.ColladaLoader: Semantic \"%s\" not handled in geometry build process.', key );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'NORMAL':\n\t\t\t\t\t\t\tbuildGeometryData( primitive, sources[ input.id ], input.offset, normal.array );\n\t\t\t\t\t\t\tnormal.stride = sources[ input.id ].stride;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'COLOR':\n\t\t\t\t\t\t\tbuildGeometryData( primitive, sources[ input.id ], input.offset, color.array );\n\t\t\t\t\t\t\tcolor.stride = sources[ input.id ].stride;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'TEXCOORD':\n\t\t\t\t\t\t\tbuildGeometryData( primitive, sources[ input.id ], input.offset, uv.array );\n\t\t\t\t\t\t\tuv.stride = sources[ input.id ].stride;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'TEXCOORD1':\n\t\t\t\t\t\t\tbuildGeometryData( primitive, sources[ input.id ], input.offset, uv2.array );\n\t\t\t\t\t\t\tuv2.stride = sources[ input.id ].stride;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// build geometry\n\n\t\t\tif ( position.array.length > 0 ) geometry.setAttribute( 'position', new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Float32BufferAttribute\"]( position.array, position.stride ) );\n\t\t\tif ( normal.array.length > 0 ) geometry.setAttribute( 'normal', new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Float32BufferAttribute\"]( normal.array, normal.stride ) );\n\t\t\tif ( color.array.length > 0 ) geometry.setAttribute( 'color', new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Float32BufferAttribute\"]( color.array, color.stride ) );\n\t\t\tif ( uv.array.length > 0 ) geometry.setAttribute( 'uv', new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Float32BufferAttribute\"]( uv.array, uv.stride ) );\n\t\t\tif ( uv2.array.length > 0 ) geometry.setAttribute( 'uv2', new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Float32BufferAttribute\"]( uv2.array, uv2.stride ) );\n\n\t\t\tif ( skinIndex.array.length > 0 ) geometry.setAttribute( 'skinIndex', new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Float32BufferAttribute\"]( skinIndex.array, skinIndex.stride ) );\n\t\t\tif ( skinWeight.array.length > 0 ) geometry.setAttribute( 'skinWeight', new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Float32BufferAttribute\"]( skinWeight.array, skinWeight.stride ) );\n\n\t\t\tbuild.data = geometry;\n\t\t\tbuild.type = primitives[ 0 ].type;\n\t\t\tbuild.materialKeys = materialKeys;\n\n\t\t\treturn build;\n\n\t\t}\n\n\t\tfunction buildGeometryData( primitive, source, offset, array ) {\n\n\t\t\tvar indices = primitive.p;\n\t\t\tvar stride = primitive.stride;\n\t\t\tvar vcount = primitive.vcount;\n\n\t\t\tfunction pushVector( i ) {\n\n\t\t\t\tvar index = indices[ i + offset ] * sourceStride;\n\t\t\t\tvar length = index + sourceStride;\n\n\t\t\t\tfor ( ; index < length; index ++ ) {\n\n\t\t\t\t\tarray.push( sourceArray[ index ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar sourceArray = source.array;\n\t\t\tvar sourceStride = source.stride;\n\n\t\t\tif ( primitive.vcount !== undefined ) {\n\n\t\t\t\tvar index = 0;\n\n\t\t\t\tfor ( var i = 0, l = vcount.length; i < l; i ++ ) {\n\n\t\t\t\t\tvar count = vcount[ i ];\n\n\t\t\t\t\tif ( count === 4 ) {\n\n\t\t\t\t\t\tvar a = index + stride * 0;\n\t\t\t\t\t\tvar b = index + stride * 1;\n\t\t\t\t\t\tvar c = index + stride * 2;\n\t\t\t\t\t\tvar d = index + stride * 3;\n\n\t\t\t\t\t\tpushVector( a ); pushVector( b ); pushVector( d );\n\t\t\t\t\t\tpushVector( b ); pushVector( c ); pushVector( d );\n\n\t\t\t\t\t} else if ( count === 3 ) {\n\n\t\t\t\t\t\tvar a = index + stride * 0;\n\t\t\t\t\t\tvar b = index + stride * 1;\n\t\t\t\t\t\tvar c = index + stride * 2;\n\n\t\t\t\t\t\tpushVector( a ); pushVector( b ); pushVector( c );\n\n\t\t\t\t\t} else if ( count > 4 ) {\n\n\t\t\t\t\t\tfor ( var k = 1, kl = ( count - 2 ); k <= kl; k ++ ) {\n\n\t\t\t\t\t\t\tvar a = index + stride * 0;\n\t\t\t\t\t\t\tvar b = index + stride * k;\n\t\t\t\t\t\t\tvar c = index + stride * ( k + 1 );\n\n\t\t\t\t\t\t\tpushVector( a ); pushVector( b ); pushVector( c );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tindex += stride * count;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tfor ( var i = 0, l = indices.length; i < l; i += stride ) {\n\n\t\t\t\t\tpushVector( i );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction getGeometry( id ) {\n\n\t\t\treturn getBuild( library.geometries[ id ], buildGeometry );\n\n\t\t}\n\n\t\t// kinematics\n\n\t\tfunction parseKinematicsModel( xml ) {\n\n\t\t\tvar data = {\n\t\t\t\tname: xml.getAttribute( 'name' ) || '',\n\t\t\t\tjoints: {},\n\t\t\t\tlinks: []\n\t\t\t};\n\n\t\t\tfor ( var i = 0; i < xml.childNodes.length; i ++ ) {\n\n\t\t\t\tvar child = xml.childNodes[ i ];\n\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\n\n\t\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\t\tcase 'technique_common':\n\t\t\t\t\t\tparseKinematicsTechniqueCommon( child, data );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tlibrary.kinematicsModels[ xml.getAttribute( 'id' ) ] = data;\n\n\t\t}\n\n\t\tfunction buildKinematicsModel( data ) {\n\n\t\t\tif ( data.build !== undefined ) return data.build;\n\n\t\t\treturn data;\n\n\t\t}\n\n\t\tfunction getKinematicsModel( id ) {\n\n\t\t\treturn getBuild( library.kinematicsModels[ id ], buildKinematicsModel );\n\n\t\t}\n\n\t\tfunction parseKinematicsTechniqueCommon( xml, data ) {\n\n\t\t\tfor ( var i = 0; i < xml.childNodes.length; i ++ ) {\n\n\t\t\t\tvar child = xml.childNodes[ i ];\n\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\n\n\t\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\t\tcase 'joint':\n\t\t\t\t\t\tdata.joints[ child.getAttribute( 'sid' ) ] = parseKinematicsJoint( child );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'link':\n\t\t\t\t\t\tdata.links.push( parseKinematicsLink( child ) );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction parseKinematicsJoint( xml ) {\n\n\t\t\tvar data;\n\n\t\t\tfor ( var i = 0; i < xml.childNodes.length; i ++ ) {\n\n\t\t\t\tvar child = xml.childNodes[ i ];\n\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\n\n\t\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\t\tcase 'prismatic':\n\t\t\t\t\tcase 'revolute':\n\t\t\t\t\t\tdata = parseKinematicsJointParameter( child );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn data;\n\n\t\t}\n\n\t\tfunction parseKinematicsJointParameter( xml, data ) {\n\n\t\t\tvar data = {\n\t\t\t\tsid: xml.getAttribute( 'sid' ),\n\t\t\t\tname: xml.getAttribute( 'name' ) || '',\n\t\t\t\taxis: new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector3\"](),\n\t\t\t\tlimits: {\n\t\t\t\t\tmin: 0,\n\t\t\t\t\tmax: 0\n\t\t\t\t},\n\t\t\t\ttype: xml.nodeName,\n\t\t\t\tstatic: false,\n\t\t\t\tzeroPosition: 0,\n\t\t\t\tmiddlePosition: 0\n\t\t\t};\n\n\t\t\tfor ( var i = 0; i < xml.childNodes.length; i ++ ) {\n\n\t\t\t\tvar child = xml.childNodes[ i ];\n\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\n\n\t\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\t\tcase 'axis':\n\t\t\t\t\t\tvar array = parseFloats( child.textContent );\n\t\t\t\t\t\tdata.axis.fromArray( array );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'limits':\n\t\t\t\t\t\tvar max = child.getElementsByTagName( 'max' )[ 0 ];\n\t\t\t\t\t\tvar min = child.getElementsByTagName( 'min' )[ 0 ];\n\n\t\t\t\t\t\tdata.limits.max = parseFloat( max.textContent );\n\t\t\t\t\t\tdata.limits.min = parseFloat( min.textContent );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// if min is equal to or greater than max, consider the joint static\n\n\t\t\tif ( data.limits.min >= data.limits.max ) {\n\n\t\t\t\tdata.static = true;\n\n\t\t\t}\n\n\t\t\t// calculate middle position\n\n\t\t\tdata.middlePosition = ( data.limits.min + data.limits.max ) / 2.0;\n\n\t\t\treturn data;\n\n\t\t}\n\n\t\tfunction parseKinematicsLink( xml ) {\n\n\t\t\tvar data = {\n\t\t\t\tsid: xml.getAttribute( 'sid' ),\n\t\t\t\tname: xml.getAttribute( 'name' ) || '',\n\t\t\t\tattachments: [],\n\t\t\t\ttransforms: []\n\t\t\t};\n\n\t\t\tfor ( var i = 0; i < xml.childNodes.length; i ++ ) {\n\n\t\t\t\tvar child = xml.childNodes[ i ];\n\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\n\n\t\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\t\tcase 'attachment_full':\n\t\t\t\t\t\tdata.attachments.push( parseKinematicsAttachment( child ) );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'matrix':\n\t\t\t\t\tcase 'translate':\n\t\t\t\t\tcase 'rotate':\n\t\t\t\t\t\tdata.transforms.push( parseKinematicsTransform( child ) );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn data;\n\n\t\t}\n\n\t\tfunction parseKinematicsAttachment( xml ) {\n\n\t\t\tvar data = {\n\t\t\t\tjoint: xml.getAttribute( 'joint' ).split( '/' ).pop(),\n\t\t\t\ttransforms: [],\n\t\t\t\tlinks: []\n\t\t\t};\n\n\t\t\tfor ( var i = 0; i < xml.childNodes.length; i ++ ) {\n\n\t\t\t\tvar child = xml.childNodes[ i ];\n\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\n\n\t\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\t\tcase 'link':\n\t\t\t\t\t\tdata.links.push( parseKinematicsLink( child ) );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'matrix':\n\t\t\t\t\tcase 'translate':\n\t\t\t\t\tcase 'rotate':\n\t\t\t\t\t\tdata.transforms.push( parseKinematicsTransform( child ) );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn data;\n\n\t\t}\n\n\t\tfunction parseKinematicsTransform( xml ) {\n\n\t\t\tvar data = {\n\t\t\t\ttype: xml.nodeName\n\t\t\t};\n\n\t\t\tvar array = parseFloats( xml.textContent );\n\n\t\t\tswitch ( data.type ) {\n\n\t\t\t\tcase 'matrix':\n\t\t\t\t\tdata.obj = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Matrix4\"]();\n\t\t\t\t\tdata.obj.fromArray( array ).transpose();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'translate':\n\t\t\t\t\tdata.obj = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector3\"]();\n\t\t\t\t\tdata.obj.fromArray( array );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'rotate':\n\t\t\t\t\tdata.obj = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector3\"]();\n\t\t\t\t\tdata.obj.fromArray( array );\n\t\t\t\t\tdata.angle = _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"MathUtils\"].degToRad( array[ 3 ] );\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\treturn data;\n\n\t\t}\n\n\t\t// physics\n\n\t\tfunction parsePhysicsModel( xml ) {\n\n\t\t\tvar data = {\n\t\t\t\tname: xml.getAttribute( 'name' ) || '',\n\t\t\t\trigidBodies: {}\n\t\t\t};\n\n\t\t\tfor ( var i = 0; i < xml.childNodes.length; i ++ ) {\n\n\t\t\t\tvar child = xml.childNodes[ i ];\n\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\n\n\t\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\t\tcase 'rigid_body':\n\t\t\t\t\t\tdata.rigidBodies[ child.getAttribute( 'name' ) ] = {};\n\t\t\t\t\t\tparsePhysicsRigidBody( child, data.rigidBodies[ child.getAttribute( 'name' ) ] );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tlibrary.physicsModels[ xml.getAttribute( 'id' ) ] = data;\n\n\t\t}\n\n\t\tfunction parsePhysicsRigidBody( xml, data ) {\n\n\t\t\tfor ( var i = 0; i < xml.childNodes.length; i ++ ) {\n\n\t\t\t\tvar child = xml.childNodes[ i ];\n\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\n\n\t\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\t\tcase 'technique_common':\n\t\t\t\t\t\tparsePhysicsTechniqueCommon( child, data );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction parsePhysicsTechniqueCommon( xml, data ) {\n\n\t\t\tfor ( var i = 0; i < xml.childNodes.length; i ++ ) {\n\n\t\t\t\tvar child = xml.childNodes[ i ];\n\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\n\n\t\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\t\tcase 'inertia':\n\t\t\t\t\t\tdata.inertia = parseFloats( child.textContent );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'mass':\n\t\t\t\t\t\tdata.mass = parseFloats( child.textContent )[ 0 ];\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// scene\n\n\t\tfunction parseKinematicsScene( xml ) {\n\n\t\t\tvar data = {\n\t\t\t\tbindJointAxis: []\n\t\t\t};\n\n\t\t\tfor ( var i = 0; i < xml.childNodes.length; i ++ ) {\n\n\t\t\t\tvar child = xml.childNodes[ i ];\n\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\n\n\t\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\t\tcase 'bind_joint_axis':\n\t\t\t\t\t\tdata.bindJointAxis.push( parseKinematicsBindJointAxis( child ) );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tlibrary.kinematicsScenes[ parseId( xml.getAttribute( 'url' ) ) ] = data;\n\n\t\t}\n\n\t\tfunction parseKinematicsBindJointAxis( xml ) {\n\n\t\t\tvar data = {\n\t\t\t\ttarget: xml.getAttribute( 'target' ).split( '/' ).pop()\n\t\t\t};\n\n\t\t\tfor ( var i = 0; i < xml.childNodes.length; i ++ ) {\n\n\t\t\t\tvar child = xml.childNodes[ i ];\n\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\n\n\t\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\t\tcase 'axis':\n\t\t\t\t\t\tvar param = child.getElementsByTagName( 'param' )[ 0 ];\n\t\t\t\t\t\tdata.axis = param.textContent;\n\t\t\t\t\t\tvar tmpJointIndex = data.axis.split( 'inst_' ).pop().split( 'axis' )[ 0 ];\n\t\t\t\t\t\tdata.jointIndex = tmpJointIndex.substr( 0, tmpJointIndex.length - 1 );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn data;\n\n\t\t}\n\n\t\tfunction buildKinematicsScene( data ) {\n\n\t\t\tif ( data.build !== undefined ) return data.build;\n\n\t\t\treturn data;\n\n\t\t}\n\n\t\tfunction getKinematicsScene( id ) {\n\n\t\t\treturn getBuild( library.kinematicsScenes[ id ], buildKinematicsScene );\n\n\t\t}\n\n\t\tfunction setupKinematics() {\n\n\t\t\tvar kinematicsModelId = Object.keys( library.kinematicsModels )[ 0 ];\n\t\t\tvar kinematicsSceneId = Object.keys( library.kinematicsScenes )[ 0 ];\n\t\t\tvar visualSceneId = Object.keys( library.visualScenes )[ 0 ];\n\n\t\t\tif ( kinematicsModelId === undefined || kinematicsSceneId === undefined ) return;\n\n\t\t\tvar kinematicsModel = getKinematicsModel( kinematicsModelId );\n\t\t\tvar kinematicsScene = getKinematicsScene( kinematicsSceneId );\n\t\t\tvar visualScene = getVisualScene( visualSceneId );\n\n\t\t\tvar bindJointAxis = kinematicsScene.bindJointAxis;\n\t\t\tvar jointMap = {};\n\n\t\t\tfor ( var i = 0, l = bindJointAxis.length; i < l; i ++ ) {\n\n\t\t\t\tvar axis = bindJointAxis[ i ];\n\n\t\t\t\t// the result of the following query is an element of type 'translate', 'rotate','scale' or 'matrix'\n\n\t\t\t\tvar targetElement = collada.querySelector( '[sid=\"' + axis.target + '\"]' );\n\n\t\t\t\tif ( targetElement ) {\n\n\t\t\t\t\t// get the parent of the transform element\n\n\t\t\t\t\tvar parentVisualElement = targetElement.parentElement;\n\n\t\t\t\t\t// connect the joint of the kinematics model with the element in the visual scene\n\n\t\t\t\t\tconnect( axis.jointIndex, parentVisualElement );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfunction connect( jointIndex, visualElement ) {\n\n\t\t\t\tvar visualElementName = visualElement.getAttribute( 'name' );\n\t\t\t\tvar joint = kinematicsModel.joints[ jointIndex ];\n\n\t\t\t\tvisualScene.traverse( function ( object ) {\n\n\t\t\t\t\tif ( object.name === visualElementName ) {\n\n\t\t\t\t\t\tjointMap[ jointIndex ] = {\n\t\t\t\t\t\t\tobject: object,\n\t\t\t\t\t\t\ttransforms: buildTransformList( visualElement ),\n\t\t\t\t\t\t\tjoint: joint,\n\t\t\t\t\t\t\tposition: joint.zeroPosition\n\t\t\t\t\t\t};\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\tvar m0 = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Matrix4\"]();\n\n\t\t\tkinematics = {\n\n\t\t\t\tjoints: kinematicsModel && kinematicsModel.joints,\n\n\t\t\t\tgetJointValue: function ( jointIndex ) {\n\n\t\t\t\t\tvar jointData = jointMap[ jointIndex ];\n\n\t\t\t\t\tif ( jointData ) {\n\n\t\t\t\t\t\treturn jointData.position;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.ColladaLoader: Joint ' + jointIndex + ' doesn\\'t exist.' );\n\n\t\t\t\t\t}\n\n\t\t\t\t},\n\n\t\t\t\tsetJointValue: function ( jointIndex, value ) {\n\n\t\t\t\t\tvar jointData = jointMap[ jointIndex ];\n\n\t\t\t\t\tif ( jointData ) {\n\n\t\t\t\t\t\tvar joint = jointData.joint;\n\n\t\t\t\t\t\tif ( value > joint.limits.max || value < joint.limits.min ) {\n\n\t\t\t\t\t\t\tconsole.warn( 'THREE.ColladaLoader: Joint ' + jointIndex + ' value ' + value + ' outside of limits (min: ' + joint.limits.min + ', max: ' + joint.limits.max + ').' );\n\n\t\t\t\t\t\t} else if ( joint.static ) {\n\n\t\t\t\t\t\t\tconsole.warn( 'THREE.ColladaLoader: Joint ' + jointIndex + ' is static.' );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tvar object = jointData.object;\n\t\t\t\t\t\t\tvar axis = joint.axis;\n\t\t\t\t\t\t\tvar transforms = jointData.transforms;\n\n\t\t\t\t\t\t\tmatrix.identity();\n\n\t\t\t\t\t\t\t// each update, we have to apply all transforms in the correct order\n\n\t\t\t\t\t\t\tfor ( var i = 0; i < transforms.length; i ++ ) {\n\n\t\t\t\t\t\t\t\tvar transform = transforms[ i ];\n\n\t\t\t\t\t\t\t\t// if there is a connection of the transform node with a joint, apply the joint value\n\n\t\t\t\t\t\t\t\tif ( transform.sid && transform.sid.indexOf( jointIndex ) !== - 1 ) {\n\n\t\t\t\t\t\t\t\t\tswitch ( joint.type ) {\n\n\t\t\t\t\t\t\t\t\t\tcase 'revolute':\n\t\t\t\t\t\t\t\t\t\t\tmatrix.multiply( m0.makeRotationAxis( axis, _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"MathUtils\"].degToRad( value ) ) );\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\tcase 'prismatic':\n\t\t\t\t\t\t\t\t\t\t\tmatrix.multiply( m0.makeTranslation( axis.x * value, axis.y * value, axis.z * value ) );\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\t\tconsole.warn( 'THREE.ColladaLoader: Unknown joint type: ' + joint.type );\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\tswitch ( transform.type ) {\n\n\t\t\t\t\t\t\t\t\t\tcase 'matrix':\n\t\t\t\t\t\t\t\t\t\t\tmatrix.multiply( transform.obj );\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\tcase 'translate':\n\t\t\t\t\t\t\t\t\t\t\tmatrix.multiply( m0.makeTranslation( transform.obj.x, transform.obj.y, transform.obj.z ) );\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\tcase 'scale':\n\t\t\t\t\t\t\t\t\t\t\tmatrix.scale( transform.obj );\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\tcase 'rotate':\n\t\t\t\t\t\t\t\t\t\t\tmatrix.multiply( m0.makeRotationAxis( transform.obj, transform.angle ) );\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tobject.matrix.copy( matrix );\n\t\t\t\t\t\t\tobject.matrix.decompose( object.position, object.quaternion, object.scale );\n\n\t\t\t\t\t\t\tjointMap[ jointIndex ].position = value;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconsole.log( 'THREE.ColladaLoader: ' + jointIndex + ' does not exist.' );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t}\n\n\t\tfunction buildTransformList( node ) {\n\n\t\t\tvar transforms = [];\n\n\t\t\tvar xml = collada.querySelector( '[id=\"' + node.id + '\"]' );\n\n\t\t\tfor ( var i = 0; i < xml.childNodes.length; i ++ ) {\n\n\t\t\t\tvar child = xml.childNodes[ i ];\n\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\n\n\t\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\t\tcase 'matrix':\n\t\t\t\t\t\tvar array = parseFloats( child.textContent );\n\t\t\t\t\t\tvar matrix = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Matrix4\"]().fromArray( array ).transpose();\n\t\t\t\t\t\ttransforms.push( {\n\t\t\t\t\t\t\tsid: child.getAttribute( 'sid' ),\n\t\t\t\t\t\t\ttype: child.nodeName,\n\t\t\t\t\t\t\tobj: matrix\n\t\t\t\t\t\t} );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'translate':\n\t\t\t\t\tcase 'scale':\n\t\t\t\t\t\tvar array = parseFloats( child.textContent );\n\t\t\t\t\t\tvar vector = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector3\"]().fromArray( array );\n\t\t\t\t\t\ttransforms.push( {\n\t\t\t\t\t\t\tsid: child.getAttribute( 'sid' ),\n\t\t\t\t\t\t\ttype: child.nodeName,\n\t\t\t\t\t\t\tobj: vector\n\t\t\t\t\t\t} );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'rotate':\n\t\t\t\t\t\tvar array = parseFloats( child.textContent );\n\t\t\t\t\t\tvar vector = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector3\"]().fromArray( array );\n\t\t\t\t\t\tvar angle = _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"MathUtils\"].degToRad( array[ 3 ] );\n\t\t\t\t\t\ttransforms.push( {\n\t\t\t\t\t\t\tsid: child.getAttribute( 'sid' ),\n\t\t\t\t\t\t\ttype: child.nodeName,\n\t\t\t\t\t\t\tobj: vector,\n\t\t\t\t\t\t\tangle: angle\n\t\t\t\t\t\t} );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn transforms;\n\n\t\t}\n\n\t\t// nodes\n\n\t\tfunction prepareNodes( xml ) {\n\n\t\t\tvar elements = xml.getElementsByTagName( 'node' );\n\n\t\t\t// ensure all node elements have id attributes\n\n\t\t\tfor ( var i = 0; i < elements.length; i ++ ) {\n\n\t\t\t\tvar element = elements[ i ];\n\n\t\t\t\tif ( element.hasAttribute( 'id' ) === false ) {\n\n\t\t\t\t\telement.setAttribute( 'id', generateId() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar matrix = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Matrix4\"]();\n\t\tvar vector = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector3\"]();\n\n\t\tfunction parseNode( xml ) {\n\n\t\t\tvar data = {\n\t\t\t\tname: xml.getAttribute( 'name' ) || '',\n\t\t\t\ttype: xml.getAttribute( 'type' ),\n\t\t\t\tid: xml.getAttribute( 'id' ),\n\t\t\t\tsid: xml.getAttribute( 'sid' ),\n\t\t\t\tmatrix: new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Matrix4\"](),\n\t\t\t\tnodes: [],\n\t\t\t\tinstanceCameras: [],\n\t\t\t\tinstanceControllers: [],\n\t\t\t\tinstanceLights: [],\n\t\t\t\tinstanceGeometries: [],\n\t\t\t\tinstanceNodes: [],\n\t\t\t\ttransforms: {}\n\t\t\t};\n\n\t\t\tfor ( var i = 0; i < xml.childNodes.length; i ++ ) {\n\n\t\t\t\tvar child = xml.childNodes[ i ];\n\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\n\n\t\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\t\tcase 'node':\n\t\t\t\t\t\tdata.nodes.push( child.getAttribute( 'id' ) );\n\t\t\t\t\t\tparseNode( child );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'instance_camera':\n\t\t\t\t\t\tdata.instanceCameras.push( parseId( child.getAttribute( 'url' ) ) );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'instance_controller':\n\t\t\t\t\t\tdata.instanceControllers.push( parseNodeInstance( child ) );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'instance_light':\n\t\t\t\t\t\tdata.instanceLights.push( parseId( child.getAttribute( 'url' ) ) );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'instance_geometry':\n\t\t\t\t\t\tdata.instanceGeometries.push( parseNodeInstance( child ) );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'instance_node':\n\t\t\t\t\t\tdata.instanceNodes.push( parseId( child.getAttribute( 'url' ) ) );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'matrix':\n\t\t\t\t\t\tvar array = parseFloats( child.textContent );\n\t\t\t\t\t\tdata.matrix.multiply( matrix.fromArray( array ).transpose() );\n\t\t\t\t\t\tdata.transforms[ child.getAttribute( 'sid' ) ] = child.nodeName;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'translate':\n\t\t\t\t\t\tvar array = parseFloats( child.textContent );\n\t\t\t\t\t\tvector.fromArray( array );\n\t\t\t\t\t\tdata.matrix.multiply( matrix.makeTranslation( vector.x, vector.y, vector.z ) );\n\t\t\t\t\t\tdata.transforms[ child.getAttribute( 'sid' ) ] = child.nodeName;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'rotate':\n\t\t\t\t\t\tvar array = parseFloats( child.textContent );\n\t\t\t\t\t\tvar angle = _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"MathUtils\"].degToRad( array[ 3 ] );\n\t\t\t\t\t\tdata.matrix.multiply( matrix.makeRotationAxis( vector.fromArray( array ), angle ) );\n\t\t\t\t\t\tdata.transforms[ child.getAttribute( 'sid' ) ] = child.nodeName;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'scale':\n\t\t\t\t\t\tvar array = parseFloats( child.textContent );\n\t\t\t\t\t\tdata.matrix.scale( vector.fromArray( array ) );\n\t\t\t\t\t\tdata.transforms[ child.getAttribute( 'sid' ) ] = child.nodeName;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'extra':\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tconsole.log( child );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( hasNode( data.id ) ) {\n\n\t\t\t\tconsole.warn( 'THREE.ColladaLoader: There is already a node with ID %s. Exclude current node from further processing.', data.id );\n\n\t\t\t} else {\n\n\t\t\t\tlibrary.nodes[ data.id ] = data;\n\n\t\t\t}\n\n\t\t\treturn data;\n\n\t\t}\n\n\t\tfunction parseNodeInstance( xml ) {\n\n\t\t\tvar data = {\n\t\t\t\tid: parseId( xml.getAttribute( 'url' ) ),\n\t\t\t\tmaterials: {},\n\t\t\t\tskeletons: []\n\t\t\t};\n\n\t\t\tfor ( var i = 0; i < xml.childNodes.length; i ++ ) {\n\n\t\t\t\tvar child = xml.childNodes[ i ];\n\n\t\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\t\tcase 'bind_material':\n\t\t\t\t\t\tvar instances = child.getElementsByTagName( 'instance_material' );\n\n\t\t\t\t\t\tfor ( var j = 0; j < instances.length; j ++ ) {\n\n\t\t\t\t\t\t\tvar instance = instances[ j ];\n\t\t\t\t\t\t\tvar symbol = instance.getAttribute( 'symbol' );\n\t\t\t\t\t\t\tvar target = instance.getAttribute( 'target' );\n\n\t\t\t\t\t\t\tdata.materials[ symbol ] = parseId( target );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'skeleton':\n\t\t\t\t\t\tdata.skeletons.push( parseId( child.textContent ) );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn data;\n\n\t\t}\n\n\t\tfunction buildSkeleton( skeletons, joints ) {\n\n\t\t\tvar boneData = [];\n\t\t\tvar sortedBoneData = [];\n\n\t\t\tvar i, j, data;\n\n\t\t\t// a skeleton can have multiple root bones. collada expresses this\n\t\t\t// situtation with multiple \"skeleton\" tags per controller instance\n\n\t\t\tfor ( i = 0; i < skeletons.length; i ++ ) {\n\n\t\t\t\tvar skeleton = skeletons[ i ];\n\n\t\t\t\tvar root;\n\n\t\t\t\tif ( hasNode( skeleton ) ) {\n\n\t\t\t\t\troot = getNode( skeleton );\n\t\t\t\t\tbuildBoneHierarchy( root, joints, boneData );\n\n\t\t\t\t} else if ( hasVisualScene( skeleton ) ) {\n\n\t\t\t\t\t// handle case where the skeleton refers to the visual scene (#13335)\n\n\t\t\t\t\tvar visualScene = library.visualScenes[ skeleton ];\n\t\t\t\t\tvar children = visualScene.children;\n\n\t\t\t\t\tfor ( var j = 0; j < children.length; j ++ ) {\n\n\t\t\t\t\t\tvar child = children[ j ];\n\n\t\t\t\t\t\tif ( child.type === 'JOINT' ) {\n\n\t\t\t\t\t\t\tvar root = getNode( child.id );\n\t\t\t\t\t\t\tbuildBoneHierarchy( root, joints, boneData );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( 'THREE.ColladaLoader: Unable to find root bone of skeleton with ID:', skeleton );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// sort bone data (the order is defined in the corresponding controller)\n\n\t\t\tfor ( i = 0; i < joints.length; i ++ ) {\n\n\t\t\t\tfor ( j = 0; j < boneData.length; j ++ ) {\n\n\t\t\t\t\tdata = boneData[ j ];\n\n\t\t\t\t\tif ( data.bone.name === joints[ i ].name ) {\n\n\t\t\t\t\t\tsortedBoneData[ i ] = data;\n\t\t\t\t\t\tdata.processed = true;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// add unprocessed bone data at the end of the list\n\n\t\t\tfor ( i = 0; i < boneData.length; i ++ ) {\n\n\t\t\t\tdata = boneData[ i ];\n\n\t\t\t\tif ( data.processed === false ) {\n\n\t\t\t\t\tsortedBoneData.push( data );\n\t\t\t\t\tdata.processed = true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// setup arrays for skeleton creation\n\n\t\t\tvar bones = [];\n\t\t\tvar boneInverses = [];\n\n\t\t\tfor ( i = 0; i < sortedBoneData.length; i ++ ) {\n\n\t\t\t\tdata = sortedBoneData[ i ];\n\n\t\t\t\tbones.push( data.bone );\n\t\t\t\tboneInverses.push( data.boneInverse );\n\n\t\t\t}\n\n\t\t\treturn new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Skeleton\"]( bones, boneInverses );\n\n\t\t}\n\n\t\tfunction buildBoneHierarchy( root, joints, boneData ) {\n\n\t\t\t// setup bone data from visual scene\n\n\t\t\troot.traverse( function ( object ) {\n\n\t\t\t\tif ( object.isBone === true ) {\n\n\t\t\t\t\tvar boneInverse;\n\n\t\t\t\t\t// retrieve the boneInverse from the controller data\n\n\t\t\t\t\tfor ( var i = 0; i < joints.length; i ++ ) {\n\n\t\t\t\t\t\tvar joint = joints[ i ];\n\n\t\t\t\t\t\tif ( joint.name === object.name ) {\n\n\t\t\t\t\t\t\tboneInverse = joint.boneInverse;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( boneInverse === undefined ) {\n\n\t\t\t\t\t\t// Unfortunately, there can be joints in the visual scene that are not part of the\n\t\t\t\t\t\t// corresponding controller. In this case, we have to create a dummy boneInverse matrix\n\t\t\t\t\t\t// for the respective bone. This bone won't affect any vertices, because there are no skin indices\n\t\t\t\t\t\t// and weights defined for it. But we still have to add the bone to the sorted bone list in order to\n\t\t\t\t\t\t// ensure a correct animation of the model.\n\n\t\t\t\t\t\tboneInverse = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Matrix4\"]();\n\n\t\t\t\t\t}\n\n\t\t\t\t\tboneData.push( { bone: object, boneInverse: boneInverse, processed: false } );\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t}\n\n\t\tfunction buildNode( data ) {\n\n\t\t\tvar objects = [];\n\n\t\t\tvar matrix = data.matrix;\n\t\t\tvar nodes = data.nodes;\n\t\t\tvar type = data.type;\n\t\t\tvar instanceCameras = data.instanceCameras;\n\t\t\tvar instanceControllers = data.instanceControllers;\n\t\t\tvar instanceLights = data.instanceLights;\n\t\t\tvar instanceGeometries = data.instanceGeometries;\n\t\t\tvar instanceNodes = data.instanceNodes;\n\n\t\t\t// nodes\n\n\t\t\tfor ( var i = 0, l = nodes.length; i < l; i ++ ) {\n\n\t\t\t\tobjects.push( getNode( nodes[ i ] ) );\n\n\t\t\t}\n\n\t\t\t// instance cameras\n\n\t\t\tfor ( var i = 0, l = instanceCameras.length; i < l; i ++ ) {\n\n\t\t\t\tvar instanceCamera = getCamera( instanceCameras[ i ] );\n\n\t\t\t\tif ( instanceCamera !== null ) {\n\n\t\t\t\t\tobjects.push( instanceCamera.clone() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// instance controllers\n\n\t\t\tfor ( var i = 0, l = instanceControllers.length; i < l; i ++ ) {\n\n\t\t\t\tvar instance = instanceControllers[ i ];\n\t\t\t\tvar controller = getController( instance.id );\n\t\t\t\tvar geometries = getGeometry( controller.id );\n\t\t\t\tvar newObjects = buildObjects( geometries, instance.materials );\n\n\t\t\t\tvar skeletons = instance.skeletons;\n\t\t\t\tvar joints = controller.skin.joints;\n\n\t\t\t\tvar skeleton = buildSkeleton( skeletons, joints );\n\n\t\t\t\tfor ( var j = 0, jl = newObjects.length; j < jl; j ++ ) {\n\n\t\t\t\t\tvar object = newObjects[ j ];\n\n\t\t\t\t\tif ( object.isSkinnedMesh ) {\n\n\t\t\t\t\t\tobject.bind( skeleton, controller.skin.bindMatrix );\n\t\t\t\t\t\tobject.normalizeSkinWeights();\n\n\t\t\t\t\t}\n\n\t\t\t\t\tobjects.push( object );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// instance lights\n\n\t\t\tfor ( var i = 0, l = instanceLights.length; i < l; i ++ ) {\n\n\t\t\t\tvar instanceLight = getLight( instanceLights[ i ] );\n\n\t\t\t\tif ( instanceLight !== null ) {\n\n\t\t\t\t\tobjects.push( instanceLight.clone() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// instance geometries\n\n\t\t\tfor ( var i = 0, l = instanceGeometries.length; i < l; i ++ ) {\n\n\t\t\t\tvar instance = instanceGeometries[ i ];\n\n\t\t\t\t// a single geometry instance in collada can lead to multiple object3Ds.\n\t\t\t\t// this is the case when primitives are combined like triangles and lines\n\n\t\t\t\tvar geometries = getGeometry( instance.id );\n\t\t\t\tvar newObjects = buildObjects( geometries, instance.materials );\n\n\t\t\t\tfor ( var j = 0, jl = newObjects.length; j < jl; j ++ ) {\n\n\t\t\t\t\tobjects.push( newObjects[ j ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// instance nodes\n\n\t\t\tfor ( var i = 0, l = instanceNodes.length; i < l; i ++ ) {\n\n\t\t\t\tobjects.push( getNode( instanceNodes[ i ] ).clone() );\n\n\t\t\t}\n\n\t\t\tvar object;\n\n\t\t\tif ( nodes.length === 0 && objects.length === 1 ) {\n\n\t\t\t\tobject = objects[ 0 ];\n\n\t\t\t} else {\n\n\t\t\t\tobject = ( type === 'JOINT' ) ? new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Bone\"]() : new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Group\"]();\n\n\t\t\t\tfor ( var i = 0; i < objects.length; i ++ ) {\n\n\t\t\t\t\tobject.add( objects[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tobject.name = ( type === 'JOINT' ) ? data.sid : data.name;\n\t\t\tobject.matrix.copy( matrix );\n\t\t\tobject.matrix.decompose( object.position, object.quaternion, object.scale );\n\n\t\t\treturn object;\n\n\t\t}\n\n\t\tvar fallbackMaterial = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"MeshBasicMaterial\"]( { color: 0xff00ff } );\n\n\t\tfunction resolveMaterialBinding( keys, instanceMaterials ) {\n\n\t\t\tvar materials = [];\n\n\t\t\tfor ( var i = 0, l = keys.length; i < l; i ++ ) {\n\n\t\t\t\tvar id = instanceMaterials[ keys[ i ] ];\n\n\t\t\t\tif ( id === undefined ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.ColladaLoader: Material with key %s not found. Apply fallback material.', keys[ i ] );\n\t\t\t\t\tmaterials.push( fallbackMaterial );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tmaterials.push( getMaterial( id ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn materials;\n\n\t\t}\n\n\t\tfunction buildObjects( geometries, instanceMaterials ) {\n\n\t\t\tvar objects = [];\n\n\t\t\tfor ( var type in geometries ) {\n\n\t\t\t\tvar geometry = geometries[ type ];\n\n\t\t\t\tvar materials = resolveMaterialBinding( geometry.materialKeys, instanceMaterials );\n\n\t\t\t\t// handle case if no materials are defined\n\n\t\t\t\tif ( materials.length === 0 ) {\n\n\t\t\t\t\tif ( type === 'lines' || type === 'linestrips' ) {\n\n\t\t\t\t\t\tmaterials.push( new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"LineBasicMaterial\"]() );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tmaterials.push( new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"MeshPhongMaterial\"]() );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// regard skinning\n\n\t\t\t\tvar skinning = ( geometry.data.attributes.skinIndex !== undefined );\n\n\t\t\t\tif ( skinning ) {\n\n\t\t\t\t\tfor ( var i = 0, l = materials.length; i < l; i ++ ) {\n\n\t\t\t\t\t\tmaterials[ i ].skinning = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// choose between a single or multi materials (material array)\n\n\t\t\t\tvar material = ( materials.length === 1 ) ? materials[ 0 ] : materials;\n\n\t\t\t\t// now create a specific 3D object\n\n\t\t\t\tvar object;\n\n\t\t\t\tswitch ( type ) {\n\n\t\t\t\t\tcase 'lines':\n\t\t\t\t\t\tobject = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"LineSegments\"]( geometry.data, material );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'linestrips':\n\t\t\t\t\t\tobject = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Line\"]( geometry.data, material );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'triangles':\n\t\t\t\t\tcase 'polylist':\n\t\t\t\t\t\tif ( skinning ) {\n\n\t\t\t\t\t\t\tobject = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"SkinnedMesh\"]( geometry.data, material );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tobject = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Mesh\"]( geometry.data, material );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\tobjects.push( object );\n\n\t\t\t}\n\n\t\t\treturn objects;\n\n\t\t}\n\n\t\tfunction hasNode( id ) {\n\n\t\t\treturn library.nodes[ id ] !== undefined;\n\n\t\t}\n\n\t\tfunction getNode( id ) {\n\n\t\t\treturn getBuild( library.nodes[ id ], buildNode );\n\n\t\t}\n\n\t\t// visual scenes\n\n\t\tfunction parseVisualScene( xml ) {\n\n\t\t\tvar data = {\n\t\t\t\tname: xml.getAttribute( 'name' ),\n\t\t\t\tchildren: []\n\t\t\t};\n\n\t\t\tprepareNodes( xml );\n\n\t\t\tvar elements = getElementsByTagName( xml, 'node' );\n\n\t\t\tfor ( var i = 0; i < elements.length; i ++ ) {\n\n\t\t\t\tdata.children.push( parseNode( elements[ i ] ) );\n\n\t\t\t}\n\n\t\t\tlibrary.visualScenes[ xml.getAttribute( 'id' ) ] = data;\n\n\t\t}\n\n\t\tfunction buildVisualScene( data ) {\n\n\t\t\tvar group = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Group\"]();\n\t\t\tgroup.name = data.name;\n\n\t\t\tvar children = data.children;\n\n\t\t\tfor ( var i = 0; i < children.length; i ++ ) {\n\n\t\t\t\tvar child = children[ i ];\n\n\t\t\t\tgroup.add( getNode( child.id ) );\n\n\t\t\t}\n\n\t\t\treturn group;\n\n\t\t}\n\n\t\tfunction hasVisualScene( id ) {\n\n\t\t\treturn library.visualScenes[ id ] !== undefined;\n\n\t\t}\n\n\t\tfunction getVisualScene( id ) {\n\n\t\t\treturn getBuild( library.visualScenes[ id ], buildVisualScene );\n\n\t\t}\n\n\t\t// scenes\n\n\t\tfunction parseScene( xml ) {\n\n\t\t\tvar instance = getElementsByTagName( xml, 'instance_visual_scene' )[ 0 ];\n\t\t\treturn getVisualScene( parseId( instance.getAttribute( 'url' ) ) );\n\n\t\t}\n\n\t\tfunction setupAnimations() {\n\n\t\t\tvar clips = library.clips;\n\n\t\t\tif ( isEmpty( clips ) === true ) {\n\n\t\t\t\tif ( isEmpty( library.animations ) === false ) {\n\n\t\t\t\t\t// if there are animations but no clips, we create a default clip for playback\n\n\t\t\t\t\tvar tracks = [];\n\n\t\t\t\t\tfor ( var id in library.animations ) {\n\n\t\t\t\t\t\tvar animationTracks = getAnimation( id );\n\n\t\t\t\t\t\tfor ( var i = 0, l = animationTracks.length; i < l; i ++ ) {\n\n\t\t\t\t\t\t\ttracks.push( animationTracks[ i ] );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tanimations.push( new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"AnimationClip\"]( 'default', - 1, tracks ) );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tfor ( var id in clips ) {\n\n\t\t\t\t\tanimations.push( getAnimationClip( id ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// convert the parser error element into text with each child elements text\n\t\t// separated by new lines.\n\n\t\tfunction parserErrorToText( parserError ) {\n\n\t\t\tvar result = '';\n\t\t\tvar stack = [ parserError ];\n\n\t\t\twhile ( stack.length ) {\n\n\t\t\t\tvar node = stack.shift();\n\n\t\t\t\tif ( node.nodeType === Node.TEXT_NODE ) {\n\n\t\t\t\t\tresult += node.textContent;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tresult += '\\n';\n\t\t\t\t\tstack.push.apply( stack, node.childNodes );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn result.trim();\n\n\t\t}\n\n\t\tif ( text.length === 0 ) {\n\n\t\t\treturn { scene: new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Scene\"]() };\n\n\t\t}\n\n\t\tvar xml = new DOMParser().parseFromString( text, 'application/xml' );\n\n\t\tvar collada = getElementsByTagName( xml, 'COLLADA' )[ 0 ];\n\n\t\tvar parserError = xml.getElementsByTagName( 'parsererror' )[ 0 ];\n\t\tif ( parserError !== undefined ) {\n\n\t\t\t// Chrome will return parser error with a div in it\n\n\t\t\tvar errorElement = getElementsByTagName( parserError, 'div' )[ 0 ];\n\t\t\tvar errorText;\n\n\t\t\tif ( errorElement ) {\n\n\t\t\t\terrorText = errorElement.textContent;\n\n\t\t\t} else {\n\n\t\t\t\terrorText = parserErrorToText( parserError );\n\n\t\t\t}\n\n\t\t\tconsole.error( 'THREE.ColladaLoader: Failed to parse collada file.\\n', errorText );\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\t// metadata\n\n\t\tvar version = collada.getAttribute( 'version' );\n\t\tconsole.log( 'THREE.ColladaLoader: File version', version );\n\n\t\tvar asset = parseAsset( getElementsByTagName( collada, 'asset' )[ 0 ] );\n\t\tvar textureLoader = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"TextureLoader\"]( this.manager );\n\t\ttextureLoader.setPath( this.resourcePath || path ).setCrossOrigin( this.crossOrigin );\n\n\t\tvar tgaLoader;\n\n\t\tif ( _loaders_TGALoader_js__WEBPACK_IMPORTED_MODULE_1__[\"TGALoader\"] ) {\n\n\t\t\ttgaLoader = new _loaders_TGALoader_js__WEBPACK_IMPORTED_MODULE_1__[\"TGALoader\"]( this.manager );\n\t\t\ttgaLoader.setPath( this.resourcePath || path );\n\n\t\t}\n\n\t\t//\n\n\t\tvar animations = [];\n\t\tvar kinematics = {};\n\t\tvar count = 0;\n\n\t\t//\n\n\t\tvar library = {\n\t\t\tanimations: {},\n\t\t\tclips: {},\n\t\t\tcontrollers: {},\n\t\t\timages: {},\n\t\t\teffects: {},\n\t\t\tmaterials: {},\n\t\t\tcameras: {},\n\t\t\tlights: {},\n\t\t\tgeometries: {},\n\t\t\tnodes: {},\n\t\t\tvisualScenes: {},\n\t\t\tkinematicsModels: {},\n\t\t\tphysicsModels: {},\n\t\t\tkinematicsScenes: {}\n\t\t};\n\n\t\tparseLibrary( collada, 'library_animations', 'animation', parseAnimation );\n\t\tparseLibrary( collada, 'library_animation_clips', 'animation_clip', parseAnimationClip );\n\t\tparseLibrary( collada, 'library_controllers', 'controller', parseController );\n\t\tparseLibrary( collada, 'library_images', 'image', parseImage );\n\t\tparseLibrary( collada, 'library_effects', 'effect', parseEffect );\n\t\tparseLibrary( collada, 'library_materials', 'material', parseMaterial );\n\t\tparseLibrary( collada, 'library_cameras', 'camera', parseCamera );\n\t\tparseLibrary( collada, 'library_lights', 'light', parseLight );\n\t\tparseLibrary( collada, 'library_geometries', 'geometry', parseGeometry );\n\t\tparseLibrary( collada, 'library_nodes', 'node', parseNode );\n\t\tparseLibrary( collada, 'library_visual_scenes', 'visual_scene', parseVisualScene );\n\t\tparseLibrary( collada, 'library_kinematics_models', 'kinematics_model', parseKinematicsModel );\n\t\tparseLibrary( collada, 'library_physics_models', 'physics_model', parsePhysicsModel );\n\t\tparseLibrary( collada, 'scene', 'instance_kinematics_scene', parseKinematicsScene );\n\n\t\tbuildLibrary( library.animations, buildAnimation );\n\t\tbuildLibrary( library.clips, buildAnimationClip );\n\t\tbuildLibrary( library.controllers, buildController );\n\t\tbuildLibrary( library.images, buildImage );\n\t\tbuildLibrary( library.effects, buildEffect );\n\t\tbuildLibrary( library.materials, buildMaterial );\n\t\tbuildLibrary( library.cameras, buildCamera );\n\t\tbuildLibrary( library.lights, buildLight );\n\t\tbuildLibrary( library.geometries, buildGeometry );\n\t\tbuildLibrary( library.visualScenes, buildVisualScene );\n\n\t\tsetupAnimations();\n\t\tsetupKinematics();\n\n\t\tvar scene = parseScene( getElementsByTagName( collada, 'scene' )[ 0 ] );\n\t\tscene.animations = animations;\n\n\t\tif ( asset.upAxis === 'Z_UP' ) {\n\n\t\t\tscene.quaternion.setFromEuler( new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Euler\"]( - Math.PI / 2, 0, 0 ) );\n\n\t\t}\n\n\t\tscene.scale.multiplyScalar( asset.unit );\n\n\t\treturn {\n\t\t\tget animations() {\n\n\t\t\t\tconsole.warn( 'THREE.ColladaLoader: Please access animations over scene.animations now.' );\n\t\t\t\treturn animations;\n\n\t\t\t},\n\t\t\tkinematics: kinematics,\n\t\t\tlibrary: library,\n\t\t\tscene: scene\n\t\t};\n\n\t}\n\n} );\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL3RocmVlL2V4YW1wbGVzL2pzbS9sb2FkZXJzL0NvbGxhZGFMb2FkZXIuanM/YjhiMyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQXFDd0M7QUFDWTs7QUFFcEQ7O0FBRUEsQ0FBQyw2REFBTTs7QUFFUDs7QUFFQSx3REFBd0QsNkRBQU07O0FBRTlEOztBQUVBOztBQUVBOztBQUVBLHFDQUFxQyxrRUFBVzs7QUFFaEQsbUJBQW1CLGlFQUFVO0FBQzdCO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBLElBQUk7O0FBRUo7O0FBRUE7O0FBRUEsS0FBSzs7QUFFTDs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQSxHQUFHOztBQUVILEVBQUU7O0FBRUY7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUEsRUFBRTs7QUFFRjs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBLDBDQUEwQyxPQUFPOztBQUVqRDs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBLHFDQUFxQyxPQUFPOztBQUU1Qzs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBLHFDQUFxQyxPQUFPOztBQUU1Qzs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBLHFDQUFxQyxPQUFPOztBQUU1Qzs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQSxJQUFJOztBQUVKLGFBQWE7O0FBRWI7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FB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RUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsOENBQThDLE9BQU87O0FBRXJEOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsMkNBQTJDLFFBQVE7O0FBRW5EOztBQUVBLGlEQUFpRCxRQUFROztBQUV6RDs7QUFFQTs7QUFFQTs7QUFFQSxjQUFjLG9FQUFhOztBQUUzQjs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQSw4Q0FBOEMsT0FBTzs7QUFFckQ7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsOENBQThDLE9BQU87O0FBRXJEOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSw4Q0FBOEMsT0FBTzs7QUFFckQ7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsOENBQThDLE9BQU87O0FBRXJEOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDO0FBQ2pDOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBLGtDQUFrQyxPQUFPOztBQUV6QyxpQ0FBaUM7QUFDakM7O0FBRUEsZ0JBQWdCLGdCQUFnQjs7QUFFaEM7QUFDQTtBQUNBOztBQUVBLDJCQUEyQix1Q0FBdUM7O0FBRWxFOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQSxnQkFBZ0IsZ0JBQWdCOztBQUVoQzs7QUFFQTs7QUFFQTtBQUNBOztBQUVBLE1BQU07O0FBRU47QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQSwyQkFBMkIsOERBQU87O0FBRWxDLElBQUk7O0FBRUosMkJBQTJCLDhEQUFPOztBQUVsQzs7QUFFQTs7QUFFQSw2Q0FBNkMsT0FBTzs7QUFFcEQ7QUFDQSwwQkFBMEIsOERBQU87O0FBRWpDLHdCQUF3Qix1Q0FBdUM7O0FBRS9EOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQSw4Q0FBOEMsT0FBTzs7QUFFckQ7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0E7O0FBRUEsOENBQThDLE9BQU87O0FBRXJEOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBLDhDQUE4QyxPQUFPOztBQUVyRDs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBLDhDQUE4QyxPQUFPOztBQUVyRDs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUEsOENBQThDLE9BQU87O0FBRXJEOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQSw4Q0FBOEMsT0FBTzs7QUFFckQ7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUEsOENBQThDLE9BQU87O0FBRXJEOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQSw4Q0FBOEMsT0FBTzs7QUFFckQ7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGdDQUFnQztBQUNoQzs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsOENBQThDLE9BQU87O0FBRXJEOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQSw4Q0FBOEMsT0FBTzs7QUFFckQ7O0FBRUE7O0FBRUE7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QUFDNUI7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0EsaUJBQWlCO0FBQ2pCLFlBQVk7QUFDWixrQkFBa0I7QUFDbEIsYUFBYTtBQUNiLGNBQWM7QUFDZCxnQkFBZ0I7QUFDaEIsY0FBYztBQUNkLGFBQWE7QUFDYixpQkFBaUI7QUFDakIsWUFBWTtBQUNaLG1CQUFtQjtBQUNuQix1QkFBdUI7QUFDdkIsb0JBQW9CO0FBQ3BCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUEsc0NBQXNDLDREQUFLOztBQUUzQzs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBLENBQUM7O0FBRXdCIiwiZmlsZSI6Ii4vbm9kZV9tb2R1bGVzL3RocmVlL2V4YW1wbGVzL2pzbS9sb2FkZXJzL0NvbGxhZGFMb2FkZXIuanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuXHRBbWJpZW50TGlnaHQsXG5cdEFuaW1hdGlvbkNsaXAsXG5cdEJvbmUsXG5cdEJ1ZmZlckdlb21ldHJ5LFxuXHRDbGFtcFRvRWRnZVdyYXBwaW5nLFxuXHRDb2xvcixcblx0RGlyZWN0aW9uYWxMaWdodCxcblx0RG91YmxlU2lkZSxcblx0RXVsZXIsXG5cdEZpbGVMb2FkZXIsXG5cdEZsb2F0MzJCdWZmZXJBdHRyaWJ1dGUsXG5cdEdyb3VwLFxuXHRMaW5lLFxuXHRMaW5lQmFzaWNNYXRlcmlhbCxcblx0TGluZVNlZ21lbnRzLFxuXHRMb2FkZXIsXG5cdExvYWRlclV0aWxzLFxuXHRNYXRoVXRpbHMsXG5cdE1hdHJpeDQsXG5cdE1lc2gsXG5cdE1lc2hCYXNpY01hdGVyaWFsLFxuXHRNZXNoTGFtYmVydE1hdGVyaWFsLFxuXHRNZXNoUGhvbmdNYXRlcmlhbCxcblx0T3J0aG9ncmFwaGljQ2FtZXJhLFxuXHRQZXJzcGVjdGl2ZUNhbWVyYSxcblx0UG9pbnRMaWdodCxcblx0UXVhdGVybmlvbixcblx0UXVhdGVybmlvbktleWZyYW1lVHJhY2ssXG5cdFJlcGVhdFdyYXBwaW5nLFxuXHRTY2VuZSxcblx0U2tlbGV0b24sXG5cdFNraW5uZWRNZXNoLFxuXHRTcG90TGlnaHQsXG5cdFRleHR1cmVMb2FkZXIsXG5cdFZlY3RvcjMsXG5cdFZlY3RvcktleWZyYW1lVHJhY2tcbn0gZnJvbSAnLi4vLi4vLi4vYnVpbGQvdGhyZWUubW9kdWxlLmpzJztcbmltcG9ydCB7IFRHQUxvYWRlciB9IGZyb20gJy4uL2xvYWRlcnMvVEdBTG9hZGVyLmpzJztcblxudmFyIENvbGxhZGFMb2FkZXIgPSBmdW5jdGlvbiAoIG1hbmFnZXIgKSB7XG5cblx0TG9hZGVyLmNhbGwoIHRoaXMsIG1hbmFnZXIgKTtcblxufTtcblxuQ29sbGFkYUxvYWRlci5wcm90b3R5cGUgPSBPYmplY3QuYXNzaWduKCBPYmplY3QuY3JlYXRlKCBMb2FkZXIucHJvdG90eXBlICksIHtcblxuXHRjb25zdHJ1Y3RvcjogQ29sbGFkYUxvYWRlcixcblxuXHRsb2FkOiBmdW5jdGlvbiAoIHVybCwgb25Mb2FkLCBvblByb2dyZXNzLCBvbkVycm9yICkge1xuXG5cdFx0dmFyIHNjb3BlID0gdGhpcztcblxuXHRcdHZhciBwYXRoID0gKCBzY29wZS5wYXRoID09PSAnJyApID8gTG9hZGVyVXRpbHMuZXh0cmFjdFVybEJhc2UoIHVybCApIDogc2NvcGUucGF0aDtcblxuXHRcdHZhciBsb2FkZXIgPSBuZXcgRmlsZUxvYWRlciggc2NvcGUubWFuYWdlciApO1xuXHRcdGxvYWRlci5zZXRQYXRoKCBzY29wZS5wYXRoICk7XG5cdFx0bG9hZGVyLnNldFJlcXVlc3RIZWFkZXIoIHNjb3BlLnJlcXVlc3RIZWFkZXIgKTtcblx0XHRsb2FkZXIuc2V0V2l0aENyZWRlbnRpYWxzKCBzY29wZS53aXRoQ3JlZGVudGlhbHMgKTtcblx0XHRsb2FkZXIubG9hZCggdXJsLCBmdW5jdGlvbiAoIHRleHQgKSB7XG5cblx0XHRcdHRyeSB7XG5cblx0XHRcdFx0b25Mb2FkKCBzY29wZS5wYXJzZSggdGV4dCwgcGF0aCApICk7XG5cblx0XHRcdH0gY2F0Y2ggKCBlICkge1xuXG5cdFx0XHRcdGlmICggb25FcnJvciApIHtcblxuXHRcdFx0XHRcdG9uRXJyb3IoIGUgKTtcblxuXHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0Y29uc29sZS5lcnJvciggZSApO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRzY29wZS5tYW5hZ2VyLml0ZW1FcnJvciggdXJsICk7XG5cblx0XHRcdH1cblxuXHRcdH0sIG9uUHJvZ3Jlc3MsIG9uRXJyb3IgKTtcblxuXHR9LFxuXG5cdG9wdGlvbnM6IHtcblxuXHRcdHNldCBjb252ZXJ0VXBBeGlzKCB2YWx1ZSApIHtcblxuXHRcdFx0Y29uc29sZS53YXJuKCAnVEhSRUUuQ29sbGFkYUxvYWRlcjogb3B0aW9ucy5jb252ZXJ0VXBBeGlzKCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXAgYXhpcyBpcyBjb252ZXJ0ZWQgYXV0b21hdGljYWxseS4nICk7XG5cblx0XHR9XG5cblx0fSxcblxuXHRwYXJzZTogZnVuY3Rpb24gKCB0ZXh0LCBwYXRoICkge1xuXG5cdFx0ZnVuY3Rpb24gZ2V0RWxlbWVudHNCeVRhZ05hbWUoIHhtbCwgbmFtZSApIHtcblxuXHRcdFx0Ly8gTm9uIHJlY3Vyc2l2ZSB4bWwuZ2V0RWxlbWVudHNCeVRhZ05hbWUoKSAuLi5cblxuXHRcdFx0dmFyIGFycmF5ID0gW107XG5cdFx0XHR2YXIgY2hpbGROb2RlcyA9IHhtbC5jaGlsZE5vZGVzO1xuXG5cdFx0XHRmb3IgKCB2YXIgaSA9IDAsIGwgPSBjaGlsZE5vZGVzLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG5cblx0XHRcdFx0dmFyIGNoaWxkID0gY2hpbGROb2Rlc1sgaSBdO1xuXG5cdFx0XHRcdGlmICggY2hpbGQubm9kZU5hbWUgPT09IG5hbWUgKSB7XG5cblx0XHRcdFx0XHRhcnJheS5wdXNoKCBjaGlsZCApO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gYXJyYXk7XG5cblx0XHR9XG5cblx0XHRmdW5jdGlvbiBwYXJzZVN0cmluZ3MoIHRleHQgKSB7XG5cblx0XHRcdGlmICggdGV4dC5sZW5ndGggPT09IDAgKSByZXR1cm4gW107XG5cblx0XHRcdHZhciBwYXJ0cyA9IHRleHQudHJpbSgpLnNwbGl0KCAvXFxzKy8gKTtcblx0XHRcdHZhciBhcnJheSA9IG5ldyBBcnJheSggcGFydHMubGVuZ3RoICk7XG5cblx0XHRcdGZvciAoIHZhciBpID0gMCwgbCA9IHBhcnRzLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG5cblx0XHRcdFx0YXJyYXlbIGkgXSA9IHBhcnRzWyBpIF07XG5cblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGFycmF5O1xuXG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gcGFyc2VGbG9hdHMoIHRleHQgKSB7XG5cblx0XHRcdGlmICggdGV4dC5sZW5ndGggPT09IDAgKSByZXR1cm4gW107XG5cblx0XHRcdHZhciBwYXJ0cyA9IHRleHQudHJpbSgpLnNwbGl0KCAvXFxzKy8gKTtcblx0XHRcdHZhciBhcnJheSA9IG5ldyBBcnJheSggcGFydHMubGVuZ3RoICk7XG5cblx0XHRcdGZvciAoIHZhciBpID0gMCwgbCA9IHBhcnRzLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG5cblx0XHRcdFx0YXJyYXlbIGkgXSA9IHBhcnNlRmxvYXQoIHBhcnRzWyBpIF0gKTtcblxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gYXJyYXk7XG5cblx0XHR9XG5cblx0XHRmdW5jdGlvbiBwYXJzZUludHMoIHRleHQgKSB7XG5cblx0XHRcdGlmICggdGV4dC5sZW5ndGggPT09IDAgKSByZXR1cm4gW107XG5cblx0XHRcdHZhciBwYXJ0cyA9IHRleHQudHJpbSgpLnNwbGl0KCAvXFxzKy8gKTtcblx0XHRcdHZhciBhcnJheSA9IG5ldyBBcnJheSggcGFydHMubGVuZ3RoICk7XG5cblx0XHRcdGZvciAoIHZhciBpID0gMCwgbCA9IHBhcnRzLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG5cblx0XHRcdFx0YXJyYXlbIGkgXSA9IHBhcnNlSW50KCBwYXJ0c1sgaSBdICk7XG5cblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGFycmF5O1xuXG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gcGFyc2VJZCggdGV4dCApIHtcblxuXHRcdFx0cmV0dXJuIHRleHQuc3Vic3RyaW5nKCAxICk7XG5cblx0XHR9XG5cblx0XHRmdW5jdGlvbiBnZW5lcmF0ZUlkKCkge1xuXG5cdFx0XHRyZXR1cm4gJ3RocmVlX2RlZmF1bHRfJyArICggY291bnQgKysgKTtcblxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGlzRW1wdHkoIG9iamVjdCApIHtcblxuXHRcdFx0cmV0dXJuIE9iamVjdC5rZXlzKCBvYmplY3QgKS5sZW5ndGggPT09IDA7XG5cblx0XHR9XG5cblx0XHQvLyBhc3NldFxuXG5cdFx0ZnVuY3Rpb24gcGFyc2VBc3NldCggeG1sICkge1xuXG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHR1bml0OiBwYXJzZUFzc2V0VW5pdCggZ2V0RWxlbWVudHNCeVRhZ05hbWUoIHhtbCwgJ3VuaXQnIClbIDAgXSApLFxuXHRcdFx0XHR1cEF4aXM6IHBhcnNlQXNzZXRVcEF4aXMoIGdldEVsZW1lbnRzQnlUYWdOYW1lKCB4bWwsICd1cF9heGlzJyApWyAwIF0gKVxuXHRcdFx0fTtcblxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIHBhcnNlQXNzZXRVbml0KCB4bWwgKSB7XG5cblx0XHRcdGlmICggKCB4bWwgIT09IHVuZGVmaW5lZCApICYmICggeG1sLmhhc0F0dHJpYnV0ZSggJ21ldGVyJyApID09PSB0cnVlICkgKSB7XG5cblx0XHRcdFx0cmV0dXJuIHBhcnNlRmxvYXQoIHhtbC5nZXRBdHRyaWJ1dGUoICdtZXRlcicgKSApO1xuXG5cdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdHJldHVybiAxOyAvLyBkZWZhdWx0IDEgbWV0ZXJcblxuXHRcdFx0fVxuXG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gcGFyc2VBc3NldFVwQXhpcyggeG1sICkge1xuXG5cdFx0XHRyZXR1cm4geG1sICE9PSB1bmRlZmluZWQgPyB4bWwudGV4dENvbnRlbnQgOiAnWV9VUCc7XG5cblx0XHR9XG5cblx0XHQvLyBsaWJyYXJ5XG5cblx0XHRmdW5jdGlvbiBwYXJzZUxpYnJhcnkoIHhtbCwgbGlicmFyeU5hbWUsIG5vZGVOYW1lLCBwYXJzZXIgKSB7XG5cblx0XHRcdHZhciBsaWJyYXJ5ID0gZ2V0RWxlbWVudHNCeVRhZ05hbWUoIHhtbCwgbGlicmFyeU5hbWUgKVsgMCBdO1xuXG5cdFx0XHRpZiAoIGxpYnJhcnkgIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0XHR2YXIgZWxlbWVudHMgPSBnZXRFbGVtZW50c0J5VGFnTmFtZSggbGlicmFyeSwgbm9kZU5hbWUgKTtcblxuXHRcdFx0XHRmb3IgKCB2YXIgaSA9IDA7IGkgPCBlbGVtZW50cy5sZW5ndGg7IGkgKysgKSB7XG5cblx0XHRcdFx0XHRwYXJzZXIoIGVsZW1lbnRzWyBpIF0gKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdH1cblxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGJ1aWxkTGlicmFyeSggZGF0YSwgYnVpbGRlciApIHtcblxuXHRcdFx0Zm9yICggdmFyIG5hbWUgaW4gZGF0YSApIHtcblxuXHRcdFx0XHR2YXIgb2JqZWN0ID0gZGF0YVsgbmFtZSBdO1xuXHRcdFx0XHRvYmplY3QuYnVpbGQgPSBidWlsZGVyKCBkYXRhWyBuYW1lIF0gKTtcblxuXHRcdFx0fVxuXG5cdFx0fVxuXG5cdFx0Ly8gZ2V0XG5cblx0XHRmdW5jdGlvbiBnZXRCdWlsZCggZGF0YSwgYnVpbGRlciApIHtcblxuXHRcdFx0aWYgKCBkYXRhLmJ1aWxkICE9PSB1bmRlZmluZWQgKSByZXR1cm4gZGF0YS5idWlsZDtcblxuXHRcdFx0ZGF0YS5idWlsZCA9IGJ1aWxkZXIoIGRhdGEgKTtcblxuXHRcdFx0cmV0dXJuIGRhdGEuYnVpbGQ7XG5cblx0XHR9XG5cblx0XHQvLyBhbmltYXRpb25cblxuXHRcdGZ1bmN0aW9uIHBhcnNlQW5pbWF0aW9uKCB4bWwgKSB7XG5cblx0XHRcdHZhciBkYXRhID0ge1xuXHRcdFx0XHRzb3VyY2VzOiB7fSxcblx0XHRcdFx0c2FtcGxlcnM6IHt9LFxuXHRcdFx0XHRjaGFubmVsczoge31cblx0XHRcdH07XG5cblx0XHRcdHZhciBoYXNDaGlsZHJlbiA9IGZhbHNlO1xuXG5cdFx0XHRmb3IgKCB2YXIgaSA9IDAsIGwgPSB4bWwuY2hpbGROb2Rlcy5sZW5ndGg7IGkgPCBsOyBpICsrICkge1xuXG5cdFx0XHRcdHZhciBjaGlsZCA9IHhtbC5jaGlsZE5vZGVzWyBpIF07XG5cblx0XHRcdFx0aWYgKCBjaGlsZC5ub2RlVHlwZSAhPT0gMSApIGNvbnRpbnVlO1xuXG5cdFx0XHRcdHZhciBpZDtcblxuXHRcdFx0XHRzd2l0Y2ggKCBjaGlsZC5ub2RlTmFtZSApIHtcblxuXHRcdFx0XHRcdGNhc2UgJ3NvdXJjZSc6XG5cdFx0XHRcdFx0XHRpZCA9IGNoaWxkLmdldEF0dHJpYnV0ZSggJ2lkJyApO1xuXHRcdFx0XHRcdFx0ZGF0YS5zb3VyY2VzWyBpZCBdID0gcGFyc2VTb3VyY2UoIGNoaWxkICk7XG5cdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdGNhc2UgJ3NhbXBsZXInOlxuXHRcdFx0XHRcdFx0aWQgPSBjaGlsZC5nZXRBdHRyaWJ1dGUoICdpZCcgKTtcblx0XHRcdFx0XHRcdGRhdGEuc2FtcGxlcnNbIGlkIF0gPSBwYXJzZUFuaW1hdGlvblNhbXBsZXIoIGNoaWxkICk7XG5cdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdGNhc2UgJ2NoYW5uZWwnOlxuXHRcdFx0XHRcdFx0aWQgPSBjaGlsZC5nZXRBdHRyaWJ1dGUoICd0YXJnZXQnICk7XG5cdFx0XHRcdFx0XHRkYXRhLmNoYW5uZWxzWyBpZCBdID0gcGFyc2VBbmltYXRpb25DaGFubmVsKCBjaGlsZCApO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRjYXNlICdhbmltYXRpb24nOlxuXHRcdFx0XHRcdFx0Ly8gaGllcmFyY2h5IG9mIHJlbGF0ZWQgYW5pbWF0aW9uc1xuXHRcdFx0XHRcdFx0cGFyc2VBbmltYXRpb24oIGNoaWxkICk7XG5cdFx0XHRcdFx0XHRoYXNDaGlsZHJlbiA9IHRydWU7XG5cdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZyggY2hpbGQgKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdH1cblxuXHRcdFx0aWYgKCBoYXNDaGlsZHJlbiA9PT0gZmFsc2UgKSB7XG5cblx0XHRcdFx0Ly8gc2luY2UgJ2lkJyBhdHRyaWJ1dGVzIGNhbiBiZSBvcHRpb25hbCwgaXQncyBuZWNlc3NhcnkgdG8gZ2VuZXJhdGUgYSBVVUlEIGZvciB1bnFpdWUgYXNzaWdubWVudFxuXG5cdFx0XHRcdGxpYnJhcnkuYW5pbWF0aW9uc1sgeG1sLmdldEF0dHJpYnV0ZSggJ2lkJyApIHx8IE1hdGhVdGlscy5nZW5lcmF0ZVVVSUQoKSBdID0gZGF0YTtcblxuXHRcdFx0fVxuXG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gcGFyc2VBbmltYXRpb25TYW1wbGVyKCB4bWwgKSB7XG5cblx0XHRcdHZhciBkYXRhID0ge1xuXHRcdFx0XHRpbnB1dHM6IHt9LFxuXHRcdFx0fTtcblxuXHRcdFx0Zm9yICggdmFyIGkgPSAwLCBsID0geG1sLmNoaWxkTm9kZXMubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcblxuXHRcdFx0XHR2YXIgY2hpbGQgPSB4bWwuY2hpbGROb2Rlc1sgaSBdO1xuXG5cdFx0XHRcdGlmICggY2hpbGQubm9kZVR5cGUgIT09IDEgKSBjb250aW51ZTtcblxuXHRcdFx0XHRzd2l0Y2ggKCBjaGlsZC5ub2RlTmFtZSApIHtcblxuXHRcdFx0XHRcdGNhc2UgJ2lucHV0Jzpcblx0XHRcdFx0XHRcdHZhciBpZCA9IHBhcnNlSWQoIGNoaWxkLmdldEF0dHJpYnV0ZSggJ3NvdXJjZScgKSApO1xuXHRcdFx0XHRcdFx0dmFyIHNlbWFudGljID0gY2hpbGQuZ2V0QXR0cmlidXRlKCAnc2VtYW50aWMnICk7XG5cdFx0XHRcdFx0XHRkYXRhLmlucHV0c1sgc2VtYW50aWMgXSA9IGlkO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBkYXRhO1xuXG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gcGFyc2VBbmltYXRpb25DaGFubmVsKCB4bWwgKSB7XG5cblx0XHRcdHZhciBkYXRhID0ge307XG5cblx0XHRcdHZhciB0YXJnZXQgPSB4bWwuZ2V0QXR0cmlidXRlKCAndGFyZ2V0JyApO1xuXG5cdFx0XHQvLyBwYXJzaW5nIFNJRCBBZGRyZXNzaW5nIFN5bnRheFxuXG5cdFx0XHR2YXIgcGFydHMgPSB0YXJnZXQuc3BsaXQoICcvJyApO1xuXG5cdFx0XHR2YXIgaWQgPSBwYXJ0cy5zaGlmdCgpO1xuXHRcdFx0dmFyIHNpZCA9IHBhcnRzLnNoaWZ0KCk7XG5cblx0XHRcdC8vIGNoZWNrIHNlbGVjdGlvbiBzeW50YXhcblxuXHRcdFx0dmFyIGFycmF5U3ludGF4ID0gKCBzaWQuaW5kZXhPZiggJygnICkgIT09IC0gMSApO1xuXHRcdFx0dmFyIG1lbWJlclN5bnRheCA9ICggc2lkLmluZGV4T2YoICcuJyApICE9PSAtIDEgKTtcblxuXHRcdFx0aWYgKCBtZW1iZXJTeW50YXggKSB7XG5cblx0XHRcdFx0Ly8gIG1lbWJlciBzZWxlY3Rpb24gYWNjZXNzXG5cblx0XHRcdFx0cGFydHMgPSBzaWQuc3BsaXQoICcuJyApO1xuXHRcdFx0XHRzaWQgPSBwYXJ0cy5zaGlmdCgpO1xuXHRcdFx0XHRkYXRhLm1lbWJlciA9IHBhcnRzLnNoaWZ0KCk7XG5cblx0XHRcdH0gZWxzZSBpZiAoIGFycmF5U3ludGF4ICkge1xuXG5cdFx0XHRcdC8vIGFycmF5LWFjY2VzcyBzeW50YXguIGNhbiBiZSB1c2VkIHRvIGV4cHJlc3MgZmllbGRzIGluIG9uZS1kaW1lbnNpb25hbCB2ZWN0b3JzIG9yIHR3by1kaW1lbnNpb25hbCBtYXRyaWNlcy5cblxuXHRcdFx0XHR2YXIgaW5kaWNlcyA9IHNpZC5zcGxpdCggJygnICk7XG5cdFx0XHRcdHNpZCA9IGluZGljZXMuc2hpZnQoKTtcblxuXHRcdFx0XHRmb3IgKCB2YXIgaSA9IDA7IGkgPCBpbmRpY2VzLmxlbmd0aDsgaSArKyApIHtcblxuXHRcdFx0XHRcdGluZGljZXNbIGkgXSA9IHBhcnNlSW50KCBpbmRpY2VzWyBpIF0ucmVwbGFjZSggL1xcKS8sICcnICkgKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdFx0ZGF0YS5pbmRpY2VzID0gaW5kaWNlcztcblxuXHRcdFx0fVxuXG5cdFx0XHRkYXRhLmlkID0gaWQ7XG5cdFx0XHRkYXRhLnNpZCA9IHNpZDtcblxuXHRcdFx0ZGF0YS5hcnJheVN5bnRheCA9IGFycmF5U3ludGF4O1xuXHRcdFx0ZGF0YS5tZW1iZXJTeW50YXggPSBtZW1iZXJTeW50YXg7XG5cblx0XHRcdGRhdGEuc2FtcGxlciA9IHBhcnNlSWQoIHhtbC5nZXRBdHRyaWJ1dGUoICdzb3VyY2UnICkgKTtcblxuXHRcdFx0cmV0dXJuIGRhdGE7XG5cblx0XHR9XG5cblx0XHRmdW5jdGlvbiBidWlsZEFuaW1hdGlvbiggZGF0YSApIHtcblxuXHRcdFx0dmFyIHRyYWNrcyA9IFtdO1xuXG5cdFx0XHR2YXIgY2hhbm5lbHMgPSBkYXRhLmNoYW5uZWxzO1xuXHRcdFx0dmFyIHNhbXBsZXJzID0gZGF0YS5zYW1wbGVycztcblx0XHRcdHZhciBzb3VyY2VzID0gZGF0YS5zb3VyY2VzO1xuXG5cdFx0XHRmb3IgKCB2YXIgdGFyZ2V0IGluIGNoYW5uZWxzICkge1xuXG5cdFx0XHRcdGlmICggY2hhbm5lbHMuaGFzT3duUHJvcGVydHkoIHRhcmdldCApICkge1xuXG5cdFx0XHRcdFx0dmFyIGNoYW5uZWwgPSBjaGFubmVsc1sgdGFyZ2V0IF07XG5cdFx0XHRcdFx0dmFyIHNhbXBsZXIgPSBzYW1wbGVyc1sgY2hhbm5lbC5zYW1wbGVyIF07XG5cblx0XHRcdFx0XHR2YXIgaW5wdXRJZCA9IHNhbXBsZXIuaW5wdXRzLklOUFVUO1xuXHRcdFx0XHRcdHZhciBvdXRwdXRJZCA9IHNhbXBsZXIuaW5wdXRzLk9VVFBVVDtcblxuXHRcdFx0XHRcdHZhciBpbnB1dFNvdXJjZSA9IHNvdXJjZXNbIGlucHV0SWQgXTtcblx0XHRcdFx0XHR2YXIgb3V0cHV0U291cmNlID0gc291cmNlc1sgb3V0cHV0SWQgXTtcblxuXHRcdFx0XHRcdHZhciBhbmltYXRpb24gPSBidWlsZEFuaW1hdGlvbkNoYW5uZWwoIGNoYW5uZWwsIGlucHV0U291cmNlLCBvdXRwdXRTb3VyY2UgKTtcblxuXHRcdFx0XHRcdGNyZWF0ZUtleWZyYW1lVHJhY2tzKCBhbmltYXRpb24sIHRyYWNrcyApO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gdHJhY2tzO1xuXG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gZ2V0QW5pbWF0aW9uKCBpZCApIHtcblxuXHRcdFx0cmV0dXJuIGdldEJ1aWxkKCBsaWJyYXJ5LmFuaW1hdGlvbnNbIGlkIF0sIGJ1aWxkQW5pbWF0aW9uICk7XG5cblx0XHR9XG5cblx0XHRmdW5jdGlvbiBidWlsZEFuaW1hdGlvbkNoYW5uZWwoIGNoYW5uZWwsIGlucHV0U291cmNlLCBvdXRwdXRTb3VyY2UgKSB7XG5cblx0XHRcdHZhciBub2RlID0gbGlicmFyeS5ub2Rlc1sgY2hhbm5lbC5pZCBdO1xuXHRcdFx0dmFyIG9iamVjdDNEID0gZ2V0Tm9kZSggbm9kZS5pZCApO1xuXG5cdFx0XHR2YXIgdHJhbnNmb3JtID0gbm9kZS50cmFuc2Zvcm1zWyBjaGFubmVsLnNpZCBdO1xuXHRcdFx0dmFyIGRlZmF1bHRNYXRyaXggPSBub2RlLm1hdHJpeC5jbG9uZSgpLnRyYW5zcG9zZSgpO1xuXG5cdFx0XHR2YXIgdGltZSwgc3RyaWRlO1xuXHRcdFx0dmFyIGksIGlsLCBqLCBqbDtcblxuXHRcdFx0dmFyIGRhdGEgPSB7fTtcblxuXHRcdFx0Ly8gdGhlIGNvbGxhZGEgc3BlYyBhbGxvd3MgdGhlIGFuaW1hdGlvbiBvZiBkYXRhIGluIHZhcmlvdXMgd2F5cy5cblx0XHRcdC8vIGRlcGVuZGluZyBvbiB0aGUgdHJhbnNmb3JtIHR5cGUgKG1hdHJpeCwgdHJhbnNsYXRlLCByb3RhdGUsIHNjYWxlKSwgd2UgZXhlY3V0ZSBkaWZmZXJlbnQgbG9naWNcblxuXHRcdFx0c3dpdGNoICggdHJhbnNmb3JtICkge1xuXG5cdFx0XHRcdGNhc2UgJ21hdHJpeCc6XG5cblx0XHRcdFx0XHRmb3IgKCBpID0gMCwgaWwgPSBpbnB1dFNvdXJjZS5hcnJheS5sZW5ndGg7IGkgPCBpbDsgaSArKyApIHtcblxuXHRcdFx0XHRcdFx0dGltZSA9IGlucHV0U291cmNlLmFycmF5WyBpIF07XG5cdFx0XHRcdFx0XHRzdHJpZGUgPSBpICogb3V0cHV0U291cmNlLnN0cmlkZTtcblxuXHRcdFx0XHRcdFx0aWYgKCBkYXRhWyB0aW1lIF0gPT09IHVuZGVmaW5lZCApIGRhdGFbIHRpbWUgXSA9IHt9O1xuXG5cdFx0XHRcdFx0XHRpZiAoIGNoYW5uZWwuYXJyYXlTeW50YXggPT09IHRydWUgKSB7XG5cblx0XHRcdFx0XHRcdFx0dmFyIHZhbHVlID0gb3V0cHV0U291cmNlLmFycmF5WyBzdHJpZGUgXTtcblx0XHRcdFx0XHRcdFx0dmFyIGluZGV4ID0gY2hhbm5lbC5pbmRpY2VzWyAwIF0gKyA0ICogY2hhbm5lbC5pbmRpY2VzWyAxIF07XG5cblx0XHRcdFx0XHRcdFx0ZGF0YVsgdGltZSBdWyBpbmRleCBdID0gdmFsdWU7XG5cblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRcdFx0Zm9yICggaiA9IDAsIGpsID0gb3V0cHV0U291cmNlLnN0cmlkZTsgaiA8IGpsOyBqICsrICkge1xuXG5cdFx0XHRcdFx0XHRcdFx0ZGF0YVsgdGltZSBdWyBqIF0gPSBvdXRwdXRTb3VyY2UuYXJyYXlbIHN0cmlkZSArIGogXTtcblxuXHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdGNhc2UgJ3RyYW5zbGF0ZSc6XG5cdFx0XHRcdFx0Y29uc29sZS53YXJuKCAnVEhSRUUuQ29sbGFkYUxvYWRlcjogQW5pbWF0aW9uIHRyYW5zZm9ybSB0eXBlIFwiJXNcIiBub3QgeWV0IGltcGxlbWVudGVkLicsIHRyYW5zZm9ybSApO1xuXHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdGNhc2UgJ3JvdGF0ZSc6XG5cdFx0XHRcdFx0Y29uc29sZS53YXJuKCAnVEhSRUUuQ29sbGFkYUxvYWRlcjogQW5pbWF0aW9uIHRyYW5zZm9ybSB0eXBlIFwiJXNcIiBub3QgeWV0IGltcGxlbWVudGVkLicsIHRyYW5zZm9ybSApO1xuXHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdGNhc2UgJ3NjYWxlJzpcblx0XHRcdFx0XHRjb25zb2xlLndhcm4oICdUSFJFRS5Db2xsYWRhTG9hZGVyOiBBbmltYXRpb24gdHJhbnNmb3JtIHR5cGUgXCIlc1wiIG5vdCB5ZXQgaW1wbGVtZW50ZWQuJywgdHJhbnNmb3JtICk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdH1cblxuXHRcdFx0dmFyIGtleWZyYW1lcyA9IHByZXBhcmVBbmltYXRpb25EYXRhKCBkYXRhLCBkZWZhdWx0TWF0cml4ICk7XG5cblx0XHRcdHZhciBhbmltYXRpb24gPSB7XG5cdFx0XHRcdG5hbWU6IG9iamVjdDNELnV1aWQsXG5cdFx0XHRcdGtleWZyYW1lczoga2V5ZnJhbWVzXG5cdFx0XHR9O1xuXG5cdFx0XHRyZXR1cm4gYW5pbWF0aW9uO1xuXG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gcHJlcGFyZUFuaW1hdGlvbkRhdGEoIGRhdGEsIGRlZmF1bHRNYXRyaXggKSB7XG5cblx0XHRcdHZhciBrZXlmcmFtZXMgPSBbXTtcblxuXHRcdFx0Ly8gdHJhbnNmZXIgZGF0YSBpbnRvIGEgc29ydGFibGUgYXJyYXlcblxuXHRcdFx0Zm9yICggdmFyIHRpbWUgaW4gZGF0YSApIHtcblxuXHRcdFx0XHRrZXlmcmFtZXMucHVzaCggeyB0aW1lOiBwYXJzZUZsb2F0KCB0aW1lICksIHZhbHVlOiBkYXRhWyB0aW1lIF0gfSApO1xuXG5cdFx0XHR9XG5cblx0XHRcdC8vIGVuc3VyZSBrZXlmcmFtZXMgYXJlIHNvcnRlZCBieSB0aW1lXG5cblx0XHRcdGtleWZyYW1lcy5zb3J0KCBhc2NlbmRpbmcgKTtcblxuXHRcdFx0Ly8gbm93IHdlIGNsZWFuIHVwIGFsbCBhbmltYXRpb24gZGF0YSwgc28gd2UgY2FuIHVzZSB0aGVtIGZvciBrZXlmcmFtZSB0cmFja3NcblxuXHRcdFx0Zm9yICggdmFyIGkgPSAwOyBpIDwgMTY7IGkgKysgKSB7XG5cblx0XHRcdFx0dHJhbnNmb3JtQW5pbWF0aW9uRGF0YSgga2V5ZnJhbWVzLCBpLCBkZWZhdWx0TWF0cml4LmVsZW1lbnRzWyBpIF0gKTtcblxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4ga2V5ZnJhbWVzO1xuXG5cdFx0XHQvLyBhcnJheSBzb3J0IGZ1bmN0aW9uXG5cblx0XHRcdGZ1bmN0aW9uIGFzY2VuZGluZyggYSwgYiApIHtcblxuXHRcdFx0XHRyZXR1cm4gYS50aW1lIC0gYi50aW1lO1xuXG5cdFx0XHR9XG5cblx0XHR9XG5cblx0XHR2YXIgcG9zaXRpb24gPSBuZXcgVmVjdG9yMygpO1xuXHRcdHZhciBzY2FsZSA9IG5ldyBWZWN0b3IzKCk7XG5cdFx0dmFyIHF1YXRlcm5pb24gPSBuZXcgUXVhdGVybmlvbigpO1xuXG5cdFx0ZnVuY3Rpb24gY3JlYXRlS2V5ZnJhbWVUcmFja3MoIGFuaW1hdGlvbiwgdHJhY2tzICkge1xuXG5cdFx0XHR2YXIga2V5ZnJhbWVzID0gYW5pbWF0aW9uLmtleWZyYW1lcztcblx0XHRcdHZhciBuYW1lID0gYW5pbWF0aW9uLm5hbWU7XG5cblx0XHRcdHZhciB0aW1lcyA9IFtdO1xuXHRcdFx0dmFyIHBvc2l0aW9uRGF0YSA9IFtdO1xuXHRcdFx0dmFyIHF1YXRlcm5pb25EYXRhID0gW107XG5cdFx0XHR2YXIgc2NhbGVEYXRhID0gW107XG5cblx0XHRcdGZvciAoIHZhciBpID0gMCwgbCA9IGtleWZyYW1lcy5sZW5ndGg7IGkgPCBsOyBpICsrICkge1xuXG5cdFx0XHRcdHZhciBrZXlmcmFtZSA9IGtleWZyYW1lc1sgaSBdO1xuXG5cdFx0XHRcdHZhciB0aW1lID0ga2V5ZnJhbWUudGltZTtcblx0XHRcdFx0dmFyIHZhbHVlID0ga2V5ZnJhbWUudmFsdWU7XG5cblx0XHRcdFx0bWF0cml4LmZyb21BcnJheSggdmFsdWUgKS50cmFuc3Bvc2UoKTtcblx0XHRcdFx0bWF0cml4LmRlY29tcG9zZSggcG9zaXRpb24sIHF1YXRlcm5pb24sIHNjYWxlICk7XG5cblx0XHRcdFx0dGltZXMucHVzaCggdGltZSApO1xuXHRcdFx0XHRwb3NpdGlvbkRhdGEucHVzaCggcG9zaXRpb24ueCwgcG9zaXRpb24ueSwgcG9zaXRpb24ueiApO1xuXHRcdFx0XHRxdWF0ZXJuaW9uRGF0YS5wdXNoKCBxdWF0ZXJuaW9uLngsIHF1YXRlcm5pb24ueSwgcXVhdGVybmlvbi56LCBxdWF0ZXJuaW9uLncgKTtcblx0XHRcdFx0c2NhbGVEYXRhLnB1c2goIHNjYWxlLngsIHNjYWxlLnksIHNjYWxlLnogKTtcblxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIHBvc2l0aW9uRGF0YS5sZW5ndGggPiAwICkgdHJhY2tzLnB1c2goIG5ldyBWZWN0b3JLZXlmcmFtZVRyYWNrKCBuYW1lICsgJy5wb3NpdGlvbicsIHRpbWVzLCBwb3NpdGlvbkRhdGEgKSApO1xuXHRcdFx0aWYgKCBxdWF0ZXJuaW9uRGF0YS5sZW5ndGggPiAwICkgdHJhY2tzLnB1c2goIG5ldyBRdWF0ZXJuaW9uS2V5ZnJhbWVUcmFjayggbmFtZSArICcucXVhdGVybmlvbicsIHRpbWVzLCBxdWF0ZXJuaW9uRGF0YSApICk7XG5cdFx0XHRpZiAoIHNjYWxlRGF0YS5sZW5ndGggPiAwICkgdHJhY2tzLnB1c2goIG5ldyBWZWN0b3JLZXlmcmFtZVRyYWNrKCBuYW1lICsgJy5zY2FsZScsIHRpbWVzLCBzY2FsZURhdGEgKSApO1xuXG5cdFx0XHRyZXR1cm4gdHJhY2tzO1xuXG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gdHJhbnNmb3JtQW5pbWF0aW9uRGF0YSgga2V5ZnJhbWVzLCBwcm9wZXJ0eSwgZGVmYXVsdFZhbHVlICkge1xuXG5cdFx0XHR2YXIga2V5ZnJhbWU7XG5cblx0XHRcdHZhciBlbXB0eSA9IHRydWU7XG5cdFx0XHR2YXIgaSwgbDtcblxuXHRcdFx0Ly8gY2hlY2ssIGlmIHZhbHVlcyBvZiBhIHByb3BlcnR5IGFyZSBtaXNzaW5nIGluIG91ciBrZXlmcmFtZXNcblxuXHRcdFx0Zm9yICggaSA9IDAsIGwgPSBrZXlmcmFtZXMubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcblxuXHRcdFx0XHRrZXlmcmFtZSA9IGtleWZyYW1lc1sgaSBdO1xuXG5cdFx0XHRcdGlmICgga2V5ZnJhbWUudmFsdWVbIHByb3BlcnR5IF0gPT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0XHRcdGtleWZyYW1lLnZhbHVlWyBwcm9wZXJ0eSBdID0gbnVsbDsgLy8gbWFyayBhcyBtaXNzaW5nXG5cblx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdGVtcHR5ID0gZmFsc2U7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9XG5cblx0XHRcdGlmICggZW1wdHkgPT09IHRydWUgKSB7XG5cblx0XHRcdFx0Ly8gbm8gdmFsdWVzIGF0IGFsbCwgc28gd2Ugc2V0IGEgZGVmYXVsdCB2YWx1ZVxuXG5cdFx0XHRcdGZvciAoIGkgPSAwLCBsID0ga2V5ZnJhbWVzLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG5cblx0XHRcdFx0XHRrZXlmcmFtZSA9IGtleWZyYW1lc1sgaSBdO1xuXG5cdFx0XHRcdFx0a2V5ZnJhbWUudmFsdWVbIHByb3BlcnR5IF0gPSBkZWZhdWx0VmFsdWU7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdC8vIGZpbGxpbmcgZ2Fwc1xuXG5cdFx0XHRcdGNyZWF0ZU1pc3NpbmdLZXlmcmFtZXMoIGtleWZyYW1lcywgcHJvcGVydHkgKTtcblxuXHRcdFx0fVxuXG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gY3JlYXRlTWlzc2luZ0tleWZyYW1lcygga2V5ZnJhbWVzLCBwcm9wZXJ0eSApIHtcblxuXHRcdFx0dmFyIHByZXYsIG5leHQ7XG5cblx0XHRcdGZvciAoIHZhciBpID0gMCwgbCA9IGtleWZyYW1lcy5sZW5ndGg7IGkgPCBsOyBpICsrICkge1xuXG5cdFx0XHRcdHZhciBrZXlmcmFtZSA9IGtleWZyYW1lc1sgaSBdO1xuXG5cdFx0XHRcdGlmICgga2V5ZnJhbWUudmFsdWVbIHByb3BlcnR5IF0gPT09IG51bGwgKSB7XG5cblx0XHRcdFx0XHRwcmV2ID0gZ2V0UHJldigga2V5ZnJhbWVzLCBpLCBwcm9wZXJ0eSApO1xuXHRcdFx0XHRcdG5leHQgPSBnZXROZXh0KCBrZXlmcmFtZXMsIGksIHByb3BlcnR5ICk7XG5cblx0XHRcdFx0XHRpZiAoIHByZXYgPT09IG51bGwgKSB7XG5cblx0XHRcdFx0XHRcdGtleWZyYW1lLnZhbHVlWyBwcm9wZXJ0eSBdID0gbmV4dC52YWx1ZVsgcHJvcGVydHkgXTtcblx0XHRcdFx0XHRcdGNvbnRpbnVlO1xuXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0aWYgKCBuZXh0ID09PSBudWxsICkge1xuXG5cdFx0XHRcdFx0XHRrZXlmcmFtZS52YWx1ZVsgcHJvcGVydHkgXSA9IHByZXYudmFsdWVbIHByb3BlcnR5IF07XG5cdFx0XHRcdFx0XHRjb250aW51ZTtcblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGludGVycG9sYXRlKCBrZXlmcmFtZSwgcHJldiwgbmV4dCwgcHJvcGVydHkgKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdH1cblxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGdldFByZXYoIGtleWZyYW1lcywgaSwgcHJvcGVydHkgKSB7XG5cblx0XHRcdHdoaWxlICggaSA+PSAwICkge1xuXG5cdFx0XHRcdHZhciBrZXlmcmFtZSA9IGtleWZyYW1lc1sgaSBdO1xuXG5cdFx0XHRcdGlmICgga2V5ZnJhbWUudmFsdWVbIHByb3BlcnR5IF0gIT09IG51bGwgKSByZXR1cm4ga2V5ZnJhbWU7XG5cblx0XHRcdFx0aSAtLTtcblxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gbnVsbDtcblxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGdldE5leHQoIGtleWZyYW1lcywgaSwgcHJvcGVydHkgKSB7XG5cblx0XHRcdHdoaWxlICggaSA8IGtleWZyYW1lcy5sZW5ndGggKSB7XG5cblx0XHRcdFx0dmFyIGtleWZyYW1lID0ga2V5ZnJhbWVzWyBpIF07XG5cblx0XHRcdFx0aWYgKCBrZXlmcmFtZS52YWx1ZVsgcHJvcGVydHkgXSAhPT0gbnVsbCApIHJldHVybiBrZXlmcmFtZTtcblxuXHRcdFx0XHRpICsrO1xuXG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBudWxsO1xuXG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gaW50ZXJwb2xhdGUoIGtleSwgcHJldiwgbmV4dCwgcHJvcGVydHkgKSB7XG5cblx0XHRcdGlmICggKCBuZXh0LnRpbWUgLSBwcmV2LnRpbWUgKSA9PT0gMCApIHtcblxuXHRcdFx0XHRrZXkudmFsdWVbIHByb3BlcnR5IF0gPSBwcmV2LnZhbHVlWyBwcm9wZXJ0eSBdO1xuXHRcdFx0XHRyZXR1cm47XG5cblx0XHRcdH1cblxuXHRcdFx0a2V5LnZhbHVlWyBwcm9wZXJ0eSBdID0gKCAoIGtleS50aW1lIC0gcHJldi50aW1lICkgKiAoIG5leHQudmFsdWVbIHByb3BlcnR5IF0gLSBwcmV2LnZhbHVlWyBwcm9wZXJ0eSBdICkgLyAoIG5leHQudGltZSAtIHByZXYudGltZSApICkgKyBwcmV2LnZhbHVlWyBwcm9wZXJ0eSBdO1xuXG5cdFx0fVxuXG5cdFx0Ly8gYW5pbWF0aW9uIGNsaXBzXG5cblx0XHRmdW5jdGlvbiBwYXJzZUFuaW1hdGlvbkNsaXAoIHhtbCApIHtcblxuXHRcdFx0dmFyIGRhdGEgPSB7XG5cdFx0XHRcdG5hbWU6IHhtbC5nZXRBdHRyaWJ1dGUoICdpZCcgKSB8fCAnZGVmYXVsdCcsXG5cdFx0XHRcdHN0YXJ0OiBwYXJzZUZsb2F0KCB4bWwuZ2V0QXR0cmlidXRlKCAnc3RhcnQnICkgfHwgMCApLFxuXHRcdFx0XHRlbmQ6IHBhcnNlRmxvYXQoIHhtbC5nZXRBdHRyaWJ1dGUoICdlbmQnICkgfHwgMCApLFxuXHRcdFx0XHRhbmltYXRpb25zOiBbXVxuXHRcdFx0fTtcblxuXHRcdFx0Zm9yICggdmFyIGkgPSAwLCBsID0geG1sLmNoaWxkTm9kZXMubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcblxuXHRcdFx0XHR2YXIgY2hpbGQgPSB4bWwuY2hpbGROb2Rlc1sgaSBdO1xuXG5cdFx0XHRcdGlmICggY2hpbGQubm9kZVR5cGUgIT09IDEgKSBjb250aW51ZTtcblxuXHRcdFx0XHRzd2l0Y2ggKCBjaGlsZC5ub2RlTmFtZSApIHtcblxuXHRcdFx0XHRcdGNhc2UgJ2luc3RhbmNlX2FuaW1hdGlvbic6XG5cdFx0XHRcdFx0XHRkYXRhLmFuaW1hdGlvbnMucHVzaCggcGFyc2VJZCggY2hpbGQuZ2V0QXR0cmlidXRlKCAndXJsJyApICkgKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fVxuXG5cdFx0XHRsaWJyYXJ5LmNsaXBzWyB4bWwuZ2V0QXR0cmlidXRlKCAnaWQnICkgXSA9IGRhdGE7XG5cblx0XHR9XG5cblx0XHRmdW5jdGlvbiBidWlsZEFuaW1hdGlvbkNsaXAoIGRhdGEgKSB7XG5cblx0XHRcdHZhciB0cmFja3MgPSBbXTtcblxuXHRcdFx0dmFyIG5hbWUgPSBkYXRhLm5hbWU7XG5cdFx0XHR2YXIgZHVyYXRpb24gPSAoIGRhdGEuZW5kIC0gZGF0YS5zdGFydCApIHx8IC0gMTtcblx0XHRcdHZhciBhbmltYXRpb25zID0gZGF0YS5hbmltYXRpb25zO1xuXG5cdFx0XHRmb3IgKCB2YXIgaSA9IDAsIGlsID0gYW5pbWF0aW9ucy5sZW5ndGg7IGkgPCBpbDsgaSArKyApIHtcblxuXHRcdFx0XHR2YXIgYW5pbWF0aW9uVHJhY2tzID0gZ2V0QW5pbWF0aW9uKCBhbmltYXRpb25zWyBpIF0gKTtcblxuXHRcdFx0XHRmb3IgKCB2YXIgaiA9IDAsIGpsID0gYW5pbWF0aW9uVHJhY2tzLmxlbmd0aDsgaiA8IGpsOyBqICsrICkge1xuXG5cdFx0XHRcdFx0dHJhY2tzLnB1c2goIGFuaW1hdGlvblRyYWNrc1sgaiBdICk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBuZXcgQW5pbWF0aW9uQ2xpcCggbmFtZSwgZHVyYXRpb24sIHRyYWNrcyApO1xuXG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gZ2V0QW5pbWF0aW9uQ2xpcCggaWQgKSB7XG5cblx0XHRcdHJldHVybiBnZXRCdWlsZCggbGlicmFyeS5jbGlwc1sgaWQgXSwgYnVpbGRBbmltYXRpb25DbGlwICk7XG5cblx0XHR9XG5cblx0XHQvLyBjb250cm9sbGVyXG5cblx0XHRmdW5jdGlvbiBwYXJzZUNvbnRyb2xsZXIoIHhtbCApIHtcblxuXHRcdFx0dmFyIGRhdGEgPSB7fTtcblxuXHRcdFx0Zm9yICggdmFyIGkgPSAwLCBsID0geG1sLmNoaWxkTm9kZXMubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcblxuXHRcdFx0XHR2YXIgY2hpbGQgPSB4bWwuY2hpbGROb2Rlc1sgaSBdO1xuXG5cdFx0XHRcdGlmICggY2hpbGQubm9kZVR5cGUgIT09IDEgKSBjb250aW51ZTtcblxuXHRcdFx0XHRzd2l0Y2ggKCBjaGlsZC5ub2RlTmFtZSApIHtcblxuXHRcdFx0XHRcdGNhc2UgJ3NraW4nOlxuXHRcdFx0XHRcdFx0Ly8gdGhlcmUgaXMgZXhhY3RseSBvbmUgc2tpbiBwZXIgY29udHJvbGxlclxuXHRcdFx0XHRcdFx0ZGF0YS5pZCA9IHBhcnNlSWQoIGNoaWxkLmdldEF0dHJpYnV0ZSggJ3NvdXJjZScgKSApO1xuXHRcdFx0XHRcdFx0ZGF0YS5za2luID0gcGFyc2VTa2luKCBjaGlsZCApO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRjYXNlICdtb3JwaCc6XG5cdFx0XHRcdFx0XHRkYXRhLmlkID0gcGFyc2VJZCggY2hpbGQuZ2V0QXR0cmlidXRlKCAnc291cmNlJyApICk7XG5cdFx0XHRcdFx0XHRjb25zb2xlLndhcm4oICdUSFJFRS5Db2xsYWRhTG9hZGVyOiBNb3JwaCB0YXJnZXQgYW5pbWF0aW9uIG5vdCBzdXBwb3J0ZWQgeWV0LicgKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fVxuXG5cdFx0XHRsaWJyYXJ5LmNvbnRyb2xsZXJzWyB4bWwuZ2V0QXR0cmlidXRlKCAnaWQnICkgXSA9IGRhdGE7XG5cblx0XHR9XG5cblx0XHRmdW5jdGlvbiBwYXJzZVNraW4oIHhtbCApIHtcblxuXHRcdFx0dmFyIGRhdGEgPSB7XG5cdFx0XHRcdHNvdXJjZXM6IHt9XG5cdFx0XHR9O1xuXG5cdFx0XHRmb3IgKCB2YXIgaSA9IDAsIGwgPSB4bWwuY2hpbGROb2Rlcy5sZW5ndGg7IGkgPCBsOyBpICsrICkge1xuXG5cdFx0XHRcdHZhciBjaGlsZCA9IHhtbC5jaGlsZE5vZGVzWyBpIF07XG5cblx0XHRcdFx0aWYgKCBjaGlsZC5ub2RlVHlwZSAhPT0gMSApIGNvbnRpbnVlO1xuXG5cdFx0XHRcdHN3aXRjaCAoIGNoaWxkLm5vZGVOYW1lICkge1xuXG5cdFx0XHRcdFx0Y2FzZSAnYmluZF9zaGFwZV9tYXRyaXgnOlxuXHRcdFx0XHRcdFx0ZGF0YS5iaW5kU2hhcGVNYXRyaXggPSBwYXJzZUZsb2F0cyggY2hpbGQudGV4dENvbnRlbnQgKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0Y2FzZSAnc291cmNlJzpcblx0XHRcdFx0XHRcdHZhciBpZCA9IGNoaWxkLmdldEF0dHJpYnV0ZSggJ2lkJyApO1xuXHRcdFx0XHRcdFx0ZGF0YS5zb3VyY2VzWyBpZCBdID0gcGFyc2VTb3VyY2UoIGNoaWxkICk7XG5cdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdGNhc2UgJ2pvaW50cyc6XG5cdFx0XHRcdFx0XHRkYXRhLmpvaW50cyA9IHBhcnNlSm9pbnRzKCBjaGlsZCApO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRjYXNlICd2ZXJ0ZXhfd2VpZ2h0cyc6XG5cdFx0XHRcdFx0XHRkYXRhLnZlcnRleFdlaWdodHMgPSBwYXJzZVZlcnRleFdlaWdodHMoIGNoaWxkICk7XG5cdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHR9XG5cblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGRhdGE7XG5cblx0XHR9XG5cblx0XHRmdW5jdGlvbiBwYXJzZUpvaW50cyggeG1sICkge1xuXG5cdFx0XHR2YXIgZGF0YSA9IHtcblx0XHRcdFx0aW5wdXRzOiB7fVxuXHRcdFx0fTtcblxuXHRcdFx0Zm9yICggdmFyIGkgPSAwLCBsID0geG1sLmNoaWxkTm9kZXMubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcblxuXHRcdFx0XHR2YXIgY2hpbGQgPSB4bWwuY2hpbGROb2Rlc1sgaSBdO1xuXG5cdFx0XHRcdGlmICggY2hpbGQubm9kZVR5cGUgIT09IDEgKSBjb250aW51ZTtcblxuXHRcdFx0XHRzd2l0Y2ggKCBjaGlsZC5ub2RlTmFtZSApIHtcblxuXHRcdFx0XHRcdGNhc2UgJ2lucHV0Jzpcblx0XHRcdFx0XHRcdHZhciBzZW1hbnRpYyA9IGNoaWxkLmdldEF0dHJpYnV0ZSggJ3NlbWFudGljJyApO1xuXHRcdFx0XHRcdFx0dmFyIGlkID0gcGFyc2VJZCggY2hpbGQuZ2V0QXR0cmlidXRlKCAnc291cmNlJyApICk7XG5cdFx0XHRcdFx0XHRkYXRhLmlucHV0c1sgc2VtYW50aWMgXSA9IGlkO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBkYXRhO1xuXG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gcGFyc2VWZXJ0ZXhXZWlnaHRzKCB4bWwgKSB7XG5cblx0XHRcdHZhciBkYXRhID0ge1xuXHRcdFx0XHRpbnB1dHM6IHt9XG5cdFx0XHR9O1xuXG5cdFx0XHRmb3IgKCB2YXIgaSA9IDAsIGwgPSB4bWwuY2hpbGROb2Rlcy5sZW5ndGg7IGkgPCBsOyBpICsrICkge1xuXG5cdFx0XHRcdHZhciBjaGlsZCA9IHhtbC5jaGlsZE5vZGVzWyBpIF07XG5cblx0XHRcdFx0aWYgKCBjaGlsZC5ub2RlVHlwZSAhPT0gMSApIGNvbnRpbnVlO1xuXG5cdFx0XHRcdHN3aXRjaCAoIGNoaWxkLm5vZGVOYW1lICkge1xuXG5cdFx0XHRcdFx0Y2FzZSAnaW5wdXQnOlxuXHRcdFx0XHRcdFx0dmFyIHNlbWFudGljID0gY2hpbGQuZ2V0QXR0cmlidXRlKCAnc2VtYW50aWMnICk7XG5cdFx0XHRcdFx0XHR2YXIgaWQgPSBwYXJzZUlkKCBjaGlsZC5nZXRBdHRyaWJ1dGUoICdzb3VyY2UnICkgKTtcblx0XHRcdFx0XHRcdHZhciBvZmZzZXQgPSBwYXJzZUludCggY2hpbGQuZ2V0QXR0cmlidXRlKCAnb2Zmc2V0JyApICk7XG5cdFx0XHRcdFx0XHRkYXRhLmlucHV0c1sgc2VtYW50aWMgXSA9IHsgaWQ6IGlkLCBvZmZzZXQ6IG9mZnNldCB9O1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRjYXNlICd2Y291bnQnOlxuXHRcdFx0XHRcdFx0ZGF0YS52Y291bnQgPSBwYXJzZUludHMoIGNoaWxkLnRleHRDb250ZW50ICk7XG5cdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdGNhc2UgJ3YnOlxuXHRcdFx0XHRcdFx0ZGF0YS52ID0gcGFyc2VJbnRzKCBjaGlsZC50ZXh0Q29udGVudCApO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBkYXRhO1xuXG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gYnVpbGRDb250cm9sbGVyKCBkYXRhICkge1xuXG5cdFx0XHR2YXIgYnVpbGQgPSB7XG5cdFx0XHRcdGlkOiBkYXRhLmlkXG5cdFx0XHR9O1xuXG5cdFx0XHR2YXIgZ2VvbWV0cnkgPSBsaWJyYXJ5Lmdlb21ldHJpZXNbIGJ1aWxkLmlkIF07XG5cblx0XHRcdGlmICggZGF0YS5za2luICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0YnVpbGQuc2tpbiA9IGJ1aWxkU2tpbiggZGF0YS5za2luICk7XG5cblx0XHRcdFx0Ly8gd2UgZW5oYW5jZSB0aGUgJ3NvdXJjZXMnIHByb3BlcnR5IG9mIHRoZSBjb3JyZXNwb25kaW5nIGdlb21ldHJ5IHdpdGggb3VyIHNraW4gZGF0YVxuXG5cdFx0XHRcdGdlb21ldHJ5LnNvdXJjZXMuc2tpbkluZGljZXMgPSBidWlsZC5za2luLmluZGljZXM7XG5cdFx0XHRcdGdlb21ldHJ5LnNvdXJjZXMuc2tpbldlaWdodHMgPSBidWlsZC5za2luLndlaWdodHM7XG5cblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGJ1aWxkO1xuXG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gYnVpbGRTa2luKCBkYXRhICkge1xuXG5cdFx0XHR2YXIgQk9ORV9MSU1JVCA9IDQ7XG5cblx0XHRcdHZhciBidWlsZCA9IHtcblx0XHRcdFx0am9pbnRzOiBbXSwgLy8gdGhpcyBtdXN0IGJlIGFuIGFycmF5IHRvIHByZXNlcnZlIHRoZSBqb2ludCBvcmRlclxuXHRcdFx0XHRpbmRpY2VzOiB7XG5cdFx0XHRcdFx0YXJyYXk6IFtdLFxuXHRcdFx0XHRcdHN0cmlkZTogQk9ORV9MSU1JVFxuXHRcdFx0XHR9LFxuXHRcdFx0XHR3ZWlnaHRzOiB7XG5cdFx0XHRcdFx0YXJyYXk6IFtdLFxuXHRcdFx0XHRcdHN0cmlkZTogQk9ORV9MSU1JVFxuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXG5cdFx0XHR2YXIgc291cmNlcyA9IGRhdGEuc291cmNlcztcblx0XHRcdHZhciB2ZXJ0ZXhXZWlnaHRzID0gZGF0YS52ZXJ0ZXhXZWlnaHRzO1xuXG5cdFx0XHR2YXIgdmNvdW50ID0gdmVydGV4V2VpZ2h0cy52Y291bnQ7XG5cdFx0XHR2YXIgdiA9IHZlcnRleFdlaWdodHMudjtcblx0XHRcdHZhciBqb2ludE9mZnNldCA9IHZlcnRleFdlaWdodHMuaW5wdXRzLkpPSU5ULm9mZnNldDtcblx0XHRcdHZhciB3ZWlnaHRPZmZzZXQgPSB2ZXJ0ZXhXZWlnaHRzLmlucHV0cy5XRUlHSFQub2Zmc2V0O1xuXG5cdFx0XHR2YXIgam9pbnRTb3VyY2UgPSBkYXRhLnNvdXJjZXNbIGRhdGEuam9pbnRzLmlucHV0cy5KT0lOVCBdO1xuXHRcdFx0dmFyIGludmVyc2VTb3VyY2UgPSBkYXRhLnNvdXJjZXNbIGRhdGEuam9pbnRzLmlucHV0cy5JTlZfQklORF9NQVRSSVggXTtcblxuXHRcdFx0dmFyIHdlaWdodHMgPSBzb3VyY2VzWyB2ZXJ0ZXhXZWlnaHRzLmlucHV0cy5XRUlHSFQuaWQgXS5hcnJheTtcblx0XHRcdHZhciBzdHJpZGUgPSAwO1xuXG5cdFx0XHR2YXIgaSwgaiwgbDtcblxuXHRcdFx0Ly8gcHJvY2NlcyBza2luIGRhdGEgZm9yIGVhY2ggdmVydGV4XG5cblx0XHRcdGZvciAoIGkgPSAwLCBsID0gdmNvdW50Lmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG5cblx0XHRcdFx0dmFyIGpvaW50Q291bnQgPSB2Y291bnRbIGkgXTsgLy8gdGhpcyBpcyB0aGUgYW1vdW50IG9mIGpvaW50cyB0aGF0IGFmZmVjdCBhIHNpbmdsZSB2ZXJ0ZXhcblx0XHRcdFx0dmFyIHZlcnRleFNraW5EYXRhID0gW107XG5cblx0XHRcdFx0Zm9yICggaiA9IDA7IGogPCBqb2ludENvdW50OyBqICsrICkge1xuXG5cdFx0XHRcdFx0dmFyIHNraW5JbmRleCA9IHZbIHN0cmlkZSArIGpvaW50T2Zmc2V0IF07XG5cdFx0XHRcdFx0dmFyIHdlaWdodElkID0gdlsgc3RyaWRlICsgd2VpZ2h0T2Zmc2V0IF07XG5cdFx0XHRcdFx0dmFyIHNraW5XZWlnaHQgPSB3ZWlnaHRzWyB3ZWlnaHRJZCBdO1xuXG5cdFx0XHRcdFx0dmVydGV4U2tpbkRhdGEucHVzaCggeyBpbmRleDogc2tpbkluZGV4LCB3ZWlnaHQ6IHNraW5XZWlnaHQgfSApO1xuXG5cdFx0XHRcdFx0c3RyaWRlICs9IDI7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIHdlIHNvcnQgdGhlIGpvaW50cyBpbiBkZXNjZW5kaW5nIG9yZGVyIGJhc2VkIG9uIHRoZSB3ZWlnaHRzLlxuXHRcdFx0XHQvLyB0aGlzIGVuc3VyZXMsIHdlIG9ubHkgcHJvY2NlZCB0aGUgbW9zdCBpbXBvcnRhbnQgam9pbnRzIG9mIHRoZSB2ZXJ0ZXhcblxuXHRcdFx0XHR2ZXJ0ZXhTa2luRGF0YS5zb3J0KCBkZXNjZW5kaW5nICk7XG5cblx0XHRcdFx0Ly8gbm93IHdlIHByb3ZpZGUgZm9yIGVhY2ggdmVydGV4IGEgc2V0IG9mIGZvdXIgaW5kZXggYW5kIHdlaWdodCB2YWx1ZXMuXG5cdFx0XHRcdC8vIHRoZSBvcmRlciBvZiB0aGUgc2tpbiBkYXRhIG1hdGNoZXMgdGhlIG9yZGVyIG9mIHZlcnRpY2VzXG5cblx0XHRcdFx0Zm9yICggaiA9IDA7IGogPCBCT05FX0xJTUlUOyBqICsrICkge1xuXG5cdFx0XHRcdFx0dmFyIGQgPSB2ZXJ0ZXhTa2luRGF0YVsgaiBdO1xuXG5cdFx0XHRcdFx0aWYgKCBkICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0XHRcdGJ1aWxkLmluZGljZXMuYXJyYXkucHVzaCggZC5pbmRleCApO1xuXHRcdFx0XHRcdFx0YnVpbGQud2VpZ2h0cy5hcnJheS5wdXNoKCBkLndlaWdodCApO1xuXG5cdFx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdFx0YnVpbGQuaW5kaWNlcy5hcnJheS5wdXNoKCAwICk7XG5cdFx0XHRcdFx0XHRidWlsZC53ZWlnaHRzLmFycmF5LnB1c2goIDAgKTtcblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHR9XG5cblx0XHRcdH1cblxuXHRcdFx0Ly8gc2V0dXAgYmluZCBtYXRyaXhcblxuXHRcdFx0aWYgKCBkYXRhLmJpbmRTaGFwZU1hdHJpeCApIHtcblxuXHRcdFx0XHRidWlsZC5iaW5kTWF0cml4ID0gbmV3IE1hdHJpeDQoKS5mcm9tQXJyYXkoIGRhdGEuYmluZFNoYXBlTWF0cml4ICkudHJhbnNwb3NlKCk7XG5cblx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0YnVpbGQuYmluZE1hdHJpeCA9IG5ldyBNYXRyaXg0KCkuaWRlbnRpdHkoKTtcblxuXHRcdFx0fVxuXG5cdFx0XHQvLyBwcm9jZXNzIGJvbmVzIGFuZCBpbnZlcnNlIGJpbmQgbWF0cml4IGRhdGFcblxuXHRcdFx0Zm9yICggaSA9IDAsIGwgPSBqb2ludFNvdXJjZS5hcnJheS5sZW5ndGg7IGkgPCBsOyBpICsrICkge1xuXG5cdFx0XHRcdHZhciBuYW1lID0gam9pbnRTb3VyY2UuYXJyYXlbIGkgXTtcblx0XHRcdFx0dmFyIGJvbmVJbnZlcnNlID0gbmV3IE1hdHJpeDQoKS5mcm9tQXJyYXkoIGludmVyc2VTb3VyY2UuYXJyYXksIGkgKiBpbnZlcnNlU291cmNlLnN0cmlkZSApLnRyYW5zcG9zZSgpO1xuXG5cdFx0XHRcdGJ1aWxkLmpvaW50cy5wdXNoKCB7IG5hbWU6IG5hbWUsIGJvbmVJbnZlcnNlOiBib25lSW52ZXJzZSB9ICk7XG5cblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGJ1aWxkO1xuXG5cdFx0XHQvLyBhcnJheSBzb3J0IGZ1bmN0aW9uXG5cblx0XHRcdGZ1bmN0aW9uIGRlc2NlbmRpbmcoIGEsIGIgKSB7XG5cblx0XHRcdFx0cmV0dXJuIGIud2VpZ2h0IC0gYS53ZWlnaHQ7XG5cblx0XHRcdH1cblxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGdldENvbnRyb2xsZXIoIGlkICkge1xuXG5cdFx0XHRyZXR1cm4gZ2V0QnVpbGQoIGxpYnJhcnkuY29udHJvbGxlcnNbIGlkIF0sIGJ1aWxkQ29udHJvbGxlciApO1xuXG5cdFx0fVxuXG5cdFx0Ly8gaW1hZ2VcblxuXHRcdGZ1bmN0aW9uIHBhcnNlSW1hZ2UoIHhtbCApIHtcblxuXHRcdFx0dmFyIGRhdGEgPSB7XG5cdFx0XHRcdGluaXRfZnJvbTogZ2V0RWxlbWVudHNCeVRhZ05hbWUoIHhtbCwgJ2luaXRfZnJvbScgKVsgMCBdLnRleHRDb250ZW50XG5cdFx0XHR9O1xuXG5cdFx0XHRsaWJyYXJ5LmltYWdlc1sgeG1sLmdldEF0dHJpYnV0ZSggJ2lkJyApIF0gPSBkYXRhO1xuXG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gYnVpbGRJbWFnZSggZGF0YSApIHtcblxuXHRcdFx0aWYgKCBkYXRhLmJ1aWxkICE9PSB1bmRlZmluZWQgKSByZXR1cm4gZGF0YS5idWlsZDtcblxuXHRcdFx0cmV0dXJuIGRhdGEuaW5pdF9mcm9tO1xuXG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gZ2V0SW1hZ2UoIGlkICkge1xuXG5cdFx0XHR2YXIgZGF0YSA9IGxpYnJhcnkuaW1hZ2VzWyBpZCBdO1xuXG5cdFx0XHRpZiAoIGRhdGEgIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0XHRyZXR1cm4gZ2V0QnVpbGQoIGRhdGEsIGJ1aWxkSW1hZ2UgKTtcblxuXHRcdFx0fVxuXG5cdFx0XHRjb25zb2xlLndhcm4oICdUSFJFRS5Db2xsYWRhTG9hZGVyOiBDb3VsZG5cXCd0IGZpbmQgaW1hZ2Ugd2l0aCBJRDonLCBpZCApO1xuXG5cdFx0XHRyZXR1cm4gbnVsbDtcblxuXHRcdH1cblxuXHRcdC8vIGVmZmVjdFxuXG5cdFx0ZnVuY3Rpb24gcGFyc2VFZmZlY3QoIHhtbCApIHtcblxuXHRcdFx0dmFyIGRhdGEgPSB7fTtcblxuXHRcdFx0Zm9yICggdmFyIGkgPSAwLCBsID0geG1sLmNoaWxkTm9kZXMubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcblxuXHRcdFx0XHR2YXIgY2hpbGQgPSB4bWwuY2hpbGROb2Rlc1sgaSBdO1xuXG5cdFx0XHRcdGlmICggY2hpbGQubm9kZVR5cGUgIT09IDEgKSBjb250aW51ZTtcblxuXHRcdFx0XHRzd2l0Y2ggKCBjaGlsZC5ub2RlTmFtZSApIHtcblxuXHRcdFx0XHRcdGNhc2UgJ3Byb2ZpbGVfQ09NTU9OJzpcblx0XHRcdFx0XHRcdGRhdGEucHJvZmlsZSA9IHBhcnNlRWZmZWN0UHJvZmlsZUNPTU1PTiggY2hpbGQgKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fVxuXG5cdFx0XHRsaWJyYXJ5LmVmZmVjdHNbIHhtbC5nZXRBdHRyaWJ1dGUoICdpZCcgKSBdID0gZGF0YTtcblxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIHBhcnNlRWZmZWN0UHJvZmlsZUNPTU1PTiggeG1sICkge1xuXG5cdFx0XHR2YXIgZGF0YSA9IHtcblx0XHRcdFx0c3VyZmFjZXM6IHt9LFxuXHRcdFx0XHRzYW1wbGVyczoge31cblx0XHRcdH07XG5cblx0XHRcdGZvciAoIHZhciBpID0gMCwgbCA9IHhtbC5jaGlsZE5vZGVzLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG5cblx0XHRcdFx0dmFyIGNoaWxkID0geG1sLmNoaWxkTm9kZXNbIGkgXTtcblxuXHRcdFx0XHRpZiAoIGNoaWxkLm5vZGVUeXBlICE9PSAxICkgY29udGludWU7XG5cblx0XHRcdFx0c3dpdGNoICggY2hpbGQubm9kZU5hbWUgKSB7XG5cblx0XHRcdFx0XHRjYXNlICduZXdwYXJhbSc6XG5cdFx0XHRcdFx0XHRwYXJzZUVmZmVjdE5ld3BhcmFtKCBjaGlsZCwgZGF0YSApO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRjYXNlICd0ZWNobmlxdWUnOlxuXHRcdFx0XHRcdFx0ZGF0YS50ZWNobmlxdWUgPSBwYXJzZUVmZmVjdFRlY2huaXF1ZSggY2hpbGQgKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0Y2FzZSAnZXh0cmEnOlxuXHRcdFx0XHRcdFx0ZGF0YS5leHRyYSA9IHBhcnNlRWZmZWN0RXh0cmEoIGNoaWxkICk7XG5cdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHR9XG5cblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGRhdGE7XG5cblx0XHR9XG5cblx0XHRmdW5jdGlvbiBwYXJzZUVmZmVjdE5ld3BhcmFtKCB4bWwsIGRhdGEgKSB7XG5cblx0XHRcdHZhciBzaWQgPSB4bWwuZ2V0QXR0cmlidXRlKCAnc2lkJyApO1xuXG5cdFx0XHRmb3IgKCB2YXIgaSA9IDAsIGwgPSB4bWwuY2hpbGROb2Rlcy5sZW5ndGg7IGkgPCBsOyBpICsrICkge1xuXG5cdFx0XHRcdHZhciBjaGlsZCA9IHhtbC5jaGlsZE5vZGVzWyBpIF07XG5cblx0XHRcdFx0aWYgKCBjaGlsZC5ub2RlVHlwZSAhPT0gMSApIGNvbnRpbnVlO1xuXG5cdFx0XHRcdHN3aXRjaCAoIGNoaWxkLm5vZGVOYW1lICkge1xuXG5cdFx0XHRcdFx0Y2FzZSAnc3VyZmFjZSc6XG5cdFx0XHRcdFx0XHRkYXRhLnN1cmZhY2VzWyBzaWQgXSA9IHBhcnNlRWZmZWN0U3VyZmFjZSggY2hpbGQgKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0Y2FzZSAnc2FtcGxlcjJEJzpcblx0XHRcdFx0XHRcdGRhdGEuc2FtcGxlcnNbIHNpZCBdID0gcGFyc2VFZmZlY3RTYW1wbGVyKCBjaGlsZCApO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9XG5cblx0XHR9XG5cblx0XHRmdW5jdGlvbiBwYXJzZUVmZmVjdFN1cmZhY2UoIHhtbCApIHtcblxuXHRcdFx0dmFyIGRhdGEgPSB7fTtcblxuXHRcdFx0Zm9yICggdmFyIGkgPSAwLCBsID0geG1sLmNoaWxkTm9kZXMubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcblxuXHRcdFx0XHR2YXIgY2hpbGQgPSB4bWwuY2hpbGROb2Rlc1sgaSBdO1xuXG5cdFx0XHRcdGlmICggY2hpbGQubm9kZVR5cGUgIT09IDEgKSBjb250aW51ZTtcblxuXHRcdFx0XHRzd2l0Y2ggKCBjaGlsZC5ub2RlTmFtZSApIHtcblxuXHRcdFx0XHRcdGNhc2UgJ2luaXRfZnJvbSc6XG5cdFx0XHRcdFx0XHRkYXRhLmluaXRfZnJvbSA9IGNoaWxkLnRleHRDb250ZW50O1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBkYXRhO1xuXG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gcGFyc2VFZmZlY3RTYW1wbGVyKCB4bWwgKSB7XG5cblx0XHRcdHZhciBkYXRhID0ge307XG5cblx0XHRcdGZvciAoIHZhciBpID0gMCwgbCA9IHhtbC5jaGlsZE5vZGVzLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG5cblx0XHRcdFx0dmFyIGNoaWxkID0geG1sLmNoaWxkTm9kZXNbIGkgXTtcblxuXHRcdFx0XHRpZiAoIGNoaWxkLm5vZGVUeXBlICE9PSAxICkgY29udGludWU7XG5cblx0XHRcdFx0c3dpdGNoICggY2hpbGQubm9kZU5hbWUgKSB7XG5cblx0XHRcdFx0XHRjYXNlICdzb3VyY2UnOlxuXHRcdFx0XHRcdFx0ZGF0YS5zb3VyY2UgPSBjaGlsZC50ZXh0Q29udGVudDtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gZGF0YTtcblxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIHBhcnNlRWZmZWN0VGVjaG5pcXVlKCB4bWwgKSB7XG5cblx0XHRcdHZhciBkYXRhID0ge307XG5cblx0XHRcdGZvciAoIHZhciBpID0gMCwgbCA9IHhtbC5jaGlsZE5vZGVzLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG5cblx0XHRcdFx0dmFyIGNoaWxkID0geG1sLmNoaWxkTm9kZXNbIGkgXTtcblxuXHRcdFx0XHRpZiAoIGNoaWxkLm5vZGVUeXBlICE9PSAxICkgY29udGludWU7XG5cblx0XHRcdFx0c3dpdGNoICggY2hpbGQubm9kZU5hbWUgKSB7XG5cblx0XHRcdFx0XHRjYXNlICdjb25zdGFudCc6XG5cdFx0XHRcdFx0Y2FzZSAnbGFtYmVydCc6XG5cdFx0XHRcdFx0Y2FzZSAnYmxpbm4nOlxuXHRcdFx0XHRcdGNhc2UgJ3Bob25nJzpcblx0XHRcdFx0XHRcdGRhdGEudHlwZSA9IGNoaWxkLm5vZGVOYW1lO1xuXHRcdFx0XHRcdFx0ZGF0YS5wYXJhbWV0ZXJzID0gcGFyc2VFZmZlY3RQYXJhbWV0ZXJzKCBjaGlsZCApO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBkYXRhO1xuXG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gcGFyc2VFZmZlY3RQYXJhbWV0ZXJzKCB4bWwgKSB7XG5cblx0XHRcdHZhciBkYXRhID0ge307XG5cblx0XHRcdGZvciAoIHZhciBpID0gMCwgbCA9IHhtbC5jaGlsZE5vZGVzLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG5cblx0XHRcdFx0dmFyIGNoaWxkID0geG1sLmNoaWxkTm9kZXNbIGkgXTtcblxuXHRcdFx0XHRpZiAoIGNoaWxkLm5vZGVUeXBlICE9PSAxICkgY29udGludWU7XG5cblx0XHRcdFx0c3dpdGNoICggY2hpbGQubm9kZU5hbWUgKSB7XG5cblx0XHRcdFx0XHRjYXNlICdlbWlzc2lvbic6XG5cdFx0XHRcdFx0Y2FzZSAnZGlmZnVzZSc6XG5cdFx0XHRcdFx0Y2FzZSAnc3BlY3VsYXInOlxuXHRcdFx0XHRcdGNhc2UgJ2J1bXAnOlxuXHRcdFx0XHRcdGNhc2UgJ2FtYmllbnQnOlxuXHRcdFx0XHRcdGNhc2UgJ3NoaW5pbmVzcyc6XG5cdFx0XHRcdFx0Y2FzZSAndHJhbnNwYXJlbmN5Jzpcblx0XHRcdFx0XHRcdGRhdGFbIGNoaWxkLm5vZGVOYW1lIF0gPSBwYXJzZUVmZmVjdFBhcmFtZXRlciggY2hpbGQgKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ3RyYW5zcGFyZW50Jzpcblx0XHRcdFx0XHRcdGRhdGFbIGNoaWxkLm5vZGVOYW1lIF0gPSB7XG5cdFx0XHRcdFx0XHRcdG9wYXF1ZTogY2hpbGQuZ2V0QXR0cmlidXRlKCAnb3BhcXVlJyApLFxuXHRcdFx0XHRcdFx0XHRkYXRhOiBwYXJzZUVmZmVjdFBhcmFtZXRlciggY2hpbGQgKVxuXHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gZGF0YTtcblxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIHBhcnNlRWZmZWN0UGFyYW1ldGVyKCB4bWwgKSB7XG5cblx0XHRcdHZhciBkYXRhID0ge307XG5cblx0XHRcdGZvciAoIHZhciBpID0gMCwgbCA9IHhtbC5jaGlsZE5vZGVzLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG5cblx0XHRcdFx0dmFyIGNoaWxkID0geG1sLmNoaWxkTm9kZXNbIGkgXTtcblxuXHRcdFx0XHRpZiAoIGNoaWxkLm5vZGVUeXBlICE9PSAxICkgY29udGludWU7XG5cblx0XHRcdFx0c3dpdGNoICggY2hpbGQubm9kZU5hbWUgKSB7XG5cblx0XHRcdFx0XHRjYXNlICdjb2xvcic6XG5cdFx0XHRcdFx0XHRkYXRhWyBjaGlsZC5ub2RlTmFtZSBdID0gcGFyc2VGbG9hdHMoIGNoaWxkLnRleHRDb250ZW50ICk7XG5cdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdGNhc2UgJ2Zsb2F0Jzpcblx0XHRcdFx0XHRcdGRhdGFbIGNoaWxkLm5vZGVOYW1lIF0gPSBwYXJzZUZsb2F0KCBjaGlsZC50ZXh0Q29udGVudCApO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRjYXNlICd0ZXh0dXJlJzpcblx0XHRcdFx0XHRcdGRhdGFbIGNoaWxkLm5vZGVOYW1lIF0gPSB7IGlkOiBjaGlsZC5nZXRBdHRyaWJ1dGUoICd0ZXh0dXJlJyApLCBleHRyYTogcGFyc2VFZmZlY3RQYXJhbWV0ZXJUZXh0dXJlKCBjaGlsZCApIH07XG5cdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHR9XG5cblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGRhdGE7XG5cblx0XHR9XG5cblx0XHRmdW5jdGlvbiBwYXJzZUVmZmVjdFBhcmFtZXRlclRleHR1cmUoIHhtbCApIHtcblxuXHRcdFx0dmFyIGRhdGEgPSB7XG5cdFx0XHRcdHRlY2huaXF1ZToge31cblx0XHRcdH07XG5cblx0XHRcdGZvciAoIHZhciBpID0gMCwgbCA9IHhtbC5jaGlsZE5vZGVzLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG5cblx0XHRcdFx0dmFyIGNoaWxkID0geG1sLmNoaWxkTm9kZXNbIGkgXTtcblxuXHRcdFx0XHRpZiAoIGNoaWxkLm5vZGVUeXBlICE9PSAxICkgY29udGludWU7XG5cblx0XHRcdFx0c3dpdGNoICggY2hpbGQubm9kZU5hbWUgKSB7XG5cblx0XHRcdFx0XHRjYXNlICdleHRyYSc6XG5cdFx0XHRcdFx0XHRwYXJzZUVmZmVjdFBhcmFtZXRlclRleHR1cmVFeHRyYSggY2hpbGQsIGRhdGEgKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gZGF0YTtcblxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIHBhcnNlRWZmZWN0UGFyYW1ldGVyVGV4dHVyZUV4dHJhKCB4bWwsIGRhdGEgKSB7XG5cblx0XHRcdGZvciAoIHZhciBpID0gMCwgbCA9IHhtbC5jaGlsZE5vZGVzLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG5cblx0XHRcdFx0dmFyIGNoaWxkID0geG1sLmNoaWxkTm9kZXNbIGkgXTtcblxuXHRcdFx0XHRpZiAoIGNoaWxkLm5vZGVUeXBlICE9PSAxICkgY29udGludWU7XG5cblx0XHRcdFx0c3dpdGNoICggY2hpbGQubm9kZU5hbWUgKSB7XG5cblx0XHRcdFx0XHRjYXNlICd0ZWNobmlxdWUnOlxuXHRcdFx0XHRcdFx0cGFyc2VFZmZlY3RQYXJhbWV0ZXJUZXh0dXJlRXh0cmFUZWNobmlxdWUoIGNoaWxkLCBkYXRhICk7XG5cdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHR9XG5cblx0XHRcdH1cblxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIHBhcnNlRWZmZWN0UGFyYW1ldGVyVGV4dHVyZUV4dHJhVGVjaG5pcXVlKCB4bWwsIGRhdGEgKSB7XG5cblx0XHRcdGZvciAoIHZhciBpID0gMCwgbCA9IHhtbC5jaGlsZE5vZGVzLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG5cblx0XHRcdFx0dmFyIGNoaWxkID0geG1sLmNoaWxkTm9kZXNbIGkgXTtcblxuXHRcdFx0XHRpZiAoIGNoaWxkLm5vZGVUeXBlICE9PSAxICkgY29udGludWU7XG5cblx0XHRcdFx0c3dpdGNoICggY2hpbGQubm9kZU5hbWUgKSB7XG5cblx0XHRcdFx0XHRjYXNlICdyZXBlYXRVJzpcblx0XHRcdFx0XHRjYXNlICdyZXBlYXRWJzpcblx0XHRcdFx0XHRjYXNlICdvZmZzZXRVJzpcblx0XHRcdFx0XHRjYXNlICdvZmZzZXRWJzpcblx0XHRcdFx0XHRcdGRhdGEudGVjaG5pcXVlWyBjaGlsZC5ub2RlTmFtZSBdID0gcGFyc2VGbG9hdCggY2hpbGQudGV4dENvbnRlbnQgKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0Y2FzZSAnd3JhcFUnOlxuXHRcdFx0XHRcdGNhc2UgJ3dyYXBWJzpcblxuXHRcdFx0XHRcdFx0Ly8gc29tZSBmaWxlcyBoYXZlIHZhbHVlcyBmb3Igd3JhcFUvd3JhcFYgd2hpY2ggYmVjb21lIE5hTiB2aWEgcGFyc2VJbnRcblxuXHRcdFx0XHRcdFx0aWYgKCBjaGlsZC50ZXh0Q29udGVudC50b1VwcGVyQ2FzZSgpID09PSAnVFJVRScgKSB7XG5cblx0XHRcdFx0XHRcdFx0ZGF0YS50ZWNobmlxdWVbIGNoaWxkLm5vZGVOYW1lIF0gPSAxO1xuXG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKCBjaGlsZC50ZXh0Q29udGVudC50b1VwcGVyQ2FzZSgpID09PSAnRkFMU0UnICkge1xuXG5cdFx0XHRcdFx0XHRcdGRhdGEudGVjaG5pcXVlWyBjaGlsZC5ub2RlTmFtZSBdID0gMDtcblxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdFx0XHRkYXRhLnRlY2huaXF1ZVsgY2hpbGQubm9kZU5hbWUgXSA9IHBhcnNlSW50KCBjaGlsZC50ZXh0Q29udGVudCApO1xuXG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fVxuXG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gcGFyc2VFZmZlY3RFeHRyYSggeG1sICkge1xuXG5cdFx0XHR2YXIgZGF0YSA9IHt9O1xuXG5cdFx0XHRmb3IgKCB2YXIgaSA9IDAsIGwgPSB4bWwuY2hpbGROb2Rlcy5sZW5ndGg7IGkgPCBsOyBpICsrICkge1xuXG5cdFx0XHRcdHZhciBjaGlsZCA9IHhtbC5jaGlsZE5vZGVzWyBpIF07XG5cblx0XHRcdFx0aWYgKCBjaGlsZC5ub2RlVHlwZSAhPT0gMSApIGNvbnRpbnVlO1xuXG5cdFx0XHRcdHN3aXRjaCAoIGNoaWxkLm5vZGVOYW1lICkge1xuXG5cdFx0XHRcdFx0Y2FzZSAndGVjaG5pcXVlJzpcblx0XHRcdFx0XHRcdGRhdGEudGVjaG5pcXVlID0gcGFyc2VFZmZlY3RFeHRyYVRlY2huaXF1ZSggY2hpbGQgKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gZGF0YTtcblxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIHBhcnNlRWZmZWN0RXh0cmFUZWNobmlxdWUoIHhtbCApIHtcblxuXHRcdFx0dmFyIGRhdGEgPSB7fTtcblxuXHRcdFx0Zm9yICggdmFyIGkgPSAwLCBsID0geG1sLmNoaWxkTm9kZXMubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcblxuXHRcdFx0XHR2YXIgY2hpbGQgPSB4bWwuY2hpbGROb2Rlc1sgaSBdO1xuXG5cdFx0XHRcdGlmICggY2hpbGQubm9kZVR5cGUgIT09IDEgKSBjb250aW51ZTtcblxuXHRcdFx0XHRzd2l0Y2ggKCBjaGlsZC5ub2RlTmFtZSApIHtcblxuXHRcdFx0XHRcdGNhc2UgJ2RvdWJsZV9zaWRlZCc6XG5cdFx0XHRcdFx0XHRkYXRhWyBjaGlsZC5ub2RlTmFtZSBdID0gcGFyc2VJbnQoIGNoaWxkLnRleHRDb250ZW50ICk7XG5cdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHR9XG5cblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGRhdGE7XG5cblx0XHR9XG5cblx0XHRmdW5jdGlvbiBidWlsZEVmZmVjdCggZGF0YSApIHtcblxuXHRcdFx0cmV0dXJuIGRhdGE7XG5cblx0XHR9XG5cblx0XHRmdW5jdGlvbiBnZXRFZmZlY3QoIGlkICkge1xuXG5cdFx0XHRyZXR1cm4gZ2V0QnVpbGQoIGxpYnJhcnkuZWZmZWN0c1sgaWQgXSwgYnVpbGRFZmZlY3QgKTtcblxuXHRcdH1cblxuXHRcdC8vIG1hdGVyaWFsXG5cblx0XHRmdW5jdGlvbiBwYXJzZU1hdGVyaWFsKCB4bWwgKSB7XG5cblx0XHRcdHZhciBkYXRhID0ge1xuXHRcdFx0XHRuYW1lOiB4bWwuZ2V0QXR0cmlidXRlKCAnbmFtZScgKVxuXHRcdFx0fTtcblxuXHRcdFx0Zm9yICggdmFyIGkgPSAwLCBsID0geG1sLmNoaWxkTm9kZXMubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcblxuXHRcdFx0XHR2YXIgY2hpbGQgPSB4bWwuY2hpbGROb2Rlc1sgaSBdO1xuXG5cdFx0XHRcdGlmICggY2hpbGQubm9kZVR5cGUgIT09IDEgKSBjb250aW51ZTtcblxuXHRcdFx0XHRzd2l0Y2ggKCBjaGlsZC5ub2RlTmFtZSApIHtcblxuXHRcdFx0XHRcdGNhc2UgJ2luc3RhbmNlX2VmZmVjdCc6XG5cdFx0XHRcdFx0XHRkYXRhLnVybCA9IHBhcnNlSWQoIGNoaWxkLmdldEF0dHJpYnV0ZSggJ3VybCcgKSApO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9XG5cblx0XHRcdGxpYnJhcnkubWF0ZXJpYWxzWyB4bWwuZ2V0QXR0cmlidXRlKCAnaWQnICkgXSA9IGRhdGE7XG5cblx0XHR9XG5cblx0XHRmdW5jdGlvbiBnZXRUZXh0dXJlTG9hZGVyKCBpbWFnZSApIHtcblxuXHRcdFx0dmFyIGxvYWRlcjtcblxuXHRcdFx0dmFyIGV4dGVuc2lvbiA9IGltYWdlLnNsaWNlKCAoIGltYWdlLmxhc3RJbmRleE9mKCAnLicgKSAtIDEgPj4+IDAgKSArIDIgKTsgLy8gaHR0cDovL3d3dy5qc3RpcHMuY28vZW4vamF2YXNjcmlwdC9nZXQtZmlsZS1leHRlbnNpb24vXG5cdFx0XHRleHRlbnNpb24gPSBleHRlbnNpb24udG9Mb3dlckNhc2UoKTtcblxuXHRcdFx0c3dpdGNoICggZXh0ZW5zaW9uICkge1xuXG5cdFx0XHRcdGNhc2UgJ3RnYSc6XG5cdFx0XHRcdFx0bG9hZGVyID0gdGdhTG9hZGVyO1xuXHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0bG9hZGVyID0gdGV4dHVyZUxvYWRlcjtcblxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gbG9hZGVyO1xuXG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gYnVpbGRNYXRlcmlhbCggZGF0YSApIHtcblxuXHRcdFx0dmFyIGVmZmVjdCA9IGdldEVmZmVjdCggZGF0YS51cmwgKTtcblx0XHRcdHZhciB0ZWNobmlxdWUgPSBlZmZlY3QucHJvZmlsZS50ZWNobmlxdWU7XG5cdFx0XHR2YXIgZXh0cmEgPSBlZmZlY3QucHJvZmlsZS5leHRyYTtcblxuXHRcdFx0dmFyIG1hdGVyaWFsO1xuXG5cdFx0XHRzd2l0Y2ggKCB0ZWNobmlxdWUudHlwZSApIHtcblxuXHRcdFx0XHRjYXNlICdwaG9uZyc6XG5cdFx0XHRcdGNhc2UgJ2JsaW5uJzpcblx0XHRcdFx0XHRtYXRlcmlhbCA9IG5ldyBNZXNoUGhvbmdNYXRlcmlhbCgpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdGNhc2UgJ2xhbWJlcnQnOlxuXHRcdFx0XHRcdG1hdGVyaWFsID0gbmV3IE1lc2hMYW1iZXJ0TWF0ZXJpYWwoKTtcblx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRcdG1hdGVyaWFsID0gbmV3IE1lc2hCYXNpY01hdGVyaWFsKCk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdH1cblxuXHRcdFx0bWF0ZXJpYWwubmFtZSA9IGRhdGEubmFtZSB8fCAnJztcblxuXHRcdFx0ZnVuY3Rpb24gZ2V0VGV4dHVyZSggdGV4dHVyZU9iamVjdCApIHtcblxuXHRcdFx0XHR2YXIgc2FtcGxlciA9IGVmZmVjdC5wcm9maWxlLnNhbXBsZXJzWyB0ZXh0dXJlT2JqZWN0LmlkIF07XG5cdFx0XHRcdHZhciBpbWFnZSA9IG51bGw7XG5cblx0XHRcdFx0Ly8gZ2V0IGltYWdlXG5cblx0XHRcdFx0aWYgKCBzYW1wbGVyICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0XHR2YXIgc3VyZmFjZSA9IGVmZmVjdC5wcm9maWxlLnN1cmZhY2VzWyBzYW1wbGVyLnNvdXJjZSBdO1xuXHRcdFx0XHRcdGltYWdlID0gZ2V0SW1hZ2UoIHN1cmZhY2UuaW5pdF9mcm9tICk7XG5cblx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdGNvbnNvbGUud2FybiggJ1RIUkVFLkNvbGxhZGFMb2FkZXI6IFVuZGVmaW5lZCBzYW1wbGVyLiBBY2Nlc3MgaW1hZ2UgZGlyZWN0bHkgKHNlZSAjMTI1MzApLicgKTtcblx0XHRcdFx0XHRpbWFnZSA9IGdldEltYWdlKCB0ZXh0dXJlT2JqZWN0LmlkICk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIGNyZWF0ZSB0ZXh0dXJlIGlmIGltYWdlIGlzIGF2YWlhYmxlXG5cblx0XHRcdFx0aWYgKCBpbWFnZSAhPT0gbnVsbCApIHtcblxuXHRcdFx0XHRcdHZhciBsb2FkZXIgPSBnZXRUZXh0dXJlTG9hZGVyKCBpbWFnZSApO1xuXG5cdFx0XHRcdFx0aWYgKCBsb2FkZXIgIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0XHRcdFx0dmFyIHRleHR1cmUgPSBsb2FkZXIubG9hZCggaW1hZ2UgKTtcblxuXHRcdFx0XHRcdFx0dmFyIGV4dHJhID0gdGV4dHVyZU9iamVjdC5leHRyYTtcblxuXHRcdFx0XHRcdFx0aWYgKCBleHRyYSAhPT0gdW5kZWZpbmVkICYmIGV4dHJhLnRlY2huaXF1ZSAhPT0gdW5kZWZpbmVkICYmIGlzRW1wdHkoIGV4dHJhLnRlY2huaXF1ZSApID09PSBmYWxzZSApIHtcblxuXHRcdFx0XHRcdFx0XHR2YXIgdGVjaG5pcXVlID0gZXh0cmEudGVjaG5pcXVlO1xuXG5cdFx0XHRcdFx0XHRcdHRleHR1cmUud3JhcFMgPSB0ZWNobmlxdWUud3JhcFUgPyBSZXBlYXRXcmFwcGluZyA6IENsYW1wVG9FZGdlV3JhcHBpbmc7XG5cdFx0XHRcdFx0XHRcdHRleHR1cmUud3JhcFQgPSB0ZWNobmlxdWUud3JhcFYgPyBSZXBlYXRXcmFwcGluZyA6IENsYW1wVG9FZGdlV3JhcHBpbmc7XG5cblx0XHRcdFx0XHRcdFx0dGV4dHVyZS5vZmZzZXQuc2V0KCB0ZWNobmlxdWUub2Zmc2V0VSB8fCAwLCB0ZWNobmlxdWUub2Zmc2V0ViB8fCAwICk7XG5cdFx0XHRcdFx0XHRcdHRleHR1cmUucmVwZWF0LnNldCggdGVjaG5pcXVlLnJlcGVhdFUgfHwgMSwgdGVjaG5pcXVlLnJlcGVhdFYgfHwgMSApO1xuXG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0XHRcdHRleHR1cmUud3JhcFMgPSBSZXBlYXRXcmFwcGluZztcblx0XHRcdFx0XHRcdFx0dGV4dHVyZS53cmFwVCA9IFJlcGVhdFdyYXBwaW5nO1xuXG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdHJldHVybiB0ZXh0dXJlO1xuXG5cdFx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdFx0Y29uc29sZS53YXJuKCAnVEhSRUUuQ29sbGFkYUxvYWRlcjogTG9hZGVyIGZvciB0ZXh0dXJlICVzIG5vdCBmb3VuZC4nLCBpbWFnZSApO1xuXG5cdFx0XHRcdFx0XHRyZXR1cm4gbnVsbDtcblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0Y29uc29sZS53YXJuKCAnVEhSRUUuQ29sbGFkYUxvYWRlcjogQ291bGRuXFwndCBjcmVhdGUgdGV4dHVyZSB3aXRoIElEOicsIHRleHR1cmVPYmplY3QuaWQgKTtcblxuXHRcdFx0XHRcdHJldHVybiBudWxsO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fVxuXG5cdFx0XHR2YXIgcGFyYW1ldGVycyA9IHRlY2huaXF1ZS5wYXJhbWV0ZXJzO1xuXG5cdFx0XHRmb3IgKCB2YXIga2V5IGluIHBhcmFtZXRlcnMgKSB7XG5cblx0XHRcdFx0dmFyIHBhcmFtZXRlciA9IHBhcmFtZXRlcnNbIGtleSBdO1xuXG5cdFx0XHRcdHN3aXRjaCAoIGtleSApIHtcblxuXHRcdFx0XHRcdGNhc2UgJ2RpZmZ1c2UnOlxuXHRcdFx0XHRcdFx0aWYgKCBwYXJhbWV0ZXIuY29sb3IgKSBtYXRlcmlhbC5jb2xvci5mcm9tQXJyYXkoIHBhcmFtZXRlci5jb2xvciApO1xuXHRcdFx0XHRcdFx0aWYgKCBwYXJhbWV0ZXIudGV4dHVyZSApIG1hdGVyaWFsLm1hcCA9IGdldFRleHR1cmUoIHBhcmFtZXRlci50ZXh0dXJlICk7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRjYXNlICdzcGVjdWxhcic6XG5cdFx0XHRcdFx0XHRpZiAoIHBhcmFtZXRlci5jb2xvciAmJiBtYXRlcmlhbC5zcGVjdWxhciApIG1hdGVyaWFsLnNwZWN1bGFyLmZyb21BcnJheSggcGFyYW1ldGVyLmNvbG9yICk7XG5cdFx0XHRcdFx0XHRpZiAoIHBhcmFtZXRlci50ZXh0dXJlICkgbWF0ZXJpYWwuc3BlY3VsYXJNYXAgPSBnZXRUZXh0dXJlKCBwYXJhbWV0ZXIudGV4dHVyZSApO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnYnVtcCc6XG5cdFx0XHRcdFx0XHRpZiAoIHBhcmFtZXRlci50ZXh0dXJlICkgbWF0ZXJpYWwubm9ybWFsTWFwID0gZ2V0VGV4dHVyZSggcGFyYW1ldGVyLnRleHR1cmUgKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ2FtYmllbnQnOlxuXHRcdFx0XHRcdFx0aWYgKCBwYXJhbWV0ZXIudGV4dHVyZSApIG1hdGVyaWFsLmxpZ2h0TWFwID0gZ2V0VGV4dHVyZSggcGFyYW1ldGVyLnRleHR1cmUgKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ3NoaW5pbmVzcyc6XG5cdFx0XHRcdFx0XHRpZiAoIHBhcmFtZXRlci5mbG9hdCAmJiBtYXRlcmlhbC5zaGluaW5lc3MgKSBtYXRlcmlhbC5zaGluaW5lc3MgPSBwYXJhbWV0ZXIuZmxvYXQ7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRjYXNlICdlbWlzc2lvbic6XG5cdFx0XHRcdFx0XHRpZiAoIHBhcmFtZXRlci5jb2xvciAmJiBtYXRlcmlhbC5lbWlzc2l2ZSApIG1hdGVyaWFsLmVtaXNzaXZlLmZyb21BcnJheSggcGFyYW1ldGVyLmNvbG9yICk7XG5cdFx0XHRcdFx0XHRpZiAoIHBhcmFtZXRlci50ZXh0dXJlICkgbWF0ZXJpYWwuZW1pc3NpdmVNYXAgPSBnZXRUZXh0dXJlKCBwYXJhbWV0ZXIudGV4dHVyZSApO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9XG5cblx0XHRcdC8vXG5cblx0XHRcdHZhciB0cmFuc3BhcmVudCA9IHBhcmFtZXRlcnNbICd0cmFuc3BhcmVudCcgXTtcblx0XHRcdHZhciB0cmFuc3BhcmVuY3kgPSBwYXJhbWV0ZXJzWyAndHJhbnNwYXJlbmN5JyBdO1xuXG5cdFx0XHQvLyA8dHJhbnNwYXJlbmN5PiBkb2VzIG5vdCBleGlzdCBidXQgPHRyYW5zcGFyZW50PlxuXG5cdFx0XHRpZiAoIHRyYW5zcGFyZW5jeSA9PT0gdW5kZWZpbmVkICYmIHRyYW5zcGFyZW50ICkge1xuXG5cdFx0XHRcdHRyYW5zcGFyZW5jeSA9IHtcblx0XHRcdFx0XHRmbG9hdDogMVxuXHRcdFx0XHR9O1xuXG5cdFx0XHR9XG5cblx0XHRcdC8vIDx0cmFuc3BhcmVudD4gZG9lcyBub3QgZXhpc3QgYnV0IDx0cmFuc3BhcmVuY3k+XG5cblx0XHRcdGlmICggdHJhbnNwYXJlbnQgPT09IHVuZGVmaW5lZCAmJiB0cmFuc3BhcmVuY3kgKSB7XG5cblx0XHRcdFx0dHJhbnNwYXJlbnQgPSB7XG5cdFx0XHRcdFx0b3BhcXVlOiAnQV9PTkUnLFxuXHRcdFx0XHRcdGRhdGE6IHtcblx0XHRcdFx0XHRcdGNvbG9yOiBbIDEsIDEsIDEsIDEgXVxuXHRcdFx0XHRcdH0gfTtcblxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIHRyYW5zcGFyZW50ICYmIHRyYW5zcGFyZW5jeSApIHtcblxuXHRcdFx0XHQvLyBoYW5kbGUgY2FzZSBpZiBhIHRleHR1cmUgZXhpc3RzIGJ1dCBubyBjb2xvclxuXG5cdFx0XHRcdGlmICggdHJhbnNwYXJlbnQuZGF0YS50ZXh0dXJlICkge1xuXG5cdFx0XHRcdFx0Ly8gd2UgZG8gbm90IHNldCBhbiBhbHBoYSBtYXAgKHNlZSAjMTM3OTIpXG5cblx0XHRcdFx0XHRtYXRlcmlhbC50cmFuc3BhcmVudCA9IHRydWU7XG5cblx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdHZhciBjb2xvciA9IHRyYW5zcGFyZW50LmRhdGEuY29sb3I7XG5cblx0XHRcdFx0XHRzd2l0Y2ggKCB0cmFuc3BhcmVudC5vcGFxdWUgKSB7XG5cblx0XHRcdFx0XHRcdGNhc2UgJ0FfT05FJzpcblx0XHRcdFx0XHRcdFx0bWF0ZXJpYWwub3BhY2l0eSA9IGNvbG9yWyAzIF0gKiB0cmFuc3BhcmVuY3kuZmxvYXQ7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0Y2FzZSAnUkdCX1pFUk8nOlxuXHRcdFx0XHRcdFx0XHRtYXRlcmlhbC5vcGFjaXR5ID0gMSAtICggY29sb3JbIDAgXSAqIHRyYW5zcGFyZW5jeS5mbG9hdCApO1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdGNhc2UgJ0FfWkVSTyc6XG5cdFx0XHRcdFx0XHRcdG1hdGVyaWFsLm9wYWNpdHkgPSAxIC0gKCBjb2xvclsgMyBdICogdHJhbnNwYXJlbmN5LmZsb2F0ICk7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0Y2FzZSAnUkdCX09ORSc6XG5cdFx0XHRcdFx0XHRcdG1hdGVyaWFsLm9wYWNpdHkgPSBjb2xvclsgMCBdICogdHJhbnNwYXJlbmN5LmZsb2F0O1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0XHRcdGNvbnNvbGUud2FybiggJ1RIUkVFLkNvbGxhZGFMb2FkZXI6IEludmFsaWQgb3BhcXVlIHR5cGUgXCIlc1wiIG9mIHRyYW5zcGFyZW50IHRhZy4nLCB0cmFuc3BhcmVudC5vcGFxdWUgKTtcblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGlmICggbWF0ZXJpYWwub3BhY2l0eSA8IDEgKSBtYXRlcmlhbC50cmFuc3BhcmVudCA9IHRydWU7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9XG5cblx0XHRcdC8vXG5cblx0XHRcdGlmICggZXh0cmEgIT09IHVuZGVmaW5lZCAmJiBleHRyYS50ZWNobmlxdWUgIT09IHVuZGVmaW5lZCAmJiBleHRyYS50ZWNobmlxdWUuZG91YmxlX3NpZGVkID09PSAxICkge1xuXG5cdFx0XHRcdG1hdGVyaWFsLnNpZGUgPSBEb3VibGVTaWRlO1xuXG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBtYXRlcmlhbDtcblxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGdldE1hdGVyaWFsKCBpZCApIHtcblxuXHRcdFx0cmV0dXJuIGdldEJ1aWxkKCBsaWJyYXJ5Lm1hdGVyaWFsc1sgaWQgXSwgYnVpbGRNYXRlcmlhbCApO1xuXG5cdFx0fVxuXG5cdFx0Ly8gY2FtZXJhXG5cblx0XHRmdW5jdGlvbiBwYXJzZUNhbWVyYSggeG1sICkge1xuXG5cdFx0XHR2YXIgZGF0YSA9IHtcblx0XHRcdFx0bmFtZTogeG1sLmdldEF0dHJpYnV0ZSggJ25hbWUnIClcblx0XHRcdH07XG5cblx0XHRcdGZvciAoIHZhciBpID0gMCwgbCA9IHhtbC5jaGlsZE5vZGVzLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG5cblx0XHRcdFx0dmFyIGNoaWxkID0geG1sLmNoaWxkTm9kZXNbIGkgXTtcblxuXHRcdFx0XHRpZiAoIGNoaWxkLm5vZGVUeXBlICE9PSAxICkgY29udGludWU7XG5cblx0XHRcdFx0c3dpdGNoICggY2hpbGQubm9kZU5hbWUgKSB7XG5cblx0XHRcdFx0XHRjYXNlICdvcHRpY3MnOlxuXHRcdFx0XHRcdFx0ZGF0YS5vcHRpY3MgPSBwYXJzZUNhbWVyYU9wdGljcyggY2hpbGQgKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fVxuXG5cdFx0XHRsaWJyYXJ5LmNhbWVyYXNbIHhtbC5nZXRBdHRyaWJ1dGUoICdpZCcgKSBdID0gZGF0YTtcblxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIHBhcnNlQ2FtZXJhT3B0aWNzKCB4bWwgKSB7XG5cblx0XHRcdGZvciAoIHZhciBpID0gMDsgaSA8IHhtbC5jaGlsZE5vZGVzLmxlbmd0aDsgaSArKyApIHtcblxuXHRcdFx0XHR2YXIgY2hpbGQgPSB4bWwuY2hpbGROb2Rlc1sgaSBdO1xuXG5cdFx0XHRcdHN3aXRjaCAoIGNoaWxkLm5vZGVOYW1lICkge1xuXG5cdFx0XHRcdFx0Y2FzZSAndGVjaG5pcXVlX2NvbW1vbic6XG5cdFx0XHRcdFx0XHRyZXR1cm4gcGFyc2VDYW1lcmFUZWNobmlxdWUoIGNoaWxkICk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiB7fTtcblxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIHBhcnNlQ2FtZXJhVGVjaG5pcXVlKCB4bWwgKSB7XG5cblx0XHRcdHZhciBkYXRhID0ge307XG5cblx0XHRcdGZvciAoIHZhciBpID0gMDsgaSA8IHhtbC5jaGlsZE5vZGVzLmxlbmd0aDsgaSArKyApIHtcblxuXHRcdFx0XHR2YXIgY2hpbGQgPSB4bWwuY2hpbGROb2Rlc1sgaSBdO1xuXG5cdFx0XHRcdHN3aXRjaCAoIGNoaWxkLm5vZGVOYW1lICkge1xuXG5cdFx0XHRcdFx0Y2FzZSAncGVyc3BlY3RpdmUnOlxuXHRcdFx0XHRcdGNhc2UgJ29ydGhvZ3JhcGhpYyc6XG5cblx0XHRcdFx0XHRcdGRhdGEudGVjaG5pcXVlID0gY2hpbGQubm9kZU5hbWU7XG5cdFx0XHRcdFx0XHRkYXRhLnBhcmFtZXRlcnMgPSBwYXJzZUNhbWVyYVBhcmFtZXRlcnMoIGNoaWxkICk7XG5cblx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gZGF0YTtcblxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIHBhcnNlQ2FtZXJhUGFyYW1ldGVycyggeG1sICkge1xuXG5cdFx0XHR2YXIgZGF0YSA9IHt9O1xuXG5cdFx0XHRmb3IgKCB2YXIgaSA9IDA7IGkgPCB4bWwuY2hpbGROb2Rlcy5sZW5ndGg7IGkgKysgKSB7XG5cblx0XHRcdFx0dmFyIGNoaWxkID0geG1sLmNoaWxkTm9kZXNbIGkgXTtcblxuXHRcdFx0XHRzd2l0Y2ggKCBjaGlsZC5ub2RlTmFtZSApIHtcblxuXHRcdFx0XHRcdGNhc2UgJ3hmb3YnOlxuXHRcdFx0XHRcdGNhc2UgJ3lmb3YnOlxuXHRcdFx0XHRcdGNhc2UgJ3htYWcnOlxuXHRcdFx0XHRcdGNhc2UgJ3ltYWcnOlxuXHRcdFx0XHRcdGNhc2UgJ3puZWFyJzpcblx0XHRcdFx0XHRjYXNlICd6ZmFyJzpcblx0XHRcdFx0XHRjYXNlICdhc3BlY3RfcmF0aW8nOlxuXHRcdFx0XHRcdFx0ZGF0YVsgY2hpbGQubm9kZU5hbWUgXSA9IHBhcnNlRmxvYXQoIGNoaWxkLnRleHRDb250ZW50ICk7XG5cdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHR9XG5cblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGRhdGE7XG5cblx0XHR9XG5cblx0XHRmdW5jdGlvbiBidWlsZENhbWVyYSggZGF0YSApIHtcblxuXHRcdFx0dmFyIGNhbWVyYTtcblxuXHRcdFx0c3dpdGNoICggZGF0YS5vcHRpY3MudGVjaG5pcXVlICkge1xuXG5cdFx0XHRcdGNhc2UgJ3BlcnNwZWN0aXZlJzpcblx0XHRcdFx0XHRjYW1lcmEgPSBuZXcgUGVyc3BlY3RpdmVDYW1lcmEoXG5cdFx0XHRcdFx0XHRkYXRhLm9wdGljcy5wYXJhbWV0ZXJzLnlmb3YsXG5cdFx0XHRcdFx0XHRkYXRhLm9wdGljcy5wYXJhbWV0ZXJzLmFzcGVjdF9yYXRpbyxcblx0XHRcdFx0XHRcdGRhdGEub3B0aWNzLnBhcmFtZXRlcnMuem5lYXIsXG5cdFx0XHRcdFx0XHRkYXRhLm9wdGljcy5wYXJhbWV0ZXJzLnpmYXJcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdGNhc2UgJ29ydGhvZ3JhcGhpYyc6XG5cdFx0XHRcdFx0dmFyIHltYWcgPSBkYXRhLm9wdGljcy5wYXJhbWV0ZXJzLnltYWc7XG5cdFx0XHRcdFx0dmFyIHhtYWcgPSBkYXRhLm9wdGljcy5wYXJhbWV0ZXJzLnhtYWc7XG5cdFx0XHRcdFx0dmFyIGFzcGVjdFJhdGlvID0gZGF0YS5vcHRpY3MucGFyYW1ldGVycy5hc3BlY3RfcmF0aW87XG5cblx0XHRcdFx0XHR4bWFnID0gKCB4bWFnID09PSB1bmRlZmluZWQgKSA/ICggeW1hZyAqIGFzcGVjdFJhdGlvICkgOiB4bWFnO1xuXHRcdFx0XHRcdHltYWcgPSAoIHltYWcgPT09IHVuZGVmaW5lZCApID8gKCB4bWFnIC8gYXNwZWN0UmF0aW8gKSA6IHltYWc7XG5cblx0XHRcdFx0XHR4bWFnICo9IDAuNTtcblx0XHRcdFx0XHR5bWFnICo9IDAuNTtcblxuXHRcdFx0XHRcdGNhbWVyYSA9IG5ldyBPcnRob2dyYXBoaWNDYW1lcmEoXG5cdFx0XHRcdFx0XHQtIHhtYWcsIHhtYWcsIHltYWcsIC0geW1hZywgLy8gbGVmdCwgcmlnaHQsIHRvcCwgYm90dG9tXG5cdFx0XHRcdFx0XHRkYXRhLm9wdGljcy5wYXJhbWV0ZXJzLnpuZWFyLFxuXHRcdFx0XHRcdFx0ZGF0YS5vcHRpY3MucGFyYW1ldGVycy56ZmFyXG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRcdGNhbWVyYSA9IG5ldyBQZXJzcGVjdGl2ZUNhbWVyYSgpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHR9XG5cblx0XHRcdGNhbWVyYS5uYW1lID0gZGF0YS5uYW1lIHx8ICcnO1xuXG5cdFx0XHRyZXR1cm4gY2FtZXJhO1xuXG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gZ2V0Q2FtZXJhKCBpZCApIHtcblxuXHRcdFx0dmFyIGRhdGEgPSBsaWJyYXJ5LmNhbWVyYXNbIGlkIF07XG5cblx0XHRcdGlmICggZGF0YSAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRcdHJldHVybiBnZXRCdWlsZCggZGF0YSwgYnVpbGRDYW1lcmEgKTtcblxuXHRcdFx0fVxuXG5cdFx0XHRjb25zb2xlLndhcm4oICdUSFJFRS5Db2xsYWRhTG9hZGVyOiBDb3VsZG5cXCd0IGZpbmQgY2FtZXJhIHdpdGggSUQ6JywgaWQgKTtcblxuXHRcdFx0cmV0dXJuIG51bGw7XG5cblx0XHR9XG5cblx0XHQvLyBsaWdodFxuXG5cdFx0ZnVuY3Rpb24gcGFyc2VMaWdodCggeG1sICkge1xuXG5cdFx0XHR2YXIgZGF0YSA9IHt9O1xuXG5cdFx0XHRmb3IgKCB2YXIgaSA9IDAsIGwgPSB4bWwuY2hpbGROb2Rlcy5sZW5ndGg7IGkgPCBsOyBpICsrICkge1xuXG5cdFx0XHRcdHZhciBjaGlsZCA9IHhtbC5jaGlsZE5vZGVzWyBpIF07XG5cblx0XHRcdFx0aWYgKCBjaGlsZC5ub2RlVHlwZSAhPT0gMSApIGNvbnRpbnVlO1xuXG5cdFx0XHRcdHN3aXRjaCAoIGNoaWxkLm5vZGVOYW1lICkge1xuXG5cdFx0XHRcdFx0Y2FzZSAndGVjaG5pcXVlX2NvbW1vbic6XG5cdFx0XHRcdFx0XHRkYXRhID0gcGFyc2VMaWdodFRlY2huaXF1ZSggY2hpbGQgKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fVxuXG5cdFx0XHRsaWJyYXJ5LmxpZ2h0c1sgeG1sLmdldEF0dHJpYnV0ZSggJ2lkJyApIF0gPSBkYXRhO1xuXG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gcGFyc2VMaWdodFRlY2huaXF1ZSggeG1sICkge1xuXG5cdFx0XHR2YXIgZGF0YSA9IHt9O1xuXG5cdFx0XHRmb3IgKCB2YXIgaSA9IDAsIGwgPSB4bWwuY2hpbGROb2Rlcy5sZW5ndGg7IGkgPCBsOyBpICsrICkge1xuXG5cdFx0XHRcdHZhciBjaGlsZCA9IHhtbC5jaGlsZE5vZGVzWyBpIF07XG5cblx0XHRcdFx0aWYgKCBjaGlsZC5ub2RlVHlwZSAhPT0gMSApIGNvbnRpbnVlO1xuXG5cdFx0XHRcdHN3aXRjaCAoIGNoaWxkLm5vZGVOYW1lICkge1xuXG5cdFx0XHRcdFx0Y2FzZSAnZGlyZWN0aW9uYWwnOlxuXHRcdFx0XHRcdGNhc2UgJ3BvaW50Jzpcblx0XHRcdFx0XHRjYXNlICdzcG90Jzpcblx0XHRcdFx0XHRjYXNlICdhbWJpZW50JzpcblxuXHRcdFx0XHRcdFx0ZGF0YS50ZWNobmlxdWUgPSBjaGlsZC5ub2RlTmFtZTtcblx0XHRcdFx0XHRcdGRhdGEucGFyYW1ldGVycyA9IHBhcnNlTGlnaHRQYXJhbWV0ZXJzKCBjaGlsZCApO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gZGF0YTtcblxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIHBhcnNlTGlnaHRQYXJhbWV0ZXJzKCB4bWwgKSB7XG5cblx0XHRcdHZhciBkYXRhID0ge307XG5cblx0XHRcdGZvciAoIHZhciBpID0gMCwgbCA9IHhtbC5jaGlsZE5vZGVzLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG5cblx0XHRcdFx0dmFyIGNoaWxkID0geG1sLmNoaWxkTm9kZXNbIGkgXTtcblxuXHRcdFx0XHRpZiAoIGNoaWxkLm5vZGVUeXBlICE9PSAxICkgY29udGludWU7XG5cblx0XHRcdFx0c3dpdGNoICggY2hpbGQubm9kZU5hbWUgKSB7XG5cblx0XHRcdFx0XHRjYXNlICdjb2xvcic6XG5cdFx0XHRcdFx0XHR2YXIgYXJyYXkgPSBwYXJzZUZsb2F0cyggY2hpbGQudGV4dENvbnRlbnQgKTtcblx0XHRcdFx0XHRcdGRhdGEuY29sb3IgPSBuZXcgQ29sb3IoKS5mcm9tQXJyYXkoIGFycmF5ICk7XG5cdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdGNhc2UgJ2ZhbGxvZmZfYW5nbGUnOlxuXHRcdFx0XHRcdFx0ZGF0YS5mYWxsb2ZmQW5nbGUgPSBwYXJzZUZsb2F0KCBjaGlsZC50ZXh0Q29udGVudCApO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRjYXNlICdxdWFkcmF0aWNfYXR0ZW51YXRpb24nOlxuXHRcdFx0XHRcdFx0dmFyIGYgPSBwYXJzZUZsb2F0KCBjaGlsZC50ZXh0Q29udGVudCApO1xuXHRcdFx0XHRcdFx0ZGF0YS5kaXN0YW5jZSA9IGYgPyBNYXRoLnNxcnQoIDEgLyBmICkgOiAwO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBkYXRhO1xuXG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gYnVpbGRMaWdodCggZGF0YSApIHtcblxuXHRcdFx0dmFyIGxpZ2h0O1xuXG5cdFx0XHRzd2l0Y2ggKCBkYXRhLnRlY2huaXF1ZSApIHtcblxuXHRcdFx0XHRjYXNlICdkaXJlY3Rpb25hbCc6XG5cdFx0XHRcdFx0bGlnaHQgPSBuZXcgRGlyZWN0aW9uYWxMaWdodCgpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdGNhc2UgJ3BvaW50Jzpcblx0XHRcdFx0XHRsaWdodCA9IG5ldyBQb2ludExpZ2h0KCk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0Y2FzZSAnc3BvdCc6XG5cdFx0XHRcdFx0bGlnaHQgPSBuZXcgU3BvdExpZ2h0KCk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0Y2FzZSAnYW1iaWVudCc6XG5cdFx0XHRcdFx0bGlnaHQgPSBuZXcgQW1iaWVudExpZ2h0KCk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdH1cblxuXHRcdFx0aWYgKCBkYXRhLnBhcmFtZXRlcnMuY29sb3IgKSBsaWdodC5jb2xvci5jb3B5KCBkYXRhLnBhcmFtZXRlcnMuY29sb3IgKTtcblx0XHRcdGlmICggZGF0YS5wYXJhbWV0ZXJzLmRpc3RhbmNlICkgbGlnaHQuZGlzdGFuY2UgPSBkYXRhLnBhcmFtZXRlcnMuZGlzdGFuY2U7XG5cblx0XHRcdHJldHVybiBsaWdodDtcblxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGdldExpZ2h0KCBpZCApIHtcblxuXHRcdFx0dmFyIGRhdGEgPSBsaWJyYXJ5LmxpZ2h0c1sgaWQgXTtcblxuXHRcdFx0aWYgKCBkYXRhICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0cmV0dXJuIGdldEJ1aWxkKCBkYXRhLCBidWlsZExpZ2h0ICk7XG5cblx0XHRcdH1cblxuXHRcdFx0Y29uc29sZS53YXJuKCAnVEhSRUUuQ29sbGFkYUxvYWRlcjogQ291bGRuXFwndCBmaW5kIGxpZ2h0IHdpdGggSUQ6JywgaWQgKTtcblxuXHRcdFx0cmV0dXJuIG51bGw7XG5cblx0XHR9XG5cblx0XHQvLyBnZW9tZXRyeVxuXG5cdFx0ZnVuY3Rpb24gcGFyc2VHZW9tZXRyeSggeG1sICkge1xuXG5cdFx0XHR2YXIgZGF0YSA9IHtcblx0XHRcdFx0bmFtZTogeG1sLmdldEF0dHJpYnV0ZSggJ25hbWUnICksXG5cdFx0XHRcdHNvdXJjZXM6IHt9LFxuXHRcdFx0XHR2ZXJ0aWNlczoge30sXG5cdFx0XHRcdHByaW1pdGl2ZXM6IFtdXG5cdFx0XHR9O1xuXG5cdFx0XHR2YXIgbWVzaCA9IGdldEVsZW1lbnRzQnlUYWdOYW1lKCB4bWwsICdtZXNoJyApWyAwIF07XG5cblx0XHRcdC8vIHRoZSBmb2xsb3dpbmcgdGFncyBpbnNpZGUgZ2VvbWV0cnkgYXJlIG5vdCBzdXBwb3J0ZWQgeWV0IChzZWUgaHR0cHM6Ly9naXRodWIuY29tL21yZG9vYi90aHJlZS5qcy9wdWxsLzEyNjA2KTogY29udmV4X21lc2gsIHNwbGluZSwgYnJlcFxuXHRcdFx0aWYgKCBtZXNoID09PSB1bmRlZmluZWQgKSByZXR1cm47XG5cblx0XHRcdGZvciAoIHZhciBpID0gMDsgaSA8IG1lc2guY2hpbGROb2Rlcy5sZW5ndGg7IGkgKysgKSB7XG5cblx0XHRcdFx0dmFyIGNoaWxkID0gbWVzaC5jaGlsZE5vZGVzWyBpIF07XG5cblx0XHRcdFx0aWYgKCBjaGlsZC5ub2RlVHlwZSAhPT0gMSApIGNvbnRpbnVlO1xuXG5cdFx0XHRcdHZhciBpZCA9IGNoaWxkLmdldEF0dHJpYnV0ZSggJ2lkJyApO1xuXG5cdFx0XHRcdHN3aXRjaCAoIGNoaWxkLm5vZGVOYW1lICkge1xuXG5cdFx0XHRcdFx0Y2FzZSAnc291cmNlJzpcblx0XHRcdFx0XHRcdGRhdGEuc291cmNlc1sgaWQgXSA9IHBhcnNlU291cmNlKCBjaGlsZCApO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRjYXNlICd2ZXJ0aWNlcyc6XG5cdFx0XHRcdFx0XHQvLyBkYXRhLnNvdXJjZXNbIGlkIF0gPSBkYXRhLnNvdXJjZXNbIHBhcnNlSWQoIGdldEVsZW1lbnRzQnlUYWdOYW1lKCBjaGlsZCwgJ2lucHV0JyApWyAwIF0uZ2V0QXR0cmlidXRlKCAnc291cmNlJyApICkgXTtcblx0XHRcdFx0XHRcdGRhdGEudmVydGljZXMgPSBwYXJzZUdlb21ldHJ5VmVydGljZXMoIGNoaWxkICk7XG5cdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdGNhc2UgJ3BvbHlnb25zJzpcblx0XHRcdFx0XHRcdGNvbnNvbGUud2FybiggJ1RIUkVFLkNvbGxhZGFMb2FkZXI6IFVuc3VwcG9ydGVkIHByaW1pdGl2ZSB0eXBlOiAnLCBjaGlsZC5ub2RlTmFtZSApO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRjYXNlICdsaW5lcyc6XG5cdFx0XHRcdFx0Y2FzZSAnbGluZXN0cmlwcyc6XG5cdFx0XHRcdFx0Y2FzZSAncG9seWxpc3QnOlxuXHRcdFx0XHRcdGNhc2UgJ3RyaWFuZ2xlcyc6XG5cdFx0XHRcdFx0XHRkYXRhLnByaW1pdGl2ZXMucHVzaCggcGFyc2VHZW9tZXRyeVByaW1pdGl2ZSggY2hpbGQgKSApO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2coIGNoaWxkICk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9XG5cblx0XHRcdGxpYnJhcnkuZ2VvbWV0cmllc1sgeG1sLmdldEF0dHJpYnV0ZSggJ2lkJyApIF0gPSBkYXRhO1xuXG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gcGFyc2VTb3VyY2UoIHhtbCApIHtcblxuXHRcdFx0dmFyIGRhdGEgPSB7XG5cdFx0XHRcdGFycmF5OiBbXSxcblx0XHRcdFx0c3RyaWRlOiAzXG5cdFx0XHR9O1xuXG5cdFx0XHRmb3IgKCB2YXIgaSA9IDA7IGkgPCB4bWwuY2hpbGROb2Rlcy5sZW5ndGg7IGkgKysgKSB7XG5cblx0XHRcdFx0dmFyIGNoaWxkID0geG1sLmNoaWxkTm9kZXNbIGkgXTtcblxuXHRcdFx0XHRpZiAoIGNoaWxkLm5vZGVUeXBlICE9PSAxICkgY29udGludWU7XG5cblx0XHRcdFx0c3dpdGNoICggY2hpbGQubm9kZU5hbWUgKSB7XG5cblx0XHRcdFx0XHRjYXNlICdmbG9hdF9hcnJheSc6XG5cdFx0XHRcdFx0XHRkYXRhLmFycmF5ID0gcGFyc2VGbG9hdHMoIGNoaWxkLnRleHRDb250ZW50ICk7XG5cdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdGNhc2UgJ05hbWVfYXJyYXknOlxuXHRcdFx0XHRcdFx0ZGF0YS5hcnJheSA9IHBhcnNlU3RyaW5ncyggY2hpbGQudGV4dENvbnRlbnQgKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0Y2FzZSAndGVjaG5pcXVlX2NvbW1vbic6XG5cdFx0XHRcdFx0XHR2YXIgYWNjZXNzb3IgPSBnZXRFbGVtZW50c0J5VGFnTmFtZSggY2hpbGQsICdhY2Nlc3NvcicgKVsgMCBdO1xuXG5cdFx0XHRcdFx0XHRpZiAoIGFjY2Vzc29yICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0XHRcdFx0ZGF0YS5zdHJpZGUgPSBwYXJzZUludCggYWNjZXNzb3IuZ2V0QXR0cmlidXRlKCAnc3RyaWRlJyApICk7XG5cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBkYXRhO1xuXG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gcGFyc2VHZW9tZXRyeVZlcnRpY2VzKCB4bWwgKSB7XG5cblx0XHRcdHZhciBkYXRhID0ge307XG5cblx0XHRcdGZvciAoIHZhciBpID0gMDsgaSA8IHhtbC5jaGlsZE5vZGVzLmxlbmd0aDsgaSArKyApIHtcblxuXHRcdFx0XHR2YXIgY2hpbGQgPSB4bWwuY2hpbGROb2Rlc1sgaSBdO1xuXG5cdFx0XHRcdGlmICggY2hpbGQubm9kZVR5cGUgIT09IDEgKSBjb250aW51ZTtcblxuXHRcdFx0XHRkYXRhWyBjaGlsZC5nZXRBdHRyaWJ1dGUoICdzZW1hbnRpYycgKSBdID0gcGFyc2VJZCggY2hpbGQuZ2V0QXR0cmlidXRlKCAnc291cmNlJyApICk7XG5cblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGRhdGE7XG5cblx0XHR9XG5cblx0XHRmdW5jdGlvbiBwYXJzZUdlb21ldHJ5UHJpbWl0aXZlKCB4bWwgKSB7XG5cblx0XHRcdHZhciBwcmltaXRpdmUgPSB7XG5cdFx0XHRcdHR5cGU6IHhtbC5ub2RlTmFtZSxcblx0XHRcdFx0bWF0ZXJpYWw6IHhtbC5nZXRBdHRyaWJ1dGUoICdtYXRlcmlhbCcgKSxcblx0XHRcdFx0Y291bnQ6IHBhcnNlSW50KCB4bWwuZ2V0QXR0cmlidXRlKCAnY291bnQnICkgKSxcblx0XHRcdFx0aW5wdXRzOiB7fSxcblx0XHRcdFx0c3RyaWRlOiAwLFxuXHRcdFx0XHRoYXNVVjogZmFsc2Vcblx0XHRcdH07XG5cblx0XHRcdGZvciAoIHZhciBpID0gMCwgbCA9IHhtbC5jaGlsZE5vZGVzLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG5cblx0XHRcdFx0dmFyIGNoaWxkID0geG1sLmNoaWxkTm9kZXNbIGkgXTtcblxuXHRcdFx0XHRpZiAoIGNoaWxkLm5vZGVUeXBlICE9PSAxICkgY29udGludWU7XG5cblx0XHRcdFx0c3dpdGNoICggY2hpbGQubm9kZU5hbWUgKSB7XG5cblx0XHRcdFx0XHRjYXNlICdpbnB1dCc6XG5cdFx0XHRcdFx0XHR2YXIgaWQgPSBwYXJzZUlkKCBjaGlsZC5nZXRBdHRyaWJ1dGUoICdzb3VyY2UnICkgKTtcblx0XHRcdFx0XHRcdHZhciBzZW1hbnRpYyA9IGNoaWxkLmdldEF0dHJpYnV0ZSggJ3NlbWFudGljJyApO1xuXHRcdFx0XHRcdFx0dmFyIG9mZnNldCA9IHBhcnNlSW50KCBjaGlsZC5nZXRBdHRyaWJ1dGUoICdvZmZzZXQnICkgKTtcblx0XHRcdFx0XHRcdHZhciBzZXQgPSBwYXJzZUludCggY2hpbGQuZ2V0QXR0cmlidXRlKCAnc2V0JyApICk7XG5cdFx0XHRcdFx0XHR2YXIgaW5wdXRuYW1lID0gKCBzZXQgPiAwID8gc2VtYW50aWMgKyBzZXQgOiBzZW1hbnRpYyApO1xuXHRcdFx0XHRcdFx0cHJpbWl0aXZlLmlucHV0c1sgaW5wdXRuYW1lIF0gPSB7IGlkOiBpZCwgb2Zmc2V0OiBvZmZzZXQgfTtcblx0XHRcdFx0XHRcdHByaW1pdGl2ZS5zdHJpZGUgPSBNYXRoLm1heCggcHJpbWl0aXZlLnN0cmlkZSwgb2Zmc2V0ICsgMSApO1xuXHRcdFx0XHRcdFx0aWYgKCBzZW1hbnRpYyA9PT0gJ1RFWENPT1JEJyApIHByaW1pdGl2ZS5oYXNVViA9IHRydWU7XG5cdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdGNhc2UgJ3Zjb3VudCc6XG5cdFx0XHRcdFx0XHRwcmltaXRpdmUudmNvdW50ID0gcGFyc2VJbnRzKCBjaGlsZC50ZXh0Q29udGVudCApO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRjYXNlICdwJzpcblx0XHRcdFx0XHRcdHByaW1pdGl2ZS5wID0gcGFyc2VJbnRzKCBjaGlsZC50ZXh0Q29udGVudCApO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBwcmltaXRpdmU7XG5cblx0XHR9XG5cblx0XHRmdW5jdGlvbiBncm91cFByaW1pdGl2ZXMoIHByaW1pdGl2ZXMgKSB7XG5cblx0XHRcdHZhciBidWlsZCA9IHt9O1xuXG5cdFx0XHRmb3IgKCB2YXIgaSA9IDA7IGkgPCBwcmltaXRpdmVzLmxlbmd0aDsgaSArKyApIHtcblxuXHRcdFx0XHR2YXIgcHJpbWl0aXZlID0gcHJpbWl0aXZlc1sgaSBdO1xuXG5cdFx0XHRcdGlmICggYnVpbGRbIHByaW1pdGl2ZS50eXBlIF0gPT09IHVuZGVmaW5lZCApIGJ1aWxkWyBwcmltaXRpdmUudHlwZSBdID0gW107XG5cblx0XHRcdFx0YnVpbGRbIHByaW1pdGl2ZS50eXBlIF0ucHVzaCggcHJpbWl0aXZlICk7XG5cblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGJ1aWxkO1xuXG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gY2hlY2tVVkNvb3JkaW5hdGVzKCBwcmltaXRpdmVzICkge1xuXG5cdFx0XHR2YXIgY291bnQgPSAwO1xuXG5cdFx0XHRmb3IgKCB2YXIgaSA9IDAsIGwgPSBwcmltaXRpdmVzLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG5cblx0XHRcdFx0dmFyIHByaW1pdGl2ZSA9IHByaW1pdGl2ZXNbIGkgXTtcblxuXHRcdFx0XHRpZiAoIHByaW1pdGl2ZS5oYXNVViA9PT0gdHJ1ZSApIHtcblxuXHRcdFx0XHRcdGNvdW50ICsrO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIGNvdW50ID4gMCAmJiBjb3VudCA8IHByaW1pdGl2ZXMubGVuZ3RoICkge1xuXG5cdFx0XHRcdHByaW1pdGl2ZXMudXZzTmVlZHNGaXggPSB0cnVlO1xuXG5cdFx0XHR9XG5cblx0XHR9XG5cblx0XHRmdW5jdGlvbiBidWlsZEdlb21ldHJ5KCBkYXRhICkge1xuXG5cdFx0XHR2YXIgYnVpbGQgPSB7fTtcblxuXHRcdFx0dmFyIHNvdXJjZXMgPSBkYXRhLnNvdXJjZXM7XG5cdFx0XHR2YXIgdmVydGljZXMgPSBkYXRhLnZlcnRpY2VzO1xuXHRcdFx0dmFyIHByaW1pdGl2ZXMgPSBkYXRhLnByaW1pdGl2ZXM7XG5cblx0XHRcdGlmICggcHJpbWl0aXZlcy5sZW5ndGggPT09IDAgKSByZXR1cm4ge307XG5cblx0XHRcdC8vIG91ciBnb2FsIGlzIHRvIGNyZWF0ZSBvbmUgYnVmZmVyIGdlb21ldHJ5IGZvciBhIHNpbmdsZSB0eXBlIG9mIHByaW1pdGl2ZXNcblx0XHRcdC8vIGZpcnN0LCB3ZSBncm91cCBhbGwgcHJpbWl0aXZlcyBieSB0aGVpciB0eXBlXG5cblx0XHRcdHZhciBncm91cGVkUHJpbWl0aXZlcyA9IGdyb3VwUHJpbWl0aXZlcyggcHJpbWl0aXZlcyApO1xuXG5cdFx0XHRmb3IgKCB2YXIgdHlwZSBpbiBncm91cGVkUHJpbWl0aXZlcyApIHtcblxuXHRcdFx0XHR2YXIgcHJpbWl0aXZlVHlwZSA9IGdyb3VwZWRQcmltaXRpdmVzWyB0eXBlIF07XG5cblx0XHRcdFx0Ly8gc2Vjb25kLCBlbnN1cmUgY29uc2lzdGVudCB1diBjb29yZGluYXRlcyBmb3IgZWFjaCB0eXBlIG9mIHByaW1pdGl2ZXMgKHBvbHlsaXN0LHRyaWFuZ2xlcyBvciBsaW5lcylcblxuXHRcdFx0XHRjaGVja1VWQ29vcmRpbmF0ZXMoIHByaW1pdGl2ZVR5cGUgKTtcblxuXHRcdFx0XHQvLyB0aGlyZCwgY3JlYXRlIGEgYnVmZmVyIGdlb21ldHJ5IGZvciBlYWNoIHR5cGUgb2YgcHJpbWl0aXZlc1xuXG5cdFx0XHRcdGJ1aWxkWyB0eXBlIF0gPSBidWlsZEdlb21ldHJ5VHlwZSggcHJpbWl0aXZlVHlwZSwgc291cmNlcywgdmVydGljZXMgKTtcblxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gYnVpbGQ7XG5cblx0XHR9XG5cblx0XHRmdW5jdGlvbiBidWlsZEdlb21ldHJ5VHlwZSggcHJpbWl0aXZlcywgc291cmNlcywgdmVydGljZXMgKSB7XG5cblx0XHRcdHZhciBidWlsZCA9IHt9O1xuXG5cdFx0XHR2YXIgcG9zaXRpb24gPSB7IGFycmF5OiBbXSwgc3RyaWRlOiAwIH07XG5cdFx0XHR2YXIgbm9ybWFsID0geyBhcnJheTogW10sIHN0cmlkZTogMCB9O1xuXHRcdFx0dmFyIHV2ID0geyBhcnJheTogW10sIHN0cmlkZTogMCB9O1xuXHRcdFx0dmFyIHV2MiA9IHsgYXJyYXk6IFtdLCBzdHJpZGU6IDAgfTtcblx0XHRcdHZhciBjb2xvciA9IHsgYXJyYXk6IFtdLCBzdHJpZGU6IDAgfTtcblxuXHRcdFx0dmFyIHNraW5JbmRleCA9IHsgYXJyYXk6IFtdLCBzdHJpZGU6IDQgfTtcblx0XHRcdHZhciBza2luV2VpZ2h0ID0geyBhcnJheTogW10sIHN0cmlkZTogNCB9O1xuXG5cdFx0XHR2YXIgZ2VvbWV0cnkgPSBuZXcgQnVmZmVyR2VvbWV0cnkoKTtcblxuXHRcdFx0dmFyIG1hdGVyaWFsS2V5cyA9IFtdO1xuXG5cdFx0XHR2YXIgc3RhcnQgPSAwO1xuXG5cdFx0XHRmb3IgKCB2YXIgcCA9IDA7IHAgPCBwcmltaXRpdmVzLmxlbmd0aDsgcCArKyApIHtcblxuXHRcdFx0XHR2YXIgcHJpbWl0aXZlID0gcHJpbWl0aXZlc1sgcCBdO1xuXHRcdFx0XHR2YXIgaW5wdXRzID0gcHJpbWl0aXZlLmlucHV0cztcblxuXHRcdFx0XHQvLyBncm91cHNcblxuXHRcdFx0XHR2YXIgY291bnQgPSAwO1xuXG5cdFx0XHRcdHN3aXRjaCAoIHByaW1pdGl2ZS50eXBlICkge1xuXG5cdFx0XHRcdFx0Y2FzZSAnbGluZXMnOlxuXHRcdFx0XHRcdGNhc2UgJ2xpbmVzdHJpcHMnOlxuXHRcdFx0XHRcdFx0Y291bnQgPSBwcmltaXRpdmUuY291bnQgKiAyO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRjYXNlICd0cmlhbmdsZXMnOlxuXHRcdFx0XHRcdFx0Y291bnQgPSBwcmltaXRpdmUuY291bnQgKiAzO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRjYXNlICdwb2x5bGlzdCc6XG5cblx0XHRcdFx0XHRcdGZvciAoIHZhciBnID0gMDsgZyA8IHByaW1pdGl2ZS5jb3VudDsgZyArKyApIHtcblxuXHRcdFx0XHRcdFx0XHR2YXIgdmMgPSBwcmltaXRpdmUudmNvdW50WyBnIF07XG5cblx0XHRcdFx0XHRcdFx0c3dpdGNoICggdmMgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHRjYXNlIDM6XG5cdFx0XHRcdFx0XHRcdFx0XHRjb3VudCArPSAzOyAvLyBzaW5nbGUgdHJpYW5nbGVcblx0XHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0XHRcdFx0Y2FzZSA0OlxuXHRcdFx0XHRcdFx0XHRcdFx0Y291bnQgKz0gNjsgLy8gcXVhZCwgc3ViZGl2aWRlZCBpbnRvIHR3byB0cmlhbmdsZXNcblx0XHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHRcdFx0XHRcdGNvdW50ICs9ICggdmMgLSAyICkgKiAzOyAvLyBwb2x5bGlzdCB3aXRoIG1vcmUgdGhhbiBmb3VyIHZlcnRpY2VzXG5cdFx0XHRcdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRcdFx0Y29uc29sZS53YXJuKCAnVEhSRUUuQ29sbGFkYUxvYWRlcjogVW5rbm93IHByaW1pdGl2ZSB0eXBlOicsIHByaW1pdGl2ZS50eXBlICk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdGdlb21ldHJ5LmFkZEdyb3VwKCBzdGFydCwgY291bnQsIHAgKTtcblx0XHRcdFx0c3RhcnQgKz0gY291bnQ7XG5cblx0XHRcdFx0Ly8gbWF0ZXJpYWxcblxuXHRcdFx0XHRpZiAoIHByaW1pdGl2ZS5tYXRlcmlhbCApIHtcblxuXHRcdFx0XHRcdG1hdGVyaWFsS2V5cy5wdXNoKCBwcmltaXRpdmUubWF0ZXJpYWwgKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gZ2VvbWV0cnkgZGF0YVxuXG5cdFx0XHRcdGZvciAoIHZhciBuYW1lIGluIGlucHV0cyApIHtcblxuXHRcdFx0XHRcdHZhciBpbnB1dCA9IGlucHV0c1sgbmFtZSBdO1xuXG5cdFx0XHRcdFx0c3dpdGNoICggbmFtZSApXHR7XG5cblx0XHRcdFx0XHRcdGNhc2UgJ1ZFUlRFWCc6XG5cdFx0XHRcdFx0XHRcdGZvciAoIHZhciBrZXkgaW4gdmVydGljZXMgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHR2YXIgaWQgPSB2ZXJ0aWNlc1sga2V5IF07XG5cblx0XHRcdFx0XHRcdFx0XHRzd2l0Y2ggKCBrZXkgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHRcdGNhc2UgJ1BPU0lUSU9OJzpcblx0XHRcdFx0XHRcdFx0XHRcdFx0dmFyIHByZXZMZW5ndGggPSBwb3NpdGlvbi5hcnJheS5sZW5ndGg7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGJ1aWxkR2VvbWV0cnlEYXRhKCBwcmltaXRpdmUsIHNvdXJjZXNbIGlkIF0sIGlucHV0Lm9mZnNldCwgcG9zaXRpb24uYXJyYXkgKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0cG9zaXRpb24uc3RyaWRlID0gc291cmNlc1sgaWQgXS5zdHJpZGU7XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKCBzb3VyY2VzLnNraW5XZWlnaHRzICYmIHNvdXJjZXMuc2tpbkluZGljZXMgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRidWlsZEdlb21ldHJ5RGF0YSggcHJpbWl0aXZlLCBzb3VyY2VzLnNraW5JbmRpY2VzLCBpbnB1dC5vZmZzZXQsIHNraW5JbmRleC5hcnJheSApO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGJ1aWxkR2VvbWV0cnlEYXRhKCBwcmltaXRpdmUsIHNvdXJjZXMuc2tpbldlaWdodHMsIGlucHV0Lm9mZnNldCwgc2tpbldlaWdodC5hcnJheSApO1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBzZWUgIzM4MDNcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoIHByaW1pdGl2ZS5oYXNVViA9PT0gZmFsc2UgJiYgcHJpbWl0aXZlcy51dnNOZWVkc0ZpeCA9PT0gdHJ1ZSApIHtcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZhciBjb3VudCA9ICggcG9zaXRpb24uYXJyYXkubGVuZ3RoIC0gcHJldkxlbmd0aCApIC8gcG9zaXRpb24uc3RyaWRlO1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Zm9yICggdmFyIGkgPSAwOyBpIDwgY291bnQ7IGkgKysgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIGZpbGwgbWlzc2luZyB1diBjb29yZGluYXRlc1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR1di5hcnJheS5wdXNoKCAwLCAwICk7XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRjYXNlICdOT1JNQUwnOlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRidWlsZEdlb21ldHJ5RGF0YSggcHJpbWl0aXZlLCBzb3VyY2VzWyBpZCBdLCBpbnB1dC5vZmZzZXQsIG5vcm1hbC5hcnJheSApO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRub3JtYWwuc3RyaWRlID0gc291cmNlc1sgaWQgXS5zdHJpZGU7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRjYXNlICdDT0xPUic6XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGJ1aWxkR2VvbWV0cnlEYXRhKCBwcmltaXRpdmUsIHNvdXJjZXNbIGlkIF0sIGlucHV0Lm9mZnNldCwgY29sb3IuYXJyYXkgKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y29sb3Iuc3RyaWRlID0gc291cmNlc1sgaWQgXS5zdHJpZGU7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRjYXNlICdURVhDT09SRCc6XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGJ1aWxkR2VvbWV0cnlEYXRhKCBwcmltaXRpdmUsIHNvdXJjZXNbIGlkIF0sIGlucHV0Lm9mZnNldCwgdXYuYXJyYXkgKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0dXYuc3RyaWRlID0gc291cmNlc1sgaWQgXS5zdHJpZGU7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRjYXNlICdURVhDT09SRDEnOlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRidWlsZEdlb21ldHJ5RGF0YSggcHJpbWl0aXZlLCBzb3VyY2VzWyBpZCBdLCBpbnB1dC5vZmZzZXQsIHV2Mi5hcnJheSApO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR1di5zdHJpZGUgPSBzb3VyY2VzWyBpZCBdLnN0cmlkZTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRcdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnNvbGUud2FybiggJ1RIUkVFLkNvbGxhZGFMb2FkZXI6IFNlbWFudGljIFwiJXNcIiBub3QgaGFuZGxlZCBpbiBnZW9tZXRyeSBidWlsZCBwcm9jZXNzLicsIGtleSApO1xuXG5cdFx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdFx0Y2FzZSAnTk9STUFMJzpcblx0XHRcdFx0XHRcdFx0YnVpbGRHZW9tZXRyeURhdGEoIHByaW1pdGl2ZSwgc291cmNlc1sgaW5wdXQuaWQgXSwgaW5wdXQub2Zmc2V0LCBub3JtYWwuYXJyYXkgKTtcblx0XHRcdFx0XHRcdFx0bm9ybWFsLnN0cmlkZSA9IHNvdXJjZXNbIGlucHV0LmlkIF0uc3RyaWRlO1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdFx0Y2FzZSAnQ09MT1InOlxuXHRcdFx0XHRcdFx0XHRidWlsZEdlb21ldHJ5RGF0YSggcHJpbWl0aXZlLCBzb3VyY2VzWyBpbnB1dC5pZCBdLCBpbnB1dC5vZmZzZXQsIGNvbG9yLmFycmF5ICk7XG5cdFx0XHRcdFx0XHRcdGNvbG9yLnN0cmlkZSA9IHNvdXJjZXNbIGlucHV0LmlkIF0uc3RyaWRlO1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdFx0Y2FzZSAnVEVYQ09PUkQnOlxuXHRcdFx0XHRcdFx0XHRidWlsZEdlb21ldHJ5RGF0YSggcHJpbWl0aXZlLCBzb3VyY2VzWyBpbnB1dC5pZCBdLCBpbnB1dC5vZmZzZXQsIHV2LmFycmF5ICk7XG5cdFx0XHRcdFx0XHRcdHV2LnN0cmlkZSA9IHNvdXJjZXNbIGlucHV0LmlkIF0uc3RyaWRlO1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdFx0Y2FzZSAnVEVYQ09PUkQxJzpcblx0XHRcdFx0XHRcdFx0YnVpbGRHZW9tZXRyeURhdGEoIHByaW1pdGl2ZSwgc291cmNlc1sgaW5wdXQuaWQgXSwgaW5wdXQub2Zmc2V0LCB1djIuYXJyYXkgKTtcblx0XHRcdFx0XHRcdFx0dXYyLnN0cmlkZSA9IHNvdXJjZXNbIGlucHV0LmlkIF0uc3RyaWRlO1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHR9XG5cblx0XHRcdH1cblxuXHRcdFx0Ly8gYnVpbGQgZ2VvbWV0cnlcblxuXHRcdFx0aWYgKCBwb3NpdGlvbi5hcnJheS5sZW5ndGggPiAwICkgZ2VvbWV0cnkuc2V0QXR0cmlidXRlKCAncG9zaXRpb24nLCBuZXcgRmxvYXQzMkJ1ZmZlckF0dHJpYnV0ZSggcG9zaXRpb24uYXJyYXksIHBvc2l0aW9uLnN0cmlkZSApICk7XG5cdFx0XHRpZiAoIG5vcm1hbC5hcnJheS5sZW5ndGggPiAwICkgZ2VvbWV0cnkuc2V0QXR0cmlidXRlKCAnbm9ybWFsJywgbmV3IEZsb2F0MzJCdWZmZXJBdHRyaWJ1dGUoIG5vcm1hbC5hcnJheSwgbm9ybWFsLnN0cmlkZSApICk7XG5cdFx0XHRpZiAoIGNvbG9yLmFycmF5Lmxlbmd0aCA+IDAgKSBnZW9tZXRyeS5zZXRBdHRyaWJ1dGUoICdjb2xvcicsIG5ldyBGbG9hdDMyQnVmZmVyQXR0cmlidXRlKCBjb2xvci5hcnJheSwgY29sb3Iuc3RyaWRlICkgKTtcblx0XHRcdGlmICggdXYuYXJyYXkubGVuZ3RoID4gMCApIGdlb21ldHJ5LnNldEF0dHJpYnV0ZSggJ3V2JywgbmV3IEZsb2F0MzJCdWZmZXJBdHRyaWJ1dGUoIHV2LmFycmF5LCB1di5zdHJpZGUgKSApO1xuXHRcdFx0aWYgKCB1djIuYXJyYXkubGVuZ3RoID4gMCApIGdlb21ldHJ5LnNldEF0dHJpYnV0ZSggJ3V2MicsIG5ldyBGbG9hdDMyQnVmZmVyQXR0cmlidXRlKCB1djIuYXJyYXksIHV2Mi5zdHJpZGUgKSApO1xuXG5cdFx0XHRpZiAoIHNraW5JbmRleC5hcnJheS5sZW5ndGggPiAwICkgZ2VvbWV0cnkuc2V0QXR0cmlidXRlKCAnc2tpbkluZGV4JywgbmV3IEZsb2F0MzJCdWZmZXJBdHRyaWJ1dGUoIHNraW5JbmRleC5hcnJheSwgc2tpbkluZGV4LnN0cmlkZSApICk7XG5cdFx0XHRpZiAoIHNraW5XZWlnaHQuYXJyYXkubGVuZ3RoID4gMCApIGdlb21ldHJ5LnNldEF0dHJpYnV0ZSggJ3NraW5XZWlnaHQnLCBuZXcgRmxvYXQzMkJ1ZmZlckF0dHJpYnV0ZSggc2tpbldlaWdodC5hcnJheSwgc2tpbldlaWdodC5zdHJpZGUgKSApO1xuXG5cdFx0XHRidWlsZC5kYXRhID0gZ2VvbWV0cnk7XG5cdFx0XHRidWlsZC50eXBlID0gcHJpbWl0aXZlc1sgMCBdLnR5cGU7XG5cdFx0XHRidWlsZC5tYXRlcmlhbEtleXMgPSBtYXRlcmlhbEtleXM7XG5cblx0XHRcdHJldHVybiBidWlsZDtcblxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGJ1aWxkR2VvbWV0cnlEYXRhKCBwcmltaXRpdmUsIHNvdXJjZSwgb2Zmc2V0LCBhcnJheSApIHtcblxuXHRcdFx0dmFyIGluZGljZXMgPSBwcmltaXRpdmUucDtcblx0XHRcdHZhciBzdHJpZGUgPSBwcmltaXRpdmUuc3RyaWRlO1xuXHRcdFx0dmFyIHZjb3VudCA9IHByaW1pdGl2ZS52Y291bnQ7XG5cblx0XHRcdGZ1bmN0aW9uIHB1c2hWZWN0b3IoIGkgKSB7XG5cblx0XHRcdFx0dmFyIGluZGV4ID0gaW5kaWNlc1sgaSArIG9mZnNldCBdICogc291cmNlU3RyaWRlO1xuXHRcdFx0XHR2YXIgbGVuZ3RoID0gaW5kZXggKyBzb3VyY2VTdHJpZGU7XG5cblx0XHRcdFx0Zm9yICggOyBpbmRleCA8IGxlbmd0aDsgaW5kZXggKysgKSB7XG5cblx0XHRcdFx0XHRhcnJheS5wdXNoKCBzb3VyY2VBcnJheVsgaW5kZXggXSApO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fVxuXG5cdFx0XHR2YXIgc291cmNlQXJyYXkgPSBzb3VyY2UuYXJyYXk7XG5cdFx0XHR2YXIgc291cmNlU3RyaWRlID0gc291cmNlLnN0cmlkZTtcblxuXHRcdFx0aWYgKCBwcmltaXRpdmUudmNvdW50ICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0dmFyIGluZGV4ID0gMDtcblxuXHRcdFx0XHRmb3IgKCB2YXIgaSA9IDAsIGwgPSB2Y291bnQubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcblxuXHRcdFx0XHRcdHZhciBjb3VudCA9IHZjb3VudFsgaSBdO1xuXG5cdFx0XHRcdFx0aWYgKCBjb3VudCA9PT0gNCApIHtcblxuXHRcdFx0XHRcdFx0dmFyIGEgPSBpbmRleCArIHN0cmlkZSAqIDA7XG5cdFx0XHRcdFx0XHR2YXIgYiA9IGluZGV4ICsgc3RyaWRlICogMTtcblx0XHRcdFx0XHRcdHZhciBjID0gaW5kZXggKyBzdHJpZGUgKiAyO1xuXHRcdFx0XHRcdFx0dmFyIGQgPSBpbmRleCArIHN0cmlkZSAqIDM7XG5cblx0XHRcdFx0XHRcdHB1c2hWZWN0b3IoIGEgKTsgcHVzaFZlY3RvciggYiApOyBwdXNoVmVjdG9yKCBkICk7XG5cdFx0XHRcdFx0XHRwdXNoVmVjdG9yKCBiICk7IHB1c2hWZWN0b3IoIGMgKTsgcHVzaFZlY3RvciggZCApO1xuXG5cdFx0XHRcdFx0fSBlbHNlIGlmICggY291bnQgPT09IDMgKSB7XG5cblx0XHRcdFx0XHRcdHZhciBhID0gaW5kZXggKyBzdHJpZGUgKiAwO1xuXHRcdFx0XHRcdFx0dmFyIGIgPSBpbmRleCArIHN0cmlkZSAqIDE7XG5cdFx0XHRcdFx0XHR2YXIgYyA9IGluZGV4ICsgc3RyaWRlICogMjtcblxuXHRcdFx0XHRcdFx0cHVzaFZlY3RvciggYSApOyBwdXNoVmVjdG9yKCBiICk7IHB1c2hWZWN0b3IoIGMgKTtcblxuXHRcdFx0XHRcdH0gZWxzZSBpZiAoIGNvdW50ID4gNCApIHtcblxuXHRcdFx0XHRcdFx0Zm9yICggdmFyIGsgPSAxLCBrbCA9ICggY291bnQgLSAyICk7IGsgPD0ga2w7IGsgKysgKSB7XG5cblx0XHRcdFx0XHRcdFx0dmFyIGEgPSBpbmRleCArIHN0cmlkZSAqIDA7XG5cdFx0XHRcdFx0XHRcdHZhciBiID0gaW5kZXggKyBzdHJpZGUgKiBrO1xuXHRcdFx0XHRcdFx0XHR2YXIgYyA9IGluZGV4ICsgc3RyaWRlICogKCBrICsgMSApO1xuXG5cdFx0XHRcdFx0XHRcdHB1c2hWZWN0b3IoIGEgKTsgcHVzaFZlY3RvciggYiApOyBwdXNoVmVjdG9yKCBjICk7XG5cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGluZGV4ICs9IHN0cmlkZSAqIGNvdW50O1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRmb3IgKCB2YXIgaSA9IDAsIGwgPSBpbmRpY2VzLmxlbmd0aDsgaSA8IGw7IGkgKz0gc3RyaWRlICkge1xuXG5cdFx0XHRcdFx0cHVzaFZlY3RvciggaSApO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fVxuXG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gZ2V0R2VvbWV0cnkoIGlkICkge1xuXG5cdFx0XHRyZXR1cm4gZ2V0QnVpbGQoIGxpYnJhcnkuZ2VvbWV0cmllc1sgaWQgXSwgYnVpbGRHZW9tZXRyeSApO1xuXG5cdFx0fVxuXG5cdFx0Ly8ga2luZW1hdGljc1xuXG5cdFx0ZnVuY3Rpb24gcGFyc2VLaW5lbWF0aWNzTW9kZWwoIHhtbCApIHtcblxuXHRcdFx0dmFyIGRhdGEgPSB7XG5cdFx0XHRcdG5hbWU6IHhtbC5nZXRBdHRyaWJ1dGUoICduYW1lJyApIHx8ICcnLFxuXHRcdFx0XHRqb2ludHM6IHt9LFxuXHRcdFx0XHRsaW5rczogW11cblx0XHRcdH07XG5cblx0XHRcdGZvciAoIHZhciBpID0gMDsgaSA8IHhtbC5jaGlsZE5vZGVzLmxlbmd0aDsgaSArKyApIHtcblxuXHRcdFx0XHR2YXIgY2hpbGQgPSB4bWwuY2hpbGROb2Rlc1sgaSBdO1xuXG5cdFx0XHRcdGlmICggY2hpbGQubm9kZVR5cGUgIT09IDEgKSBjb250aW51ZTtcblxuXHRcdFx0XHRzd2l0Y2ggKCBjaGlsZC5ub2RlTmFtZSApIHtcblxuXHRcdFx0XHRcdGNhc2UgJ3RlY2huaXF1ZV9jb21tb24nOlxuXHRcdFx0XHRcdFx0cGFyc2VLaW5lbWF0aWNzVGVjaG5pcXVlQ29tbW9uKCBjaGlsZCwgZGF0YSApO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9XG5cblx0XHRcdGxpYnJhcnkua2luZW1hdGljc01vZGVsc1sgeG1sLmdldEF0dHJpYnV0ZSggJ2lkJyApIF0gPSBkYXRhO1xuXG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gYnVpbGRLaW5lbWF0aWNzTW9kZWwoIGRhdGEgKSB7XG5cblx0XHRcdGlmICggZGF0YS5idWlsZCAhPT0gdW5kZWZpbmVkICkgcmV0dXJuIGRhdGEuYnVpbGQ7XG5cblx0XHRcdHJldHVybiBkYXRhO1xuXG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gZ2V0S2luZW1hdGljc01vZGVsKCBpZCApIHtcblxuXHRcdFx0cmV0dXJuIGdldEJ1aWxkKCBsaWJyYXJ5LmtpbmVtYXRpY3NNb2RlbHNbIGlkIF0sIGJ1aWxkS2luZW1hdGljc01vZGVsICk7XG5cblx0XHR9XG5cblx0XHRmdW5jdGlvbiBwYXJzZUtpbmVtYXRpY3NUZWNobmlxdWVDb21tb24oIHhtbCwgZGF0YSApIHtcblxuXHRcdFx0Zm9yICggdmFyIGkgPSAwOyBpIDwgeG1sLmNoaWxkTm9kZXMubGVuZ3RoOyBpICsrICkge1xuXG5cdFx0XHRcdHZhciBjaGlsZCA9IHhtbC5jaGlsZE5vZGVzWyBpIF07XG5cblx0XHRcdFx0aWYgKCBjaGlsZC5ub2RlVHlwZSAhPT0gMSApIGNvbnRpbnVlO1xuXG5cdFx0XHRcdHN3aXRjaCAoIGNoaWxkLm5vZGVOYW1lICkge1xuXG5cdFx0XHRcdFx0Y2FzZSAnam9pbnQnOlxuXHRcdFx0XHRcdFx0ZGF0YS5qb2ludHNbIGNoaWxkLmdldEF0dHJpYnV0ZSggJ3NpZCcgKSBdID0gcGFyc2VLaW5lbWF0aWNzSm9pbnQoIGNoaWxkICk7XG5cdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdGNhc2UgJ2xpbmsnOlxuXHRcdFx0XHRcdFx0ZGF0YS5saW5rcy5wdXNoKCBwYXJzZUtpbmVtYXRpY3NMaW5rKCBjaGlsZCApICk7XG5cdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHR9XG5cblx0XHRcdH1cblxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIHBhcnNlS2luZW1hdGljc0pvaW50KCB4bWwgKSB7XG5cblx0XHRcdHZhciBkYXRhO1xuXG5cdFx0XHRmb3IgKCB2YXIgaSA9IDA7IGkgPCB4bWwuY2hpbGROb2Rlcy5sZW5ndGg7IGkgKysgKSB7XG5cblx0XHRcdFx0dmFyIGNoaWxkID0geG1sLmNoaWxkTm9kZXNbIGkgXTtcblxuXHRcdFx0XHRpZiAoIGNoaWxkLm5vZGVUeXBlICE9PSAxICkgY29udGludWU7XG5cblx0XHRcdFx0c3dpdGNoICggY2hpbGQubm9kZU5hbWUgKSB7XG5cblx0XHRcdFx0XHRjYXNlICdwcmlzbWF0aWMnOlxuXHRcdFx0XHRcdGNhc2UgJ3Jldm9sdXRlJzpcblx0XHRcdFx0XHRcdGRhdGEgPSBwYXJzZUtpbmVtYXRpY3NKb2ludFBhcmFtZXRlciggY2hpbGQgKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gZGF0YTtcblxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIHBhcnNlS2luZW1hdGljc0pvaW50UGFyYW1ldGVyKCB4bWwsIGRhdGEgKSB7XG5cblx0XHRcdHZhciBkYXRhID0ge1xuXHRcdFx0XHRzaWQ6IHhtbC5nZXRBdHRyaWJ1dGUoICdzaWQnICksXG5cdFx0XHRcdG5hbWU6IHhtbC5nZXRBdHRyaWJ1dGUoICduYW1lJyApIHx8ICcnLFxuXHRcdFx0XHRheGlzOiBuZXcgVmVjdG9yMygpLFxuXHRcdFx0XHRsaW1pdHM6IHtcblx0XHRcdFx0XHRtaW46IDAsXG5cdFx0XHRcdFx0bWF4OiAwXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHR5cGU6IHhtbC5ub2RlTmFtZSxcblx0XHRcdFx0c3RhdGljOiBmYWxzZSxcblx0XHRcdFx0emVyb1Bvc2l0aW9uOiAwLFxuXHRcdFx0XHRtaWRkbGVQb3NpdGlvbjogMFxuXHRcdFx0fTtcblxuXHRcdFx0Zm9yICggdmFyIGkgPSAwOyBpIDwgeG1sLmNoaWxkTm9kZXMubGVuZ3RoOyBpICsrICkge1xuXG5cdFx0XHRcdHZhciBjaGlsZCA9IHhtbC5jaGlsZE5vZGVzWyBpIF07XG5cblx0XHRcdFx0aWYgKCBjaGlsZC5ub2RlVHlwZSAhPT0gMSApIGNvbnRpbnVlO1xuXG5cdFx0XHRcdHN3aXRjaCAoIGNoaWxkLm5vZGVOYW1lICkge1xuXG5cdFx0XHRcdFx0Y2FzZSAnYXhpcyc6XG5cdFx0XHRcdFx0XHR2YXIgYXJyYXkgPSBwYXJzZUZsb2F0cyggY2hpbGQudGV4dENvbnRlbnQgKTtcblx0XHRcdFx0XHRcdGRhdGEuYXhpcy5mcm9tQXJyYXkoIGFycmF5ICk7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRjYXNlICdsaW1pdHMnOlxuXHRcdFx0XHRcdFx0dmFyIG1heCA9IGNoaWxkLmdldEVsZW1lbnRzQnlUYWdOYW1lKCAnbWF4JyApWyAwIF07XG5cdFx0XHRcdFx0XHR2YXIgbWluID0gY2hpbGQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoICdtaW4nIClbIDAgXTtcblxuXHRcdFx0XHRcdFx0ZGF0YS5saW1pdHMubWF4ID0gcGFyc2VGbG9hdCggbWF4LnRleHRDb250ZW50ICk7XG5cdFx0XHRcdFx0XHRkYXRhLmxpbWl0cy5taW4gPSBwYXJzZUZsb2F0KCBtaW4udGV4dENvbnRlbnQgKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fVxuXG5cdFx0XHQvLyBpZiBtaW4gaXMgZXF1YWwgdG8gb3IgZ3JlYXRlciB0aGFuIG1heCwgY29uc2lkZXIgdGhlIGpvaW50IHN0YXRpY1xuXG5cdFx0XHRpZiAoIGRhdGEubGltaXRzLm1pbiA+PSBkYXRhLmxpbWl0cy5tYXggKSB7XG5cblx0XHRcdFx0ZGF0YS5zdGF0aWMgPSB0cnVlO1xuXG5cdFx0XHR9XG5cblx0XHRcdC8vIGNhbGN1bGF0ZSBtaWRkbGUgcG9zaXRpb25cblxuXHRcdFx0ZGF0YS5taWRkbGVQb3NpdGlvbiA9ICggZGF0YS5saW1pdHMubWluICsgZGF0YS5saW1pdHMubWF4ICkgLyAyLjA7XG5cblx0XHRcdHJldHVybiBkYXRhO1xuXG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gcGFyc2VLaW5lbWF0aWNzTGluayggeG1sICkge1xuXG5cdFx0XHR2YXIgZGF0YSA9IHtcblx0XHRcdFx0c2lkOiB4bWwuZ2V0QXR0cmlidXRlKCAnc2lkJyApLFxuXHRcdFx0XHRuYW1lOiB4bWwuZ2V0QXR0cmlidXRlKCAnbmFtZScgKSB8fCAnJyxcblx0XHRcdFx0YXR0YWNobWVudHM6IFtdLFxuXHRcdFx0XHR0cmFuc2Zvcm1zOiBbXVxuXHRcdFx0fTtcblxuXHRcdFx0Zm9yICggdmFyIGkgPSAwOyBpIDwgeG1sLmNoaWxkTm9kZXMubGVuZ3RoOyBpICsrICkge1xuXG5cdFx0XHRcdHZhciBjaGlsZCA9IHhtbC5jaGlsZE5vZGVzWyBpIF07XG5cblx0XHRcdFx0aWYgKCBjaGlsZC5ub2RlVHlwZSAhPT0gMSApIGNvbnRpbnVlO1xuXG5cdFx0XHRcdHN3aXRjaCAoIGNoaWxkLm5vZGVOYW1lICkge1xuXG5cdFx0XHRcdFx0Y2FzZSAnYXR0YWNobWVudF9mdWxsJzpcblx0XHRcdFx0XHRcdGRhdGEuYXR0YWNobWVudHMucHVzaCggcGFyc2VLaW5lbWF0aWNzQXR0YWNobWVudCggY2hpbGQgKSApO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRjYXNlICdtYXRyaXgnOlxuXHRcdFx0XHRcdGNhc2UgJ3RyYW5zbGF0ZSc6XG5cdFx0XHRcdFx0Y2FzZSAncm90YXRlJzpcblx0XHRcdFx0XHRcdGRhdGEudHJhbnNmb3Jtcy5wdXNoKCBwYXJzZUtpbmVtYXRpY3NUcmFuc2Zvcm0oIGNoaWxkICkgKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gZGF0YTtcblxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIHBhcnNlS2luZW1hdGljc0F0dGFjaG1lbnQoIHhtbCApIHtcblxuXHRcdFx0dmFyIGRhdGEgPSB7XG5cdFx0XHRcdGpvaW50OiB4bWwuZ2V0QXR0cmlidXRlKCAnam9pbnQnICkuc3BsaXQoICcvJyApLnBvcCgpLFxuXHRcdFx0XHR0cmFuc2Zvcm1zOiBbXSxcblx0XHRcdFx0bGlua3M6IFtdXG5cdFx0XHR9O1xuXG5cdFx0XHRmb3IgKCB2YXIgaSA9IDA7IGkgPCB4bWwuY2hpbGROb2Rlcy5sZW5ndGg7IGkgKysgKSB7XG5cblx0XHRcdFx0dmFyIGNoaWxkID0geG1sLmNoaWxkTm9kZXNbIGkgXTtcblxuXHRcdFx0XHRpZiAoIGNoaWxkLm5vZGVUeXBlICE9PSAxICkgY29udGludWU7XG5cblx0XHRcdFx0c3dpdGNoICggY2hpbGQubm9kZU5hbWUgKSB7XG5cblx0XHRcdFx0XHRjYXNlICdsaW5rJzpcblx0XHRcdFx0XHRcdGRhdGEubGlua3MucHVzaCggcGFyc2VLaW5lbWF0aWNzTGluayggY2hpbGQgKSApO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRjYXNlICdtYXRyaXgnOlxuXHRcdFx0XHRcdGNhc2UgJ3RyYW5zbGF0ZSc6XG5cdFx0XHRcdFx0Y2FzZSAncm90YXRlJzpcblx0XHRcdFx0XHRcdGRhdGEudHJhbnNmb3Jtcy5wdXNoKCBwYXJzZUtpbmVtYXRpY3NUcmFuc2Zvcm0oIGNoaWxkICkgKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gZGF0YTtcblxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIHBhcnNlS2luZW1hdGljc1RyYW5zZm9ybSggeG1sICkge1xuXG5cdFx0XHR2YXIgZGF0YSA9IHtcblx0XHRcdFx0dHlwZTogeG1sLm5vZGVOYW1lXG5cdFx0XHR9O1xuXG5cdFx0XHR2YXIgYXJyYXkgPSBwYXJzZUZsb2F0cyggeG1sLnRleHRDb250ZW50ICk7XG5cblx0XHRcdHN3aXRjaCAoIGRhdGEudHlwZSApIHtcblxuXHRcdFx0XHRjYXNlICdtYXRyaXgnOlxuXHRcdFx0XHRcdGRhdGEub2JqID0gbmV3IE1hdHJpeDQoKTtcblx0XHRcdFx0XHRkYXRhLm9iai5mcm9tQXJyYXkoIGFycmF5ICkudHJhbnNwb3NlKCk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0Y2FzZSAndHJhbnNsYXRlJzpcblx0XHRcdFx0XHRkYXRhLm9iaiA9IG5ldyBWZWN0b3IzKCk7XG5cdFx0XHRcdFx0ZGF0YS5vYmouZnJvbUFycmF5KCBhcnJheSApO1xuXHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdGNhc2UgJ3JvdGF0ZSc6XG5cdFx0XHRcdFx0ZGF0YS5vYmogPSBuZXcgVmVjdG9yMygpO1xuXHRcdFx0XHRcdGRhdGEub2JqLmZyb21BcnJheSggYXJyYXkgKTtcblx0XHRcdFx0XHRkYXRhLmFuZ2xlID0gTWF0aFV0aWxzLmRlZ1RvUmFkKCBhcnJheVsgMyBdICk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGRhdGE7XG5cblx0XHR9XG5cblx0XHQvLyBwaHlzaWNzXG5cblx0XHRmdW5jdGlvbiBwYXJzZVBoeXNpY3NNb2RlbCggeG1sICkge1xuXG5cdFx0XHR2YXIgZGF0YSA9IHtcblx0XHRcdFx0bmFtZTogeG1sLmdldEF0dHJpYnV0ZSggJ25hbWUnICkgfHwgJycsXG5cdFx0XHRcdHJpZ2lkQm9kaWVzOiB7fVxuXHRcdFx0fTtcblxuXHRcdFx0Zm9yICggdmFyIGkgPSAwOyBpIDwgeG1sLmNoaWxkTm9kZXMubGVuZ3RoOyBpICsrICkge1xuXG5cdFx0XHRcdHZhciBjaGlsZCA9IHhtbC5jaGlsZE5vZGVzWyBpIF07XG5cblx0XHRcdFx0aWYgKCBjaGlsZC5ub2RlVHlwZSAhPT0gMSApIGNvbnRpbnVlO1xuXG5cdFx0XHRcdHN3aXRjaCAoIGNoaWxkLm5vZGVOYW1lICkge1xuXG5cdFx0XHRcdFx0Y2FzZSAncmlnaWRfYm9keSc6XG5cdFx0XHRcdFx0XHRkYXRhLnJpZ2lkQm9kaWVzWyBjaGlsZC5nZXRBdHRyaWJ1dGUoICduYW1lJyApIF0gPSB7fTtcblx0XHRcdFx0XHRcdHBhcnNlUGh5c2ljc1JpZ2lkQm9keSggY2hpbGQsIGRhdGEucmlnaWRCb2RpZXNbIGNoaWxkLmdldEF0dHJpYnV0ZSggJ25hbWUnICkgXSApO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9XG5cblx0XHRcdGxpYnJhcnkucGh5c2ljc01vZGVsc1sgeG1sLmdldEF0dHJpYnV0ZSggJ2lkJyApIF0gPSBkYXRhO1xuXG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gcGFyc2VQaHlzaWNzUmlnaWRCb2R5KCB4bWwsIGRhdGEgKSB7XG5cblx0XHRcdGZvciAoIHZhciBpID0gMDsgaSA8IHhtbC5jaGlsZE5vZGVzLmxlbmd0aDsgaSArKyApIHtcblxuXHRcdFx0XHR2YXIgY2hpbGQgPSB4bWwuY2hpbGROb2Rlc1sgaSBdO1xuXG5cdFx0XHRcdGlmICggY2hpbGQubm9kZVR5cGUgIT09IDEgKSBjb250aW51ZTtcblxuXHRcdFx0XHRzd2l0Y2ggKCBjaGlsZC5ub2RlTmFtZSApIHtcblxuXHRcdFx0XHRcdGNhc2UgJ3RlY2huaXF1ZV9jb21tb24nOlxuXHRcdFx0XHRcdFx0cGFyc2VQaHlzaWNzVGVjaG5pcXVlQ29tbW9uKCBjaGlsZCwgZGF0YSApO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9XG5cblx0XHR9XG5cblx0XHRmdW5jdGlvbiBwYXJzZVBoeXNpY3NUZWNobmlxdWVDb21tb24oIHhtbCwgZGF0YSApIHtcblxuXHRcdFx0Zm9yICggdmFyIGkgPSAwOyBpIDwgeG1sLmNoaWxkTm9kZXMubGVuZ3RoOyBpICsrICkge1xuXG5cdFx0XHRcdHZhciBjaGlsZCA9IHhtbC5jaGlsZE5vZGVzWyBpIF07XG5cblx0XHRcdFx0aWYgKCBjaGlsZC5ub2RlVHlwZSAhPT0gMSApIGNvbnRpbnVlO1xuXG5cdFx0XHRcdHN3aXRjaCAoIGNoaWxkLm5vZGVOYW1lICkge1xuXG5cdFx0XHRcdFx0Y2FzZSAnaW5lcnRpYSc6XG5cdFx0XHRcdFx0XHRkYXRhLmluZXJ0aWEgPSBwYXJzZUZsb2F0cyggY2hpbGQudGV4dENvbnRlbnQgKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0Y2FzZSAnbWFzcyc6XG5cdFx0XHRcdFx0XHRkYXRhLm1hc3MgPSBwYXJzZUZsb2F0cyggY2hpbGQudGV4dENvbnRlbnQgKVsgMCBdO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9XG5cblx0XHR9XG5cblx0XHQvLyBzY2VuZVxuXG5cdFx0ZnVuY3Rpb24gcGFyc2VLaW5lbWF0aWNzU2NlbmUoIHhtbCApIHtcblxuXHRcdFx0dmFyIGRhdGEgPSB7XG5cdFx0XHRcdGJpbmRKb2ludEF4aXM6IFtdXG5cdFx0XHR9O1xuXG5cdFx0XHRmb3IgKCB2YXIgaSA9IDA7IGkgPCB4bWwuY2hpbGROb2Rlcy5sZW5ndGg7IGkgKysgKSB7XG5cblx0XHRcdFx0dmFyIGNoaWxkID0geG1sLmNoaWxkTm9kZXNbIGkgXTtcblxuXHRcdFx0XHRpZiAoIGNoaWxkLm5vZGVUeXBlICE9PSAxICkgY29udGludWU7XG5cblx0XHRcdFx0c3dpdGNoICggY2hpbGQubm9kZU5hbWUgKSB7XG5cblx0XHRcdFx0XHRjYXNlICdiaW5kX2pvaW50X2F4aXMnOlxuXHRcdFx0XHRcdFx0ZGF0YS5iaW5kSm9pbnRBeGlzLnB1c2goIHBhcnNlS2luZW1hdGljc0JpbmRKb2ludEF4aXMoIGNoaWxkICkgKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fVxuXG5cdFx0XHRsaWJyYXJ5LmtpbmVtYXRpY3NTY2VuZXNbIHBhcnNlSWQoIHhtbC5nZXRBdHRyaWJ1dGUoICd1cmwnICkgKSBdID0gZGF0YTtcblxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIHBhcnNlS2luZW1hdGljc0JpbmRKb2ludEF4aXMoIHhtbCApIHtcblxuXHRcdFx0dmFyIGRhdGEgPSB7XG5cdFx0XHRcdHRhcmdldDogeG1sLmdldEF0dHJpYnV0ZSggJ3RhcmdldCcgKS5zcGxpdCggJy8nICkucG9wKClcblx0XHRcdH07XG5cblx0XHRcdGZvciAoIHZhciBpID0gMDsgaSA8IHhtbC5jaGlsZE5vZGVzLmxlbmd0aDsgaSArKyApIHtcblxuXHRcdFx0XHR2YXIgY2hpbGQgPSB4bWwuY2hpbGROb2Rlc1sgaSBdO1xuXG5cdFx0XHRcdGlmICggY2hpbGQubm9kZVR5cGUgIT09IDEgKSBjb250aW51ZTtcblxuXHRcdFx0XHRzd2l0Y2ggKCBjaGlsZC5ub2RlTmFtZSApIHtcblxuXHRcdFx0XHRcdGNhc2UgJ2F4aXMnOlxuXHRcdFx0XHRcdFx0dmFyIHBhcmFtID0gY2hpbGQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoICdwYXJhbScgKVsgMCBdO1xuXHRcdFx0XHRcdFx0ZGF0YS5heGlzID0gcGFyYW0udGV4dENvbnRlbnQ7XG5cdFx0XHRcdFx0XHR2YXIgdG1wSm9pbnRJbmRleCA9IGRhdGEuYXhpcy5zcGxpdCggJ2luc3RfJyApLnBvcCgpLnNwbGl0KCAnYXhpcycgKVsgMCBdO1xuXHRcdFx0XHRcdFx0ZGF0YS5qb2ludEluZGV4ID0gdG1wSm9pbnRJbmRleC5zdWJzdHIoIDAsIHRtcEpvaW50SW5kZXgubGVuZ3RoIC0gMSApO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBkYXRhO1xuXG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gYnVpbGRLaW5lbWF0aWNzU2NlbmUoIGRhdGEgKSB7XG5cblx0XHRcdGlmICggZGF0YS5idWlsZCAhPT0gdW5kZWZpbmVkICkgcmV0dXJuIGRhdGEuYnVpbGQ7XG5cblx0XHRcdHJldHVybiBkYXRhO1xuXG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gZ2V0S2luZW1hdGljc1NjZW5lKCBpZCApIHtcblxuXHRcdFx0cmV0dXJuIGdldEJ1aWxkKCBsaWJyYXJ5LmtpbmVtYXRpY3NTY2VuZXNbIGlkIF0sIGJ1aWxkS2luZW1hdGljc1NjZW5lICk7XG5cblx0XHR9XG5cblx0XHRmdW5jdGlvbiBzZXR1cEtpbmVtYXRpY3MoKSB7XG5cblx0XHRcdHZhciBraW5lbWF0aWNzTW9kZWxJZCA9IE9iamVjdC5rZXlzKCBsaWJyYXJ5LmtpbmVtYXRpY3NNb2RlbHMgKVsgMCBdO1xuXHRcdFx0dmFyIGtpbmVtYXRpY3NTY2VuZUlkID0gT2JqZWN0LmtleXMoIGxpYnJhcnkua2luZW1hdGljc1NjZW5lcyApWyAwIF07XG5cdFx0XHR2YXIgdmlzdWFsU2NlbmVJZCA9IE9iamVjdC5rZXlzKCBsaWJyYXJ5LnZpc3VhbFNjZW5lcyApWyAwIF07XG5cblx0XHRcdGlmICgga2luZW1hdGljc01vZGVsSWQgPT09IHVuZGVmaW5lZCB8fCBraW5lbWF0aWNzU2NlbmVJZCA9PT0gdW5kZWZpbmVkICkgcmV0dXJuO1xuXG5cdFx0XHR2YXIga2luZW1hdGljc01vZGVsID0gZ2V0S2luZW1hdGljc01vZGVsKCBraW5lbWF0aWNzTW9kZWxJZCApO1xuXHRcdFx0dmFyIGtpbmVtYXRpY3NTY2VuZSA9IGdldEtpbmVtYXRpY3NTY2VuZSgga2luZW1hdGljc1NjZW5lSWQgKTtcblx0XHRcdHZhciB2aXN1YWxTY2VuZSA9IGdldFZpc3VhbFNjZW5lKCB2aXN1YWxTY2VuZUlkICk7XG5cblx0XHRcdHZhciBiaW5kSm9pbnRBeGlzID0ga2luZW1hdGljc1NjZW5lLmJpbmRKb2ludEF4aXM7XG5cdFx0XHR2YXIgam9pbnRNYXAgPSB7fTtcblxuXHRcdFx0Zm9yICggdmFyIGkgPSAwLCBsID0gYmluZEpvaW50QXhpcy5sZW5ndGg7IGkgPCBsOyBpICsrICkge1xuXG5cdFx0XHRcdHZhciBheGlzID0gYmluZEpvaW50QXhpc1sgaSBdO1xuXG5cdFx0XHRcdC8vIHRoZSByZXN1bHQgb2YgdGhlIGZvbGxvd2luZyBxdWVyeSBpcyBhbiBlbGVtZW50IG9mIHR5cGUgJ3RyYW5zbGF0ZScsICdyb3RhdGUnLCdzY2FsZScgb3IgJ21hdHJpeCdcblxuXHRcdFx0XHR2YXIgdGFyZ2V0RWxlbWVudCA9IGNvbGxhZGEucXVlcnlTZWxlY3RvciggJ1tzaWQ9XCInICsgYXhpcy50YXJnZXQgKyAnXCJdJyApO1xuXG5cdFx0XHRcdGlmICggdGFyZ2V0RWxlbWVudCApIHtcblxuXHRcdFx0XHRcdC8vIGdldCB0aGUgcGFyZW50IG9mIHRoZSB0cmFuc2Zvcm0gZWxlbWVudFxuXG5cdFx0XHRcdFx0dmFyIHBhcmVudFZpc3VhbEVsZW1lbnQgPSB0YXJnZXRFbGVtZW50LnBhcmVudEVsZW1lbnQ7XG5cblx0XHRcdFx0XHQvLyBjb25uZWN0IHRoZSBqb2ludCBvZiB0aGUga2luZW1hdGljcyBtb2RlbCB3aXRoIHRoZSBlbGVtZW50IGluIHRoZSB2aXN1YWwgc2NlbmVcblxuXHRcdFx0XHRcdGNvbm5lY3QoIGF4aXMuam9pbnRJbmRleCwgcGFyZW50VmlzdWFsRWxlbWVudCApO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fVxuXG5cdFx0XHRmdW5jdGlvbiBjb25uZWN0KCBqb2ludEluZGV4LCB2aXN1YWxFbGVtZW50ICkge1xuXG5cdFx0XHRcdHZhciB2aXN1YWxFbGVtZW50TmFtZSA9IHZpc3VhbEVsZW1lbnQuZ2V0QXR0cmlidXRlKCAnbmFtZScgKTtcblx0XHRcdFx0dmFyIGpvaW50ID0ga2luZW1hdGljc01vZGVsLmpvaW50c1sgam9pbnRJbmRleCBdO1xuXG5cdFx0XHRcdHZpc3VhbFNjZW5lLnRyYXZlcnNlKCBmdW5jdGlvbiAoIG9iamVjdCApIHtcblxuXHRcdFx0XHRcdGlmICggb2JqZWN0Lm5hbWUgPT09IHZpc3VhbEVsZW1lbnROYW1lICkge1xuXG5cdFx0XHRcdFx0XHRqb2ludE1hcFsgam9pbnRJbmRleCBdID0ge1xuXHRcdFx0XHRcdFx0XHRvYmplY3Q6IG9iamVjdCxcblx0XHRcdFx0XHRcdFx0dHJhbnNmb3JtczogYnVpbGRUcmFuc2Zvcm1MaXN0KCB2aXN1YWxFbGVtZW50ICksXG5cdFx0XHRcdFx0XHRcdGpvaW50OiBqb2ludCxcblx0XHRcdFx0XHRcdFx0cG9zaXRpb246IGpvaW50Lnplcm9Qb3NpdGlvblxuXHRcdFx0XHRcdFx0fTtcblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHR9ICk7XG5cblx0XHRcdH1cblxuXHRcdFx0dmFyIG0wID0gbmV3IE1hdHJpeDQoKTtcblxuXHRcdFx0a2luZW1hdGljcyA9IHtcblxuXHRcdFx0XHRqb2ludHM6IGtpbmVtYXRpY3NNb2RlbCAmJiBraW5lbWF0aWNzTW9kZWwuam9pbnRzLFxuXG5cdFx0XHRcdGdldEpvaW50VmFsdWU6IGZ1bmN0aW9uICggam9pbnRJbmRleCApIHtcblxuXHRcdFx0XHRcdHZhciBqb2ludERhdGEgPSBqb2ludE1hcFsgam9pbnRJbmRleCBdO1xuXG5cdFx0XHRcdFx0aWYgKCBqb2ludERhdGEgKSB7XG5cblx0XHRcdFx0XHRcdHJldHVybiBqb2ludERhdGEucG9zaXRpb247XG5cblx0XHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0XHRjb25zb2xlLndhcm4oICdUSFJFRS5Db2xsYWRhTG9hZGVyOiBKb2ludCAnICsgam9pbnRJbmRleCArICcgZG9lc25cXCd0IGV4aXN0LicgKTtcblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHR9LFxuXG5cdFx0XHRcdHNldEpvaW50VmFsdWU6IGZ1bmN0aW9uICggam9pbnRJbmRleCwgdmFsdWUgKSB7XG5cblx0XHRcdFx0XHR2YXIgam9pbnREYXRhID0gam9pbnRNYXBbIGpvaW50SW5kZXggXTtcblxuXHRcdFx0XHRcdGlmICggam9pbnREYXRhICkge1xuXG5cdFx0XHRcdFx0XHR2YXIgam9pbnQgPSBqb2ludERhdGEuam9pbnQ7XG5cblx0XHRcdFx0XHRcdGlmICggdmFsdWUgPiBqb2ludC5saW1pdHMubWF4IHx8IHZhbHVlIDwgam9pbnQubGltaXRzLm1pbiApIHtcblxuXHRcdFx0XHRcdFx0XHRjb25zb2xlLndhcm4oICdUSFJFRS5Db2xsYWRhTG9hZGVyOiBKb2ludCAnICsgam9pbnRJbmRleCArICcgdmFsdWUgJyArIHZhbHVlICsgJyBvdXRzaWRlIG9mIGxpbWl0cyAobWluOiAnICsgam9pbnQubGltaXRzLm1pbiArICcsIG1heDogJyArIGpvaW50LmxpbWl0cy5tYXggKyAnKS4nICk7XG5cblx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoIGpvaW50LnN0YXRpYyApIHtcblxuXHRcdFx0XHRcdFx0XHRjb25zb2xlLndhcm4oICdUSFJFRS5Db2xsYWRhTG9hZGVyOiBKb2ludCAnICsgam9pbnRJbmRleCArICcgaXMgc3RhdGljLicgKTtcblxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdFx0XHR2YXIgb2JqZWN0ID0gam9pbnREYXRhLm9iamVjdDtcblx0XHRcdFx0XHRcdFx0dmFyIGF4aXMgPSBqb2ludC5heGlzO1xuXHRcdFx0XHRcdFx0XHR2YXIgdHJhbnNmb3JtcyA9IGpvaW50RGF0YS50cmFuc2Zvcm1zO1xuXG5cdFx0XHRcdFx0XHRcdG1hdHJpeC5pZGVudGl0eSgpO1xuXG5cdFx0XHRcdFx0XHRcdC8vIGVhY2ggdXBkYXRlLCB3ZSBoYXZlIHRvIGFwcGx5IGFsbCB0cmFuc2Zvcm1zIGluIHRoZSBjb3JyZWN0IG9yZGVyXG5cblx0XHRcdFx0XHRcdFx0Zm9yICggdmFyIGkgPSAwOyBpIDwgdHJhbnNmb3Jtcy5sZW5ndGg7IGkgKysgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHR2YXIgdHJhbnNmb3JtID0gdHJhbnNmb3Jtc1sgaSBdO1xuXG5cdFx0XHRcdFx0XHRcdFx0Ly8gaWYgdGhlcmUgaXMgYSBjb25uZWN0aW9uIG9mIHRoZSB0cmFuc2Zvcm0gbm9kZSB3aXRoIGEgam9pbnQsIGFwcGx5IHRoZSBqb2ludCB2YWx1ZVxuXG5cdFx0XHRcdFx0XHRcdFx0aWYgKCB0cmFuc2Zvcm0uc2lkICYmIHRyYW5zZm9ybS5zaWQuaW5kZXhPZiggam9pbnRJbmRleCApICE9PSAtIDEgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHRcdHN3aXRjaCAoIGpvaW50LnR5cGUgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0Y2FzZSAncmV2b2x1dGUnOlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdG1hdHJpeC5tdWx0aXBseSggbTAubWFrZVJvdGF0aW9uQXhpcyggYXhpcywgTWF0aFV0aWxzLmRlZ1RvUmFkKCB2YWx1ZSApICkgKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRjYXNlICdwcmlzbWF0aWMnOlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdG1hdHJpeC5tdWx0aXBseSggbTAubWFrZVRyYW5zbGF0aW9uKCBheGlzLnggKiB2YWx1ZSwgYXhpcy55ICogdmFsdWUsIGF4aXMueiAqIHZhbHVlICkgKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnNvbGUud2FybiggJ1RIUkVFLkNvbGxhZGFMb2FkZXI6IFVua25vd24gam9pbnQgdHlwZTogJyArIGpvaW50LnR5cGUgKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdFx0XHRcdFx0c3dpdGNoICggdHJhbnNmb3JtLnR5cGUgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0Y2FzZSAnbWF0cml4Jzpcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRtYXRyaXgubXVsdGlwbHkoIHRyYW5zZm9ybS5vYmogKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRjYXNlICd0cmFuc2xhdGUnOlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdG1hdHJpeC5tdWx0aXBseSggbTAubWFrZVRyYW5zbGF0aW9uKCB0cmFuc2Zvcm0ub2JqLngsIHRyYW5zZm9ybS5vYmoueSwgdHJhbnNmb3JtLm9iai56ICkgKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRjYXNlICdzY2FsZSc6XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0bWF0cml4LnNjYWxlKCB0cmFuc2Zvcm0ub2JqICk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0Y2FzZSAncm90YXRlJzpcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRtYXRyaXgubXVsdGlwbHkoIG0wLm1ha2VSb3RhdGlvbkF4aXMoIHRyYW5zZm9ybS5vYmosIHRyYW5zZm9ybS5hbmdsZSApICk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0b2JqZWN0Lm1hdHJpeC5jb3B5KCBtYXRyaXggKTtcblx0XHRcdFx0XHRcdFx0b2JqZWN0Lm1hdHJpeC5kZWNvbXBvc2UoIG9iamVjdC5wb3NpdGlvbiwgb2JqZWN0LnF1YXRlcm5pb24sIG9iamVjdC5zY2FsZSApO1xuXG5cdFx0XHRcdFx0XHRcdGpvaW50TWFwWyBqb2ludEluZGV4IF0ucG9zaXRpb24gPSB2YWx1ZTtcblxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2coICdUSFJFRS5Db2xsYWRhTG9hZGVyOiAnICsgam9pbnRJbmRleCArICcgZG9lcyBub3QgZXhpc3QuJyApO1xuXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH1cblxuXHRcdFx0fTtcblxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGJ1aWxkVHJhbnNmb3JtTGlzdCggbm9kZSApIHtcblxuXHRcdFx0dmFyIHRyYW5zZm9ybXMgPSBbXTtcblxuXHRcdFx0dmFyIHhtbCA9IGNvbGxhZGEucXVlcnlTZWxlY3RvciggJ1tpZD1cIicgKyBub2RlLmlkICsgJ1wiXScgKTtcblxuXHRcdFx0Zm9yICggdmFyIGkgPSAwOyBpIDwgeG1sLmNoaWxkTm9kZXMubGVuZ3RoOyBpICsrICkge1xuXG5cdFx0XHRcdHZhciBjaGlsZCA9IHhtbC5jaGlsZE5vZGVzWyBpIF07XG5cblx0XHRcdFx0aWYgKCBjaGlsZC5ub2RlVHlwZSAhPT0gMSApIGNvbnRpbnVlO1xuXG5cdFx0XHRcdHN3aXRjaCAoIGNoaWxkLm5vZGVOYW1lICkge1xuXG5cdFx0XHRcdFx0Y2FzZSAnbWF0cml4Jzpcblx0XHRcdFx0XHRcdHZhciBhcnJheSA9IHBhcnNlRmxvYXRzKCBjaGlsZC50ZXh0Q29udGVudCApO1xuXHRcdFx0XHRcdFx0dmFyIG1hdHJpeCA9IG5ldyBNYXRyaXg0KCkuZnJvbUFycmF5KCBhcnJheSApLnRyYW5zcG9zZSgpO1xuXHRcdFx0XHRcdFx0dHJhbnNmb3Jtcy5wdXNoKCB7XG5cdFx0XHRcdFx0XHRcdHNpZDogY2hpbGQuZ2V0QXR0cmlidXRlKCAnc2lkJyApLFxuXHRcdFx0XHRcdFx0XHR0eXBlOiBjaGlsZC5ub2RlTmFtZSxcblx0XHRcdFx0XHRcdFx0b2JqOiBtYXRyaXhcblx0XHRcdFx0XHRcdH0gKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0Y2FzZSAndHJhbnNsYXRlJzpcblx0XHRcdFx0XHRjYXNlICdzY2FsZSc6XG5cdFx0XHRcdFx0XHR2YXIgYXJyYXkgPSBwYXJzZUZsb2F0cyggY2hpbGQudGV4dENvbnRlbnQgKTtcblx0XHRcdFx0XHRcdHZhciB2ZWN0b3IgPSBuZXcgVmVjdG9yMygpLmZyb21BcnJheSggYXJyYXkgKTtcblx0XHRcdFx0XHRcdHRyYW5zZm9ybXMucHVzaCgge1xuXHRcdFx0XHRcdFx0XHRzaWQ6IGNoaWxkLmdldEF0dHJpYnV0ZSggJ3NpZCcgKSxcblx0XHRcdFx0XHRcdFx0dHlwZTogY2hpbGQubm9kZU5hbWUsXG5cdFx0XHRcdFx0XHRcdG9iajogdmVjdG9yXG5cdFx0XHRcdFx0XHR9ICk7XG5cdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdGNhc2UgJ3JvdGF0ZSc6XG5cdFx0XHRcdFx0XHR2YXIgYXJyYXkgPSBwYXJzZUZsb2F0cyggY2hpbGQudGV4dENvbnRlbnQgKTtcblx0XHRcdFx0XHRcdHZhciB2ZWN0b3IgPSBuZXcgVmVjdG9yMygpLmZyb21BcnJheSggYXJyYXkgKTtcblx0XHRcdFx0XHRcdHZhciBhbmdsZSA9IE1hdGhVdGlscy5kZWdUb1JhZCggYXJyYXlbIDMgXSApO1xuXHRcdFx0XHRcdFx0dHJhbnNmb3Jtcy5wdXNoKCB7XG5cdFx0XHRcdFx0XHRcdHNpZDogY2hpbGQuZ2V0QXR0cmlidXRlKCAnc2lkJyApLFxuXHRcdFx0XHRcdFx0XHR0eXBlOiBjaGlsZC5ub2RlTmFtZSxcblx0XHRcdFx0XHRcdFx0b2JqOiB2ZWN0b3IsXG5cdFx0XHRcdFx0XHRcdGFuZ2xlOiBhbmdsZVxuXHRcdFx0XHRcdFx0fSApO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiB0cmFuc2Zvcm1zO1xuXG5cdFx0fVxuXG5cdFx0Ly8gbm9kZXNcblxuXHRcdGZ1bmN0aW9uIHByZXBhcmVOb2RlcyggeG1sICkge1xuXG5cdFx0XHR2YXIgZWxlbWVudHMgPSB4bWwuZ2V0RWxlbWVudHNCeVRhZ05hbWUoICdub2RlJyApO1xuXG5cdFx0XHQvLyBlbnN1cmUgYWxsIG5vZGUgZWxlbWVudHMgaGF2ZSBpZCBhdHRyaWJ1dGVzXG5cblx0XHRcdGZvciAoIHZhciBpID0gMDsgaSA8IGVsZW1lbnRzLmxlbmd0aDsgaSArKyApIHtcblxuXHRcdFx0XHR2YXIgZWxlbWVudCA9IGVsZW1lbnRzWyBpIF07XG5cblx0XHRcdFx0aWYgKCBlbGVtZW50Lmhhc0F0dHJpYnV0ZSggJ2lkJyApID09PSBmYWxzZSApIHtcblxuXHRcdFx0XHRcdGVsZW1lbnQuc2V0QXR0cmlidXRlKCAnaWQnLCBnZW5lcmF0ZUlkKCkgKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdH1cblxuXHRcdH1cblxuXHRcdHZhciBtYXRyaXggPSBuZXcgTWF0cml4NCgpO1xuXHRcdHZhciB2ZWN0b3IgPSBuZXcgVmVjdG9yMygpO1xuXG5cdFx0ZnVuY3Rpb24gcGFyc2VOb2RlKCB4bWwgKSB7XG5cblx0XHRcdHZhciBkYXRhID0ge1xuXHRcdFx0XHRuYW1lOiB4bWwuZ2V0QXR0cmlidXRlKCAnbmFtZScgKSB8fCAnJyxcblx0XHRcdFx0dHlwZTogeG1sLmdldEF0dHJpYnV0ZSggJ3R5cGUnICksXG5cdFx0XHRcdGlkOiB4bWwuZ2V0QXR0cmlidXRlKCAnaWQnICksXG5cdFx0XHRcdHNpZDogeG1sLmdldEF0dHJpYnV0ZSggJ3NpZCcgKSxcblx0XHRcdFx0bWF0cml4OiBuZXcgTWF0cml4NCgpLFxuXHRcdFx0XHRub2RlczogW10sXG5cdFx0XHRcdGluc3RhbmNlQ2FtZXJhczogW10sXG5cdFx0XHRcdGluc3RhbmNlQ29udHJvbGxlcnM6IFtdLFxuXHRcdFx0XHRpbnN0YW5jZUxpZ2h0czogW10sXG5cdFx0XHRcdGluc3RhbmNlR2VvbWV0cmllczogW10sXG5cdFx0XHRcdGluc3RhbmNlTm9kZXM6IFtdLFxuXHRcdFx0XHR0cmFuc2Zvcm1zOiB7fVxuXHRcdFx0fTtcblxuXHRcdFx0Zm9yICggdmFyIGkgPSAwOyBpIDwgeG1sLmNoaWxkTm9kZXMubGVuZ3RoOyBpICsrICkge1xuXG5cdFx0XHRcdHZhciBjaGlsZCA9IHhtbC5jaGlsZE5vZGVzWyBpIF07XG5cblx0XHRcdFx0aWYgKCBjaGlsZC5ub2RlVHlwZSAhPT0gMSApIGNvbnRpbnVlO1xuXG5cdFx0XHRcdHN3aXRjaCAoIGNoaWxkLm5vZGVOYW1lICkge1xuXG5cdFx0XHRcdFx0Y2FzZSAnbm9kZSc6XG5cdFx0XHRcdFx0XHRkYXRhLm5vZGVzLnB1c2goIGNoaWxkLmdldEF0dHJpYnV0ZSggJ2lkJyApICk7XG5cdFx0XHRcdFx0XHRwYXJzZU5vZGUoIGNoaWxkICk7XG5cdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdGNhc2UgJ2luc3RhbmNlX2NhbWVyYSc6XG5cdFx0XHRcdFx0XHRkYXRhLmluc3RhbmNlQ2FtZXJhcy5wdXNoKCBwYXJzZUlkKCBjaGlsZC5nZXRBdHRyaWJ1dGUoICd1cmwnICkgKSApO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRjYXNlICdpbnN0YW5jZV9jb250cm9sbGVyJzpcblx0XHRcdFx0XHRcdGRhdGEuaW5zdGFuY2VDb250cm9sbGVycy5wdXNoKCBwYXJzZU5vZGVJbnN0YW5jZSggY2hpbGQgKSApO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRjYXNlICdpbnN0YW5jZV9saWdodCc6XG5cdFx0XHRcdFx0XHRkYXRhLmluc3RhbmNlTGlnaHRzLnB1c2goIHBhcnNlSWQoIGNoaWxkLmdldEF0dHJpYnV0ZSggJ3VybCcgKSApICk7XG5cdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdGNhc2UgJ2luc3RhbmNlX2dlb21ldHJ5Jzpcblx0XHRcdFx0XHRcdGRhdGEuaW5zdGFuY2VHZW9tZXRyaWVzLnB1c2goIHBhcnNlTm9kZUluc3RhbmNlKCBjaGlsZCApICk7XG5cdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdGNhc2UgJ2luc3RhbmNlX25vZGUnOlxuXHRcdFx0XHRcdFx0ZGF0YS5pbnN0YW5jZU5vZGVzLnB1c2goIHBhcnNlSWQoIGNoaWxkLmdldEF0dHJpYnV0ZSggJ3VybCcgKSApICk7XG5cdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdGNhc2UgJ21hdHJpeCc6XG5cdFx0XHRcdFx0XHR2YXIgYXJyYXkgPSBwYXJzZUZsb2F0cyggY2hpbGQudGV4dENvbnRlbnQgKTtcblx0XHRcdFx0XHRcdGRhdGEubWF0cml4Lm11bHRpcGx5KCBtYXRyaXguZnJvbUFycmF5KCBhcnJheSApLnRyYW5zcG9zZSgpICk7XG5cdFx0XHRcdFx0XHRkYXRhLnRyYW5zZm9ybXNbIGNoaWxkLmdldEF0dHJpYnV0ZSggJ3NpZCcgKSBdID0gY2hpbGQubm9kZU5hbWU7XG5cdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdGNhc2UgJ3RyYW5zbGF0ZSc6XG5cdFx0XHRcdFx0XHR2YXIgYXJyYXkgPSBwYXJzZUZsb2F0cyggY2hpbGQudGV4dENvbnRlbnQgKTtcblx0XHRcdFx0XHRcdHZlY3Rvci5mcm9tQXJyYXkoIGFycmF5ICk7XG5cdFx0XHRcdFx0XHRkYXRhLm1hdHJpeC5tdWx0aXBseSggbWF0cml4Lm1ha2VUcmFuc2xhdGlvbiggdmVjdG9yLngsIHZlY3Rvci55LCB2ZWN0b3IueiApICk7XG5cdFx0XHRcdFx0XHRkYXRhLnRyYW5zZm9ybXNbIGNoaWxkLmdldEF0dHJpYnV0ZSggJ3NpZCcgKSBdID0gY2hpbGQubm9kZU5hbWU7XG5cdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdGNhc2UgJ3JvdGF0ZSc6XG5cdFx0XHRcdFx0XHR2YXIgYXJyYXkgPSBwYXJzZUZsb2F0cyggY2hpbGQudGV4dENvbnRlbnQgKTtcblx0XHRcdFx0XHRcdHZhciBhbmdsZSA9IE1hdGhVdGlscy5kZWdUb1JhZCggYXJyYXlbIDMgXSApO1xuXHRcdFx0XHRcdFx0ZGF0YS5tYXRyaXgubXVsdGlwbHkoIG1hdHJpeC5tYWtlUm90YXRpb25BeGlzKCB2ZWN0b3IuZnJvbUFycmF5KCBhcnJheSApLCBhbmdsZSApICk7XG5cdFx0XHRcdFx0XHRkYXRhLnRyYW5zZm9ybXNbIGNoaWxkLmdldEF0dHJpYnV0ZSggJ3NpZCcgKSBdID0gY2hpbGQubm9kZU5hbWU7XG5cdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdGNhc2UgJ3NjYWxlJzpcblx0XHRcdFx0XHRcdHZhciBhcnJheSA9IHBhcnNlRmxvYXRzKCBjaGlsZC50ZXh0Q29udGVudCApO1xuXHRcdFx0XHRcdFx0ZGF0YS5tYXRyaXguc2NhbGUoIHZlY3Rvci5mcm9tQXJyYXkoIGFycmF5ICkgKTtcblx0XHRcdFx0XHRcdGRhdGEudHJhbnNmb3Jtc1sgY2hpbGQuZ2V0QXR0cmlidXRlKCAnc2lkJyApIF0gPSBjaGlsZC5ub2RlTmFtZTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0Y2FzZSAnZXh0cmEnOlxuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2coIGNoaWxkICk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9XG5cblx0XHRcdGlmICggaGFzTm9kZSggZGF0YS5pZCApICkge1xuXG5cdFx0XHRcdGNvbnNvbGUud2FybiggJ1RIUkVFLkNvbGxhZGFMb2FkZXI6IFRoZXJlIGlzIGFscmVhZHkgYSBub2RlIHdpdGggSUQgJXMuIEV4Y2x1ZGUgY3VycmVudCBub2RlIGZyb20gZnVydGhlciBwcm9jZXNzaW5nLicsIGRhdGEuaWQgKTtcblxuXHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRsaWJyYXJ5Lm5vZGVzWyBkYXRhLmlkIF0gPSBkYXRhO1xuXG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBkYXRhO1xuXG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gcGFyc2VOb2RlSW5zdGFuY2UoIHhtbCApIHtcblxuXHRcdFx0dmFyIGRhdGEgPSB7XG5cdFx0XHRcdGlkOiBwYXJzZUlkKCB4bWwuZ2V0QXR0cmlidXRlKCAndXJsJyApICksXG5cdFx0XHRcdG1hdGVyaWFsczoge30sXG5cdFx0XHRcdHNrZWxldG9uczogW11cblx0XHRcdH07XG5cblx0XHRcdGZvciAoIHZhciBpID0gMDsgaSA8IHhtbC5jaGlsZE5vZGVzLmxlbmd0aDsgaSArKyApIHtcblxuXHRcdFx0XHR2YXIgY2hpbGQgPSB4bWwuY2hpbGROb2Rlc1sgaSBdO1xuXG5cdFx0XHRcdHN3aXRjaCAoIGNoaWxkLm5vZGVOYW1lICkge1xuXG5cdFx0XHRcdFx0Y2FzZSAnYmluZF9tYXRlcmlhbCc6XG5cdFx0XHRcdFx0XHR2YXIgaW5zdGFuY2VzID0gY2hpbGQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoICdpbnN0YW5jZV9tYXRlcmlhbCcgKTtcblxuXHRcdFx0XHRcdFx0Zm9yICggdmFyIGogPSAwOyBqIDwgaW5zdGFuY2VzLmxlbmd0aDsgaiArKyApIHtcblxuXHRcdFx0XHRcdFx0XHR2YXIgaW5zdGFuY2UgPSBpbnN0YW5jZXNbIGogXTtcblx0XHRcdFx0XHRcdFx0dmFyIHN5bWJvbCA9IGluc3RhbmNlLmdldEF0dHJpYnV0ZSggJ3N5bWJvbCcgKTtcblx0XHRcdFx0XHRcdFx0dmFyIHRhcmdldCA9IGluc3RhbmNlLmdldEF0dHJpYnV0ZSggJ3RhcmdldCcgKTtcblxuXHRcdFx0XHRcdFx0XHRkYXRhLm1hdGVyaWFsc1sgc3ltYm9sIF0gPSBwYXJzZUlkKCB0YXJnZXQgKTtcblxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdGNhc2UgJ3NrZWxldG9uJzpcblx0XHRcdFx0XHRcdGRhdGEuc2tlbGV0b25zLnB1c2goIHBhcnNlSWQoIGNoaWxkLnRleHRDb250ZW50ICkgKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gZGF0YTtcblxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGJ1aWxkU2tlbGV0b24oIHNrZWxldG9ucywgam9pbnRzICkge1xuXG5cdFx0XHR2YXIgYm9uZURhdGEgPSBbXTtcblx0XHRcdHZhciBzb3J0ZWRCb25lRGF0YSA9IFtdO1xuXG5cdFx0XHR2YXIgaSwgaiwgZGF0YTtcblxuXHRcdFx0Ly8gYSBza2VsZXRvbiBjYW4gaGF2ZSBtdWx0aXBsZSByb290IGJvbmVzLiBjb2xsYWRhIGV4cHJlc3NlcyB0aGlzXG5cdFx0XHQvLyBzaXR1dGF0aW9uIHdpdGggbXVsdGlwbGUgXCJza2VsZXRvblwiIHRhZ3MgcGVyIGNvbnRyb2xsZXIgaW5zdGFuY2VcblxuXHRcdFx0Zm9yICggaSA9IDA7IGkgPCBza2VsZXRvbnMubGVuZ3RoOyBpICsrICkge1xuXG5cdFx0XHRcdHZhciBza2VsZXRvbiA9IHNrZWxldG9uc1sgaSBdO1xuXG5cdFx0XHRcdHZhciByb290O1xuXG5cdFx0XHRcdGlmICggaGFzTm9kZSggc2tlbGV0b24gKSApIHtcblxuXHRcdFx0XHRcdHJvb3QgPSBnZXROb2RlKCBza2VsZXRvbiApO1xuXHRcdFx0XHRcdGJ1aWxkQm9uZUhpZXJhcmNoeSggcm9vdCwgam9pbnRzLCBib25lRGF0YSApO1xuXG5cdFx0XHRcdH0gZWxzZSBpZiAoIGhhc1Zpc3VhbFNjZW5lKCBza2VsZXRvbiApICkge1xuXG5cdFx0XHRcdFx0Ly8gaGFuZGxlIGNhc2Ugd2hlcmUgdGhlIHNrZWxldG9uIHJlZmVycyB0byB0aGUgdmlzdWFsIHNjZW5lICgjMTMzMzUpXG5cblx0XHRcdFx0XHR2YXIgdmlzdWFsU2NlbmUgPSBsaWJyYXJ5LnZpc3VhbFNjZW5lc1sgc2tlbGV0b24gXTtcblx0XHRcdFx0XHR2YXIgY2hpbGRyZW4gPSB2aXN1YWxTY2VuZS5jaGlsZHJlbjtcblxuXHRcdFx0XHRcdGZvciAoIHZhciBqID0gMDsgaiA8IGNoaWxkcmVuLmxlbmd0aDsgaiArKyApIHtcblxuXHRcdFx0XHRcdFx0dmFyIGNoaWxkID0gY2hpbGRyZW5bIGogXTtcblxuXHRcdFx0XHRcdFx0aWYgKCBjaGlsZC50eXBlID09PSAnSk9JTlQnICkge1xuXG5cdFx0XHRcdFx0XHRcdHZhciByb290ID0gZ2V0Tm9kZSggY2hpbGQuaWQgKTtcblx0XHRcdFx0XHRcdFx0YnVpbGRCb25lSGllcmFyY2h5KCByb290LCBqb2ludHMsIGJvbmVEYXRhICk7XG5cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0Y29uc29sZS5lcnJvciggJ1RIUkVFLkNvbGxhZGFMb2FkZXI6IFVuYWJsZSB0byBmaW5kIHJvb3QgYm9uZSBvZiBza2VsZXRvbiB3aXRoIElEOicsIHNrZWxldG9uICk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9XG5cblx0XHRcdC8vIHNvcnQgYm9uZSBkYXRhICh0aGUgb3JkZXIgaXMgZGVmaW5lZCBpbiB0aGUgY29ycmVzcG9uZGluZyBjb250cm9sbGVyKVxuXG5cdFx0XHRmb3IgKCBpID0gMDsgaSA8IGpvaW50cy5sZW5ndGg7IGkgKysgKSB7XG5cblx0XHRcdFx0Zm9yICggaiA9IDA7IGogPCBib25lRGF0YS5sZW5ndGg7IGogKysgKSB7XG5cblx0XHRcdFx0XHRkYXRhID0gYm9uZURhdGFbIGogXTtcblxuXHRcdFx0XHRcdGlmICggZGF0YS5ib25lLm5hbWUgPT09IGpvaW50c1sgaSBdLm5hbWUgKSB7XG5cblx0XHRcdFx0XHRcdHNvcnRlZEJvbmVEYXRhWyBpIF0gPSBkYXRhO1xuXHRcdFx0XHRcdFx0ZGF0YS5wcm9jZXNzZWQgPSB0cnVlO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9XG5cblx0XHRcdC8vIGFkZCB1bnByb2Nlc3NlZCBib25lIGRhdGEgYXQgdGhlIGVuZCBvZiB0aGUgbGlzdFxuXG5cdFx0XHRmb3IgKCBpID0gMDsgaSA8IGJvbmVEYXRhLmxlbmd0aDsgaSArKyApIHtcblxuXHRcdFx0XHRkYXRhID0gYm9uZURhdGFbIGkgXTtcblxuXHRcdFx0XHRpZiAoIGRhdGEucHJvY2Vzc2VkID09PSBmYWxzZSApIHtcblxuXHRcdFx0XHRcdHNvcnRlZEJvbmVEYXRhLnB1c2goIGRhdGEgKTtcblx0XHRcdFx0XHRkYXRhLnByb2Nlc3NlZCA9IHRydWU7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9XG5cblx0XHRcdC8vIHNldHVwIGFycmF5cyBmb3Igc2tlbGV0b24gY3JlYXRpb25cblxuXHRcdFx0dmFyIGJvbmVzID0gW107XG5cdFx0XHR2YXIgYm9uZUludmVyc2VzID0gW107XG5cblx0XHRcdGZvciAoIGkgPSAwOyBpIDwgc29ydGVkQm9uZURhdGEubGVuZ3RoOyBpICsrICkge1xuXG5cdFx0XHRcdGRhdGEgPSBzb3J0ZWRCb25lRGF0YVsgaSBdO1xuXG5cdFx0XHRcdGJvbmVzLnB1c2goIGRhdGEuYm9uZSApO1xuXHRcdFx0XHRib25lSW52ZXJzZXMucHVzaCggZGF0YS5ib25lSW52ZXJzZSApO1xuXG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBuZXcgU2tlbGV0b24oIGJvbmVzLCBib25lSW52ZXJzZXMgKTtcblxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGJ1aWxkQm9uZUhpZXJhcmNoeSggcm9vdCwgam9pbnRzLCBib25lRGF0YSApIHtcblxuXHRcdFx0Ly8gc2V0dXAgYm9uZSBkYXRhIGZyb20gdmlzdWFsIHNjZW5lXG5cblx0XHRcdHJvb3QudHJhdmVyc2UoIGZ1bmN0aW9uICggb2JqZWN0ICkge1xuXG5cdFx0XHRcdGlmICggb2JqZWN0LmlzQm9uZSA9PT0gdHJ1ZSApIHtcblxuXHRcdFx0XHRcdHZhciBib25lSW52ZXJzZTtcblxuXHRcdFx0XHRcdC8vIHJldHJpZXZlIHRoZSBib25lSW52ZXJzZSBmcm9tIHRoZSBjb250cm9sbGVyIGRhdGFcblxuXHRcdFx0XHRcdGZvciAoIHZhciBpID0gMDsgaSA8IGpvaW50cy5sZW5ndGg7IGkgKysgKSB7XG5cblx0XHRcdFx0XHRcdHZhciBqb2ludCA9IGpvaW50c1sgaSBdO1xuXG5cdFx0XHRcdFx0XHRpZiAoIGpvaW50Lm5hbWUgPT09IG9iamVjdC5uYW1lICkge1xuXG5cdFx0XHRcdFx0XHRcdGJvbmVJbnZlcnNlID0gam9pbnQuYm9uZUludmVyc2U7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpZiAoIGJvbmVJbnZlcnNlID09PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0XHRcdC8vIFVuZm9ydHVuYXRlbHksIHRoZXJlIGNhbiBiZSBqb2ludHMgaW4gdGhlIHZpc3VhbCBzY2VuZSB0aGF0IGFyZSBub3QgcGFydCBvZiB0aGVcblx0XHRcdFx0XHRcdC8vIGNvcnJlc3BvbmRpbmcgY29udHJvbGxlci4gSW4gdGhpcyBjYXNlLCB3ZSBoYXZlIHRvIGNyZWF0ZSBhIGR1bW15IGJvbmVJbnZlcnNlIG1hdHJpeFxuXHRcdFx0XHRcdFx0Ly8gZm9yIHRoZSByZXNwZWN0aXZlIGJvbmUuIFRoaXMgYm9uZSB3b24ndCBhZmZlY3QgYW55IHZlcnRpY2VzLCBiZWNhdXNlIHRoZXJlIGFyZSBubyBza2luIGluZGljZXNcblx0XHRcdFx0XHRcdC8vIGFuZCB3ZWlnaHRzIGRlZmluZWQgZm9yIGl0LiBCdXQgd2Ugc3RpbGwgaGF2ZSB0byBhZGQgdGhlIGJvbmUgdG8gdGhlIHNvcnRlZCBib25lIGxpc3QgaW4gb3JkZXIgdG9cblx0XHRcdFx0XHRcdC8vIGVuc3VyZSBhIGNvcnJlY3QgYW5pbWF0aW9uIG9mIHRoZSBtb2RlbC5cblxuXHRcdFx0XHRcdFx0Ym9uZUludmVyc2UgPSBuZXcgTWF0cml4NCgpO1xuXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ym9uZURhdGEucHVzaCggeyBib25lOiBvYmplY3QsIGJvbmVJbnZlcnNlOiBib25lSW52ZXJzZSwgcHJvY2Vzc2VkOiBmYWxzZSB9ICk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9ICk7XG5cblx0XHR9XG5cblx0XHRmdW5jdGlvbiBidWlsZE5vZGUoIGRhdGEgKSB7XG5cblx0XHRcdHZhciBvYmplY3RzID0gW107XG5cblx0XHRcdHZhciBtYXRyaXggPSBkYXRhLm1hdHJpeDtcblx0XHRcdHZhciBub2RlcyA9IGRhdGEubm9kZXM7XG5cdFx0XHR2YXIgdHlwZSA9IGRhdGEudHlwZTtcblx0XHRcdHZhciBpbnN0YW5jZUNhbWVyYXMgPSBkYXRhLmluc3RhbmNlQ2FtZXJhcztcblx0XHRcdHZhciBpbnN0YW5jZUNvbnRyb2xsZXJzID0gZGF0YS5pbnN0YW5jZUNvbnRyb2xsZXJzO1xuXHRcdFx0dmFyIGluc3RhbmNlTGlnaHRzID0gZGF0YS5pbnN0YW5jZUxpZ2h0cztcblx0XHRcdHZhciBpbnN0YW5jZUdlb21ldHJpZXMgPSBkYXRhLmluc3RhbmNlR2VvbWV0cmllcztcblx0XHRcdHZhciBpbnN0YW5jZU5vZGVzID0gZGF0YS5pbnN0YW5jZU5vZGVzO1xuXG5cdFx0XHQvLyBub2Rlc1xuXG5cdFx0XHRmb3IgKCB2YXIgaSA9IDAsIGwgPSBub2Rlcy5sZW5ndGg7IGkgPCBsOyBpICsrICkge1xuXG5cdFx0XHRcdG9iamVjdHMucHVzaCggZ2V0Tm9kZSggbm9kZXNbIGkgXSApICk7XG5cblx0XHRcdH1cblxuXHRcdFx0Ly8gaW5zdGFuY2UgY2FtZXJhc1xuXG5cdFx0XHRmb3IgKCB2YXIgaSA9IDAsIGwgPSBpbnN0YW5jZUNhbWVyYXMubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcblxuXHRcdFx0XHR2YXIgaW5zdGFuY2VDYW1lcmEgPSBnZXRDYW1lcmEoIGluc3RhbmNlQ2FtZXJhc1sgaSBdICk7XG5cblx0XHRcdFx0aWYgKCBpbnN0YW5jZUNhbWVyYSAhPT0gbnVsbCApIHtcblxuXHRcdFx0XHRcdG9iamVjdHMucHVzaCggaW5zdGFuY2VDYW1lcmEuY2xvbmUoKSApO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fVxuXG5cdFx0XHQvLyBpbnN0YW5jZSBjb250cm9sbGVyc1xuXG5cdFx0XHRmb3IgKCB2YXIgaSA9IDAsIGwgPSBpbnN0YW5jZUNvbnRyb2xsZXJzLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG5cblx0XHRcdFx0dmFyIGluc3RhbmNlID0gaW5zdGFuY2VDb250cm9sbGVyc1sgaSBdO1xuXHRcdFx0XHR2YXIgY29udHJvbGxlciA9IGdldENvbnRyb2xsZXIoIGluc3RhbmNlLmlkICk7XG5cdFx0XHRcdHZhciBnZW9tZXRyaWVzID0gZ2V0R2VvbWV0cnkoIGNvbnRyb2xsZXIuaWQgKTtcblx0XHRcdFx0dmFyIG5ld09iamVjdHMgPSBidWlsZE9iamVjdHMoIGdlb21ldHJpZXMsIGluc3RhbmNlLm1hdGVyaWFscyApO1xuXG5cdFx0XHRcdHZhciBza2VsZXRvbnMgPSBpbnN0YW5jZS5za2VsZXRvbnM7XG5cdFx0XHRcdHZhciBqb2ludHMgPSBjb250cm9sbGVyLnNraW4uam9pbnRzO1xuXG5cdFx0XHRcdHZhciBza2VsZXRvbiA9IGJ1aWxkU2tlbGV0b24oIHNrZWxldG9ucywgam9pbnRzICk7XG5cblx0XHRcdFx0Zm9yICggdmFyIGogPSAwLCBqbCA9IG5ld09iamVjdHMubGVuZ3RoOyBqIDwgamw7IGogKysgKSB7XG5cblx0XHRcdFx0XHR2YXIgb2JqZWN0ID0gbmV3T2JqZWN0c1sgaiBdO1xuXG5cdFx0XHRcdFx0aWYgKCBvYmplY3QuaXNTa2lubmVkTWVzaCApIHtcblxuXHRcdFx0XHRcdFx0b2JqZWN0LmJpbmQoIHNrZWxldG9uLCBjb250cm9sbGVyLnNraW4uYmluZE1hdHJpeCApO1xuXHRcdFx0XHRcdFx0b2JqZWN0Lm5vcm1hbGl6ZVNraW5XZWlnaHRzKCk7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRvYmplY3RzLnB1c2goIG9iamVjdCApO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fVxuXG5cdFx0XHQvLyBpbnN0YW5jZSBsaWdodHNcblxuXHRcdFx0Zm9yICggdmFyIGkgPSAwLCBsID0gaW5zdGFuY2VMaWdodHMubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcblxuXHRcdFx0XHR2YXIgaW5zdGFuY2VMaWdodCA9IGdldExpZ2h0KCBpbnN0YW5jZUxpZ2h0c1sgaSBdICk7XG5cblx0XHRcdFx0aWYgKCBpbnN0YW5jZUxpZ2h0ICE9PSBudWxsICkge1xuXG5cdFx0XHRcdFx0b2JqZWN0cy5wdXNoKCBpbnN0YW5jZUxpZ2h0LmNsb25lKCkgKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdH1cblxuXHRcdFx0Ly8gaW5zdGFuY2UgZ2VvbWV0cmllc1xuXG5cdFx0XHRmb3IgKCB2YXIgaSA9IDAsIGwgPSBpbnN0YW5jZUdlb21ldHJpZXMubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcblxuXHRcdFx0XHR2YXIgaW5zdGFuY2UgPSBpbnN0YW5jZUdlb21ldHJpZXNbIGkgXTtcblxuXHRcdFx0XHQvLyBhIHNpbmdsZSBnZW9tZXRyeSBpbnN0YW5jZSBpbiBjb2xsYWRhIGNhbiBsZWFkIHRvIG11bHRpcGxlIG9iamVjdDNEcy5cblx0XHRcdFx0Ly8gdGhpcyBpcyB0aGUgY2FzZSB3aGVuIHByaW1pdGl2ZXMgYXJlIGNvbWJpbmVkIGxpa2UgdHJpYW5nbGVzIGFuZCBsaW5lc1xuXG5cdFx0XHRcdHZhciBnZW9tZXRyaWVzID0gZ2V0R2VvbWV0cnkoIGluc3RhbmNlLmlkICk7XG5cdFx0XHRcdHZhciBuZXdPYmplY3RzID0gYnVpbGRPYmplY3RzKCBnZW9tZXRyaWVzLCBpbnN0YW5jZS5tYXRlcmlhbHMgKTtcblxuXHRcdFx0XHRmb3IgKCB2YXIgaiA9IDAsIGpsID0gbmV3T2JqZWN0cy5sZW5ndGg7IGogPCBqbDsgaiArKyApIHtcblxuXHRcdFx0XHRcdG9iamVjdHMucHVzaCggbmV3T2JqZWN0c1sgaiBdICk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9XG5cblx0XHRcdC8vIGluc3RhbmNlIG5vZGVzXG5cblx0XHRcdGZvciAoIHZhciBpID0gMCwgbCA9IGluc3RhbmNlTm9kZXMubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcblxuXHRcdFx0XHRvYmplY3RzLnB1c2goIGdldE5vZGUoIGluc3RhbmNlTm9kZXNbIGkgXSApLmNsb25lKCkgKTtcblxuXHRcdFx0fVxuXG5cdFx0XHR2YXIgb2JqZWN0O1xuXG5cdFx0XHRpZiAoIG5vZGVzLmxlbmd0aCA9PT0gMCAmJiBvYmplY3RzLmxlbmd0aCA9PT0gMSApIHtcblxuXHRcdFx0XHRvYmplY3QgPSBvYmplY3RzWyAwIF07XG5cblx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0b2JqZWN0ID0gKCB0eXBlID09PSAnSk9JTlQnICkgPyBuZXcgQm9uZSgpIDogbmV3IEdyb3VwKCk7XG5cblx0XHRcdFx0Zm9yICggdmFyIGkgPSAwOyBpIDwgb2JqZWN0cy5sZW5ndGg7IGkgKysgKSB7XG5cblx0XHRcdFx0XHRvYmplY3QuYWRkKCBvYmplY3RzWyBpIF0gKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdH1cblxuXHRcdFx0b2JqZWN0Lm5hbWUgPSAoIHR5cGUgPT09ICdKT0lOVCcgKSA/IGRhdGEuc2lkIDogZGF0YS5uYW1lO1xuXHRcdFx0b2JqZWN0Lm1hdHJpeC5jb3B5KCBtYXRyaXggKTtcblx0XHRcdG9iamVjdC5tYXRyaXguZGVjb21wb3NlKCBvYmplY3QucG9zaXRpb24sIG9iamVjdC5xdWF0ZXJuaW9uLCBvYmplY3Quc2NhbGUgKTtcblxuXHRcdFx0cmV0dXJuIG9iamVjdDtcblxuXHRcdH1cblxuXHRcdHZhciBmYWxsYmFja01hdGVyaWFsID0gbmV3IE1lc2hCYXNpY01hdGVyaWFsKCB7IGNvbG9yOiAweGZmMDBmZiB9ICk7XG5cblx0XHRmdW5jdGlvbiByZXNvbHZlTWF0ZXJpYWxCaW5kaW5nKCBrZXlzLCBpbnN0YW5jZU1hdGVyaWFscyApIHtcblxuXHRcdFx0dmFyIG1hdGVyaWFscyA9IFtdO1xuXG5cdFx0XHRmb3IgKCB2YXIgaSA9IDAsIGwgPSBrZXlzLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG5cblx0XHRcdFx0dmFyIGlkID0gaW5zdGFuY2VNYXRlcmlhbHNbIGtleXNbIGkgXSBdO1xuXG5cdFx0XHRcdGlmICggaWQgPT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0XHRcdGNvbnNvbGUud2FybiggJ1RIUkVFLkNvbGxhZGFMb2FkZXI6IE1hdGVyaWFsIHdpdGgga2V5ICVzIG5vdCBmb3VuZC4gQXBwbHkgZmFsbGJhY2sgbWF0ZXJpYWwuJywga2V5c1sgaSBdICk7XG5cdFx0XHRcdFx0bWF0ZXJpYWxzLnB1c2goIGZhbGxiYWNrTWF0ZXJpYWwgKTtcblxuXHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0bWF0ZXJpYWxzLnB1c2goIGdldE1hdGVyaWFsKCBpZCApICk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBtYXRlcmlhbHM7XG5cblx0XHR9XG5cblx0XHRmdW5jdGlvbiBidWlsZE9iamVjdHMoIGdlb21ldHJpZXMsIGluc3RhbmNlTWF0ZXJpYWxzICkge1xuXG5cdFx0XHR2YXIgb2JqZWN0cyA9IFtdO1xuXG5cdFx0XHRmb3IgKCB2YXIgdHlwZSBpbiBnZW9tZXRyaWVzICkge1xuXG5cdFx0XHRcdHZhciBnZW9tZXRyeSA9IGdlb21ldHJpZXNbIHR5cGUgXTtcblxuXHRcdFx0XHR2YXIgbWF0ZXJpYWxzID0gcmVzb2x2ZU1hdGVyaWFsQmluZGluZyggZ2VvbWV0cnkubWF0ZXJpYWxLZXlzLCBpbnN0YW5jZU1hdGVyaWFscyApO1xuXG5cdFx0XHRcdC8vIGhhbmRsZSBjYXNlIGlmIG5vIG1hdGVyaWFscyBhcmUgZGVmaW5lZFxuXG5cdFx0XHRcdGlmICggbWF0ZXJpYWxzLmxlbmd0aCA9PT0gMCApIHtcblxuXHRcdFx0XHRcdGlmICggdHlwZSA9PT0gJ2xpbmVzJyB8fCB0eXBlID09PSAnbGluZXN0cmlwcycgKSB7XG5cblx0XHRcdFx0XHRcdG1hdGVyaWFscy5wdXNoKCBuZXcgTGluZUJhc2ljTWF0ZXJpYWwoKSApO1xuXG5cdFx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdFx0bWF0ZXJpYWxzLnB1c2goIG5ldyBNZXNoUGhvbmdNYXRlcmlhbCgpICk7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIHJlZ2FyZCBza2lubmluZ1xuXG5cdFx0XHRcdHZhciBza2lubmluZyA9ICggZ2VvbWV0cnkuZGF0YS5hdHRyaWJ1dGVzLnNraW5JbmRleCAhPT0gdW5kZWZpbmVkICk7XG5cblx0XHRcdFx0aWYgKCBza2lubmluZyApIHtcblxuXHRcdFx0XHRcdGZvciAoIHZhciBpID0gMCwgbCA9IG1hdGVyaWFscy5sZW5ndGg7IGkgPCBsOyBpICsrICkge1xuXG5cdFx0XHRcdFx0XHRtYXRlcmlhbHNbIGkgXS5za2lubmluZyA9IHRydWU7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIGNob29zZSBiZXR3ZWVuIGEgc2luZ2xlIG9yIG11bHRpIG1hdGVyaWFscyAobWF0ZXJpYWwgYXJyYXkpXG5cblx0XHRcdFx0dmFyIG1hdGVyaWFsID0gKCBtYXRlcmlhbHMubGVuZ3RoID09PSAxICkgPyBtYXRlcmlhbHNbIDAgXSA6IG1hdGVyaWFscztcblxuXHRcdFx0XHQvLyBub3cgY3JlYXRlIGEgc3BlY2lmaWMgM0Qgb2JqZWN0XG5cblx0XHRcdFx0dmFyIG9iamVjdDtcblxuXHRcdFx0XHRzd2l0Y2ggKCB0eXBlICkge1xuXG5cdFx0XHRcdFx0Y2FzZSAnbGluZXMnOlxuXHRcdFx0XHRcdFx0b2JqZWN0ID0gbmV3IExpbmVTZWdtZW50cyggZ2VvbWV0cnkuZGF0YSwgbWF0ZXJpYWwgKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0Y2FzZSAnbGluZXN0cmlwcyc6XG5cdFx0XHRcdFx0XHRvYmplY3QgPSBuZXcgTGluZSggZ2VvbWV0cnkuZGF0YSwgbWF0ZXJpYWwgKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0Y2FzZSAndHJpYW5nbGVzJzpcblx0XHRcdFx0XHRjYXNlICdwb2x5bGlzdCc6XG5cdFx0XHRcdFx0XHRpZiAoIHNraW5uaW5nICkge1xuXG5cdFx0XHRcdFx0XHRcdG9iamVjdCA9IG5ldyBTa2lubmVkTWVzaCggZ2VvbWV0cnkuZGF0YSwgbWF0ZXJpYWwgKTtcblxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdFx0XHRvYmplY3QgPSBuZXcgTWVzaCggZ2VvbWV0cnkuZGF0YSwgbWF0ZXJpYWwgKTtcblxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHR9XG5cblx0XHRcdFx0b2JqZWN0cy5wdXNoKCBvYmplY3QgKTtcblxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gb2JqZWN0cztcblxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGhhc05vZGUoIGlkICkge1xuXG5cdFx0XHRyZXR1cm4gbGlicmFyeS5ub2Rlc1sgaWQgXSAhPT0gdW5kZWZpbmVkO1xuXG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gZ2V0Tm9kZSggaWQgKSB7XG5cblx0XHRcdHJldHVybiBnZXRCdWlsZCggbGlicmFyeS5ub2Rlc1sgaWQgXSwgYnVpbGROb2RlICk7XG5cblx0XHR9XG5cblx0XHQvLyB2aXN1YWwgc2NlbmVzXG5cblx0XHRmdW5jdGlvbiBwYXJzZVZpc3VhbFNjZW5lKCB4bWwgKSB7XG5cblx0XHRcdHZhciBkYXRhID0ge1xuXHRcdFx0XHRuYW1lOiB4bWwuZ2V0QXR0cmlidXRlKCAnbmFtZScgKSxcblx0XHRcdFx0Y2hpbGRyZW46IFtdXG5cdFx0XHR9O1xuXG5cdFx0XHRwcmVwYXJlTm9kZXMoIHhtbCApO1xuXG5cdFx0XHR2YXIgZWxlbWVudHMgPSBnZXRFbGVtZW50c0J5VGFnTmFtZSggeG1sLCAnbm9kZScgKTtcblxuXHRcdFx0Zm9yICggdmFyIGkgPSAwOyBpIDwgZWxlbWVudHMubGVuZ3RoOyBpICsrICkge1xuXG5cdFx0XHRcdGRhdGEuY2hpbGRyZW4ucHVzaCggcGFyc2VOb2RlKCBlbGVtZW50c1sgaSBdICkgKTtcblxuXHRcdFx0fVxuXG5cdFx0XHRsaWJyYXJ5LnZpc3VhbFNjZW5lc1sgeG1sLmdldEF0dHJpYnV0ZSggJ2lkJyApIF0gPSBkYXRhO1xuXG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gYnVpbGRWaXN1YWxTY2VuZSggZGF0YSApIHtcblxuXHRcdFx0dmFyIGdyb3VwID0gbmV3IEdyb3VwKCk7XG5cdFx0XHRncm91cC5uYW1lID0gZGF0YS5uYW1lO1xuXG5cdFx0XHR2YXIgY2hpbGRyZW4gPSBkYXRhLmNoaWxkcmVuO1xuXG5cdFx0XHRmb3IgKCB2YXIgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkgKysgKSB7XG5cblx0XHRcdFx0dmFyIGNoaWxkID0gY2hpbGRyZW5bIGkgXTtcblxuXHRcdFx0XHRncm91cC5hZGQoIGdldE5vZGUoIGNoaWxkLmlkICkgKTtcblxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gZ3JvdXA7XG5cblx0XHR9XG5cblx0XHRmdW5jdGlvbiBoYXNWaXN1YWxTY2VuZSggaWQgKSB7XG5cblx0XHRcdHJldHVybiBsaWJyYXJ5LnZpc3VhbFNjZW5lc1sgaWQgXSAhPT0gdW5kZWZpbmVkO1xuXG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gZ2V0VmlzdWFsU2NlbmUoIGlkICkge1xuXG5cdFx0XHRyZXR1cm4gZ2V0QnVpbGQoIGxpYnJhcnkudmlzdWFsU2NlbmVzWyBpZCBdLCBidWlsZFZpc3VhbFNjZW5lICk7XG5cblx0XHR9XG5cblx0XHQvLyBzY2VuZXNcblxuXHRcdGZ1bmN0aW9uIHBhcnNlU2NlbmUoIHhtbCApIHtcblxuXHRcdFx0dmFyIGluc3RhbmNlID0gZ2V0RWxlbWVudHNCeVRhZ05hbWUoIHhtbCwgJ2luc3RhbmNlX3Zpc3VhbF9zY2VuZScgKVsgMCBdO1xuXHRcdFx0cmV0dXJuIGdldFZpc3VhbFNjZW5lKCBwYXJzZUlkKCBpbnN0YW5jZS5nZXRBdHRyaWJ1dGUoICd1cmwnICkgKSApO1xuXG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gc2V0dXBBbmltYXRpb25zKCkge1xuXG5cdFx0XHR2YXIgY2xpcHMgPSBsaWJyYXJ5LmNsaXBzO1xuXG5cdFx0XHRpZiAoIGlzRW1wdHkoIGNsaXBzICkgPT09IHRydWUgKSB7XG5cblx0XHRcdFx0aWYgKCBpc0VtcHR5KCBsaWJyYXJ5LmFuaW1hdGlvbnMgKSA9PT0gZmFsc2UgKSB7XG5cblx0XHRcdFx0XHQvLyBpZiB0aGVyZSBhcmUgYW5pbWF0aW9ucyBidXQgbm8gY2xpcHMsIHdlIGNyZWF0ZSBhIGRlZmF1bHQgY2xpcCBmb3IgcGxheWJhY2tcblxuXHRcdFx0XHRcdHZhciB0cmFja3MgPSBbXTtcblxuXHRcdFx0XHRcdGZvciAoIHZhciBpZCBpbiBsaWJyYXJ5LmFuaW1hdGlvbnMgKSB7XG5cblx0XHRcdFx0XHRcdHZhciBhbmltYXRpb25UcmFja3MgPSBnZXRBbmltYXRpb24oIGlkICk7XG5cblx0XHRcdFx0XHRcdGZvciAoIHZhciBpID0gMCwgbCA9IGFuaW1hdGlvblRyYWNrcy5sZW5ndGg7IGkgPCBsOyBpICsrICkge1xuXG5cdFx0XHRcdFx0XHRcdHRyYWNrcy5wdXNoKCBhbmltYXRpb25UcmFja3NbIGkgXSApO1xuXG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRhbmltYXRpb25zLnB1c2goIG5ldyBBbmltYXRpb25DbGlwKCAnZGVmYXVsdCcsIC0gMSwgdHJhY2tzICkgKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0Zm9yICggdmFyIGlkIGluIGNsaXBzICkge1xuXG5cdFx0XHRcdFx0YW5pbWF0aW9ucy5wdXNoKCBnZXRBbmltYXRpb25DbGlwKCBpZCApICk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9XG5cblx0XHR9XG5cblx0XHQvLyBjb252ZXJ0IHRoZSBwYXJzZXIgZXJyb3IgZWxlbWVudCBpbnRvIHRleHQgd2l0aCBlYWNoIGNoaWxkIGVsZW1lbnRzIHRleHRcblx0XHQvLyBzZXBhcmF0ZWQgYnkgbmV3IGxpbmVzLlxuXG5cdFx0ZnVuY3Rpb24gcGFyc2VyRXJyb3JUb1RleHQoIHBhcnNlckVycm9yICkge1xuXG5cdFx0XHR2YXIgcmVzdWx0ID0gJyc7XG5cdFx0XHR2YXIgc3RhY2sgPSBbIHBhcnNlckVycm9yIF07XG5cblx0XHRcdHdoaWxlICggc3RhY2subGVuZ3RoICkge1xuXG5cdFx0XHRcdHZhciBub2RlID0gc3RhY2suc2hpZnQoKTtcblxuXHRcdFx0XHRpZiAoIG5vZGUubm9kZVR5cGUgPT09IE5vZGUuVEVYVF9OT0RFICkge1xuXG5cdFx0XHRcdFx0cmVzdWx0ICs9IG5vZGUudGV4dENvbnRlbnQ7XG5cblx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdHJlc3VsdCArPSAnXFxuJztcblx0XHRcdFx0XHRzdGFjay5wdXNoLmFwcGx5KCBzdGFjaywgbm9kZS5jaGlsZE5vZGVzICk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiByZXN1bHQudHJpbSgpO1xuXG5cdFx0fVxuXG5cdFx0aWYgKCB0ZXh0Lmxlbmd0aCA9PT0gMCApIHtcblxuXHRcdFx0cmV0dXJuIHsgc2NlbmU6IG5ldyBTY2VuZSgpIH07XG5cblx0XHR9XG5cblx0XHR2YXIgeG1sID0gbmV3IERPTVBhcnNlcigpLnBhcnNlRnJvbVN0cmluZyggdGV4dCwgJ2FwcGxpY2F0aW9uL3htbCcgKTtcblxuXHRcdHZhciBjb2xsYWRhID0gZ2V0RWxlbWVudHNCeVRhZ05hbWUoIHhtbCwgJ0NPTExBREEnIClbIDAgXTtcblxuXHRcdHZhciBwYXJzZXJFcnJvciA9IHhtbC5nZXRFbGVtZW50c0J5VGFnTmFtZSggJ3BhcnNlcmVycm9yJyApWyAwIF07XG5cdFx0aWYgKCBwYXJzZXJFcnJvciAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHQvLyBDaHJvbWUgd2lsbCByZXR1cm4gcGFyc2VyIGVycm9yIHdpdGggYSBkaXYgaW4gaXRcblxuXHRcdFx0dmFyIGVycm9yRWxlbWVudCA9IGdldEVsZW1lbnRzQnlUYWdOYW1lKCBwYXJzZXJFcnJvciwgJ2RpdicgKVsgMCBdO1xuXHRcdFx0dmFyIGVycm9yVGV4dDtcblxuXHRcdFx0aWYgKCBlcnJvckVsZW1lbnQgKSB7XG5cblx0XHRcdFx0ZXJyb3JUZXh0ID0gZXJyb3JFbGVtZW50LnRleHRDb250ZW50O1xuXG5cdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdGVycm9yVGV4dCA9IHBhcnNlckVycm9yVG9UZXh0KCBwYXJzZXJFcnJvciApO1xuXG5cdFx0XHR9XG5cblx0XHRcdGNvbnNvbGUuZXJyb3IoICdUSFJFRS5Db2xsYWRhTG9hZGVyOiBGYWlsZWQgdG8gcGFyc2UgY29sbGFkYSBmaWxlLlxcbicsIGVycm9yVGV4dCApO1xuXG5cdFx0XHRyZXR1cm4gbnVsbDtcblxuXHRcdH1cblxuXHRcdC8vIG1ldGFkYXRhXG5cblx0XHR2YXIgdmVyc2lvbiA9IGNvbGxhZGEuZ2V0QXR0cmlidXRlKCAndmVyc2lvbicgKTtcblx0XHRjb25zb2xlLmxvZyggJ1RIUkVFLkNvbGxhZGFMb2FkZXI6IEZpbGUgdmVyc2lvbicsIHZlcnNpb24gKTtcblxuXHRcdHZhciBhc3NldCA9IHBhcnNlQXNzZXQoIGdldEVsZW1lbnRzQnlUYWdOYW1lKCBjb2xsYWRhLCAnYXNzZXQnIClbIDAgXSApO1xuXHRcdHZhciB0ZXh0dXJlTG9hZGVyID0gbmV3IFRleHR1cmVMb2FkZXIoIHRoaXMubWFuYWdlciApO1xuXHRcdHRleHR1cmVMb2FkZXIuc2V0UGF0aCggdGhpcy5yZXNvdXJjZVBhdGggfHwgcGF0aCApLnNldENyb3NzT3JpZ2luKCB0aGlzLmNyb3NzT3JpZ2luICk7XG5cblx0XHR2YXIgdGdhTG9hZGVyO1xuXG5cdFx0aWYgKCBUR0FMb2FkZXIgKSB7XG5cblx0XHRcdHRnYUxvYWRlciA9IG5ldyBUR0FMb2FkZXIoIHRoaXMubWFuYWdlciApO1xuXHRcdFx0dGdhTG9hZGVyLnNldFBhdGgoIHRoaXMucmVzb3VyY2VQYXRoIHx8IHBhdGggKTtcblxuXHRcdH1cblxuXHRcdC8vXG5cblx0XHR2YXIgYW5pbWF0aW9ucyA9IFtdO1xuXHRcdHZhciBraW5lbWF0aWNzID0ge307XG5cdFx0dmFyIGNvdW50ID0gMDtcblxuXHRcdC8vXG5cblx0XHR2YXIgbGlicmFyeSA9IHtcblx0XHRcdGFuaW1hdGlvbnM6IHt9LFxuXHRcdFx0Y2xpcHM6IHt9LFxuXHRcdFx0Y29udHJvbGxlcnM6IHt9LFxuXHRcdFx0aW1hZ2VzOiB7fSxcblx0XHRcdGVmZmVjdHM6IHt9LFxuXHRcdFx0bWF0ZXJpYWxzOiB7fSxcblx0XHRcdGNhbWVyYXM6IHt9LFxuXHRcdFx0bGlnaHRzOiB7fSxcblx0XHRcdGdlb21ldHJpZXM6IHt9LFxuXHRcdFx0bm9kZXM6IHt9LFxuXHRcdFx0dmlzdWFsU2NlbmVzOiB7fSxcblx0XHRcdGtpbmVtYXRpY3NNb2RlbHM6IHt9LFxuXHRcdFx0cGh5c2ljc01vZGVsczoge30sXG5cdFx0XHRraW5lbWF0aWNzU2NlbmVzOiB7fVxuXHRcdH07XG5cblx0XHRwYXJzZUxpYnJhcnkoIGNvbGxhZGEsICdsaWJyYXJ5X2FuaW1hdGlvbnMnLCAnYW5pbWF0aW9uJywgcGFyc2VBbmltYXRpb24gKTtcblx0XHRwYXJzZUxpYnJhcnkoIGNvbGxhZGEsICdsaWJyYXJ5X2FuaW1hdGlvbl9jbGlwcycsICdhbmltYXRpb25fY2xpcCcsIHBhcnNlQW5pbWF0aW9uQ2xpcCApO1xuXHRcdHBhcnNlTGlicmFyeSggY29sbGFkYSwgJ2xpYnJhcnlfY29udHJvbGxlcnMnLCAnY29udHJvbGxlcicsIHBhcnNlQ29udHJvbGxlciApO1xuXHRcdHBhcnNlTGlicmFyeSggY29sbGFkYSwgJ2xpYnJhcnlfaW1hZ2VzJywgJ2ltYWdlJywgcGFyc2VJbWFnZSApO1xuXHRcdHBhcnNlTGlicmFyeSggY29sbGFkYSwgJ2xpYnJhcnlfZWZmZWN0cycsICdlZmZlY3QnLCBwYXJzZUVmZmVjdCApO1xuXHRcdHBhcnNlTGlicmFyeSggY29sbGFkYSwgJ2xpYnJhcnlfbWF0ZXJpYWxzJywgJ21hdGVyaWFsJywgcGFyc2VNYXRlcmlhbCApO1xuXHRcdHBhcnNlTGlicmFyeSggY29sbGFkYSwgJ2xpYnJhcnlfY2FtZXJhcycsICdjYW1lcmEnLCBwYXJzZUNhbWVyYSApO1xuXHRcdHBhcnNlTGlicmFyeSggY29sbGFkYSwgJ2xpYnJhcnlfbGlnaHRzJywgJ2xpZ2h0JywgcGFyc2VMaWdodCApO1xuXHRcdHBhcnNlTGlicmFyeSggY29sbGFkYSwgJ2xpYnJhcnlfZ2VvbWV0cmllcycsICdnZW9tZXRyeScsIHBhcnNlR2VvbWV0cnkgKTtcblx0XHRwYXJzZUxpYnJhcnkoIGNvbGxhZGEsICdsaWJyYXJ5X25vZGVzJywgJ25vZGUnLCBwYXJzZU5vZGUgKTtcblx0XHRwYXJzZUxpYnJhcnkoIGNvbGxhZGEsICdsaWJyYXJ5X3Zpc3VhbF9zY2VuZXMnLCAndmlzdWFsX3NjZW5lJywgcGFyc2VWaXN1YWxTY2VuZSApO1xuXHRcdHBhcnNlTGlicmFyeSggY29sbGFkYSwgJ2xpYnJhcnlfa2luZW1hdGljc19tb2RlbHMnLCAna2luZW1hdGljc19tb2RlbCcsIHBhcnNlS2luZW1hdGljc01vZGVsICk7XG5cdFx0cGFyc2VMaWJyYXJ5KCBjb2xsYWRhLCAnbGlicmFyeV9waHlzaWNzX21vZGVscycsICdwaHlzaWNzX21vZGVsJywgcGFyc2VQaHlzaWNzTW9kZWwgKTtcblx0XHRwYXJzZUxpYnJhcnkoIGNvbGxhZGEsICdzY2VuZScsICdpbnN0YW5jZV9raW5lbWF0aWNzX3NjZW5lJywgcGFyc2VLaW5lbWF0aWNzU2NlbmUgKTtcblxuXHRcdGJ1aWxkTGlicmFyeSggbGlicmFyeS5hbmltYXRpb25zLCBidWlsZEFuaW1hdGlvbiApO1xuXHRcdGJ1aWxkTGlicmFyeSggbGlicmFyeS5jbGlwcywgYnVpbGRBbmltYXRpb25DbGlwICk7XG5cdFx0YnVpbGRMaWJyYXJ5KCBsaWJyYXJ5LmNvbnRyb2xsZXJzLCBidWlsZENvbnRyb2xsZXIgKTtcblx0XHRidWlsZExpYnJhcnkoIGxpYnJhcnkuaW1hZ2VzLCBidWlsZEltYWdlICk7XG5cdFx0YnVpbGRMaWJyYXJ5KCBsaWJyYXJ5LmVmZmVjdHMsIGJ1aWxkRWZmZWN0ICk7XG5cdFx0YnVpbGRMaWJyYXJ5KCBsaWJyYXJ5Lm1hdGVyaWFscywgYnVpbGRNYXRlcmlhbCApO1xuXHRcdGJ1aWxkTGlicmFyeSggbGlicmFyeS5jYW1lcmFzLCBidWlsZENhbWVyYSApO1xuXHRcdGJ1aWxkTGlicmFyeSggbGlicmFyeS5saWdodHMsIGJ1aWxkTGlnaHQgKTtcblx0XHRidWlsZExpYnJhcnkoIGxpYnJhcnkuZ2VvbWV0cmllcywgYnVpbGRHZW9tZXRyeSApO1xuXHRcdGJ1aWxkTGlicmFyeSggbGlicmFyeS52aXN1YWxTY2VuZXMsIGJ1aWxkVmlzdWFsU2NlbmUgKTtcblxuXHRcdHNldHVwQW5pbWF0aW9ucygpO1xuXHRcdHNldHVwS2luZW1hdGljcygpO1xuXG5cdFx0dmFyIHNjZW5lID0gcGFyc2VTY2VuZSggZ2V0RWxlbWVudHNCeVRhZ05hbWUoIGNvbGxhZGEsICdzY2VuZScgKVsgMCBdICk7XG5cdFx0c2NlbmUuYW5pbWF0aW9ucyA9IGFuaW1hdGlvbnM7XG5cblx0XHRpZiAoIGFzc2V0LnVwQXhpcyA9PT0gJ1pfVVAnICkge1xuXG5cdFx0XHRzY2VuZS5xdWF0ZXJuaW9uLnNldEZyb21FdWxlciggbmV3IEV1bGVyKCAtIE1hdGguUEkgLyAyLCAwLCAwICkgKTtcblxuXHRcdH1cblxuXHRcdHNjZW5lLnNjYWxlLm11bHRpcGx5U2NhbGFyKCBhc3NldC51bml0ICk7XG5cblx0XHRyZXR1cm4ge1xuXHRcdFx0Z2V0IGFuaW1hdGlvbnMoKSB7XG5cblx0XHRcdFx0Y29uc29sZS53YXJuKCAnVEhSRUUuQ29sbGFkYUxvYWRlcjogUGxlYXNlIGFjY2VzcyBhbmltYXRpb25zIG92ZXIgc2NlbmUuYW5pbWF0aW9ucyBub3cuJyApO1xuXHRcdFx0XHRyZXR1cm4gYW5pbWF0aW9ucztcblxuXHRcdFx0fSxcblx0XHRcdGtpbmVtYXRpY3M6IGtpbmVtYXRpY3MsXG5cdFx0XHRsaWJyYXJ5OiBsaWJyYXJ5LFxuXHRcdFx0c2NlbmU6IHNjZW5lXG5cdFx0fTtcblxuXHR9XG5cbn0gKTtcblxuZXhwb3J0IHsgQ29sbGFkYUxvYWRlciB9O1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/three/examples/jsm/loaders/ColladaLoader.js\n");

/***/ }),

/***/ "./node_modules/three/examples/jsm/loaders/FBXLoader.js":
/*!**************************************************************!*\
  !*** ./node_modules/three/examples/jsm/loaders/FBXLoader.js ***!
  \**************************************************************/
/*! exports provided: FBXLoader */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"FBXLoader\", function() { return FBXLoader; });\n/* harmony import */ var _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../build/three.module.js */ \"./node_modules/three/build/three.module.js\");\n/* harmony import */ var _libs_fflate_module_min_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../libs/fflate.module.min.js */ \"./node_modules/three/examples/jsm/libs/fflate.module.min.js\");\n/* harmony import */ var _curves_NURBSCurve_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../curves/NURBSCurve.js */ \"./node_modules/three/examples/jsm/curves/NURBSCurve.js\");\n\n\n\n\n/**\n * Loader loads FBX file and generates Group representing FBX scene.\n * Requires FBX file to be >= 7.0 and in ASCII or >= 6400 in Binary format\n * Versions lower than this may load but will probably have errors\n *\n * Needs Support:\n *  Morph normals / blend shape normals\n *\n * FBX format references:\n * \thttps://wiki.blender.org/index.php/User:Mont29/Foundation/FBX_File_Structure\n * \thttp://help.autodesk.com/view/FBX/2017/ENU/?guid=__cpp_ref_index_html (C++ SDK reference)\n *\n * \tBinary format specification:\n *\t\thttps://code.blender.org/2013/08/fbx-binary-file-format-specification/\n */\n\n\nvar FBXLoader = ( function () {\n\n\tvar fbxTree;\n\tvar connections;\n\tvar sceneGraph;\n\n\tfunction FBXLoader( manager ) {\n\n\t\t_build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Loader\"].call( this, manager );\n\n\t}\n\n\tFBXLoader.prototype = Object.assign( Object.create( _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Loader\"].prototype ), {\n\n\t\tconstructor: FBXLoader,\n\n\t\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\t\tvar scope = this;\n\n\t\t\tvar path = ( scope.path === '' ) ? _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"LoaderUtils\"].extractUrlBase( url ) : scope.path;\n\n\t\t\tvar loader = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"FileLoader\"]( this.manager );\n\t\t\tloader.setPath( scope.path );\n\t\t\tloader.setResponseType( 'arraybuffer' );\n\t\t\tloader.setRequestHeader( scope.requestHeader );\n\t\t\tloader.setWithCredentials( scope.withCredentials );\n\n\t\t\tloader.load( url, function ( buffer ) {\n\n\t\t\t\ttry {\n\n\t\t\t\t\tonLoad( scope.parse( buffer, path ) );\n\n\t\t\t\t} catch ( e ) {\n\n\t\t\t\t\tif ( onError ) {\n\n\t\t\t\t\t\tonError( e );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconsole.error( e );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t\t}\n\n\t\t\t}, onProgress, onError );\n\n\t\t},\n\n\t\tparse: function ( FBXBuffer, path ) {\n\n\t\t\tif ( isFbxFormatBinary( FBXBuffer ) ) {\n\n\t\t\t\tfbxTree = new BinaryParser().parse( FBXBuffer );\n\n\t\t\t} else {\n\n\t\t\t\tvar FBXText = convertArrayBufferToString( FBXBuffer );\n\n\t\t\t\tif ( ! isFbxFormatASCII( FBXText ) ) {\n\n\t\t\t\t\tthrow new Error( 'THREE.FBXLoader: Unknown format.' );\n\n\t\t\t\t}\n\n\t\t\t\tif ( getFbxVersion( FBXText ) < 7000 ) {\n\n\t\t\t\t\tthrow new Error( 'THREE.FBXLoader: FBX version not supported, FileVersion: ' + getFbxVersion( FBXText ) );\n\n\t\t\t\t}\n\n\t\t\t\tfbxTree = new TextParser().parse( FBXText );\n\n\t\t\t}\n\n\t\t\t// console.log( fbxTree );\n\n\t\t\tvar textureLoader = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"TextureLoader\"]( this.manager ).setPath( this.resourcePath || path ).setCrossOrigin( this.crossOrigin );\n\n\t\t\treturn new FBXTreeParser( textureLoader, this.manager ).parse( fbxTree );\n\n\t\t}\n\n\t} );\n\n\t// Parse the FBXTree object returned by the BinaryParser or TextParser and return a Group\n\tfunction FBXTreeParser( textureLoader, manager ) {\n\n\t\tthis.textureLoader = textureLoader;\n\t\tthis.manager = manager;\n\n\t}\n\n\tFBXTreeParser.prototype = {\n\n\t\tconstructor: FBXTreeParser,\n\n\t\tparse: function () {\n\n\t\t\tconnections = this.parseConnections();\n\n\t\t\tvar images = this.parseImages();\n\t\t\tvar textures = this.parseTextures( images );\n\t\t\tvar materials = this.parseMaterials( textures );\n\t\t\tvar deformers = this.parseDeformers();\n\t\t\tvar geometryMap = new GeometryParser().parse( deformers );\n\n\t\t\tthis.parseScene( deformers, geometryMap, materials );\n\n\t\t\treturn sceneGraph;\n\n\t\t},\n\n\t\t// Parses FBXTree.Connections which holds parent-child connections between objects (e.g. material -> texture, model->geometry )\n\t\t// and details the connection type\n\t\tparseConnections: function () {\n\n\t\t\tvar connectionMap = new Map();\n\n\t\t\tif ( 'Connections' in fbxTree ) {\n\n\t\t\t\tvar rawConnections = fbxTree.Connections.connections;\n\n\t\t\t\trawConnections.forEach( function ( rawConnection ) {\n\n\t\t\t\t\tvar fromID = rawConnection[ 0 ];\n\t\t\t\t\tvar toID = rawConnection[ 1 ];\n\t\t\t\t\tvar relationship = rawConnection[ 2 ];\n\n\t\t\t\t\tif ( ! connectionMap.has( fromID ) ) {\n\n\t\t\t\t\t\tconnectionMap.set( fromID, {\n\t\t\t\t\t\t\tparents: [],\n\t\t\t\t\t\t\tchildren: []\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tvar parentRelationship = { ID: toID, relationship: relationship };\n\t\t\t\t\tconnectionMap.get( fromID ).parents.push( parentRelationship );\n\n\t\t\t\t\tif ( ! connectionMap.has( toID ) ) {\n\n\t\t\t\t\t\tconnectionMap.set( toID, {\n\t\t\t\t\t\t\tparents: [],\n\t\t\t\t\t\t\tchildren: []\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tvar childRelationship = { ID: fromID, relationship: relationship };\n\t\t\t\t\tconnectionMap.get( toID ).children.push( childRelationship );\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\treturn connectionMap;\n\n\t\t},\n\n\t\t// Parse FBXTree.Objects.Video for embedded image data\n\t\t// These images are connected to textures in FBXTree.Objects.Textures\n\t\t// via FBXTree.Connections.\n\t\tparseImages: function () {\n\n\t\t\tvar images = {};\n\t\t\tvar blobs = {};\n\n\t\t\tif ( 'Video' in fbxTree.Objects ) {\n\n\t\t\t\tvar videoNodes = fbxTree.Objects.Video;\n\n\t\t\t\tfor ( var nodeID in videoNodes ) {\n\n\t\t\t\t\tvar videoNode = videoNodes[ nodeID ];\n\n\t\t\t\t\tvar id = parseInt( nodeID );\n\n\t\t\t\t\timages[ id ] = videoNode.RelativeFilename || videoNode.Filename;\n\n\t\t\t\t\t// raw image data is in videoNode.Content\n\t\t\t\t\tif ( 'Content' in videoNode ) {\n\n\t\t\t\t\t\tvar arrayBufferContent = ( videoNode.Content instanceof ArrayBuffer ) && ( videoNode.Content.byteLength > 0 );\n\t\t\t\t\t\tvar base64Content = ( typeof videoNode.Content === 'string' ) && ( videoNode.Content !== '' );\n\n\t\t\t\t\t\tif ( arrayBufferContent || base64Content ) {\n\n\t\t\t\t\t\t\tvar image = this.parseImage( videoNodes[ nodeID ] );\n\n\t\t\t\t\t\t\tblobs[ videoNode.RelativeFilename || videoNode.Filename ] = image;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfor ( var id in images ) {\n\n\t\t\t\tvar filename = images[ id ];\n\n\t\t\t\tif ( blobs[ filename ] !== undefined ) images[ id ] = blobs[ filename ];\n\t\t\t\telse images[ id ] = images[ id ].split( '\\\\' ).pop();\n\n\t\t\t}\n\n\t\t\treturn images;\n\n\t\t},\n\n\t\t// Parse embedded image data in FBXTree.Video.Content\n\t\tparseImage: function ( videoNode ) {\n\n\t\t\tvar content = videoNode.Content;\n\t\t\tvar fileName = videoNode.RelativeFilename || videoNode.Filename;\n\t\t\tvar extension = fileName.slice( fileName.lastIndexOf( '.' ) + 1 ).toLowerCase();\n\n\t\t\tvar type;\n\n\t\t\tswitch ( extension ) {\n\n\t\t\t\tcase 'bmp':\n\n\t\t\t\t\ttype = 'image/bmp';\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'jpg':\n\t\t\t\tcase 'jpeg':\n\n\t\t\t\t\ttype = 'image/jpeg';\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'png':\n\n\t\t\t\t\ttype = 'image/png';\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'tif':\n\n\t\t\t\t\ttype = 'image/tiff';\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'tga':\n\n\t\t\t\t\tif ( this.manager.getHandler( '.tga' ) === null ) {\n\n\t\t\t\t\t\tconsole.warn( 'FBXLoader: TGA loader not found, skipping ', fileName );\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttype = 'image/tga';\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tconsole.warn( 'FBXLoader: Image type \"' + extension + '\" is not supported.' );\n\t\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tif ( typeof content === 'string' ) { // ASCII format\n\n\t\t\t\treturn 'data:' + type + ';base64,' + content;\n\n\t\t\t} else { // Binary Format\n\n\t\t\t\tvar array = new Uint8Array( content );\n\t\t\t\treturn window.URL.createObjectURL( new Blob( [ array ], { type: type } ) );\n\n\t\t\t}\n\n\t\t},\n\n\t\t// Parse nodes in FBXTree.Objects.Texture\n\t\t// These contain details such as UV scaling, cropping, rotation etc and are connected\n\t\t// to images in FBXTree.Objects.Video\n\t\tparseTextures: function ( images ) {\n\n\t\t\tvar textureMap = new Map();\n\n\t\t\tif ( 'Texture' in fbxTree.Objects ) {\n\n\t\t\t\tvar textureNodes = fbxTree.Objects.Texture;\n\t\t\t\tfor ( var nodeID in textureNodes ) {\n\n\t\t\t\t\tvar texture = this.parseTexture( textureNodes[ nodeID ], images );\n\t\t\t\t\ttextureMap.set( parseInt( nodeID ), texture );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn textureMap;\n\n\t\t},\n\n\t\t// Parse individual node in FBXTree.Objects.Texture\n\t\tparseTexture: function ( textureNode, images ) {\n\n\t\t\tvar texture = this.loadTexture( textureNode, images );\n\n\t\t\ttexture.ID = textureNode.id;\n\n\t\t\ttexture.name = textureNode.attrName;\n\n\t\t\tvar wrapModeU = textureNode.WrapModeU;\n\t\t\tvar wrapModeV = textureNode.WrapModeV;\n\n\t\t\tvar valueU = wrapModeU !== undefined ? wrapModeU.value : 0;\n\t\t\tvar valueV = wrapModeV !== undefined ? wrapModeV.value : 0;\n\n\t\t\t// http://download.autodesk.com/us/fbx/SDKdocs/FBX_SDK_Help/files/fbxsdkref/class_k_fbx_texture.html#889640e63e2e681259ea81061b85143a\n\t\t\t// 0: repeat(default), 1: clamp\n\n\t\t\ttexture.wrapS = valueU === 0 ? _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"RepeatWrapping\"] : _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"ClampToEdgeWrapping\"];\n\t\t\ttexture.wrapT = valueV === 0 ? _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"RepeatWrapping\"] : _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"ClampToEdgeWrapping\"];\n\n\t\t\tif ( 'Scaling' in textureNode ) {\n\n\t\t\t\tvar values = textureNode.Scaling.value;\n\n\t\t\t\ttexture.repeat.x = values[ 0 ];\n\t\t\t\ttexture.repeat.y = values[ 1 ];\n\n\t\t\t}\n\n\t\t\treturn texture;\n\n\t\t},\n\n\t\t// load a texture specified as a blob or data URI, or via an external URL using TextureLoader\n\t\tloadTexture: function ( textureNode, images ) {\n\n\t\t\tvar fileName;\n\n\t\t\tvar currentPath = this.textureLoader.path;\n\n\t\t\tvar children = connections.get( textureNode.id ).children;\n\n\t\t\tif ( children !== undefined && children.length > 0 && images[ children[ 0 ].ID ] !== undefined ) {\n\n\t\t\t\tfileName = images[ children[ 0 ].ID ];\n\n\t\t\t\tif ( fileName.indexOf( 'blob:' ) === 0 || fileName.indexOf( 'data:' ) === 0 ) {\n\n\t\t\t\t\tthis.textureLoader.setPath( undefined );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar texture;\n\n\t\t\tvar extension = textureNode.FileName.slice( - 3 ).toLowerCase();\n\n\t\t\tif ( extension === 'tga' ) {\n\n\t\t\t\tvar loader = this.manager.getHandler( '.tga' );\n\n\t\t\t\tif ( loader === null ) {\n\n\t\t\t\t\tconsole.warn( 'FBXLoader: TGA loader not found, creating placeholder texture for', textureNode.RelativeFilename );\n\t\t\t\t\ttexture = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Texture\"]();\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttexture = loader.load( fileName );\n\n\t\t\t\t}\n\n\t\t\t} else if ( extension === 'psd' ) {\n\n\t\t\t\tconsole.warn( 'FBXLoader: PSD textures are not supported, creating placeholder texture for', textureNode.RelativeFilename );\n\t\t\t\ttexture = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Texture\"]();\n\n\t\t\t} else {\n\n\t\t\t\ttexture = this.textureLoader.load( fileName );\n\n\t\t\t}\n\n\t\t\tthis.textureLoader.setPath( currentPath );\n\n\t\t\treturn texture;\n\n\t\t},\n\n\t\t// Parse nodes in FBXTree.Objects.Material\n\t\tparseMaterials: function ( textureMap ) {\n\n\t\t\tvar materialMap = new Map();\n\n\t\t\tif ( 'Material' in fbxTree.Objects ) {\n\n\t\t\t\tvar materialNodes = fbxTree.Objects.Material;\n\n\t\t\t\tfor ( var nodeID in materialNodes ) {\n\n\t\t\t\t\tvar material = this.parseMaterial( materialNodes[ nodeID ], textureMap );\n\n\t\t\t\t\tif ( material !== null ) materialMap.set( parseInt( nodeID ), material );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn materialMap;\n\n\t\t},\n\n\t\t// Parse single node in FBXTree.Objects.Material\n\t\t// Materials are connected to texture maps in FBXTree.Objects.Textures\n\t\t// FBX format currently only supports Lambert and Phong shading models\n\t\tparseMaterial: function ( materialNode, textureMap ) {\n\n\t\t\tvar ID = materialNode.id;\n\t\t\tvar name = materialNode.attrName;\n\t\t\tvar type = materialNode.ShadingModel;\n\n\t\t\t// Case where FBX wraps shading model in property object.\n\t\t\tif ( typeof type === 'object' ) {\n\n\t\t\t\ttype = type.value;\n\n\t\t\t}\n\n\t\t\t// Ignore unused materials which don't have any connections.\n\t\t\tif ( ! connections.has( ID ) ) return null;\n\n\t\t\tvar parameters = this.parseParameters( materialNode, textureMap, ID );\n\n\t\t\tvar material;\n\n\t\t\tswitch ( type.toLowerCase() ) {\n\n\t\t\t\tcase 'phong':\n\t\t\t\t\tmaterial = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"MeshPhongMaterial\"]();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'lambert':\n\t\t\t\t\tmaterial = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"MeshLambertMaterial\"]();\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tconsole.warn( 'THREE.FBXLoader: unknown material type \"%s\". Defaulting to MeshPhongMaterial.', type );\n\t\t\t\t\tmaterial = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"MeshPhongMaterial\"]();\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tmaterial.setValues( parameters );\n\t\t\tmaterial.name = name;\n\n\t\t\treturn material;\n\n\t\t},\n\n\t\t// Parse FBX material and return parameters suitable for a three.js material\n\t\t// Also parse the texture map and return any textures associated with the material\n\t\tparseParameters: function ( materialNode, textureMap, ID ) {\n\n\t\t\tvar parameters = {};\n\n\t\t\tif ( materialNode.BumpFactor ) {\n\n\t\t\t\tparameters.bumpScale = materialNode.BumpFactor.value;\n\n\t\t\t}\n\n\t\t\tif ( materialNode.Diffuse ) {\n\n\t\t\t\tparameters.color = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Color\"]().fromArray( materialNode.Diffuse.value );\n\n\t\t\t} else if ( materialNode.DiffuseColor && ( materialNode.DiffuseColor.type === 'Color' || materialNode.DiffuseColor.type === 'ColorRGB' ) ) {\n\n\t\t\t\t// The blender exporter exports diffuse here instead of in materialNode.Diffuse\n\t\t\t\tparameters.color = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Color\"]().fromArray( materialNode.DiffuseColor.value );\n\n\t\t\t}\n\n\t\t\tif ( materialNode.DisplacementFactor ) {\n\n\t\t\t\tparameters.displacementScale = materialNode.DisplacementFactor.value;\n\n\t\t\t}\n\n\t\t\tif ( materialNode.Emissive ) {\n\n\t\t\t\tparameters.emissive = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Color\"]().fromArray( materialNode.Emissive.value );\n\n\t\t\t} else if ( materialNode.EmissiveColor && ( materialNode.EmissiveColor.type === 'Color' || materialNode.EmissiveColor.type === 'ColorRGB' ) ) {\n\n\t\t\t\t// The blender exporter exports emissive color here instead of in materialNode.Emissive\n\t\t\t\tparameters.emissive = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Color\"]().fromArray( materialNode.EmissiveColor.value );\n\n\t\t\t}\n\n\t\t\tif ( materialNode.EmissiveFactor ) {\n\n\t\t\t\tparameters.emissiveIntensity = parseFloat( materialNode.EmissiveFactor.value );\n\n\t\t\t}\n\n\t\t\tif ( materialNode.Opacity ) {\n\n\t\t\t\tparameters.opacity = parseFloat( materialNode.Opacity.value );\n\n\t\t\t}\n\n\t\t\tif ( parameters.opacity < 1.0 ) {\n\n\t\t\t\tparameters.transparent = true;\n\n\t\t\t}\n\n\t\t\tif ( materialNode.ReflectionFactor ) {\n\n\t\t\t\tparameters.reflectivity = materialNode.ReflectionFactor.value;\n\n\t\t\t}\n\n\t\t\tif ( materialNode.Shininess ) {\n\n\t\t\t\tparameters.shininess = materialNode.Shininess.value;\n\n\t\t\t}\n\n\t\t\tif ( materialNode.Specular ) {\n\n\t\t\t\tparameters.specular = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Color\"]().fromArray( materialNode.Specular.value );\n\n\t\t\t} else if ( materialNode.SpecularColor && materialNode.SpecularColor.type === 'Color' ) {\n\n\t\t\t\t// The blender exporter exports specular color here instead of in materialNode.Specular\n\t\t\t\tparameters.specular = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Color\"]().fromArray( materialNode.SpecularColor.value );\n\n\t\t\t}\n\n\t\t\tvar scope = this;\n\t\t\tconnections.get( ID ).children.forEach( function ( child ) {\n\n\t\t\t\tvar type = child.relationship;\n\n\t\t\t\tswitch ( type ) {\n\n\t\t\t\t\tcase 'Bump':\n\t\t\t\t\t\tparameters.bumpMap = scope.getTexture( textureMap, child.ID );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'Maya|TEX_ao_map':\n\t\t\t\t\t\tparameters.aoMap = scope.getTexture( textureMap, child.ID );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'DiffuseColor':\n\t\t\t\t\tcase 'Maya|TEX_color_map':\n\t\t\t\t\t\tparameters.map = scope.getTexture( textureMap, child.ID );\n\t\t\t\t\t\tparameters.map.encoding = _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"sRGBEncoding\"];\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'DisplacementColor':\n\t\t\t\t\t\tparameters.displacementMap = scope.getTexture( textureMap, child.ID );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'EmissiveColor':\n\t\t\t\t\t\tparameters.emissiveMap = scope.getTexture( textureMap, child.ID );\n\t\t\t\t\t\tparameters.emissiveMap.encoding = _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"sRGBEncoding\"];\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'NormalMap':\n\t\t\t\t\tcase 'Maya|TEX_normal_map':\n\t\t\t\t\t\tparameters.normalMap = scope.getTexture( textureMap, child.ID );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'ReflectionColor':\n\t\t\t\t\t\tparameters.envMap = scope.getTexture( textureMap, child.ID );\n\t\t\t\t\t\tparameters.envMap.mapping = _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"EquirectangularReflectionMapping\"];\n\t\t\t\t\t\tparameters.envMap.encoding = _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"sRGBEncoding\"];\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'SpecularColor':\n\t\t\t\t\t\tparameters.specularMap = scope.getTexture( textureMap, child.ID );\n\t\t\t\t\t\tparameters.specularMap.encoding = _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"sRGBEncoding\"];\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'TransparentColor':\n\t\t\t\t\tcase 'TransparencyFactor':\n\t\t\t\t\t\tparameters.alphaMap = scope.getTexture( textureMap, child.ID );\n\t\t\t\t\t\tparameters.transparent = true;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'AmbientColor':\n\t\t\t\t\tcase 'ShininessExponent': // AKA glossiness map\n\t\t\t\t\tcase 'SpecularFactor': // AKA specularLevel\n\t\t\t\t\tcase 'VectorDisplacementColor': // NOTE: Seems to be a copy of DisplacementColor\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tconsole.warn( 'THREE.FBXLoader: %s map is not supported in three.js, skipping texture.', type );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\treturn parameters;\n\n\t\t},\n\n\t\t// get a texture from the textureMap for use by a material.\n\t\tgetTexture: function ( textureMap, id ) {\n\n\t\t\t// if the texture is a layered texture, just use the first layer and issue a warning\n\t\t\tif ( 'LayeredTexture' in fbxTree.Objects && id in fbxTree.Objects.LayeredTexture ) {\n\n\t\t\t\tconsole.warn( 'THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer.' );\n\t\t\t\tid = connections.get( id ).children[ 0 ].ID;\n\n\t\t\t}\n\n\t\t\treturn textureMap.get( id );\n\n\t\t},\n\n\t\t// Parse nodes in FBXTree.Objects.Deformer\n\t\t// Deformer node can contain skinning or Vertex Cache animation data, however only skinning is supported here\n\t\t// Generates map of Skeleton-like objects for use later when generating and binding skeletons.\n\t\tparseDeformers: function () {\n\n\t\t\tvar skeletons = {};\n\t\t\tvar morphTargets = {};\n\n\t\t\tif ( 'Deformer' in fbxTree.Objects ) {\n\n\t\t\t\tvar DeformerNodes = fbxTree.Objects.Deformer;\n\n\t\t\t\tfor ( var nodeID in DeformerNodes ) {\n\n\t\t\t\t\tvar deformerNode = DeformerNodes[ nodeID ];\n\n\t\t\t\t\tvar relationships = connections.get( parseInt( nodeID ) );\n\n\t\t\t\t\tif ( deformerNode.attrType === 'Skin' ) {\n\n\t\t\t\t\t\tvar skeleton = this.parseSkeleton( relationships, DeformerNodes );\n\t\t\t\t\t\tskeleton.ID = nodeID;\n\n\t\t\t\t\t\tif ( relationships.parents.length > 1 ) console.warn( 'THREE.FBXLoader: skeleton attached to more than one geometry is not supported.' );\n\t\t\t\t\t\tskeleton.geometryID = relationships.parents[ 0 ].ID;\n\n\t\t\t\t\t\tskeletons[ nodeID ] = skeleton;\n\n\t\t\t\t\t} else if ( deformerNode.attrType === 'BlendShape' ) {\n\n\t\t\t\t\t\tvar morphTarget = {\n\t\t\t\t\t\t\tid: nodeID,\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tmorphTarget.rawTargets = this.parseMorphTargets( relationships, DeformerNodes );\n\t\t\t\t\t\tmorphTarget.id = nodeID;\n\n\t\t\t\t\t\tif ( relationships.parents.length > 1 ) console.warn( 'THREE.FBXLoader: morph target attached to more than one geometry is not supported.' );\n\n\t\t\t\t\t\tmorphTargets[ nodeID ] = morphTarget;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn {\n\n\t\t\t\tskeletons: skeletons,\n\t\t\t\tmorphTargets: morphTargets,\n\n\t\t\t};\n\n\t\t},\n\n\t\t// Parse single nodes in FBXTree.Objects.Deformer\n\t\t// The top level skeleton node has type 'Skin' and sub nodes have type 'Cluster'\n\t\t// Each skin node represents a skeleton and each cluster node represents a bone\n\t\tparseSkeleton: function ( relationships, deformerNodes ) {\n\n\t\t\tvar rawBones = [];\n\n\t\t\trelationships.children.forEach( function ( child ) {\n\n\t\t\t\tvar boneNode = deformerNodes[ child.ID ];\n\n\t\t\t\tif ( boneNode.attrType !== 'Cluster' ) return;\n\n\t\t\t\tvar rawBone = {\n\n\t\t\t\t\tID: child.ID,\n\t\t\t\t\tindices: [],\n\t\t\t\t\tweights: [],\n\t\t\t\t\ttransformLink: new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Matrix4\"]().fromArray( boneNode.TransformLink.a ),\n\t\t\t\t\t// transform: new Matrix4().fromArray( boneNode.Transform.a ),\n\t\t\t\t\t// linkMode: boneNode.Mode,\n\n\t\t\t\t};\n\n\t\t\t\tif ( 'Indexes' in boneNode ) {\n\n\t\t\t\t\trawBone.indices = boneNode.Indexes.a;\n\t\t\t\t\trawBone.weights = boneNode.Weights.a;\n\n\t\t\t\t}\n\n\t\t\t\trawBones.push( rawBone );\n\n\t\t\t} );\n\n\t\t\treturn {\n\n\t\t\t\trawBones: rawBones,\n\t\t\t\tbones: []\n\n\t\t\t};\n\n\t\t},\n\n\t\t// The top level morph deformer node has type \"BlendShape\" and sub nodes have type \"BlendShapeChannel\"\n\t\tparseMorphTargets: function ( relationships, deformerNodes ) {\n\n\t\t\tvar rawMorphTargets = [];\n\n\t\t\tfor ( var i = 0; i < relationships.children.length; i ++ ) {\n\n\t\t\t\tvar child = relationships.children[ i ];\n\n\t\t\t\tvar morphTargetNode = deformerNodes[ child.ID ];\n\n\t\t\t\tvar rawMorphTarget = {\n\n\t\t\t\t\tname: morphTargetNode.attrName,\n\t\t\t\t\tinitialWeight: morphTargetNode.DeformPercent,\n\t\t\t\t\tid: morphTargetNode.id,\n\t\t\t\t\tfullWeights: morphTargetNode.FullWeights.a\n\n\t\t\t\t};\n\n\t\t\t\tif ( morphTargetNode.attrType !== 'BlendShapeChannel' ) return;\n\n\t\t\t\trawMorphTarget.geoID = connections.get( parseInt( child.ID ) ).children.filter( function ( child ) {\n\n\t\t\t\t\treturn child.relationship === undefined;\n\n\t\t\t\t} )[ 0 ].ID;\n\n\t\t\t\trawMorphTargets.push( rawMorphTarget );\n\n\t\t\t}\n\n\t\t\treturn rawMorphTargets;\n\n\t\t},\n\n\t\t// create the main Group() to be returned by the loader\n\t\tparseScene: function ( deformers, geometryMap, materialMap ) {\n\n\t\t\tsceneGraph = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Group\"]();\n\n\t\t\tvar modelMap = this.parseModels( deformers.skeletons, geometryMap, materialMap );\n\n\t\t\tvar modelNodes = fbxTree.Objects.Model;\n\n\t\t\tvar scope = this;\n\t\t\tmodelMap.forEach( function ( model ) {\n\n\t\t\t\tvar modelNode = modelNodes[ model.ID ];\n\t\t\t\tscope.setLookAtProperties( model, modelNode );\n\n\t\t\t\tvar parentConnections = connections.get( model.ID ).parents;\n\n\t\t\t\tparentConnections.forEach( function ( connection ) {\n\n\t\t\t\t\tvar parent = modelMap.get( connection.ID );\n\t\t\t\t\tif ( parent !== undefined ) parent.add( model );\n\n\t\t\t\t} );\n\n\t\t\t\tif ( model.parent === null ) {\n\n\t\t\t\t\tsceneGraph.add( model );\n\n\t\t\t\t}\n\n\n\t\t\t} );\n\n\t\t\tthis.bindSkeleton( deformers.skeletons, geometryMap, modelMap );\n\n\t\t\tthis.createAmbientLight();\n\n\t\t\tthis.setupMorphMaterials();\n\n\t\t\tsceneGraph.traverse( function ( node ) {\n\n\t\t\t\tif ( node.userData.transformData ) {\n\n\t\t\t\t\tif ( node.parent ) {\n\n\t\t\t\t\t\tnode.userData.transformData.parentMatrix = node.parent.matrix;\n\t\t\t\t\t\tnode.userData.transformData.parentMatrixWorld = node.parent.matrixWorld;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tvar transform = generateTransform( node.userData.transformData );\n\n\t\t\t\t\tnode.applyMatrix4( transform );\n\t\t\t\t\tnode.updateWorldMatrix();\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\tvar animations = new AnimationParser().parse();\n\n\t\t\t// if all the models where already combined in a single group, just return that\n\t\t\tif ( sceneGraph.children.length === 1 && sceneGraph.children[ 0 ].isGroup ) {\n\n\t\t\t\tsceneGraph.children[ 0 ].animations = animations;\n\t\t\t\tsceneGraph = sceneGraph.children[ 0 ];\n\n\t\t\t}\n\n\t\t\tsceneGraph.animations = animations;\n\n\t\t},\n\n\t\t// parse nodes in FBXTree.Objects.Model\n\t\tparseModels: function ( skeletons, geometryMap, materialMap ) {\n\n\t\t\tvar modelMap = new Map();\n\t\t\tvar modelNodes = fbxTree.Objects.Model;\n\n\t\t\tfor ( var nodeID in modelNodes ) {\n\n\t\t\t\tvar id = parseInt( nodeID );\n\t\t\t\tvar node = modelNodes[ nodeID ];\n\t\t\t\tvar relationships = connections.get( id );\n\n\t\t\t\tvar model = this.buildSkeleton( relationships, skeletons, id, node.attrName );\n\n\t\t\t\tif ( ! model ) {\n\n\t\t\t\t\tswitch ( node.attrType ) {\n\n\t\t\t\t\t\tcase 'Camera':\n\t\t\t\t\t\t\tmodel = this.createCamera( relationships );\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'Light':\n\t\t\t\t\t\t\tmodel = this.createLight( relationships );\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'Mesh':\n\t\t\t\t\t\t\tmodel = this.createMesh( relationships, geometryMap, materialMap );\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'NurbsCurve':\n\t\t\t\t\t\t\tmodel = this.createCurve( relationships, geometryMap );\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'LimbNode':\n\t\t\t\t\t\tcase 'Root':\n\t\t\t\t\t\t\tmodel = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Bone\"]();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'Null':\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tmodel = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Group\"]();\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tmodel.name = node.attrName ? _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"PropertyBinding\"].sanitizeNodeName( node.attrName ) : '';\n\n\t\t\t\t\tmodel.ID = id;\n\n\t\t\t\t}\n\n\t\t\t\tthis.getTransformData( model, node );\n\t\t\t\tmodelMap.set( id, model );\n\n\t\t\t}\n\n\t\t\treturn modelMap;\n\n\t\t},\n\n\t\tbuildSkeleton: function ( relationships, skeletons, id, name ) {\n\n\t\t\tvar bone = null;\n\n\t\t\trelationships.parents.forEach( function ( parent ) {\n\n\t\t\t\tfor ( var ID in skeletons ) {\n\n\t\t\t\t\tvar skeleton = skeletons[ ID ];\n\n\t\t\t\t\tskeleton.rawBones.forEach( function ( rawBone, i ) {\n\n\t\t\t\t\t\tif ( rawBone.ID === parent.ID ) {\n\n\t\t\t\t\t\t\tvar subBone = bone;\n\t\t\t\t\t\t\tbone = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Bone\"]();\n\n\t\t\t\t\t\t\tbone.matrixWorld.copy( rawBone.transformLink );\n\n\t\t\t\t\t\t\t// set name and id here - otherwise in cases where \"subBone\" is created it will not have a name / id\n\n\t\t\t\t\t\t\tbone.name = name ? _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"PropertyBinding\"].sanitizeNodeName( name ) : '';\n\t\t\t\t\t\t\tbone.ID = id;\n\n\t\t\t\t\t\t\tskeleton.bones[ i ] = bone;\n\n\t\t\t\t\t\t\t// In cases where a bone is shared between multiple meshes\n\t\t\t\t\t\t\t// duplicate the bone here and and it as a child of the first bone\n\t\t\t\t\t\t\tif ( subBone !== null ) {\n\n\t\t\t\t\t\t\t\tbone.add( subBone );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\treturn bone;\n\n\t\t},\n\n\t\t// create a PerspectiveCamera or OrthographicCamera\n\t\tcreateCamera: function ( relationships ) {\n\n\t\t\tvar model;\n\t\t\tvar cameraAttribute;\n\n\t\t\trelationships.children.forEach( function ( child ) {\n\n\t\t\t\tvar attr = fbxTree.Objects.NodeAttribute[ child.ID ];\n\n\t\t\t\tif ( attr !== undefined ) {\n\n\t\t\t\t\tcameraAttribute = attr;\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\tif ( cameraAttribute === undefined ) {\n\n\t\t\t\tmodel = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Object3D\"]();\n\n\t\t\t} else {\n\n\t\t\t\tvar type = 0;\n\t\t\t\tif ( cameraAttribute.CameraProjectionType !== undefined && cameraAttribute.CameraProjectionType.value === 1 ) {\n\n\t\t\t\t\ttype = 1;\n\n\t\t\t\t}\n\n\t\t\t\tvar nearClippingPlane = 1;\n\t\t\t\tif ( cameraAttribute.NearPlane !== undefined ) {\n\n\t\t\t\t\tnearClippingPlane = cameraAttribute.NearPlane.value / 1000;\n\n\t\t\t\t}\n\n\t\t\t\tvar farClippingPlane = 1000;\n\t\t\t\tif ( cameraAttribute.FarPlane !== undefined ) {\n\n\t\t\t\t\tfarClippingPlane = cameraAttribute.FarPlane.value / 1000;\n\n\t\t\t\t}\n\n\n\t\t\t\tvar width = window.innerWidth;\n\t\t\t\tvar height = window.innerHeight;\n\n\t\t\t\tif ( cameraAttribute.AspectWidth !== undefined && cameraAttribute.AspectHeight !== undefined ) {\n\n\t\t\t\t\twidth = cameraAttribute.AspectWidth.value;\n\t\t\t\t\theight = cameraAttribute.AspectHeight.value;\n\n\t\t\t\t}\n\n\t\t\t\tvar aspect = width / height;\n\n\t\t\t\tvar fov = 45;\n\t\t\t\tif ( cameraAttribute.FieldOfView !== undefined ) {\n\n\t\t\t\t\tfov = cameraAttribute.FieldOfView.value;\n\n\t\t\t\t}\n\n\t\t\t\tvar focalLength = cameraAttribute.FocalLength ? cameraAttribute.FocalLength.value : null;\n\n\t\t\t\tswitch ( type ) {\n\n\t\t\t\t\tcase 0: // Perspective\n\t\t\t\t\t\tmodel = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"PerspectiveCamera\"]( fov, aspect, nearClippingPlane, farClippingPlane );\n\t\t\t\t\t\tif ( focalLength !== null ) model.setFocalLength( focalLength );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 1: // Orthographic\n\t\t\t\t\t\tmodel = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"OrthographicCamera\"]( - width / 2, width / 2, height / 2, - height / 2, nearClippingPlane, farClippingPlane );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tconsole.warn( 'THREE.FBXLoader: Unknown camera type ' + type + '.' );\n\t\t\t\t\t\tmodel = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Object3D\"]();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn model;\n\n\t\t},\n\n\t\t// Create a DirectionalLight, PointLight or SpotLight\n\t\tcreateLight: function ( relationships ) {\n\n\t\t\tvar model;\n\t\t\tvar lightAttribute;\n\n\t\t\trelationships.children.forEach( function ( child ) {\n\n\t\t\t\tvar attr = fbxTree.Objects.NodeAttribute[ child.ID ];\n\n\t\t\t\tif ( attr !== undefined ) {\n\n\t\t\t\t\tlightAttribute = attr;\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\tif ( lightAttribute === undefined ) {\n\n\t\t\t\tmodel = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Object3D\"]();\n\n\t\t\t} else {\n\n\t\t\t\tvar type;\n\n\t\t\t\t// LightType can be undefined for Point lights\n\t\t\t\tif ( lightAttribute.LightType === undefined ) {\n\n\t\t\t\t\ttype = 0;\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttype = lightAttribute.LightType.value;\n\n\t\t\t\t}\n\n\t\t\t\tvar color = 0xffffff;\n\n\t\t\t\tif ( lightAttribute.Color !== undefined ) {\n\n\t\t\t\t\tcolor = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Color\"]().fromArray( lightAttribute.Color.value );\n\n\t\t\t\t}\n\n\t\t\t\tvar intensity = ( lightAttribute.Intensity === undefined ) ? 1 : lightAttribute.Intensity.value / 100;\n\n\t\t\t\t// light disabled\n\t\t\t\tif ( lightAttribute.CastLightOnObject !== undefined && lightAttribute.CastLightOnObject.value === 0 ) {\n\n\t\t\t\t\tintensity = 0;\n\n\t\t\t\t}\n\n\t\t\t\tvar distance = 0;\n\t\t\t\tif ( lightAttribute.FarAttenuationEnd !== undefined ) {\n\n\t\t\t\t\tif ( lightAttribute.EnableFarAttenuation !== undefined && lightAttribute.EnableFarAttenuation.value === 0 ) {\n\n\t\t\t\t\t\tdistance = 0;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tdistance = lightAttribute.FarAttenuationEnd.value;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// TODO: could this be calculated linearly from FarAttenuationStart to FarAttenuationEnd?\n\t\t\t\tvar decay = 1;\n\n\t\t\t\tswitch ( type ) {\n\n\t\t\t\t\tcase 0: // Point\n\t\t\t\t\t\tmodel = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"PointLight\"]( color, intensity, distance, decay );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 1: // Directional\n\t\t\t\t\t\tmodel = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"DirectionalLight\"]( color, intensity );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 2: // Spot\n\t\t\t\t\t\tvar angle = Math.PI / 3;\n\n\t\t\t\t\t\tif ( lightAttribute.InnerAngle !== undefined ) {\n\n\t\t\t\t\t\t\tangle = _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"MathUtils\"].degToRad( lightAttribute.InnerAngle.value );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar penumbra = 0;\n\t\t\t\t\t\tif ( lightAttribute.OuterAngle !== undefined ) {\n\n\t\t\t\t\t\t\t// TODO: this is not correct - FBX calculates outer and inner angle in degrees\n\t\t\t\t\t\t\t// with OuterAngle > InnerAngle && OuterAngle <= Math.PI\n\t\t\t\t\t\t\t// while three.js uses a penumbra between (0, 1) to attenuate the inner angle\n\t\t\t\t\t\t\tpenumbra = _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"MathUtils\"].degToRad( lightAttribute.OuterAngle.value );\n\t\t\t\t\t\t\tpenumbra = Math.max( penumbra, 1 );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tmodel = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"SpotLight\"]( color, intensity, distance, angle, penumbra, decay );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tconsole.warn( 'THREE.FBXLoader: Unknown light type ' + lightAttribute.LightType.value + ', defaulting to a PointLight.' );\n\t\t\t\t\t\tmodel = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"PointLight\"]( color, intensity );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\tif ( lightAttribute.CastShadows !== undefined && lightAttribute.CastShadows.value === 1 ) {\n\n\t\t\t\t\tmodel.castShadow = true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn model;\n\n\t\t},\n\n\t\tcreateMesh: function ( relationships, geometryMap, materialMap ) {\n\n\t\t\tvar model;\n\t\t\tvar geometry = null;\n\t\t\tvar material = null;\n\t\t\tvar materials = [];\n\n\t\t\t// get geometry and materials(s) from connections\n\t\t\trelationships.children.forEach( function ( child ) {\n\n\t\t\t\tif ( geometryMap.has( child.ID ) ) {\n\n\t\t\t\t\tgeometry = geometryMap.get( child.ID );\n\n\t\t\t\t}\n\n\t\t\t\tif ( materialMap.has( child.ID ) ) {\n\n\t\t\t\t\tmaterials.push( materialMap.get( child.ID ) );\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\tif ( materials.length > 1 ) {\n\n\t\t\t\tmaterial = materials;\n\n\t\t\t} else if ( materials.length > 0 ) {\n\n\t\t\t\tmaterial = materials[ 0 ];\n\n\t\t\t} else {\n\n\t\t\t\tmaterial = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"MeshPhongMaterial\"]( { color: 0xcccccc } );\n\t\t\t\tmaterials.push( material );\n\n\t\t\t}\n\n\t\t\tif ( 'color' in geometry.attributes ) {\n\n\t\t\t\tmaterials.forEach( function ( material ) {\n\n\t\t\t\t\tmaterial.vertexColors = true;\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\tif ( geometry.FBX_Deformer ) {\n\n\t\t\t\tmaterials.forEach( function ( material ) {\n\n\t\t\t\t\tmaterial.skinning = true;\n\n\t\t\t\t} );\n\n\t\t\t\tmodel = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"SkinnedMesh\"]( geometry, material );\n\t\t\t\tmodel.normalizeSkinWeights();\n\n\t\t\t} else {\n\n\t\t\t\tmodel = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Mesh\"]( geometry, material );\n\n\t\t\t}\n\n\t\t\treturn model;\n\n\t\t},\n\n\t\tcreateCurve: function ( relationships, geometryMap ) {\n\n\t\t\tvar geometry = relationships.children.reduce( function ( geo, child ) {\n\n\t\t\t\tif ( geometryMap.has( child.ID ) ) geo = geometryMap.get( child.ID );\n\n\t\t\t\treturn geo;\n\n\t\t\t}, null );\n\n\t\t\t// FBX does not list materials for Nurbs lines, so we'll just put our own in here.\n\t\t\tvar material = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"LineBasicMaterial\"]( { color: 0x3300ff, linewidth: 1 } );\n\t\t\treturn new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Line\"]( geometry, material );\n\n\t\t},\n\n\t\t// parse the model node for transform data\n\t\tgetTransformData: function ( model, modelNode ) {\n\n\t\t\tvar transformData = {};\n\n\t\t\tif ( 'InheritType' in modelNode ) transformData.inheritType = parseInt( modelNode.InheritType.value );\n\n\t\t\tif ( 'RotationOrder' in modelNode ) transformData.eulerOrder = getEulerOrder( modelNode.RotationOrder.value );\n\t\t\telse transformData.eulerOrder = 'ZYX';\n\n\t\t\tif ( 'Lcl_Translation' in modelNode ) transformData.translation = modelNode.Lcl_Translation.value;\n\n\t\t\tif ( 'PreRotation' in modelNode ) transformData.preRotation = modelNode.PreRotation.value;\n\t\t\tif ( 'Lcl_Rotation' in modelNode ) transformData.rotation = modelNode.Lcl_Rotation.value;\n\t\t\tif ( 'PostRotation' in modelNode ) transformData.postRotation = modelNode.PostRotation.value;\n\n\t\t\tif ( 'Lcl_Scaling' in modelNode ) transformData.scale = modelNode.Lcl_Scaling.value;\n\n\t\t\tif ( 'ScalingOffset' in modelNode ) transformData.scalingOffset = modelNode.ScalingOffset.value;\n\t\t\tif ( 'ScalingPivot' in modelNode ) transformData.scalingPivot = modelNode.ScalingPivot.value;\n\n\t\t\tif ( 'RotationOffset' in modelNode ) transformData.rotationOffset = modelNode.RotationOffset.value;\n\t\t\tif ( 'RotationPivot' in modelNode ) transformData.rotationPivot = modelNode.RotationPivot.value;\n\n\t\t\tmodel.userData.transformData = transformData;\n\n\t\t},\n\n\t\tsetLookAtProperties: function ( model, modelNode ) {\n\n\t\t\tif ( 'LookAtProperty' in modelNode ) {\n\n\t\t\t\tvar children = connections.get( model.ID ).children;\n\n\t\t\t\tchildren.forEach( function ( child ) {\n\n\t\t\t\t\tif ( child.relationship === 'LookAtProperty' ) {\n\n\t\t\t\t\t\tvar lookAtTarget = fbxTree.Objects.Model[ child.ID ];\n\n\t\t\t\t\t\tif ( 'Lcl_Translation' in lookAtTarget ) {\n\n\t\t\t\t\t\t\tvar pos = lookAtTarget.Lcl_Translation.value;\n\n\t\t\t\t\t\t\t// DirectionalLight, SpotLight\n\t\t\t\t\t\t\tif ( model.target !== undefined ) {\n\n\t\t\t\t\t\t\t\tmodel.target.position.fromArray( pos );\n\t\t\t\t\t\t\t\tsceneGraph.add( model.target );\n\n\t\t\t\t\t\t\t} else { // Cameras and other Object3Ds\n\n\t\t\t\t\t\t\t\tmodel.lookAt( new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector3\"]().fromArray( pos ) );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t},\n\n\t\tbindSkeleton: function ( skeletons, geometryMap, modelMap ) {\n\n\t\t\tvar bindMatrices = this.parsePoseNodes();\n\n\t\t\tfor ( var ID in skeletons ) {\n\n\t\t\t\tvar skeleton = skeletons[ ID ];\n\n\t\t\t\tvar parents = connections.get( parseInt( skeleton.ID ) ).parents;\n\n\t\t\t\tparents.forEach( function ( parent ) {\n\n\t\t\t\t\tif ( geometryMap.has( parent.ID ) ) {\n\n\t\t\t\t\t\tvar geoID = parent.ID;\n\t\t\t\t\t\tvar geoRelationships = connections.get( geoID );\n\n\t\t\t\t\t\tgeoRelationships.parents.forEach( function ( geoConnParent ) {\n\n\t\t\t\t\t\t\tif ( modelMap.has( geoConnParent.ID ) ) {\n\n\t\t\t\t\t\t\t\tvar model = modelMap.get( geoConnParent.ID );\n\n\t\t\t\t\t\t\t\tmodel.bind( new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Skeleton\"]( skeleton.bones ), bindMatrices[ geoConnParent.ID ] );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t},\n\n\t\tparsePoseNodes: function () {\n\n\t\t\tvar bindMatrices = {};\n\n\t\t\tif ( 'Pose' in fbxTree.Objects ) {\n\n\t\t\t\tvar BindPoseNode = fbxTree.Objects.Pose;\n\n\t\t\t\tfor ( var nodeID in BindPoseNode ) {\n\n\t\t\t\t\tif ( BindPoseNode[ nodeID ].attrType === 'BindPose' ) {\n\n\t\t\t\t\t\tvar poseNodes = BindPoseNode[ nodeID ].PoseNode;\n\n\t\t\t\t\t\tif ( Array.isArray( poseNodes ) ) {\n\n\t\t\t\t\t\t\tposeNodes.forEach( function ( poseNode ) {\n\n\t\t\t\t\t\t\t\tbindMatrices[ poseNode.Node ] = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Matrix4\"]().fromArray( poseNode.Matrix.a );\n\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tbindMatrices[ poseNodes.Node ] = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Matrix4\"]().fromArray( poseNodes.Matrix.a );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn bindMatrices;\n\n\t\t},\n\n\t\t// Parse ambient color in FBXTree.GlobalSettings - if it's not set to black (default), create an ambient light\n\t\tcreateAmbientLight: function () {\n\n\t\t\tif ( 'GlobalSettings' in fbxTree && 'AmbientColor' in fbxTree.GlobalSettings ) {\n\n\t\t\t\tvar ambientColor = fbxTree.GlobalSettings.AmbientColor.value;\n\t\t\t\tvar r = ambientColor[ 0 ];\n\t\t\t\tvar g = ambientColor[ 1 ];\n\t\t\t\tvar b = ambientColor[ 2 ];\n\n\t\t\t\tif ( r !== 0 || g !== 0 || b !== 0 ) {\n\n\t\t\t\t\tvar color = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Color\"]( r, g, b );\n\t\t\t\t\tsceneGraph.add( new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"AmbientLight\"]( color, 1 ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\tsetupMorphMaterials: function () {\n\n\t\t\tvar scope = this;\n\t\t\tsceneGraph.traverse( function ( child ) {\n\n\t\t\t\tif ( child.isMesh ) {\n\n\t\t\t\t\tif ( child.geometry.morphAttributes.position && child.geometry.morphAttributes.position.length ) {\n\n\t\t\t\t\t\tif ( Array.isArray( child.material ) ) {\n\n\t\t\t\t\t\t\tchild.material.forEach( function ( material, i ) {\n\n\t\t\t\t\t\t\t\tscope.setupMorphMaterial( child, material, i );\n\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tscope.setupMorphMaterial( child, child.material );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t},\n\n\t\tsetupMorphMaterial: function ( child, material, index ) {\n\n\t\t\tvar uuid = child.uuid;\n\t\t\tvar matUuid = material.uuid;\n\n\t\t\t// if a geometry has morph targets, it cannot share the material with other geometries\n\t\t\tvar sharedMat = false;\n\n\t\t\tsceneGraph.traverse( function ( node ) {\n\n\t\t\t\tif ( node.isMesh ) {\n\n\t\t\t\t\tif ( Array.isArray( node.material ) ) {\n\n\t\t\t\t\t\tnode.material.forEach( function ( mat ) {\n\n\t\t\t\t\t\t\tif ( mat.uuid === matUuid && node.uuid !== uuid ) sharedMat = true;\n\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t} else if ( node.material.uuid === matUuid && node.uuid !== uuid ) sharedMat = true;\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\tif ( sharedMat === true ) {\n\n\t\t\t\tvar clonedMat = material.clone();\n\t\t\t\tclonedMat.morphTargets = true;\n\n\t\t\t\tif ( index === undefined ) child.material = clonedMat;\n\t\t\t\telse child.material[ index ] = clonedMat;\n\n\t\t\t} else material.morphTargets = true;\n\n\t\t}\n\n\t};\n\n\t// parse Geometry data from FBXTree and return map of BufferGeometries\n\tfunction GeometryParser() {}\n\n\tGeometryParser.prototype = {\n\n\t\tconstructor: GeometryParser,\n\n\t\t// Parse nodes in FBXTree.Objects.Geometry\n\t\tparse: function ( deformers ) {\n\n\t\t\tvar geometryMap = new Map();\n\n\t\t\tif ( 'Geometry' in fbxTree.Objects ) {\n\n\t\t\t\tvar geoNodes = fbxTree.Objects.Geometry;\n\n\t\t\t\tfor ( var nodeID in geoNodes ) {\n\n\t\t\t\t\tvar relationships = connections.get( parseInt( nodeID ) );\n\t\t\t\t\tvar geo = this.parseGeometry( relationships, geoNodes[ nodeID ], deformers );\n\n\t\t\t\t\tgeometryMap.set( parseInt( nodeID ), geo );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn geometryMap;\n\n\t\t},\n\n\t\t// Parse single node in FBXTree.Objects.Geometry\n\t\tparseGeometry: function ( relationships, geoNode, deformers ) {\n\n\t\t\tswitch ( geoNode.attrType ) {\n\n\t\t\t\tcase 'Mesh':\n\t\t\t\t\treturn this.parseMeshGeometry( relationships, geoNode, deformers );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'NurbsCurve':\n\t\t\t\t\treturn this.parseNurbsGeometry( geoNode );\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t},\n\n\n\t\t// Parse single node mesh geometry in FBXTree.Objects.Geometry\n\t\tparseMeshGeometry: function ( relationships, geoNode, deformers ) {\n\n\t\t\tvar skeletons = deformers.skeletons;\n\t\t\tvar morphTargets = [];\n\n\t\t\tvar modelNodes = relationships.parents.map( function ( parent ) {\n\n\t\t\t\treturn fbxTree.Objects.Model[ parent.ID ];\n\n\t\t\t} );\n\n\t\t\t// don't create geometry if it is not associated with any models\n\t\t\tif ( modelNodes.length === 0 ) return;\n\n\t\t\tvar skeleton = relationships.children.reduce( function ( skeleton, child ) {\n\n\t\t\t\tif ( skeletons[ child.ID ] !== undefined ) skeleton = skeletons[ child.ID ];\n\n\t\t\t\treturn skeleton;\n\n\t\t\t}, null );\n\n\t\t\trelationships.children.forEach( function ( child ) {\n\n\t\t\t\tif ( deformers.morphTargets[ child.ID ] !== undefined ) {\n\n\t\t\t\t\tmorphTargets.push( deformers.morphTargets[ child.ID ] );\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\t// Assume one model and get the preRotation from that\n\t\t\t// if there is more than one model associated with the geometry this may cause problems\n\t\t\tvar modelNode = modelNodes[ 0 ];\n\n\t\t\tvar transformData = {};\n\n\t\t\tif ( 'RotationOrder' in modelNode ) transformData.eulerOrder = getEulerOrder( modelNode.RotationOrder.value );\n\t\t\tif ( 'InheritType' in modelNode ) transformData.inheritType = parseInt( modelNode.InheritType.value );\n\n\t\t\tif ( 'GeometricTranslation' in modelNode ) transformData.translation = modelNode.GeometricTranslation.value;\n\t\t\tif ( 'GeometricRotation' in modelNode ) transformData.rotation = modelNode.GeometricRotation.value;\n\t\t\tif ( 'GeometricScaling' in modelNode ) transformData.scale = modelNode.GeometricScaling.value;\n\n\t\t\tvar transform = generateTransform( transformData );\n\n\t\t\treturn this.genGeometry( geoNode, skeleton, morphTargets, transform );\n\n\t\t},\n\n\t\t// Generate a BufferGeometry from a node in FBXTree.Objects.Geometry\n\t\tgenGeometry: function ( geoNode, skeleton, morphTargets, preTransform ) {\n\n\t\t\tvar geo = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"BufferGeometry\"]();\n\t\t\tif ( geoNode.attrName ) geo.name = geoNode.attrName;\n\n\t\t\tvar geoInfo = this.parseGeoNode( geoNode, skeleton );\n\t\t\tvar buffers = this.genBuffers( geoInfo );\n\n\t\t\tvar positionAttribute = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Float32BufferAttribute\"]( buffers.vertex, 3 );\n\n\t\t\tpositionAttribute.applyMatrix4( preTransform );\n\n\t\t\tgeo.setAttribute( 'position', positionAttribute );\n\n\t\t\tif ( buffers.colors.length > 0 ) {\n\n\t\t\t\tgeo.setAttribute( 'color', new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Float32BufferAttribute\"]( buffers.colors, 3 ) );\n\n\t\t\t}\n\n\t\t\tif ( skeleton ) {\n\n\t\t\t\tgeo.setAttribute( 'skinIndex', new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Uint16BufferAttribute\"]( buffers.weightsIndices, 4 ) );\n\n\t\t\t\tgeo.setAttribute( 'skinWeight', new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Float32BufferAttribute\"]( buffers.vertexWeights, 4 ) );\n\n\t\t\t\t// used later to bind the skeleton to the model\n\t\t\t\tgeo.FBX_Deformer = skeleton;\n\n\t\t\t}\n\n\t\t\tif ( buffers.normal.length > 0 ) {\n\n\t\t\t\tvar normalMatrix = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Matrix3\"]().getNormalMatrix( preTransform );\n\n\t\t\t\tvar normalAttribute = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Float32BufferAttribute\"]( buffers.normal, 3 );\n\t\t\t\tnormalAttribute.applyNormalMatrix( normalMatrix );\n\n\t\t\t\tgeo.setAttribute( 'normal', normalAttribute );\n\n\t\t\t}\n\n\t\t\tbuffers.uvs.forEach( function ( uvBuffer, i ) {\n\n\t\t\t\t// subsequent uv buffers are called 'uv1', 'uv2', ...\n\t\t\t\tvar name = 'uv' + ( i + 1 ).toString();\n\n\t\t\t\t// the first uv buffer is just called 'uv'\n\t\t\t\tif ( i === 0 ) {\n\n\t\t\t\t\tname = 'uv';\n\n\t\t\t\t}\n\n\t\t\t\tgeo.setAttribute( name, new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Float32BufferAttribute\"]( buffers.uvs[ i ], 2 ) );\n\n\t\t\t} );\n\n\t\t\tif ( geoInfo.material && geoInfo.material.mappingType !== 'AllSame' ) {\n\n\t\t\t\t// Convert the material indices of each vertex into rendering groups on the geometry.\n\t\t\t\tvar prevMaterialIndex = buffers.materialIndex[ 0 ];\n\t\t\t\tvar startIndex = 0;\n\n\t\t\t\tbuffers.materialIndex.forEach( function ( currentIndex, i ) {\n\n\t\t\t\t\tif ( currentIndex !== prevMaterialIndex ) {\n\n\t\t\t\t\t\tgeo.addGroup( startIndex, i - startIndex, prevMaterialIndex );\n\n\t\t\t\t\t\tprevMaterialIndex = currentIndex;\n\t\t\t\t\t\tstartIndex = i;\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t\t// the loop above doesn't add the last group, do that here.\n\t\t\t\tif ( geo.groups.length > 0 ) {\n\n\t\t\t\t\tvar lastGroup = geo.groups[ geo.groups.length - 1 ];\n\t\t\t\t\tvar lastIndex = lastGroup.start + lastGroup.count;\n\n\t\t\t\t\tif ( lastIndex !== buffers.materialIndex.length ) {\n\n\t\t\t\t\t\tgeo.addGroup( lastIndex, buffers.materialIndex.length - lastIndex, prevMaterialIndex );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// case where there are multiple materials but the whole geometry is only\n\t\t\t\t// using one of them\n\t\t\t\tif ( geo.groups.length === 0 ) {\n\n\t\t\t\t\tgeo.addGroup( 0, buffers.materialIndex.length, buffers.materialIndex[ 0 ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.addMorphTargets( geo, geoNode, morphTargets, preTransform );\n\n\t\t\treturn geo;\n\n\t\t},\n\n\t\tparseGeoNode: function ( geoNode, skeleton ) {\n\n\t\t\tvar geoInfo = {};\n\n\t\t\tgeoInfo.vertexPositions = ( geoNode.Vertices !== undefined ) ? geoNode.Vertices.a : [];\n\t\t\tgeoInfo.vertexIndices = ( geoNode.PolygonVertexIndex !== undefined ) ? geoNode.PolygonVertexIndex.a : [];\n\n\t\t\tif ( geoNode.LayerElementColor ) {\n\n\t\t\t\tgeoInfo.color = this.parseVertexColors( geoNode.LayerElementColor[ 0 ] );\n\n\t\t\t}\n\n\t\t\tif ( geoNode.LayerElementMaterial ) {\n\n\t\t\t\tgeoInfo.material = this.parseMaterialIndices( geoNode.LayerElementMaterial[ 0 ] );\n\n\t\t\t}\n\n\t\t\tif ( geoNode.LayerElementNormal ) {\n\n\t\t\t\tgeoInfo.normal = this.parseNormals( geoNode.LayerElementNormal[ 0 ] );\n\n\t\t\t}\n\n\t\t\tif ( geoNode.LayerElementUV ) {\n\n\t\t\t\tgeoInfo.uv = [];\n\n\t\t\t\tvar i = 0;\n\t\t\t\twhile ( geoNode.LayerElementUV[ i ] ) {\n\n\t\t\t\t\tif ( geoNode.LayerElementUV[ i ].UV ) {\n\n\t\t\t\t\t\tgeoInfo.uv.push( this.parseUVs( geoNode.LayerElementUV[ i ] ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t\ti ++;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tgeoInfo.weightTable = {};\n\n\t\t\tif ( skeleton !== null ) {\n\n\t\t\t\tgeoInfo.skeleton = skeleton;\n\n\t\t\t\tskeleton.rawBones.forEach( function ( rawBone, i ) {\n\n\t\t\t\t\t// loop over the bone's vertex indices and weights\n\t\t\t\t\trawBone.indices.forEach( function ( index, j ) {\n\n\t\t\t\t\t\tif ( geoInfo.weightTable[ index ] === undefined ) geoInfo.weightTable[ index ] = [];\n\n\t\t\t\t\t\tgeoInfo.weightTable[ index ].push( {\n\n\t\t\t\t\t\t\tid: i,\n\t\t\t\t\t\t\tweight: rawBone.weights[ j ],\n\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t} );\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\treturn geoInfo;\n\n\t\t},\n\n\t\tgenBuffers: function ( geoInfo ) {\n\n\t\t\tvar buffers = {\n\t\t\t\tvertex: [],\n\t\t\t\tnormal: [],\n\t\t\t\tcolors: [],\n\t\t\t\tuvs: [],\n\t\t\t\tmaterialIndex: [],\n\t\t\t\tvertexWeights: [],\n\t\t\t\tweightsIndices: [],\n\t\t\t};\n\n\t\t\tvar polygonIndex = 0;\n\t\t\tvar faceLength = 0;\n\t\t\tvar displayedWeightsWarning = false;\n\n\t\t\t// these will hold data for a single face\n\t\t\tvar facePositionIndexes = [];\n\t\t\tvar faceNormals = [];\n\t\t\tvar faceColors = [];\n\t\t\tvar faceUVs = [];\n\t\t\tvar faceWeights = [];\n\t\t\tvar faceWeightIndices = [];\n\n\t\t\tvar scope = this;\n\t\t\tgeoInfo.vertexIndices.forEach( function ( vertexIndex, polygonVertexIndex ) {\n\n\t\t\t\tvar endOfFace = false;\n\n\t\t\t\t// Face index and vertex index arrays are combined in a single array\n\t\t\t\t// A cube with quad faces looks like this:\n\t\t\t\t// PolygonVertexIndex: *24 {\n\t\t\t\t//  a: 0, 1, 3, -3, 2, 3, 5, -5, 4, 5, 7, -7, 6, 7, 1, -1, 1, 7, 5, -4, 6, 0, 2, -5\n\t\t\t\t//  }\n\t\t\t\t// Negative numbers mark the end of a face - first face here is 0, 1, 3, -3\n\t\t\t\t// to find index of last vertex bit shift the index: ^ - 1\n\t\t\t\tif ( vertexIndex < 0 ) {\n\n\t\t\t\t\tvertexIndex = vertexIndex ^ - 1; // equivalent to ( x * -1 ) - 1\n\t\t\t\t\tendOfFace = true;\n\n\t\t\t\t}\n\n\t\t\t\tvar weightIndices = [];\n\t\t\t\tvar weights = [];\n\n\t\t\t\tfacePositionIndexes.push( vertexIndex * 3, vertexIndex * 3 + 1, vertexIndex * 3 + 2 );\n\n\t\t\t\tif ( geoInfo.color ) {\n\n\t\t\t\t\tvar data = getData( polygonVertexIndex, polygonIndex, vertexIndex, geoInfo.color );\n\n\t\t\t\t\tfaceColors.push( data[ 0 ], data[ 1 ], data[ 2 ] );\n\n\t\t\t\t}\n\n\t\t\t\tif ( geoInfo.skeleton ) {\n\n\t\t\t\t\tif ( geoInfo.weightTable[ vertexIndex ] !== undefined ) {\n\n\t\t\t\t\t\tgeoInfo.weightTable[ vertexIndex ].forEach( function ( wt ) {\n\n\t\t\t\t\t\t\tweights.push( wt.weight );\n\t\t\t\t\t\t\tweightIndices.push( wt.id );\n\n\t\t\t\t\t\t} );\n\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( weights.length > 4 ) {\n\n\t\t\t\t\t\tif ( ! displayedWeightsWarning ) {\n\n\t\t\t\t\t\t\tconsole.warn( 'THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights.' );\n\t\t\t\t\t\t\tdisplayedWeightsWarning = true;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar wIndex = [ 0, 0, 0, 0 ];\n\t\t\t\t\t\tvar Weight = [ 0, 0, 0, 0 ];\n\n\t\t\t\t\t\tweights.forEach( function ( weight, weightIndex ) {\n\n\t\t\t\t\t\t\tvar currentWeight = weight;\n\t\t\t\t\t\t\tvar currentIndex = weightIndices[ weightIndex ];\n\n\t\t\t\t\t\t\tWeight.forEach( function ( comparedWeight, comparedWeightIndex, comparedWeightArray ) {\n\n\t\t\t\t\t\t\t\tif ( currentWeight > comparedWeight ) {\n\n\t\t\t\t\t\t\t\t\tcomparedWeightArray[ comparedWeightIndex ] = currentWeight;\n\t\t\t\t\t\t\t\t\tcurrentWeight = comparedWeight;\n\n\t\t\t\t\t\t\t\t\tvar tmp = wIndex[ comparedWeightIndex ];\n\t\t\t\t\t\t\t\t\twIndex[ comparedWeightIndex ] = currentIndex;\n\t\t\t\t\t\t\t\t\tcurrentIndex = tmp;\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t\tweightIndices = wIndex;\n\t\t\t\t\t\tweights = Weight;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// if the weight array is shorter than 4 pad with 0s\n\t\t\t\t\twhile ( weights.length < 4 ) {\n\n\t\t\t\t\t\tweights.push( 0 );\n\t\t\t\t\t\tweightIndices.push( 0 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfor ( var i = 0; i < 4; ++ i ) {\n\n\t\t\t\t\t\tfaceWeights.push( weights[ i ] );\n\t\t\t\t\t\tfaceWeightIndices.push( weightIndices[ i ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( geoInfo.normal ) {\n\n\t\t\t\t\tvar data = getData( polygonVertexIndex, polygonIndex, vertexIndex, geoInfo.normal );\n\n\t\t\t\t\tfaceNormals.push( data[ 0 ], data[ 1 ], data[ 2 ] );\n\n\t\t\t\t}\n\n\t\t\t\tif ( geoInfo.material && geoInfo.material.mappingType !== 'AllSame' ) {\n\n\t\t\t\t\tvar materialIndex = getData( polygonVertexIndex, polygonIndex, vertexIndex, geoInfo.material )[ 0 ];\n\n\t\t\t\t}\n\n\t\t\t\tif ( geoInfo.uv ) {\n\n\t\t\t\t\tgeoInfo.uv.forEach( function ( uv, i ) {\n\n\t\t\t\t\t\tvar data = getData( polygonVertexIndex, polygonIndex, vertexIndex, uv );\n\n\t\t\t\t\t\tif ( faceUVs[ i ] === undefined ) {\n\n\t\t\t\t\t\t\tfaceUVs[ i ] = [];\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfaceUVs[ i ].push( data[ 0 ] );\n\t\t\t\t\t\tfaceUVs[ i ].push( data[ 1 ] );\n\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t\tfaceLength ++;\n\n\t\t\t\tif ( endOfFace ) {\n\n\t\t\t\t\tscope.genFace( buffers, geoInfo, facePositionIndexes, materialIndex, faceNormals, faceColors, faceUVs, faceWeights, faceWeightIndices, faceLength );\n\n\t\t\t\t\tpolygonIndex ++;\n\t\t\t\t\tfaceLength = 0;\n\n\t\t\t\t\t// reset arrays for the next face\n\t\t\t\t\tfacePositionIndexes = [];\n\t\t\t\t\tfaceNormals = [];\n\t\t\t\t\tfaceColors = [];\n\t\t\t\t\tfaceUVs = [];\n\t\t\t\t\tfaceWeights = [];\n\t\t\t\t\tfaceWeightIndices = [];\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\treturn buffers;\n\n\t\t},\n\n\t\t// Generate data for a single face in a geometry. If the face is a quad then split it into 2 tris\n\t\tgenFace: function ( buffers, geoInfo, facePositionIndexes, materialIndex, faceNormals, faceColors, faceUVs, faceWeights, faceWeightIndices, faceLength ) {\n\n\t\t\tfor ( var i = 2; i < faceLength; i ++ ) {\n\n\t\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ 0 ] ] );\n\t\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ 1 ] ] );\n\t\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ 2 ] ] );\n\n\t\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ ( i - 1 ) * 3 ] ] );\n\t\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ ( i - 1 ) * 3 + 1 ] ] );\n\t\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ ( i - 1 ) * 3 + 2 ] ] );\n\n\t\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ i * 3 ] ] );\n\t\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ i * 3 + 1 ] ] );\n\t\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ i * 3 + 2 ] ] );\n\n\t\t\t\tif ( geoInfo.skeleton ) {\n\n\t\t\t\t\tbuffers.vertexWeights.push( faceWeights[ 0 ] );\n\t\t\t\t\tbuffers.vertexWeights.push( faceWeights[ 1 ] );\n\t\t\t\t\tbuffers.vertexWeights.push( faceWeights[ 2 ] );\n\t\t\t\t\tbuffers.vertexWeights.push( faceWeights[ 3 ] );\n\n\t\t\t\t\tbuffers.vertexWeights.push( faceWeights[ ( i - 1 ) * 4 ] );\n\t\t\t\t\tbuffers.vertexWeights.push( faceWeights[ ( i - 1 ) * 4 + 1 ] );\n\t\t\t\t\tbuffers.vertexWeights.push( faceWeights[ ( i - 1 ) * 4 + 2 ] );\n\t\t\t\t\tbuffers.vertexWeights.push( faceWeights[ ( i - 1 ) * 4 + 3 ] );\n\n\t\t\t\t\tbuffers.vertexWeights.push( faceWeights[ i * 4 ] );\n\t\t\t\t\tbuffers.vertexWeights.push( faceWeights[ i * 4 + 1 ] );\n\t\t\t\t\tbuffers.vertexWeights.push( faceWeights[ i * 4 + 2 ] );\n\t\t\t\t\tbuffers.vertexWeights.push( faceWeights[ i * 4 + 3 ] );\n\n\t\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ 0 ] );\n\t\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ 1 ] );\n\t\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ 2 ] );\n\t\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ 3 ] );\n\n\t\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ ( i - 1 ) * 4 ] );\n\t\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ ( i - 1 ) * 4 + 1 ] );\n\t\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ ( i - 1 ) * 4 + 2 ] );\n\t\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ ( i - 1 ) * 4 + 3 ] );\n\n\t\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ i * 4 ] );\n\t\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ i * 4 + 1 ] );\n\t\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ i * 4 + 2 ] );\n\t\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ i * 4 + 3 ] );\n\n\t\t\t\t}\n\n\t\t\t\tif ( geoInfo.color ) {\n\n\t\t\t\t\tbuffers.colors.push( faceColors[ 0 ] );\n\t\t\t\t\tbuffers.colors.push( faceColors[ 1 ] );\n\t\t\t\t\tbuffers.colors.push( faceColors[ 2 ] );\n\n\t\t\t\t\tbuffers.colors.push( faceColors[ ( i - 1 ) * 3 ] );\n\t\t\t\t\tbuffers.colors.push( faceColors[ ( i - 1 ) * 3 + 1 ] );\n\t\t\t\t\tbuffers.colors.push( faceColors[ ( i - 1 ) * 3 + 2 ] );\n\n\t\t\t\t\tbuffers.colors.push( faceColors[ i * 3 ] );\n\t\t\t\t\tbuffers.colors.push( faceColors[ i * 3 + 1 ] );\n\t\t\t\t\tbuffers.colors.push( faceColors[ i * 3 + 2 ] );\n\n\t\t\t\t}\n\n\t\t\t\tif ( geoInfo.material && geoInfo.material.mappingType !== 'AllSame' ) {\n\n\t\t\t\t\tbuffers.materialIndex.push( materialIndex );\n\t\t\t\t\tbuffers.materialIndex.push( materialIndex );\n\t\t\t\t\tbuffers.materialIndex.push( materialIndex );\n\n\t\t\t\t}\n\n\t\t\t\tif ( geoInfo.normal ) {\n\n\t\t\t\t\tbuffers.normal.push( faceNormals[ 0 ] );\n\t\t\t\t\tbuffers.normal.push( faceNormals[ 1 ] );\n\t\t\t\t\tbuffers.normal.push( faceNormals[ 2 ] );\n\n\t\t\t\t\tbuffers.normal.push( faceNormals[ ( i - 1 ) * 3 ] );\n\t\t\t\t\tbuffers.normal.push( faceNormals[ ( i - 1 ) * 3 + 1 ] );\n\t\t\t\t\tbuffers.normal.push( faceNormals[ ( i - 1 ) * 3 + 2 ] );\n\n\t\t\t\t\tbuffers.normal.push( faceNormals[ i * 3 ] );\n\t\t\t\t\tbuffers.normal.push( faceNormals[ i * 3 + 1 ] );\n\t\t\t\t\tbuffers.normal.push( faceNormals[ i * 3 + 2 ] );\n\n\t\t\t\t}\n\n\t\t\t\tif ( geoInfo.uv ) {\n\n\t\t\t\t\tgeoInfo.uv.forEach( function ( uv, j ) {\n\n\t\t\t\t\t\tif ( buffers.uvs[ j ] === undefined ) buffers.uvs[ j ] = [];\n\n\t\t\t\t\t\tbuffers.uvs[ j ].push( faceUVs[ j ][ 0 ] );\n\t\t\t\t\t\tbuffers.uvs[ j ].push( faceUVs[ j ][ 1 ] );\n\n\t\t\t\t\t\tbuffers.uvs[ j ].push( faceUVs[ j ][ ( i - 1 ) * 2 ] );\n\t\t\t\t\t\tbuffers.uvs[ j ].push( faceUVs[ j ][ ( i - 1 ) * 2 + 1 ] );\n\n\t\t\t\t\t\tbuffers.uvs[ j ].push( faceUVs[ j ][ i * 2 ] );\n\t\t\t\t\t\tbuffers.uvs[ j ].push( faceUVs[ j ][ i * 2 + 1 ] );\n\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\taddMorphTargets: function ( parentGeo, parentGeoNode, morphTargets, preTransform ) {\n\n\t\t\tif ( morphTargets.length === 0 ) return;\n\n\t\t\tparentGeo.morphTargetsRelative = true;\n\n\t\t\tparentGeo.morphAttributes.position = [];\n\t\t\t// parentGeo.morphAttributes.normal = []; // not implemented\n\n\t\t\tvar scope = this;\n\t\t\tmorphTargets.forEach( function ( morphTarget ) {\n\n\t\t\t\tmorphTarget.rawTargets.forEach( function ( rawTarget ) {\n\n\t\t\t\t\tvar morphGeoNode = fbxTree.Objects.Geometry[ rawTarget.geoID ];\n\n\t\t\t\t\tif ( morphGeoNode !== undefined ) {\n\n\t\t\t\t\t\tscope.genMorphGeometry( parentGeo, parentGeoNode, morphGeoNode, preTransform, rawTarget.name );\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t} );\n\n\t\t},\n\n\t\t// a morph geometry node is similar to a standard  node, and the node is also contained\n\t\t// in FBXTree.Objects.Geometry, however it can only have attributes for position, normal\n\t\t// and a special attribute Index defining which vertices of the original geometry are affected\n\t\t// Normal and position attributes only have data for the vertices that are affected by the morph\n\t\tgenMorphGeometry: function ( parentGeo, parentGeoNode, morphGeoNode, preTransform, name ) {\n\n\t\t\tvar vertexIndices = ( parentGeoNode.PolygonVertexIndex !== undefined ) ? parentGeoNode.PolygonVertexIndex.a : [];\n\n\t\t\tvar morphPositionsSparse = ( morphGeoNode.Vertices !== undefined ) ? morphGeoNode.Vertices.a : [];\n\t\t\tvar indices = ( morphGeoNode.Indexes !== undefined ) ? morphGeoNode.Indexes.a : [];\n\n\t\t\tvar length = parentGeo.attributes.position.count * 3;\n\t\t\tvar morphPositions = new Float32Array( length );\n\n\t\t\tfor ( var i = 0; i < indices.length; i ++ ) {\n\n\t\t\t\tvar morphIndex = indices[ i ] * 3;\n\n\t\t\t\tmorphPositions[ morphIndex ] = morphPositionsSparse[ i * 3 ];\n\t\t\t\tmorphPositions[ morphIndex + 1 ] = morphPositionsSparse[ i * 3 + 1 ];\n\t\t\t\tmorphPositions[ morphIndex + 2 ] = morphPositionsSparse[ i * 3 + 2 ];\n\n\t\t\t}\n\n\t\t\t// TODO: add morph normal support\n\t\t\tvar morphGeoInfo = {\n\t\t\t\tvertexIndices: vertexIndices,\n\t\t\t\tvertexPositions: morphPositions,\n\n\t\t\t};\n\n\t\t\tvar morphBuffers = this.genBuffers( morphGeoInfo );\n\n\t\t\tvar positionAttribute = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Float32BufferAttribute\"]( morphBuffers.vertex, 3 );\n\t\t\tpositionAttribute.name = name || morphGeoNode.attrName;\n\n\t\t\tpositionAttribute.applyMatrix4( preTransform );\n\n\t\t\tparentGeo.morphAttributes.position.push( positionAttribute );\n\n\t\t},\n\n\t\t// Parse normal from FBXTree.Objects.Geometry.LayerElementNormal if it exists\n\t\tparseNormals: function ( NormalNode ) {\n\n\t\t\tvar mappingType = NormalNode.MappingInformationType;\n\t\t\tvar referenceType = NormalNode.ReferenceInformationType;\n\t\t\tvar buffer = NormalNode.Normals.a;\n\t\t\tvar indexBuffer = [];\n\t\t\tif ( referenceType === 'IndexToDirect' ) {\n\n\t\t\t\tif ( 'NormalIndex' in NormalNode ) {\n\n\t\t\t\t\tindexBuffer = NormalNode.NormalIndex.a;\n\n\t\t\t\t} else if ( 'NormalsIndex' in NormalNode ) {\n\n\t\t\t\t\tindexBuffer = NormalNode.NormalsIndex.a;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tdataSize: 3,\n\t\t\t\tbuffer: buffer,\n\t\t\t\tindices: indexBuffer,\n\t\t\t\tmappingType: mappingType,\n\t\t\t\treferenceType: referenceType\n\t\t\t};\n\n\t\t},\n\n\t\t// Parse UVs from FBXTree.Objects.Geometry.LayerElementUV if it exists\n\t\tparseUVs: function ( UVNode ) {\n\n\t\t\tvar mappingType = UVNode.MappingInformationType;\n\t\t\tvar referenceType = UVNode.ReferenceInformationType;\n\t\t\tvar buffer = UVNode.UV.a;\n\t\t\tvar indexBuffer = [];\n\t\t\tif ( referenceType === 'IndexToDirect' ) {\n\n\t\t\t\tindexBuffer = UVNode.UVIndex.a;\n\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tdataSize: 2,\n\t\t\t\tbuffer: buffer,\n\t\t\t\tindices: indexBuffer,\n\t\t\t\tmappingType: mappingType,\n\t\t\t\treferenceType: referenceType\n\t\t\t};\n\n\t\t},\n\n\t\t// Parse Vertex Colors from FBXTree.Objects.Geometry.LayerElementColor if it exists\n\t\tparseVertexColors: function ( ColorNode ) {\n\n\t\t\tvar mappingType = ColorNode.MappingInformationType;\n\t\t\tvar referenceType = ColorNode.ReferenceInformationType;\n\t\t\tvar buffer = ColorNode.Colors.a;\n\t\t\tvar indexBuffer = [];\n\t\t\tif ( referenceType === 'IndexToDirect' ) {\n\n\t\t\t\tindexBuffer = ColorNode.ColorIndex.a;\n\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tdataSize: 4,\n\t\t\t\tbuffer: buffer,\n\t\t\t\tindices: indexBuffer,\n\t\t\t\tmappingType: mappingType,\n\t\t\t\treferenceType: referenceType\n\t\t\t};\n\n\t\t},\n\n\t\t// Parse mapping and material data in FBXTree.Objects.Geometry.LayerElementMaterial if it exists\n\t\tparseMaterialIndices: function ( MaterialNode ) {\n\n\t\t\tvar mappingType = MaterialNode.MappingInformationType;\n\t\t\tvar referenceType = MaterialNode.ReferenceInformationType;\n\n\t\t\tif ( mappingType === 'NoMappingInformation' ) {\n\n\t\t\t\treturn {\n\t\t\t\t\tdataSize: 1,\n\t\t\t\t\tbuffer: [ 0 ],\n\t\t\t\t\tindices: [ 0 ],\n\t\t\t\t\tmappingType: 'AllSame',\n\t\t\t\t\treferenceType: referenceType\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t\tvar materialIndexBuffer = MaterialNode.Materials.a;\n\n\t\t\t// Since materials are stored as indices, there's a bit of a mismatch between FBX and what\n\t\t\t// we expect.So we create an intermediate buffer that points to the index in the buffer,\n\t\t\t// for conforming with the other functions we've written for other data.\n\t\t\tvar materialIndices = [];\n\n\t\t\tfor ( var i = 0; i < materialIndexBuffer.length; ++ i ) {\n\n\t\t\t\tmaterialIndices.push( i );\n\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tdataSize: 1,\n\t\t\t\tbuffer: materialIndexBuffer,\n\t\t\t\tindices: materialIndices,\n\t\t\t\tmappingType: mappingType,\n\t\t\t\treferenceType: referenceType\n\t\t\t};\n\n\t\t},\n\n\t\t// Generate a NurbGeometry from a node in FBXTree.Objects.Geometry\n\t\tparseNurbsGeometry: function ( geoNode ) {\n\n\t\t\tif ( _curves_NURBSCurve_js__WEBPACK_IMPORTED_MODULE_2__[\"NURBSCurve\"] === undefined ) {\n\n\t\t\t\tconsole.error( 'THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry.' );\n\t\t\t\treturn new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"BufferGeometry\"]();\n\n\t\t\t}\n\n\t\t\tvar order = parseInt( geoNode.Order );\n\n\t\t\tif ( isNaN( order ) ) {\n\n\t\t\t\tconsole.error( 'THREE.FBXLoader: Invalid Order %s given for geometry ID: %s', geoNode.Order, geoNode.id );\n\t\t\t\treturn new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"BufferGeometry\"]();\n\n\t\t\t}\n\n\t\t\tvar degree = order - 1;\n\n\t\t\tvar knots = geoNode.KnotVector.a;\n\t\t\tvar controlPoints = [];\n\t\t\tvar pointsValues = geoNode.Points.a;\n\n\t\t\tfor ( var i = 0, l = pointsValues.length; i < l; i += 4 ) {\n\n\t\t\t\tcontrolPoints.push( new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector4\"]().fromArray( pointsValues, i ) );\n\n\t\t\t}\n\n\t\t\tvar startKnot, endKnot;\n\n\t\t\tif ( geoNode.Form === 'Closed' ) {\n\n\t\t\t\tcontrolPoints.push( controlPoints[ 0 ] );\n\n\t\t\t} else if ( geoNode.Form === 'Periodic' ) {\n\n\t\t\t\tstartKnot = degree;\n\t\t\t\tendKnot = knots.length - 1 - startKnot;\n\n\t\t\t\tfor ( var i = 0; i < degree; ++ i ) {\n\n\t\t\t\t\tcontrolPoints.push( controlPoints[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar curve = new _curves_NURBSCurve_js__WEBPACK_IMPORTED_MODULE_2__[\"NURBSCurve\"]( degree, knots, controlPoints, startKnot, endKnot );\n\t\t\tvar vertices = curve.getPoints( controlPoints.length * 7 );\n\n\t\t\tvar positions = new Float32Array( vertices.length * 3 );\n\n\t\t\tvertices.forEach( function ( vertex, i ) {\n\n\t\t\t\tvertex.toArray( positions, i * 3 );\n\n\t\t\t} );\n\n\t\t\tvar geometry = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"BufferGeometry\"]();\n\t\t\tgeometry.setAttribute( 'position', new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"BufferAttribute\"]( positions, 3 ) );\n\n\t\t\treturn geometry;\n\n\t\t},\n\n\t};\n\n\t// parse animation data from FBXTree\n\tfunction AnimationParser() {}\n\n\tAnimationParser.prototype = {\n\n\t\tconstructor: AnimationParser,\n\n\t\t// take raw animation clips and turn them into three.js animation clips\n\t\tparse: function () {\n\n\t\t\tvar animationClips = [];\n\n\t\t\tvar rawClips = this.parseClips();\n\n\t\t\tif ( rawClips !== undefined ) {\n\n\t\t\t\tfor ( var key in rawClips ) {\n\n\t\t\t\t\tvar rawClip = rawClips[ key ];\n\n\t\t\t\t\tvar clip = this.addClip( rawClip );\n\n\t\t\t\t\tanimationClips.push( clip );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn animationClips;\n\n\t\t},\n\n\t\tparseClips: function () {\n\n\t\t\t// since the actual transformation data is stored in FBXTree.Objects.AnimationCurve,\n\t\t\t// if this is undefined we can safely assume there are no animations\n\t\t\tif ( fbxTree.Objects.AnimationCurve === undefined ) return undefined;\n\n\t\t\tvar curveNodesMap = this.parseAnimationCurveNodes();\n\n\t\t\tthis.parseAnimationCurves( curveNodesMap );\n\n\t\t\tvar layersMap = this.parseAnimationLayers( curveNodesMap );\n\t\t\tvar rawClips = this.parseAnimStacks( layersMap );\n\n\t\t\treturn rawClips;\n\n\t\t},\n\n\t\t// parse nodes in FBXTree.Objects.AnimationCurveNode\n\t\t// each AnimationCurveNode holds data for an animation transform for a model (e.g. left arm rotation )\n\t\t// and is referenced by an AnimationLayer\n\t\tparseAnimationCurveNodes: function () {\n\n\t\t\tvar rawCurveNodes = fbxTree.Objects.AnimationCurveNode;\n\n\t\t\tvar curveNodesMap = new Map();\n\n\t\t\tfor ( var nodeID in rawCurveNodes ) {\n\n\t\t\t\tvar rawCurveNode = rawCurveNodes[ nodeID ];\n\n\t\t\t\tif ( rawCurveNode.attrName.match( /S|R|T|DeformPercent/ ) !== null ) {\n\n\t\t\t\t\tvar curveNode = {\n\n\t\t\t\t\t\tid: rawCurveNode.id,\n\t\t\t\t\t\tattr: rawCurveNode.attrName,\n\t\t\t\t\t\tcurves: {},\n\n\t\t\t\t\t};\n\n\t\t\t\t\tcurveNodesMap.set( curveNode.id, curveNode );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn curveNodesMap;\n\n\t\t},\n\n\t\t// parse nodes in FBXTree.Objects.AnimationCurve and connect them up to\n\t\t// previously parsed AnimationCurveNodes. Each AnimationCurve holds data for a single animated\n\t\t// axis ( e.g. times and values of x rotation)\n\t\tparseAnimationCurves: function ( curveNodesMap ) {\n\n\t\t\tvar rawCurves = fbxTree.Objects.AnimationCurve;\n\n\t\t\t// TODO: Many values are identical up to roundoff error, but won't be optimised\n\t\t\t// e.g. position times: [0, 0.4, 0. 8]\n\t\t\t// position values: [7.23538335023477e-7, 93.67518615722656, -0.9982695579528809, 7.23538335023477e-7, 93.67518615722656, -0.9982695579528809, 7.235384487103147e-7, 93.67520904541016, -0.9982695579528809]\n\t\t\t// clearly, this should be optimised to\n\t\t\t// times: [0], positions [7.23538335023477e-7, 93.67518615722656, -0.9982695579528809]\n\t\t\t// this shows up in nearly every FBX file, and generally time array is length > 100\n\n\t\t\tfor ( var nodeID in rawCurves ) {\n\n\t\t\t\tvar animationCurve = {\n\n\t\t\t\t\tid: rawCurves[ nodeID ].id,\n\t\t\t\t\ttimes: rawCurves[ nodeID ].KeyTime.a.map( convertFBXTimeToSeconds ),\n\t\t\t\t\tvalues: rawCurves[ nodeID ].KeyValueFloat.a,\n\n\t\t\t\t};\n\n\t\t\t\tvar relationships = connections.get( animationCurve.id );\n\n\t\t\t\tif ( relationships !== undefined ) {\n\n\t\t\t\t\tvar animationCurveID = relationships.parents[ 0 ].ID;\n\t\t\t\t\tvar animationCurveRelationship = relationships.parents[ 0 ].relationship;\n\n\t\t\t\t\tif ( animationCurveRelationship.match( /X/ ) ) {\n\n\t\t\t\t\t\tcurveNodesMap.get( animationCurveID ).curves[ 'x' ] = animationCurve;\n\n\t\t\t\t\t} else if ( animationCurveRelationship.match( /Y/ ) ) {\n\n\t\t\t\t\t\tcurveNodesMap.get( animationCurveID ).curves[ 'y' ] = animationCurve;\n\n\t\t\t\t\t} else if ( animationCurveRelationship.match( /Z/ ) ) {\n\n\t\t\t\t\t\tcurveNodesMap.get( animationCurveID ).curves[ 'z' ] = animationCurve;\n\n\t\t\t\t\t} else if ( animationCurveRelationship.match( /d|DeformPercent/ ) && curveNodesMap.has( animationCurveID ) ) {\n\n\t\t\t\t\t\tcurveNodesMap.get( animationCurveID ).curves[ 'morph' ] = animationCurve;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\t// parse nodes in FBXTree.Objects.AnimationLayer. Each layers holds references\n\t\t// to various AnimationCurveNodes and is referenced by an AnimationStack node\n\t\t// note: theoretically a stack can have multiple layers, however in practice there always seems to be one per stack\n\t\tparseAnimationLayers: function ( curveNodesMap ) {\n\n\t\t\tvar rawLayers = fbxTree.Objects.AnimationLayer;\n\n\t\t\tvar layersMap = new Map();\n\n\t\t\tfor ( var nodeID in rawLayers ) {\n\n\t\t\t\tvar layerCurveNodes = [];\n\n\t\t\t\tvar connection = connections.get( parseInt( nodeID ) );\n\n\t\t\t\tif ( connection !== undefined ) {\n\n\t\t\t\t\t// all the animationCurveNodes used in the layer\n\t\t\t\t\tvar children = connection.children;\n\n\t\t\t\t\tchildren.forEach( function ( child, i ) {\n\n\t\t\t\t\t\tif ( curveNodesMap.has( child.ID ) ) {\n\n\t\t\t\t\t\t\tvar curveNode = curveNodesMap.get( child.ID );\n\n\t\t\t\t\t\t\t// check that the curves are defined for at least one axis, otherwise ignore the curveNode\n\t\t\t\t\t\t\tif ( curveNode.curves.x !== undefined || curveNode.curves.y !== undefined || curveNode.curves.z !== undefined ) {\n\n\t\t\t\t\t\t\t\tif ( layerCurveNodes[ i ] === undefined ) {\n\n\t\t\t\t\t\t\t\t\tvar modelID = connections.get( child.ID ).parents.filter( function ( parent ) {\n\n\t\t\t\t\t\t\t\t\t\treturn parent.relationship !== undefined;\n\n\t\t\t\t\t\t\t\t\t} )[ 0 ].ID;\n\n\t\t\t\t\t\t\t\t\tif ( modelID !== undefined ) {\n\n\t\t\t\t\t\t\t\t\t\tvar rawModel = fbxTree.Objects.Model[ modelID.toString() ];\n\n\t\t\t\t\t\t\t\t\t\tif ( rawModel === undefined ) {\n\n\t\t\t\t\t\t\t\t\t\t\tconsole.warn( 'THREE.FBXLoader: Encountered a unused curve.', child );\n\t\t\t\t\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tvar node = {\n\n\t\t\t\t\t\t\t\t\t\t\tmodelName: rawModel.attrName ? _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"PropertyBinding\"].sanitizeNodeName( rawModel.attrName ) : '',\n\t\t\t\t\t\t\t\t\t\t\tID: rawModel.id,\n\t\t\t\t\t\t\t\t\t\t\tinitialPosition: [ 0, 0, 0 ],\n\t\t\t\t\t\t\t\t\t\t\tinitialRotation: [ 0, 0, 0 ],\n\t\t\t\t\t\t\t\t\t\t\tinitialScale: [ 1, 1, 1 ],\n\n\t\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\t\tsceneGraph.traverse( function ( child ) {\n\n\t\t\t\t\t\t\t\t\t\t\tif ( child.ID === rawModel.id ) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tnode.transform = child.matrix;\n\n\t\t\t\t\t\t\t\t\t\t\t\tif ( child.userData.transformData ) node.eulerOrder = child.userData.transformData.eulerOrder;\n\n\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\t\t\t\tif ( ! node.transform ) node.transform = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Matrix4\"]();\n\n\t\t\t\t\t\t\t\t\t\t// if the animated model is pre rotated, we'll have to apply the pre rotations to every\n\t\t\t\t\t\t\t\t\t\t// animation value as well\n\t\t\t\t\t\t\t\t\t\tif ( 'PreRotation' in rawModel ) node.preRotation = rawModel.PreRotation.value;\n\t\t\t\t\t\t\t\t\t\tif ( 'PostRotation' in rawModel ) node.postRotation = rawModel.PostRotation.value;\n\n\t\t\t\t\t\t\t\t\t\tlayerCurveNodes[ i ] = node;\n\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif ( layerCurveNodes[ i ] ) layerCurveNodes[ i ][ curveNode.attr ] = curveNode;\n\n\t\t\t\t\t\t\t} else if ( curveNode.curves.morph !== undefined ) {\n\n\t\t\t\t\t\t\t\tif ( layerCurveNodes[ i ] === undefined ) {\n\n\t\t\t\t\t\t\t\t\tvar deformerID = connections.get( child.ID ).parents.filter( function ( parent ) {\n\n\t\t\t\t\t\t\t\t\t\treturn parent.relationship !== undefined;\n\n\t\t\t\t\t\t\t\t\t} )[ 0 ].ID;\n\n\t\t\t\t\t\t\t\t\tvar morpherID = connections.get( deformerID ).parents[ 0 ].ID;\n\t\t\t\t\t\t\t\t\tvar geoID = connections.get( morpherID ).parents[ 0 ].ID;\n\n\t\t\t\t\t\t\t\t\t// assuming geometry is not used in more than one model\n\t\t\t\t\t\t\t\t\tvar modelID = connections.get( geoID ).parents[ 0 ].ID;\n\n\t\t\t\t\t\t\t\t\tvar rawModel = fbxTree.Objects.Model[ modelID ];\n\n\t\t\t\t\t\t\t\t\tvar node = {\n\n\t\t\t\t\t\t\t\t\t\tmodelName: rawModel.attrName ? _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"PropertyBinding\"].sanitizeNodeName( rawModel.attrName ) : '',\n\t\t\t\t\t\t\t\t\t\tmorphName: fbxTree.Objects.Deformer[ deformerID ].attrName,\n\n\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\tlayerCurveNodes[ i ] = node;\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tlayerCurveNodes[ i ][ curveNode.attr ] = curveNode;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} );\n\n\t\t\t\t\tlayersMap.set( parseInt( nodeID ), layerCurveNodes );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn layersMap;\n\n\t\t},\n\n\t\t// parse nodes in FBXTree.Objects.AnimationStack. These are the top level node in the animation\n\t\t// hierarchy. Each Stack node will be used to create a AnimationClip\n\t\tparseAnimStacks: function ( layersMap ) {\n\n\t\t\tvar rawStacks = fbxTree.Objects.AnimationStack;\n\n\t\t\t// connect the stacks (clips) up to the layers\n\t\t\tvar rawClips = {};\n\n\t\t\tfor ( var nodeID in rawStacks ) {\n\n\t\t\t\tvar children = connections.get( parseInt( nodeID ) ).children;\n\n\t\t\t\tif ( children.length > 1 ) {\n\n\t\t\t\t\t// it seems like stacks will always be associated with a single layer. But just in case there are files\n\t\t\t\t\t// where there are multiple layers per stack, we'll display a warning\n\t\t\t\t\tconsole.warn( 'THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.' );\n\n\t\t\t\t}\n\n\t\t\t\tvar layer = layersMap.get( children[ 0 ].ID );\n\n\t\t\t\trawClips[ nodeID ] = {\n\n\t\t\t\t\tname: rawStacks[ nodeID ].attrName,\n\t\t\t\t\tlayer: layer,\n\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t\treturn rawClips;\n\n\t\t},\n\n\t\taddClip: function ( rawClip ) {\n\n\t\t\tvar tracks = [];\n\n\t\t\tvar scope = this;\n\t\t\trawClip.layer.forEach( function ( rawTracks ) {\n\n\t\t\t\ttracks = tracks.concat( scope.generateTracks( rawTracks ) );\n\n\t\t\t} );\n\n\t\t\treturn new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"AnimationClip\"]( rawClip.name, - 1, tracks );\n\n\t\t},\n\n\t\tgenerateTracks: function ( rawTracks ) {\n\n\t\t\tvar tracks = [];\n\n\t\t\tvar initialPosition = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector3\"]();\n\t\t\tvar initialRotation = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Quaternion\"]();\n\t\t\tvar initialScale = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector3\"]();\n\n\t\t\tif ( rawTracks.transform ) rawTracks.transform.decompose( initialPosition, initialRotation, initialScale );\n\n\t\t\tinitialPosition = initialPosition.toArray();\n\t\t\tinitialRotation = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Euler\"]().setFromQuaternion( initialRotation, rawTracks.eulerOrder ).toArray();\n\t\t\tinitialScale = initialScale.toArray();\n\n\t\t\tif ( rawTracks.T !== undefined && Object.keys( rawTracks.T.curves ).length > 0 ) {\n\n\t\t\t\tvar positionTrack = this.generateVectorTrack( rawTracks.modelName, rawTracks.T.curves, initialPosition, 'position' );\n\t\t\t\tif ( positionTrack !== undefined ) tracks.push( positionTrack );\n\n\t\t\t}\n\n\t\t\tif ( rawTracks.R !== undefined && Object.keys( rawTracks.R.curves ).length > 0 ) {\n\n\t\t\t\tvar rotationTrack = this.generateRotationTrack( rawTracks.modelName, rawTracks.R.curves, initialRotation, rawTracks.preRotation, rawTracks.postRotation, rawTracks.eulerOrder );\n\t\t\t\tif ( rotationTrack !== undefined ) tracks.push( rotationTrack );\n\n\t\t\t}\n\n\t\t\tif ( rawTracks.S !== undefined && Object.keys( rawTracks.S.curves ).length > 0 ) {\n\n\t\t\t\tvar scaleTrack = this.generateVectorTrack( rawTracks.modelName, rawTracks.S.curves, initialScale, 'scale' );\n\t\t\t\tif ( scaleTrack !== undefined ) tracks.push( scaleTrack );\n\n\t\t\t}\n\n\t\t\tif ( rawTracks.DeformPercent !== undefined ) {\n\n\t\t\t\tvar morphTrack = this.generateMorphTrack( rawTracks );\n\t\t\t\tif ( morphTrack !== undefined ) tracks.push( morphTrack );\n\n\t\t\t}\n\n\t\t\treturn tracks;\n\n\t\t},\n\n\t\tgenerateVectorTrack: function ( modelName, curves, initialValue, type ) {\n\n\t\t\tvar times = this.getTimesForAllAxes( curves );\n\t\t\tvar values = this.getKeyframeTrackValues( times, curves, initialValue );\n\n\t\t\treturn new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"VectorKeyframeTrack\"]( modelName + '.' + type, times, values );\n\n\t\t},\n\n\t\tgenerateRotationTrack: function ( modelName, curves, initialValue, preRotation, postRotation, eulerOrder ) {\n\n\t\t\tif ( curves.x !== undefined ) {\n\n\t\t\t\tthis.interpolateRotations( curves.x );\n\t\t\t\tcurves.x.values = curves.x.values.map( _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"MathUtils\"].degToRad );\n\n\t\t\t}\n\n\t\t\tif ( curves.y !== undefined ) {\n\n\t\t\t\tthis.interpolateRotations( curves.y );\n\t\t\t\tcurves.y.values = curves.y.values.map( _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"MathUtils\"].degToRad );\n\n\t\t\t}\n\n\t\t\tif ( curves.z !== undefined ) {\n\n\t\t\t\tthis.interpolateRotations( curves.z );\n\t\t\t\tcurves.z.values = curves.z.values.map( _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"MathUtils\"].degToRad );\n\n\t\t\t}\n\n\t\t\tvar times = this.getTimesForAllAxes( curves );\n\t\t\tvar values = this.getKeyframeTrackValues( times, curves, initialValue );\n\n\t\t\tif ( preRotation !== undefined ) {\n\n\t\t\t\tpreRotation = preRotation.map( _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"MathUtils\"].degToRad );\n\t\t\t\tpreRotation.push( eulerOrder );\n\n\t\t\t\tpreRotation = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Euler\"]().fromArray( preRotation );\n\t\t\t\tpreRotation = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Quaternion\"]().setFromEuler( preRotation );\n\n\t\t\t}\n\n\t\t\tif ( postRotation !== undefined ) {\n\n\t\t\t\tpostRotation = postRotation.map( _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"MathUtils\"].degToRad );\n\t\t\t\tpostRotation.push( eulerOrder );\n\n\t\t\t\tpostRotation = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Euler\"]().fromArray( postRotation );\n\t\t\t\tpostRotation = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Quaternion\"]().setFromEuler( postRotation ).invert();\n\n\t\t\t}\n\n\t\t\tvar quaternion = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Quaternion\"]();\n\t\t\tvar euler = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Euler\"]();\n\n\t\t\tvar quaternionValues = [];\n\n\t\t\tfor ( var i = 0; i < values.length; i += 3 ) {\n\n\t\t\t\teuler.set( values[ i ], values[ i + 1 ], values[ i + 2 ], eulerOrder );\n\n\t\t\t\tquaternion.setFromEuler( euler );\n\n\t\t\t\tif ( preRotation !== undefined ) quaternion.premultiply( preRotation );\n\t\t\t\tif ( postRotation !== undefined ) quaternion.multiply( postRotation );\n\n\t\t\t\tquaternion.toArray( quaternionValues, ( i / 3 ) * 4 );\n\n\t\t\t}\n\n\t\t\treturn new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"QuaternionKeyframeTrack\"]( modelName + '.quaternion', times, quaternionValues );\n\n\t\t},\n\n\t\tgenerateMorphTrack: function ( rawTracks ) {\n\n\t\t\tvar curves = rawTracks.DeformPercent.curves.morph;\n\t\t\tvar values = curves.values.map( function ( val ) {\n\n\t\t\t\treturn val / 100;\n\n\t\t\t} );\n\n\t\t\tvar morphNum = sceneGraph.getObjectByName( rawTracks.modelName ).morphTargetDictionary[ rawTracks.morphName ];\n\n\t\t\treturn new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"NumberKeyframeTrack\"]( rawTracks.modelName + '.morphTargetInfluences[' + morphNum + ']', curves.times, values );\n\n\t\t},\n\n\t\t// For all animated objects, times are defined separately for each axis\n\t\t// Here we'll combine the times into one sorted array without duplicates\n\t\tgetTimesForAllAxes: function ( curves ) {\n\n\t\t\tvar times = [];\n\n\t\t\t// first join together the times for each axis, if defined\n\t\t\tif ( curves.x !== undefined ) times = times.concat( curves.x.times );\n\t\t\tif ( curves.y !== undefined ) times = times.concat( curves.y.times );\n\t\t\tif ( curves.z !== undefined ) times = times.concat( curves.z.times );\n\n\t\t\t// then sort them\n\t\t\ttimes = times.sort( function ( a, b ) {\n\n\t\t\t\treturn a - b;\n\n\t\t\t} );\n\n\t\t\t// and remove duplicates\n\t\t\tif ( times.length > 1 ) {\n\n\t\t\t\tvar targetIndex = 1;\n\t\t\t\tvar lastValue = times[ 0 ];\n\t\t\t\tfor ( var i = 1; i < times.length; i ++ ) {\n\n\t\t\t\t\tvar currentValue = times[ i ];\n\t\t\t\t\tif ( currentValue !== lastValue ) {\n\n\t\t\t\t\t\ttimes[ targetIndex ] = currentValue;\n\t\t\t\t\t\tlastValue = currentValue;\n\t\t\t\t\t\ttargetIndex ++;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\ttimes = times.slice( 0, targetIndex );\n\n\t\t\t}\n\n\t\t\treturn times;\n\n\t\t},\n\n\t\tgetKeyframeTrackValues: function ( times, curves, initialValue ) {\n\n\t\t\tvar prevValue = initialValue;\n\n\t\t\tvar values = [];\n\n\t\t\tvar xIndex = - 1;\n\t\t\tvar yIndex = - 1;\n\t\t\tvar zIndex = - 1;\n\n\t\t\ttimes.forEach( function ( time ) {\n\n\t\t\t\tif ( curves.x ) xIndex = curves.x.times.indexOf( time );\n\t\t\t\tif ( curves.y ) yIndex = curves.y.times.indexOf( time );\n\t\t\t\tif ( curves.z ) zIndex = curves.z.times.indexOf( time );\n\n\t\t\t\t// if there is an x value defined for this frame, use that\n\t\t\t\tif ( xIndex !== - 1 ) {\n\n\t\t\t\t\tvar xValue = curves.x.values[ xIndex ];\n\t\t\t\t\tvalues.push( xValue );\n\t\t\t\t\tprevValue[ 0 ] = xValue;\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// otherwise use the x value from the previous frame\n\t\t\t\t\tvalues.push( prevValue[ 0 ] );\n\n\t\t\t\t}\n\n\t\t\t\tif ( yIndex !== - 1 ) {\n\n\t\t\t\t\tvar yValue = curves.y.values[ yIndex ];\n\t\t\t\t\tvalues.push( yValue );\n\t\t\t\t\tprevValue[ 1 ] = yValue;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tvalues.push( prevValue[ 1 ] );\n\n\t\t\t\t}\n\n\t\t\t\tif ( zIndex !== - 1 ) {\n\n\t\t\t\t\tvar zValue = curves.z.values[ zIndex ];\n\t\t\t\t\tvalues.push( zValue );\n\t\t\t\t\tprevValue[ 2 ] = zValue;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tvalues.push( prevValue[ 2 ] );\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\treturn values;\n\n\t\t},\n\n\t\t// Rotations are defined as Euler angles which can have values  of any size\n\t\t// These will be converted to quaternions which don't support values greater than\n\t\t// PI, so we'll interpolate large rotations\n\t\tinterpolateRotations: function ( curve ) {\n\n\t\t\tfor ( var i = 1; i < curve.values.length; i ++ ) {\n\n\t\t\t\tvar initialValue = curve.values[ i - 1 ];\n\t\t\t\tvar valuesSpan = curve.values[ i ] - initialValue;\n\n\t\t\t\tvar absoluteSpan = Math.abs( valuesSpan );\n\n\t\t\t\tif ( absoluteSpan >= 180 ) {\n\n\t\t\t\t\tvar numSubIntervals = absoluteSpan / 180;\n\n\t\t\t\t\tvar step = valuesSpan / numSubIntervals;\n\t\t\t\t\tvar nextValue = initialValue + step;\n\n\t\t\t\t\tvar initialTime = curve.times[ i - 1 ];\n\t\t\t\t\tvar timeSpan = curve.times[ i ] - initialTime;\n\t\t\t\t\tvar interval = timeSpan / numSubIntervals;\n\t\t\t\t\tvar nextTime = initialTime + interval;\n\n\t\t\t\t\tvar interpolatedTimes = [];\n\t\t\t\t\tvar interpolatedValues = [];\n\n\t\t\t\t\twhile ( nextTime < curve.times[ i ] ) {\n\n\t\t\t\t\t\tinterpolatedTimes.push( nextTime );\n\t\t\t\t\t\tnextTime += interval;\n\n\t\t\t\t\t\tinterpolatedValues.push( nextValue );\n\t\t\t\t\t\tnextValue += step;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tcurve.times = inject( curve.times, i, interpolatedTimes );\n\t\t\t\t\tcurve.values = inject( curve.values, i, interpolatedValues );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t};\n\n\t// parse an FBX file in ASCII format\n\tfunction TextParser() {}\n\n\tTextParser.prototype = {\n\n\t\tconstructor: TextParser,\n\n\t\tgetPrevNode: function () {\n\n\t\t\treturn this.nodeStack[ this.currentIndent - 2 ];\n\n\t\t},\n\n\t\tgetCurrentNode: function () {\n\n\t\t\treturn this.nodeStack[ this.currentIndent - 1 ];\n\n\t\t},\n\n\t\tgetCurrentProp: function () {\n\n\t\t\treturn this.currentProp;\n\n\t\t},\n\n\t\tpushStack: function ( node ) {\n\n\t\t\tthis.nodeStack.push( node );\n\t\t\tthis.currentIndent += 1;\n\n\t\t},\n\n\t\tpopStack: function () {\n\n\t\t\tthis.nodeStack.pop();\n\t\t\tthis.currentIndent -= 1;\n\n\t\t},\n\n\t\tsetCurrentProp: function ( val, name ) {\n\n\t\t\tthis.currentProp = val;\n\t\t\tthis.currentPropName = name;\n\n\t\t},\n\n\t\tparse: function ( text ) {\n\n\t\t\tthis.currentIndent = 0;\n\n\t\t\tthis.allNodes = new FBXTree();\n\t\t\tthis.nodeStack = [];\n\t\t\tthis.currentProp = [];\n\t\t\tthis.currentPropName = '';\n\n\t\t\tvar scope = this;\n\n\t\t\tvar split = text.split( /[\\r\\n]+/ );\n\n\t\t\tsplit.forEach( function ( line, i ) {\n\n\t\t\t\tvar matchComment = line.match( /^[\\s\\t]*;/ );\n\t\t\t\tvar matchEmpty = line.match( /^[\\s\\t]*$/ );\n\n\t\t\t\tif ( matchComment || matchEmpty ) return;\n\n\t\t\t\tvar matchBeginning = line.match( '^\\\\t{' + scope.currentIndent + '}(\\\\w+):(.*){', '' );\n\t\t\t\tvar matchProperty = line.match( '^\\\\t{' + ( scope.currentIndent ) + '}(\\\\w+):[\\\\s\\\\t\\\\r\\\\n](.*)' );\n\t\t\t\tvar matchEnd = line.match( '^\\\\t{' + ( scope.currentIndent - 1 ) + '}}' );\n\n\t\t\t\tif ( matchBeginning ) {\n\n\t\t\t\t\tscope.parseNodeBegin( line, matchBeginning );\n\n\t\t\t\t} else if ( matchProperty ) {\n\n\t\t\t\t\tscope.parseNodeProperty( line, matchProperty, split[ ++ i ] );\n\n\t\t\t\t} else if ( matchEnd ) {\n\n\t\t\t\t\tscope.popStack();\n\n\t\t\t\t} else if ( line.match( /^[^\\s\\t}]/ ) ) {\n\n\t\t\t\t\t// large arrays are split over multiple lines terminated with a ',' character\n\t\t\t\t\t// if this is encountered the line needs to be joined to the previous line\n\t\t\t\t\tscope.parseNodePropertyContinued( line );\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\treturn this.allNodes;\n\n\t\t},\n\n\t\tparseNodeBegin: function ( line, property ) {\n\n\t\t\tvar nodeName = property[ 1 ].trim().replace( /^\"/, '' ).replace( /\"$/, '' );\n\n\t\t\tvar nodeAttrs = property[ 2 ].split( ',' ).map( function ( attr ) {\n\n\t\t\t\treturn attr.trim().replace( /^\"/, '' ).replace( /\"$/, '' );\n\n\t\t\t} );\n\n\t\t\tvar node = { name: nodeName };\n\t\t\tvar attrs = this.parseNodeAttr( nodeAttrs );\n\n\t\t\tvar currentNode = this.getCurrentNode();\n\n\t\t\t// a top node\n\t\t\tif ( this.currentIndent === 0 ) {\n\n\t\t\t\tthis.allNodes.add( nodeName, node );\n\n\t\t\t} else { // a subnode\n\n\t\t\t\t// if the subnode already exists, append it\n\t\t\t\tif ( nodeName in currentNode ) {\n\n\t\t\t\t\t// special case Pose needs PoseNodes as an array\n\t\t\t\t\tif ( nodeName === 'PoseNode' ) {\n\n\t\t\t\t\t\tcurrentNode.PoseNode.push( node );\n\n\t\t\t\t\t} else if ( currentNode[ nodeName ].id !== undefined ) {\n\n\t\t\t\t\t\tcurrentNode[ nodeName ] = {};\n\t\t\t\t\t\tcurrentNode[ nodeName ][ currentNode[ nodeName ].id ] = currentNode[ nodeName ];\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( attrs.id !== '' ) currentNode[ nodeName ][ attrs.id ] = node;\n\n\t\t\t\t} else if ( typeof attrs.id === 'number' ) {\n\n\t\t\t\t\tcurrentNode[ nodeName ] = {};\n\t\t\t\t\tcurrentNode[ nodeName ][ attrs.id ] = node;\n\n\t\t\t\t} else if ( nodeName !== 'Properties70' ) {\n\n\t\t\t\t\tif ( nodeName === 'PoseNode' )\tcurrentNode[ nodeName ] = [ node ];\n\t\t\t\t\telse currentNode[ nodeName ] = node;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( typeof attrs.id === 'number' ) node.id = attrs.id;\n\t\t\tif ( attrs.name !== '' ) node.attrName = attrs.name;\n\t\t\tif ( attrs.type !== '' ) node.attrType = attrs.type;\n\n\t\t\tthis.pushStack( node );\n\n\t\t},\n\n\t\tparseNodeAttr: function ( attrs ) {\n\n\t\t\tvar id = attrs[ 0 ];\n\n\t\t\tif ( attrs[ 0 ] !== '' ) {\n\n\t\t\t\tid = parseInt( attrs[ 0 ] );\n\n\t\t\t\tif ( isNaN( id ) ) {\n\n\t\t\t\t\tid = attrs[ 0 ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar name = '', type = '';\n\n\t\t\tif ( attrs.length > 1 ) {\n\n\t\t\t\tname = attrs[ 1 ].replace( /^(\\w+)::/, '' );\n\t\t\t\ttype = attrs[ 2 ];\n\n\t\t\t}\n\n\t\t\treturn { id: id, name: name, type: type };\n\n\t\t},\n\n\t\tparseNodeProperty: function ( line, property, contentLine ) {\n\n\t\t\tvar propName = property[ 1 ].replace( /^\"/, '' ).replace( /\"$/, '' ).trim();\n\t\t\tvar propValue = property[ 2 ].replace( /^\"/, '' ).replace( /\"$/, '' ).trim();\n\n\t\t\t// for special case: base64 image data follows \"Content: ,\" line\n\t\t\t//\tContent: ,\n\t\t\t//\t \"/9j/4RDaRXhpZgAATU0A...\"\n\t\t\tif ( propName === 'Content' && propValue === ',' ) {\n\n\t\t\t\tpropValue = contentLine.replace( /\"/g, '' ).replace( /,$/, '' ).trim();\n\n\t\t\t}\n\n\t\t\tvar currentNode = this.getCurrentNode();\n\t\t\tvar parentName = currentNode.name;\n\n\t\t\tif ( parentName === 'Properties70' ) {\n\n\t\t\t\tthis.parseNodeSpecialProperty( line, propName, propValue );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\t// Connections\n\t\t\tif ( propName === 'C' ) {\n\n\t\t\t\tvar connProps = propValue.split( ',' ).slice( 1 );\n\t\t\t\tvar from = parseInt( connProps[ 0 ] );\n\t\t\t\tvar to = parseInt( connProps[ 1 ] );\n\n\t\t\t\tvar rest = propValue.split( ',' ).slice( 3 );\n\n\t\t\t\trest = rest.map( function ( elem ) {\n\n\t\t\t\t\treturn elem.trim().replace( /^\"/, '' );\n\n\t\t\t\t} );\n\n\t\t\t\tpropName = 'connections';\n\t\t\t\tpropValue = [ from, to ];\n\t\t\t\tappend( propValue, rest );\n\n\t\t\t\tif ( currentNode[ propName ] === undefined ) {\n\n\t\t\t\t\tcurrentNode[ propName ] = [];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// Node\n\t\t\tif ( propName === 'Node' ) currentNode.id = propValue;\n\n\t\t\t// connections\n\t\t\tif ( propName in currentNode && Array.isArray( currentNode[ propName ] ) ) {\n\n\t\t\t\tcurrentNode[ propName ].push( propValue );\n\n\t\t\t} else {\n\n\t\t\t\tif ( propName !== 'a' ) currentNode[ propName ] = propValue;\n\t\t\t\telse currentNode.a = propValue;\n\n\t\t\t}\n\n\t\t\tthis.setCurrentProp( currentNode, propName );\n\n\t\t\t// convert string to array, unless it ends in ',' in which case more will be added to it\n\t\t\tif ( propName === 'a' && propValue.slice( - 1 ) !== ',' ) {\n\n\t\t\t\tcurrentNode.a = parseNumberArray( propValue );\n\n\t\t\t}\n\n\t\t},\n\n\t\tparseNodePropertyContinued: function ( line ) {\n\n\t\t\tvar currentNode = this.getCurrentNode();\n\n\t\t\tcurrentNode.a += line;\n\n\t\t\t// if the line doesn't end in ',' we have reached the end of the property value\n\t\t\t// so convert the string to an array\n\t\t\tif ( line.slice( - 1 ) !== ',' ) {\n\n\t\t\t\tcurrentNode.a = parseNumberArray( currentNode.a );\n\n\t\t\t}\n\n\t\t},\n\n\t\t// parse \"Property70\"\n\t\tparseNodeSpecialProperty: function ( line, propName, propValue ) {\n\n\t\t\t// split this\n\t\t\t// P: \"Lcl Scaling\", \"Lcl Scaling\", \"\", \"A\",1,1,1\n\t\t\t// into array like below\n\t\t\t// [\"Lcl Scaling\", \"Lcl Scaling\", \"\", \"A\", \"1,1,1\" ]\n\t\t\tvar props = propValue.split( '\",' ).map( function ( prop ) {\n\n\t\t\t\treturn prop.trim().replace( /^\\\"/, '' ).replace( /\\s/, '_' );\n\n\t\t\t} );\n\n\t\t\tvar innerPropName = props[ 0 ];\n\t\t\tvar innerPropType1 = props[ 1 ];\n\t\t\tvar innerPropType2 = props[ 2 ];\n\t\t\tvar innerPropFlag = props[ 3 ];\n\t\t\tvar innerPropValue = props[ 4 ];\n\n\t\t\t// cast values where needed, otherwise leave as strings\n\t\t\tswitch ( innerPropType1 ) {\n\n\t\t\t\tcase 'int':\n\t\t\t\tcase 'enum':\n\t\t\t\tcase 'bool':\n\t\t\t\tcase 'ULongLong':\n\t\t\t\tcase 'double':\n\t\t\t\tcase 'Number':\n\t\t\t\tcase 'FieldOfView':\n\t\t\t\t\tinnerPropValue = parseFloat( innerPropValue );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'Color':\n\t\t\t\tcase 'ColorRGB':\n\t\t\t\tcase 'Vector3D':\n\t\t\t\tcase 'Lcl_Translation':\n\t\t\t\tcase 'Lcl_Rotation':\n\t\t\t\tcase 'Lcl_Scaling':\n\t\t\t\t\tinnerPropValue = parseNumberArray( innerPropValue );\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\t// CAUTION: these props must append to parent's parent\n\t\t\tthis.getPrevNode()[ innerPropName ] = {\n\n\t\t\t\t'type': innerPropType1,\n\t\t\t\t'type2': innerPropType2,\n\t\t\t\t'flag': innerPropFlag,\n\t\t\t\t'value': innerPropValue\n\n\t\t\t};\n\n\t\t\tthis.setCurrentProp( this.getPrevNode(), innerPropName );\n\n\t\t},\n\n\t};\n\n\t// Parse an FBX file in Binary format\n\tfunction BinaryParser() {}\n\n\tBinaryParser.prototype = {\n\n\t\tconstructor: BinaryParser,\n\n\t\tparse: function ( buffer ) {\n\n\t\t\tvar reader = new BinaryReader( buffer );\n\t\t\treader.skip( 23 ); // skip magic 23 bytes\n\n\t\t\tvar version = reader.getUint32();\n\n\t\t\tif ( version < 6400 ) {\n\n\t\t\t\tthrow new Error( 'THREE.FBXLoader: FBX version not supported, FileVersion: ' + version );\n\n\t\t\t}\n\n\t\t\tvar allNodes = new FBXTree();\n\n\t\t\twhile ( ! this.endOfContent( reader ) ) {\n\n\t\t\t\tvar node = this.parseNode( reader, version );\n\t\t\t\tif ( node !== null ) allNodes.add( node.name, node );\n\n\t\t\t}\n\n\t\t\treturn allNodes;\n\n\t\t},\n\n\t\t// Check if reader has reached the end of content.\n\t\tendOfContent: function ( reader ) {\n\n\t\t\t// footer size: 160bytes + 16-byte alignment padding\n\t\t\t// - 16bytes: magic\n\t\t\t// - padding til 16-byte alignment (at least 1byte?)\n\t\t\t//\t(seems like some exporters embed fixed 15 or 16bytes?)\n\t\t\t// - 4bytes: magic\n\t\t\t// - 4bytes: version\n\t\t\t// - 120bytes: zero\n\t\t\t// - 16bytes: magic\n\t\t\tif ( reader.size() % 16 === 0 ) {\n\n\t\t\t\treturn ( ( reader.getOffset() + 160 + 16 ) & ~ 0xf ) >= reader.size();\n\n\t\t\t} else {\n\n\t\t\t\treturn reader.getOffset() + 160 + 16 >= reader.size();\n\n\t\t\t}\n\n\t\t},\n\n\t\t// recursively parse nodes until the end of the file is reached\n\t\tparseNode: function ( reader, version ) {\n\n\t\t\tvar node = {};\n\n\t\t\t// The first three data sizes depends on version.\n\t\t\tvar endOffset = ( version >= 7500 ) ? reader.getUint64() : reader.getUint32();\n\t\t\tvar numProperties = ( version >= 7500 ) ? reader.getUint64() : reader.getUint32();\n\n\t\t\t( version >= 7500 ) ? reader.getUint64() : reader.getUint32(); // the returned propertyListLen is not used\n\n\t\t\tvar nameLen = reader.getUint8();\n\t\t\tvar name = reader.getString( nameLen );\n\n\t\t\t// Regards this node as NULL-record if endOffset is zero\n\t\t\tif ( endOffset === 0 ) return null;\n\n\t\t\tvar propertyList = [];\n\n\t\t\tfor ( var i = 0; i < numProperties; i ++ ) {\n\n\t\t\t\tpropertyList.push( this.parseProperty( reader ) );\n\n\t\t\t}\n\n\t\t\t// Regards the first three elements in propertyList as id, attrName, and attrType\n\t\t\tvar id = propertyList.length > 0 ? propertyList[ 0 ] : '';\n\t\t\tvar attrName = propertyList.length > 1 ? propertyList[ 1 ] : '';\n\t\t\tvar attrType = propertyList.length > 2 ? propertyList[ 2 ] : '';\n\n\t\t\t// check if this node represents just a single property\n\t\t\t// like (name, 0) set or (name2, [0, 1, 2]) set of {name: 0, name2: [0, 1, 2]}\n\t\t\tnode.singleProperty = ( numProperties === 1 && reader.getOffset() === endOffset ) ? true : false;\n\n\t\t\twhile ( endOffset > reader.getOffset() ) {\n\n\t\t\t\tvar subNode = this.parseNode( reader, version );\n\n\t\t\t\tif ( subNode !== null ) this.parseSubNode( name, node, subNode );\n\n\t\t\t}\n\n\t\t\tnode.propertyList = propertyList; // raw property list used by parent\n\n\t\t\tif ( typeof id === 'number' ) node.id = id;\n\t\t\tif ( attrName !== '' ) node.attrName = attrName;\n\t\t\tif ( attrType !== '' ) node.attrType = attrType;\n\t\t\tif ( name !== '' ) node.name = name;\n\n\t\t\treturn node;\n\n\t\t},\n\n\t\tparseSubNode: function ( name, node, subNode ) {\n\n\t\t\t// special case: child node is single property\n\t\t\tif ( subNode.singleProperty === true ) {\n\n\t\t\t\tvar value = subNode.propertyList[ 0 ];\n\n\t\t\t\tif ( Array.isArray( value ) ) {\n\n\t\t\t\t\tnode[ subNode.name ] = subNode;\n\n\t\t\t\t\tsubNode.a = value;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tnode[ subNode.name ] = value;\n\n\t\t\t\t}\n\n\t\t\t} else if ( name === 'Connections' && subNode.name === 'C' ) {\n\n\t\t\t\tvar array = [];\n\n\t\t\t\tsubNode.propertyList.forEach( function ( property, i ) {\n\n\t\t\t\t\t// first Connection is FBX type (OO, OP, etc.). We'll discard these\n\t\t\t\t\tif ( i !== 0 ) array.push( property );\n\n\t\t\t\t} );\n\n\t\t\t\tif ( node.connections === undefined ) {\n\n\t\t\t\t\tnode.connections = [];\n\n\t\t\t\t}\n\n\t\t\t\tnode.connections.push( array );\n\n\t\t\t} else if ( subNode.name === 'Properties70' ) {\n\n\t\t\t\tvar keys = Object.keys( subNode );\n\n\t\t\t\tkeys.forEach( function ( key ) {\n\n\t\t\t\t\tnode[ key ] = subNode[ key ];\n\n\t\t\t\t} );\n\n\t\t\t} else if ( name === 'Properties70' && subNode.name === 'P' ) {\n\n\t\t\t\tvar innerPropName = subNode.propertyList[ 0 ];\n\t\t\t\tvar innerPropType1 = subNode.propertyList[ 1 ];\n\t\t\t\tvar innerPropType2 = subNode.propertyList[ 2 ];\n\t\t\t\tvar innerPropFlag = subNode.propertyList[ 3 ];\n\t\t\t\tvar innerPropValue;\n\n\t\t\t\tif ( innerPropName.indexOf( 'Lcl ' ) === 0 ) innerPropName = innerPropName.replace( 'Lcl ', 'Lcl_' );\n\t\t\t\tif ( innerPropType1.indexOf( 'Lcl ' ) === 0 ) innerPropType1 = innerPropType1.replace( 'Lcl ', 'Lcl_' );\n\n\t\t\t\tif ( innerPropType1 === 'Color' || innerPropType1 === 'ColorRGB' || innerPropType1 === 'Vector' || innerPropType1 === 'Vector3D' || innerPropType1.indexOf( 'Lcl_' ) === 0 ) {\n\n\t\t\t\t\tinnerPropValue = [\n\t\t\t\t\t\tsubNode.propertyList[ 4 ],\n\t\t\t\t\t\tsubNode.propertyList[ 5 ],\n\t\t\t\t\t\tsubNode.propertyList[ 6 ]\n\t\t\t\t\t];\n\n\t\t\t\t} else {\n\n\t\t\t\t\tinnerPropValue = subNode.propertyList[ 4 ];\n\n\t\t\t\t}\n\n\t\t\t\t// this will be copied to parent, see above\n\t\t\t\tnode[ innerPropName ] = {\n\n\t\t\t\t\t'type': innerPropType1,\n\t\t\t\t\t'type2': innerPropType2,\n\t\t\t\t\t'flag': innerPropFlag,\n\t\t\t\t\t'value': innerPropValue\n\n\t\t\t\t};\n\n\t\t\t} else if ( node[ subNode.name ] === undefined ) {\n\n\t\t\t\tif ( typeof subNode.id === 'number' ) {\n\n\t\t\t\t\tnode[ subNode.name ] = {};\n\t\t\t\t\tnode[ subNode.name ][ subNode.id ] = subNode;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tnode[ subNode.name ] = subNode;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tif ( subNode.name === 'PoseNode' ) {\n\n\t\t\t\t\tif ( ! Array.isArray( node[ subNode.name ] ) ) {\n\n\t\t\t\t\t\tnode[ subNode.name ] = [ node[ subNode.name ] ];\n\n\t\t\t\t\t}\n\n\t\t\t\t\tnode[ subNode.name ].push( subNode );\n\n\t\t\t\t} else if ( node[ subNode.name ][ subNode.id ] === undefined ) {\n\n\t\t\t\t\tnode[ subNode.name ][ subNode.id ] = subNode;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\tparseProperty: function ( reader ) {\n\n\t\t\tvar type = reader.getString( 1 );\n\n\t\t\tswitch ( type ) {\n\n\t\t\t\tcase 'C':\n\t\t\t\t\treturn reader.getBoolean();\n\n\t\t\t\tcase 'D':\n\t\t\t\t\treturn reader.getFloat64();\n\n\t\t\t\tcase 'F':\n\t\t\t\t\treturn reader.getFloat32();\n\n\t\t\t\tcase 'I':\n\t\t\t\t\treturn reader.getInt32();\n\n\t\t\t\tcase 'L':\n\t\t\t\t\treturn reader.getInt64();\n\n\t\t\t\tcase 'R':\n\t\t\t\t\tvar length = reader.getUint32();\n\t\t\t\t\treturn reader.getArrayBuffer( length );\n\n\t\t\t\tcase 'S':\n\t\t\t\t\tvar length = reader.getUint32();\n\t\t\t\t\treturn reader.getString( length );\n\n\t\t\t\tcase 'Y':\n\t\t\t\t\treturn reader.getInt16();\n\n\t\t\t\tcase 'b':\n\t\t\t\tcase 'c':\n\t\t\t\tcase 'd':\n\t\t\t\tcase 'f':\n\t\t\t\tcase 'i':\n\t\t\t\tcase 'l':\n\n\t\t\t\t\tvar arrayLength = reader.getUint32();\n\t\t\t\t\tvar encoding = reader.getUint32(); // 0: non-compressed, 1: compressed\n\t\t\t\t\tvar compressedLength = reader.getUint32();\n\n\t\t\t\t\tif ( encoding === 0 ) {\n\n\t\t\t\t\t\tswitch ( type ) {\n\n\t\t\t\t\t\t\tcase 'b':\n\t\t\t\t\t\t\tcase 'c':\n\t\t\t\t\t\t\t\treturn reader.getBooleanArray( arrayLength );\n\n\t\t\t\t\t\t\tcase 'd':\n\t\t\t\t\t\t\t\treturn reader.getFloat64Array( arrayLength );\n\n\t\t\t\t\t\t\tcase 'f':\n\t\t\t\t\t\t\t\treturn reader.getFloat32Array( arrayLength );\n\n\t\t\t\t\t\t\tcase 'i':\n\t\t\t\t\t\t\t\treturn reader.getInt32Array( arrayLength );\n\n\t\t\t\t\t\t\tcase 'l':\n\t\t\t\t\t\t\t\treturn reader.getInt64Array( arrayLength );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( typeof _libs_fflate_module_min_js__WEBPACK_IMPORTED_MODULE_1__ === 'undefined' ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.FBXLoader: External library fflate.min.js required.' );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tvar data = _libs_fflate_module_min_js__WEBPACK_IMPORTED_MODULE_1__[\"unzlibSync\"]( new Uint8Array( reader.getArrayBuffer( compressedLength ) ) ); // eslint-disable-line no-undef\n\t\t\t\t\tvar reader2 = new BinaryReader( data.buffer );\n\n\t\t\t\t\tswitch ( type ) {\n\n\t\t\t\t\t\tcase 'b':\n\t\t\t\t\t\tcase 'c':\n\t\t\t\t\t\t\treturn reader2.getBooleanArray( arrayLength );\n\n\t\t\t\t\t\tcase 'd':\n\t\t\t\t\t\t\treturn reader2.getFloat64Array( arrayLength );\n\n\t\t\t\t\t\tcase 'f':\n\t\t\t\t\t\t\treturn reader2.getFloat32Array( arrayLength );\n\n\t\t\t\t\t\tcase 'i':\n\t\t\t\t\t\t\treturn reader2.getInt32Array( arrayLength );\n\n\t\t\t\t\t\tcase 'l':\n\t\t\t\t\t\t\treturn reader2.getInt64Array( arrayLength );\n\n\t\t\t\t\t}\n\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new Error( 'THREE.FBXLoader: Unknown property type ' + type );\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tfunction BinaryReader( buffer, littleEndian ) {\n\n\t\tthis.dv = new DataView( buffer );\n\t\tthis.offset = 0;\n\t\tthis.littleEndian = ( littleEndian !== undefined ) ? littleEndian : true;\n\n\t}\n\n\tBinaryReader.prototype = {\n\n\t\tconstructor: BinaryReader,\n\n\t\tgetOffset: function () {\n\n\t\t\treturn this.offset;\n\n\t\t},\n\n\t\tsize: function () {\n\n\t\t\treturn this.dv.buffer.byteLength;\n\n\t\t},\n\n\t\tskip: function ( length ) {\n\n\t\t\tthis.offset += length;\n\n\t\t},\n\n\t\t// seems like true/false representation depends on exporter.\n\t\t// true: 1 or 'Y'(=0x59), false: 0 or 'T'(=0x54)\n\t\t// then sees LSB.\n\t\tgetBoolean: function () {\n\n\t\t\treturn ( this.getUint8() & 1 ) === 1;\n\n\t\t},\n\n\t\tgetBooleanArray: function ( size ) {\n\n\t\t\tvar a = [];\n\n\t\t\tfor ( var i = 0; i < size; i ++ ) {\n\n\t\t\t\ta.push( this.getBoolean() );\n\n\t\t\t}\n\n\t\t\treturn a;\n\n\t\t},\n\n\t\tgetUint8: function () {\n\n\t\t\tvar value = this.dv.getUint8( this.offset );\n\t\t\tthis.offset += 1;\n\t\t\treturn value;\n\n\t\t},\n\n\t\tgetInt16: function () {\n\n\t\t\tvar value = this.dv.getInt16( this.offset, this.littleEndian );\n\t\t\tthis.offset += 2;\n\t\t\treturn value;\n\n\t\t},\n\n\t\tgetInt32: function () {\n\n\t\t\tvar value = this.dv.getInt32( this.offset, this.littleEndian );\n\t\t\tthis.offset += 4;\n\t\t\treturn value;\n\n\t\t},\n\n\t\tgetInt32Array: function ( size ) {\n\n\t\t\tvar a = [];\n\n\t\t\tfor ( var i = 0; i < size; i ++ ) {\n\n\t\t\t\ta.push( this.getInt32() );\n\n\t\t\t}\n\n\t\t\treturn a;\n\n\t\t},\n\n\t\tgetUint32: function () {\n\n\t\t\tvar value = this.dv.getUint32( this.offset, this.littleEndian );\n\t\t\tthis.offset += 4;\n\t\t\treturn value;\n\n\t\t},\n\n\t\t// JavaScript doesn't support 64-bit integer so calculate this here\n\t\t// 1 << 32 will return 1 so using multiply operation instead here.\n\t\t// There's a possibility that this method returns wrong value if the value\n\t\t// is out of the range between Number.MAX_SAFE_INTEGER and Number.MIN_SAFE_INTEGER.\n\t\t// TODO: safely handle 64-bit integer\n\t\tgetInt64: function () {\n\n\t\t\tvar low, high;\n\n\t\t\tif ( this.littleEndian ) {\n\n\t\t\t\tlow = this.getUint32();\n\t\t\t\thigh = this.getUint32();\n\n\t\t\t} else {\n\n\t\t\t\thigh = this.getUint32();\n\t\t\t\tlow = this.getUint32();\n\n\t\t\t}\n\n\t\t\t// calculate negative value\n\t\t\tif ( high & 0x80000000 ) {\n\n\t\t\t\thigh = ~ high & 0xFFFFFFFF;\n\t\t\t\tlow = ~ low & 0xFFFFFFFF;\n\n\t\t\t\tif ( low === 0xFFFFFFFF ) high = ( high + 1 ) & 0xFFFFFFFF;\n\n\t\t\t\tlow = ( low + 1 ) & 0xFFFFFFFF;\n\n\t\t\t\treturn - ( high * 0x100000000 + low );\n\n\t\t\t}\n\n\t\t\treturn high * 0x100000000 + low;\n\n\t\t},\n\n\t\tgetInt64Array: function ( size ) {\n\n\t\t\tvar a = [];\n\n\t\t\tfor ( var i = 0; i < size; i ++ ) {\n\n\t\t\t\ta.push( this.getInt64() );\n\n\t\t\t}\n\n\t\t\treturn a;\n\n\t\t},\n\n\t\t// Note: see getInt64() comment\n\t\tgetUint64: function () {\n\n\t\t\tvar low, high;\n\n\t\t\tif ( this.littleEndian ) {\n\n\t\t\t\tlow = this.getUint32();\n\t\t\t\thigh = this.getUint32();\n\n\t\t\t} else {\n\n\t\t\t\thigh = this.getUint32();\n\t\t\t\tlow = this.getUint32();\n\n\t\t\t}\n\n\t\t\treturn high * 0x100000000 + low;\n\n\t\t},\n\n\t\tgetFloat32: function () {\n\n\t\t\tvar value = this.dv.getFloat32( this.offset, this.littleEndian );\n\t\t\tthis.offset += 4;\n\t\t\treturn value;\n\n\t\t},\n\n\t\tgetFloat32Array: function ( size ) {\n\n\t\t\tvar a = [];\n\n\t\t\tfor ( var i = 0; i < size; i ++ ) {\n\n\t\t\t\ta.push( this.getFloat32() );\n\n\t\t\t}\n\n\t\t\treturn a;\n\n\t\t},\n\n\t\tgetFloat64: function () {\n\n\t\t\tvar value = this.dv.getFloat64( this.offset, this.littleEndian );\n\t\t\tthis.offset += 8;\n\t\t\treturn value;\n\n\t\t},\n\n\t\tgetFloat64Array: function ( size ) {\n\n\t\t\tvar a = [];\n\n\t\t\tfor ( var i = 0; i < size; i ++ ) {\n\n\t\t\t\ta.push( this.getFloat64() );\n\n\t\t\t}\n\n\t\t\treturn a;\n\n\t\t},\n\n\t\tgetArrayBuffer: function ( size ) {\n\n\t\t\tvar value = this.dv.buffer.slice( this.offset, this.offset + size );\n\t\t\tthis.offset += size;\n\t\t\treturn value;\n\n\t\t},\n\n\t\tgetString: function ( size ) {\n\n\t\t\t// note: safari 9 doesn't support Uint8Array.indexOf; create intermediate array instead\n\t\t\tvar a = [];\n\n\t\t\tfor ( var i = 0; i < size; i ++ ) {\n\n\t\t\t\ta[ i ] = this.getUint8();\n\n\t\t\t}\n\n\t\t\tvar nullByte = a.indexOf( 0 );\n\t\t\tif ( nullByte >= 0 ) a = a.slice( 0, nullByte );\n\n\t\t\treturn _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"LoaderUtils\"].decodeText( new Uint8Array( a ) );\n\n\t\t}\n\n\t};\n\n\t// FBXTree holds a representation of the FBX data, returned by the TextParser ( FBX ASCII format)\n\t// and BinaryParser( FBX Binary format)\n\tfunction FBXTree() {}\n\n\tFBXTree.prototype = {\n\n\t\tconstructor: FBXTree,\n\n\t\tadd: function ( key, val ) {\n\n\t\t\tthis[ key ] = val;\n\n\t\t},\n\n\t};\n\n\t// ************** UTILITY FUNCTIONS **************\n\n\tfunction isFbxFormatBinary( buffer ) {\n\n\t\tvar CORRECT = 'Kaydara FBX Binary  \\0';\n\n\t\treturn buffer.byteLength >= CORRECT.length && CORRECT === convertArrayBufferToString( buffer, 0, CORRECT.length );\n\n\t}\n\n\tfunction isFbxFormatASCII( text ) {\n\n\t\tvar CORRECT = [ 'K', 'a', 'y', 'd', 'a', 'r', 'a', '\\\\', 'F', 'B', 'X', '\\\\', 'B', 'i', 'n', 'a', 'r', 'y', '\\\\', '\\\\' ];\n\n\t\tvar cursor = 0;\n\n\t\tfunction read( offset ) {\n\n\t\t\tvar result = text[ offset - 1 ];\n\t\t\ttext = text.slice( cursor + offset );\n\t\t\tcursor ++;\n\t\t\treturn result;\n\n\t\t}\n\n\t\tfor ( var i = 0; i < CORRECT.length; ++ i ) {\n\n\t\t\tvar num = read( 1 );\n\t\t\tif ( num === CORRECT[ i ] ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\tfunction getFbxVersion( text ) {\n\n\t\tvar versionRegExp = /FBXVersion: (\\d+)/;\n\t\tvar match = text.match( versionRegExp );\n\n\t\tif ( match ) {\n\n\t\t\tvar version = parseInt( match[ 1 ] );\n\t\t\treturn version;\n\n\t\t}\n\n\t\tthrow new Error( 'THREE.FBXLoader: Cannot find the version number for the file given.' );\n\n\t}\n\n\t// Converts FBX ticks into real time seconds.\n\tfunction convertFBXTimeToSeconds( time ) {\n\n\t\treturn time / 46186158000;\n\n\t}\n\n\tvar dataArray = [];\n\n\t// extracts the data from the correct position in the FBX array based on indexing type\n\tfunction getData( polygonVertexIndex, polygonIndex, vertexIndex, infoObject ) {\n\n\t\tvar index;\n\n\t\tswitch ( infoObject.mappingType ) {\n\n\t\t\tcase 'ByPolygonVertex' :\n\t\t\t\tindex = polygonVertexIndex;\n\t\t\t\tbreak;\n\t\t\tcase 'ByPolygon' :\n\t\t\t\tindex = polygonIndex;\n\t\t\t\tbreak;\n\t\t\tcase 'ByVertice' :\n\t\t\t\tindex = vertexIndex;\n\t\t\t\tbreak;\n\t\t\tcase 'AllSame' :\n\t\t\t\tindex = infoObject.indices[ 0 ];\n\t\t\t\tbreak;\n\t\t\tdefault :\n\t\t\t\tconsole.warn( 'THREE.FBXLoader: unknown attribute mapping type ' + infoObject.mappingType );\n\n\t\t}\n\n\t\tif ( infoObject.referenceType === 'IndexToDirect' ) index = infoObject.indices[ index ];\n\n\t\tvar from = index * infoObject.dataSize;\n\t\tvar to = from + infoObject.dataSize;\n\n\t\treturn slice( dataArray, infoObject.buffer, from, to );\n\n\t}\n\n\tvar tempEuler = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Euler\"]();\n\tvar tempVec = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector3\"]();\n\n\t// generate transformation from FBX transform data\n\t// ref: https://help.autodesk.com/view/FBX/2017/ENU/?guid=__files_GUID_10CDD63C_79C1_4F2D_BB28_AD2BE65A02ED_htm\n\t// ref: http://docs.autodesk.com/FBX/2014/ENU/FBX-SDK-Documentation/index.html?url=cpp_ref/_transformations_2main_8cxx-example.html,topicNumber=cpp_ref__transformations_2main_8cxx_example_htmlfc10a1e1-b18d-4e72-9dc0-70d0f1959f5e\n\tfunction generateTransform( transformData ) {\n\n\t\tvar lTranslationM = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Matrix4\"]();\n\t\tvar lPreRotationM = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Matrix4\"]();\n\t\tvar lRotationM = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Matrix4\"]();\n\t\tvar lPostRotationM = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Matrix4\"]();\n\n\t\tvar lScalingM = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Matrix4\"]();\n\t\tvar lScalingPivotM = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Matrix4\"]();\n\t\tvar lScalingOffsetM = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Matrix4\"]();\n\t\tvar lRotationOffsetM = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Matrix4\"]();\n\t\tvar lRotationPivotM = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Matrix4\"]();\n\n\t\tvar lParentGX = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Matrix4\"]();\n\t\tvar lParentLX = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Matrix4\"]();\n\t\tvar lGlobalT = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Matrix4\"]();\n\n\t\tvar inheritType = ( transformData.inheritType ) ? transformData.inheritType : 0;\n\n\t\tif ( transformData.translation ) lTranslationM.setPosition( tempVec.fromArray( transformData.translation ) );\n\n\t\tif ( transformData.preRotation ) {\n\n\t\t\tvar array = transformData.preRotation.map( _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"MathUtils\"].degToRad );\n\t\t\tarray.push( transformData.eulerOrder );\n\t\t\tlPreRotationM.makeRotationFromEuler( tempEuler.fromArray( array ) );\n\n\t\t}\n\n\t\tif ( transformData.rotation ) {\n\n\t\t\tvar array = transformData.rotation.map( _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"MathUtils\"].degToRad );\n\t\t\tarray.push( transformData.eulerOrder );\n\t\t\tlRotationM.makeRotationFromEuler( tempEuler.fromArray( array ) );\n\n\t\t}\n\n\t\tif ( transformData.postRotation ) {\n\n\t\t\tvar array = transformData.postRotation.map( _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"MathUtils\"].degToRad );\n\t\t\tarray.push( transformData.eulerOrder );\n\t\t\tlPostRotationM.makeRotationFromEuler( tempEuler.fromArray( array ) );\n\t\t\tlPostRotationM.invert();\n\n\t\t}\n\n\t\tif ( transformData.scale ) lScalingM.scale( tempVec.fromArray( transformData.scale ) );\n\n\t\t// Pivots and offsets\n\t\tif ( transformData.scalingOffset ) lScalingOffsetM.setPosition( tempVec.fromArray( transformData.scalingOffset ) );\n\t\tif ( transformData.scalingPivot ) lScalingPivotM.setPosition( tempVec.fromArray( transformData.scalingPivot ) );\n\t\tif ( transformData.rotationOffset ) lRotationOffsetM.setPosition( tempVec.fromArray( transformData.rotationOffset ) );\n\t\tif ( transformData.rotationPivot ) lRotationPivotM.setPosition( tempVec.fromArray( transformData.rotationPivot ) );\n\n\t\t// parent transform\n\t\tif ( transformData.parentMatrixWorld ) {\n\n\t\t\tlParentLX.copy( transformData.parentMatrix );\n\t\t\tlParentGX.copy( transformData.parentMatrixWorld );\n\n\t\t}\n\n\t\tvar lLRM = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Matrix4\"]().copy( lPreRotationM ).multiply( lRotationM ).multiply( lPostRotationM );\n\t\t// Global Rotation\n\t\tvar lParentGRM = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Matrix4\"]();\n\t\tlParentGRM.extractRotation( lParentGX );\n\n\t\t// Global Shear*Scaling\n\t\tvar lParentTM = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Matrix4\"]();\n\t\tlParentTM.copyPosition( lParentGX );\n\n\t\tvar lParentGSM = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Matrix4\"]();\n\t\tvar lParentGRSM = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Matrix4\"]().copy( lParentTM ).invert().multiply( lParentGX );\n\t\tlParentGSM.copy( lParentGRM ).invert().multiply( lParentGRSM );\n\t\tvar lLSM = lScalingM;\n\n\t\tvar lGlobalRS = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Matrix4\"]();\n\n\t\tif ( inheritType === 0 ) {\n\n\t\t\tlGlobalRS.copy( lParentGRM ).multiply( lLRM ).multiply( lParentGSM ).multiply( lLSM );\n\n\t\t} else if ( inheritType === 1 ) {\n\n\t\t\tlGlobalRS.copy( lParentGRM ).multiply( lParentGSM ).multiply( lLRM ).multiply( lLSM );\n\n\t\t} else {\n\n\t\t\tvar lParentLSM = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Matrix4\"]().scale( new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector3\"]().setFromMatrixScale( lParentLX ) );\n\t\t\tvar lParentLSM_inv = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Matrix4\"]().copy( lParentLSM ).invert();\n\t\t\tvar lParentGSM_noLocal = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Matrix4\"]().copy( lParentGSM ).multiply( lParentLSM_inv );\n\n\t\t\tlGlobalRS.copy( lParentGRM ).multiply( lLRM ).multiply( lParentGSM_noLocal ).multiply( lLSM );\n\n\t\t}\n\n\t\tvar lRotationPivotM_inv = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Matrix4\"]();\n\t\tlRotationPivotM_inv.copy( lRotationPivotM ).invert();\n\t\tvar lScalingPivotM_inv = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Matrix4\"]();\n\t\tlScalingPivotM_inv.copy( lScalingPivotM ).invert();\n\t\t// Calculate the local transform matrix\n\t\tvar lTransform = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Matrix4\"]();\n\t\tlTransform.copy( lTranslationM ).multiply( lRotationOffsetM ).multiply( lRotationPivotM ).multiply( lPreRotationM ).multiply( lRotationM ).multiply( lPostRotationM ).multiply( lRotationPivotM_inv ).multiply( lScalingOffsetM ).multiply( lScalingPivotM ).multiply( lScalingM ).multiply( lScalingPivotM_inv );\n\n\t\tvar lLocalTWithAllPivotAndOffsetInfo = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Matrix4\"]().copyPosition( lTransform );\n\n\t\tvar lGlobalTranslation = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Matrix4\"]().copy( lParentGX ).multiply( lLocalTWithAllPivotAndOffsetInfo );\n\t\tlGlobalT.copyPosition( lGlobalTranslation );\n\n\t\tlTransform = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Matrix4\"]().copy( lGlobalT ).multiply( lGlobalRS );\n\n\t\t// from global to local\n\t\tlTransform.premultiply( lParentGX.invert() );\n\n\t\treturn lTransform;\n\n\t}\n\n\t// Returns the three.js intrinsic Euler order corresponding to FBX extrinsic Euler order\n\t// ref: http://help.autodesk.com/view/FBX/2017/ENU/?guid=__cpp_ref_class_fbx_euler_html\n\tfunction getEulerOrder( order ) {\n\n\t\torder = order || 0;\n\n\t\tvar enums = [\n\t\t\t'ZYX', // -> XYZ extrinsic\n\t\t\t'YZX', // -> XZY extrinsic\n\t\t\t'XZY', // -> YZX extrinsic\n\t\t\t'ZXY', // -> YXZ extrinsic\n\t\t\t'YXZ', // -> ZXY extrinsic\n\t\t\t'XYZ', // -> ZYX extrinsic\n\t\t\t//'SphericXYZ', // not possible to support\n\t\t];\n\n\t\tif ( order === 6 ) {\n\n\t\t\tconsole.warn( 'THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect.' );\n\t\t\treturn enums[ 0 ];\n\n\t\t}\n\n\t\treturn enums[ order ];\n\n\t}\n\n\t// Parses comma separated list of numbers and returns them an array.\n\t// Used internally by the TextParser\n\tfunction parseNumberArray( value ) {\n\n\t\tvar array = value.split( ',' ).map( function ( val ) {\n\n\t\t\treturn parseFloat( val );\n\n\t\t} );\n\n\t\treturn array;\n\n\t}\n\n\tfunction convertArrayBufferToString( buffer, from, to ) {\n\n\t\tif ( from === undefined ) from = 0;\n\t\tif ( to === undefined ) to = buffer.byteLength;\n\n\t\treturn _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"LoaderUtils\"].decodeText( new Uint8Array( buffer, from, to ) );\n\n\t}\n\n\tfunction append( a, b ) {\n\n\t\tfor ( var i = 0, j = a.length, l = b.length; i < l; i ++, j ++ ) {\n\n\t\t\ta[ j ] = b[ i ];\n\n\t\t}\n\n\t}\n\n\tfunction slice( a, b, from, to ) {\n\n\t\tfor ( var i = from, j = 0; i < to; i ++, j ++ ) {\n\n\t\t\ta[ j ] = b[ i ];\n\n\t\t}\n\n\t\treturn a;\n\n\t}\n\n\t// inject array a2 into array a1 at index\n\tfunction inject( a1, index, a2 ) {\n\n\t\treturn a1.slice( 0, index ).concat( a2 ).concat( a1.slice( index ) );\n\n\t}\n\n\treturn FBXLoader;\n\n} )();\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL3RocmVlL2V4YW1wbGVzL2pzbS9sb2FkZXJzL0ZCWExvYWRlci5qcz84NzEwIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUEyQ3dDO0FBQ2U7QUFDRjs7QUFFckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsRUFBRSw2REFBTTs7QUFFUjs7QUFFQSxxREFBcUQsNkRBQU07O0FBRTNEOztBQUVBOztBQUVBOztBQUVBLHNDQUFzQyxrRUFBVzs7QUFFakQsb0JBQW9CLGlFQUFVO0FBQzlCO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBLEtBQUs7O0FBRUw7O0FBRUE7O0FBRUEsTUFBTTs7QUFFTjs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQSxJQUFJOztBQUVKLEdBQUc7O0FBRUg7O0FBRUE7O0FBRUE7O0FBRUEsSUFBSTs7QUFFSjs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQSwyQkFBMkIsb0VBQWE7O0FBRXhDOztBQUVBOztBQUVBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUEsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE9BQU87O0FBRVA7O0FBRUEsK0JBQStCO0FBQy9COztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE9BQU87O0FBRVA7O0FBRUEsOEJBQThCO0FBQzlCOztBQUVB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RUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUEsR0FBRzs7QUFFSDs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBLE9BQU87O0FBRVAsTUFBTTs7QUFFTixLQUFLOztBQUVMOztBQUVBOztBQUVBLEdBQUc7O0FBRUg7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEscUNBQXFDO0FBQ3JDOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQSxPQUFPOzs7QUFHUDs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSxRQUFROztBQUVSLE9BQU87O0FBRVA7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUEscUJBQXFCLE9BQU87O0FBRTVCO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQSxNQUFNOztBQUVOOztBQUVBOztBQUVBOztBQUVBOztB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Z0NBQWdDO0FBQzFFLHFDQUFxQyxxQ0FBcUM7O0FBRTFFOztBQUVBOztBQUVBLEtBQUs7O0FBRUw7O0FBRUEsS0FBSzs7QUFFTDs7QUFFQSxLQUFLLGdDQUFnQzs7QUFFckM7QUFDQTtBQUNBOztBQUVBOztBQUVBLElBQUk7O0FBRUo7O0FBRUEsR0FBRzs7QUFFSDs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQSxJQUFJOztBQUVKLGVBQWU7QUFDZjs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBLElBQUksT0FBTzs7QUFFWDtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUEsTUFBTTs7QUFFTjtBQUNBOztBQUVBOztBQUVBOztBQUVBLEtBQUs7O0FBRUw7QUFDQTs7QUFFQSxLQUFLOztBQUVMO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBLEdBQUc7O0FBRUg7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQSxXQUFXOztBQUVYLEdBQUc7O0FBRUg7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUEsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBLElBQUk7O0FBRUo7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBLEdBQUc7O0FBRUg7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFF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QkFBNEIsOERBQU87QUFDbkMsZ0NBQWdDLDhEQUFPOztBQUV2Qzs7QUFFQTs7QUFFQSxnQ0FBZ0MsOERBQU87QUFDdkM7QUFDQSwrQkFBK0IsOERBQU87QUFDdEM7QUFDQTtBQUNBLHVCQUF1Qiw4REFBTztBQUM5Qjs7QUFFQSw2Q0FBNkMsOERBQU87O0FBRXBELCtCQUErQiw4REFBTztBQUN0Qzs7QUFFQSxtQkFBbUIsOERBQU87O0FBRTFCO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQSxHQUFHOztBQUVIOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUEsU0FBUyxrRUFBVzs7QUFFcEI7O0FBRUE7O0FBRUEsOENBQThDLE9BQU87O0FBRXJEOztBQUVBOztBQUVBOztBQUVBOztBQUVBLDRCQUE0QixRQUFROztBQUVwQzs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBLENBQUM7O0FBRW9CIiwiZmlsZSI6Ii4vbm9kZV9tb2R1bGVzL3RocmVlL2V4YW1wbGVzL2pzbS9sb2FkZXJzL0ZCWExvYWRlci5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG5cdEFtYmllbnRMaWdodCxcblx0QW5pbWF0aW9uQ2xpcCxcblx0Qm9uZSxcblx0QnVmZmVyQXR0cmlidXRlLFxuXHRCdWZmZXJHZW9tZXRyeSxcblx0Q2xhbXBUb0VkZ2VXcmFwcGluZyxcblx0Q29sb3IsXG5cdERpcmVjdGlvbmFsTGlnaHQsXG5cdEVxdWlyZWN0YW5ndWxhclJlZmxlY3Rpb25NYXBwaW5nLFxuXHRFdWxlcixcblx0RmlsZUxvYWRlcixcblx0RmxvYXQzMkJ1ZmZlckF0dHJpYnV0ZSxcblx0R3JvdXAsXG5cdExpbmUsXG5cdExpbmVCYXNpY01hdGVyaWFsLFxuXHRMb2FkZXIsXG5cdExvYWRlclV0aWxzLFxuXHRNYXRoVXRpbHMsXG5cdE1hdHJpeDMsXG5cdE1hdHJpeDQsXG5cdE1lc2gsXG5cdE1lc2hMYW1iZXJ0TWF0ZXJpYWwsXG5cdE1lc2hQaG9uZ01hdGVyaWFsLFxuXHROdW1iZXJLZXlmcmFtZVRyYWNrLFxuXHRPYmplY3QzRCxcblx0T3J0aG9ncmFwaGljQ2FtZXJhLFxuXHRQZXJzcGVjdGl2ZUNhbWVyYSxcblx0UG9pbnRMaWdodCxcblx0UHJvcGVydHlCaW5kaW5nLFxuXHRRdWF0ZXJuaW9uLFxuXHRRdWF0ZXJuaW9uS2V5ZnJhbWVUcmFjayxcblx0UmVwZWF0V3JhcHBpbmcsXG5cdFNrZWxldG9uLFxuXHRTa2lubmVkTWVzaCxcblx0U3BvdExpZ2h0LFxuXHRUZXh0dXJlLFxuXHRUZXh0dXJlTG9hZGVyLFxuXHRVaW50MTZCdWZmZXJBdHRyaWJ1dGUsXG5cdFZlY3RvcjMsXG5cdFZlY3RvcjQsXG5cdFZlY3RvcktleWZyYW1lVHJhY2ssXG5cdHNSR0JFbmNvZGluZ1xufSBmcm9tICcuLi8uLi8uLi9idWlsZC90aHJlZS5tb2R1bGUuanMnO1xuaW1wb3J0ICogYXMgZmZsYXRlIGZyb20gJy4uL2xpYnMvZmZsYXRlLm1vZHVsZS5taW4uanMnO1xuaW1wb3J0IHsgTlVSQlNDdXJ2ZSB9IGZyb20gJy4uL2N1cnZlcy9OVVJCU0N1cnZlLmpzJztcblxuLyoqXG4gKiBMb2FkZXIgbG9hZHMgRkJYIGZpbGUgYW5kIGdlbmVyYXRlcyBHcm91cCByZXByZXNlbnRpbmcgRkJYIHNjZW5lLlxuICogUmVxdWlyZXMgRkJYIGZpbGUgdG8gYmUgPj0gNy4wIGFuZCBpbiBBU0NJSSBvciA+PSA2NDAwIGluIEJpbmFyeSBmb3JtYXRcbiAqIFZlcnNpb25zIGxvd2VyIHRoYW4gdGhpcyBtYXkgbG9hZCBidXQgd2lsbCBwcm9iYWJseSBoYXZlIGVycm9yc1xuICpcbiAqIE5lZWRzIFN1cHBvcnQ6XG4gKiAgTW9ycGggbm9ybWFscyAvIGJsZW5kIHNoYXBlIG5vcm1hbHNcbiAqXG4gKiBGQlggZm9ybWF0IHJlZmVyZW5jZXM6XG4gKiBcdGh0dHBzOi8vd2lraS5ibGVuZGVyLm9yZy9pbmRleC5waHAvVXNlcjpNb250MjkvRm91bmRhdGlvbi9GQlhfRmlsZV9TdHJ1Y3R1cmVcbiAqIFx0aHR0cDovL2hlbHAuYXV0b2Rlc2suY29tL3ZpZXcvRkJYLzIwMTcvRU5VLz9ndWlkPV9fY3BwX3JlZl9pbmRleF9odG1sIChDKysgU0RLIHJlZmVyZW5jZSlcbiAqXG4gKiBcdEJpbmFyeSBmb3JtYXQgc3BlY2lmaWNhdGlvbjpcbiAqXHRcdGh0dHBzOi8vY29kZS5ibGVuZGVyLm9yZy8yMDEzLzA4L2ZieC1iaW5hcnktZmlsZS1mb3JtYXQtc3BlY2lmaWNhdGlvbi9cbiAqL1xuXG5cbnZhciBGQlhMb2FkZXIgPSAoIGZ1bmN0aW9uICgpIHtcblxuXHR2YXIgZmJ4VHJlZTtcblx0dmFyIGNvbm5lY3Rpb25zO1xuXHR2YXIgc2NlbmVHcmFwaDtcblxuXHRmdW5jdGlvbiBGQlhMb2FkZXIoIG1hbmFnZXIgKSB7XG5cblx0XHRMb2FkZXIuY2FsbCggdGhpcywgbWFuYWdlciApO1xuXG5cdH1cblxuXHRGQlhMb2FkZXIucHJvdG90eXBlID0gT2JqZWN0LmFzc2lnbiggT2JqZWN0LmNyZWF0ZSggTG9hZGVyLnByb3RvdHlwZSApLCB7XG5cblx0XHRjb25zdHJ1Y3RvcjogRkJYTG9hZGVyLFxuXG5cdFx0bG9hZDogZnVuY3Rpb24gKCB1cmwsIG9uTG9hZCwgb25Qcm9ncmVzcywgb25FcnJvciApIHtcblxuXHRcdFx0dmFyIHNjb3BlID0gdGhpcztcblxuXHRcdFx0dmFyIHBhdGggPSAoIHNjb3BlLnBhdGggPT09ICcnICkgPyBMb2FkZXJVdGlscy5leHRyYWN0VXJsQmFzZSggdXJsICkgOiBzY29wZS5wYXRoO1xuXG5cdFx0XHR2YXIgbG9hZGVyID0gbmV3IEZpbGVMb2FkZXIoIHRoaXMubWFuYWdlciApO1xuXHRcdFx0bG9hZGVyLnNldFBhdGgoIHNjb3BlLnBhdGggKTtcblx0XHRcdGxvYWRlci5zZXRSZXNwb25zZVR5cGUoICdhcnJheWJ1ZmZlcicgKTtcblx0XHRcdGxvYWRlci5zZXRSZXF1ZXN0SGVhZGVyKCBzY29wZS5yZXF1ZXN0SGVhZGVyICk7XG5cdFx0XHRsb2FkZXIuc2V0V2l0aENyZWRlbnRpYWxzKCBzY29wZS53aXRoQ3JlZGVudGlhbHMgKTtcblxuXHRcdFx0bG9hZGVyLmxvYWQoIHVybCwgZnVuY3Rpb24gKCBidWZmZXIgKSB7XG5cblx0XHRcdFx0dHJ5IHtcblxuXHRcdFx0XHRcdG9uTG9hZCggc2NvcGUucGFyc2UoIGJ1ZmZlciwgcGF0aCApICk7XG5cblx0XHRcdFx0fSBjYXRjaCAoIGUgKSB7XG5cblx0XHRcdFx0XHRpZiAoIG9uRXJyb3IgKSB7XG5cblx0XHRcdFx0XHRcdG9uRXJyb3IoIGUgKTtcblxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoIGUgKTtcblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdHNjb3BlLm1hbmFnZXIuaXRlbUVycm9yKCB1cmwgKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdH0sIG9uUHJvZ3Jlc3MsIG9uRXJyb3IgKTtcblxuXHRcdH0sXG5cblx0XHRwYXJzZTogZnVuY3Rpb24gKCBGQlhCdWZmZXIsIHBhdGggKSB7XG5cblx0XHRcdGlmICggaXNGYnhGb3JtYXRCaW5hcnkoIEZCWEJ1ZmZlciApICkge1xuXG5cdFx0XHRcdGZieFRyZWUgPSBuZXcgQmluYXJ5UGFyc2VyKCkucGFyc2UoIEZCWEJ1ZmZlciApO1xuXG5cdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdHZhciBGQlhUZXh0ID0gY29udmVydEFycmF5QnVmZmVyVG9TdHJpbmcoIEZCWEJ1ZmZlciApO1xuXG5cdFx0XHRcdGlmICggISBpc0ZieEZvcm1hdEFTQ0lJKCBGQlhUZXh0ICkgKSB7XG5cblx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoICdUSFJFRS5GQlhMb2FkZXI6IFVua25vd24gZm9ybWF0LicgKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKCBnZXRGYnhWZXJzaW9uKCBGQlhUZXh0ICkgPCA3MDAwICkge1xuXG5cdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKCAnVEhSRUUuRkJYTG9hZGVyOiBGQlggdmVyc2lvbiBub3Qgc3VwcG9ydGVkLCBGaWxlVmVyc2lvbjogJyArIGdldEZieFZlcnNpb24oIEZCWFRleHQgKSApO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRmYnhUcmVlID0gbmV3IFRleHRQYXJzZXIoKS5wYXJzZSggRkJYVGV4dCApO1xuXG5cdFx0XHR9XG5cblx0XHRcdC8vIGNvbnNvbGUubG9nKCBmYnhUcmVlICk7XG5cblx0XHRcdHZhciB0ZXh0dXJlTG9hZGVyID0gbmV3IFRleHR1cmVMb2FkZXIoIHRoaXMubWFuYWdlciApLnNldFBhdGgoIHRoaXMucmVzb3VyY2VQYXRoIHx8IHBhdGggKS5zZXRDcm9zc09yaWdpbiggdGhpcy5jcm9zc09yaWdpbiApO1xuXG5cdFx0XHRyZXR1cm4gbmV3IEZCWFRyZWVQYXJzZXIoIHRleHR1cmVMb2FkZXIsIHRoaXMubWFuYWdlciApLnBhcnNlKCBmYnhUcmVlICk7XG5cblx0XHR9XG5cblx0fSApO1xuXG5cdC8vIFBhcnNlIHRoZSBGQlhUcmVlIG9iamVjdCByZXR1cm5lZCBieSB0aGUgQmluYXJ5UGFyc2VyIG9yIFRleHRQYXJzZXIgYW5kIHJldHVybiBhIEdyb3VwXG5cdGZ1bmN0aW9uIEZCWFRyZWVQYXJzZXIoIHRleHR1cmVMb2FkZXIsIG1hbmFnZXIgKSB7XG5cblx0XHR0aGlzLnRleHR1cmVMb2FkZXIgPSB0ZXh0dXJlTG9hZGVyO1xuXHRcdHRoaXMubWFuYWdlciA9IG1hbmFnZXI7XG5cblx0fVxuXG5cdEZCWFRyZWVQYXJzZXIucHJvdG90eXBlID0ge1xuXG5cdFx0Y29uc3RydWN0b3I6IEZCWFRyZWVQYXJzZXIsXG5cblx0XHRwYXJzZTogZnVuY3Rpb24gKCkge1xuXG5cdFx0XHRjb25uZWN0aW9ucyA9IHRoaXMucGFyc2VDb25uZWN0aW9ucygpO1xuXG5cdFx0XHR2YXIgaW1hZ2VzID0gdGhpcy5wYXJzZUltYWdlcygpO1xuXHRcdFx0dmFyIHRleHR1cmVzID0gdGhpcy5wYXJzZVRleHR1cmVzKCBpbWFnZXMgKTtcblx0XHRcdHZhciBtYXRlcmlhbHMgPSB0aGlzLnBhcnNlTWF0ZXJpYWxzKCB0ZXh0dXJlcyApO1xuXHRcdFx0dmFyIGRlZm9ybWVycyA9IHRoaXMucGFyc2VEZWZvcm1lcnMoKTtcblx0XHRcdHZhciBnZW9tZXRyeU1hcCA9IG5ldyBHZW9tZXRyeVBhcnNlcigpLnBhcnNlKCBkZWZvcm1lcnMgKTtcblxuXHRcdFx0dGhpcy5wYXJzZVNjZW5lKCBkZWZvcm1lcnMsIGdlb21ldHJ5TWFwLCBtYXRlcmlhbHMgKTtcblxuXHRcdFx0cmV0dXJuIHNjZW5lR3JhcGg7XG5cblx0XHR9LFxuXG5cdFx0Ly8gUGFyc2VzIEZCWFRyZWUuQ29ubmVjdGlvbnMgd2hpY2ggaG9sZHMgcGFyZW50LWNoaWxkIGNvbm5lY3Rpb25zIGJldHdlZW4gb2JqZWN0cyAoZS5nLiBtYXRlcmlhbCAtPiB0ZXh0dXJlLCBtb2RlbC0+Z2VvbWV0cnkgKVxuXHRcdC8vIGFuZCBkZXRhaWxzIHRoZSBjb25uZWN0aW9uIHR5cGVcblx0XHRwYXJzZUNvbm5lY3Rpb25zOiBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdHZhciBjb25uZWN0aW9uTWFwID0gbmV3IE1hcCgpO1xuXG5cdFx0XHRpZiAoICdDb25uZWN0aW9ucycgaW4gZmJ4VHJlZSApIHtcblxuXHRcdFx0XHR2YXIgcmF3Q29ubmVjdGlvbnMgPSBmYnhUcmVlLkNvbm5lY3Rpb25zLmNvbm5lY3Rpb25zO1xuXG5cdFx0XHRcdHJhd0Nvbm5lY3Rpb25zLmZvckVhY2goIGZ1bmN0aW9uICggcmF3Q29ubmVjdGlvbiApIHtcblxuXHRcdFx0XHRcdHZhciBmcm9tSUQgPSByYXdDb25uZWN0aW9uWyAwIF07XG5cdFx0XHRcdFx0dmFyIHRvSUQgPSByYXdDb25uZWN0aW9uWyAxIF07XG5cdFx0XHRcdFx0dmFyIHJlbGF0aW9uc2hpcCA9IHJhd0Nvbm5lY3Rpb25bIDIgXTtcblxuXHRcdFx0XHRcdGlmICggISBjb25uZWN0aW9uTWFwLmhhcyggZnJvbUlEICkgKSB7XG5cblx0XHRcdFx0XHRcdGNvbm5lY3Rpb25NYXAuc2V0KCBmcm9tSUQsIHtcblx0XHRcdFx0XHRcdFx0cGFyZW50czogW10sXG5cdFx0XHRcdFx0XHRcdGNoaWxkcmVuOiBbXVxuXHRcdFx0XHRcdFx0fSApO1xuXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0dmFyIHBhcmVudFJlbGF0aW9uc2hpcCA9IHsgSUQ6IHRvSUQsIHJlbGF0aW9uc2hpcDogcmVsYXRpb25zaGlwIH07XG5cdFx0XHRcdFx0Y29ubmVjdGlvbk1hcC5nZXQoIGZyb21JRCApLnBhcmVudHMucHVzaCggcGFyZW50UmVsYXRpb25zaGlwICk7XG5cblx0XHRcdFx0XHRpZiAoICEgY29ubmVjdGlvbk1hcC5oYXMoIHRvSUQgKSApIHtcblxuXHRcdFx0XHRcdFx0Y29ubmVjdGlvbk1hcC5zZXQoIHRvSUQsIHtcblx0XHRcdFx0XHRcdFx0cGFyZW50czogW10sXG5cdFx0XHRcdFx0XHRcdGNoaWxkcmVuOiBbXVxuXHRcdFx0XHRcdFx0fSApO1xuXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0dmFyIGNoaWxkUmVsYXRpb25zaGlwID0geyBJRDogZnJvbUlELCByZWxhdGlvbnNoaXA6IHJlbGF0aW9uc2hpcCB9O1xuXHRcdFx0XHRcdGNvbm5lY3Rpb25NYXAuZ2V0KCB0b0lEICkuY2hpbGRyZW4ucHVzaCggY2hpbGRSZWxhdGlvbnNoaXAgKTtcblxuXHRcdFx0XHR9ICk7XG5cblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGNvbm5lY3Rpb25NYXA7XG5cblx0XHR9LFxuXG5cdFx0Ly8gUGFyc2UgRkJYVHJlZS5PYmplY3RzLlZpZGVvIGZvciBlbWJlZGRlZCBpbWFnZSBkYXRhXG5cdFx0Ly8gVGhlc2UgaW1hZ2VzIGFyZSBjb25uZWN0ZWQgdG8gdGV4dHVyZXMgaW4gRkJYVHJlZS5PYmplY3RzLlRleHR1cmVzXG5cdFx0Ly8gdmlhIEZCWFRyZWUuQ29ubmVjdGlvbnMuXG5cdFx0cGFyc2VJbWFnZXM6IGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0dmFyIGltYWdlcyA9IHt9O1xuXHRcdFx0dmFyIGJsb2JzID0ge307XG5cblx0XHRcdGlmICggJ1ZpZGVvJyBpbiBmYnhUcmVlLk9iamVjdHMgKSB7XG5cblx0XHRcdFx0dmFyIHZpZGVvTm9kZXMgPSBmYnhUcmVlLk9iamVjdHMuVmlkZW87XG5cblx0XHRcdFx0Zm9yICggdmFyIG5vZGVJRCBpbiB2aWRlb05vZGVzICkge1xuXG5cdFx0XHRcdFx0dmFyIHZpZGVvTm9kZSA9IHZpZGVvTm9kZXNbIG5vZGVJRCBdO1xuXG5cdFx0XHRcdFx0dmFyIGlkID0gcGFyc2VJbnQoIG5vZGVJRCApO1xuXG5cdFx0XHRcdFx0aW1hZ2VzWyBpZCBdID0gdmlkZW9Ob2RlLlJlbGF0aXZlRmlsZW5hbWUgfHwgdmlkZW9Ob2RlLkZpbGVuYW1lO1xuXG5cdFx0XHRcdFx0Ly8gcmF3IGltYWdlIGRhdGEgaXMgaW4gdmlkZW9Ob2RlLkNvbnRlbnRcblx0XHRcdFx0XHRpZiAoICdDb250ZW50JyBpbiB2aWRlb05vZGUgKSB7XG5cblx0XHRcdFx0XHRcdHZhciBhcnJheUJ1ZmZlckNvbnRlbnQgPSAoIHZpZGVvTm9kZS5Db250ZW50IGluc3RhbmNlb2YgQXJyYXlCdWZmZXIgKSAmJiAoIHZpZGVvTm9kZS5Db250ZW50LmJ5dGVMZW5ndGggPiAwICk7XG5cdFx0XHRcdFx0XHR2YXIgYmFzZTY0Q29udGVudCA9ICggdHlwZW9mIHZpZGVvTm9kZS5Db250ZW50ID09PSAnc3RyaW5nJyApICYmICggdmlkZW9Ob2RlLkNvbnRlbnQgIT09ICcnICk7XG5cblx0XHRcdFx0XHRcdGlmICggYXJyYXlCdWZmZXJDb250ZW50IHx8IGJhc2U2NENvbnRlbnQgKSB7XG5cblx0XHRcdFx0XHRcdFx0dmFyIGltYWdlID0gdGhpcy5wYXJzZUltYWdlKCB2aWRlb05vZGVzWyBub2RlSUQgXSApO1xuXG5cdFx0XHRcdFx0XHRcdGJsb2JzWyB2aWRlb05vZGUuUmVsYXRpdmVGaWxlbmFtZSB8fCB2aWRlb05vZGUuRmlsZW5hbWUgXSA9IGltYWdlO1xuXG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9XG5cblx0XHRcdGZvciAoIHZhciBpZCBpbiBpbWFnZXMgKSB7XG5cblx0XHRcdFx0dmFyIGZpbGVuYW1lID0gaW1hZ2VzWyBpZCBdO1xuXG5cdFx0XHRcdGlmICggYmxvYnNbIGZpbGVuYW1lIF0gIT09IHVuZGVmaW5lZCApIGltYWdlc1sgaWQgXSA9IGJsb2JzWyBmaWxlbmFtZSBdO1xuXHRcdFx0XHRlbHNlIGltYWdlc1sgaWQgXSA9IGltYWdlc1sgaWQgXS5zcGxpdCggJ1xcXFwnICkucG9wKCk7XG5cblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGltYWdlcztcblxuXHRcdH0sXG5cblx0XHQvLyBQYXJzZSBlbWJlZGRlZCBpbWFnZSBkYXRhIGluIEZCWFRyZWUuVmlkZW8uQ29udGVudFxuXHRcdHBhcnNlSW1hZ2U6IGZ1bmN0aW9uICggdmlkZW9Ob2RlICkge1xuXG5cdFx0XHR2YXIgY29udGVudCA9IHZpZGVvTm9kZS5Db250ZW50O1xuXHRcdFx0dmFyIGZpbGVOYW1lID0gdmlkZW9Ob2RlLlJlbGF0aXZlRmlsZW5hbWUgfHwgdmlkZW9Ob2RlLkZpbGVuYW1lO1xuXHRcdFx0dmFyIGV4dGVuc2lvbiA9IGZpbGVOYW1lLnNsaWNlKCBmaWxlTmFtZS5sYXN0SW5kZXhPZiggJy4nICkgKyAxICkudG9Mb3dlckNhc2UoKTtcblxuXHRcdFx0dmFyIHR5cGU7XG5cblx0XHRcdHN3aXRjaCAoIGV4dGVuc2lvbiApIHtcblxuXHRcdFx0XHRjYXNlICdibXAnOlxuXG5cdFx0XHRcdFx0dHlwZSA9ICdpbWFnZS9ibXAnO1xuXHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdGNhc2UgJ2pwZyc6XG5cdFx0XHRcdGNhc2UgJ2pwZWcnOlxuXG5cdFx0XHRcdFx0dHlwZSA9ICdpbWFnZS9qcGVnJztcblx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRjYXNlICdwbmcnOlxuXG5cdFx0XHRcdFx0dHlwZSA9ICdpbWFnZS9wbmcnO1xuXHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdGNhc2UgJ3RpZic6XG5cblx0XHRcdFx0XHR0eXBlID0gJ2ltYWdlL3RpZmYnO1xuXHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdGNhc2UgJ3RnYSc6XG5cblx0XHRcdFx0XHRpZiAoIHRoaXMubWFuYWdlci5nZXRIYW5kbGVyKCAnLnRnYScgKSA9PT0gbnVsbCApIHtcblxuXHRcdFx0XHRcdFx0Y29uc29sZS53YXJuKCAnRkJYTG9hZGVyOiBUR0EgbG9hZGVyIG5vdCBmb3VuZCwgc2tpcHBpbmcgJywgZmlsZU5hbWUgKTtcblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdHR5cGUgPSAnaW1hZ2UvdGdhJztcblx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRkZWZhdWx0OlxuXG5cdFx0XHRcdFx0Y29uc29sZS53YXJuKCAnRkJYTG9hZGVyOiBJbWFnZSB0eXBlIFwiJyArIGV4dGVuc2lvbiArICdcIiBpcyBub3Qgc3VwcG9ydGVkLicgKTtcblx0XHRcdFx0XHRyZXR1cm47XG5cblx0XHRcdH1cblxuXHRcdFx0aWYgKCB0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycgKSB7IC8vIEFTQ0lJIGZvcm1hdFxuXG5cdFx0XHRcdHJldHVybiAnZGF0YTonICsgdHlwZSArICc7YmFzZTY0LCcgKyBjb250ZW50O1xuXG5cdFx0XHR9IGVsc2UgeyAvLyBCaW5hcnkgRm9ybWF0XG5cblx0XHRcdFx0dmFyIGFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoIGNvbnRlbnQgKTtcblx0XHRcdFx0cmV0dXJuIHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKCBuZXcgQmxvYiggWyBhcnJheSBdLCB7IHR5cGU6IHR5cGUgfSApICk7XG5cblx0XHRcdH1cblxuXHRcdH0sXG5cblx0XHQvLyBQYXJzZSBub2RlcyBpbiBGQlhUcmVlLk9iamVjdHMuVGV4dHVyZVxuXHRcdC8vIFRoZXNlIGNvbnRhaW4gZGV0YWlscyBzdWNoIGFzIFVWIHNjYWxpbmcsIGNyb3BwaW5nLCByb3RhdGlvbiBldGMgYW5kIGFyZSBjb25uZWN0ZWRcblx0XHQvLyB0byBpbWFnZXMgaW4gRkJYVHJlZS5PYmplY3RzLlZpZGVvXG5cdFx0cGFyc2VUZXh0dXJlczogZnVuY3Rpb24gKCBpbWFnZXMgKSB7XG5cblx0XHRcdHZhciB0ZXh0dXJlTWFwID0gbmV3IE1hcCgpO1xuXG5cdFx0XHRpZiAoICdUZXh0dXJlJyBpbiBmYnhUcmVlLk9iamVjdHMgKSB7XG5cblx0XHRcdFx0dmFyIHRleHR1cmVOb2RlcyA9IGZieFRyZWUuT2JqZWN0cy5UZXh0dXJlO1xuXHRcdFx0XHRmb3IgKCB2YXIgbm9kZUlEIGluIHRleHR1cmVOb2RlcyApIHtcblxuXHRcdFx0XHRcdHZhciB0ZXh0dXJlID0gdGhpcy5wYXJzZVRleHR1cmUoIHRleHR1cmVOb2Rlc1sgbm9kZUlEIF0sIGltYWdlcyApO1xuXHRcdFx0XHRcdHRleHR1cmVNYXAuc2V0KCBwYXJzZUludCggbm9kZUlEICksIHRleHR1cmUgKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIHRleHR1cmVNYXA7XG5cblx0XHR9LFxuXG5cdFx0Ly8gUGFyc2UgaW5kaXZpZHVhbCBub2RlIGluIEZCWFRyZWUuT2JqZWN0cy5UZXh0dXJlXG5cdFx0cGFyc2VUZXh0dXJlOiBmdW5jdGlvbiAoIHRleHR1cmVOb2RlLCBpbWFnZXMgKSB7XG5cblx0XHRcdHZhciB0ZXh0dXJlID0gdGhpcy5sb2FkVGV4dHVyZSggdGV4dHVyZU5vZGUsIGltYWdlcyApO1xuXG5cdFx0XHR0ZXh0dXJlLklEID0gdGV4dHVyZU5vZGUuaWQ7XG5cblx0XHRcdHRleHR1cmUubmFtZSA9IHRleHR1cmVOb2RlLmF0dHJOYW1lO1xuXG5cdFx0XHR2YXIgd3JhcE1vZGVVID0gdGV4dHVyZU5vZGUuV3JhcE1vZGVVO1xuXHRcdFx0dmFyIHdyYXBNb2RlViA9IHRleHR1cmVOb2RlLldyYXBNb2RlVjtcblxuXHRcdFx0dmFyIHZhbHVlVSA9IHdyYXBNb2RlVSAhPT0gdW5kZWZpbmVkID8gd3JhcE1vZGVVLnZhbHVlIDogMDtcblx0XHRcdHZhciB2YWx1ZVYgPSB3cmFwTW9kZVYgIT09IHVuZGVmaW5lZCA/IHdyYXBNb2RlVi52YWx1ZSA6IDA7XG5cblx0XHRcdC8vIGh0dHA6Ly9kb3dubG9hZC5hdXRvZGVzay5jb20vdXMvZmJ4L1NES2RvY3MvRkJYX1NES19IZWxwL2ZpbGVzL2ZieHNka3JlZi9jbGFzc19rX2ZieF90ZXh0dXJlLmh0bWwjODg5NjQwZTYzZTJlNjgxMjU5ZWE4MTA2MWI4NTE0M2Fcblx0XHRcdC8vIDA6IHJlcGVhdChkZWZhdWx0KSwgMTogY2xhbXBcblxuXHRcdFx0dGV4dHVyZS53cmFwUyA9IHZhbHVlVSA9PT0gMCA/IFJlcGVhdFdyYXBwaW5nIDogQ2xhbXBUb0VkZ2VXcmFwcGluZztcblx0XHRcdHRleHR1cmUud3JhcFQgPSB2YWx1ZVYgPT09IDAgPyBSZXBlYXRXcmFwcGluZyA6IENsYW1wVG9FZGdlV3JhcHBpbmc7XG5cblx0XHRcdGlmICggJ1NjYWxpbmcnIGluIHRleHR1cmVOb2RlICkge1xuXG5cdFx0XHRcdHZhciB2YWx1ZXMgPSB0ZXh0dXJlTm9kZS5TY2FsaW5nLnZhbHVlO1xuXG5cdFx0XHRcdHRleHR1cmUucmVwZWF0LnggPSB2YWx1ZXNbIDAgXTtcblx0XHRcdFx0dGV4dHVyZS5yZXBlYXQueSA9IHZhbHVlc1sgMSBdO1xuXG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiB0ZXh0dXJlO1xuXG5cdFx0fSxcblxuXHRcdC8vIGxvYWQgYSB0ZXh0dXJlIHNwZWNpZmllZCBhcyBhIGJsb2Igb3IgZGF0YSBVUkksIG9yIHZpYSBhbiBleHRlcm5hbCBVUkwgdXNpbmcgVGV4dHVyZUxvYWRlclxuXHRcdGxvYWRUZXh0dXJlOiBmdW5jdGlvbiAoIHRleHR1cmVOb2RlLCBpbWFnZXMgKSB7XG5cblx0XHRcdHZhciBmaWxlTmFtZTtcblxuXHRcdFx0dmFyIGN1cnJlbnRQYXRoID0gdGhpcy50ZXh0dXJlTG9hZGVyLnBhdGg7XG5cblx0XHRcdHZhciBjaGlsZHJlbiA9IGNvbm5lY3Rpb25zLmdldCggdGV4dHVyZU5vZGUuaWQgKS5jaGlsZHJlbjtcblxuXHRcdFx0aWYgKCBjaGlsZHJlbiAhPT0gdW5kZWZpbmVkICYmIGNoaWxkcmVuLmxlbmd0aCA+IDAgJiYgaW1hZ2VzWyBjaGlsZHJlblsgMCBdLklEIF0gIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0XHRmaWxlTmFtZSA9IGltYWdlc1sgY2hpbGRyZW5bIDAgXS5JRCBdO1xuXG5cdFx0XHRcdGlmICggZmlsZU5hbWUuaW5kZXhPZiggJ2Jsb2I6JyApID09PSAwIHx8IGZpbGVOYW1lLmluZGV4T2YoICdkYXRhOicgKSA9PT0gMCApIHtcblxuXHRcdFx0XHRcdHRoaXMudGV4dHVyZUxvYWRlci5zZXRQYXRoKCB1bmRlZmluZWQgKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdH1cblxuXHRcdFx0dmFyIHRleHR1cmU7XG5cblx0XHRcdHZhciBleHRlbnNpb24gPSB0ZXh0dXJlTm9kZS5GaWxlTmFtZS5zbGljZSggLSAzICkudG9Mb3dlckNhc2UoKTtcblxuXHRcdFx0aWYgKCBleHRlbnNpb24gPT09ICd0Z2EnICkge1xuXG5cdFx0XHRcdHZhciBsb2FkZXIgPSB0aGlzLm1hbmFnZXIuZ2V0SGFuZGxlciggJy50Z2EnICk7XG5cblx0XHRcdFx0aWYgKCBsb2FkZXIgPT09IG51bGwgKSB7XG5cblx0XHRcdFx0XHRjb25zb2xlLndhcm4oICdGQlhMb2FkZXI6IFRHQSBsb2FkZXIgbm90IGZvdW5kLCBjcmVhdGluZyBwbGFjZWhvbGRlciB0ZXh0dXJlIGZvcicsIHRleHR1cmVOb2RlLlJlbGF0aXZlRmlsZW5hbWUgKTtcblx0XHRcdFx0XHR0ZXh0dXJlID0gbmV3IFRleHR1cmUoKTtcblxuXHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0dGV4dHVyZSA9IGxvYWRlci5sb2FkKCBmaWxlTmFtZSApO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fSBlbHNlIGlmICggZXh0ZW5zaW9uID09PSAncHNkJyApIHtcblxuXHRcdFx0XHRjb25zb2xlLndhcm4oICdGQlhMb2FkZXI6IFBTRCB0ZXh0dXJlcyBhcmUgbm90IHN1cHBvcnRlZCwgY3JlYXRpbmcgcGxhY2Vob2xkZXIgdGV4dHVyZSBmb3InLCB0ZXh0dXJlTm9kZS5SZWxhdGl2ZUZpbGVuYW1lICk7XG5cdFx0XHRcdHRleHR1cmUgPSBuZXcgVGV4dHVyZSgpO1xuXG5cdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdHRleHR1cmUgPSB0aGlzLnRleHR1cmVMb2FkZXIubG9hZCggZmlsZU5hbWUgKTtcblxuXHRcdFx0fVxuXG5cdFx0XHR0aGlzLnRleHR1cmVMb2FkZXIuc2V0UGF0aCggY3VycmVudFBhdGggKTtcblxuXHRcdFx0cmV0dXJuIHRleHR1cmU7XG5cblx0XHR9LFxuXG5cdFx0Ly8gUGFyc2Ugbm9kZXMgaW4gRkJYVHJlZS5PYmplY3RzLk1hdGVyaWFsXG5cdFx0cGFyc2VNYXRlcmlhbHM6IGZ1bmN0aW9uICggdGV4dHVyZU1hcCApIHtcblxuXHRcdFx0dmFyIG1hdGVyaWFsTWFwID0gbmV3IE1hcCgpO1xuXG5cdFx0XHRpZiAoICdNYXRlcmlhbCcgaW4gZmJ4VHJlZS5PYmplY3RzICkge1xuXG5cdFx0XHRcdHZhciBtYXRlcmlhbE5vZGVzID0gZmJ4VHJlZS5PYmplY3RzLk1hdGVyaWFsO1xuXG5cdFx0XHRcdGZvciAoIHZhciBub2RlSUQgaW4gbWF0ZXJpYWxOb2RlcyApIHtcblxuXHRcdFx0XHRcdHZhciBtYXRlcmlhbCA9IHRoaXMucGFyc2VNYXRlcmlhbCggbWF0ZXJpYWxOb2Rlc1sgbm9kZUlEIF0sIHRleHR1cmVNYXAgKTtcblxuXHRcdFx0XHRcdGlmICggbWF0ZXJpYWwgIT09IG51bGwgKSBtYXRlcmlhbE1hcC5zZXQoIHBhcnNlSW50KCBub2RlSUQgKSwgbWF0ZXJpYWwgKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIG1hdGVyaWFsTWFwO1xuXG5cdFx0fSxcblxuXHRcdC8vIFBhcnNlIHNpbmdsZSBub2RlIGluIEZCWFRyZWUuT2JqZWN0cy5NYXRlcmlhbFxuXHRcdC8vIE1hdGVyaWFscyBhcmUgY29ubmVjdGVkIHRvIHRleHR1cmUgbWFwcyBpbiBGQlhUcmVlLk9iamVjdHMuVGV4dHVyZXNcblx0XHQvLyBGQlggZm9ybWF0IGN1cnJlbnRseSBvbmx5IHN1cHBvcnRzIExhbWJlcnQgYW5kIFBob25nIHNoYWRpbmcgbW9kZWxzXG5cdFx0cGFyc2VNYXRlcmlhbDogZnVuY3Rpb24gKCBtYXRlcmlhbE5vZGUsIHRleHR1cmVNYXAgKSB7XG5cblx0XHRcdHZhciBJRCA9IG1hdGVyaWFsTm9kZS5pZDtcblx0XHRcdHZhciBuYW1lID0gbWF0ZXJpYWxOb2RlLmF0dHJOYW1lO1xuXHRcdFx0dmFyIHR5cGUgPSBtYXRlcmlhbE5vZGUuU2hhZGluZ01vZGVsO1xuXG5cdFx0XHQvLyBDYXNlIHdoZXJlIEZCWCB3cmFwcyBzaGFkaW5nIG1vZGVsIGluIHByb3BlcnR5IG9iamVjdC5cblx0XHRcdGlmICggdHlwZW9mIHR5cGUgPT09ICdvYmplY3QnICkge1xuXG5cdFx0XHRcdHR5cGUgPSB0eXBlLnZhbHVlO1xuXG5cdFx0XHR9XG5cblx0XHRcdC8vIElnbm9yZSB1bnVzZWQgbWF0ZXJpYWxzIHdoaWNoIGRvbid0IGhhdmUgYW55IGNvbm5lY3Rpb25zLlxuXHRcdFx0aWYgKCAhIGNvbm5lY3Rpb25zLmhhcyggSUQgKSApIHJldHVybiBudWxsO1xuXG5cdFx0XHR2YXIgcGFyYW1ldGVycyA9IHRoaXMucGFyc2VQYXJhbWV0ZXJzKCBtYXRlcmlhbE5vZGUsIHRleHR1cmVNYXAsIElEICk7XG5cblx0XHRcdHZhciBtYXRlcmlhbDtcblxuXHRcdFx0c3dpdGNoICggdHlwZS50b0xvd2VyQ2FzZSgpICkge1xuXG5cdFx0XHRcdGNhc2UgJ3Bob25nJzpcblx0XHRcdFx0XHRtYXRlcmlhbCA9IG5ldyBNZXNoUGhvbmdNYXRlcmlhbCgpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlICdsYW1iZXJ0Jzpcblx0XHRcdFx0XHRtYXRlcmlhbCA9IG5ldyBNZXNoTGFtYmVydE1hdGVyaWFsKCk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0Y29uc29sZS53YXJuKCAnVEhSRUUuRkJYTG9hZGVyOiB1bmtub3duIG1hdGVyaWFsIHR5cGUgXCIlc1wiLiBEZWZhdWx0aW5nIHRvIE1lc2hQaG9uZ01hdGVyaWFsLicsIHR5cGUgKTtcblx0XHRcdFx0XHRtYXRlcmlhbCA9IG5ldyBNZXNoUGhvbmdNYXRlcmlhbCgpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHR9XG5cblx0XHRcdG1hdGVyaWFsLnNldFZhbHVlcyggcGFyYW1ldGVycyApO1xuXHRcdFx0bWF0ZXJpYWwubmFtZSA9IG5hbWU7XG5cblx0XHRcdHJldHVybiBtYXRlcmlhbDtcblxuXHRcdH0sXG5cblx0XHQvLyBQYXJzZSBGQlggbWF0ZXJpYWwgYW5kIHJldHVybiBwYXJhbWV0ZXJzIHN1aXRhYmxlIGZvciBhIHRocmVlLmpzIG1hdGVyaWFsXG5cdFx0Ly8gQWxzbyBwYXJzZSB0aGUgdGV4dHVyZSBtYXAgYW5kIHJldHVybiBhbnkgdGV4dHVyZXMgYXNzb2NpYXRlZCB3aXRoIHRoZSBtYXRlcmlhbFxuXHRcdHBhcnNlUGFyYW1ldGVyczogZnVuY3Rpb24gKCBtYXRlcmlhbE5vZGUsIHRleHR1cmVNYXAsIElEICkge1xuXG5cdFx0XHR2YXIgcGFyYW1ldGVycyA9IHt9O1xuXG5cdFx0XHRpZiAoIG1hdGVyaWFsTm9kZS5CdW1wRmFjdG9yICkge1xuXG5cdFx0XHRcdHBhcmFtZXRlcnMuYnVtcFNjYWxlID0gbWF0ZXJpYWxOb2RlLkJ1bXBGYWN0b3IudmFsdWU7XG5cblx0XHRcdH1cblxuXHRcdFx0aWYgKCBtYXRlcmlhbE5vZGUuRGlmZnVzZSApIHtcblxuXHRcdFx0XHRwYXJhbWV0ZXJzLmNvbG9yID0gbmV3IENvbG9yKCkuZnJvbUFycmF5KCBtYXRlcmlhbE5vZGUuRGlmZnVzZS52YWx1ZSApO1xuXG5cdFx0XHR9IGVsc2UgaWYgKCBtYXRlcmlhbE5vZGUuRGlmZnVzZUNvbG9yICYmICggbWF0ZXJpYWxOb2RlLkRpZmZ1c2VDb2xvci50eXBlID09PSAnQ29sb3InIHx8IG1hdGVyaWFsTm9kZS5EaWZmdXNlQ29sb3IudHlwZSA9PT0gJ0NvbG9yUkdCJyApICkge1xuXG5cdFx0XHRcdC8vIFRoZSBibGVuZGVyIGV4cG9ydGVyIGV4cG9ydHMgZGlmZnVzZSBoZXJlIGluc3RlYWQgb2YgaW4gbWF0ZXJpYWxOb2RlLkRpZmZ1c2Vcblx0XHRcdFx0cGFyYW1ldGVycy5jb2xvciA9IG5ldyBDb2xvcigpLmZyb21BcnJheSggbWF0ZXJpYWxOb2RlLkRpZmZ1c2VDb2xvci52YWx1ZSApO1xuXG5cdFx0XHR9XG5cblx0XHRcdGlmICggbWF0ZXJpYWxOb2RlLkRpc3BsYWNlbWVudEZhY3RvciApIHtcblxuXHRcdFx0XHRwYXJhbWV0ZXJzLmRpc3BsYWNlbWVudFNjYWxlID0gbWF0ZXJpYWxOb2RlLkRpc3BsYWNlbWVudEZhY3Rvci52YWx1ZTtcblxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIG1hdGVyaWFsTm9kZS5FbWlzc2l2ZSApIHtcblxuXHRcdFx0XHRwYXJhbWV0ZXJzLmVtaXNzaXZlID0gbmV3IENvbG9yKCkuZnJvbUFycmF5KCBtYXRlcmlhbE5vZGUuRW1pc3NpdmUudmFsdWUgKTtcblxuXHRcdFx0fSBlbHNlIGlmICggbWF0ZXJpYWxOb2RlLkVtaXNzaXZlQ29sb3IgJiYgKCBtYXRlcmlhbE5vZGUuRW1pc3NpdmVDb2xvci50eXBlID09PSAnQ29sb3InIHx8IG1hdGVyaWFsTm9kZS5FbWlzc2l2ZUNvbG9yLnR5cGUgPT09ICdDb2xvclJHQicgKSApIHtcblxuXHRcdFx0XHQvLyBUaGUgYmxlbmRlciBleHBvcnRlciBleHBvcnRzIGVtaXNzaXZlIGNvbG9yIGhlcmUgaW5zdGVhZCBvZiBpbiBtYXRlcmlhbE5vZGUuRW1pc3NpdmVcblx0XHRcdFx0cGFyYW1ldGVycy5lbWlzc2l2ZSA9IG5ldyBDb2xvcigpLmZyb21BcnJheSggbWF0ZXJpYWxOb2RlLkVtaXNzaXZlQ29sb3IudmFsdWUgKTtcblxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIG1hdGVyaWFsTm9kZS5FbWlzc2l2ZUZhY3RvciApIHtcblxuXHRcdFx0XHRwYXJhbWV0ZXJzLmVtaXNzaXZlSW50ZW5zaXR5ID0gcGFyc2VGbG9hdCggbWF0ZXJpYWxOb2RlLkVtaXNzaXZlRmFjdG9yLnZhbHVlICk7XG5cblx0XHRcdH1cblxuXHRcdFx0aWYgKCBtYXRlcmlhbE5vZGUuT3BhY2l0eSApIHtcblxuXHRcdFx0XHRwYXJhbWV0ZXJzLm9wYWNpdHkgPSBwYXJzZUZsb2F0KCBtYXRlcmlhbE5vZGUuT3BhY2l0eS52YWx1ZSApO1xuXG5cdFx0XHR9XG5cblx0XHRcdGlmICggcGFyYW1ldGVycy5vcGFjaXR5IDwgMS4wICkge1xuXG5cdFx0XHRcdHBhcmFtZXRlcnMudHJhbnNwYXJlbnQgPSB0cnVlO1xuXG5cdFx0XHR9XG5cblx0XHRcdGlmICggbWF0ZXJpYWxOb2RlLlJlZmxlY3Rpb25GYWN0b3IgKSB7XG5cblx0XHRcdFx0cGFyYW1ldGVycy5yZWZsZWN0aXZpdHkgPSBtYXRlcmlhbE5vZGUuUmVmbGVjdGlvbkZhY3Rvci52YWx1ZTtcblxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIG1hdGVyaWFsTm9kZS5TaGluaW5lc3MgKSB7XG5cblx0XHRcdFx0cGFyYW1ldGVycy5zaGluaW5lc3MgPSBtYXRlcmlhbE5vZGUuU2hpbmluZXNzLnZhbHVlO1xuXG5cdFx0XHR9XG5cblx0XHRcdGlmICggbWF0ZXJpYWxOb2RlLlNwZWN1bGFyICkge1xuXG5cdFx0XHRcdHBhcmFtZXRlcnMuc3BlY3VsYXIgPSBuZXcgQ29sb3IoKS5mcm9tQXJyYXkoIG1hdGVyaWFsTm9kZS5TcGVjdWxhci52YWx1ZSApO1xuXG5cdFx0XHR9IGVsc2UgaWYgKCBtYXRlcmlhbE5vZGUuU3BlY3VsYXJDb2xvciAmJiBtYXRlcmlhbE5vZGUuU3BlY3VsYXJDb2xvci50eXBlID09PSAnQ29sb3InICkge1xuXG5cdFx0XHRcdC8vIFRoZSBibGVuZGVyIGV4cG9ydGVyIGV4cG9ydHMgc3BlY3VsYXIgY29sb3IgaGVyZSBpbnN0ZWFkIG9mIGluIG1hdGVyaWFsTm9kZS5TcGVjdWxhclxuXHRcdFx0XHRwYXJhbWV0ZXJzLnNwZWN1bGFyID0gbmV3IENvbG9yKCkuZnJvbUFycmF5KCBtYXRlcmlhbE5vZGUuU3BlY3VsYXJDb2xvci52YWx1ZSApO1xuXG5cdFx0XHR9XG5cblx0XHRcdHZhciBzY29wZSA9IHRoaXM7XG5cdFx0XHRjb25uZWN0aW9ucy5nZXQoIElEICkuY2hpbGRyZW4uZm9yRWFjaCggZnVuY3Rpb24gKCBjaGlsZCApIHtcblxuXHRcdFx0XHR2YXIgdHlwZSA9IGNoaWxkLnJlbGF0aW9uc2hpcDtcblxuXHRcdFx0XHRzd2l0Y2ggKCB0eXBlICkge1xuXG5cdFx0XHRcdFx0Y2FzZSAnQnVtcCc6XG5cdFx0XHRcdFx0XHRwYXJhbWV0ZXJzLmJ1bXBNYXAgPSBzY29wZS5nZXRUZXh0dXJlKCB0ZXh0dXJlTWFwLCBjaGlsZC5JRCApO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRjYXNlICdNYXlhfFRFWF9hb19tYXAnOlxuXHRcdFx0XHRcdFx0cGFyYW1ldGVycy5hb01hcCA9IHNjb3BlLmdldFRleHR1cmUoIHRleHR1cmVNYXAsIGNoaWxkLklEICk7XG5cdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdGNhc2UgJ0RpZmZ1c2VDb2xvcic6XG5cdFx0XHRcdFx0Y2FzZSAnTWF5YXxURVhfY29sb3JfbWFwJzpcblx0XHRcdFx0XHRcdHBhcmFtZXRlcnMubWFwID0gc2NvcGUuZ2V0VGV4dHVyZSggdGV4dHVyZU1hcCwgY2hpbGQuSUQgKTtcblx0XHRcdFx0XHRcdHBhcmFtZXRlcnMubWFwLmVuY29kaW5nID0gc1JHQkVuY29kaW5nO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRjYXNlICdEaXNwbGFjZW1lbnRDb2xvcic6XG5cdFx0XHRcdFx0XHRwYXJhbWV0ZXJzLmRpc3BsYWNlbWVudE1hcCA9IHNjb3BlLmdldFRleHR1cmUoIHRleHR1cmVNYXAsIGNoaWxkLklEICk7XG5cdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdGNhc2UgJ0VtaXNzaXZlQ29sb3InOlxuXHRcdFx0XHRcdFx0cGFyYW1ldGVycy5lbWlzc2l2ZU1hcCA9IHNjb3BlLmdldFRleHR1cmUoIHRleHR1cmVNYXAsIGNoaWxkLklEICk7XG5cdFx0XHRcdFx0XHRwYXJhbWV0ZXJzLmVtaXNzaXZlTWFwLmVuY29kaW5nID0gc1JHQkVuY29kaW5nO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRjYXNlICdOb3JtYWxNYXAnOlxuXHRcdFx0XHRcdGNhc2UgJ01heWF8VEVYX25vcm1hbF9tYXAnOlxuXHRcdFx0XHRcdFx0cGFyYW1ldGVycy5ub3JtYWxNYXAgPSBzY29wZS5nZXRUZXh0dXJlKCB0ZXh0dXJlTWFwLCBjaGlsZC5JRCApO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRjYXNlICdSZWZsZWN0aW9uQ29sb3InOlxuXHRcdFx0XHRcdFx0cGFyYW1ldGVycy5lbnZNYXAgPSBzY29wZS5nZXRUZXh0dXJlKCB0ZXh0dXJlTWFwLCBjaGlsZC5JRCApO1xuXHRcdFx0XHRcdFx0cGFyYW1ldGVycy5lbnZNYXAubWFwcGluZyA9IEVxdWlyZWN0YW5ndWxhclJlZmxlY3Rpb25NYXBwaW5nO1xuXHRcdFx0XHRcdFx0cGFyYW1ldGVycy5lbnZNYXAuZW5jb2RpbmcgPSBzUkdCRW5jb2Rpbmc7XG5cdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdGNhc2UgJ1NwZWN1bGFyQ29sb3InOlxuXHRcdFx0XHRcdFx0cGFyYW1ldGVycy5zcGVjdWxhck1hcCA9IHNjb3BlLmdldFRleHR1cmUoIHRleHR1cmVNYXAsIGNoaWxkLklEICk7XG5cdFx0XHRcdFx0XHRwYXJhbWV0ZXJzLnNwZWN1bGFyTWFwLmVuY29kaW5nID0gc1JHQkVuY29kaW5nO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRjYXNlICdUcmFuc3BhcmVudENvbG9yJzpcblx0XHRcdFx0XHRjYXNlICdUcmFuc3BhcmVuY3lGYWN0b3InOlxuXHRcdFx0XHRcdFx0cGFyYW1ldGVycy5hbHBoYU1hcCA9IHNjb3BlLmdldFRleHR1cmUoIHRleHR1cmVNYXAsIGNoaWxkLklEICk7XG5cdFx0XHRcdFx0XHRwYXJhbWV0ZXJzLnRyYW5zcGFyZW50ID0gdHJ1ZTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0Y2FzZSAnQW1iaWVudENvbG9yJzpcblx0XHRcdFx0XHRjYXNlICdTaGluaW5lc3NFeHBvbmVudCc6IC8vIEFLQSBnbG9zc2luZXNzIG1hcFxuXHRcdFx0XHRcdGNhc2UgJ1NwZWN1bGFyRmFjdG9yJzogLy8gQUtBIHNwZWN1bGFyTGV2ZWxcblx0XHRcdFx0XHRjYXNlICdWZWN0b3JEaXNwbGFjZW1lbnRDb2xvcic6IC8vIE5PVEU6IFNlZW1zIHRvIGJlIGEgY29weSBvZiBEaXNwbGFjZW1lbnRDb2xvclxuXHRcdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0XHRjb25zb2xlLndhcm4oICdUSFJFRS5GQlhMb2FkZXI6ICVzIG1hcCBpcyBub3Qgc3VwcG9ydGVkIGluIHRocmVlLmpzLCBza2lwcGluZyB0ZXh0dXJlLicsIHR5cGUgKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fSApO1xuXG5cdFx0XHRyZXR1cm4gcGFyYW1ldGVycztcblxuXHRcdH0sXG5cblx0XHQvLyBnZXQgYSB0ZXh0dXJlIGZyb20gdGhlIHRleHR1cmVNYXAgZm9yIHVzZSBieSBhIG1hdGVyaWFsLlxuXHRcdGdldFRleHR1cmU6IGZ1bmN0aW9uICggdGV4dHVyZU1hcCwgaWQgKSB7XG5cblx0XHRcdC8vIGlmIHRoZSB0ZXh0dXJlIGlzIGEgbGF5ZXJlZCB0ZXh0dXJlLCBqdXN0IHVzZSB0aGUgZmlyc3QgbGF5ZXIgYW5kIGlzc3VlIGEgd2FybmluZ1xuXHRcdFx0aWYgKCAnTGF5ZXJlZFRleHR1cmUnIGluIGZieFRyZWUuT2JqZWN0cyAmJiBpZCBpbiBmYnhUcmVlLk9iamVjdHMuTGF5ZXJlZFRleHR1cmUgKSB7XG5cblx0XHRcdFx0Y29uc29sZS53YXJuKCAnVEhSRUUuRkJYTG9hZGVyOiBsYXllcmVkIHRleHR1cmVzIGFyZSBub3Qgc3VwcG9ydGVkIGluIHRocmVlLmpzLiBEaXNjYXJkaW5nIGFsbCBidXQgZmlyc3QgbGF5ZXIuJyApO1xuXHRcdFx0XHRpZCA9IGNvbm5lY3Rpb25zLmdldCggaWQgKS5jaGlsZHJlblsgMCBdLklEO1xuXG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiB0ZXh0dXJlTWFwLmdldCggaWQgKTtcblxuXHRcdH0sXG5cblx0XHQvLyBQYXJzZSBub2RlcyBpbiBGQlhUcmVlLk9iamVjdHMuRGVmb3JtZXJcblx0XHQvLyBEZWZvcm1lciBub2RlIGNhbiBjb250YWluIHNraW5uaW5nIG9yIFZlcnRleCBDYWNoZSBhbmltYXRpb24gZGF0YSwgaG93ZXZlciBvbmx5IHNraW5uaW5nIGlzIHN1cHBvcnRlZCBoZXJlXG5cdFx0Ly8gR2VuZXJhdGVzIG1hcCBvZiBTa2VsZXRvbi1saWtlIG9iamVjdHMgZm9yIHVzZSBsYXRlciB3aGVuIGdlbmVyYXRpbmcgYW5kIGJpbmRpbmcgc2tlbGV0b25zLlxuXHRcdHBhcnNlRGVmb3JtZXJzOiBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdHZhciBza2VsZXRvbnMgPSB7fTtcblx0XHRcdHZhciBtb3JwaFRhcmdldHMgPSB7fTtcblxuXHRcdFx0aWYgKCAnRGVmb3JtZXInIGluIGZieFRyZWUuT2JqZWN0cyApIHtcblxuXHRcdFx0XHR2YXIgRGVmb3JtZXJOb2RlcyA9IGZieFRyZWUuT2JqZWN0cy5EZWZvcm1lcjtcblxuXHRcdFx0XHRmb3IgKCB2YXIgbm9kZUlEIGluIERlZm9ybWVyTm9kZXMgKSB7XG5cblx0XHRcdFx0XHR2YXIgZGVmb3JtZXJOb2RlID0gRGVmb3JtZXJOb2Rlc1sgbm9kZUlEIF07XG5cblx0XHRcdFx0XHR2YXIgcmVsYXRpb25zaGlwcyA9IGNvbm5lY3Rpb25zLmdldCggcGFyc2VJbnQoIG5vZGVJRCApICk7XG5cblx0XHRcdFx0XHRpZiAoIGRlZm9ybWVyTm9kZS5hdHRyVHlwZSA9PT0gJ1NraW4nICkge1xuXG5cdFx0XHRcdFx0XHR2YXIgc2tlbGV0b24gPSB0aGlzLnBhcnNlU2tlbGV0b24oIHJlbGF0aW9uc2hpcHMsIERlZm9ybWVyTm9kZXMgKTtcblx0XHRcdFx0XHRcdHNrZWxldG9uLklEID0gbm9kZUlEO1xuXG5cdFx0XHRcdFx0XHRpZiAoIHJlbGF0aW9uc2hpcHMucGFyZW50cy5sZW5ndGggPiAxICkgY29uc29sZS53YXJuKCAnVEhSRUUuRkJYTG9hZGVyOiBza2VsZXRvbiBhdHRhY2hlZCB0byBtb3JlIHRoYW4gb25lIGdlb21ldHJ5IGlzIG5vdCBzdXBwb3J0ZWQuJyApO1xuXHRcdFx0XHRcdFx0c2tlbGV0b24uZ2VvbWV0cnlJRCA9IHJlbGF0aW9uc2hpcHMucGFyZW50c1sgMCBdLklEO1xuXG5cdFx0XHRcdFx0XHRza2VsZXRvbnNbIG5vZGVJRCBdID0gc2tlbGV0b247XG5cblx0XHRcdFx0XHR9IGVsc2UgaWYgKCBkZWZvcm1lck5vZGUuYXR0clR5cGUgPT09ICdCbGVuZFNoYXBlJyApIHtcblxuXHRcdFx0XHRcdFx0dmFyIG1vcnBoVGFyZ2V0ID0ge1xuXHRcdFx0XHRcdFx0XHRpZDogbm9kZUlELFxuXHRcdFx0XHRcdFx0fTtcblxuXHRcdFx0XHRcdFx0bW9ycGhUYXJnZXQucmF3VGFyZ2V0cyA9IHRoaXMucGFyc2VNb3JwaFRhcmdldHMoIHJlbGF0aW9uc2hpcHMsIERlZm9ybWVyTm9kZXMgKTtcblx0XHRcdFx0XHRcdG1vcnBoVGFyZ2V0LmlkID0gbm9kZUlEO1xuXG5cdFx0XHRcdFx0XHRpZiAoIHJlbGF0aW9uc2hpcHMucGFyZW50cy5sZW5ndGggPiAxICkgY29uc29sZS53YXJuKCAnVEhSRUUuRkJYTG9hZGVyOiBtb3JwaCB0YXJnZXQgYXR0YWNoZWQgdG8gbW9yZSB0aGFuIG9uZSBnZW9tZXRyeSBpcyBub3Qgc3VwcG9ydGVkLicgKTtcblxuXHRcdFx0XHRcdFx0bW9ycGhUYXJnZXRzWyBub2RlSUQgXSA9IG1vcnBoVGFyZ2V0O1xuXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH1cblxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4ge1xuXG5cdFx0XHRcdHNrZWxldG9uczogc2tlbGV0b25zLFxuXHRcdFx0XHRtb3JwaFRhcmdldHM6IG1vcnBoVGFyZ2V0cyxcblxuXHRcdFx0fTtcblxuXHRcdH0sXG5cblx0XHQvLyBQYXJzZSBzaW5nbGUgbm9kZXMgaW4gRkJYVHJlZS5PYmplY3RzLkRlZm9ybWVyXG5cdFx0Ly8gVGhlIHRvcCBsZXZlbCBza2VsZXRvbiBub2RlIGhhcyB0eXBlICdTa2luJyBhbmQgc3ViIG5vZGVzIGhhdmUgdHlwZSAnQ2x1c3Rlcidcblx0XHQvLyBFYWNoIHNraW4gbm9kZSByZXByZXNlbnRzIGEgc2tlbGV0b24gYW5kIGVhY2ggY2x1c3RlciBub2RlIHJlcHJlc2VudHMgYSBib25lXG5cdFx0cGFyc2VTa2VsZXRvbjogZnVuY3Rpb24gKCByZWxhdGlvbnNoaXBzLCBkZWZvcm1lck5vZGVzICkge1xuXG5cdFx0XHR2YXIgcmF3Qm9uZXMgPSBbXTtcblxuXHRcdFx0cmVsYXRpb25zaGlwcy5jaGlsZHJlbi5mb3JFYWNoKCBmdW5jdGlvbiAoIGNoaWxkICkge1xuXG5cdFx0XHRcdHZhciBib25lTm9kZSA9IGRlZm9ybWVyTm9kZXNbIGNoaWxkLklEIF07XG5cblx0XHRcdFx0aWYgKCBib25lTm9kZS5hdHRyVHlwZSAhPT0gJ0NsdXN0ZXInICkgcmV0dXJuO1xuXG5cdFx0XHRcdHZhciByYXdCb25lID0ge1xuXG5cdFx0XHRcdFx0SUQ6IGNoaWxkLklELFxuXHRcdFx0XHRcdGluZGljZXM6IFtdLFxuXHRcdFx0XHRcdHdlaWdodHM6IFtdLFxuXHRcdFx0XHRcdHRyYW5zZm9ybUxpbms6IG5ldyBNYXRyaXg0KCkuZnJvbUFycmF5KCBib25lTm9kZS5UcmFuc2Zvcm1MaW5rLmEgKSxcblx0XHRcdFx0XHQvLyB0cmFuc2Zvcm06IG5ldyBNYXRyaXg0KCkuZnJvbUFycmF5KCBib25lTm9kZS5UcmFuc2Zvcm0uYSApLFxuXHRcdFx0XHRcdC8vIGxpbmtNb2RlOiBib25lTm9kZS5Nb2RlLFxuXG5cdFx0XHRcdH07XG5cblx0XHRcdFx0aWYgKCAnSW5kZXhlcycgaW4gYm9uZU5vZGUgKSB7XG5cblx0XHRcdFx0XHRyYXdCb25lLmluZGljZXMgPSBib25lTm9kZS5JbmRleGVzLmE7XG5cdFx0XHRcdFx0cmF3Qm9uZS53ZWlnaHRzID0gYm9uZU5vZGUuV2VpZ2h0cy5hO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyYXdCb25lcy5wdXNoKCByYXdCb25lICk7XG5cblx0XHRcdH0gKTtcblxuXHRcdFx0cmV0dXJuIHtcblxuXHRcdFx0XHRyYXdCb25lczogcmF3Qm9uZXMsXG5cdFx0XHRcdGJvbmVzOiBbXVxuXG5cdFx0XHR9O1xuXG5cdFx0fSxcblxuXHRcdC8vIFRoZSB0b3AgbGV2ZWwgbW9ycGggZGVmb3JtZXIgbm9kZSBoYXMgdHlwZSBcIkJsZW5kU2hhcGVcIiBhbmQgc3ViIG5vZGVzIGhhdmUgdHlwZSBcIkJsZW5kU2hhcGVDaGFubmVsXCJcblx0XHRwYXJzZU1vcnBoVGFyZ2V0czogZnVuY3Rpb24gKCByZWxhdGlvbnNoaXBzLCBkZWZvcm1lck5vZGVzICkge1xuXG5cdFx0XHR2YXIgcmF3TW9ycGhUYXJnZXRzID0gW107XG5cblx0XHRcdGZvciAoIHZhciBpID0gMDsgaSA8IHJlbGF0aW9uc2hpcHMuY2hpbGRyZW4ubGVuZ3RoOyBpICsrICkge1xuXG5cdFx0XHRcdHZhciBjaGlsZCA9IHJlbGF0aW9uc2hpcHMuY2hpbGRyZW5bIGkgXTtcblxuXHRcdFx0XHR2YXIgbW9ycGhUYXJnZXROb2RlID0gZGVmb3JtZXJOb2Rlc1sgY2hpbGQuSUQgXTtcblxuXHRcdFx0XHR2YXIgcmF3TW9ycGhUYXJnZXQgPSB7XG5cblx0XHRcdFx0XHRuYW1lOiBtb3JwaFRhcmdldE5vZGUuYXR0ck5hbWUsXG5cdFx0XHRcdFx0aW5pdGlhbFdlaWdodDogbW9ycGhUYXJnZXROb2RlLkRlZm9ybVBlcmNlbnQsXG5cdFx0XHRcdFx0aWQ6IG1vcnBoVGFyZ2V0Tm9kZS5pZCxcblx0XHRcdFx0XHRmdWxsV2VpZ2h0czogbW9ycGhUYXJnZXROb2RlLkZ1bGxXZWlnaHRzLmFcblxuXHRcdFx0XHR9O1xuXG5cdFx0XHRcdGlmICggbW9ycGhUYXJnZXROb2RlLmF0dHJUeXBlICE9PSAnQmxlbmRTaGFwZUNoYW5uZWwnICkgcmV0dXJuO1xuXG5cdFx0XHRcdHJhd01vcnBoVGFyZ2V0Lmdlb0lEID0gY29ubmVjdGlvbnMuZ2V0KCBwYXJzZUludCggY2hpbGQuSUQgKSApLmNoaWxkcmVuLmZpbHRlciggZnVuY3Rpb24gKCBjaGlsZCApIHtcblxuXHRcdFx0XHRcdHJldHVybiBjaGlsZC5yZWxhdGlvbnNoaXAgPT09IHVuZGVmaW5lZDtcblxuXHRcdFx0XHR9IClbIDAgXS5JRDtcblxuXHRcdFx0XHRyYXdNb3JwaFRhcmdldHMucHVzaCggcmF3TW9ycGhUYXJnZXQgKTtcblxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gcmF3TW9ycGhUYXJnZXRzO1xuXG5cdFx0fSxcblxuXHRcdC8vIGNyZWF0ZSB0aGUgbWFpbiBHcm91cCgpIHRvIGJlIHJldHVybmVkIGJ5IHRoZSBsb2FkZXJcblx0XHRwYXJzZVNjZW5lOiBmdW5jdGlvbiAoIGRlZm9ybWVycywgZ2VvbWV0cnlNYXAsIG1hdGVyaWFsTWFwICkge1xuXG5cdFx0XHRzY2VuZUdyYXBoID0gbmV3IEdyb3VwKCk7XG5cblx0XHRcdHZhciBtb2RlbE1hcCA9IHRoaXMucGFyc2VNb2RlbHMoIGRlZm9ybWVycy5za2VsZXRvbnMsIGdlb21ldHJ5TWFwLCBtYXRlcmlhbE1hcCApO1xuXG5cdFx0XHR2YXIgbW9kZWxOb2RlcyA9IGZieFRyZWUuT2JqZWN0cy5Nb2RlbDtcblxuXHRcdFx0dmFyIHNjb3BlID0gdGhpcztcblx0XHRcdG1vZGVsTWFwLmZvckVhY2goIGZ1bmN0aW9uICggbW9kZWwgKSB7XG5cblx0XHRcdFx0dmFyIG1vZGVsTm9kZSA9IG1vZGVsTm9kZXNbIG1vZGVsLklEIF07XG5cdFx0XHRcdHNjb3BlLnNldExvb2tBdFByb3BlcnRpZXMoIG1vZGVsLCBtb2RlbE5vZGUgKTtcblxuXHRcdFx0XHR2YXIgcGFyZW50Q29ubmVjdGlvbnMgPSBjb25uZWN0aW9ucy5nZXQoIG1vZGVsLklEICkucGFyZW50cztcblxuXHRcdFx0XHRwYXJlbnRDb25uZWN0aW9ucy5mb3JFYWNoKCBmdW5jdGlvbiAoIGNvbm5lY3Rpb24gKSB7XG5cblx0XHRcdFx0XHR2YXIgcGFyZW50ID0gbW9kZWxNYXAuZ2V0KCBjb25uZWN0aW9uLklEICk7XG5cdFx0XHRcdFx0aWYgKCBwYXJlbnQgIT09IHVuZGVmaW5lZCApIHBhcmVudC5hZGQoIG1vZGVsICk7XG5cblx0XHRcdFx0fSApO1xuXG5cdFx0XHRcdGlmICggbW9kZWwucGFyZW50ID09PSBudWxsICkge1xuXG5cdFx0XHRcdFx0c2NlbmVHcmFwaC5hZGQoIG1vZGVsICk7XG5cblx0XHRcdFx0fVxuXG5cblx0XHRcdH0gKTtcblxuXHRcdFx0dGhpcy5iaW5kU2tlbGV0b24oIGRlZm9ybWVycy5za2VsZXRvbnMsIGdlb21ldHJ5TWFwLCBtb2RlbE1hcCApO1xuXG5cdFx0XHR0aGlzLmNyZWF0ZUFtYmllbnRMaWdodCgpO1xuXG5cdFx0XHR0aGlzLnNldHVwTW9ycGhNYXRlcmlhbHMoKTtcblxuXHRcdFx0c2NlbmVHcmFwaC50cmF2ZXJzZSggZnVuY3Rpb24gKCBub2RlICkge1xuXG5cdFx0XHRcdGlmICggbm9kZS51c2VyRGF0YS50cmFuc2Zvcm1EYXRhICkge1xuXG5cdFx0XHRcdFx0aWYgKCBub2RlLnBhcmVudCApIHtcblxuXHRcdFx0XHRcdFx0bm9kZS51c2VyRGF0YS50cmFuc2Zvcm1EYXRhLnBhcmVudE1hdHJpeCA9IG5vZGUucGFyZW50Lm1hdHJpeDtcblx0XHRcdFx0XHRcdG5vZGUudXNlckRhdGEudHJhbnNmb3JtRGF0YS5wYXJlbnRNYXRyaXhXb3JsZCA9IG5vZGUucGFyZW50Lm1hdHJpeFdvcmxkO1xuXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0dmFyIHRyYW5zZm9ybSA9IGdlbmVyYXRlVHJhbnNmb3JtKCBub2RlLnVzZXJEYXRhLnRyYW5zZm9ybURhdGEgKTtcblxuXHRcdFx0XHRcdG5vZGUuYXBwbHlNYXRyaXg0KCB0cmFuc2Zvcm0gKTtcblx0XHRcdFx0XHRub2RlLnVwZGF0ZVdvcmxkTWF0cml4KCk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9ICk7XG5cblx0XHRcdHZhciBhbmltYXRpb25zID0gbmV3IEFuaW1hdGlvblBhcnNlcigpLnBhcnNlKCk7XG5cblx0XHRcdC8vIGlmIGFsbCB0aGUgbW9kZWxzIHdoZXJlIGFscmVhZHkgY29tYmluZWQgaW4gYSBzaW5nbGUgZ3JvdXAsIGp1c3QgcmV0dXJuIHRoYXRcblx0XHRcdGlmICggc2NlbmVHcmFwaC5jaGlsZHJlbi5sZW5ndGggPT09IDEgJiYgc2NlbmVHcmFwaC5jaGlsZHJlblsgMCBdLmlzR3JvdXAgKSB7XG5cblx0XHRcdFx0c2NlbmVHcmFwaC5jaGlsZHJlblsgMCBdLmFuaW1hdGlvbnMgPSBhbmltYXRpb25zO1xuXHRcdFx0XHRzY2VuZUdyYXBoID0gc2NlbmVHcmFwaC5jaGlsZHJlblsgMCBdO1xuXG5cdFx0XHR9XG5cblx0XHRcdHNjZW5lR3JhcGguYW5pbWF0aW9ucyA9IGFuaW1hdGlvbnM7XG5cblx0XHR9LFxuXG5cdFx0Ly8gcGFyc2Ugbm9kZXMgaW4gRkJYVHJlZS5PYmplY3RzLk1vZGVsXG5cdFx0cGFyc2VNb2RlbHM6IGZ1bmN0aW9uICggc2tlbGV0b25zLCBnZW9tZXRyeU1hcCwgbWF0ZXJpYWxNYXAgKSB7XG5cblx0XHRcdHZhciBtb2RlbE1hcCA9IG5ldyBNYXAoKTtcblx0XHRcdHZhciBtb2RlbE5vZGVzID0gZmJ4VHJlZS5PYmplY3RzLk1vZGVsO1xuXG5cdFx0XHRmb3IgKCB2YXIgbm9kZUlEIGluIG1vZGVsTm9kZXMgKSB7XG5cblx0XHRcdFx0dmFyIGlkID0gcGFyc2VJbnQoIG5vZGVJRCApO1xuXHRcdFx0XHR2YXIgbm9kZSA9IG1vZGVsTm9kZXNbIG5vZGVJRCBdO1xuXHRcdFx0XHR2YXIgcmVsYXRpb25zaGlwcyA9IGNvbm5lY3Rpb25zLmdldCggaWQgKTtcblxuXHRcdFx0XHR2YXIgbW9kZWwgPSB0aGlzLmJ1aWxkU2tlbGV0b24oIHJlbGF0aW9uc2hpcHMsIHNrZWxldG9ucywgaWQsIG5vZGUuYXR0ck5hbWUgKTtcblxuXHRcdFx0XHRpZiAoICEgbW9kZWwgKSB7XG5cblx0XHRcdFx0XHRzd2l0Y2ggKCBub2RlLmF0dHJUeXBlICkge1xuXG5cdFx0XHRcdFx0XHRjYXNlICdDYW1lcmEnOlxuXHRcdFx0XHRcdFx0XHRtb2RlbCA9IHRoaXMuY3JlYXRlQ2FtZXJhKCByZWxhdGlvbnNoaXBzICk7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0Y2FzZSAnTGlnaHQnOlxuXHRcdFx0XHRcdFx0XHRtb2RlbCA9IHRoaXMuY3JlYXRlTGlnaHQoIHJlbGF0aW9uc2hpcHMgKTtcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHRjYXNlICdNZXNoJzpcblx0XHRcdFx0XHRcdFx0bW9kZWwgPSB0aGlzLmNyZWF0ZU1lc2goIHJlbGF0aW9uc2hpcHMsIGdlb21ldHJ5TWFwLCBtYXRlcmlhbE1hcCApO1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdGNhc2UgJ051cmJzQ3VydmUnOlxuXHRcdFx0XHRcdFx0XHRtb2RlbCA9IHRoaXMuY3JlYXRlQ3VydmUoIHJlbGF0aW9uc2hpcHMsIGdlb21ldHJ5TWFwICk7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0Y2FzZSAnTGltYk5vZGUnOlxuXHRcdFx0XHRcdFx0Y2FzZSAnUm9vdCc6XG5cdFx0XHRcdFx0XHRcdG1vZGVsID0gbmV3IEJvbmUoKTtcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHRjYXNlICdOdWxsJzpcblx0XHRcdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0XHRcdG1vZGVsID0gbmV3IEdyb3VwKCk7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0bW9kZWwubmFtZSA9IG5vZGUuYXR0ck5hbWUgPyBQcm9wZXJ0eUJpbmRpbmcuc2FuaXRpemVOb2RlTmFtZSggbm9kZS5hdHRyTmFtZSApIDogJyc7XG5cblx0XHRcdFx0XHRtb2RlbC5JRCA9IGlkO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHR0aGlzLmdldFRyYW5zZm9ybURhdGEoIG1vZGVsLCBub2RlICk7XG5cdFx0XHRcdG1vZGVsTWFwLnNldCggaWQsIG1vZGVsICk7XG5cblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIG1vZGVsTWFwO1xuXG5cdFx0fSxcblxuXHRcdGJ1aWxkU2tlbGV0b246IGZ1bmN0aW9uICggcmVsYXRpb25zaGlwcywgc2tlbGV0b25zLCBpZCwgbmFtZSApIHtcblxuXHRcdFx0dmFyIGJvbmUgPSBudWxsO1xuXG5cdFx0XHRyZWxhdGlvbnNoaXBzLnBhcmVudHMuZm9yRWFjaCggZnVuY3Rpb24gKCBwYXJlbnQgKSB7XG5cblx0XHRcdFx0Zm9yICggdmFyIElEIGluIHNrZWxldG9ucyApIHtcblxuXHRcdFx0XHRcdHZhciBza2VsZXRvbiA9IHNrZWxldG9uc1sgSUQgXTtcblxuXHRcdFx0XHRcdHNrZWxldG9uLnJhd0JvbmVzLmZvckVhY2goIGZ1bmN0aW9uICggcmF3Qm9uZSwgaSApIHtcblxuXHRcdFx0XHRcdFx0aWYgKCByYXdCb25lLklEID09PSBwYXJlbnQuSUQgKSB7XG5cblx0XHRcdFx0XHRcdFx0dmFyIHN1YkJvbmUgPSBib25lO1xuXHRcdFx0XHRcdFx0XHRib25lID0gbmV3IEJvbmUoKTtcblxuXHRcdFx0XHRcdFx0XHRib25lLm1hdHJpeFdvcmxkLmNvcHkoIHJhd0JvbmUudHJhbnNmb3JtTGluayApO1xuXG5cdFx0XHRcdFx0XHRcdC8vIHNldCBuYW1lIGFuZCBpZCBoZXJlIC0gb3RoZXJ3aXNlIGluIGNhc2VzIHdoZXJlIFwic3ViQm9uZVwiIGlzIGNyZWF0ZWQgaXQgd2lsbCBub3QgaGF2ZSBhIG5hbWUgLyBpZFxuXG5cdFx0XHRcdFx0XHRcdGJvbmUubmFtZSA9IG5hbWUgPyBQcm9wZXJ0eUJpbmRpbmcuc2FuaXRpemVOb2RlTmFtZSggbmFtZSApIDogJyc7XG5cdFx0XHRcdFx0XHRcdGJvbmUuSUQgPSBpZDtcblxuXHRcdFx0XHRcdFx0XHRza2VsZXRvbi5ib25lc1sgaSBdID0gYm9uZTtcblxuXHRcdFx0XHRcdFx0XHQvLyBJbiBjYXNlcyB3aGVyZSBhIGJvbmUgaXMgc2hhcmVkIGJldHdlZW4gbXVsdGlwbGUgbWVzaGVzXG5cdFx0XHRcdFx0XHRcdC8vIGR1cGxpY2F0ZSB0aGUgYm9uZSBoZXJlIGFuZCBhbmQgaXQgYXMgYSBjaGlsZCBvZiB0aGUgZmlyc3QgYm9uZVxuXHRcdFx0XHRcdFx0XHRpZiAoIHN1YkJvbmUgIT09IG51bGwgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHRib25lLmFkZCggc3ViQm9uZSApO1xuXG5cdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0fSApO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fSApO1xuXG5cdFx0XHRyZXR1cm4gYm9uZTtcblxuXHRcdH0sXG5cblx0XHQvLyBjcmVhdGUgYSBQZXJzcGVjdGl2ZUNhbWVyYSBvciBPcnRob2dyYXBoaWNDYW1lcmFcblx0XHRjcmVhdGVDYW1lcmE6IGZ1bmN0aW9uICggcmVsYXRpb25zaGlwcyApIHtcblxuXHRcdFx0dmFyIG1vZGVsO1xuXHRcdFx0dmFyIGNhbWVyYUF0dHJpYnV0ZTtcblxuXHRcdFx0cmVsYXRpb25zaGlwcy5jaGlsZHJlbi5mb3JFYWNoKCBmdW5jdGlvbiAoIGNoaWxkICkge1xuXG5cdFx0XHRcdHZhciBhdHRyID0gZmJ4VHJlZS5PYmplY3RzLk5vZGVBdHRyaWJ1dGVbIGNoaWxkLklEIF07XG5cblx0XHRcdFx0aWYgKCBhdHRyICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0XHRjYW1lcmFBdHRyaWJ1dGUgPSBhdHRyO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fSApO1xuXG5cdFx0XHRpZiAoIGNhbWVyYUF0dHJpYnV0ZSA9PT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRcdG1vZGVsID0gbmV3IE9iamVjdDNEKCk7XG5cblx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0dmFyIHR5cGUgPSAwO1xuXHRcdFx0XHRpZiAoIGNhbWVyYUF0dHJpYnV0ZS5DYW1lcmFQcm9qZWN0aW9uVHlwZSAhPT0gdW5kZWZpbmVkICYmIGNhbWVyYUF0dHJpYnV0ZS5DYW1lcmFQcm9qZWN0aW9uVHlwZS52YWx1ZSA9PT0gMSApIHtcblxuXHRcdFx0XHRcdHR5cGUgPSAxO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHR2YXIgbmVhckNsaXBwaW5nUGxhbmUgPSAxO1xuXHRcdFx0XHRpZiAoIGNhbWVyYUF0dHJpYnV0ZS5OZWFyUGxhbmUgIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0XHRcdG5lYXJDbGlwcGluZ1BsYW5lID0gY2FtZXJhQXR0cmlidXRlLk5lYXJQbGFuZS52YWx1ZSAvIDEwMDA7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdHZhciBmYXJDbGlwcGluZ1BsYW5lID0gMTAwMDtcblx0XHRcdFx0aWYgKCBjYW1lcmFBdHRyaWJ1dGUuRmFyUGxhbmUgIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0XHRcdGZhckNsaXBwaW5nUGxhbmUgPSBjYW1lcmFBdHRyaWJ1dGUuRmFyUGxhbmUudmFsdWUgLyAxMDAwO1xuXG5cdFx0XHRcdH1cblxuXG5cdFx0XHRcdHZhciB3aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuXHRcdFx0XHR2YXIgaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xuXG5cdFx0XHRcdGlmICggY2FtZXJhQXR0cmlidXRlLkFzcGVjdFdpZHRoICE9PSB1bmRlZmluZWQgJiYgY2FtZXJhQXR0cmlidXRlLkFzcGVjdEhlaWdodCAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRcdFx0d2lkdGggPSBjYW1lcmFBdHRyaWJ1dGUuQXNwZWN0V2lkdGgudmFsdWU7XG5cdFx0XHRcdFx0aGVpZ2h0ID0gY2FtZXJhQXR0cmlidXRlLkFzcGVjdEhlaWdodC52YWx1ZTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdFx0dmFyIGFzcGVjdCA9IHdpZHRoIC8gaGVpZ2h0O1xuXG5cdFx0XHRcdHZhciBmb3YgPSA0NTtcblx0XHRcdFx0aWYgKCBjYW1lcmFBdHRyaWJ1dGUuRmllbGRPZlZpZXcgIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0XHRcdGZvdiA9IGNhbWVyYUF0dHJpYnV0ZS5GaWVsZE9mVmlldy52YWx1ZTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdFx0dmFyIGZvY2FsTGVuZ3RoID0gY2FtZXJhQXR0cmlidXRlLkZvY2FsTGVuZ3RoID8gY2FtZXJhQXR0cmlidXRlLkZvY2FsTGVuZ3RoLnZhbHVlIDogbnVsbDtcblxuXHRcdFx0XHRzd2l0Y2ggKCB0eXBlICkge1xuXG5cdFx0XHRcdFx0Y2FzZSAwOiAvLyBQZXJzcGVjdGl2ZVxuXHRcdFx0XHRcdFx0bW9kZWwgPSBuZXcgUGVyc3BlY3RpdmVDYW1lcmEoIGZvdiwgYXNwZWN0LCBuZWFyQ2xpcHBpbmdQbGFuZSwgZmFyQ2xpcHBpbmdQbGFuZSApO1xuXHRcdFx0XHRcdFx0aWYgKCBmb2NhbExlbmd0aCAhPT0gbnVsbCApIG1vZGVsLnNldEZvY2FsTGVuZ3RoKCBmb2NhbExlbmd0aCApO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRjYXNlIDE6IC8vIE9ydGhvZ3JhcGhpY1xuXHRcdFx0XHRcdFx0bW9kZWwgPSBuZXcgT3J0aG9ncmFwaGljQ2FtZXJhKCAtIHdpZHRoIC8gMiwgd2lkdGggLyAyLCBoZWlnaHQgLyAyLCAtIGhlaWdodCAvIDIsIG5lYXJDbGlwcGluZ1BsYW5lLCBmYXJDbGlwcGluZ1BsYW5lICk7XG5cdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0XHRjb25zb2xlLndhcm4oICdUSFJFRS5GQlhMb2FkZXI6IFVua25vd24gY2FtZXJhIHR5cGUgJyArIHR5cGUgKyAnLicgKTtcblx0XHRcdFx0XHRcdG1vZGVsID0gbmV3IE9iamVjdDNEKCk7XG5cdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHR9XG5cblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIG1vZGVsO1xuXG5cdFx0fSxcblxuXHRcdC8vIENyZWF0ZSBhIERpcmVjdGlvbmFsTGlnaHQsIFBvaW50TGlnaHQgb3IgU3BvdExpZ2h0XG5cdFx0Y3JlYXRlTGlnaHQ6IGZ1bmN0aW9uICggcmVsYXRpb25zaGlwcyApIHtcblxuXHRcdFx0dmFyIG1vZGVsO1xuXHRcdFx0dmFyIGxpZ2h0QXR0cmlidXRlO1xuXG5cdFx0XHRyZWxhdGlvbnNoaXBzLmNoaWxkcmVuLmZvckVhY2goIGZ1bmN0aW9uICggY2hpbGQgKSB7XG5cblx0XHRcdFx0dmFyIGF0dHIgPSBmYnhUcmVlLk9iamVjdHMuTm9kZUF0dHJpYnV0ZVsgY2hpbGQuSUQgXTtcblxuXHRcdFx0XHRpZiAoIGF0dHIgIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0XHRcdGxpZ2h0QXR0cmlidXRlID0gYXR0cjtcblxuXHRcdFx0XHR9XG5cblx0XHRcdH0gKTtcblxuXHRcdFx0aWYgKCBsaWdodEF0dHJpYnV0ZSA9PT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRcdG1vZGVsID0gbmV3IE9iamVjdDNEKCk7XG5cblx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0dmFyIHR5cGU7XG5cblx0XHRcdFx0Ly8gTGlnaHRUeXBlIGNhbiBiZSB1bmRlZmluZWQgZm9yIFBvaW50IGxpZ2h0c1xuXHRcdFx0XHRpZiAoIGxpZ2h0QXR0cmlidXRlLkxpZ2h0VHlwZSA9PT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRcdFx0dHlwZSA9IDA7XG5cblx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdHR5cGUgPSBsaWdodEF0dHJpYnV0ZS5MaWdodFR5cGUudmFsdWU7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdHZhciBjb2xvciA9IDB4ZmZmZmZmO1xuXG5cdFx0XHRcdGlmICggbGlnaHRBdHRyaWJ1dGUuQ29sb3IgIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0XHRcdGNvbG9yID0gbmV3IENvbG9yKCkuZnJvbUFycmF5KCBsaWdodEF0dHJpYnV0ZS5Db2xvci52YWx1ZSApO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHR2YXIgaW50ZW5zaXR5ID0gKCBsaWdodEF0dHJpYnV0ZS5JbnRlbnNpdHkgPT09IHVuZGVmaW5lZCApID8gMSA6IGxpZ2h0QXR0cmlidXRlLkludGVuc2l0eS52YWx1ZSAvIDEwMDtcblxuXHRcdFx0XHQvLyBsaWdodCBkaXNhYmxlZFxuXHRcdFx0XHRpZiAoIGxpZ2h0QXR0cmlidXRlLkNhc3RMaWdodE9uT2JqZWN0ICE9PSB1bmRlZmluZWQgJiYgbGlnaHRBdHRyaWJ1dGUuQ2FzdExpZ2h0T25PYmplY3QudmFsdWUgPT09IDAgKSB7XG5cblx0XHRcdFx0XHRpbnRlbnNpdHkgPSAwO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHR2YXIgZGlzdGFuY2UgPSAwO1xuXHRcdFx0XHRpZiAoIGxpZ2h0QXR0cmlidXRlLkZhckF0dGVudWF0aW9uRW5kICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0XHRpZiAoIGxpZ2h0QXR0cmlidXRlLkVuYWJsZUZhckF0dGVudWF0aW9uICE9PSB1bmRlZmluZWQgJiYgbGlnaHRBdHRyaWJ1dGUuRW5hYmxlRmFyQXR0ZW51YXRpb24udmFsdWUgPT09IDAgKSB7XG5cblx0XHRcdFx0XHRcdGRpc3RhbmNlID0gMDtcblxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRcdGRpc3RhbmNlID0gbGlnaHRBdHRyaWJ1dGUuRmFyQXR0ZW51YXRpb25FbmQudmFsdWU7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFRPRE86IGNvdWxkIHRoaXMgYmUgY2FsY3VsYXRlZCBsaW5lYXJseSBmcm9tIEZhckF0dGVudWF0aW9uU3RhcnQgdG8gRmFyQXR0ZW51YXRpb25FbmQ/XG5cdFx0XHRcdHZhciBkZWNheSA9IDE7XG5cblx0XHRcdFx0c3dpdGNoICggdHlwZSApIHtcblxuXHRcdFx0XHRcdGNhc2UgMDogLy8gUG9pbnRcblx0XHRcdFx0XHRcdG1vZGVsID0gbmV3IFBvaW50TGlnaHQoIGNvbG9yLCBpbnRlbnNpdHksIGRpc3RhbmNlLCBkZWNheSApO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRjYXNlIDE6IC8vIERpcmVjdGlvbmFsXG5cdFx0XHRcdFx0XHRtb2RlbCA9IG5ldyBEaXJlY3Rpb25hbExpZ2h0KCBjb2xvciwgaW50ZW5zaXR5ICk7XG5cdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdGNhc2UgMjogLy8gU3BvdFxuXHRcdFx0XHRcdFx0dmFyIGFuZ2xlID0gTWF0aC5QSSAvIDM7XG5cblx0XHRcdFx0XHRcdGlmICggbGlnaHRBdHRyaWJ1dGUuSW5uZXJBbmdsZSAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRcdFx0XHRcdGFuZ2xlID0gTWF0aFV0aWxzLmRlZ1RvUmFkKCBsaWdodEF0dHJpYnV0ZS5Jbm5lckFuZ2xlLnZhbHVlICk7XG5cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0dmFyIHBlbnVtYnJhID0gMDtcblx0XHRcdFx0XHRcdGlmICggbGlnaHRBdHRyaWJ1dGUuT3V0ZXJBbmdsZSAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRcdFx0XHRcdC8vIFRPRE86IHRoaXMgaXMgbm90IGNvcnJlY3QgLSBGQlggY2FsY3VsYXRlcyBvdXRlciBhbmQgaW5uZXIgYW5nbGUgaW4gZGVncmVlc1xuXHRcdFx0XHRcdFx0XHQvLyB3aXRoIE91dGVyQW5nbGUgPiBJbm5lckFuZ2xlICYmIE91dGVyQW5nbGUgPD0gTWF0aC5QSVxuXHRcdFx0XHRcdFx0XHQvLyB3aGlsZSB0aHJlZS5qcyB1c2VzIGEgcGVudW1icmEgYmV0d2VlbiAoMCwgMSkgdG8gYXR0ZW51YXRlIHRoZSBpbm5lciBhbmdsZVxuXHRcdFx0XHRcdFx0XHRwZW51bWJyYSA9IE1hdGhVdGlscy5kZWdUb1JhZCggbGlnaHRBdHRyaWJ1dGUuT3V0ZXJBbmdsZS52YWx1ZSApO1xuXHRcdFx0XHRcdFx0XHRwZW51bWJyYSA9IE1hdGgubWF4KCBwZW51bWJyYSwgMSApO1xuXG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdG1vZGVsID0gbmV3IFNwb3RMaWdodCggY29sb3IsIGludGVuc2l0eSwgZGlzdGFuY2UsIGFuZ2xlLCBwZW51bWJyYSwgZGVjYXkgKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHRcdGNvbnNvbGUud2FybiggJ1RIUkVFLkZCWExvYWRlcjogVW5rbm93biBsaWdodCB0eXBlICcgKyBsaWdodEF0dHJpYnV0ZS5MaWdodFR5cGUudmFsdWUgKyAnLCBkZWZhdWx0aW5nIHRvIGEgUG9pbnRMaWdodC4nICk7XG5cdFx0XHRcdFx0XHRtb2RlbCA9IG5ldyBQb2ludExpZ2h0KCBjb2xvciwgaW50ZW5zaXR5ICk7XG5cdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKCBsaWdodEF0dHJpYnV0ZS5DYXN0U2hhZG93cyAhPT0gdW5kZWZpbmVkICYmIGxpZ2h0QXR0cmlidXRlLkNhc3RTaGFkb3dzLnZhbHVlID09PSAxICkge1xuXG5cdFx0XHRcdFx0bW9kZWwuY2FzdFNoYWRvdyA9IHRydWU7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBtb2RlbDtcblxuXHRcdH0sXG5cblx0XHRjcmVhdGVNZXNoOiBmdW5jdGlvbiAoIHJlbGF0aW9uc2hpcHMsIGdlb21ldHJ5TWFwLCBtYXRlcmlhbE1hcCApIHtcblxuXHRcdFx0dmFyIG1vZGVsO1xuXHRcdFx0dmFyIGdlb21ldHJ5ID0gbnVsbDtcblx0XHRcdHZhciBtYXRlcmlhbCA9IG51bGw7XG5cdFx0XHR2YXIgbWF0ZXJpYWxzID0gW107XG5cblx0XHRcdC8vIGdldCBnZW9tZXRyeSBhbmQgbWF0ZXJpYWxzKHMpIGZyb20gY29ubmVjdGlvbnNcblx0XHRcdHJlbGF0aW9uc2hpcHMuY2hpbGRyZW4uZm9yRWFjaCggZnVuY3Rpb24gKCBjaGlsZCApIHtcblxuXHRcdFx0XHRpZiAoIGdlb21ldHJ5TWFwLmhhcyggY2hpbGQuSUQgKSApIHtcblxuXHRcdFx0XHRcdGdlb21ldHJ5ID0gZ2VvbWV0cnlNYXAuZ2V0KCBjaGlsZC5JRCApO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoIG1hdGVyaWFsTWFwLmhhcyggY2hpbGQuSUQgKSApIHtcblxuXHRcdFx0XHRcdG1hdGVyaWFscy5wdXNoKCBtYXRlcmlhbE1hcC5nZXQoIGNoaWxkLklEICkgKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdH0gKTtcblxuXHRcdFx0aWYgKCBtYXRlcmlhbHMubGVuZ3RoID4gMSApIHtcblxuXHRcdFx0XHRtYXRlcmlhbCA9IG1hdGVyaWFscztcblxuXHRcdFx0fSBlbHNlIGlmICggbWF0ZXJpYWxzLmxlbmd0aCA+IDAgKSB7XG5cblx0XHRcdFx0bWF0ZXJpYWwgPSBtYXRlcmlhbHNbIDAgXTtcblxuXHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRtYXRlcmlhbCA9IG5ldyBNZXNoUGhvbmdNYXRlcmlhbCggeyBjb2xvcjogMHhjY2NjY2MgfSApO1xuXHRcdFx0XHRtYXRlcmlhbHMucHVzaCggbWF0ZXJpYWwgKTtcblxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoICdjb2xvcicgaW4gZ2VvbWV0cnkuYXR0cmlidXRlcyApIHtcblxuXHRcdFx0XHRtYXRlcmlhbHMuZm9yRWFjaCggZnVuY3Rpb24gKCBtYXRlcmlhbCApIHtcblxuXHRcdFx0XHRcdG1hdGVyaWFsLnZlcnRleENvbG9ycyA9IHRydWU7XG5cblx0XHRcdFx0fSApO1xuXG5cdFx0XHR9XG5cblx0XHRcdGlmICggZ2VvbWV0cnkuRkJYX0RlZm9ybWVyICkge1xuXG5cdFx0XHRcdG1hdGVyaWFscy5mb3JFYWNoKCBmdW5jdGlvbiAoIG1hdGVyaWFsICkge1xuXG5cdFx0XHRcdFx0bWF0ZXJpYWwuc2tpbm5pbmcgPSB0cnVlO1xuXG5cdFx0XHRcdH0gKTtcblxuXHRcdFx0XHRtb2RlbCA9IG5ldyBTa2lubmVkTWVzaCggZ2VvbWV0cnksIG1hdGVyaWFsICk7XG5cdFx0XHRcdG1vZGVsLm5vcm1hbGl6ZVNraW5XZWlnaHRzKCk7XG5cblx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0bW9kZWwgPSBuZXcgTWVzaCggZ2VvbWV0cnksIG1hdGVyaWFsICk7XG5cblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIG1vZGVsO1xuXG5cdFx0fSxcblxuXHRcdGNyZWF0ZUN1cnZlOiBmdW5jdGlvbiAoIHJlbGF0aW9uc2hpcHMsIGdlb21ldHJ5TWFwICkge1xuXG5cdFx0XHR2YXIgZ2VvbWV0cnkgPSByZWxhdGlvbnNoaXBzLmNoaWxkcmVuLnJlZHVjZSggZnVuY3Rpb24gKCBnZW8sIGNoaWxkICkge1xuXG5cdFx0XHRcdGlmICggZ2VvbWV0cnlNYXAuaGFzKCBjaGlsZC5JRCApICkgZ2VvID0gZ2VvbWV0cnlNYXAuZ2V0KCBjaGlsZC5JRCApO1xuXG5cdFx0XHRcdHJldHVybiBnZW87XG5cblx0XHRcdH0sIG51bGwgKTtcblxuXHRcdFx0Ly8gRkJYIGRvZXMgbm90IGxpc3QgbWF0ZXJpYWxzIGZvciBOdXJicyBsaW5lcywgc28gd2UnbGwganVzdCBwdXQgb3VyIG93biBpbiBoZXJlLlxuXHRcdFx0dmFyIG1hdGVyaWFsID0gbmV3IExpbmVCYXNpY01hdGVyaWFsKCB7IGNvbG9yOiAweDMzMDBmZiwgbGluZXdpZHRoOiAxIH0gKTtcblx0XHRcdHJldHVybiBuZXcgTGluZSggZ2VvbWV0cnksIG1hdGVyaWFsICk7XG5cblx0XHR9LFxuXG5cdFx0Ly8gcGFyc2UgdGhlIG1vZGVsIG5vZGUgZm9yIHRyYW5zZm9ybSBkYXRhXG5cdFx0Z2V0VHJhbnNmb3JtRGF0YTogZnVuY3Rpb24gKCBtb2RlbCwgbW9kZWxOb2RlICkge1xuXG5cdFx0XHR2YXIgdHJhbnNmb3JtRGF0YSA9IHt9O1xuXG5cdFx0XHRpZiAoICdJbmhlcml0VHlwZScgaW4gbW9kZWxOb2RlICkgdHJhbnNmb3JtRGF0YS5pbmhlcml0VHlwZSA9IHBhcnNlSW50KCBtb2RlbE5vZGUuSW5oZXJpdFR5cGUudmFsdWUgKTtcblxuXHRcdFx0aWYgKCAnUm90YXRpb25PcmRlcicgaW4gbW9kZWxOb2RlICkgdHJhbnNmb3JtRGF0YS5ldWxlck9yZGVyID0gZ2V0RXVsZXJPcmRlciggbW9kZWxOb2RlLlJvdGF0aW9uT3JkZXIudmFsdWUgKTtcblx0XHRcdGVsc2UgdHJhbnNmb3JtRGF0YS5ldWxlck9yZGVyID0gJ1pZWCc7XG5cblx0XHRcdGlmICggJ0xjbF9UcmFuc2xhdGlvbicgaW4gbW9kZWxOb2RlICkgdHJhbnNmb3JtRGF0YS50cmFuc2xhdGlvbiA9IG1vZGVsTm9kZS5MY2xfVHJhbnNsYXRpb24udmFsdWU7XG5cblx0XHRcdGlmICggJ1ByZVJvdGF0aW9uJyBpbiBtb2RlbE5vZGUgKSB0cmFuc2Zvcm1EYXRhLnByZVJvdGF0aW9uID0gbW9kZWxOb2RlLlByZVJvdGF0aW9uLnZhbHVlO1xuXHRcdFx0aWYgKCAnTGNsX1JvdGF0aW9uJyBpbiBtb2RlbE5vZGUgKSB0cmFuc2Zvcm1EYXRhLnJvdGF0aW9uID0gbW9kZWxOb2RlLkxjbF9Sb3RhdGlvbi52YWx1ZTtcblx0XHRcdGlmICggJ1Bvc3RSb3RhdGlvbicgaW4gbW9kZWxOb2RlICkgdHJhbnNmb3JtRGF0YS5wb3N0Um90YXRpb24gPSBtb2RlbE5vZGUuUG9zdFJvdGF0aW9uLnZhbHVlO1xuXG5cdFx0XHRpZiAoICdMY2xfU2NhbGluZycgaW4gbW9kZWxOb2RlICkgdHJhbnNmb3JtRGF0YS5zY2FsZSA9IG1vZGVsTm9kZS5MY2xfU2NhbGluZy52YWx1ZTtcblxuXHRcdFx0aWYgKCAnU2NhbGluZ09mZnNldCcgaW4gbW9kZWxOb2RlICkgdHJhbnNmb3JtRGF0YS5zY2FsaW5nT2Zmc2V0ID0gbW9kZWxOb2RlLlNjYWxpbmdPZmZzZXQudmFsdWU7XG5cdFx0XHRpZiAoICdTY2FsaW5nUGl2b3QnIGluIG1vZGVsTm9kZSApIHRyYW5zZm9ybURhdGEuc2NhbGluZ1Bpdm90ID0gbW9kZWxOb2RlLlNjYWxpbmdQaXZvdC52YWx1ZTtcblxuXHRcdFx0aWYgKCAnUm90YXRpb25PZmZzZXQnIGluIG1vZGVsTm9kZSApIHRyYW5zZm9ybURhdGEucm90YXRpb25PZmZzZXQgPSBtb2RlbE5vZGUuUm90YXRpb25PZmZzZXQudmFsdWU7XG5cdFx0XHRpZiAoICdSb3RhdGlvblBpdm90JyBpbiBtb2RlbE5vZGUgKSB0cmFuc2Zvcm1EYXRhLnJvdGF0aW9uUGl2b3QgPSBtb2RlbE5vZGUuUm90YXRpb25QaXZvdC52YWx1ZTtcblxuXHRcdFx0bW9kZWwudXNlckRhdGEudHJhbnNmb3JtRGF0YSA9IHRyYW5zZm9ybURhdGE7XG5cblx0XHR9LFxuXG5cdFx0c2V0TG9va0F0UHJvcGVydGllczogZnVuY3Rpb24gKCBtb2RlbCwgbW9kZWxOb2RlICkge1xuXG5cdFx0XHRpZiAoICdMb29rQXRQcm9wZXJ0eScgaW4gbW9kZWxOb2RlICkge1xuXG5cdFx0XHRcdHZhciBjaGlsZHJlbiA9IGNvbm5lY3Rpb25zLmdldCggbW9kZWwuSUQgKS5jaGlsZHJlbjtcblxuXHRcdFx0XHRjaGlsZHJlbi5mb3JFYWNoKCBmdW5jdGlvbiAoIGNoaWxkICkge1xuXG5cdFx0XHRcdFx0aWYgKCBjaGlsZC5yZWxhdGlvbnNoaXAgPT09ICdMb29rQXRQcm9wZXJ0eScgKSB7XG5cblx0XHRcdFx0XHRcdHZhciBsb29rQXRUYXJnZXQgPSBmYnhUcmVlLk9iamVjdHMuTW9kZWxbIGNoaWxkLklEIF07XG5cblx0XHRcdFx0XHRcdGlmICggJ0xjbF9UcmFuc2xhdGlvbicgaW4gbG9va0F0VGFyZ2V0ICkge1xuXG5cdFx0XHRcdFx0XHRcdHZhciBwb3MgPSBsb29rQXRUYXJnZXQuTGNsX1RyYW5zbGF0aW9uLnZhbHVlO1xuXG5cdFx0XHRcdFx0XHRcdC8vIERpcmVjdGlvbmFsTGlnaHQsIFNwb3RMaWdodFxuXHRcdFx0XHRcdFx0XHRpZiAoIG1vZGVsLnRhcmdldCAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRcdFx0XHRcdFx0bW9kZWwudGFyZ2V0LnBvc2l0aW9uLmZyb21BcnJheSggcG9zICk7XG5cdFx0XHRcdFx0XHRcdFx0c2NlbmVHcmFwaC5hZGQoIG1vZGVsLnRhcmdldCApO1xuXG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7IC8vIENhbWVyYXMgYW5kIG90aGVyIE9iamVjdDNEc1xuXG5cdFx0XHRcdFx0XHRcdFx0bW9kZWwubG9va0F0KCBuZXcgVmVjdG9yMygpLmZyb21BcnJheSggcG9zICkgKTtcblxuXHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHR9ICk7XG5cblx0XHRcdH1cblxuXHRcdH0sXG5cblx0XHRiaW5kU2tlbGV0b246IGZ1bmN0aW9uICggc2tlbGV0b25zLCBnZW9tZXRyeU1hcCwgbW9kZWxNYXAgKSB7XG5cblx0XHRcdHZhciBiaW5kTWF0cmljZXMgPSB0aGlzLnBhcnNlUG9zZU5vZGVzKCk7XG5cblx0XHRcdGZvciAoIHZhciBJRCBpbiBza2VsZXRvbnMgKSB7XG5cblx0XHRcdFx0dmFyIHNrZWxldG9uID0gc2tlbGV0b25zWyBJRCBdO1xuXG5cdFx0XHRcdHZhciBwYXJlbnRzID0gY29ubmVjdGlvbnMuZ2V0KCBwYXJzZUludCggc2tlbGV0b24uSUQgKSApLnBhcmVudHM7XG5cblx0XHRcdFx0cGFyZW50cy5mb3JFYWNoKCBmdW5jdGlvbiAoIHBhcmVudCApIHtcblxuXHRcdFx0XHRcdGlmICggZ2VvbWV0cnlNYXAuaGFzKCBwYXJlbnQuSUQgKSApIHtcblxuXHRcdFx0XHRcdFx0dmFyIGdlb0lEID0gcGFyZW50LklEO1xuXHRcdFx0XHRcdFx0dmFyIGdlb1JlbGF0aW9uc2hpcHMgPSBjb25uZWN0aW9ucy5nZXQoIGdlb0lEICk7XG5cblx0XHRcdFx0XHRcdGdlb1JlbGF0aW9uc2hpcHMucGFyZW50cy5mb3JFYWNoKCBmdW5jdGlvbiAoIGdlb0Nvbm5QYXJlbnQgKSB7XG5cblx0XHRcdFx0XHRcdFx0aWYgKCBtb2RlbE1hcC5oYXMoIGdlb0Nvbm5QYXJlbnQuSUQgKSApIHtcblxuXHRcdFx0XHRcdFx0XHRcdHZhciBtb2RlbCA9IG1vZGVsTWFwLmdldCggZ2VvQ29ublBhcmVudC5JRCApO1xuXG5cdFx0XHRcdFx0XHRcdFx0bW9kZWwuYmluZCggbmV3IFNrZWxldG9uKCBza2VsZXRvbi5ib25lcyApLCBiaW5kTWF0cmljZXNbIGdlb0Nvbm5QYXJlbnQuSUQgXSApO1xuXG5cdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0fSApO1xuXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH0gKTtcblxuXHRcdFx0fVxuXG5cdFx0fSxcblxuXHRcdHBhcnNlUG9zZU5vZGVzOiBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdHZhciBiaW5kTWF0cmljZXMgPSB7fTtcblxuXHRcdFx0aWYgKCAnUG9zZScgaW4gZmJ4VHJlZS5PYmplY3RzICkge1xuXG5cdFx0XHRcdHZhciBCaW5kUG9zZU5vZGUgPSBmYnhUcmVlLk9iamVjdHMuUG9zZTtcblxuXHRcdFx0XHRmb3IgKCB2YXIgbm9kZUlEIGluIEJpbmRQb3NlTm9kZSApIHtcblxuXHRcdFx0XHRcdGlmICggQmluZFBvc2VOb2RlWyBub2RlSUQgXS5hdHRyVHlwZSA9PT0gJ0JpbmRQb3NlJyApIHtcblxuXHRcdFx0XHRcdFx0dmFyIHBvc2VOb2RlcyA9IEJpbmRQb3NlTm9kZVsgbm9kZUlEIF0uUG9zZU5vZGU7XG5cblx0XHRcdFx0XHRcdGlmICggQXJyYXkuaXNBcnJheSggcG9zZU5vZGVzICkgKSB7XG5cblx0XHRcdFx0XHRcdFx0cG9zZU5vZGVzLmZvckVhY2goIGZ1bmN0aW9uICggcG9zZU5vZGUgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHRiaW5kTWF0cmljZXNbIHBvc2VOb2RlLk5vZGUgXSA9IG5ldyBNYXRyaXg0KCkuZnJvbUFycmF5KCBwb3NlTm9kZS5NYXRyaXguYSApO1xuXG5cdFx0XHRcdFx0XHRcdH0gKTtcblxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdFx0XHRiaW5kTWF0cmljZXNbIHBvc2VOb2Rlcy5Ob2RlIF0gPSBuZXcgTWF0cml4NCgpLmZyb21BcnJheSggcG9zZU5vZGVzLk1hdHJpeC5hICk7XG5cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHR9XG5cblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGJpbmRNYXRyaWNlcztcblxuXHRcdH0sXG5cblx0XHQvLyBQYXJzZSBhbWJpZW50IGNvbG9yIGluIEZCWFRyZWUuR2xvYmFsU2V0dGluZ3MgLSBpZiBpdCdzIG5vdCBzZXQgdG8gYmxhY2sgKGRlZmF1bHQpLCBjcmVhdGUgYW4gYW1iaWVudCBsaWdodFxuXHRcdGNyZWF0ZUFtYmllbnRMaWdodDogZnVuY3Rpb24gKCkge1xuXG5cdFx0XHRpZiAoICdHbG9iYWxTZXR0aW5ncycgaW4gZmJ4VHJlZSAmJiAnQW1iaWVudENvbG9yJyBpbiBmYnhUcmVlLkdsb2JhbFNldHRpbmdzICkge1xuXG5cdFx0XHRcdHZhciBhbWJpZW50Q29sb3IgPSBmYnhUcmVlLkdsb2JhbFNldHRpbmdzLkFtYmllbnRDb2xvci52YWx1ZTtcblx0XHRcdFx0dmFyIHIgPSBhbWJpZW50Q29sb3JbIDAgXTtcblx0XHRcdFx0dmFyIGcgPSBhbWJpZW50Q29sb3JbIDEgXTtcblx0XHRcdFx0dmFyIGIgPSBhbWJpZW50Q29sb3JbIDIgXTtcblxuXHRcdFx0XHRpZiAoIHIgIT09IDAgfHwgZyAhPT0gMCB8fCBiICE9PSAwICkge1xuXG5cdFx0XHRcdFx0dmFyIGNvbG9yID0gbmV3IENvbG9yKCByLCBnLCBiICk7XG5cdFx0XHRcdFx0c2NlbmVHcmFwaC5hZGQoIG5ldyBBbWJpZW50TGlnaHQoIGNvbG9yLCAxICkgKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdH1cblxuXHRcdH0sXG5cblx0XHRzZXR1cE1vcnBoTWF0ZXJpYWxzOiBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdHZhciBzY29wZSA9IHRoaXM7XG5cdFx0XHRzY2VuZUdyYXBoLnRyYXZlcnNlKCBmdW5jdGlvbiAoIGNoaWxkICkge1xuXG5cdFx0XHRcdGlmICggY2hpbGQuaXNNZXNoICkge1xuXG5cdFx0XHRcdFx0aWYgKCBjaGlsZC5nZW9tZXRyeS5tb3JwaEF0dHJpYnV0ZXMucG9zaXRpb24gJiYgY2hpbGQuZ2VvbWV0cnkubW9ycGhBdHRyaWJ1dGVzLnBvc2l0aW9uLmxlbmd0aCApIHtcblxuXHRcdFx0XHRcdFx0aWYgKCBBcnJheS5pc0FycmF5KCBjaGlsZC5tYXRlcmlhbCApICkge1xuXG5cdFx0XHRcdFx0XHRcdGNoaWxkLm1hdGVyaWFsLmZvckVhY2goIGZ1bmN0aW9uICggbWF0ZXJpYWwsIGkgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHRzY29wZS5zZXR1cE1vcnBoTWF0ZXJpYWwoIGNoaWxkLCBtYXRlcmlhbCwgaSApO1xuXG5cdFx0XHRcdFx0XHRcdH0gKTtcblxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdFx0XHRzY29wZS5zZXR1cE1vcnBoTWF0ZXJpYWwoIGNoaWxkLCBjaGlsZC5tYXRlcmlhbCApO1xuXG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9ICk7XG5cblx0XHR9LFxuXG5cdFx0c2V0dXBNb3JwaE1hdGVyaWFsOiBmdW5jdGlvbiAoIGNoaWxkLCBtYXRlcmlhbCwgaW5kZXggKSB7XG5cblx0XHRcdHZhciB1dWlkID0gY2hpbGQudXVpZDtcblx0XHRcdHZhciBtYXRVdWlkID0gbWF0ZXJpYWwudXVpZDtcblxuXHRcdFx0Ly8gaWYgYSBnZW9tZXRyeSBoYXMgbW9ycGggdGFyZ2V0cywgaXQgY2Fubm90IHNoYXJlIHRoZSBtYXRlcmlhbCB3aXRoIG90aGVyIGdlb21ldHJpZXNcblx0XHRcdHZhciBzaGFyZWRNYXQgPSBmYWxzZTtcblxuXHRcdFx0c2NlbmVHcmFwaC50cmF2ZXJzZSggZnVuY3Rpb24gKCBub2RlICkge1xuXG5cdFx0XHRcdGlmICggbm9kZS5pc01lc2ggKSB7XG5cblx0XHRcdFx0XHRpZiAoIEFycmF5LmlzQXJyYXkoIG5vZGUubWF0ZXJpYWwgKSApIHtcblxuXHRcdFx0XHRcdFx0bm9kZS5tYXRlcmlhbC5mb3JFYWNoKCBmdW5jdGlvbiAoIG1hdCApIHtcblxuXHRcdFx0XHRcdFx0XHRpZiAoIG1hdC51dWlkID09PSBtYXRVdWlkICYmIG5vZGUudXVpZCAhPT0gdXVpZCApIHNoYXJlZE1hdCA9IHRydWU7XG5cblx0XHRcdFx0XHRcdH0gKTtcblxuXHRcdFx0XHRcdH0gZWxzZSBpZiAoIG5vZGUubWF0ZXJpYWwudXVpZCA9PT0gbWF0VXVpZCAmJiBub2RlLnV1aWQgIT09IHV1aWQgKSBzaGFyZWRNYXQgPSB0cnVlO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fSApO1xuXG5cdFx0XHRpZiAoIHNoYXJlZE1hdCA9PT0gdHJ1ZSApIHtcblxuXHRcdFx0XHR2YXIgY2xvbmVkTWF0ID0gbWF0ZXJpYWwuY2xvbmUoKTtcblx0XHRcdFx0Y2xvbmVkTWF0Lm1vcnBoVGFyZ2V0cyA9IHRydWU7XG5cblx0XHRcdFx0aWYgKCBpbmRleCA9PT0gdW5kZWZpbmVkICkgY2hpbGQubWF0ZXJpYWwgPSBjbG9uZWRNYXQ7XG5cdFx0XHRcdGVsc2UgY2hpbGQubWF0ZXJpYWxbIGluZGV4IF0gPSBjbG9uZWRNYXQ7XG5cblx0XHRcdH0gZWxzZSBtYXRlcmlhbC5tb3JwaFRhcmdldHMgPSB0cnVlO1xuXG5cdFx0fVxuXG5cdH07XG5cblx0Ly8gcGFyc2UgR2VvbWV0cnkgZGF0YSBmcm9tIEZCWFRyZWUgYW5kIHJldHVybiBtYXAgb2YgQnVmZmVyR2VvbWV0cmllc1xuXHRmdW5jdGlvbiBHZW9tZXRyeVBhcnNlcigpIHt9XG5cblx0R2VvbWV0cnlQYXJzZXIucHJvdG90eXBlID0ge1xuXG5cdFx0Y29uc3RydWN0b3I6IEdlb21ldHJ5UGFyc2VyLFxuXG5cdFx0Ly8gUGFyc2Ugbm9kZXMgaW4gRkJYVHJlZS5PYmplY3RzLkdlb21ldHJ5XG5cdFx0cGFyc2U6IGZ1bmN0aW9uICggZGVmb3JtZXJzICkge1xuXG5cdFx0XHR2YXIgZ2VvbWV0cnlNYXAgPSBuZXcgTWFwKCk7XG5cblx0XHRcdGlmICggJ0dlb21ldHJ5JyBpbiBmYnhUcmVlLk9iamVjdHMgKSB7XG5cblx0XHRcdFx0dmFyIGdlb05vZGVzID0gZmJ4VHJlZS5PYmplY3RzLkdlb21ldHJ5O1xuXG5cdFx0XHRcdGZvciAoIHZhciBub2RlSUQgaW4gZ2VvTm9kZXMgKSB7XG5cblx0XHRcdFx0XHR2YXIgcmVsYXRpb25zaGlwcyA9IGNvbm5lY3Rpb25zLmdldCggcGFyc2VJbnQoIG5vZGVJRCApICk7XG5cdFx0XHRcdFx0dmFyIGdlbyA9IHRoaXMucGFyc2VHZW9tZXRyeSggcmVsYXRpb25zaGlwcywgZ2VvTm9kZXNbIG5vZGVJRCBdLCBkZWZvcm1lcnMgKTtcblxuXHRcdFx0XHRcdGdlb21ldHJ5TWFwLnNldCggcGFyc2VJbnQoIG5vZGVJRCApLCBnZW8gKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGdlb21ldHJ5TWFwO1xuXG5cdFx0fSxcblxuXHRcdC8vIFBhcnNlIHNpbmdsZSBub2RlIGluIEZCWFRyZWUuT2JqZWN0cy5HZW9tZXRyeVxuXHRcdHBhcnNlR2VvbWV0cnk6IGZ1bmN0aW9uICggcmVsYXRpb25zaGlwcywgZ2VvTm9kZSwgZGVmb3JtZXJzICkge1xuXG5cdFx0XHRzd2l0Y2ggKCBnZW9Ob2RlLmF0dHJUeXBlICkge1xuXG5cdFx0XHRcdGNhc2UgJ01lc2gnOlxuXHRcdFx0XHRcdHJldHVybiB0aGlzLnBhcnNlTWVzaEdlb21ldHJ5KCByZWxhdGlvbnNoaXBzLCBnZW9Ob2RlLCBkZWZvcm1lcnMgKTtcblx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRjYXNlICdOdXJic0N1cnZlJzpcblx0XHRcdFx0XHRyZXR1cm4gdGhpcy5wYXJzZU51cmJzR2VvbWV0cnkoIGdlb05vZGUgKTtcblx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0fVxuXG5cdFx0fSxcblxuXG5cdFx0Ly8gUGFyc2Ugc2luZ2xlIG5vZGUgbWVzaCBnZW9tZXRyeSBpbiBGQlhUcmVlLk9iamVjdHMuR2VvbWV0cnlcblx0XHRwYXJzZU1lc2hHZW9tZXRyeTogZnVuY3Rpb24gKCByZWxhdGlvbnNoaXBzLCBnZW9Ob2RlLCBkZWZvcm1lcnMgKSB7XG5cblx0XHRcdHZhciBza2VsZXRvbnMgPSBkZWZvcm1lcnMuc2tlbGV0b25zO1xuXHRcdFx0dmFyIG1vcnBoVGFyZ2V0cyA9IFtdO1xuXG5cdFx0XHR2YXIgbW9kZWxOb2RlcyA9IHJlbGF0aW9uc2hpcHMucGFyZW50cy5tYXAoIGZ1bmN0aW9uICggcGFyZW50ICkge1xuXG5cdFx0XHRcdHJldHVybiBmYnhUcmVlLk9iamVjdHMuTW9kZWxbIHBhcmVudC5JRCBdO1xuXG5cdFx0XHR9ICk7XG5cblx0XHRcdC8vIGRvbid0IGNyZWF0ZSBnZW9tZXRyeSBpZiBpdCBpcyBub3QgYXNzb2NpYXRlZCB3aXRoIGFueSBtb2RlbHNcblx0XHRcdGlmICggbW9kZWxOb2Rlcy5sZW5ndGggPT09IDAgKSByZXR1cm47XG5cblx0XHRcdHZhciBza2VsZXRvbiA9IHJlbGF0aW9uc2hpcHMuY2hpbGRyZW4ucmVkdWNlKCBmdW5jdGlvbiAoIHNrZWxldG9uLCBjaGlsZCApIHtcblxuXHRcdFx0XHRpZiAoIHNrZWxldG9uc1sgY2hpbGQuSUQgXSAhPT0gdW5kZWZpbmVkICkgc2tlbGV0b24gPSBza2VsZXRvbnNbIGNoaWxkLklEIF07XG5cblx0XHRcdFx0cmV0dXJuIHNrZWxldG9uO1xuXG5cdFx0XHR9LCBudWxsICk7XG5cblx0XHRcdHJlbGF0aW9uc2hpcHMuY2hpbGRyZW4uZm9yRWFjaCggZnVuY3Rpb24gKCBjaGlsZCApIHtcblxuXHRcdFx0XHRpZiAoIGRlZm9ybWVycy5tb3JwaFRhcmdldHNbIGNoaWxkLklEIF0gIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0XHRcdG1vcnBoVGFyZ2V0cy5wdXNoKCBkZWZvcm1lcnMubW9ycGhUYXJnZXRzWyBjaGlsZC5JRCBdICk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9ICk7XG5cblx0XHRcdC8vIEFzc3VtZSBvbmUgbW9kZWwgYW5kIGdldCB0aGUgcHJlUm90YXRpb24gZnJvbSB0aGF0XG5cdFx0XHQvLyBpZiB0aGVyZSBpcyBtb3JlIHRoYW4gb25lIG1vZGVsIGFzc29jaWF0ZWQgd2l0aCB0aGUgZ2VvbWV0cnkgdGhpcyBtYXkgY2F1c2UgcHJvYmxlbXNcblx0XHRcdHZhciBtb2RlbE5vZGUgPSBtb2RlbE5vZGVzWyAwIF07XG5cblx0XHRcdHZhciB0cmFuc2Zvcm1EYXRhID0ge307XG5cblx0XHRcdGlmICggJ1JvdGF0aW9uT3JkZXInIGluIG1vZGVsTm9kZSApIHRyYW5zZm9ybURhdGEuZXVsZXJPcmRlciA9IGdldEV1bGVyT3JkZXIoIG1vZGVsTm9kZS5Sb3RhdGlvbk9yZGVyLnZhbHVlICk7XG5cdFx0XHRpZiAoICdJbmhlcml0VHlwZScgaW4gbW9kZWxOb2RlICkgdHJhbnNmb3JtRGF0YS5pbmhlcml0VHlwZSA9IHBhcnNlSW50KCBtb2RlbE5vZGUuSW5oZXJpdFR5cGUudmFsdWUgKTtcblxuXHRcdFx0aWYgKCAnR2VvbWV0cmljVHJhbnNsYXRpb24nIGluIG1vZGVsTm9kZSApIHRyYW5zZm9ybURhdGEudHJhbnNsYXRpb24gPSBtb2RlbE5vZGUuR2VvbWV0cmljVHJhbnNsYXRpb24udmFsdWU7XG5cdFx0XHRpZiAoICdHZW9tZXRyaWNSb3RhdGlvbicgaW4gbW9kZWxOb2RlICkgdHJhbnNmb3JtRGF0YS5yb3RhdGlvbiA9IG1vZGVsTm9kZS5HZW9tZXRyaWNSb3RhdGlvbi52YWx1ZTtcblx0XHRcdGlmICggJ0dlb21ldHJpY1NjYWxpbmcnIGluIG1vZGVsTm9kZSApIHRyYW5zZm9ybURhdGEuc2NhbGUgPSBtb2RlbE5vZGUuR2VvbWV0cmljU2NhbGluZy52YWx1ZTtcblxuXHRcdFx0dmFyIHRyYW5zZm9ybSA9IGdlbmVyYXRlVHJhbnNmb3JtKCB0cmFuc2Zvcm1EYXRhICk7XG5cblx0XHRcdHJldHVybiB0aGlzLmdlbkdlb21ldHJ5KCBnZW9Ob2RlLCBza2VsZXRvbiwgbW9ycGhUYXJnZXRzLCB0cmFuc2Zvcm0gKTtcblxuXHRcdH0sXG5cblx0XHQvLyBHZW5lcmF0ZSBhIEJ1ZmZlckdlb21ldHJ5IGZyb20gYSBub2RlIGluIEZCWFRyZWUuT2JqZWN0cy5HZW9tZXRyeVxuXHRcdGdlbkdlb21ldHJ5OiBmdW5jdGlvbiAoIGdlb05vZGUsIHNrZWxldG9uLCBtb3JwaFRhcmdldHMsIHByZVRyYW5zZm9ybSApIHtcblxuXHRcdFx0dmFyIGdlbyA9IG5ldyBCdWZmZXJHZW9tZXRyeSgpO1xuXHRcdFx0aWYgKCBnZW9Ob2RlLmF0dHJOYW1lICkgZ2VvLm5hbWUgPSBnZW9Ob2RlLmF0dHJOYW1lO1xuXG5cdFx0XHR2YXIgZ2VvSW5mbyA9IHRoaXMucGFyc2VHZW9Ob2RlKCBnZW9Ob2RlLCBza2VsZXRvbiApO1xuXHRcdFx0dmFyIGJ1ZmZlcnMgPSB0aGlzLmdlbkJ1ZmZlcnMoIGdlb0luZm8gKTtcblxuXHRcdFx0dmFyIHBvc2l0aW9uQXR0cmlidXRlID0gbmV3IEZsb2F0MzJCdWZmZXJBdHRyaWJ1dGUoIGJ1ZmZlcnMudmVydGV4LCAzICk7XG5cblx0XHRcdHBvc2l0aW9uQXR0cmlidXRlLmFwcGx5TWF0cml4NCggcHJlVHJhbnNmb3JtICk7XG5cblx0XHRcdGdlby5zZXRBdHRyaWJ1dGUoICdwb3NpdGlvbicsIHBvc2l0aW9uQXR0cmlidXRlICk7XG5cblx0XHRcdGlmICggYnVmZmVycy5jb2xvcnMubGVuZ3RoID4gMCApIHtcblxuXHRcdFx0XHRnZW8uc2V0QXR0cmlidXRlKCAnY29sb3InLCBuZXcgRmxvYXQzMkJ1ZmZlckF0dHJpYnV0ZSggYnVmZmVycy5jb2xvcnMsIDMgKSApO1xuXG5cdFx0XHR9XG5cblx0XHRcdGlmICggc2tlbGV0b24gKSB7XG5cblx0XHRcdFx0Z2VvLnNldEF0dHJpYnV0ZSggJ3NraW5JbmRleCcsIG5ldyBVaW50MTZCdWZmZXJBdHRyaWJ1dGUoIGJ1ZmZlcnMud2VpZ2h0c0luZGljZXMsIDQgKSApO1xuXG5cdFx0XHRcdGdlby5zZXRBdHRyaWJ1dGUoICdza2luV2VpZ2h0JywgbmV3IEZsb2F0MzJCdWZmZXJBdHRyaWJ1dGUoIGJ1ZmZlcnMudmVydGV4V2VpZ2h0cywgNCApICk7XG5cblx0XHRcdFx0Ly8gdXNlZCBsYXRlciB0byBiaW5kIHRoZSBza2VsZXRvbiB0byB0aGUgbW9kZWxcblx0XHRcdFx0Z2VvLkZCWF9EZWZvcm1lciA9IHNrZWxldG9uO1xuXG5cdFx0XHR9XG5cblx0XHRcdGlmICggYnVmZmVycy5ub3JtYWwubGVuZ3RoID4gMCApIHtcblxuXHRcdFx0XHR2YXIgbm9ybWFsTWF0cml4ID0gbmV3IE1hdHJpeDMoKS5nZXROb3JtYWxNYXRyaXgoIHByZVRyYW5zZm9ybSApO1xuXG5cdFx0XHRcdHZhciBub3JtYWxBdHRyaWJ1dGUgPSBuZXcgRmxvYXQzMkJ1ZmZlckF0dHJpYnV0ZSggYnVmZmVycy5ub3JtYWwsIDMgKTtcblx0XHRcdFx0bm9ybWFsQXR0cmlidXRlLmFwcGx5Tm9ybWFsTWF0cml4KCBub3JtYWxNYXRyaXggKTtcblxuXHRcdFx0XHRnZW8uc2V0QXR0cmlidXRlKCAnbm9ybWFsJywgbm9ybWFsQXR0cmlidXRlICk7XG5cblx0XHRcdH1cblxuXHRcdFx0YnVmZmVycy51dnMuZm9yRWFjaCggZnVuY3Rpb24gKCB1dkJ1ZmZlciwgaSApIHtcblxuXHRcdFx0XHQvLyBzdWJzZXF1ZW50IHV2IGJ1ZmZlcnMgYXJlIGNhbGxlZCAndXYxJywgJ3V2MicsIC4uLlxuXHRcdFx0XHR2YXIgbmFtZSA9ICd1dicgKyAoIGkgKyAxICkudG9TdHJpbmcoKTtcblxuXHRcdFx0XHQvLyB0aGUgZmlyc3QgdXYgYnVmZmVyIGlzIGp1c3QgY2FsbGVkICd1didcblx0XHRcdFx0aWYgKCBpID09PSAwICkge1xuXG5cdFx0XHRcdFx0bmFtZSA9ICd1dic7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdGdlby5zZXRBdHRyaWJ1dGUoIG5hbWUsIG5ldyBGbG9hdDMyQnVmZmVyQXR0cmlidXRlKCBidWZmZXJzLnV2c1sgaSBdLCAyICkgKTtcblxuXHRcdFx0fSApO1xuXG5cdFx0XHRpZiAoIGdlb0luZm8ubWF0ZXJpYWwgJiYgZ2VvSW5mby5tYXRlcmlhbC5tYXBwaW5nVHlwZSAhPT0gJ0FsbFNhbWUnICkge1xuXG5cdFx0XHRcdC8vIENvbnZlcnQgdGhlIG1hdGVyaWFsIGluZGljZXMgb2YgZWFjaCB2ZXJ0ZXggaW50byByZW5kZXJpbmcgZ3JvdXBzIG9uIHRoZSBnZW9tZXRyeS5cblx0XHRcdFx0dmFyIHByZXZNYXRlcmlhbEluZGV4ID0gYnVmZmVycy5tYXRlcmlhbEluZGV4WyAwIF07XG5cdFx0XHRcdHZhciBzdGFydEluZGV4ID0gMDtcblxuXHRcdFx0XHRidWZmZXJzLm1hdGVyaWFsSW5kZXguZm9yRWFjaCggZnVuY3Rpb24gKCBjdXJyZW50SW5kZXgsIGkgKSB7XG5cblx0XHRcdFx0XHRpZiAoIGN1cnJlbnRJbmRleCAhPT0gcHJldk1hdGVyaWFsSW5kZXggKSB7XG5cblx0XHRcdFx0XHRcdGdlby5hZGRHcm91cCggc3RhcnRJbmRleCwgaSAtIHN0YXJ0SW5kZXgsIHByZXZNYXRlcmlhbEluZGV4ICk7XG5cblx0XHRcdFx0XHRcdHByZXZNYXRlcmlhbEluZGV4ID0gY3VycmVudEluZGV4O1xuXHRcdFx0XHRcdFx0c3RhcnRJbmRleCA9IGk7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fSApO1xuXG5cdFx0XHRcdC8vIHRoZSBsb29wIGFib3ZlIGRvZXNuJ3QgYWRkIHRoZSBsYXN0IGdyb3VwLCBkbyB0aGF0IGhlcmUuXG5cdFx0XHRcdGlmICggZ2VvLmdyb3Vwcy5sZW5ndGggPiAwICkge1xuXG5cdFx0XHRcdFx0dmFyIGxhc3RHcm91cCA9IGdlby5ncm91cHNbIGdlby5ncm91cHMubGVuZ3RoIC0gMSBdO1xuXHRcdFx0XHRcdHZhciBsYXN0SW5kZXggPSBsYXN0R3JvdXAuc3RhcnQgKyBsYXN0R3JvdXAuY291bnQ7XG5cblx0XHRcdFx0XHRpZiAoIGxhc3RJbmRleCAhPT0gYnVmZmVycy5tYXRlcmlhbEluZGV4Lmxlbmd0aCApIHtcblxuXHRcdFx0XHRcdFx0Z2VvLmFkZEdyb3VwKCBsYXN0SW5kZXgsIGJ1ZmZlcnMubWF0ZXJpYWxJbmRleC5sZW5ndGggLSBsYXN0SW5kZXgsIHByZXZNYXRlcmlhbEluZGV4ICk7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIGNhc2Ugd2hlcmUgdGhlcmUgYXJlIG11bHRpcGxlIG1hdGVyaWFscyBidXQgdGhlIHdob2xlIGdlb21ldHJ5IGlzIG9ubHlcblx0XHRcdFx0Ly8gdXNpbmcgb25lIG9mIHRoZW1cblx0XHRcdFx0aWYgKCBnZW8uZ3JvdXBzLmxlbmd0aCA9PT0gMCApIHtcblxuXHRcdFx0XHRcdGdlby5hZGRHcm91cCggMCwgYnVmZmVycy5tYXRlcmlhbEluZGV4Lmxlbmd0aCwgYnVmZmVycy5tYXRlcmlhbEluZGV4WyAwIF0gKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdH1cblxuXHRcdFx0dGhpcy5hZGRNb3JwaFRhcmdldHMoIGdlbywgZ2VvTm9kZSwgbW9ycGhUYXJnZXRzLCBwcmVUcmFuc2Zvcm0gKTtcblxuXHRcdFx0cmV0dXJuIGdlbztcblxuXHRcdH0sXG5cblx0XHRwYXJzZUdlb05vZGU6IGZ1bmN0aW9uICggZ2VvTm9kZSwgc2tlbGV0b24gKSB7XG5cblx0XHRcdHZhciBnZW9JbmZvID0ge307XG5cblx0XHRcdGdlb0luZm8udmVydGV4UG9zaXRpb25zID0gKCBnZW9Ob2RlLlZlcnRpY2VzICE9PSB1bmRlZmluZWQgKSA/IGdlb05vZGUuVmVydGljZXMuYSA6IFtdO1xuXHRcdFx0Z2VvSW5mby52ZXJ0ZXhJbmRpY2VzID0gKCBnZW9Ob2RlLlBvbHlnb25WZXJ0ZXhJbmRleCAhPT0gdW5kZWZpbmVkICkgPyBnZW9Ob2RlLlBvbHlnb25WZXJ0ZXhJbmRleC5hIDogW107XG5cblx0XHRcdGlmICggZ2VvTm9kZS5MYXllckVsZW1lbnRDb2xvciApIHtcblxuXHRcdFx0XHRnZW9JbmZvLmNvbG9yID0gdGhpcy5wYXJzZVZlcnRleENvbG9ycyggZ2VvTm9kZS5MYXllckVsZW1lbnRDb2xvclsgMCBdICk7XG5cblx0XHRcdH1cblxuXHRcdFx0aWYgKCBnZW9Ob2RlLkxheWVyRWxlbWVudE1hdGVyaWFsICkge1xuXG5cdFx0XHRcdGdlb0luZm8ubWF0ZXJpYWwgPSB0aGlzLnBhcnNlTWF0ZXJpYWxJbmRpY2VzKCBnZW9Ob2RlLkxheWVyRWxlbWVudE1hdGVyaWFsWyAwIF0gKTtcblxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIGdlb05vZGUuTGF5ZXJFbGVtZW50Tm9ybWFsICkge1xuXG5cdFx0XHRcdGdlb0luZm8ubm9ybWFsID0gdGhpcy5wYXJzZU5vcm1hbHMoIGdlb05vZGUuTGF5ZXJFbGVtZW50Tm9ybWFsWyAwIF0gKTtcblxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIGdlb05vZGUuTGF5ZXJFbGVtZW50VVYgKSB7XG5cblx0XHRcdFx0Z2VvSW5mby51diA9IFtdO1xuXG5cdFx0XHRcdHZhciBpID0gMDtcblx0XHRcdFx0d2hpbGUgKCBnZW9Ob2RlLkxheWVyRWxlbWVudFVWWyBpIF0gKSB7XG5cblx0XHRcdFx0XHRpZiAoIGdlb05vZGUuTGF5ZXJFbGVtZW50VVZbIGkgXS5VViApIHtcblxuXHRcdFx0XHRcdFx0Z2VvSW5mby51di5wdXNoKCB0aGlzLnBhcnNlVVZzKCBnZW9Ob2RlLkxheWVyRWxlbWVudFVWWyBpIF0gKSApO1xuXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0aSArKztcblxuXHRcdFx0XHR9XG5cblx0XHRcdH1cblxuXHRcdFx0Z2VvSW5mby53ZWlnaHRUYWJsZSA9IHt9O1xuXG5cdFx0XHRpZiAoIHNrZWxldG9uICE9PSBudWxsICkge1xuXG5cdFx0XHRcdGdlb0luZm8uc2tlbGV0b24gPSBza2VsZXRvbjtcblxuXHRcdFx0XHRza2VsZXRvbi5yYXdCb25lcy5mb3JFYWNoKCBmdW5jdGlvbiAoIHJhd0JvbmUsIGkgKSB7XG5cblx0XHRcdFx0XHQvLyBsb29wIG92ZXIgdGhlIGJvbmUncyB2ZXJ0ZXggaW5kaWNlcyBhbmQgd2VpZ2h0c1xuXHRcdFx0XHRcdHJhd0JvbmUuaW5kaWNlcy5mb3JFYWNoKCBmdW5jdGlvbiAoIGluZGV4LCBqICkge1xuXG5cdFx0XHRcdFx0XHRpZiAoIGdlb0luZm8ud2VpZ2h0VGFibGVbIGluZGV4IF0gPT09IHVuZGVmaW5lZCApIGdlb0luZm8ud2VpZ2h0VGFibGVbIGluZGV4IF0gPSBbXTtcblxuXHRcdFx0XHRcdFx0Z2VvSW5mby53ZWlnaHRUYWJsZVsgaW5kZXggXS5wdXNoKCB7XG5cblx0XHRcdFx0XHRcdFx0aWQ6IGksXG5cdFx0XHRcdFx0XHRcdHdlaWdodDogcmF3Qm9uZS53ZWlnaHRzWyBqIF0sXG5cblx0XHRcdFx0XHRcdH0gKTtcblxuXHRcdFx0XHRcdH0gKTtcblxuXHRcdFx0XHR9ICk7XG5cblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGdlb0luZm87XG5cblx0XHR9LFxuXG5cdFx0Z2VuQnVmZmVyczogZnVuY3Rpb24gKCBnZW9JbmZvICkge1xuXG5cdFx0XHR2YXIgYnVmZmVycyA9IHtcblx0XHRcdFx0dmVydGV4OiBbXSxcblx0XHRcdFx0bm9ybWFsOiBbXSxcblx0XHRcdFx0Y29sb3JzOiBbXSxcblx0XHRcdFx0dXZzOiBbXSxcblx0XHRcdFx0bWF0ZXJpYWxJbmRleDogW10sXG5cdFx0XHRcdHZlcnRleFdlaWdodHM6IFtdLFxuXHRcdFx0XHR3ZWlnaHRzSW5kaWNlczogW10sXG5cdFx0XHR9O1xuXG5cdFx0XHR2YXIgcG9seWdvbkluZGV4ID0gMDtcblx0XHRcdHZhciBmYWNlTGVuZ3RoID0gMDtcblx0XHRcdHZhciBkaXNwbGF5ZWRXZWlnaHRzV2FybmluZyA9IGZhbHNlO1xuXG5cdFx0XHQvLyB0aGVzZSB3aWxsIGhvbGQgZGF0YSBmb3IgYSBzaW5nbGUgZmFjZVxuXHRcdFx0dmFyIGZhY2VQb3NpdGlvbkluZGV4ZXMgPSBbXTtcblx0XHRcdHZhciBmYWNlTm9ybWFscyA9IFtdO1xuXHRcdFx0dmFyIGZhY2VDb2xvcnMgPSBbXTtcblx0XHRcdHZhciBmYWNlVVZzID0gW107XG5cdFx0XHR2YXIgZmFjZVdlaWdodHMgPSBbXTtcblx0XHRcdHZhciBmYWNlV2VpZ2h0SW5kaWNlcyA9IFtdO1xuXG5cdFx0XHR2YXIgc2NvcGUgPSB0aGlzO1xuXHRcdFx0Z2VvSW5mby52ZXJ0ZXhJbmRpY2VzLmZvckVhY2goIGZ1bmN0aW9uICggdmVydGV4SW5kZXgsIHBvbHlnb25WZXJ0ZXhJbmRleCApIHtcblxuXHRcdFx0XHR2YXIgZW5kT2ZGYWNlID0gZmFsc2U7XG5cblx0XHRcdFx0Ly8gRmFjZSBpbmRleCBhbmQgdmVydGV4IGluZGV4IGFycmF5cyBhcmUgY29tYmluZWQgaW4gYSBzaW5nbGUgYXJyYXlcblx0XHRcdFx0Ly8gQSBjdWJlIHdpdGggcXVhZCBmYWNlcyBsb29rcyBsaWtlIHRoaXM6XG5cdFx0XHRcdC8vIFBvbHlnb25WZXJ0ZXhJbmRleDogKjI0IHtcblx0XHRcdFx0Ly8gIGE6IDAsIDEsIDMsIC0zLCAyLCAzLCA1LCAtNSwgNCwgNSwgNywgLTcsIDYsIDcsIDEsIC0xLCAxLCA3LCA1LCAtNCwgNiwgMCwgMiwgLTVcblx0XHRcdFx0Ly8gIH1cblx0XHRcdFx0Ly8gTmVnYXRpdmUgbnVtYmVycyBtYXJrIHRoZSBlbmQgb2YgYSBmYWNlIC0gZmlyc3QgZmFjZSBoZXJlIGlzIDAsIDEsIDMsIC0zXG5cdFx0XHRcdC8vIHRvIGZpbmQgaW5kZXggb2YgbGFzdCB2ZXJ0ZXggYml0IHNoaWZ0IHRoZSBpbmRleDogXiAtIDFcblx0XHRcdFx0aWYgKCB2ZXJ0ZXhJbmRleCA8IDAgKSB7XG5cblx0XHRcdFx0XHR2ZXJ0ZXhJbmRleCA9IHZlcnRleEluZGV4IF4gLSAxOyAvLyBlcXVpdmFsZW50IHRvICggeCAqIC0xICkgLSAxXG5cdFx0XHRcdFx0ZW5kT2ZGYWNlID0gdHJ1ZTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdFx0dmFyIHdlaWdodEluZGljZXMgPSBbXTtcblx0XHRcdFx0dmFyIHdlaWdodHMgPSBbXTtcblxuXHRcdFx0XHRmYWNlUG9zaXRpb25JbmRleGVzLnB1c2goIHZlcnRleEluZGV4ICogMywgdmVydGV4SW5kZXggKiAzICsgMSwgdmVydGV4SW5kZXggKiAzICsgMiApO1xuXG5cdFx0XHRcdGlmICggZ2VvSW5mby5jb2xvciApIHtcblxuXHRcdFx0XHRcdHZhciBkYXRhID0gZ2V0RGF0YSggcG9seWdvblZlcnRleEluZGV4LCBwb2x5Z29uSW5kZXgsIHZlcnRleEluZGV4LCBnZW9JbmZvLmNvbG9yICk7XG5cblx0XHRcdFx0XHRmYWNlQ29sb3JzLnB1c2goIGRhdGFbIDAgXSwgZGF0YVsgMSBdLCBkYXRhWyAyIF0gKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKCBnZW9JbmZvLnNrZWxldG9uICkge1xuXG5cdFx0XHRcdFx0aWYgKCBnZW9JbmZvLndlaWdodFRhYmxlWyB2ZXJ0ZXhJbmRleCBdICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0XHRcdGdlb0luZm8ud2VpZ2h0VGFibGVbIHZlcnRleEluZGV4IF0uZm9yRWFjaCggZnVuY3Rpb24gKCB3dCApIHtcblxuXHRcdFx0XHRcdFx0XHR3ZWlnaHRzLnB1c2goIHd0LndlaWdodCApO1xuXHRcdFx0XHRcdFx0XHR3ZWlnaHRJbmRpY2VzLnB1c2goIHd0LmlkICk7XG5cblx0XHRcdFx0XHRcdH0gKTtcblxuXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0aWYgKCB3ZWlnaHRzLmxlbmd0aCA+IDQgKSB7XG5cblx0XHRcdFx0XHRcdGlmICggISBkaXNwbGF5ZWRXZWlnaHRzV2FybmluZyApIHtcblxuXHRcdFx0XHRcdFx0XHRjb25zb2xlLndhcm4oICdUSFJFRS5GQlhMb2FkZXI6IFZlcnRleCBoYXMgbW9yZSB0aGFuIDQgc2tpbm5pbmcgd2VpZ2h0cyBhc3NpZ25lZCB0byB2ZXJ0ZXguIERlbGV0aW5nIGFkZGl0aW9uYWwgd2VpZ2h0cy4nICk7XG5cdFx0XHRcdFx0XHRcdGRpc3BsYXllZFdlaWdodHNXYXJuaW5nID0gdHJ1ZTtcblxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHR2YXIgd0luZGV4ID0gWyAwLCAwLCAwLCAwIF07XG5cdFx0XHRcdFx0XHR2YXIgV2VpZ2h0ID0gWyAwLCAwLCAwLCAwIF07XG5cblx0XHRcdFx0XHRcdHdlaWdodHMuZm9yRWFjaCggZnVuY3Rpb24gKCB3ZWlnaHQsIHdlaWdodEluZGV4ICkge1xuXG5cdFx0XHRcdFx0XHRcdHZhciBjdXJyZW50V2VpZ2h0ID0gd2VpZ2h0O1xuXHRcdFx0XHRcdFx0XHR2YXIgY3VycmVudEluZGV4ID0gd2VpZ2h0SW5kaWNlc1sgd2VpZ2h0SW5kZXggXTtcblxuXHRcdFx0XHRcdFx0XHRXZWlnaHQuZm9yRWFjaCggZnVuY3Rpb24gKCBjb21wYXJlZFdlaWdodCwgY29tcGFyZWRXZWlnaHRJbmRleCwgY29tcGFyZWRXZWlnaHRBcnJheSApIHtcblxuXHRcdFx0XHRcdFx0XHRcdGlmICggY3VycmVudFdlaWdodCA+IGNvbXBhcmVkV2VpZ2h0ICkge1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRjb21wYXJlZFdlaWdodEFycmF5WyBjb21wYXJlZFdlaWdodEluZGV4IF0gPSBjdXJyZW50V2VpZ2h0O1xuXHRcdFx0XHRcdFx0XHRcdFx0Y3VycmVudFdlaWdodCA9IGNvbXBhcmVkV2VpZ2h0O1xuXG5cdFx0XHRcdFx0XHRcdFx0XHR2YXIgdG1wID0gd0luZGV4WyBjb21wYXJlZFdlaWdodEluZGV4IF07XG5cdFx0XHRcdFx0XHRcdFx0XHR3SW5kZXhbIGNvbXBhcmVkV2VpZ2h0SW5kZXggXSA9IGN1cnJlbnRJbmRleDtcblx0XHRcdFx0XHRcdFx0XHRcdGN1cnJlbnRJbmRleCA9IHRtcDtcblxuXHRcdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHR9ICk7XG5cblx0XHRcdFx0XHRcdH0gKTtcblxuXHRcdFx0XHRcdFx0d2VpZ2h0SW5kaWNlcyA9IHdJbmRleDtcblx0XHRcdFx0XHRcdHdlaWdodHMgPSBXZWlnaHQ7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBpZiB0aGUgd2VpZ2h0IGFycmF5IGlzIHNob3J0ZXIgdGhhbiA0IHBhZCB3aXRoIDBzXG5cdFx0XHRcdFx0d2hpbGUgKCB3ZWlnaHRzLmxlbmd0aCA8IDQgKSB7XG5cblx0XHRcdFx0XHRcdHdlaWdodHMucHVzaCggMCApO1xuXHRcdFx0XHRcdFx0d2VpZ2h0SW5kaWNlcy5wdXNoKCAwICk7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRmb3IgKCB2YXIgaSA9IDA7IGkgPCA0OyArKyBpICkge1xuXG5cdFx0XHRcdFx0XHRmYWNlV2VpZ2h0cy5wdXNoKCB3ZWlnaHRzWyBpIF0gKTtcblx0XHRcdFx0XHRcdGZhY2VXZWlnaHRJbmRpY2VzLnB1c2goIHdlaWdodEluZGljZXNbIGkgXSApO1xuXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoIGdlb0luZm8ubm9ybWFsICkge1xuXG5cdFx0XHRcdFx0dmFyIGRhdGEgPSBnZXREYXRhKCBwb2x5Z29uVmVydGV4SW5kZXgsIHBvbHlnb25JbmRleCwgdmVydGV4SW5kZXgsIGdlb0luZm8ubm9ybWFsICk7XG5cblx0XHRcdFx0XHRmYWNlTm9ybWFscy5wdXNoKCBkYXRhWyAwIF0sIGRhdGFbIDEgXSwgZGF0YVsgMiBdICk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmICggZ2VvSW5mby5tYXRlcmlhbCAmJiBnZW9JbmZvLm1hdGVyaWFsLm1hcHBpbmdUeXBlICE9PSAnQWxsU2FtZScgKSB7XG5cblx0XHRcdFx0XHR2YXIgbWF0ZXJpYWxJbmRleCA9IGdldERhdGEoIHBvbHlnb25WZXJ0ZXhJbmRleCwgcG9seWdvbkluZGV4LCB2ZXJ0ZXhJbmRleCwgZ2VvSW5mby5tYXRlcmlhbCApWyAwIF07XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmICggZ2VvSW5mby51diApIHtcblxuXHRcdFx0XHRcdGdlb0luZm8udXYuZm9yRWFjaCggZnVuY3Rpb24gKCB1diwgaSApIHtcblxuXHRcdFx0XHRcdFx0dmFyIGRhdGEgPSBnZXREYXRhKCBwb2x5Z29uVmVydGV4SW5kZXgsIHBvbHlnb25JbmRleCwgdmVydGV4SW5kZXgsIHV2ICk7XG5cblx0XHRcdFx0XHRcdGlmICggZmFjZVVWc1sgaSBdID09PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0XHRcdFx0ZmFjZVVWc1sgaSBdID0gW107XG5cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0ZmFjZVVWc1sgaSBdLnB1c2goIGRhdGFbIDAgXSApO1xuXHRcdFx0XHRcdFx0ZmFjZVVWc1sgaSBdLnB1c2goIGRhdGFbIDEgXSApO1xuXG5cdFx0XHRcdFx0fSApO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRmYWNlTGVuZ3RoICsrO1xuXG5cdFx0XHRcdGlmICggZW5kT2ZGYWNlICkge1xuXG5cdFx0XHRcdFx0c2NvcGUuZ2VuRmFjZSggYnVmZmVycywgZ2VvSW5mbywgZmFjZVBvc2l0aW9uSW5kZXhlcywgbWF0ZXJpYWxJbmRleCwgZmFjZU5vcm1hbHMsIGZhY2VDb2xvcnMsIGZhY2VVVnMsIGZhY2VXZWlnaHRzLCBmYWNlV2VpZ2h0SW5kaWNlcywgZmFjZUxlbmd0aCApO1xuXG5cdFx0XHRcdFx0cG9seWdvbkluZGV4ICsrO1xuXHRcdFx0XHRcdGZhY2VMZW5ndGggPSAwO1xuXG5cdFx0XHRcdFx0Ly8gcmVzZXQgYXJyYXlzIGZvciB0aGUgbmV4dCBmYWNlXG5cdFx0XHRcdFx0ZmFjZVBvc2l0aW9uSW5kZXhlcyA9IFtdO1xuXHRcdFx0XHRcdGZhY2VOb3JtYWxzID0gW107XG5cdFx0XHRcdFx0ZmFjZUNvbG9ycyA9IFtdO1xuXHRcdFx0XHRcdGZhY2VVVnMgPSBbXTtcblx0XHRcdFx0XHRmYWNlV2VpZ2h0cyA9IFtdO1xuXHRcdFx0XHRcdGZhY2VXZWlnaHRJbmRpY2VzID0gW107XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9ICk7XG5cblx0XHRcdHJldHVybiBidWZmZXJzO1xuXG5cdFx0fSxcblxuXHRcdC8vIEdlbmVyYXRlIGRhdGEgZm9yIGEgc2luZ2xlIGZhY2UgaW4gYSBnZW9tZXRyeS4gSWYgdGhlIGZhY2UgaXMgYSBxdWFkIHRoZW4gc3BsaXQgaXQgaW50byAyIHRyaXNcblx0XHRnZW5GYWNlOiBmdW5jdGlvbiAoIGJ1ZmZlcnMsIGdlb0luZm8sIGZhY2VQb3NpdGlvbkluZGV4ZXMsIG1hdGVyaWFsSW5kZXgsIGZhY2VOb3JtYWxzLCBmYWNlQ29sb3JzLCBmYWNlVVZzLCBmYWNlV2VpZ2h0cywgZmFjZVdlaWdodEluZGljZXMsIGZhY2VMZW5ndGggKSB7XG5cblx0XHRcdGZvciAoIHZhciBpID0gMjsgaSA8IGZhY2VMZW5ndGg7IGkgKysgKSB7XG5cblx0XHRcdFx0YnVmZmVycy52ZXJ0ZXgucHVzaCggZ2VvSW5mby52ZXJ0ZXhQb3NpdGlvbnNbIGZhY2VQb3NpdGlvbkluZGV4ZXNbIDAgXSBdICk7XG5cdFx0XHRcdGJ1ZmZlcnMudmVydGV4LnB1c2goIGdlb0luZm8udmVydGV4UG9zaXRpb25zWyBmYWNlUG9zaXRpb25JbmRleGVzWyAxIF0gXSApO1xuXHRcdFx0XHRidWZmZXJzLnZlcnRleC5wdXNoKCBnZW9JbmZvLnZlcnRleFBvc2l0aW9uc1sgZmFjZVBvc2l0aW9uSW5kZXhlc1sgMiBdIF0gKTtcblxuXHRcdFx0XHRidWZmZXJzLnZlcnRleC5wdXNoKCBnZW9JbmZvLnZlcnRleFBvc2l0aW9uc1sgZmFjZVBvc2l0aW9uSW5kZXhlc1sgKCBpIC0gMSApICogMyBdIF0gKTtcblx0XHRcdFx0YnVmZmVycy52ZXJ0ZXgucHVzaCggZ2VvSW5mby52ZXJ0ZXhQb3NpdGlvbnNbIGZhY2VQb3NpdGlvbkluZGV4ZXNbICggaSAtIDEgKSAqIDMgKyAxIF0gXSApO1xuXHRcdFx0XHRidWZmZXJzLnZlcnRleC5wdXNoKCBnZW9JbmZvLnZlcnRleFBvc2l0aW9uc1sgZmFjZVBvc2l0aW9uSW5kZXhlc1sgKCBpIC0gMSApICogMyArIDIgXSBdICk7XG5cblx0XHRcdFx0YnVmZmVycy52ZXJ0ZXgucHVzaCggZ2VvSW5mby52ZXJ0ZXhQb3NpdGlvbnNbIGZhY2VQb3NpdGlvbkluZGV4ZXNbIGkgKiAzIF0gXSApO1xuXHRcdFx0XHRidWZmZXJzLnZlcnRleC5wdXNoKCBnZW9JbmZvLnZlcnRleFBvc2l0aW9uc1sgZmFjZVBvc2l0aW9uSW5kZXhlc1sgaSAqIDMgKyAxIF0gXSApO1xuXHRcdFx0XHRidWZmZXJzLnZlcnRleC5wdXNoKCBnZW9JbmZvLnZlcnRleFBvc2l0aW9uc1sgZmFjZVBvc2l0aW9uSW5kZXhlc1sgaSAqIDMgKyAyIF0gXSApO1xuXG5cdFx0XHRcdGlmICggZ2VvSW5mby5za2VsZXRvbiApIHtcblxuXHRcdFx0XHRcdGJ1ZmZlcnMudmVydGV4V2VpZ2h0cy5wdXNoKCBmYWNlV2VpZ2h0c1sgMCBdICk7XG5cdFx0XHRcdFx0YnVmZmVycy52ZXJ0ZXhXZWlnaHRzLnB1c2goIGZhY2VXZWlnaHRzWyAxIF0gKTtcblx0XHRcdFx0XHRidWZmZXJzLnZlcnRleFdlaWdodHMucHVzaCggZmFjZVdlaWdodHNbIDIgXSApO1xuXHRcdFx0XHRcdGJ1ZmZlcnMudmVydGV4V2VpZ2h0cy5wdXNoKCBmYWNlV2VpZ2h0c1sgMyBdICk7XG5cblx0XHRcdFx0XHRidWZmZXJzLnZlcnRleFdlaWdodHMucHVzaCggZmFjZVdlaWdodHNbICggaSAtIDEgKSAqIDQgXSApO1xuXHRcdFx0XHRcdGJ1ZmZlcnMudmVydGV4V2VpZ2h0cy5wdXNoKCBmYWNlV2VpZ2h0c1sgKCBpIC0gMSApICogNCArIDEgXSApO1xuXHRcdFx0XHRcdGJ1ZmZlcnMudmVydGV4V2VpZ2h0cy5wdXNoKCBmYWNlV2VpZ2h0c1sgKCBpIC0gMSApICogNCArIDIgXSApO1xuXHRcdFx0XHRcdGJ1ZmZlcnMudmVydGV4V2VpZ2h0cy5wdXNoKCBmYWNlV2VpZ2h0c1sgKCBpIC0gMSApICogNCArIDMgXSApO1xuXG5cdFx0XHRcdFx0YnVmZmVycy52ZXJ0ZXhXZWlnaHRzLnB1c2goIGZhY2VXZWlnaHRzWyBpICogNCBdICk7XG5cdFx0XHRcdFx0YnVmZmVycy52ZXJ0ZXhXZWlnaHRzLnB1c2goIGZhY2VXZWlnaHRzWyBpICogNCArIDEgXSApO1xuXHRcdFx0XHRcdGJ1ZmZlcnMudmVydGV4V2VpZ2h0cy5wdXNoKCBmYWNlV2VpZ2h0c1sgaSAqIDQgKyAyIF0gKTtcblx0XHRcdFx0XHRidWZmZXJzLnZlcnRleFdlaWdodHMucHVzaCggZmFjZVdlaWdodHNbIGkgKiA0ICsgMyBdICk7XG5cblx0XHRcdFx0XHRidWZmZXJzLndlaWdodHNJbmRpY2VzLnB1c2goIGZhY2VXZWlnaHRJbmRpY2VzWyAwIF0gKTtcblx0XHRcdFx0XHRidWZmZXJzLndlaWdodHNJbmRpY2VzLnB1c2goIGZhY2VXZWlnaHRJbmRpY2VzWyAxIF0gKTtcblx0XHRcdFx0XHRidWZmZXJzLndlaWdodHNJbmRpY2VzLnB1c2goIGZhY2VXZWlnaHRJbmRpY2VzWyAyIF0gKTtcblx0XHRcdFx0XHRidWZmZXJzLndlaWdodHNJbmRpY2VzLnB1c2goIGZhY2VXZWlnaHRJbmRpY2VzWyAzIF0gKTtcblxuXHRcdFx0XHRcdGJ1ZmZlcnMud2VpZ2h0c0luZGljZXMucHVzaCggZmFjZVdlaWdodEluZGljZXNbICggaSAtIDEgKSAqIDQgXSApO1xuXHRcdFx0XHRcdGJ1ZmZlcnMud2VpZ2h0c0luZGljZXMucHVzaCggZmFjZVdlaWdodEluZGljZXNbICggaSAtIDEgKSAqIDQgKyAxIF0gKTtcblx0XHRcdFx0XHRidWZmZXJzLndlaWdodHNJbmRpY2VzLnB1c2goIGZhY2VXZWlnaHRJbmRpY2VzWyAoIGkgLSAxICkgKiA0ICsgMiBdICk7XG5cdFx0XHRcdFx0YnVmZmVycy53ZWlnaHRzSW5kaWNlcy5wdXNoKCBmYWNlV2VpZ2h0SW5kaWNlc1sgKCBpIC0gMSApICogNCArIDMgXSApO1xuXG5cdFx0XHRcdFx0YnVmZmVycy53ZWlnaHRzSW5kaWNlcy5wdXNoKCBmYWNlV2VpZ2h0SW5kaWNlc1sgaSAqIDQgXSApO1xuXHRcdFx0XHRcdGJ1ZmZlcnMud2VpZ2h0c0luZGljZXMucHVzaCggZmFjZVdlaWdodEluZGljZXNbIGkgKiA0ICsgMSBdICk7XG5cdFx0XHRcdFx0YnVmZmVycy53ZWlnaHRzSW5kaWNlcy5wdXNoKCBmYWNlV2VpZ2h0SW5kaWNlc1sgaSAqIDQgKyAyIF0gKTtcblx0XHRcdFx0XHRidWZmZXJzLndlaWdodHNJbmRpY2VzLnB1c2goIGZhY2VXZWlnaHRJbmRpY2VzWyBpICogNCArIDMgXSApO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoIGdlb0luZm8uY29sb3IgKSB7XG5cblx0XHRcdFx0XHRidWZmZXJzLmNvbG9ycy5wdXNoKCBmYWNlQ29sb3JzWyAwIF0gKTtcblx0XHRcdFx0XHRidWZmZXJzLmNvbG9ycy5wdXNoKCBmYWNlQ29sb3JzWyAxIF0gKTtcblx0XHRcdFx0XHRidWZmZXJzLmNvbG9ycy5wdXNoKCBmYWNlQ29sb3JzWyAyIF0gKTtcblxuXHRcdFx0XHRcdGJ1ZmZlcnMuY29sb3JzLnB1c2goIGZhY2VDb2xvcnNbICggaSAtIDEgKSAqIDMgXSApO1xuXHRcdFx0XHRcdGJ1ZmZlcnMuY29sb3JzLnB1c2goIGZhY2VDb2xvcnNbICggaSAtIDEgKSAqIDMgKyAxIF0gKTtcblx0XHRcdFx0XHRidWZmZXJzLmNvbG9ycy5wdXNoKCBmYWNlQ29sb3JzWyAoIGkgLSAxICkgKiAzICsgMiBdICk7XG5cblx0XHRcdFx0XHRidWZmZXJzLmNvbG9ycy5wdXNoKCBmYWNlQ29sb3JzWyBpICogMyBdICk7XG5cdFx0XHRcdFx0YnVmZmVycy5jb2xvcnMucHVzaCggZmFjZUNvbG9yc1sgaSAqIDMgKyAxIF0gKTtcblx0XHRcdFx0XHRidWZmZXJzLmNvbG9ycy5wdXNoKCBmYWNlQ29sb3JzWyBpICogMyArIDIgXSApO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoIGdlb0luZm8ubWF0ZXJpYWwgJiYgZ2VvSW5mby5tYXRlcmlhbC5tYXBwaW5nVHlwZSAhPT0gJ0FsbFNhbWUnICkge1xuXG5cdFx0XHRcdFx0YnVmZmVycy5tYXRlcmlhbEluZGV4LnB1c2goIG1hdGVyaWFsSW5kZXggKTtcblx0XHRcdFx0XHRidWZmZXJzLm1hdGVyaWFsSW5kZXgucHVzaCggbWF0ZXJpYWxJbmRleCApO1xuXHRcdFx0XHRcdGJ1ZmZlcnMubWF0ZXJpYWxJbmRleC5wdXNoKCBtYXRlcmlhbEluZGV4ICk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmICggZ2VvSW5mby5ub3JtYWwgKSB7XG5cblx0XHRcdFx0XHRidWZmZXJzLm5vcm1hbC5wdXNoKCBmYWNlTm9ybWFsc1sgMCBdICk7XG5cdFx0XHRcdFx0YnVmZmVycy5ub3JtYWwucHVzaCggZmFjZU5vcm1hbHNbIDEgXSApO1xuXHRcdFx0XHRcdGJ1ZmZlcnMubm9ybWFsLnB1c2goIGZhY2VOb3JtYWxzWyAyIF0gKTtcblxuXHRcdFx0XHRcdGJ1ZmZlcnMubm9ybWFsLnB1c2goIGZhY2VOb3JtYWxzWyAoIGkgLSAxICkgKiAzIF0gKTtcblx0XHRcdFx0XHRidWZmZXJzLm5vcm1hbC5wdXNoKCBmYWNlTm9ybWFsc1sgKCBpIC0gMSApICogMyArIDEgXSApO1xuXHRcdFx0XHRcdGJ1ZmZlcnMubm9ybWFsLnB1c2goIGZhY2VOb3JtYWxzWyAoIGkgLSAxICkgKiAzICsgMiBdICk7XG5cblx0XHRcdFx0XHRidWZmZXJzLm5vcm1hbC5wdXNoKCBmYWNlTm9ybWFsc1sgaSAqIDMgXSApO1xuXHRcdFx0XHRcdGJ1ZmZlcnMubm9ybWFsLnB1c2goIGZhY2VOb3JtYWxzWyBpICogMyArIDEgXSApO1xuXHRcdFx0XHRcdGJ1ZmZlcnMubm9ybWFsLnB1c2goIGZhY2VOb3JtYWxzWyBpICogMyArIDIgXSApO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoIGdlb0luZm8udXYgKSB7XG5cblx0XHRcdFx0XHRnZW9JbmZvLnV2LmZvckVhY2goIGZ1bmN0aW9uICggdXYsIGogKSB7XG5cblx0XHRcdFx0XHRcdGlmICggYnVmZmVycy51dnNbIGogXSA9PT0gdW5kZWZpbmVkICkgYnVmZmVycy51dnNbIGogXSA9IFtdO1xuXG5cdFx0XHRcdFx0XHRidWZmZXJzLnV2c1sgaiBdLnB1c2goIGZhY2VVVnNbIGogXVsgMCBdICk7XG5cdFx0XHRcdFx0XHRidWZmZXJzLnV2c1sgaiBdLnB1c2goIGZhY2VVVnNbIGogXVsgMSBdICk7XG5cblx0XHRcdFx0XHRcdGJ1ZmZlcnMudXZzWyBqIF0ucHVzaCggZmFjZVVWc1sgaiBdWyAoIGkgLSAxICkgKiAyIF0gKTtcblx0XHRcdFx0XHRcdGJ1ZmZlcnMudXZzWyBqIF0ucHVzaCggZmFjZVVWc1sgaiBdWyAoIGkgLSAxICkgKiAyICsgMSBdICk7XG5cblx0XHRcdFx0XHRcdGJ1ZmZlcnMudXZzWyBqIF0ucHVzaCggZmFjZVVWc1sgaiBdWyBpICogMiBdICk7XG5cdFx0XHRcdFx0XHRidWZmZXJzLnV2c1sgaiBdLnB1c2goIGZhY2VVVnNbIGogXVsgaSAqIDIgKyAxIF0gKTtcblxuXHRcdFx0XHRcdH0gKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdH1cblxuXHRcdH0sXG5cblx0XHRhZGRNb3JwaFRhcmdldHM6IGZ1bmN0aW9uICggcGFyZW50R2VvLCBwYXJlbnRHZW9Ob2RlLCBtb3JwaFRhcmdldHMsIHByZVRyYW5zZm9ybSApIHtcblxuXHRcdFx0aWYgKCBtb3JwaFRhcmdldHMubGVuZ3RoID09PSAwICkgcmV0dXJuO1xuXG5cdFx0XHRwYXJlbnRHZW8ubW9ycGhUYXJnZXRzUmVsYXRpdmUgPSB0cnVlO1xuXG5cdFx0XHRwYXJlbnRHZW8ubW9ycGhBdHRyaWJ1dGVzLnBvc2l0aW9uID0gW107XG5cdFx0XHQvLyBwYXJlbnRHZW8ubW9ycGhBdHRyaWJ1dGVzLm5vcm1hbCA9IFtdOyAvLyBub3QgaW1wbGVtZW50ZWRcblxuXHRcdFx0dmFyIHNjb3BlID0gdGhpcztcblx0XHRcdG1vcnBoVGFyZ2V0cy5mb3JFYWNoKCBmdW5jdGlvbiAoIG1vcnBoVGFyZ2V0ICkge1xuXG5cdFx0XHRcdG1vcnBoVGFyZ2V0LnJhd1RhcmdldHMuZm9yRWFjaCggZnVuY3Rpb24gKCByYXdUYXJnZXQgKSB7XG5cblx0XHRcdFx0XHR2YXIgbW9ycGhHZW9Ob2RlID0gZmJ4VHJlZS5PYmplY3RzLkdlb21ldHJ5WyByYXdUYXJnZXQuZ2VvSUQgXTtcblxuXHRcdFx0XHRcdGlmICggbW9ycGhHZW9Ob2RlICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0XHRcdHNjb3BlLmdlbk1vcnBoR2VvbWV0cnkoIHBhcmVudEdlbywgcGFyZW50R2VvTm9kZSwgbW9ycGhHZW9Ob2RlLCBwcmVUcmFuc2Zvcm0sIHJhd1RhcmdldC5uYW1lICk7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fSApO1xuXG5cdFx0XHR9ICk7XG5cblx0XHR9LFxuXG5cdFx0Ly8gYSBtb3JwaCBnZW9tZXRyeSBub2RlIGlzIHNpbWlsYXIgdG8gYSBzdGFuZGFyZCAgbm9kZSwgYW5kIHRoZSBub2RlIGlzIGFsc28gY29udGFpbmVkXG5cdFx0Ly8gaW4gRkJYVHJlZS5PYmplY3RzLkdlb21ldHJ5LCBob3dldmVyIGl0IGNhbiBvbmx5IGhhdmUgYXR0cmlidXRlcyBmb3IgcG9zaXRpb24sIG5vcm1hbFxuXHRcdC8vIGFuZCBhIHNwZWNpYWwgYXR0cmlidXRlIEluZGV4IGRlZmluaW5nIHdoaWNoIHZlcnRpY2VzIG9mIHRoZSBvcmlnaW5hbCBnZW9tZXRyeSBhcmUgYWZmZWN0ZWRcblx0XHQvLyBOb3JtYWwgYW5kIHBvc2l0aW9uIGF0dHJpYnV0ZXMgb25seSBoYXZlIGRhdGEgZm9yIHRoZSB2ZXJ0aWNlcyB0aGF0IGFyZSBhZmZlY3RlZCBieSB0aGUgbW9ycGhcblx0XHRnZW5Nb3JwaEdlb21ldHJ5OiBmdW5jdGlvbiAoIHBhcmVudEdlbywgcGFyZW50R2VvTm9kZSwgbW9ycGhHZW9Ob2RlLCBwcmVUcmFuc2Zvcm0sIG5hbWUgKSB7XG5cblx0XHRcdHZhciB2ZXJ0ZXhJbmRpY2VzID0gKCBwYXJlbnRHZW9Ob2RlLlBvbHlnb25WZXJ0ZXhJbmRleCAhPT0gdW5kZWZpbmVkICkgPyBwYXJlbnRHZW9Ob2RlLlBvbHlnb25WZXJ0ZXhJbmRleC5hIDogW107XG5cblx0XHRcdHZhciBtb3JwaFBvc2l0aW9uc1NwYXJzZSA9ICggbW9ycGhHZW9Ob2RlLlZlcnRpY2VzICE9PSB1bmRlZmluZWQgKSA/IG1vcnBoR2VvTm9kZS5WZXJ0aWNlcy5hIDogW107XG5cdFx0XHR2YXIgaW5kaWNlcyA9ICggbW9ycGhHZW9Ob2RlLkluZGV4ZXMgIT09IHVuZGVmaW5lZCApID8gbW9ycGhHZW9Ob2RlLkluZGV4ZXMuYSA6IFtdO1xuXG5cdFx0XHR2YXIgbGVuZ3RoID0gcGFyZW50R2VvLmF0dHJpYnV0ZXMucG9zaXRpb24uY291bnQgKiAzO1xuXHRcdFx0dmFyIG1vcnBoUG9zaXRpb25zID0gbmV3IEZsb2F0MzJBcnJheSggbGVuZ3RoICk7XG5cblx0XHRcdGZvciAoIHZhciBpID0gMDsgaSA8IGluZGljZXMubGVuZ3RoOyBpICsrICkge1xuXG5cdFx0XHRcdHZhciBtb3JwaEluZGV4ID0gaW5kaWNlc1sgaSBdICogMztcblxuXHRcdFx0XHRtb3JwaFBvc2l0aW9uc1sgbW9ycGhJbmRleCBdID0gbW9ycGhQb3NpdGlvbnNTcGFyc2VbIGkgKiAzIF07XG5cdFx0XHRcdG1vcnBoUG9zaXRpb25zWyBtb3JwaEluZGV4ICsgMSBdID0gbW9ycGhQb3NpdGlvbnNTcGFyc2VbIGkgKiAzICsgMSBdO1xuXHRcdFx0XHRtb3JwaFBvc2l0aW9uc1sgbW9ycGhJbmRleCArIDIgXSA9IG1vcnBoUG9zaXRpb25zU3BhcnNlWyBpICogMyArIDIgXTtcblxuXHRcdFx0fVxuXG5cdFx0XHQvLyBUT0RPOiBhZGQgbW9ycGggbm9ybWFsIHN1cHBvcnRcblx0XHRcdHZhciBtb3JwaEdlb0luZm8gPSB7XG5cdFx0XHRcdHZlcnRleEluZGljZXM6IHZlcnRleEluZGljZXMsXG5cdFx0XHRcdHZlcnRleFBvc2l0aW9uczogbW9ycGhQb3NpdGlvbnMsXG5cblx0XHRcdH07XG5cblx0XHRcdHZhciBtb3JwaEJ1ZmZlcnMgPSB0aGlzLmdlbkJ1ZmZlcnMoIG1vcnBoR2VvSW5mbyApO1xuXG5cdFx0XHR2YXIgcG9zaXRpb25BdHRyaWJ1dGUgPSBuZXcgRmxvYXQzMkJ1ZmZlckF0dHJpYnV0ZSggbW9ycGhCdWZmZXJzLnZlcnRleCwgMyApO1xuXHRcdFx0cG9zaXRpb25BdHRyaWJ1dGUubmFtZSA9IG5hbWUgfHwgbW9ycGhHZW9Ob2RlLmF0dHJOYW1lO1xuXG5cdFx0XHRwb3NpdGlvbkF0dHJpYnV0ZS5hcHBseU1hdHJpeDQoIHByZVRyYW5zZm9ybSApO1xuXG5cdFx0XHRwYXJlbnRHZW8ubW9ycGhBdHRyaWJ1dGVzLnBvc2l0aW9uLnB1c2goIHBvc2l0aW9uQXR0cmlidXRlICk7XG5cblx0XHR9LFxuXG5cdFx0Ly8gUGFyc2Ugbm9ybWFsIGZyb20gRkJYVHJlZS5PYmplY3RzLkdlb21ldHJ5LkxheWVyRWxlbWVudE5vcm1hbCBpZiBpdCBleGlzdHNcblx0XHRwYXJzZU5vcm1hbHM6IGZ1bmN0aW9uICggTm9ybWFsTm9kZSApIHtcblxuXHRcdFx0dmFyIG1hcHBpbmdUeXBlID0gTm9ybWFsTm9kZS5NYXBwaW5nSW5mb3JtYXRpb25UeXBlO1xuXHRcdFx0dmFyIHJlZmVyZW5jZVR5cGUgPSBOb3JtYWxOb2RlLlJlZmVyZW5jZUluZm9ybWF0aW9uVHlwZTtcblx0XHRcdHZhciBidWZmZXIgPSBOb3JtYWxOb2RlLk5vcm1hbHMuYTtcblx0XHRcdHZhciBpbmRleEJ1ZmZlciA9IFtdO1xuXHRcdFx0aWYgKCByZWZlcmVuY2VUeXBlID09PSAnSW5kZXhUb0RpcmVjdCcgKSB7XG5cblx0XHRcdFx0aWYgKCAnTm9ybWFsSW5kZXgnIGluIE5vcm1hbE5vZGUgKSB7XG5cblx0XHRcdFx0XHRpbmRleEJ1ZmZlciA9IE5vcm1hbE5vZGUuTm9ybWFsSW5kZXguYTtcblxuXHRcdFx0XHR9IGVsc2UgaWYgKCAnTm9ybWFsc0luZGV4JyBpbiBOb3JtYWxOb2RlICkge1xuXG5cdFx0XHRcdFx0aW5kZXhCdWZmZXIgPSBOb3JtYWxOb2RlLk5vcm1hbHNJbmRleC5hO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRkYXRhU2l6ZTogMyxcblx0XHRcdFx0YnVmZmVyOiBidWZmZXIsXG5cdFx0XHRcdGluZGljZXM6IGluZGV4QnVmZmVyLFxuXHRcdFx0XHRtYXBwaW5nVHlwZTogbWFwcGluZ1R5cGUsXG5cdFx0XHRcdHJlZmVyZW5jZVR5cGU6IHJlZmVyZW5jZVR5cGVcblx0XHRcdH07XG5cblx0XHR9LFxuXG5cdFx0Ly8gUGFyc2UgVVZzIGZyb20gRkJYVHJlZS5PYmplY3RzLkdlb21ldHJ5LkxheWVyRWxlbWVudFVWIGlmIGl0IGV4aXN0c1xuXHRcdHBhcnNlVVZzOiBmdW5jdGlvbiAoIFVWTm9kZSApIHtcblxuXHRcdFx0dmFyIG1hcHBpbmdUeXBlID0gVVZOb2RlLk1hcHBpbmdJbmZvcm1hdGlvblR5cGU7XG5cdFx0XHR2YXIgcmVmZXJlbmNlVHlwZSA9IFVWTm9kZS5SZWZlcmVuY2VJbmZvcm1hdGlvblR5cGU7XG5cdFx0XHR2YXIgYnVmZmVyID0gVVZOb2RlLlVWLmE7XG5cdFx0XHR2YXIgaW5kZXhCdWZmZXIgPSBbXTtcblx0XHRcdGlmICggcmVmZXJlbmNlVHlwZSA9PT0gJ0luZGV4VG9EaXJlY3QnICkge1xuXG5cdFx0XHRcdGluZGV4QnVmZmVyID0gVVZOb2RlLlVWSW5kZXguYTtcblxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRkYXRhU2l6ZTogMixcblx0XHRcdFx0YnVmZmVyOiBidWZmZXIsXG5cdFx0XHRcdGluZGljZXM6IGluZGV4QnVmZmVyLFxuXHRcdFx0XHRtYXBwaW5nVHlwZTogbWFwcGluZ1R5cGUsXG5cdFx0XHRcdHJlZmVyZW5jZVR5cGU6IHJlZmVyZW5jZVR5cGVcblx0XHRcdH07XG5cblx0XHR9LFxuXG5cdFx0Ly8gUGFyc2UgVmVydGV4IENvbG9ycyBmcm9tIEZCWFRyZWUuT2JqZWN0cy5HZW9tZXRyeS5MYXllckVsZW1lbnRDb2xvciBpZiBpdCBleGlzdHNcblx0XHRwYXJzZVZlcnRleENvbG9yczogZnVuY3Rpb24gKCBDb2xvck5vZGUgKSB7XG5cblx0XHRcdHZhciBtYXBwaW5nVHlwZSA9IENvbG9yTm9kZS5NYXBwaW5nSW5mb3JtYXRpb25UeXBlO1xuXHRcdFx0dmFyIHJlZmVyZW5jZVR5cGUgPSBDb2xvck5vZGUuUmVmZXJlbmNlSW5mb3JtYXRpb25UeXBlO1xuXHRcdFx0dmFyIGJ1ZmZlciA9IENvbG9yTm9kZS5Db2xvcnMuYTtcblx0XHRcdHZhciBpbmRleEJ1ZmZlciA9IFtdO1xuXHRcdFx0aWYgKCByZWZlcmVuY2VUeXBlID09PSAnSW5kZXhUb0RpcmVjdCcgKSB7XG5cblx0XHRcdFx0aW5kZXhCdWZmZXIgPSBDb2xvck5vZGUuQ29sb3JJbmRleC5hO1xuXG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdGRhdGFTaXplOiA0LFxuXHRcdFx0XHRidWZmZXI6IGJ1ZmZlcixcblx0XHRcdFx0aW5kaWNlczogaW5kZXhCdWZmZXIsXG5cdFx0XHRcdG1hcHBpbmdUeXBlOiBtYXBwaW5nVHlwZSxcblx0XHRcdFx0cmVmZXJlbmNlVHlwZTogcmVmZXJlbmNlVHlwZVxuXHRcdFx0fTtcblxuXHRcdH0sXG5cblx0XHQvLyBQYXJzZSBtYXBwaW5nIGFuZCBtYXRlcmlhbCBkYXRhIGluIEZCWFRyZWUuT2JqZWN0cy5HZW9tZXRyeS5MYXllckVsZW1lbnRNYXRlcmlhbCBpZiBpdCBleGlzdHNcblx0XHRwYXJzZU1hdGVyaWFsSW5kaWNlczogZnVuY3Rpb24gKCBNYXRlcmlhbE5vZGUgKSB7XG5cblx0XHRcdHZhciBtYXBwaW5nVHlwZSA9IE1hdGVyaWFsTm9kZS5NYXBwaW5nSW5mb3JtYXRpb25UeXBlO1xuXHRcdFx0dmFyIHJlZmVyZW5jZVR5cGUgPSBNYXRlcmlhbE5vZGUuUmVmZXJlbmNlSW5mb3JtYXRpb25UeXBlO1xuXG5cdFx0XHRpZiAoIG1hcHBpbmdUeXBlID09PSAnTm9NYXBwaW5nSW5mb3JtYXRpb24nICkge1xuXG5cdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0ZGF0YVNpemU6IDEsXG5cdFx0XHRcdFx0YnVmZmVyOiBbIDAgXSxcblx0XHRcdFx0XHRpbmRpY2VzOiBbIDAgXSxcblx0XHRcdFx0XHRtYXBwaW5nVHlwZTogJ0FsbFNhbWUnLFxuXHRcdFx0XHRcdHJlZmVyZW5jZVR5cGU6IHJlZmVyZW5jZVR5cGVcblx0XHRcdFx0fTtcblxuXHRcdFx0fVxuXG5cdFx0XHR2YXIgbWF0ZXJpYWxJbmRleEJ1ZmZlciA9IE1hdGVyaWFsTm9kZS5NYXRlcmlhbHMuYTtcblxuXHRcdFx0Ly8gU2luY2UgbWF0ZXJpYWxzIGFyZSBzdG9yZWQgYXMgaW5kaWNlcywgdGhlcmUncyBhIGJpdCBvZiBhIG1pc21hdGNoIGJldHdlZW4gRkJYIGFuZCB3aGF0XG5cdFx0XHQvLyB3ZSBleHBlY3QuU28gd2UgY3JlYXRlIGFuIGludGVybWVkaWF0ZSBidWZmZXIgdGhhdCBwb2ludHMgdG8gdGhlIGluZGV4IGluIHRoZSBidWZmZXIsXG5cdFx0XHQvLyBmb3IgY29uZm9ybWluZyB3aXRoIHRoZSBvdGhlciBmdW5jdGlvbnMgd2UndmUgd3JpdHRlbiBmb3Igb3RoZXIgZGF0YS5cblx0XHRcdHZhciBtYXRlcmlhbEluZGljZXMgPSBbXTtcblxuXHRcdFx0Zm9yICggdmFyIGkgPSAwOyBpIDwgbWF0ZXJpYWxJbmRleEJ1ZmZlci5sZW5ndGg7ICsrIGkgKSB7XG5cblx0XHRcdFx0bWF0ZXJpYWxJbmRpY2VzLnB1c2goIGkgKTtcblxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRkYXRhU2l6ZTogMSxcblx0XHRcdFx0YnVmZmVyOiBtYXRlcmlhbEluZGV4QnVmZmVyLFxuXHRcdFx0XHRpbmRpY2VzOiBtYXRlcmlhbEluZGljZXMsXG5cdFx0XHRcdG1hcHBpbmdUeXBlOiBtYXBwaW5nVHlwZSxcblx0XHRcdFx0cmVmZXJlbmNlVHlwZTogcmVmZXJlbmNlVHlwZVxuXHRcdFx0fTtcblxuXHRcdH0sXG5cblx0XHQvLyBHZW5lcmF0ZSBhIE51cmJHZW9tZXRyeSBmcm9tIGEgbm9kZSBpbiBGQlhUcmVlLk9iamVjdHMuR2VvbWV0cnlcblx0XHRwYXJzZU51cmJzR2VvbWV0cnk6IGZ1bmN0aW9uICggZ2VvTm9kZSApIHtcblxuXHRcdFx0aWYgKCBOVVJCU0N1cnZlID09PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0Y29uc29sZS5lcnJvciggJ1RIUkVFLkZCWExvYWRlcjogVGhlIGxvYWRlciByZWxpZXMgb24gTlVSQlNDdXJ2ZSBmb3IgYW55IG51cmJzIHByZXNlbnQgaW4gdGhlIG1vZGVsLiBOdXJicyB3aWxsIHNob3cgdXAgYXMgZW1wdHkgZ2VvbWV0cnkuJyApO1xuXHRcdFx0XHRyZXR1cm4gbmV3IEJ1ZmZlckdlb21ldHJ5KCk7XG5cblx0XHRcdH1cblxuXHRcdFx0dmFyIG9yZGVyID0gcGFyc2VJbnQoIGdlb05vZGUuT3JkZXIgKTtcblxuXHRcdFx0aWYgKCBpc05hTiggb3JkZXIgKSApIHtcblxuXHRcdFx0XHRjb25zb2xlLmVycm9yKCAnVEhSRUUuRkJYTG9hZGVyOiBJbnZhbGlkIE9yZGVyICVzIGdpdmVuIGZvciBnZW9tZXRyeSBJRDogJXMnLCBnZW9Ob2RlLk9yZGVyLCBnZW9Ob2RlLmlkICk7XG5cdFx0XHRcdHJldHVybiBuZXcgQnVmZmVyR2VvbWV0cnkoKTtcblxuXHRcdFx0fVxuXG5cdFx0XHR2YXIgZGVncmVlID0gb3JkZXIgLSAxO1xuXG5cdFx0XHR2YXIga25vdHMgPSBnZW9Ob2RlLktub3RWZWN0b3IuYTtcblx0XHRcdHZhciBjb250cm9sUG9pbnRzID0gW107XG5cdFx0XHR2YXIgcG9pbnRzVmFsdWVzID0gZ2VvTm9kZS5Qb2ludHMuYTtcblxuXHRcdFx0Zm9yICggdmFyIGkgPSAwLCBsID0gcG9pbnRzVmFsdWVzLmxlbmd0aDsgaSA8IGw7IGkgKz0gNCApIHtcblxuXHRcdFx0XHRjb250cm9sUG9pbnRzLnB1c2goIG5ldyBWZWN0b3I0KCkuZnJvbUFycmF5KCBwb2ludHNWYWx1ZXMsIGkgKSApO1xuXG5cdFx0XHR9XG5cblx0XHRcdHZhciBzdGFydEtub3QsIGVuZEtub3Q7XG5cblx0XHRcdGlmICggZ2VvTm9kZS5Gb3JtID09PSAnQ2xvc2VkJyApIHtcblxuXHRcdFx0XHRjb250cm9sUG9pbnRzLnB1c2goIGNvbnRyb2xQb2ludHNbIDAgXSApO1xuXG5cdFx0XHR9IGVsc2UgaWYgKCBnZW9Ob2RlLkZvcm0gPT09ICdQZXJpb2RpYycgKSB7XG5cblx0XHRcdFx0c3RhcnRLbm90ID0gZGVncmVlO1xuXHRcdFx0XHRlbmRLbm90ID0ga25vdHMubGVuZ3RoIC0gMSAtIHN0YXJ0S25vdDtcblxuXHRcdFx0XHRmb3IgKCB2YXIgaSA9IDA7IGkgPCBkZWdyZWU7ICsrIGkgKSB7XG5cblx0XHRcdFx0XHRjb250cm9sUG9pbnRzLnB1c2goIGNvbnRyb2xQb2ludHNbIGkgXSApO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fVxuXG5cdFx0XHR2YXIgY3VydmUgPSBuZXcgTlVSQlNDdXJ2ZSggZGVncmVlLCBrbm90cywgY29udHJvbFBvaW50cywgc3RhcnRLbm90LCBlbmRLbm90ICk7XG5cdFx0XHR2YXIgdmVydGljZXMgPSBjdXJ2ZS5nZXRQb2ludHMoIGNvbnRyb2xQb2ludHMubGVuZ3RoICogNyApO1xuXG5cdFx0XHR2YXIgcG9zaXRpb25zID0gbmV3IEZsb2F0MzJBcnJheSggdmVydGljZXMubGVuZ3RoICogMyApO1xuXG5cdFx0XHR2ZXJ0aWNlcy5mb3JFYWNoKCBmdW5jdGlvbiAoIHZlcnRleCwgaSApIHtcblxuXHRcdFx0XHR2ZXJ0ZXgudG9BcnJheSggcG9zaXRpb25zLCBpICogMyApO1xuXG5cdFx0XHR9ICk7XG5cblx0XHRcdHZhciBnZW9tZXRyeSA9IG5ldyBCdWZmZXJHZW9tZXRyeSgpO1xuXHRcdFx0Z2VvbWV0cnkuc2V0QXR0cmlidXRlKCAncG9zaXRpb24nLCBuZXcgQnVmZmVyQXR0cmlidXRlKCBwb3NpdGlvbnMsIDMgKSApO1xuXG5cdFx0XHRyZXR1cm4gZ2VvbWV0cnk7XG5cblx0XHR9LFxuXG5cdH07XG5cblx0Ly8gcGFyc2UgYW5pbWF0aW9uIGRhdGEgZnJvbSBGQlhUcmVlXG5cdGZ1bmN0aW9uIEFuaW1hdGlvblBhcnNlcigpIHt9XG5cblx0QW5pbWF0aW9uUGFyc2VyLnByb3RvdHlwZSA9IHtcblxuXHRcdGNvbnN0cnVjdG9yOiBBbmltYXRpb25QYXJzZXIsXG5cblx0XHQvLyB0YWtlIHJhdyBhbmltYXRpb24gY2xpcHMgYW5kIHR1cm4gdGhlbSBpbnRvIHRocmVlLmpzIGFuaW1hdGlvbiBjbGlwc1xuXHRcdHBhcnNlOiBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdHZhciBhbmltYXRpb25DbGlwcyA9IFtdO1xuXG5cdFx0XHR2YXIgcmF3Q2xpcHMgPSB0aGlzLnBhcnNlQ2xpcHMoKTtcblxuXHRcdFx0aWYgKCByYXdDbGlwcyAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRcdGZvciAoIHZhciBrZXkgaW4gcmF3Q2xpcHMgKSB7XG5cblx0XHRcdFx0XHR2YXIgcmF3Q2xpcCA9IHJhd0NsaXBzWyBrZXkgXTtcblxuXHRcdFx0XHRcdHZhciBjbGlwID0gdGhpcy5hZGRDbGlwKCByYXdDbGlwICk7XG5cblx0XHRcdFx0XHRhbmltYXRpb25DbGlwcy5wdXNoKCBjbGlwICk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBhbmltYXRpb25DbGlwcztcblxuXHRcdH0sXG5cblx0XHRwYXJzZUNsaXBzOiBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdC8vIHNpbmNlIHRoZSBhY3R1YWwgdHJhbnNmb3JtYXRpb24gZGF0YSBpcyBzdG9yZWQgaW4gRkJYVHJlZS5PYmplY3RzLkFuaW1hdGlvbkN1cnZlLFxuXHRcdFx0Ly8gaWYgdGhpcyBpcyB1bmRlZmluZWQgd2UgY2FuIHNhZmVseSBhc3N1bWUgdGhlcmUgYXJlIG5vIGFuaW1hdGlvbnNcblx0XHRcdGlmICggZmJ4VHJlZS5PYmplY3RzLkFuaW1hdGlvbkN1cnZlID09PSB1bmRlZmluZWQgKSByZXR1cm4gdW5kZWZpbmVkO1xuXG5cdFx0XHR2YXIgY3VydmVOb2Rlc01hcCA9IHRoaXMucGFyc2VBbmltYXRpb25DdXJ2ZU5vZGVzKCk7XG5cblx0XHRcdHRoaXMucGFyc2VBbmltYXRpb25DdXJ2ZXMoIGN1cnZlTm9kZXNNYXAgKTtcblxuXHRcdFx0dmFyIGxheWVyc01hcCA9IHRoaXMucGFyc2VBbmltYXRpb25MYXllcnMoIGN1cnZlTm9kZXNNYXAgKTtcblx0XHRcdHZhciByYXdDbGlwcyA9IHRoaXMucGFyc2VBbmltU3RhY2tzKCBsYXllcnNNYXAgKTtcblxuXHRcdFx0cmV0dXJuIHJhd0NsaXBzO1xuXG5cdFx0fSxcblxuXHRcdC8vIHBhcnNlIG5vZGVzIGluIEZCWFRyZWUuT2JqZWN0cy5BbmltYXRpb25DdXJ2ZU5vZGVcblx0XHQvLyBlYWNoIEFuaW1hdGlvbkN1cnZlTm9kZSBob2xkcyBkYXRhIGZvciBhbiBhbmltYXRpb24gdHJhbnNmb3JtIGZvciBhIG1vZGVsIChlLmcuIGxlZnQgYXJtIHJvdGF0aW9uIClcblx0XHQvLyBhbmQgaXMgcmVmZXJlbmNlZCBieSBhbiBBbmltYXRpb25MYXllclxuXHRcdHBhcnNlQW5pbWF0aW9uQ3VydmVOb2RlczogZnVuY3Rpb24gKCkge1xuXG5cdFx0XHR2YXIgcmF3Q3VydmVOb2RlcyA9IGZieFRyZWUuT2JqZWN0cy5BbmltYXRpb25DdXJ2ZU5vZGU7XG5cblx0XHRcdHZhciBjdXJ2ZU5vZGVzTWFwID0gbmV3IE1hcCgpO1xuXG5cdFx0XHRmb3IgKCB2YXIgbm9kZUlEIGluIHJhd0N1cnZlTm9kZXMgKSB7XG5cblx0XHRcdFx0dmFyIHJhd0N1cnZlTm9kZSA9IHJhd0N1cnZlTm9kZXNbIG5vZGVJRCBdO1xuXG5cdFx0XHRcdGlmICggcmF3Q3VydmVOb2RlLmF0dHJOYW1lLm1hdGNoKCAvU3xSfFR8RGVmb3JtUGVyY2VudC8gKSAhPT0gbnVsbCApIHtcblxuXHRcdFx0XHRcdHZhciBjdXJ2ZU5vZGUgPSB7XG5cblx0XHRcdFx0XHRcdGlkOiByYXdDdXJ2ZU5vZGUuaWQsXG5cdFx0XHRcdFx0XHRhdHRyOiByYXdDdXJ2ZU5vZGUuYXR0ck5hbWUsXG5cdFx0XHRcdFx0XHRjdXJ2ZXM6IHt9LFxuXG5cdFx0XHRcdFx0fTtcblxuXHRcdFx0XHRcdGN1cnZlTm9kZXNNYXAuc2V0KCBjdXJ2ZU5vZGUuaWQsIGN1cnZlTm9kZSApO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gY3VydmVOb2Rlc01hcDtcblxuXHRcdH0sXG5cblx0XHQvLyBwYXJzZSBub2RlcyBpbiBGQlhUcmVlLk9iamVjdHMuQW5pbWF0aW9uQ3VydmUgYW5kIGNvbm5lY3QgdGhlbSB1cCB0b1xuXHRcdC8vIHByZXZpb3VzbHkgcGFyc2VkIEFuaW1hdGlvbkN1cnZlTm9kZXMuIEVhY2ggQW5pbWF0aW9uQ3VydmUgaG9sZHMgZGF0YSBmb3IgYSBzaW5nbGUgYW5pbWF0ZWRcblx0XHQvLyBheGlzICggZS5nLiB0aW1lcyBhbmQgdmFsdWVzIG9mIHggcm90YXRpb24pXG5cdFx0cGFyc2VBbmltYXRpb25DdXJ2ZXM6IGZ1bmN0aW9uICggY3VydmVOb2Rlc01hcCApIHtcblxuXHRcdFx0dmFyIHJhd0N1cnZlcyA9IGZieFRyZWUuT2JqZWN0cy5BbmltYXRpb25DdXJ2ZTtcblxuXHRcdFx0Ly8gVE9ETzogTWFueSB2YWx1ZXMgYXJlIGlkZW50aWNhbCB1cCB0byByb3VuZG9mZiBlcnJvciwgYnV0IHdvbid0IGJlIG9wdGltaXNlZFxuXHRcdFx0Ly8gZS5nLiBwb3NpdGlvbiB0aW1lczogWzAsIDAuNCwgMC4gOF1cblx0XHRcdC8vIHBvc2l0aW9uIHZhbHVlczogWzcuMjM1MzgzMzUwMjM0NzdlLTcsIDkzLjY3NTE4NjE1NzIyNjU2LCAtMC45OTgyNjk1NTc5NTI4ODA5LCA3LjIzNTM4MzM1MDIzNDc3ZS03LCA5My42NzUxODYxNTcyMjY1NiwgLTAuOTk4MjY5NTU3OTUyODgwOSwgNy4yMzUzODQ0ODcxMDMxNDdlLTcsIDkzLjY3NTIwOTA0NTQxMDE2LCAtMC45OTgyNjk1NTc5NTI4ODA5XVxuXHRcdFx0Ly8gY2xlYXJseSwgdGhpcyBzaG91bGQgYmUgb3B0aW1pc2VkIHRvXG5cdFx0XHQvLyB0aW1lczogWzBdLCBwb3NpdGlvbnMgWzcuMjM1MzgzMzUwMjM0NzdlLTcsIDkzLjY3NTE4NjE1NzIyNjU2LCAtMC45OTgyNjk1NTc5NTI4ODA5XVxuXHRcdFx0Ly8gdGhpcyBzaG93cyB1cCBpbiBuZWFybHkgZXZlcnkgRkJYIGZpbGUsIGFuZCBnZW5lcmFsbHkgdGltZSBhcnJheSBpcyBsZW5ndGggPiAxMDBcblxuXHRcdFx0Zm9yICggdmFyIG5vZGVJRCBpbiByYXdDdXJ2ZXMgKSB7XG5cblx0XHRcdFx0dmFyIGFuaW1hdGlvbkN1cnZlID0ge1xuXG5cdFx0XHRcdFx0aWQ6IHJhd0N1cnZlc1sgbm9kZUlEIF0uaWQsXG5cdFx0XHRcdFx0dGltZXM6IHJhd0N1cnZlc1sgbm9kZUlEIF0uS2V5VGltZS5hLm1hcCggY29udmVydEZCWFRpbWVUb1NlY29uZHMgKSxcblx0XHRcdFx0XHR2YWx1ZXM6IHJhd0N1cnZlc1sgbm9kZUlEIF0uS2V5VmFsdWVGbG9hdC5hLFxuXG5cdFx0XHRcdH07XG5cblx0XHRcdFx0dmFyIHJlbGF0aW9uc2hpcHMgPSBjb25uZWN0aW9ucy5nZXQoIGFuaW1hdGlvbkN1cnZlLmlkICk7XG5cblx0XHRcdFx0aWYgKCByZWxhdGlvbnNoaXBzICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0XHR2YXIgYW5pbWF0aW9uQ3VydmVJRCA9IHJlbGF0aW9uc2hpcHMucGFyZW50c1sgMCBdLklEO1xuXHRcdFx0XHRcdHZhciBhbmltYXRpb25DdXJ2ZVJlbGF0aW9uc2hpcCA9IHJlbGF0aW9uc2hpcHMucGFyZW50c1sgMCBdLnJlbGF0aW9uc2hpcDtcblxuXHRcdFx0XHRcdGlmICggYW5pbWF0aW9uQ3VydmVSZWxhdGlvbnNoaXAubWF0Y2goIC9YLyApICkge1xuXG5cdFx0XHRcdFx0XHRjdXJ2ZU5vZGVzTWFwLmdldCggYW5pbWF0aW9uQ3VydmVJRCApLmN1cnZlc1sgJ3gnIF0gPSBhbmltYXRpb25DdXJ2ZTtcblxuXHRcdFx0XHRcdH0gZWxzZSBpZiAoIGFuaW1hdGlvbkN1cnZlUmVsYXRpb25zaGlwLm1hdGNoKCAvWS8gKSApIHtcblxuXHRcdFx0XHRcdFx0Y3VydmVOb2Rlc01hcC5nZXQoIGFuaW1hdGlvbkN1cnZlSUQgKS5jdXJ2ZXNbICd5JyBdID0gYW5pbWF0aW9uQ3VydmU7XG5cblx0XHRcdFx0XHR9IGVsc2UgaWYgKCBhbmltYXRpb25DdXJ2ZVJlbGF0aW9uc2hpcC5tYXRjaCggL1ovICkgKSB7XG5cblx0XHRcdFx0XHRcdGN1cnZlTm9kZXNNYXAuZ2V0KCBhbmltYXRpb25DdXJ2ZUlEICkuY3VydmVzWyAneicgXSA9IGFuaW1hdGlvbkN1cnZlO1xuXG5cdFx0XHRcdFx0fSBlbHNlIGlmICggYW5pbWF0aW9uQ3VydmVSZWxhdGlvbnNoaXAubWF0Y2goIC9kfERlZm9ybVBlcmNlbnQvICkgJiYgY3VydmVOb2Rlc01hcC5oYXMoIGFuaW1hdGlvbkN1cnZlSUQgKSApIHtcblxuXHRcdFx0XHRcdFx0Y3VydmVOb2Rlc01hcC5nZXQoIGFuaW1hdGlvbkN1cnZlSUQgKS5jdXJ2ZXNbICdtb3JwaCcgXSA9IGFuaW1hdGlvbkN1cnZlO1xuXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH1cblxuXHRcdFx0fVxuXG5cdFx0fSxcblxuXHRcdC8vIHBhcnNlIG5vZGVzIGluIEZCWFRyZWUuT2JqZWN0cy5BbmltYXRpb25MYXllci4gRWFjaCBsYXllcnMgaG9sZHMgcmVmZXJlbmNlc1xuXHRcdC8vIHRvIHZhcmlvdXMgQW5pbWF0aW9uQ3VydmVOb2RlcyBhbmQgaXMgcmVmZXJlbmNlZCBieSBhbiBBbmltYXRpb25TdGFjayBub2RlXG5cdFx0Ly8gbm90ZTogdGhlb3JldGljYWxseSBhIHN0YWNrIGNhbiBoYXZlIG11bHRpcGxlIGxheWVycywgaG93ZXZlciBpbiBwcmFjdGljZSB0aGVyZSBhbHdheXMgc2VlbXMgdG8gYmUgb25lIHBlciBzdGFja1xuXHRcdHBhcnNlQW5pbWF0aW9uTGF5ZXJzOiBmdW5jdGlvbiAoIGN1cnZlTm9kZXNNYXAgKSB7XG5cblx0XHRcdHZhciByYXdMYXllcnMgPSBmYnhUcmVlLk9iamVjdHMuQW5pbWF0aW9uTGF5ZXI7XG5cblx0XHRcdHZhciBsYXllcnNNYXAgPSBuZXcgTWFwKCk7XG5cblx0XHRcdGZvciAoIHZhciBub2RlSUQgaW4gcmF3TGF5ZXJzICkge1xuXG5cdFx0XHRcdHZhciBsYXllckN1cnZlTm9kZXMgPSBbXTtcblxuXHRcdFx0XHR2YXIgY29ubmVjdGlvbiA9IGNvbm5lY3Rpb25zLmdldCggcGFyc2VJbnQoIG5vZGVJRCApICk7XG5cblx0XHRcdFx0aWYgKCBjb25uZWN0aW9uICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0XHQvLyBhbGwgdGhlIGFuaW1hdGlvbkN1cnZlTm9kZXMgdXNlZCBpbiB0aGUgbGF5ZXJcblx0XHRcdFx0XHR2YXIgY2hpbGRyZW4gPSBjb25uZWN0aW9uLmNoaWxkcmVuO1xuXG5cdFx0XHRcdFx0Y2hpbGRyZW4uZm9yRWFjaCggZnVuY3Rpb24gKCBjaGlsZCwgaSApIHtcblxuXHRcdFx0XHRcdFx0aWYgKCBjdXJ2ZU5vZGVzTWFwLmhhcyggY2hpbGQuSUQgKSApIHtcblxuXHRcdFx0XHRcdFx0XHR2YXIgY3VydmVOb2RlID0gY3VydmVOb2Rlc01hcC5nZXQoIGNoaWxkLklEICk7XG5cblx0XHRcdFx0XHRcdFx0Ly8gY2hlY2sgdGhhdCB0aGUgY3VydmVzIGFyZSBkZWZpbmVkIGZvciBhdCBsZWFzdCBvbmUgYXhpcywgb3RoZXJ3aXNlIGlnbm9yZSB0aGUgY3VydmVOb2RlXG5cdFx0XHRcdFx0XHRcdGlmICggY3VydmVOb2RlLmN1cnZlcy54ICE9PSB1bmRlZmluZWQgfHwgY3VydmVOb2RlLmN1cnZlcy55ICE9PSB1bmRlZmluZWQgfHwgY3VydmVOb2RlLmN1cnZlcy56ICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHRpZiAoIGxheWVyQ3VydmVOb2Rlc1sgaSBdID09PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHRcdHZhciBtb2RlbElEID0gY29ubmVjdGlvbnMuZ2V0KCBjaGlsZC5JRCApLnBhcmVudHMuZmlsdGVyKCBmdW5jdGlvbiAoIHBhcmVudCApIHtcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gcGFyZW50LnJlbGF0aW9uc2hpcCAhPT0gdW5kZWZpbmVkO1xuXG5cdFx0XHRcdFx0XHRcdFx0XHR9IClbIDAgXS5JRDtcblxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKCBtb2RlbElEICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0dmFyIHJhd01vZGVsID0gZmJ4VHJlZS5PYmplY3RzLk1vZGVsWyBtb2RlbElELnRvU3RyaW5nKCkgXTtcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoIHJhd01vZGVsID09PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjb25zb2xlLndhcm4oICdUSFJFRS5GQlhMb2FkZXI6IEVuY291bnRlcmVkIGEgdW51c2VkIGN1cnZlLicsIGNoaWxkICk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuO1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHRcdFx0XHR2YXIgbm9kZSA9IHtcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdG1vZGVsTmFtZTogcmF3TW9kZWwuYXR0ck5hbWUgPyBQcm9wZXJ0eUJpbmRpbmcuc2FuaXRpemVOb2RlTmFtZSggcmF3TW9kZWwuYXR0ck5hbWUgKSA6ICcnLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdElEOiByYXdNb2RlbC5pZCxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpbml0aWFsUG9zaXRpb246IFsgMCwgMCwgMCBdLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGluaXRpYWxSb3RhdGlvbjogWyAwLCAwLCAwIF0sXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0aW5pdGlhbFNjYWxlOiBbIDEsIDEsIDEgXSxcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9O1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHNjZW5lR3JhcGgudHJhdmVyc2UoIGZ1bmN0aW9uICggY2hpbGQgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoIGNoaWxkLklEID09PSByYXdNb2RlbC5pZCApIHtcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0bm9kZS50cmFuc2Zvcm0gPSBjaGlsZC5tYXRyaXg7XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmICggY2hpbGQudXNlckRhdGEudHJhbnNmb3JtRGF0YSApIG5vZGUuZXVsZXJPcmRlciA9IGNoaWxkLnVzZXJEYXRhLnRyYW5zZm9ybURhdGEuZXVsZXJPcmRlcjtcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9ICk7XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKCAhIG5vZGUudHJhbnNmb3JtICkgbm9kZS50cmFuc2Zvcm0gPSBuZXcgTWF0cml4NCgpO1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vIGlmIHRoZSBhbmltYXRlZCBtb2RlbCBpcyBwcmUgcm90YXRlZCwgd2UnbGwgaGF2ZSB0byBhcHBseSB0aGUgcHJlIHJvdGF0aW9ucyB0byBldmVyeVxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBhbmltYXRpb24gdmFsdWUgYXMgd2VsbFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoICdQcmVSb3RhdGlvbicgaW4gcmF3TW9kZWwgKSBub2RlLnByZVJvdGF0aW9uID0gcmF3TW9kZWwuUHJlUm90YXRpb24udmFsdWU7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmICggJ1Bvc3RSb3RhdGlvbicgaW4gcmF3TW9kZWwgKSBub2RlLnBvc3RSb3RhdGlvbiA9IHJhd01vZGVsLlBvc3RSb3RhdGlvbi52YWx1ZTtcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRsYXllckN1cnZlTm9kZXNbIGkgXSA9IG5vZGU7XG5cblx0XHRcdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHRcdGlmICggbGF5ZXJDdXJ2ZU5vZGVzWyBpIF0gKSBsYXllckN1cnZlTm9kZXNbIGkgXVsgY3VydmVOb2RlLmF0dHIgXSA9IGN1cnZlTm9kZTtcblxuXHRcdFx0XHRcdFx0XHR9IGVsc2UgaWYgKCBjdXJ2ZU5vZGUuY3VydmVzLm1vcnBoICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHRpZiAoIGxheWVyQ3VydmVOb2Rlc1sgaSBdID09PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHRcdHZhciBkZWZvcm1lcklEID0gY29ubmVjdGlvbnMuZ2V0KCBjaGlsZC5JRCApLnBhcmVudHMuZmlsdGVyKCBmdW5jdGlvbiAoIHBhcmVudCApIHtcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gcGFyZW50LnJlbGF0aW9uc2hpcCAhPT0gdW5kZWZpbmVkO1xuXG5cdFx0XHRcdFx0XHRcdFx0XHR9IClbIDAgXS5JRDtcblxuXHRcdFx0XHRcdFx0XHRcdFx0dmFyIG1vcnBoZXJJRCA9IGNvbm5lY3Rpb25zLmdldCggZGVmb3JtZXJJRCApLnBhcmVudHNbIDAgXS5JRDtcblx0XHRcdFx0XHRcdFx0XHRcdHZhciBnZW9JRCA9IGNvbm5lY3Rpb25zLmdldCggbW9ycGhlcklEICkucGFyZW50c1sgMCBdLklEO1xuXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBhc3N1bWluZyBnZW9tZXRyeSBpcyBub3QgdXNlZCBpbiBtb3JlIHRoYW4gb25lIG1vZGVsXG5cdFx0XHRcdFx0XHRcdFx0XHR2YXIgbW9kZWxJRCA9IGNvbm5lY3Rpb25zLmdldCggZ2VvSUQgKS5wYXJlbnRzWyAwIF0uSUQ7XG5cblx0XHRcdFx0XHRcdFx0XHRcdHZhciByYXdNb2RlbCA9IGZieFRyZWUuT2JqZWN0cy5Nb2RlbFsgbW9kZWxJRCBdO1xuXG5cdFx0XHRcdFx0XHRcdFx0XHR2YXIgbm9kZSA9IHtcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRtb2RlbE5hbWU6IHJhd01vZGVsLmF0dHJOYW1lID8gUHJvcGVydHlCaW5kaW5nLnNhbml0aXplTm9kZU5hbWUoIHJhd01vZGVsLmF0dHJOYW1lICkgOiAnJyxcblx0XHRcdFx0XHRcdFx0XHRcdFx0bW9ycGhOYW1lOiBmYnhUcmVlLk9iamVjdHMuRGVmb3JtZXJbIGRlZm9ybWVySUQgXS5hdHRyTmFtZSxcblxuXHRcdFx0XHRcdFx0XHRcdFx0fTtcblxuXHRcdFx0XHRcdFx0XHRcdFx0bGF5ZXJDdXJ2ZU5vZGVzWyBpIF0gPSBub2RlO1xuXG5cdFx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdFx0bGF5ZXJDdXJ2ZU5vZGVzWyBpIF1bIGN1cnZlTm9kZS5hdHRyIF0gPSBjdXJ2ZU5vZGU7XG5cblx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHR9ICk7XG5cblx0XHRcdFx0XHRsYXllcnNNYXAuc2V0KCBwYXJzZUludCggbm9kZUlEICksIGxheWVyQ3VydmVOb2RlcyApO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gbGF5ZXJzTWFwO1xuXG5cdFx0fSxcblxuXHRcdC8vIHBhcnNlIG5vZGVzIGluIEZCWFRyZWUuT2JqZWN0cy5BbmltYXRpb25TdGFjay4gVGhlc2UgYXJlIHRoZSB0b3AgbGV2ZWwgbm9kZSBpbiB0aGUgYW5pbWF0aW9uXG5cdFx0Ly8gaGllcmFyY2h5LiBFYWNoIFN0YWNrIG5vZGUgd2lsbCBiZSB1c2VkIHRvIGNyZWF0ZSBhIEFuaW1hdGlvbkNsaXBcblx0XHRwYXJzZUFuaW1TdGFja3M6IGZ1bmN0aW9uICggbGF5ZXJzTWFwICkge1xuXG5cdFx0XHR2YXIgcmF3U3RhY2tzID0gZmJ4VHJlZS5PYmplY3RzLkFuaW1hdGlvblN0YWNrO1xuXG5cdFx0XHQvLyBjb25uZWN0IHRoZSBzdGFja3MgKGNsaXBzKSB1cCB0byB0aGUgbGF5ZXJzXG5cdFx0XHR2YXIgcmF3Q2xpcHMgPSB7fTtcblxuXHRcdFx0Zm9yICggdmFyIG5vZGVJRCBpbiByYXdTdGFja3MgKSB7XG5cblx0XHRcdFx0dmFyIGNoaWxkcmVuID0gY29ubmVjdGlvbnMuZ2V0KCBwYXJzZUludCggbm9kZUlEICkgKS5jaGlsZHJlbjtcblxuXHRcdFx0XHRpZiAoIGNoaWxkcmVuLmxlbmd0aCA+IDEgKSB7XG5cblx0XHRcdFx0XHQvLyBpdCBzZWVtcyBsaWtlIHN0YWNrcyB3aWxsIGFsd2F5cyBiZSBhc3NvY2lhdGVkIHdpdGggYSBzaW5nbGUgbGF5ZXIuIEJ1dCBqdXN0IGluIGNhc2UgdGhlcmUgYXJlIGZpbGVzXG5cdFx0XHRcdFx0Ly8gd2hlcmUgdGhlcmUgYXJlIG11bHRpcGxlIGxheWVycyBwZXIgc3RhY2ssIHdlJ2xsIGRpc3BsYXkgYSB3YXJuaW5nXG5cdFx0XHRcdFx0Y29uc29sZS53YXJuKCAnVEhSRUUuRkJYTG9hZGVyOiBFbmNvdW50ZXJlZCBhbiBhbmltYXRpb24gc3RhY2sgd2l0aCBtdWx0aXBsZSBsYXllcnMsIHRoaXMgaXMgY3VycmVudGx5IG5vdCBzdXBwb3J0ZWQuIElnbm9yaW5nIHN1YnNlcXVlbnQgbGF5ZXJzLicgKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdFx0dmFyIGxheWVyID0gbGF5ZXJzTWFwLmdldCggY2hpbGRyZW5bIDAgXS5JRCApO1xuXG5cdFx0XHRcdHJhd0NsaXBzWyBub2RlSUQgXSA9IHtcblxuXHRcdFx0XHRcdG5hbWU6IHJhd1N0YWNrc1sgbm9kZUlEIF0uYXR0ck5hbWUsXG5cdFx0XHRcdFx0bGF5ZXI6IGxheWVyLFxuXG5cdFx0XHRcdH07XG5cblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIHJhd0NsaXBzO1xuXG5cdFx0fSxcblxuXHRcdGFkZENsaXA6IGZ1bmN0aW9uICggcmF3Q2xpcCApIHtcblxuXHRcdFx0dmFyIHRyYWNrcyA9IFtdO1xuXG5cdFx0XHR2YXIgc2NvcGUgPSB0aGlzO1xuXHRcdFx0cmF3Q2xpcC5sYXllci5mb3JFYWNoKCBmdW5jdGlvbiAoIHJhd1RyYWNrcyApIHtcblxuXHRcdFx0XHR0cmFja3MgPSB0cmFja3MuY29uY2F0KCBzY29wZS5nZW5lcmF0ZVRyYWNrcyggcmF3VHJhY2tzICkgKTtcblxuXHRcdFx0fSApO1xuXG5cdFx0XHRyZXR1cm4gbmV3IEFuaW1hdGlvbkNsaXAoIHJhd0NsaXAubmFtZSwgLSAxLCB0cmFja3MgKTtcblxuXHRcdH0sXG5cblx0XHRnZW5lcmF0ZVRyYWNrczogZnVuY3Rpb24gKCByYXdUcmFja3MgKSB7XG5cblx0XHRcdHZhciB0cmFja3MgPSBbXTtcblxuXHRcdFx0dmFyIGluaXRpYWxQb3NpdGlvbiA9IG5ldyBWZWN0b3IzKCk7XG5cdFx0XHR2YXIgaW5pdGlhbFJvdGF0aW9uID0gbmV3IFF1YXRlcm5pb24oKTtcblx0XHRcdHZhciBpbml0aWFsU2NhbGUgPSBuZXcgVmVjdG9yMygpO1xuXG5cdFx0XHRpZiAoIHJhd1RyYWNrcy50cmFuc2Zvcm0gKSByYXdUcmFja3MudHJhbnNmb3JtLmRlY29tcG9zZSggaW5pdGlhbFBvc2l0aW9uLCBpbml0aWFsUm90YXRpb24sIGluaXRpYWxTY2FsZSApO1xuXG5cdFx0XHRpbml0aWFsUG9zaXRpb24gPSBpbml0aWFsUG9zaXRpb24udG9BcnJheSgpO1xuXHRcdFx0aW5pdGlhbFJvdGF0aW9uID0gbmV3IEV1bGVyKCkuc2V0RnJvbVF1YXRlcm5pb24oIGluaXRpYWxSb3RhdGlvbiwgcmF3VHJhY2tzLmV1bGVyT3JkZXIgKS50b0FycmF5KCk7XG5cdFx0XHRpbml0aWFsU2NhbGUgPSBpbml0aWFsU2NhbGUudG9BcnJheSgpO1xuXG5cdFx0XHRpZiAoIHJhd1RyYWNrcy5UICE9PSB1bmRlZmluZWQgJiYgT2JqZWN0LmtleXMoIHJhd1RyYWNrcy5ULmN1cnZlcyApLmxlbmd0aCA+IDAgKSB7XG5cblx0XHRcdFx0dmFyIHBvc2l0aW9uVHJhY2sgPSB0aGlzLmdlbmVyYXRlVmVjdG9yVHJhY2soIHJhd1RyYWNrcy5tb2RlbE5hbWUsIHJhd1RyYWNrcy5ULmN1cnZlcywgaW5pdGlhbFBvc2l0aW9uLCAncG9zaXRpb24nICk7XG5cdFx0XHRcdGlmICggcG9zaXRpb25UcmFjayAhPT0gdW5kZWZpbmVkICkgdHJhY2tzLnB1c2goIHBvc2l0aW9uVHJhY2sgKTtcblxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIHJhd1RyYWNrcy5SICE9PSB1bmRlZmluZWQgJiYgT2JqZWN0LmtleXMoIHJhd1RyYWNrcy5SLmN1cnZlcyApLmxlbmd0aCA+IDAgKSB7XG5cblx0XHRcdFx0dmFyIHJvdGF0aW9uVHJhY2sgPSB0aGlzLmdlbmVyYXRlUm90YXRpb25UcmFjayggcmF3VHJhY2tzLm1vZGVsTmFtZSwgcmF3VHJhY2tzLlIuY3VydmVzLCBpbml0aWFsUm90YXRpb24sIHJhd1RyYWNrcy5wcmVSb3RhdGlvbiwgcmF3VHJhY2tzLnBvc3RSb3RhdGlvbiwgcmF3VHJhY2tzLmV1bGVyT3JkZXIgKTtcblx0XHRcdFx0aWYgKCByb3RhdGlvblRyYWNrICE9PSB1bmRlZmluZWQgKSB0cmFja3MucHVzaCggcm90YXRpb25UcmFjayApO1xuXG5cdFx0XHR9XG5cblx0XHRcdGlmICggcmF3VHJhY2tzLlMgIT09IHVuZGVmaW5lZCAmJiBPYmplY3Qua2V5cyggcmF3VHJhY2tzLlMuY3VydmVzICkubGVuZ3RoID4gMCApIHtcblxuXHRcdFx0XHR2YXIgc2NhbGVUcmFjayA9IHRoaXMuZ2VuZXJhdGVWZWN0b3JUcmFjayggcmF3VHJhY2tzLm1vZGVsTmFtZSwgcmF3VHJhY2tzLlMuY3VydmVzLCBpbml0aWFsU2NhbGUsICdzY2FsZScgKTtcblx0XHRcdFx0aWYgKCBzY2FsZVRyYWNrICE9PSB1bmRlZmluZWQgKSB0cmFja3MucHVzaCggc2NhbGVUcmFjayApO1xuXG5cdFx0XHR9XG5cblx0XHRcdGlmICggcmF3VHJhY2tzLkRlZm9ybVBlcmNlbnQgIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0XHR2YXIgbW9ycGhUcmFjayA9IHRoaXMuZ2VuZXJhdGVNb3JwaFRyYWNrKCByYXdUcmFja3MgKTtcblx0XHRcdFx0aWYgKCBtb3JwaFRyYWNrICE9PSB1bmRlZmluZWQgKSB0cmFja3MucHVzaCggbW9ycGhUcmFjayApO1xuXG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiB0cmFja3M7XG5cblx0XHR9LFxuXG5cdFx0Z2VuZXJhdGVWZWN0b3JUcmFjazogZnVuY3Rpb24gKCBtb2RlbE5hbWUsIGN1cnZlcywgaW5pdGlhbFZhbHVlLCB0eXBlICkge1xuXG5cdFx0XHR2YXIgdGltZXMgPSB0aGlzLmdldFRpbWVzRm9yQWxsQXhlcyggY3VydmVzICk7XG5cdFx0XHR2YXIgdmFsdWVzID0gdGhpcy5nZXRLZXlmcmFtZVRyYWNrVmFsdWVzKCB0aW1lcywgY3VydmVzLCBpbml0aWFsVmFsdWUgKTtcblxuXHRcdFx0cmV0dXJuIG5ldyBWZWN0b3JLZXlmcmFtZVRyYWNrKCBtb2RlbE5hbWUgKyAnLicgKyB0eXBlLCB0aW1lcywgdmFsdWVzICk7XG5cblx0XHR9LFxuXG5cdFx0Z2VuZXJhdGVSb3RhdGlvblRyYWNrOiBmdW5jdGlvbiAoIG1vZGVsTmFtZSwgY3VydmVzLCBpbml0aWFsVmFsdWUsIHByZVJvdGF0aW9uLCBwb3N0Um90YXRpb24sIGV1bGVyT3JkZXIgKSB7XG5cblx0XHRcdGlmICggY3VydmVzLnggIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0XHR0aGlzLmludGVycG9sYXRlUm90YXRpb25zKCBjdXJ2ZXMueCApO1xuXHRcdFx0XHRjdXJ2ZXMueC52YWx1ZXMgPSBjdXJ2ZXMueC52YWx1ZXMubWFwKCBNYXRoVXRpbHMuZGVnVG9SYWQgKTtcblxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIGN1cnZlcy55ICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0dGhpcy5pbnRlcnBvbGF0ZVJvdGF0aW9ucyggY3VydmVzLnkgKTtcblx0XHRcdFx0Y3VydmVzLnkudmFsdWVzID0gY3VydmVzLnkudmFsdWVzLm1hcCggTWF0aFV0aWxzLmRlZ1RvUmFkICk7XG5cblx0XHRcdH1cblxuXHRcdFx0aWYgKCBjdXJ2ZXMueiAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRcdHRoaXMuaW50ZXJwb2xhdGVSb3RhdGlvbnMoIGN1cnZlcy56ICk7XG5cdFx0XHRcdGN1cnZlcy56LnZhbHVlcyA9IGN1cnZlcy56LnZhbHVlcy5tYXAoIE1hdGhVdGlscy5kZWdUb1JhZCApO1xuXG5cdFx0XHR9XG5cblx0XHRcdHZhciB0aW1lcyA9IHRoaXMuZ2V0VGltZXNGb3JBbGxBeGVzKCBjdXJ2ZXMgKTtcblx0XHRcdHZhciB2YWx1ZXMgPSB0aGlzLmdldEtleWZyYW1lVHJhY2tWYWx1ZXMoIHRpbWVzLCBjdXJ2ZXMsIGluaXRpYWxWYWx1ZSApO1xuXG5cdFx0XHRpZiAoIHByZVJvdGF0aW9uICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0cHJlUm90YXRpb24gPSBwcmVSb3RhdGlvbi5tYXAoIE1hdGhVdGlscy5kZWdUb1JhZCApO1xuXHRcdFx0XHRwcmVSb3RhdGlvbi5wdXNoKCBldWxlck9yZGVyICk7XG5cblx0XHRcdFx0cHJlUm90YXRpb24gPSBuZXcgRXVsZXIoKS5mcm9tQXJyYXkoIHByZVJvdGF0aW9uICk7XG5cdFx0XHRcdHByZVJvdGF0aW9uID0gbmV3IFF1YXRlcm5pb24oKS5zZXRGcm9tRXVsZXIoIHByZVJvdGF0aW9uICk7XG5cblx0XHRcdH1cblxuXHRcdFx0aWYgKCBwb3N0Um90YXRpb24gIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0XHRwb3N0Um90YXRpb24gPSBwb3N0Um90YXRpb24ubWFwKCBNYXRoVXRpbHMuZGVnVG9SYWQgKTtcblx0XHRcdFx0cG9zdFJvdGF0aW9uLnB1c2goIGV1bGVyT3JkZXIgKTtcblxuXHRcdFx0XHRwb3N0Um90YXRpb24gPSBuZXcgRXVsZXIoKS5mcm9tQXJyYXkoIHBvc3RSb3RhdGlvbiApO1xuXHRcdFx0XHRwb3N0Um90YXRpb24gPSBuZXcgUXVhdGVybmlvbigpLnNldEZyb21FdWxlciggcG9zdFJvdGF0aW9uICkuaW52ZXJ0KCk7XG5cblx0XHRcdH1cblxuXHRcdFx0dmFyIHF1YXRlcm5pb24gPSBuZXcgUXVhdGVybmlvbigpO1xuXHRcdFx0dmFyIGV1bGVyID0gbmV3IEV1bGVyKCk7XG5cblx0XHRcdHZhciBxdWF0ZXJuaW9uVmFsdWVzID0gW107XG5cblx0XHRcdGZvciAoIHZhciBpID0gMDsgaSA8IHZhbHVlcy5sZW5ndGg7IGkgKz0gMyApIHtcblxuXHRcdFx0XHRldWxlci5zZXQoIHZhbHVlc1sgaSBdLCB2YWx1ZXNbIGkgKyAxIF0sIHZhbHVlc1sgaSArIDIgXSwgZXVsZXJPcmRlciApO1xuXG5cdFx0XHRcdHF1YXRlcm5pb24uc2V0RnJvbUV1bGVyKCBldWxlciApO1xuXG5cdFx0XHRcdGlmICggcHJlUm90YXRpb24gIT09IHVuZGVmaW5lZCApIHF1YXRlcm5pb24ucHJlbXVsdGlwbHkoIHByZVJvdGF0aW9uICk7XG5cdFx0XHRcdGlmICggcG9zdFJvdGF0aW9uICE9PSB1bmRlZmluZWQgKSBxdWF0ZXJuaW9uLm11bHRpcGx5KCBwb3N0Um90YXRpb24gKTtcblxuXHRcdFx0XHRxdWF0ZXJuaW9uLnRvQXJyYXkoIHF1YXRlcm5pb25WYWx1ZXMsICggaSAvIDMgKSAqIDQgKTtcblxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gbmV3IFF1YXRlcm5pb25LZXlmcmFtZVRyYWNrKCBtb2RlbE5hbWUgKyAnLnF1YXRlcm5pb24nLCB0aW1lcywgcXVhdGVybmlvblZhbHVlcyApO1xuXG5cdFx0fSxcblxuXHRcdGdlbmVyYXRlTW9ycGhUcmFjazogZnVuY3Rpb24gKCByYXdUcmFja3MgKSB7XG5cblx0XHRcdHZhciBjdXJ2ZXMgPSByYXdUcmFja3MuRGVmb3JtUGVyY2VudC5jdXJ2ZXMubW9ycGg7XG5cdFx0XHR2YXIgdmFsdWVzID0gY3VydmVzLnZhbHVlcy5tYXAoIGZ1bmN0aW9uICggdmFsICkge1xuXG5cdFx0XHRcdHJldHVybiB2YWwgLyAxMDA7XG5cblx0XHRcdH0gKTtcblxuXHRcdFx0dmFyIG1vcnBoTnVtID0gc2NlbmVHcmFwaC5nZXRPYmplY3RCeU5hbWUoIHJhd1RyYWNrcy5tb2RlbE5hbWUgKS5tb3JwaFRhcmdldERpY3Rpb25hcnlbIHJhd1RyYWNrcy5tb3JwaE5hbWUgXTtcblxuXHRcdFx0cmV0dXJuIG5ldyBOdW1iZXJLZXlmcmFtZVRyYWNrKCByYXdUcmFja3MubW9kZWxOYW1lICsgJy5tb3JwaFRhcmdldEluZmx1ZW5jZXNbJyArIG1vcnBoTnVtICsgJ10nLCBjdXJ2ZXMudGltZXMsIHZhbHVlcyApO1xuXG5cdFx0fSxcblxuXHRcdC8vIEZvciBhbGwgYW5pbWF0ZWQgb2JqZWN0cywgdGltZXMgYXJlIGRlZmluZWQgc2VwYXJhdGVseSBmb3IgZWFjaCBheGlzXG5cdFx0Ly8gSGVyZSB3ZSdsbCBjb21iaW5lIHRoZSB0aW1lcyBpbnRvIG9uZSBzb3J0ZWQgYXJyYXkgd2l0aG91dCBkdXBsaWNhdGVzXG5cdFx0Z2V0VGltZXNGb3JBbGxBeGVzOiBmdW5jdGlvbiAoIGN1cnZlcyApIHtcblxuXHRcdFx0dmFyIHRpbWVzID0gW107XG5cblx0XHRcdC8vIGZpcnN0IGpvaW4gdG9nZXRoZXIgdGhlIHRpbWVzIGZvciBlYWNoIGF4aXMsIGlmIGRlZmluZWRcblx0XHRcdGlmICggY3VydmVzLnggIT09IHVuZGVmaW5lZCApIHRpbWVzID0gdGltZXMuY29uY2F0KCBjdXJ2ZXMueC50aW1lcyApO1xuXHRcdFx0aWYgKCBjdXJ2ZXMueSAhPT0gdW5kZWZpbmVkICkgdGltZXMgPSB0aW1lcy5jb25jYXQoIGN1cnZlcy55LnRpbWVzICk7XG5cdFx0XHRpZiAoIGN1cnZlcy56ICE9PSB1bmRlZmluZWQgKSB0aW1lcyA9IHRpbWVzLmNvbmNhdCggY3VydmVzLnoudGltZXMgKTtcblxuXHRcdFx0Ly8gdGhlbiBzb3J0IHRoZW1cblx0XHRcdHRpbWVzID0gdGltZXMuc29ydCggZnVuY3Rpb24gKCBhLCBiICkge1xuXG5cdFx0XHRcdHJldHVybiBhIC0gYjtcblxuXHRcdFx0fSApO1xuXG5cdFx0XHQvLyBhbmQgcmVtb3ZlIGR1cGxpY2F0ZXNcblx0XHRcdGlmICggdGltZXMubGVuZ3RoID4gMSApIHtcblxuXHRcdFx0XHR2YXIgdGFyZ2V0SW5kZXggPSAxO1xuXHRcdFx0XHR2YXIgbGFzdFZhbHVlID0gdGltZXNbIDAgXTtcblx0XHRcdFx0Zm9yICggdmFyIGkgPSAxOyBpIDwgdGltZXMubGVuZ3RoOyBpICsrICkge1xuXG5cdFx0XHRcdFx0dmFyIGN1cnJlbnRWYWx1ZSA9IHRpbWVzWyBpIF07XG5cdFx0XHRcdFx0aWYgKCBjdXJyZW50VmFsdWUgIT09IGxhc3RWYWx1ZSApIHtcblxuXHRcdFx0XHRcdFx0dGltZXNbIHRhcmdldEluZGV4IF0gPSBjdXJyZW50VmFsdWU7XG5cdFx0XHRcdFx0XHRsYXN0VmFsdWUgPSBjdXJyZW50VmFsdWU7XG5cdFx0XHRcdFx0XHR0YXJnZXRJbmRleCArKztcblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHR9XG5cblx0XHRcdFx0dGltZXMgPSB0aW1lcy5zbGljZSggMCwgdGFyZ2V0SW5kZXggKTtcblxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gdGltZXM7XG5cblx0XHR9LFxuXG5cdFx0Z2V0S2V5ZnJhbWVUcmFja1ZhbHVlczogZnVuY3Rpb24gKCB0aW1lcywgY3VydmVzLCBpbml0aWFsVmFsdWUgKSB7XG5cblx0XHRcdHZhciBwcmV2VmFsdWUgPSBpbml0aWFsVmFsdWU7XG5cblx0XHRcdHZhciB2YWx1ZXMgPSBbXTtcblxuXHRcdFx0dmFyIHhJbmRleCA9IC0gMTtcblx0XHRcdHZhciB5SW5kZXggPSAtIDE7XG5cdFx0XHR2YXIgekluZGV4ID0gLSAxO1xuXG5cdFx0XHR0aW1lcy5mb3JFYWNoKCBmdW5jdGlvbiAoIHRpbWUgKSB7XG5cblx0XHRcdFx0aWYgKCBjdXJ2ZXMueCApIHhJbmRleCA9IGN1cnZlcy54LnRpbWVzLmluZGV4T2YoIHRpbWUgKTtcblx0XHRcdFx0aWYgKCBjdXJ2ZXMueSApIHlJbmRleCA9IGN1cnZlcy55LnRpbWVzLmluZGV4T2YoIHRpbWUgKTtcblx0XHRcdFx0aWYgKCBjdXJ2ZXMueiApIHpJbmRleCA9IGN1cnZlcy56LnRpbWVzLmluZGV4T2YoIHRpbWUgKTtcblxuXHRcdFx0XHQvLyBpZiB0aGVyZSBpcyBhbiB4IHZhbHVlIGRlZmluZWQgZm9yIHRoaXMgZnJhbWUsIHVzZSB0aGF0XG5cdFx0XHRcdGlmICggeEluZGV4ICE9PSAtIDEgKSB7XG5cblx0XHRcdFx0XHR2YXIgeFZhbHVlID0gY3VydmVzLngudmFsdWVzWyB4SW5kZXggXTtcblx0XHRcdFx0XHR2YWx1ZXMucHVzaCggeFZhbHVlICk7XG5cdFx0XHRcdFx0cHJldlZhbHVlWyAwIF0gPSB4VmFsdWU7XG5cblx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdC8vIG90aGVyd2lzZSB1c2UgdGhlIHggdmFsdWUgZnJvbSB0aGUgcHJldmlvdXMgZnJhbWVcblx0XHRcdFx0XHR2YWx1ZXMucHVzaCggcHJldlZhbHVlWyAwIF0gKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKCB5SW5kZXggIT09IC0gMSApIHtcblxuXHRcdFx0XHRcdHZhciB5VmFsdWUgPSBjdXJ2ZXMueS52YWx1ZXNbIHlJbmRleCBdO1xuXHRcdFx0XHRcdHZhbHVlcy5wdXNoKCB5VmFsdWUgKTtcblx0XHRcdFx0XHRwcmV2VmFsdWVbIDEgXSA9IHlWYWx1ZTtcblxuXHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0dmFsdWVzLnB1c2goIHByZXZWYWx1ZVsgMSBdICk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmICggekluZGV4ICE9PSAtIDEgKSB7XG5cblx0XHRcdFx0XHR2YXIgelZhbHVlID0gY3VydmVzLnoudmFsdWVzWyB6SW5kZXggXTtcblx0XHRcdFx0XHR2YWx1ZXMucHVzaCggelZhbHVlICk7XG5cdFx0XHRcdFx0cHJldlZhbHVlWyAyIF0gPSB6VmFsdWU7XG5cblx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdHZhbHVlcy5wdXNoKCBwcmV2VmFsdWVbIDIgXSApO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fSApO1xuXG5cdFx0XHRyZXR1cm4gdmFsdWVzO1xuXG5cdFx0fSxcblxuXHRcdC8vIFJvdGF0aW9ucyBhcmUgZGVmaW5lZCBhcyBFdWxlciBhbmdsZXMgd2hpY2ggY2FuIGhhdmUgdmFsdWVzICBvZiBhbnkgc2l6ZVxuXHRcdC8vIFRoZXNlIHdpbGwgYmUgY29udmVydGVkIHRvIHF1YXRlcm5pb25zIHdoaWNoIGRvbid0IHN1cHBvcnQgdmFsdWVzIGdyZWF0ZXIgdGhhblxuXHRcdC8vIFBJLCBzbyB3ZSdsbCBpbnRlcnBvbGF0ZSBsYXJnZSByb3RhdGlvbnNcblx0XHRpbnRlcnBvbGF0ZVJvdGF0aW9uczogZnVuY3Rpb24gKCBjdXJ2ZSApIHtcblxuXHRcdFx0Zm9yICggdmFyIGkgPSAxOyBpIDwgY3VydmUudmFsdWVzLmxlbmd0aDsgaSArKyApIHtcblxuXHRcdFx0XHR2YXIgaW5pdGlhbFZhbHVlID0gY3VydmUudmFsdWVzWyBpIC0gMSBdO1xuXHRcdFx0XHR2YXIgdmFsdWVzU3BhbiA9IGN1cnZlLnZhbHVlc1sgaSBdIC0gaW5pdGlhbFZhbHVlO1xuXG5cdFx0XHRcdHZhciBhYnNvbHV0ZVNwYW4gPSBNYXRoLmFicyggdmFsdWVzU3BhbiApO1xuXG5cdFx0XHRcdGlmICggYWJzb2x1dGVTcGFuID49IDE4MCApIHtcblxuXHRcdFx0XHRcdHZhciBudW1TdWJJbnRlcnZhbHMgPSBhYnNvbHV0ZVNwYW4gLyAxODA7XG5cblx0XHRcdFx0XHR2YXIgc3RlcCA9IHZhbHVlc1NwYW4gLyBudW1TdWJJbnRlcnZhbHM7XG5cdFx0XHRcdFx0dmFyIG5leHRWYWx1ZSA9IGluaXRpYWxWYWx1ZSArIHN0ZXA7XG5cblx0XHRcdFx0XHR2YXIgaW5pdGlhbFRpbWUgPSBjdXJ2ZS50aW1lc1sgaSAtIDEgXTtcblx0XHRcdFx0XHR2YXIgdGltZVNwYW4gPSBjdXJ2ZS50aW1lc1sgaSBdIC0gaW5pdGlhbFRpbWU7XG5cdFx0XHRcdFx0dmFyIGludGVydmFsID0gdGltZVNwYW4gLyBudW1TdWJJbnRlcnZhbHM7XG5cdFx0XHRcdFx0dmFyIG5leHRUaW1lID0gaW5pdGlhbFRpbWUgKyBpbnRlcnZhbDtcblxuXHRcdFx0XHRcdHZhciBpbnRlcnBvbGF0ZWRUaW1lcyA9IFtdO1xuXHRcdFx0XHRcdHZhciBpbnRlcnBvbGF0ZWRWYWx1ZXMgPSBbXTtcblxuXHRcdFx0XHRcdHdoaWxlICggbmV4dFRpbWUgPCBjdXJ2ZS50aW1lc1sgaSBdICkge1xuXG5cdFx0XHRcdFx0XHRpbnRlcnBvbGF0ZWRUaW1lcy5wdXNoKCBuZXh0VGltZSApO1xuXHRcdFx0XHRcdFx0bmV4dFRpbWUgKz0gaW50ZXJ2YWw7XG5cblx0XHRcdFx0XHRcdGludGVycG9sYXRlZFZhbHVlcy5wdXNoKCBuZXh0VmFsdWUgKTtcblx0XHRcdFx0XHRcdG5leHRWYWx1ZSArPSBzdGVwO1xuXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Y3VydmUudGltZXMgPSBpbmplY3QoIGN1cnZlLnRpbWVzLCBpLCBpbnRlcnBvbGF0ZWRUaW1lcyApO1xuXHRcdFx0XHRcdGN1cnZlLnZhbHVlcyA9IGluamVjdCggY3VydmUudmFsdWVzLCBpLCBpbnRlcnBvbGF0ZWRWYWx1ZXMgKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdH1cblxuXHRcdH0sXG5cblx0fTtcblxuXHQvLyBwYXJzZSBhbiBGQlggZmlsZSBpbiBBU0NJSSBmb3JtYXRcblx0ZnVuY3Rpb24gVGV4dFBhcnNlcigpIHt9XG5cblx0VGV4dFBhcnNlci5wcm90b3R5cGUgPSB7XG5cblx0XHRjb25zdHJ1Y3RvcjogVGV4dFBhcnNlcixcblxuXHRcdGdldFByZXZOb2RlOiBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdHJldHVybiB0aGlzLm5vZGVTdGFja1sgdGhpcy5jdXJyZW50SW5kZW50IC0gMiBdO1xuXG5cdFx0fSxcblxuXHRcdGdldEN1cnJlbnROb2RlOiBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdHJldHVybiB0aGlzLm5vZGVTdGFja1sgdGhpcy5jdXJyZW50SW5kZW50IC0gMSBdO1xuXG5cdFx0fSxcblxuXHRcdGdldEN1cnJlbnRQcm9wOiBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdHJldHVybiB0aGlzLmN1cnJlbnRQcm9wO1xuXG5cdFx0fSxcblxuXHRcdHB1c2hTdGFjazogZnVuY3Rpb24gKCBub2RlICkge1xuXG5cdFx0XHR0aGlzLm5vZGVTdGFjay5wdXNoKCBub2RlICk7XG5cdFx0XHR0aGlzLmN1cnJlbnRJbmRlbnQgKz0gMTtcblxuXHRcdH0sXG5cblx0XHRwb3BTdGFjazogZnVuY3Rpb24gKCkge1xuXG5cdFx0XHR0aGlzLm5vZGVTdGFjay5wb3AoKTtcblx0XHRcdHRoaXMuY3VycmVudEluZGVudCAtPSAxO1xuXG5cdFx0fSxcblxuXHRcdHNldEN1cnJlbnRQcm9wOiBmdW5jdGlvbiAoIHZhbCwgbmFtZSApIHtcblxuXHRcdFx0dGhpcy5jdXJyZW50UHJvcCA9IHZhbDtcblx0XHRcdHRoaXMuY3VycmVudFByb3BOYW1lID0gbmFtZTtcblxuXHRcdH0sXG5cblx0XHRwYXJzZTogZnVuY3Rpb24gKCB0ZXh0ICkge1xuXG5cdFx0XHR0aGlzLmN1cnJlbnRJbmRlbnQgPSAwO1xuXG5cdFx0XHR0aGlzLmFsbE5vZGVzID0gbmV3IEZCWFRyZWUoKTtcblx0XHRcdHRoaXMubm9kZVN0YWNrID0gW107XG5cdFx0XHR0aGlzLmN1cnJlbnRQcm9wID0gW107XG5cdFx0XHR0aGlzLmN1cnJlbnRQcm9wTmFtZSA9ICcnO1xuXG5cdFx0XHR2YXIgc2NvcGUgPSB0aGlzO1xuXG5cdFx0XHR2YXIgc3BsaXQgPSB0ZXh0LnNwbGl0KCAvW1xcclxcbl0rLyApO1xuXG5cdFx0XHRzcGxpdC5mb3JFYWNoKCBmdW5jdGlvbiAoIGxpbmUsIGkgKSB7XG5cblx0XHRcdFx0dmFyIG1hdGNoQ29tbWVudCA9IGxpbmUubWF0Y2goIC9eW1xcc1xcdF0qOy8gKTtcblx0XHRcdFx0dmFyIG1hdGNoRW1wdHkgPSBsaW5lLm1hdGNoKCAvXltcXHNcXHRdKiQvICk7XG5cblx0XHRcdFx0aWYgKCBtYXRjaENvbW1lbnQgfHwgbWF0Y2hFbXB0eSApIHJldHVybjtcblxuXHRcdFx0XHR2YXIgbWF0Y2hCZWdpbm5pbmcgPSBsaW5lLm1hdGNoKCAnXlxcXFx0eycgKyBzY29wZS5jdXJyZW50SW5kZW50ICsgJ30oXFxcXHcrKTooLiopeycsICcnICk7XG5cdFx0XHRcdHZhciBtYXRjaFByb3BlcnR5ID0gbGluZS5tYXRjaCggJ15cXFxcdHsnICsgKCBzY29wZS5jdXJyZW50SW5kZW50ICkgKyAnfShcXFxcdyspOltcXFxcc1xcXFx0XFxcXHJcXFxcbl0oLiopJyApO1xuXHRcdFx0XHR2YXIgbWF0Y2hFbmQgPSBsaW5lLm1hdGNoKCAnXlxcXFx0eycgKyAoIHNjb3BlLmN1cnJlbnRJbmRlbnQgLSAxICkgKyAnfX0nICk7XG5cblx0XHRcdFx0aWYgKCBtYXRjaEJlZ2lubmluZyApIHtcblxuXHRcdFx0XHRcdHNjb3BlLnBhcnNlTm9kZUJlZ2luKCBsaW5lLCBtYXRjaEJlZ2lubmluZyApO1xuXG5cdFx0XHRcdH0gZWxzZSBpZiAoIG1hdGNoUHJvcGVydHkgKSB7XG5cblx0XHRcdFx0XHRzY29wZS5wYXJzZU5vZGVQcm9wZXJ0eSggbGluZSwgbWF0Y2hQcm9wZXJ0eSwgc3BsaXRbICsrIGkgXSApO1xuXG5cdFx0XHRcdH0gZWxzZSBpZiAoIG1hdGNoRW5kICkge1xuXG5cdFx0XHRcdFx0c2NvcGUucG9wU3RhY2soKTtcblxuXHRcdFx0XHR9IGVsc2UgaWYgKCBsaW5lLm1hdGNoKCAvXlteXFxzXFx0fV0vICkgKSB7XG5cblx0XHRcdFx0XHQvLyBsYXJnZSBhcnJheXMgYXJlIHNwbGl0IG92ZXIgbXVsdGlwbGUgbGluZXMgdGVybWluYXRlZCB3aXRoIGEgJywnIGNoYXJhY3RlclxuXHRcdFx0XHRcdC8vIGlmIHRoaXMgaXMgZW5jb3VudGVyZWQgdGhlIGxpbmUgbmVlZHMgdG8gYmUgam9pbmVkIHRvIHRoZSBwcmV2aW91cyBsaW5lXG5cdFx0XHRcdFx0c2NvcGUucGFyc2VOb2RlUHJvcGVydHlDb250aW51ZWQoIGxpbmUgKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdH0gKTtcblxuXHRcdFx0cmV0dXJuIHRoaXMuYWxsTm9kZXM7XG5cblx0XHR9LFxuXG5cdFx0cGFyc2VOb2RlQmVnaW46IGZ1bmN0aW9uICggbGluZSwgcHJvcGVydHkgKSB7XG5cblx0XHRcdHZhciBub2RlTmFtZSA9IHByb3BlcnR5WyAxIF0udHJpbSgpLnJlcGxhY2UoIC9eXCIvLCAnJyApLnJlcGxhY2UoIC9cIiQvLCAnJyApO1xuXG5cdFx0XHR2YXIgbm9kZUF0dHJzID0gcHJvcGVydHlbIDIgXS5zcGxpdCggJywnICkubWFwKCBmdW5jdGlvbiAoIGF0dHIgKSB7XG5cblx0XHRcdFx0cmV0dXJuIGF0dHIudHJpbSgpLnJlcGxhY2UoIC9eXCIvLCAnJyApLnJlcGxhY2UoIC9cIiQvLCAnJyApO1xuXG5cdFx0XHR9ICk7XG5cblx0XHRcdHZhciBub2RlID0geyBuYW1lOiBub2RlTmFtZSB9O1xuXHRcdFx0dmFyIGF0dHJzID0gdGhpcy5wYXJzZU5vZGVBdHRyKCBub2RlQXR0cnMgKTtcblxuXHRcdFx0dmFyIGN1cnJlbnROb2RlID0gdGhpcy5nZXRDdXJyZW50Tm9kZSgpO1xuXG5cdFx0XHQvLyBhIHRvcCBub2RlXG5cdFx0XHRpZiAoIHRoaXMuY3VycmVudEluZGVudCA9PT0gMCApIHtcblxuXHRcdFx0XHR0aGlzLmFsbE5vZGVzLmFkZCggbm9kZU5hbWUsIG5vZGUgKTtcblxuXHRcdFx0fSBlbHNlIHsgLy8gYSBzdWJub2RlXG5cblx0XHRcdFx0Ly8gaWYgdGhlIHN1Ym5vZGUgYWxyZWFkeSBleGlzdHMsIGFwcGVuZCBpdFxuXHRcdFx0XHRpZiAoIG5vZGVOYW1lIGluIGN1cnJlbnROb2RlICkge1xuXG5cdFx0XHRcdFx0Ly8gc3BlY2lhbCBjYXNlIFBvc2UgbmVlZHMgUG9zZU5vZGVzIGFzIGFuIGFycmF5XG5cdFx0XHRcdFx0aWYgKCBub2RlTmFtZSA9PT0gJ1Bvc2VOb2RlJyApIHtcblxuXHRcdFx0XHRcdFx0Y3VycmVudE5vZGUuUG9zZU5vZGUucHVzaCggbm9kZSApO1xuXG5cdFx0XHRcdFx0fSBlbHNlIGlmICggY3VycmVudE5vZGVbIG5vZGVOYW1lIF0uaWQgIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0XHRcdFx0Y3VycmVudE5vZGVbIG5vZGVOYW1lIF0gPSB7fTtcblx0XHRcdFx0XHRcdGN1cnJlbnROb2RlWyBub2RlTmFtZSBdWyBjdXJyZW50Tm9kZVsgbm9kZU5hbWUgXS5pZCBdID0gY3VycmVudE5vZGVbIG5vZGVOYW1lIF07XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpZiAoIGF0dHJzLmlkICE9PSAnJyApIGN1cnJlbnROb2RlWyBub2RlTmFtZSBdWyBhdHRycy5pZCBdID0gbm9kZTtcblxuXHRcdFx0XHR9IGVsc2UgaWYgKCB0eXBlb2YgYXR0cnMuaWQgPT09ICdudW1iZXInICkge1xuXG5cdFx0XHRcdFx0Y3VycmVudE5vZGVbIG5vZGVOYW1lIF0gPSB7fTtcblx0XHRcdFx0XHRjdXJyZW50Tm9kZVsgbm9kZU5hbWUgXVsgYXR0cnMuaWQgXSA9IG5vZGU7XG5cblx0XHRcdFx0fSBlbHNlIGlmICggbm9kZU5hbWUgIT09ICdQcm9wZXJ0aWVzNzAnICkge1xuXG5cdFx0XHRcdFx0aWYgKCBub2RlTmFtZSA9PT0gJ1Bvc2VOb2RlJyApXHRjdXJyZW50Tm9kZVsgbm9kZU5hbWUgXSA9IFsgbm9kZSBdO1xuXHRcdFx0XHRcdGVsc2UgY3VycmVudE5vZGVbIG5vZGVOYW1lIF0gPSBub2RlO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIHR5cGVvZiBhdHRycy5pZCA9PT0gJ251bWJlcicgKSBub2RlLmlkID0gYXR0cnMuaWQ7XG5cdFx0XHRpZiAoIGF0dHJzLm5hbWUgIT09ICcnICkgbm9kZS5hdHRyTmFtZSA9IGF0dHJzLm5hbWU7XG5cdFx0XHRpZiAoIGF0dHJzLnR5cGUgIT09ICcnICkgbm9kZS5hdHRyVHlwZSA9IGF0dHJzLnR5cGU7XG5cblx0XHRcdHRoaXMucHVzaFN0YWNrKCBub2RlICk7XG5cblx0XHR9LFxuXG5cdFx0cGFyc2VOb2RlQXR0cjogZnVuY3Rpb24gKCBhdHRycyApIHtcblxuXHRcdFx0dmFyIGlkID0gYXR0cnNbIDAgXTtcblxuXHRcdFx0aWYgKCBhdHRyc1sgMCBdICE9PSAnJyApIHtcblxuXHRcdFx0XHRpZCA9IHBhcnNlSW50KCBhdHRyc1sgMCBdICk7XG5cblx0XHRcdFx0aWYgKCBpc05hTiggaWQgKSApIHtcblxuXHRcdFx0XHRcdGlkID0gYXR0cnNbIDAgXTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdH1cblxuXHRcdFx0dmFyIG5hbWUgPSAnJywgdHlwZSA9ICcnO1xuXG5cdFx0XHRpZiAoIGF0dHJzLmxlbmd0aCA+IDEgKSB7XG5cblx0XHRcdFx0bmFtZSA9IGF0dHJzWyAxIF0ucmVwbGFjZSggL14oXFx3Kyk6Oi8sICcnICk7XG5cdFx0XHRcdHR5cGUgPSBhdHRyc1sgMiBdO1xuXG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiB7IGlkOiBpZCwgbmFtZTogbmFtZSwgdHlwZTogdHlwZSB9O1xuXG5cdFx0fSxcblxuXHRcdHBhcnNlTm9kZVByb3BlcnR5OiBmdW5jdGlvbiAoIGxpbmUsIHByb3BlcnR5LCBjb250ZW50TGluZSApIHtcblxuXHRcdFx0dmFyIHByb3BOYW1lID0gcHJvcGVydHlbIDEgXS5yZXBsYWNlKCAvXlwiLywgJycgKS5yZXBsYWNlKCAvXCIkLywgJycgKS50cmltKCk7XG5cdFx0XHR2YXIgcHJvcFZhbHVlID0gcHJvcGVydHlbIDIgXS5yZXBsYWNlKCAvXlwiLywgJycgKS5yZXBsYWNlKCAvXCIkLywgJycgKS50cmltKCk7XG5cblx0XHRcdC8vIGZvciBzcGVjaWFsIGNhc2U6IGJhc2U2NCBpbWFnZSBkYXRhIGZvbGxvd3MgXCJDb250ZW50OiAsXCIgbGluZVxuXHRcdFx0Ly9cdENvbnRlbnQ6ICxcblx0XHRcdC8vXHQgXCIvOWovNFJEYVJYaHBaZ0FBVFUwQS4uLlwiXG5cdFx0XHRpZiAoIHByb3BOYW1lID09PSAnQ29udGVudCcgJiYgcHJvcFZhbHVlID09PSAnLCcgKSB7XG5cblx0XHRcdFx0cHJvcFZhbHVlID0gY29udGVudExpbmUucmVwbGFjZSggL1wiL2csICcnICkucmVwbGFjZSggLywkLywgJycgKS50cmltKCk7XG5cblx0XHRcdH1cblxuXHRcdFx0dmFyIGN1cnJlbnROb2RlID0gdGhpcy5nZXRDdXJyZW50Tm9kZSgpO1xuXHRcdFx0dmFyIHBhcmVudE5hbWUgPSBjdXJyZW50Tm9kZS5uYW1lO1xuXG5cdFx0XHRpZiAoIHBhcmVudE5hbWUgPT09ICdQcm9wZXJ0aWVzNzAnICkge1xuXG5cdFx0XHRcdHRoaXMucGFyc2VOb2RlU3BlY2lhbFByb3BlcnR5KCBsaW5lLCBwcm9wTmFtZSwgcHJvcFZhbHVlICk7XG5cdFx0XHRcdHJldHVybjtcblxuXHRcdFx0fVxuXG5cdFx0XHQvLyBDb25uZWN0aW9uc1xuXHRcdFx0aWYgKCBwcm9wTmFtZSA9PT0gJ0MnICkge1xuXG5cdFx0XHRcdHZhciBjb25uUHJvcHMgPSBwcm9wVmFsdWUuc3BsaXQoICcsJyApLnNsaWNlKCAxICk7XG5cdFx0XHRcdHZhciBmcm9tID0gcGFyc2VJbnQoIGNvbm5Qcm9wc1sgMCBdICk7XG5cdFx0XHRcdHZhciB0byA9IHBhcnNlSW50KCBjb25uUHJvcHNbIDEgXSApO1xuXG5cdFx0XHRcdHZhciByZXN0ID0gcHJvcFZhbHVlLnNwbGl0KCAnLCcgKS5zbGljZSggMyApO1xuXG5cdFx0XHRcdHJlc3QgPSByZXN0Lm1hcCggZnVuY3Rpb24gKCBlbGVtICkge1xuXG5cdFx0XHRcdFx0cmV0dXJuIGVsZW0udHJpbSgpLnJlcGxhY2UoIC9eXCIvLCAnJyApO1xuXG5cdFx0XHRcdH0gKTtcblxuXHRcdFx0XHRwcm9wTmFtZSA9ICdjb25uZWN0aW9ucyc7XG5cdFx0XHRcdHByb3BWYWx1ZSA9IFsgZnJvbSwgdG8gXTtcblx0XHRcdFx0YXBwZW5kKCBwcm9wVmFsdWUsIHJlc3QgKTtcblxuXHRcdFx0XHRpZiAoIGN1cnJlbnROb2RlWyBwcm9wTmFtZSBdID09PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0XHRjdXJyZW50Tm9kZVsgcHJvcE5hbWUgXSA9IFtdO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fVxuXG5cdFx0XHQvLyBOb2RlXG5cdFx0XHRpZiAoIHByb3BOYW1lID09PSAnTm9kZScgKSBjdXJyZW50Tm9kZS5pZCA9IHByb3BWYWx1ZTtcblxuXHRcdFx0Ly8gY29ubmVjdGlvbnNcblx0XHRcdGlmICggcHJvcE5hbWUgaW4gY3VycmVudE5vZGUgJiYgQXJyYXkuaXNBcnJheSggY3VycmVudE5vZGVbIHByb3BOYW1lIF0gKSApIHtcblxuXHRcdFx0XHRjdXJyZW50Tm9kZVsgcHJvcE5hbWUgXS5wdXNoKCBwcm9wVmFsdWUgKTtcblxuXHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRpZiAoIHByb3BOYW1lICE9PSAnYScgKSBjdXJyZW50Tm9kZVsgcHJvcE5hbWUgXSA9IHByb3BWYWx1ZTtcblx0XHRcdFx0ZWxzZSBjdXJyZW50Tm9kZS5hID0gcHJvcFZhbHVlO1xuXG5cdFx0XHR9XG5cblx0XHRcdHRoaXMuc2V0Q3VycmVudFByb3AoIGN1cnJlbnROb2RlLCBwcm9wTmFtZSApO1xuXG5cdFx0XHQvLyBjb252ZXJ0IHN0cmluZyB0byBhcnJheSwgdW5sZXNzIGl0IGVuZHMgaW4gJywnIGluIHdoaWNoIGNhc2UgbW9yZSB3aWxsIGJlIGFkZGVkIHRvIGl0XG5cdFx0XHRpZiAoIHByb3BOYW1lID09PSAnYScgJiYgcHJvcFZhbHVlLnNsaWNlKCAtIDEgKSAhPT0gJywnICkge1xuXG5cdFx0XHRcdGN1cnJlbnROb2RlLmEgPSBwYXJzZU51bWJlckFycmF5KCBwcm9wVmFsdWUgKTtcblxuXHRcdFx0fVxuXG5cdFx0fSxcblxuXHRcdHBhcnNlTm9kZVByb3BlcnR5Q29udGludWVkOiBmdW5jdGlvbiAoIGxpbmUgKSB7XG5cblx0XHRcdHZhciBjdXJyZW50Tm9kZSA9IHRoaXMuZ2V0Q3VycmVudE5vZGUoKTtcblxuXHRcdFx0Y3VycmVudE5vZGUuYSArPSBsaW5lO1xuXG5cdFx0XHQvLyBpZiB0aGUgbGluZSBkb2Vzbid0IGVuZCBpbiAnLCcgd2UgaGF2ZSByZWFjaGVkIHRoZSBlbmQgb2YgdGhlIHByb3BlcnR5IHZhbHVlXG5cdFx0XHQvLyBzbyBjb252ZXJ0IHRoZSBzdHJpbmcgdG8gYW4gYXJyYXlcblx0XHRcdGlmICggbGluZS5zbGljZSggLSAxICkgIT09ICcsJyApIHtcblxuXHRcdFx0XHRjdXJyZW50Tm9kZS5hID0gcGFyc2VOdW1iZXJBcnJheSggY3VycmVudE5vZGUuYSApO1xuXG5cdFx0XHR9XG5cblx0XHR9LFxuXG5cdFx0Ly8gcGFyc2UgXCJQcm9wZXJ0eTcwXCJcblx0XHRwYXJzZU5vZGVTcGVjaWFsUHJvcGVydHk6IGZ1bmN0aW9uICggbGluZSwgcHJvcE5hbWUsIHByb3BWYWx1ZSApIHtcblxuXHRcdFx0Ly8gc3BsaXQgdGhpc1xuXHRcdFx0Ly8gUDogXCJMY2wgU2NhbGluZ1wiLCBcIkxjbCBTY2FsaW5nXCIsIFwiXCIsIFwiQVwiLDEsMSwxXG5cdFx0XHQvLyBpbnRvIGFycmF5IGxpa2UgYmVsb3dcblx0XHRcdC8vIFtcIkxjbCBTY2FsaW5nXCIsIFwiTGNsIFNjYWxpbmdcIiwgXCJcIiwgXCJBXCIsIFwiMSwxLDFcIiBdXG5cdFx0XHR2YXIgcHJvcHMgPSBwcm9wVmFsdWUuc3BsaXQoICdcIiwnICkubWFwKCBmdW5jdGlvbiAoIHByb3AgKSB7XG5cblx0XHRcdFx0cmV0dXJuIHByb3AudHJpbSgpLnJlcGxhY2UoIC9eXFxcIi8sICcnICkucmVwbGFjZSggL1xccy8sICdfJyApO1xuXG5cdFx0XHR9ICk7XG5cblx0XHRcdHZhciBpbm5lclByb3BOYW1lID0gcHJvcHNbIDAgXTtcblx0XHRcdHZhciBpbm5lclByb3BUeXBlMSA9IHByb3BzWyAxIF07XG5cdFx0XHR2YXIgaW5uZXJQcm9wVHlwZTIgPSBwcm9wc1sgMiBdO1xuXHRcdFx0dmFyIGlubmVyUHJvcEZsYWcgPSBwcm9wc1sgMyBdO1xuXHRcdFx0dmFyIGlubmVyUHJvcFZhbHVlID0gcHJvcHNbIDQgXTtcblxuXHRcdFx0Ly8gY2FzdCB2YWx1ZXMgd2hlcmUgbmVlZGVkLCBvdGhlcndpc2UgbGVhdmUgYXMgc3RyaW5nc1xuXHRcdFx0c3dpdGNoICggaW5uZXJQcm9wVHlwZTEgKSB7XG5cblx0XHRcdFx0Y2FzZSAnaW50Jzpcblx0XHRcdFx0Y2FzZSAnZW51bSc6XG5cdFx0XHRcdGNhc2UgJ2Jvb2wnOlxuXHRcdFx0XHRjYXNlICdVTG9uZ0xvbmcnOlxuXHRcdFx0XHRjYXNlICdkb3VibGUnOlxuXHRcdFx0XHRjYXNlICdOdW1iZXInOlxuXHRcdFx0XHRjYXNlICdGaWVsZE9mVmlldyc6XG5cdFx0XHRcdFx0aW5uZXJQcm9wVmFsdWUgPSBwYXJzZUZsb2F0KCBpbm5lclByb3BWYWx1ZSApO1xuXHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdGNhc2UgJ0NvbG9yJzpcblx0XHRcdFx0Y2FzZSAnQ29sb3JSR0InOlxuXHRcdFx0XHRjYXNlICdWZWN0b3IzRCc6XG5cdFx0XHRcdGNhc2UgJ0xjbF9UcmFuc2xhdGlvbic6XG5cdFx0XHRcdGNhc2UgJ0xjbF9Sb3RhdGlvbic6XG5cdFx0XHRcdGNhc2UgJ0xjbF9TY2FsaW5nJzpcblx0XHRcdFx0XHRpbm5lclByb3BWYWx1ZSA9IHBhcnNlTnVtYmVyQXJyYXkoIGlubmVyUHJvcFZhbHVlICk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdH1cblxuXHRcdFx0Ly8gQ0FVVElPTjogdGhlc2UgcHJvcHMgbXVzdCBhcHBlbmQgdG8gcGFyZW50J3MgcGFyZW50XG5cdFx0XHR0aGlzLmdldFByZXZOb2RlKClbIGlubmVyUHJvcE5hbWUgXSA9IHtcblxuXHRcdFx0XHQndHlwZSc6IGlubmVyUHJvcFR5cGUxLFxuXHRcdFx0XHQndHlwZTInOiBpbm5lclByb3BUeXBlMixcblx0XHRcdFx0J2ZsYWcnOiBpbm5lclByb3BGbGFnLFxuXHRcdFx0XHQndmFsdWUnOiBpbm5lclByb3BWYWx1ZVxuXG5cdFx0XHR9O1xuXG5cdFx0XHR0aGlzLnNldEN1cnJlbnRQcm9wKCB0aGlzLmdldFByZXZOb2RlKCksIGlubmVyUHJvcE5hbWUgKTtcblxuXHRcdH0sXG5cblx0fTtcblxuXHQvLyBQYXJzZSBhbiBGQlggZmlsZSBpbiBCaW5hcnkgZm9ybWF0XG5cdGZ1bmN0aW9uIEJpbmFyeVBhcnNlcigpIHt9XG5cblx0QmluYXJ5UGFyc2VyLnByb3RvdHlwZSA9IHtcblxuXHRcdGNvbnN0cnVjdG9yOiBCaW5hcnlQYXJzZXIsXG5cblx0XHRwYXJzZTogZnVuY3Rpb24gKCBidWZmZXIgKSB7XG5cblx0XHRcdHZhciByZWFkZXIgPSBuZXcgQmluYXJ5UmVhZGVyKCBidWZmZXIgKTtcblx0XHRcdHJlYWRlci5za2lwKCAyMyApOyAvLyBza2lwIG1hZ2ljIDIzIGJ5dGVzXG5cblx0XHRcdHZhciB2ZXJzaW9uID0gcmVhZGVyLmdldFVpbnQzMigpO1xuXG5cdFx0XHRpZiAoIHZlcnNpb24gPCA2NDAwICkge1xuXG5cdFx0XHRcdHRocm93IG5ldyBFcnJvciggJ1RIUkVFLkZCWExvYWRlcjogRkJYIHZlcnNpb24gbm90IHN1cHBvcnRlZCwgRmlsZVZlcnNpb246ICcgKyB2ZXJzaW9uICk7XG5cblx0XHRcdH1cblxuXHRcdFx0dmFyIGFsbE5vZGVzID0gbmV3IEZCWFRyZWUoKTtcblxuXHRcdFx0d2hpbGUgKCAhIHRoaXMuZW5kT2ZDb250ZW50KCByZWFkZXIgKSApIHtcblxuXHRcdFx0XHR2YXIgbm9kZSA9IHRoaXMucGFyc2VOb2RlKCByZWFkZXIsIHZlcnNpb24gKTtcblx0XHRcdFx0aWYgKCBub2RlICE9PSBudWxsICkgYWxsTm9kZXMuYWRkKCBub2RlLm5hbWUsIG5vZGUgKTtcblxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gYWxsTm9kZXM7XG5cblx0XHR9LFxuXG5cdFx0Ly8gQ2hlY2sgaWYgcmVhZGVyIGhhcyByZWFjaGVkIHRoZSBlbmQgb2YgY29udGVudC5cblx0XHRlbmRPZkNvbnRlbnQ6IGZ1bmN0aW9uICggcmVhZGVyICkge1xuXG5cdFx0XHQvLyBmb290ZXIgc2l6ZTogMTYwYnl0ZXMgKyAxNi1ieXRlIGFsaWdubWVudCBwYWRkaW5nXG5cdFx0XHQvLyAtIDE2Ynl0ZXM6IG1hZ2ljXG5cdFx0XHQvLyAtIHBhZGRpbmcgdGlsIDE2LWJ5dGUgYWxpZ25tZW50IChhdCBsZWFzdCAxYnl0ZT8pXG5cdFx0XHQvL1x0KHNlZW1zIGxpa2Ugc29tZSBleHBvcnRlcnMgZW1iZWQgZml4ZWQgMTUgb3IgMTZieXRlcz8pXG5cdFx0XHQvLyAtIDRieXRlczogbWFnaWNcblx0XHRcdC8vIC0gNGJ5dGVzOiB2ZXJzaW9uXG5cdFx0XHQvLyAtIDEyMGJ5dGVzOiB6ZXJvXG5cdFx0XHQvLyAtIDE2Ynl0ZXM6IG1hZ2ljXG5cdFx0XHRpZiAoIHJlYWRlci5zaXplKCkgJSAxNiA9PT0gMCApIHtcblxuXHRcdFx0XHRyZXR1cm4gKCAoIHJlYWRlci5nZXRPZmZzZXQoKSArIDE2MCArIDE2ICkgJiB+IDB4ZiApID49IHJlYWRlci5zaXplKCk7XG5cblx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0cmV0dXJuIHJlYWRlci5nZXRPZmZzZXQoKSArIDE2MCArIDE2ID49IHJlYWRlci5zaXplKCk7XG5cblx0XHRcdH1cblxuXHRcdH0sXG5cblx0XHQvLyByZWN1cnNpdmVseSBwYXJzZSBub2RlcyB1bnRpbCB0aGUgZW5kIG9mIHRoZSBmaWxlIGlzIHJlYWNoZWRcblx0XHRwYXJzZU5vZGU6IGZ1bmN0aW9uICggcmVhZGVyLCB2ZXJzaW9uICkge1xuXG5cdFx0XHR2YXIgbm9kZSA9IHt9O1xuXG5cdFx0XHQvLyBUaGUgZmlyc3QgdGhyZWUgZGF0YSBzaXplcyBkZXBlbmRzIG9uIHZlcnNpb24uXG5cdFx0XHR2YXIgZW5kT2Zmc2V0ID0gKCB2ZXJzaW9uID49IDc1MDAgKSA/IHJlYWRlci5nZXRVaW50NjQoKSA6IHJlYWRlci5nZXRVaW50MzIoKTtcblx0XHRcdHZhciBudW1Qcm9wZXJ0aWVzID0gKCB2ZXJzaW9uID49IDc1MDAgKSA/IHJlYWRlci5nZXRVaW50NjQoKSA6IHJlYWRlci5nZXRVaW50MzIoKTtcblxuXHRcdFx0KCB2ZXJzaW9uID49IDc1MDAgKSA/IHJlYWRlci5nZXRVaW50NjQoKSA6IHJlYWRlci5nZXRVaW50MzIoKTsgLy8gdGhlIHJldHVybmVkIHByb3BlcnR5TGlzdExlbiBpcyBub3QgdXNlZFxuXG5cdFx0XHR2YXIgbmFtZUxlbiA9IHJlYWRlci5nZXRVaW50OCgpO1xuXHRcdFx0dmFyIG5hbWUgPSByZWFkZXIuZ2V0U3RyaW5nKCBuYW1lTGVuICk7XG5cblx0XHRcdC8vIFJlZ2FyZHMgdGhpcyBub2RlIGFzIE5VTEwtcmVjb3JkIGlmIGVuZE9mZnNldCBpcyB6ZXJvXG5cdFx0XHRpZiAoIGVuZE9mZnNldCA9PT0gMCApIHJldHVybiBudWxsO1xuXG5cdFx0XHR2YXIgcHJvcGVydHlMaXN0ID0gW107XG5cblx0XHRcdGZvciAoIHZhciBpID0gMDsgaSA8IG51bVByb3BlcnRpZXM7IGkgKysgKSB7XG5cblx0XHRcdFx0cHJvcGVydHlMaXN0LnB1c2goIHRoaXMucGFyc2VQcm9wZXJ0eSggcmVhZGVyICkgKTtcblxuXHRcdFx0fVxuXG5cdFx0XHQvLyBSZWdhcmRzIHRoZSBmaXJzdCB0aHJlZSBlbGVtZW50cyBpbiBwcm9wZXJ0eUxpc3QgYXMgaWQsIGF0dHJOYW1lLCBhbmQgYXR0clR5cGVcblx0XHRcdHZhciBpZCA9IHByb3BlcnR5TGlzdC5sZW5ndGggPiAwID8gcHJvcGVydHlMaXN0WyAwIF0gOiAnJztcblx0XHRcdHZhciBhdHRyTmFtZSA9IHByb3BlcnR5TGlzdC5sZW5ndGggPiAxID8gcHJvcGVydHlMaXN0WyAxIF0gOiAnJztcblx0XHRcdHZhciBhdHRyVHlwZSA9IHByb3BlcnR5TGlzdC5sZW5ndGggPiAyID8gcHJvcGVydHlMaXN0WyAyIF0gOiAnJztcblxuXHRcdFx0Ly8gY2hlY2sgaWYgdGhpcyBub2RlIHJlcHJlc2VudHMganVzdCBhIHNpbmdsZSBwcm9wZXJ0eVxuXHRcdFx0Ly8gbGlrZSAobmFtZSwgMCkgc2V0IG9yIChuYW1lMiwgWzAsIDEsIDJdKSBzZXQgb2Yge25hbWU6IDAsIG5hbWUyOiBbMCwgMSwgMl19XG5cdFx0XHRub2RlLnNpbmdsZVByb3BlcnR5ID0gKCBudW1Qcm9wZXJ0aWVzID09PSAxICYmIHJlYWRlci5nZXRPZmZzZXQoKSA9PT0gZW5kT2Zmc2V0ICkgPyB0cnVlIDogZmFsc2U7XG5cblx0XHRcdHdoaWxlICggZW5kT2Zmc2V0ID4gcmVhZGVyLmdldE9mZnNldCgpICkge1xuXG5cdFx0XHRcdHZhciBzdWJOb2RlID0gdGhpcy5wYXJzZU5vZGUoIHJlYWRlciwgdmVyc2lvbiApO1xuXG5cdFx0XHRcdGlmICggc3ViTm9kZSAhPT0gbnVsbCApIHRoaXMucGFyc2VTdWJOb2RlKCBuYW1lLCBub2RlLCBzdWJOb2RlICk7XG5cblx0XHRcdH1cblxuXHRcdFx0bm9kZS5wcm9wZXJ0eUxpc3QgPSBwcm9wZXJ0eUxpc3Q7IC8vIHJhdyBwcm9wZXJ0eSBsaXN0IHVzZWQgYnkgcGFyZW50XG5cblx0XHRcdGlmICggdHlwZW9mIGlkID09PSAnbnVtYmVyJyApIG5vZGUuaWQgPSBpZDtcblx0XHRcdGlmICggYXR0ck5hbWUgIT09ICcnICkgbm9kZS5hdHRyTmFtZSA9IGF0dHJOYW1lO1xuXHRcdFx0aWYgKCBhdHRyVHlwZSAhPT0gJycgKSBub2RlLmF0dHJUeXBlID0gYXR0clR5cGU7XG5cdFx0XHRpZiAoIG5hbWUgIT09ICcnICkgbm9kZS5uYW1lID0gbmFtZTtcblxuXHRcdFx0cmV0dXJuIG5vZGU7XG5cblx0XHR9LFxuXG5cdFx0cGFyc2VTdWJOb2RlOiBmdW5jdGlvbiAoIG5hbWUsIG5vZGUsIHN1Yk5vZGUgKSB7XG5cblx0XHRcdC8vIHNwZWNpYWwgY2FzZTogY2hpbGQgbm9kZSBpcyBzaW5nbGUgcHJvcGVydHlcblx0XHRcdGlmICggc3ViTm9kZS5zaW5nbGVQcm9wZXJ0eSA9PT0gdHJ1ZSApIHtcblxuXHRcdFx0XHR2YXIgdmFsdWUgPSBzdWJOb2RlLnByb3BlcnR5TGlzdFsgMCBdO1xuXG5cdFx0XHRcdGlmICggQXJyYXkuaXNBcnJheSggdmFsdWUgKSApIHtcblxuXHRcdFx0XHRcdG5vZGVbIHN1Yk5vZGUubmFtZSBdID0gc3ViTm9kZTtcblxuXHRcdFx0XHRcdHN1Yk5vZGUuYSA9IHZhbHVlO1xuXG5cdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRub2RlWyBzdWJOb2RlLm5hbWUgXSA9IHZhbHVlO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fSBlbHNlIGlmICggbmFtZSA9PT0gJ0Nvbm5lY3Rpb25zJyAmJiBzdWJOb2RlLm5hbWUgPT09ICdDJyApIHtcblxuXHRcdFx0XHR2YXIgYXJyYXkgPSBbXTtcblxuXHRcdFx0XHRzdWJOb2RlLnByb3BlcnR5TGlzdC5mb3JFYWNoKCBmdW5jdGlvbiAoIHByb3BlcnR5LCBpICkge1xuXG5cdFx0XHRcdFx0Ly8gZmlyc3QgQ29ubmVjdGlvbiBpcyBGQlggdHlwZSAoT08sIE9QLCBldGMuKS4gV2UnbGwgZGlzY2FyZCB0aGVzZVxuXHRcdFx0XHRcdGlmICggaSAhPT0gMCApIGFycmF5LnB1c2goIHByb3BlcnR5ICk7XG5cblx0XHRcdFx0fSApO1xuXG5cdFx0XHRcdGlmICggbm9kZS5jb25uZWN0aW9ucyA9PT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRcdFx0bm9kZS5jb25uZWN0aW9ucyA9IFtdO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRub2RlLmNvbm5lY3Rpb25zLnB1c2goIGFycmF5ICk7XG5cblx0XHRcdH0gZWxzZSBpZiAoIHN1Yk5vZGUubmFtZSA9PT0gJ1Byb3BlcnRpZXM3MCcgKSB7XG5cblx0XHRcdFx0dmFyIGtleXMgPSBPYmplY3Qua2V5cyggc3ViTm9kZSApO1xuXG5cdFx0XHRcdGtleXMuZm9yRWFjaCggZnVuY3Rpb24gKCBrZXkgKSB7XG5cblx0XHRcdFx0XHRub2RlWyBrZXkgXSA9IHN1Yk5vZGVbIGtleSBdO1xuXG5cdFx0XHRcdH0gKTtcblxuXHRcdFx0fSBlbHNlIGlmICggbmFtZSA9PT0gJ1Byb3BlcnRpZXM3MCcgJiYgc3ViTm9kZS5uYW1lID09PSAnUCcgKSB7XG5cblx0XHRcdFx0dmFyIGlubmVyUHJvcE5hbWUgPSBzdWJOb2RlLnByb3BlcnR5TGlzdFsgMCBdO1xuXHRcdFx0XHR2YXIgaW5uZXJQcm9wVHlwZTEgPSBzdWJOb2RlLnByb3BlcnR5TGlzdFsgMSBdO1xuXHRcdFx0XHR2YXIgaW5uZXJQcm9wVHlwZTIgPSBzdWJOb2RlLnByb3BlcnR5TGlzdFsgMiBdO1xuXHRcdFx0XHR2YXIgaW5uZXJQcm9wRmxhZyA9IHN1Yk5vZGUucHJvcGVydHlMaXN0WyAzIF07XG5cdFx0XHRcdHZhciBpbm5lclByb3BWYWx1ZTtcblxuXHRcdFx0XHRpZiAoIGlubmVyUHJvcE5hbWUuaW5kZXhPZiggJ0xjbCAnICkgPT09IDAgKSBpbm5lclByb3BOYW1lID0gaW5uZXJQcm9wTmFtZS5yZXBsYWNlKCAnTGNsICcsICdMY2xfJyApO1xuXHRcdFx0XHRpZiAoIGlubmVyUHJvcFR5cGUxLmluZGV4T2YoICdMY2wgJyApID09PSAwICkgaW5uZXJQcm9wVHlwZTEgPSBpbm5lclByb3BUeXBlMS5yZXBsYWNlKCAnTGNsICcsICdMY2xfJyApO1xuXG5cdFx0XHRcdGlmICggaW5uZXJQcm9wVHlwZTEgPT09ICdDb2xvcicgfHwgaW5uZXJQcm9wVHlwZTEgPT09ICdDb2xvclJHQicgfHwgaW5uZXJQcm9wVHlwZTEgPT09ICdWZWN0b3InIHx8IGlubmVyUHJvcFR5cGUxID09PSAnVmVjdG9yM0QnIHx8IGlubmVyUHJvcFR5cGUxLmluZGV4T2YoICdMY2xfJyApID09PSAwICkge1xuXG5cdFx0XHRcdFx0aW5uZXJQcm9wVmFsdWUgPSBbXG5cdFx0XHRcdFx0XHRzdWJOb2RlLnByb3BlcnR5TGlzdFsgNCBdLFxuXHRcdFx0XHRcdFx0c3ViTm9kZS5wcm9wZXJ0eUxpc3RbIDUgXSxcblx0XHRcdFx0XHRcdHN1Yk5vZGUucHJvcGVydHlMaXN0WyA2IF1cblx0XHRcdFx0XHRdO1xuXG5cdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRpbm5lclByb3BWYWx1ZSA9IHN1Yk5vZGUucHJvcGVydHlMaXN0WyA0IF07XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIHRoaXMgd2lsbCBiZSBjb3BpZWQgdG8gcGFyZW50LCBzZWUgYWJvdmVcblx0XHRcdFx0bm9kZVsgaW5uZXJQcm9wTmFtZSBdID0ge1xuXG5cdFx0XHRcdFx0J3R5cGUnOiBpbm5lclByb3BUeXBlMSxcblx0XHRcdFx0XHQndHlwZTInOiBpbm5lclByb3BUeXBlMixcblx0XHRcdFx0XHQnZmxhZyc6IGlubmVyUHJvcEZsYWcsXG5cdFx0XHRcdFx0J3ZhbHVlJzogaW5uZXJQcm9wVmFsdWVcblxuXHRcdFx0XHR9O1xuXG5cdFx0XHR9IGVsc2UgaWYgKCBub2RlWyBzdWJOb2RlLm5hbWUgXSA9PT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRcdGlmICggdHlwZW9mIHN1Yk5vZGUuaWQgPT09ICdudW1iZXInICkge1xuXG5cdFx0XHRcdFx0bm9kZVsgc3ViTm9kZS5uYW1lIF0gPSB7fTtcblx0XHRcdFx0XHRub2RlWyBzdWJOb2RlLm5hbWUgXVsgc3ViTm9kZS5pZCBdID0gc3ViTm9kZTtcblxuXHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0bm9kZVsgc3ViTm9kZS5uYW1lIF0gPSBzdWJOb2RlO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRpZiAoIHN1Yk5vZGUubmFtZSA9PT0gJ1Bvc2VOb2RlJyApIHtcblxuXHRcdFx0XHRcdGlmICggISBBcnJheS5pc0FycmF5KCBub2RlWyBzdWJOb2RlLm5hbWUgXSApICkge1xuXG5cdFx0XHRcdFx0XHRub2RlWyBzdWJOb2RlLm5hbWUgXSA9IFsgbm9kZVsgc3ViTm9kZS5uYW1lIF0gXTtcblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdG5vZGVbIHN1Yk5vZGUubmFtZSBdLnB1c2goIHN1Yk5vZGUgKTtcblxuXHRcdFx0XHR9IGVsc2UgaWYgKCBub2RlWyBzdWJOb2RlLm5hbWUgXVsgc3ViTm9kZS5pZCBdID09PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0XHRub2RlWyBzdWJOb2RlLm5hbWUgXVsgc3ViTm9kZS5pZCBdID0gc3ViTm9kZTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdH1cblxuXHRcdH0sXG5cblx0XHRwYXJzZVByb3BlcnR5OiBmdW5jdGlvbiAoIHJlYWRlciApIHtcblxuXHRcdFx0dmFyIHR5cGUgPSByZWFkZXIuZ2V0U3RyaW5nKCAxICk7XG5cblx0XHRcdHN3aXRjaCAoIHR5cGUgKSB7XG5cblx0XHRcdFx0Y2FzZSAnQyc6XG5cdFx0XHRcdFx0cmV0dXJuIHJlYWRlci5nZXRCb29sZWFuKCk7XG5cblx0XHRcdFx0Y2FzZSAnRCc6XG5cdFx0XHRcdFx0cmV0dXJuIHJlYWRlci5nZXRGbG9hdDY0KCk7XG5cblx0XHRcdFx0Y2FzZSAnRic6XG5cdFx0XHRcdFx0cmV0dXJuIHJlYWRlci5nZXRGbG9hdDMyKCk7XG5cblx0XHRcdFx0Y2FzZSAnSSc6XG5cdFx0XHRcdFx0cmV0dXJuIHJlYWRlci5nZXRJbnQzMigpO1xuXG5cdFx0XHRcdGNhc2UgJ0wnOlxuXHRcdFx0XHRcdHJldHVybiByZWFkZXIuZ2V0SW50NjQoKTtcblxuXHRcdFx0XHRjYXNlICdSJzpcblx0XHRcdFx0XHR2YXIgbGVuZ3RoID0gcmVhZGVyLmdldFVpbnQzMigpO1xuXHRcdFx0XHRcdHJldHVybiByZWFkZXIuZ2V0QXJyYXlCdWZmZXIoIGxlbmd0aCApO1xuXG5cdFx0XHRcdGNhc2UgJ1MnOlxuXHRcdFx0XHRcdHZhciBsZW5ndGggPSByZWFkZXIuZ2V0VWludDMyKCk7XG5cdFx0XHRcdFx0cmV0dXJuIHJlYWRlci5nZXRTdHJpbmcoIGxlbmd0aCApO1xuXG5cdFx0XHRcdGNhc2UgJ1knOlxuXHRcdFx0XHRcdHJldHVybiByZWFkZXIuZ2V0SW50MTYoKTtcblxuXHRcdFx0XHRjYXNlICdiJzpcblx0XHRcdFx0Y2FzZSAnYyc6XG5cdFx0XHRcdGNhc2UgJ2QnOlxuXHRcdFx0XHRjYXNlICdmJzpcblx0XHRcdFx0Y2FzZSAnaSc6XG5cdFx0XHRcdGNhc2UgJ2wnOlxuXG5cdFx0XHRcdFx0dmFyIGFycmF5TGVuZ3RoID0gcmVhZGVyLmdldFVpbnQzMigpO1xuXHRcdFx0XHRcdHZhciBlbmNvZGluZyA9IHJlYWRlci5nZXRVaW50MzIoKTsgLy8gMDogbm9uLWNvbXByZXNzZWQsIDE6IGNvbXByZXNzZWRcblx0XHRcdFx0XHR2YXIgY29tcHJlc3NlZExlbmd0aCA9IHJlYWRlci5nZXRVaW50MzIoKTtcblxuXHRcdFx0XHRcdGlmICggZW5jb2RpbmcgPT09IDAgKSB7XG5cblx0XHRcdFx0XHRcdHN3aXRjaCAoIHR5cGUgKSB7XG5cblx0XHRcdFx0XHRcdFx0Y2FzZSAnYic6XG5cdFx0XHRcdFx0XHRcdGNhc2UgJ2MnOlxuXHRcdFx0XHRcdFx0XHRcdHJldHVybiByZWFkZXIuZ2V0Qm9vbGVhbkFycmF5KCBhcnJheUxlbmd0aCApO1xuXG5cdFx0XHRcdFx0XHRcdGNhc2UgJ2QnOlxuXHRcdFx0XHRcdFx0XHRcdHJldHVybiByZWFkZXIuZ2V0RmxvYXQ2NEFycmF5KCBhcnJheUxlbmd0aCApO1xuXG5cdFx0XHRcdFx0XHRcdGNhc2UgJ2YnOlxuXHRcdFx0XHRcdFx0XHRcdHJldHVybiByZWFkZXIuZ2V0RmxvYXQzMkFycmF5KCBhcnJheUxlbmd0aCApO1xuXG5cdFx0XHRcdFx0XHRcdGNhc2UgJ2knOlxuXHRcdFx0XHRcdFx0XHRcdHJldHVybiByZWFkZXIuZ2V0SW50MzJBcnJheSggYXJyYXlMZW5ndGggKTtcblxuXHRcdFx0XHRcdFx0XHRjYXNlICdsJzpcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gcmVhZGVyLmdldEludDY0QXJyYXkoIGFycmF5TGVuZ3RoICk7XG5cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGlmICggdHlwZW9mIGZmbGF0ZSA9PT0gJ3VuZGVmaW5lZCcgKSB7XG5cblx0XHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoICdUSFJFRS5GQlhMb2FkZXI6IEV4dGVybmFsIGxpYnJhcnkgZmZsYXRlLm1pbi5qcyByZXF1aXJlZC4nICk7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHR2YXIgZGF0YSA9IGZmbGF0ZS51bnpsaWJTeW5jKCBuZXcgVWludDhBcnJheSggcmVhZGVyLmdldEFycmF5QnVmZmVyKCBjb21wcmVzc2VkTGVuZ3RoICkgKSApOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVuZGVmXG5cdFx0XHRcdFx0dmFyIHJlYWRlcjIgPSBuZXcgQmluYXJ5UmVhZGVyKCBkYXRhLmJ1ZmZlciApO1xuXG5cdFx0XHRcdFx0c3dpdGNoICggdHlwZSApIHtcblxuXHRcdFx0XHRcdFx0Y2FzZSAnYic6XG5cdFx0XHRcdFx0XHRjYXNlICdjJzpcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHJlYWRlcjIuZ2V0Qm9vbGVhbkFycmF5KCBhcnJheUxlbmd0aCApO1xuXG5cdFx0XHRcdFx0XHRjYXNlICdkJzpcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHJlYWRlcjIuZ2V0RmxvYXQ2NEFycmF5KCBhcnJheUxlbmd0aCApO1xuXG5cdFx0XHRcdFx0XHRjYXNlICdmJzpcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHJlYWRlcjIuZ2V0RmxvYXQzMkFycmF5KCBhcnJheUxlbmd0aCApO1xuXG5cdFx0XHRcdFx0XHRjYXNlICdpJzpcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHJlYWRlcjIuZ2V0SW50MzJBcnJheSggYXJyYXlMZW5ndGggKTtcblxuXHRcdFx0XHRcdFx0Y2FzZSAnbCc6XG5cdFx0XHRcdFx0XHRcdHJldHVybiByZWFkZXIyLmdldEludDY0QXJyYXkoIGFycmF5TGVuZ3RoICk7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoICdUSFJFRS5GQlhMb2FkZXI6IFVua25vd24gcHJvcGVydHkgdHlwZSAnICsgdHlwZSApO1xuXG5cdFx0XHR9XG5cblx0XHR9XG5cblx0fTtcblxuXHRmdW5jdGlvbiBCaW5hcnlSZWFkZXIoIGJ1ZmZlciwgbGl0dGxlRW5kaWFuICkge1xuXG5cdFx0dGhpcy5kdiA9IG5ldyBEYXRhVmlldyggYnVmZmVyICk7XG5cdFx0dGhpcy5vZmZzZXQgPSAwO1xuXHRcdHRoaXMubGl0dGxlRW5kaWFuID0gKCBsaXR0bGVFbmRpYW4gIT09IHVuZGVmaW5lZCApID8gbGl0dGxlRW5kaWFuIDogdHJ1ZTtcblxuXHR9XG5cblx0QmluYXJ5UmVhZGVyLnByb3RvdHlwZSA9IHtcblxuXHRcdGNvbnN0cnVjdG9yOiBCaW5hcnlSZWFkZXIsXG5cblx0XHRnZXRPZmZzZXQ6IGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0cmV0dXJuIHRoaXMub2Zmc2V0O1xuXG5cdFx0fSxcblxuXHRcdHNpemU6IGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0cmV0dXJuIHRoaXMuZHYuYnVmZmVyLmJ5dGVMZW5ndGg7XG5cblx0XHR9LFxuXG5cdFx0c2tpcDogZnVuY3Rpb24gKCBsZW5ndGggKSB7XG5cblx0XHRcdHRoaXMub2Zmc2V0ICs9IGxlbmd0aDtcblxuXHRcdH0sXG5cblx0XHQvLyBzZWVtcyBsaWtlIHRydWUvZmFsc2UgcmVwcmVzZW50YXRpb24gZGVwZW5kcyBvbiBleHBvcnRlci5cblx0XHQvLyB0cnVlOiAxIG9yICdZJyg9MHg1OSksIGZhbHNlOiAwIG9yICdUJyg9MHg1NClcblx0XHQvLyB0aGVuIHNlZXMgTFNCLlxuXHRcdGdldEJvb2xlYW46IGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0cmV0dXJuICggdGhpcy5nZXRVaW50OCgpICYgMSApID09PSAxO1xuXG5cdFx0fSxcblxuXHRcdGdldEJvb2xlYW5BcnJheTogZnVuY3Rpb24gKCBzaXplICkge1xuXG5cdFx0XHR2YXIgYSA9IFtdO1xuXG5cdFx0XHRmb3IgKCB2YXIgaSA9IDA7IGkgPCBzaXplOyBpICsrICkge1xuXG5cdFx0XHRcdGEucHVzaCggdGhpcy5nZXRCb29sZWFuKCkgKTtcblxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gYTtcblxuXHRcdH0sXG5cblx0XHRnZXRVaW50ODogZnVuY3Rpb24gKCkge1xuXG5cdFx0XHR2YXIgdmFsdWUgPSB0aGlzLmR2LmdldFVpbnQ4KCB0aGlzLm9mZnNldCApO1xuXHRcdFx0dGhpcy5vZmZzZXQgKz0gMTtcblx0XHRcdHJldHVybiB2YWx1ZTtcblxuXHRcdH0sXG5cblx0XHRnZXRJbnQxNjogZnVuY3Rpb24gKCkge1xuXG5cdFx0XHR2YXIgdmFsdWUgPSB0aGlzLmR2LmdldEludDE2KCB0aGlzLm9mZnNldCwgdGhpcy5saXR0bGVFbmRpYW4gKTtcblx0XHRcdHRoaXMub2Zmc2V0ICs9IDI7XG5cdFx0XHRyZXR1cm4gdmFsdWU7XG5cblx0XHR9LFxuXG5cdFx0Z2V0SW50MzI6IGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0dmFyIHZhbHVlID0gdGhpcy5kdi5nZXRJbnQzMiggdGhpcy5vZmZzZXQsIHRoaXMubGl0dGxlRW5kaWFuICk7XG5cdFx0XHR0aGlzLm9mZnNldCArPSA0O1xuXHRcdFx0cmV0dXJuIHZhbHVlO1xuXG5cdFx0fSxcblxuXHRcdGdldEludDMyQXJyYXk6IGZ1bmN0aW9uICggc2l6ZSApIHtcblxuXHRcdFx0dmFyIGEgPSBbXTtcblxuXHRcdFx0Zm9yICggdmFyIGkgPSAwOyBpIDwgc2l6ZTsgaSArKyApIHtcblxuXHRcdFx0XHRhLnB1c2goIHRoaXMuZ2V0SW50MzIoKSApO1xuXG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBhO1xuXG5cdFx0fSxcblxuXHRcdGdldFVpbnQzMjogZnVuY3Rpb24gKCkge1xuXG5cdFx0XHR2YXIgdmFsdWUgPSB0aGlzLmR2LmdldFVpbnQzMiggdGhpcy5vZmZzZXQsIHRoaXMubGl0dGxlRW5kaWFuICk7XG5cdFx0XHR0aGlzLm9mZnNldCArPSA0O1xuXHRcdFx0cmV0dXJuIHZhbHVlO1xuXG5cdFx0fSxcblxuXHRcdC8vIEphdmFTY3JpcHQgZG9lc24ndCBzdXBwb3J0IDY0LWJpdCBpbnRlZ2VyIHNvIGNhbGN1bGF0ZSB0aGlzIGhlcmVcblx0XHQvLyAxIDw8IDMyIHdpbGwgcmV0dXJuIDEgc28gdXNpbmcgbXVsdGlwbHkgb3BlcmF0aW9uIGluc3RlYWQgaGVyZS5cblx0XHQvLyBUaGVyZSdzIGEgcG9zc2liaWxpdHkgdGhhdCB0aGlzIG1ldGhvZCByZXR1cm5zIHdyb25nIHZhbHVlIGlmIHRoZSB2YWx1ZVxuXHRcdC8vIGlzIG91dCBvZiB0aGUgcmFuZ2UgYmV0d2VlbiBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUiBhbmQgTnVtYmVyLk1JTl9TQUZFX0lOVEVHRVIuXG5cdFx0Ly8gVE9ETzogc2FmZWx5IGhhbmRsZSA2NC1iaXQgaW50ZWdlclxuXHRcdGdldEludDY0OiBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdHZhciBsb3csIGhpZ2g7XG5cblx0XHRcdGlmICggdGhpcy5saXR0bGVFbmRpYW4gKSB7XG5cblx0XHRcdFx0bG93ID0gdGhpcy5nZXRVaW50MzIoKTtcblx0XHRcdFx0aGlnaCA9IHRoaXMuZ2V0VWludDMyKCk7XG5cblx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0aGlnaCA9IHRoaXMuZ2V0VWludDMyKCk7XG5cdFx0XHRcdGxvdyA9IHRoaXMuZ2V0VWludDMyKCk7XG5cblx0XHRcdH1cblxuXHRcdFx0Ly8gY2FsY3VsYXRlIG5lZ2F0aXZlIHZhbHVlXG5cdFx0XHRpZiAoIGhpZ2ggJiAweDgwMDAwMDAwICkge1xuXG5cdFx0XHRcdGhpZ2ggPSB+IGhpZ2ggJiAweEZGRkZGRkZGO1xuXHRcdFx0XHRsb3cgPSB+IGxvdyAmIDB4RkZGRkZGRkY7XG5cblx0XHRcdFx0aWYgKCBsb3cgPT09IDB4RkZGRkZGRkYgKSBoaWdoID0gKCBoaWdoICsgMSApICYgMHhGRkZGRkZGRjtcblxuXHRcdFx0XHRsb3cgPSAoIGxvdyArIDEgKSAmIDB4RkZGRkZGRkY7XG5cblx0XHRcdFx0cmV0dXJuIC0gKCBoaWdoICogMHgxMDAwMDAwMDAgKyBsb3cgKTtcblxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gaGlnaCAqIDB4MTAwMDAwMDAwICsgbG93O1xuXG5cdFx0fSxcblxuXHRcdGdldEludDY0QXJyYXk6IGZ1bmN0aW9uICggc2l6ZSApIHtcblxuXHRcdFx0dmFyIGEgPSBbXTtcblxuXHRcdFx0Zm9yICggdmFyIGkgPSAwOyBpIDwgc2l6ZTsgaSArKyApIHtcblxuXHRcdFx0XHRhLnB1c2goIHRoaXMuZ2V0SW50NjQoKSApO1xuXG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBhO1xuXG5cdFx0fSxcblxuXHRcdC8vIE5vdGU6IHNlZSBnZXRJbnQ2NCgpIGNvbW1lbnRcblx0XHRnZXRVaW50NjQ6IGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0dmFyIGxvdywgaGlnaDtcblxuXHRcdFx0aWYgKCB0aGlzLmxpdHRsZUVuZGlhbiApIHtcblxuXHRcdFx0XHRsb3cgPSB0aGlzLmdldFVpbnQzMigpO1xuXHRcdFx0XHRoaWdoID0gdGhpcy5nZXRVaW50MzIoKTtcblxuXHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRoaWdoID0gdGhpcy5nZXRVaW50MzIoKTtcblx0XHRcdFx0bG93ID0gdGhpcy5nZXRVaW50MzIoKTtcblxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gaGlnaCAqIDB4MTAwMDAwMDAwICsgbG93O1xuXG5cdFx0fSxcblxuXHRcdGdldEZsb2F0MzI6IGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0dmFyIHZhbHVlID0gdGhpcy5kdi5nZXRGbG9hdDMyKCB0aGlzLm9mZnNldCwgdGhpcy5saXR0bGVFbmRpYW4gKTtcblx0XHRcdHRoaXMub2Zmc2V0ICs9IDQ7XG5cdFx0XHRyZXR1cm4gdmFsdWU7XG5cblx0XHR9LFxuXG5cdFx0Z2V0RmxvYXQzMkFycmF5OiBmdW5jdGlvbiAoIHNpemUgKSB7XG5cblx0XHRcdHZhciBhID0gW107XG5cblx0XHRcdGZvciAoIHZhciBpID0gMDsgaSA8IHNpemU7IGkgKysgKSB7XG5cblx0XHRcdFx0YS5wdXNoKCB0aGlzLmdldEZsb2F0MzIoKSApO1xuXG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBhO1xuXG5cdFx0fSxcblxuXHRcdGdldEZsb2F0NjQ6IGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0dmFyIHZhbHVlID0gdGhpcy5kdi5nZXRGbG9hdDY0KCB0aGlzLm9mZnNldCwgdGhpcy5saXR0bGVFbmRpYW4gKTtcblx0XHRcdHRoaXMub2Zmc2V0ICs9IDg7XG5cdFx0XHRyZXR1cm4gdmFsdWU7XG5cblx0XHR9LFxuXG5cdFx0Z2V0RmxvYXQ2NEFycmF5OiBmdW5jdGlvbiAoIHNpemUgKSB7XG5cblx0XHRcdHZhciBhID0gW107XG5cblx0XHRcdGZvciAoIHZhciBpID0gMDsgaSA8IHNpemU7IGkgKysgKSB7XG5cblx0XHRcdFx0YS5wdXNoKCB0aGlzLmdldEZsb2F0NjQoKSApO1xuXG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBhO1xuXG5cdFx0fSxcblxuXHRcdGdldEFycmF5QnVmZmVyOiBmdW5jdGlvbiAoIHNpemUgKSB7XG5cblx0XHRcdHZhciB2YWx1ZSA9IHRoaXMuZHYuYnVmZmVyLnNsaWNlKCB0aGlzLm9mZnNldCwgdGhpcy5vZmZzZXQgKyBzaXplICk7XG5cdFx0XHR0aGlzLm9mZnNldCArPSBzaXplO1xuXHRcdFx0cmV0dXJuIHZhbHVlO1xuXG5cdFx0fSxcblxuXHRcdGdldFN0cmluZzogZnVuY3Rpb24gKCBzaXplICkge1xuXG5cdFx0XHQvLyBub3RlOiBzYWZhcmkgOSBkb2Vzbid0IHN1cHBvcnQgVWludDhBcnJheS5pbmRleE9mOyBjcmVhdGUgaW50ZXJtZWRpYXRlIGFycmF5IGluc3RlYWRcblx0XHRcdHZhciBhID0gW107XG5cblx0XHRcdGZvciAoIHZhciBpID0gMDsgaSA8IHNpemU7IGkgKysgKSB7XG5cblx0XHRcdFx0YVsgaSBdID0gdGhpcy5nZXRVaW50OCgpO1xuXG5cdFx0XHR9XG5cblx0XHRcdHZhciBudWxsQnl0ZSA9IGEuaW5kZXhPZiggMCApO1xuXHRcdFx0aWYgKCBudWxsQnl0ZSA+PSAwICkgYSA9IGEuc2xpY2UoIDAsIG51bGxCeXRlICk7XG5cblx0XHRcdHJldHVybiBMb2FkZXJVdGlscy5kZWNvZGVUZXh0KCBuZXcgVWludDhBcnJheSggYSApICk7XG5cblx0XHR9XG5cblx0fTtcblxuXHQvLyBGQlhUcmVlIGhvbGRzIGEgcmVwcmVzZW50YXRpb24gb2YgdGhlIEZCWCBkYXRhLCByZXR1cm5lZCBieSB0aGUgVGV4dFBhcnNlciAoIEZCWCBBU0NJSSBmb3JtYXQpXG5cdC8vIGFuZCBCaW5hcnlQYXJzZXIoIEZCWCBCaW5hcnkgZm9ybWF0KVxuXHRmdW5jdGlvbiBGQlhUcmVlKCkge31cblxuXHRGQlhUcmVlLnByb3RvdHlwZSA9IHtcblxuXHRcdGNvbnN0cnVjdG9yOiBGQlhUcmVlLFxuXG5cdFx0YWRkOiBmdW5jdGlvbiAoIGtleSwgdmFsICkge1xuXG5cdFx0XHR0aGlzWyBrZXkgXSA9IHZhbDtcblxuXHRcdH0sXG5cblx0fTtcblxuXHQvLyAqKioqKioqKioqKioqKiBVVElMSVRZIEZVTkNUSU9OUyAqKioqKioqKioqKioqKlxuXG5cdGZ1bmN0aW9uIGlzRmJ4Rm9ybWF0QmluYXJ5KCBidWZmZXIgKSB7XG5cblx0XHR2YXIgQ09SUkVDVCA9ICdLYXlkYXJhIEZCWCBCaW5hcnkgIFxcMCc7XG5cblx0XHRyZXR1cm4gYnVmZmVyLmJ5dGVMZW5ndGggPj0gQ09SUkVDVC5sZW5ndGggJiYgQ09SUkVDVCA9PT0gY29udmVydEFycmF5QnVmZmVyVG9TdHJpbmcoIGJ1ZmZlciwgMCwgQ09SUkVDVC5sZW5ndGggKTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gaXNGYnhGb3JtYXRBU0NJSSggdGV4dCApIHtcblxuXHRcdHZhciBDT1JSRUNUID0gWyAnSycsICdhJywgJ3knLCAnZCcsICdhJywgJ3InLCAnYScsICdcXFxcJywgJ0YnLCAnQicsICdYJywgJ1xcXFwnLCAnQicsICdpJywgJ24nLCAnYScsICdyJywgJ3knLCAnXFxcXCcsICdcXFxcJyBdO1xuXG5cdFx0dmFyIGN1cnNvciA9IDA7XG5cblx0XHRmdW5jdGlvbiByZWFkKCBvZmZzZXQgKSB7XG5cblx0XHRcdHZhciByZXN1bHQgPSB0ZXh0WyBvZmZzZXQgLSAxIF07XG5cdFx0XHR0ZXh0ID0gdGV4dC5zbGljZSggY3Vyc29yICsgb2Zmc2V0ICk7XG5cdFx0XHRjdXJzb3IgKys7XG5cdFx0XHRyZXR1cm4gcmVzdWx0O1xuXG5cdFx0fVxuXG5cdFx0Zm9yICggdmFyIGkgPSAwOyBpIDwgQ09SUkVDVC5sZW5ndGg7ICsrIGkgKSB7XG5cblx0XHRcdHZhciBudW0gPSByZWFkKCAxICk7XG5cdFx0XHRpZiAoIG51bSA9PT0gQ09SUkVDVFsgaSBdICkge1xuXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblxuXHRcdFx0fVxuXG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRydWU7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGdldEZieFZlcnNpb24oIHRleHQgKSB7XG5cblx0XHR2YXIgdmVyc2lvblJlZ0V4cCA9IC9GQlhWZXJzaW9uOiAoXFxkKykvO1xuXHRcdHZhciBtYXRjaCA9IHRleHQubWF0Y2goIHZlcnNpb25SZWdFeHAgKTtcblxuXHRcdGlmICggbWF0Y2ggKSB7XG5cblx0XHRcdHZhciB2ZXJzaW9uID0gcGFyc2VJbnQoIG1hdGNoWyAxIF0gKTtcblx0XHRcdHJldHVybiB2ZXJzaW9uO1xuXG5cdFx0fVxuXG5cdFx0dGhyb3cgbmV3IEVycm9yKCAnVEhSRUUuRkJYTG9hZGVyOiBDYW5ub3QgZmluZCB0aGUgdmVyc2lvbiBudW1iZXIgZm9yIHRoZSBmaWxlIGdpdmVuLicgKTtcblxuXHR9XG5cblx0Ly8gQ29udmVydHMgRkJYIHRpY2tzIGludG8gcmVhbCB0aW1lIHNlY29uZHMuXG5cdGZ1bmN0aW9uIGNvbnZlcnRGQlhUaW1lVG9TZWNvbmRzKCB0aW1lICkge1xuXG5cdFx0cmV0dXJuIHRpbWUgLyA0NjE4NjE1ODAwMDtcblxuXHR9XG5cblx0dmFyIGRhdGFBcnJheSA9IFtdO1xuXG5cdC8vIGV4dHJhY3RzIHRoZSBkYXRhIGZyb20gdGhlIGNvcnJlY3QgcG9zaXRpb24gaW4gdGhlIEZCWCBhcnJheSBiYXNlZCBvbiBpbmRleGluZyB0eXBlXG5cdGZ1bmN0aW9uIGdldERhdGEoIHBvbHlnb25WZXJ0ZXhJbmRleCwgcG9seWdvbkluZGV4LCB2ZXJ0ZXhJbmRleCwgaW5mb09iamVjdCApIHtcblxuXHRcdHZhciBpbmRleDtcblxuXHRcdHN3aXRjaCAoIGluZm9PYmplY3QubWFwcGluZ1R5cGUgKSB7XG5cblx0XHRcdGNhc2UgJ0J5UG9seWdvblZlcnRleCcgOlxuXHRcdFx0XHRpbmRleCA9IHBvbHlnb25WZXJ0ZXhJbmRleDtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlICdCeVBvbHlnb24nIDpcblx0XHRcdFx0aW5kZXggPSBwb2x5Z29uSW5kZXg7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAnQnlWZXJ0aWNlJyA6XG5cdFx0XHRcdGluZGV4ID0gdmVydGV4SW5kZXg7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAnQWxsU2FtZScgOlxuXHRcdFx0XHRpbmRleCA9IGluZm9PYmplY3QuaW5kaWNlc1sgMCBdO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGRlZmF1bHQgOlxuXHRcdFx0XHRjb25zb2xlLndhcm4oICdUSFJFRS5GQlhMb2FkZXI6IHVua25vd24gYXR0cmlidXRlIG1hcHBpbmcgdHlwZSAnICsgaW5mb09iamVjdC5tYXBwaW5nVHlwZSApO1xuXG5cdFx0fVxuXG5cdFx0aWYgKCBpbmZvT2JqZWN0LnJlZmVyZW5jZVR5cGUgPT09ICdJbmRleFRvRGlyZWN0JyApIGluZGV4ID0gaW5mb09iamVjdC5pbmRpY2VzWyBpbmRleCBdO1xuXG5cdFx0dmFyIGZyb20gPSBpbmRleCAqIGluZm9PYmplY3QuZGF0YVNpemU7XG5cdFx0dmFyIHRvID0gZnJvbSArIGluZm9PYmplY3QuZGF0YVNpemU7XG5cblx0XHRyZXR1cm4gc2xpY2UoIGRhdGFBcnJheSwgaW5mb09iamVjdC5idWZmZXIsIGZyb20sIHRvICk7XG5cblx0fVxuXG5cdHZhciB0ZW1wRXVsZXIgPSBuZXcgRXVsZXIoKTtcblx0dmFyIHRlbXBWZWMgPSBuZXcgVmVjdG9yMygpO1xuXG5cdC8vIGdlbmVyYXRlIHRyYW5zZm9ybWF0aW9uIGZyb20gRkJYIHRyYW5zZm9ybSBkYXRhXG5cdC8vIHJlZjogaHR0cHM6Ly9oZWxwLmF1dG9kZXNrLmNvbS92aWV3L0ZCWC8yMDE3L0VOVS8/Z3VpZD1fX2ZpbGVzX0dVSURfMTBDREQ2M0NfNzlDMV80RjJEX0JCMjhfQUQyQkU2NUEwMkVEX2h0bVxuXHQvLyByZWY6IGh0dHA6Ly9kb2NzLmF1dG9kZXNrLmNvbS9GQlgvMjAxNC9FTlUvRkJYLVNESy1Eb2N1bWVudGF0aW9uL2luZGV4Lmh0bWw/dXJsPWNwcF9yZWYvX3RyYW5zZm9ybWF0aW9uc18ybWFpbl84Y3h4LWV4YW1wbGUuaHRtbCx0b3BpY051bWJlcj1jcHBfcmVmX190cmFuc2Zvcm1hdGlvbnNfMm1haW5fOGN4eF9leGFtcGxlX2h0bWxmYzEwYTFlMS1iMThkLTRlNzItOWRjMC03MGQwZjE5NTlmNWVcblx0ZnVuY3Rpb24gZ2VuZXJhdGVUcmFuc2Zvcm0oIHRyYW5zZm9ybURhdGEgKSB7XG5cblx0XHR2YXIgbFRyYW5zbGF0aW9uTSA9IG5ldyBNYXRyaXg0KCk7XG5cdFx0dmFyIGxQcmVSb3RhdGlvbk0gPSBuZXcgTWF0cml4NCgpO1xuXHRcdHZhciBsUm90YXRpb25NID0gbmV3IE1hdHJpeDQoKTtcblx0XHR2YXIgbFBvc3RSb3RhdGlvbk0gPSBuZXcgTWF0cml4NCgpO1xuXG5cdFx0dmFyIGxTY2FsaW5nTSA9IG5ldyBNYXRyaXg0KCk7XG5cdFx0dmFyIGxTY2FsaW5nUGl2b3RNID0gbmV3IE1hdHJpeDQoKTtcblx0XHR2YXIgbFNjYWxpbmdPZmZzZXRNID0gbmV3IE1hdHJpeDQoKTtcblx0XHR2YXIgbFJvdGF0aW9uT2Zmc2V0TSA9IG5ldyBNYXRyaXg0KCk7XG5cdFx0dmFyIGxSb3RhdGlvblBpdm90TSA9IG5ldyBNYXRyaXg0KCk7XG5cblx0XHR2YXIgbFBhcmVudEdYID0gbmV3IE1hdHJpeDQoKTtcblx0XHR2YXIgbFBhcmVudExYID0gbmV3IE1hdHJpeDQoKTtcblx0XHR2YXIgbEdsb2JhbFQgPSBuZXcgTWF0cml4NCgpO1xuXG5cdFx0dmFyIGluaGVyaXRUeXBlID0gKCB0cmFuc2Zvcm1EYXRhLmluaGVyaXRUeXBlICkgPyB0cmFuc2Zvcm1EYXRhLmluaGVyaXRUeXBlIDogMDtcblxuXHRcdGlmICggdHJhbnNmb3JtRGF0YS50cmFuc2xhdGlvbiApIGxUcmFuc2xhdGlvbk0uc2V0UG9zaXRpb24oIHRlbXBWZWMuZnJvbUFycmF5KCB0cmFuc2Zvcm1EYXRhLnRyYW5zbGF0aW9uICkgKTtcblxuXHRcdGlmICggdHJhbnNmb3JtRGF0YS5wcmVSb3RhdGlvbiApIHtcblxuXHRcdFx0dmFyIGFycmF5ID0gdHJhbnNmb3JtRGF0YS5wcmVSb3RhdGlvbi5tYXAoIE1hdGhVdGlscy5kZWdUb1JhZCApO1xuXHRcdFx0YXJyYXkucHVzaCggdHJhbnNmb3JtRGF0YS5ldWxlck9yZGVyICk7XG5cdFx0XHRsUHJlUm90YXRpb25NLm1ha2VSb3RhdGlvbkZyb21FdWxlciggdGVtcEV1bGVyLmZyb21BcnJheSggYXJyYXkgKSApO1xuXG5cdFx0fVxuXG5cdFx0aWYgKCB0cmFuc2Zvcm1EYXRhLnJvdGF0aW9uICkge1xuXG5cdFx0XHR2YXIgYXJyYXkgPSB0cmFuc2Zvcm1EYXRhLnJvdGF0aW9uLm1hcCggTWF0aFV0aWxzLmRlZ1RvUmFkICk7XG5cdFx0XHRhcnJheS5wdXNoKCB0cmFuc2Zvcm1EYXRhLmV1bGVyT3JkZXIgKTtcblx0XHRcdGxSb3RhdGlvbk0ubWFrZVJvdGF0aW9uRnJvbUV1bGVyKCB0ZW1wRXVsZXIuZnJvbUFycmF5KCBhcnJheSApICk7XG5cblx0XHR9XG5cblx0XHRpZiAoIHRyYW5zZm9ybURhdGEucG9zdFJvdGF0aW9uICkge1xuXG5cdFx0XHR2YXIgYXJyYXkgPSB0cmFuc2Zvcm1EYXRhLnBvc3RSb3RhdGlvbi5tYXAoIE1hdGhVdGlscy5kZWdUb1JhZCApO1xuXHRcdFx0YXJyYXkucHVzaCggdHJhbnNmb3JtRGF0YS5ldWxlck9yZGVyICk7XG5cdFx0XHRsUG9zdFJvdGF0aW9uTS5tYWtlUm90YXRpb25Gcm9tRXVsZXIoIHRlbXBFdWxlci5mcm9tQXJyYXkoIGFycmF5ICkgKTtcblx0XHRcdGxQb3N0Um90YXRpb25NLmludmVydCgpO1xuXG5cdFx0fVxuXG5cdFx0aWYgKCB0cmFuc2Zvcm1EYXRhLnNjYWxlICkgbFNjYWxpbmdNLnNjYWxlKCB0ZW1wVmVjLmZyb21BcnJheSggdHJhbnNmb3JtRGF0YS5zY2FsZSApICk7XG5cblx0XHQvLyBQaXZvdHMgYW5kIG9mZnNldHNcblx0XHRpZiAoIHRyYW5zZm9ybURhdGEuc2NhbGluZ09mZnNldCApIGxTY2FsaW5nT2Zmc2V0TS5zZXRQb3NpdGlvbiggdGVtcFZlYy5mcm9tQXJyYXkoIHRyYW5zZm9ybURhdGEuc2NhbGluZ09mZnNldCApICk7XG5cdFx0aWYgKCB0cmFuc2Zvcm1EYXRhLnNjYWxpbmdQaXZvdCApIGxTY2FsaW5nUGl2b3RNLnNldFBvc2l0aW9uKCB0ZW1wVmVjLmZyb21BcnJheSggdHJhbnNmb3JtRGF0YS5zY2FsaW5nUGl2b3QgKSApO1xuXHRcdGlmICggdHJhbnNmb3JtRGF0YS5yb3RhdGlvbk9mZnNldCApIGxSb3RhdGlvbk9mZnNldE0uc2V0UG9zaXRpb24oIHRlbXBWZWMuZnJvbUFycmF5KCB0cmFuc2Zvcm1EYXRhLnJvdGF0aW9uT2Zmc2V0ICkgKTtcblx0XHRpZiAoIHRyYW5zZm9ybURhdGEucm90YXRpb25QaXZvdCApIGxSb3RhdGlvblBpdm90TS5zZXRQb3NpdGlvbiggdGVtcFZlYy5mcm9tQXJyYXkoIHRyYW5zZm9ybURhdGEucm90YXRpb25QaXZvdCApICk7XG5cblx0XHQvLyBwYXJlbnQgdHJhbnNmb3JtXG5cdFx0aWYgKCB0cmFuc2Zvcm1EYXRhLnBhcmVudE1hdHJpeFdvcmxkICkge1xuXG5cdFx0XHRsUGFyZW50TFguY29weSggdHJhbnNmb3JtRGF0YS5wYXJlbnRNYXRyaXggKTtcblx0XHRcdGxQYXJlbnRHWC5jb3B5KCB0cmFuc2Zvcm1EYXRhLnBhcmVudE1hdHJpeFdvcmxkICk7XG5cblx0XHR9XG5cblx0XHR2YXIgbExSTSA9IG5ldyBNYXRyaXg0KCkuY29weSggbFByZVJvdGF0aW9uTSApLm11bHRpcGx5KCBsUm90YXRpb25NICkubXVsdGlwbHkoIGxQb3N0Um90YXRpb25NICk7XG5cdFx0Ly8gR2xvYmFsIFJvdGF0aW9uXG5cdFx0dmFyIGxQYXJlbnRHUk0gPSBuZXcgTWF0cml4NCgpO1xuXHRcdGxQYXJlbnRHUk0uZXh0cmFjdFJvdGF0aW9uKCBsUGFyZW50R1ggKTtcblxuXHRcdC8vIEdsb2JhbCBTaGVhcipTY2FsaW5nXG5cdFx0dmFyIGxQYXJlbnRUTSA9IG5ldyBNYXRyaXg0KCk7XG5cdFx0bFBhcmVudFRNLmNvcHlQb3NpdGlvbiggbFBhcmVudEdYICk7XG5cblx0XHR2YXIgbFBhcmVudEdTTSA9IG5ldyBNYXRyaXg0KCk7XG5cdFx0dmFyIGxQYXJlbnRHUlNNID0gbmV3IE1hdHJpeDQoKS5jb3B5KCBsUGFyZW50VE0gKS5pbnZlcnQoKS5tdWx0aXBseSggbFBhcmVudEdYICk7XG5cdFx0bFBhcmVudEdTTS5jb3B5KCBsUGFyZW50R1JNICkuaW52ZXJ0KCkubXVsdGlwbHkoIGxQYXJlbnRHUlNNICk7XG5cdFx0dmFyIGxMU00gPSBsU2NhbGluZ007XG5cblx0XHR2YXIgbEdsb2JhbFJTID0gbmV3IE1hdHJpeDQoKTtcblxuXHRcdGlmICggaW5oZXJpdFR5cGUgPT09IDAgKSB7XG5cblx0XHRcdGxHbG9iYWxSUy5jb3B5KCBsUGFyZW50R1JNICkubXVsdGlwbHkoIGxMUk0gKS5tdWx0aXBseSggbFBhcmVudEdTTSApLm11bHRpcGx5KCBsTFNNICk7XG5cblx0XHR9IGVsc2UgaWYgKCBpbmhlcml0VHlwZSA9PT0gMSApIHtcblxuXHRcdFx0bEdsb2JhbFJTLmNvcHkoIGxQYXJlbnRHUk0gKS5tdWx0aXBseSggbFBhcmVudEdTTSApLm11bHRpcGx5KCBsTFJNICkubXVsdGlwbHkoIGxMU00gKTtcblxuXHRcdH0gZWxzZSB7XG5cblx0XHRcdHZhciBsUGFyZW50TFNNID0gbmV3IE1hdHJpeDQoKS5zY2FsZSggbmV3IFZlY3RvcjMoKS5zZXRGcm9tTWF0cml4U2NhbGUoIGxQYXJlbnRMWCApICk7XG5cdFx0XHR2YXIgbFBhcmVudExTTV9pbnYgPSBuZXcgTWF0cml4NCgpLmNvcHkoIGxQYXJlbnRMU00gKS5pbnZlcnQoKTtcblx0XHRcdHZhciBsUGFyZW50R1NNX25vTG9jYWwgPSBuZXcgTWF0cml4NCgpLmNvcHkoIGxQYXJlbnRHU00gKS5tdWx0aXBseSggbFBhcmVudExTTV9pbnYgKTtcblxuXHRcdFx0bEdsb2JhbFJTLmNvcHkoIGxQYXJlbnRHUk0gKS5tdWx0aXBseSggbExSTSApLm11bHRpcGx5KCBsUGFyZW50R1NNX25vTG9jYWwgKS5tdWx0aXBseSggbExTTSApO1xuXG5cdFx0fVxuXG5cdFx0dmFyIGxSb3RhdGlvblBpdm90TV9pbnYgPSBuZXcgTWF0cml4NCgpO1xuXHRcdGxSb3RhdGlvblBpdm90TV9pbnYuY29weSggbFJvdGF0aW9uUGl2b3RNICkuaW52ZXJ0KCk7XG5cdFx0dmFyIGxTY2FsaW5nUGl2b3RNX2ludiA9IG5ldyBNYXRyaXg0KCk7XG5cdFx0bFNjYWxpbmdQaXZvdE1faW52LmNvcHkoIGxTY2FsaW5nUGl2b3RNICkuaW52ZXJ0KCk7XG5cdFx0Ly8gQ2FsY3VsYXRlIHRoZSBsb2NhbCB0cmFuc2Zvcm0gbWF0cml4XG5cdFx0dmFyIGxUcmFuc2Zvcm0gPSBuZXcgTWF0cml4NCgpO1xuXHRcdGxUcmFuc2Zvcm0uY29weSggbFRyYW5zbGF0aW9uTSApLm11bHRpcGx5KCBsUm90YXRpb25PZmZzZXRNICkubXVsdGlwbHkoIGxSb3RhdGlvblBpdm90TSApLm11bHRpcGx5KCBsUHJlUm90YXRpb25NICkubXVsdGlwbHkoIGxSb3RhdGlvbk0gKS5tdWx0aXBseSggbFBvc3RSb3RhdGlvbk0gKS5tdWx0aXBseSggbFJvdGF0aW9uUGl2b3RNX2ludiApLm11bHRpcGx5KCBsU2NhbGluZ09mZnNldE0gKS5tdWx0aXBseSggbFNjYWxpbmdQaXZvdE0gKS5tdWx0aXBseSggbFNjYWxpbmdNICkubXVsdGlwbHkoIGxTY2FsaW5nUGl2b3RNX2ludiApO1xuXG5cdFx0dmFyIGxMb2NhbFRXaXRoQWxsUGl2b3RBbmRPZmZzZXRJbmZvID0gbmV3IE1hdHJpeDQoKS5jb3B5UG9zaXRpb24oIGxUcmFuc2Zvcm0gKTtcblxuXHRcdHZhciBsR2xvYmFsVHJhbnNsYXRpb24gPSBuZXcgTWF0cml4NCgpLmNvcHkoIGxQYXJlbnRHWCApLm11bHRpcGx5KCBsTG9jYWxUV2l0aEFsbFBpdm90QW5kT2Zmc2V0SW5mbyApO1xuXHRcdGxHbG9iYWxULmNvcHlQb3NpdGlvbiggbEdsb2JhbFRyYW5zbGF0aW9uICk7XG5cblx0XHRsVHJhbnNmb3JtID0gbmV3IE1hdHJpeDQoKS5jb3B5KCBsR2xvYmFsVCApLm11bHRpcGx5KCBsR2xvYmFsUlMgKTtcblxuXHRcdC8vIGZyb20gZ2xvYmFsIHRvIGxvY2FsXG5cdFx0bFRyYW5zZm9ybS5wcmVtdWx0aXBseSggbFBhcmVudEdYLmludmVydCgpICk7XG5cblx0XHRyZXR1cm4gbFRyYW5zZm9ybTtcblxuXHR9XG5cblx0Ly8gUmV0dXJucyB0aGUgdGhyZWUuanMgaW50cmluc2ljIEV1bGVyIG9yZGVyIGNvcnJlc3BvbmRpbmcgdG8gRkJYIGV4dHJpbnNpYyBFdWxlciBvcmRlclxuXHQvLyByZWY6IGh0dHA6Ly9oZWxwLmF1dG9kZXNrLmNvbS92aWV3L0ZCWC8yMDE3L0VOVS8/Z3VpZD1fX2NwcF9yZWZfY2xhc3NfZmJ4X2V1bGVyX2h0bWxcblx0ZnVuY3Rpb24gZ2V0RXVsZXJPcmRlciggb3JkZXIgKSB7XG5cblx0XHRvcmRlciA9IG9yZGVyIHx8IDA7XG5cblx0XHR2YXIgZW51bXMgPSBbXG5cdFx0XHQnWllYJywgLy8gLT4gWFlaIGV4dHJpbnNpY1xuXHRcdFx0J1laWCcsIC8vIC0+IFhaWSBleHRyaW5zaWNcblx0XHRcdCdYWlknLCAvLyAtPiBZWlggZXh0cmluc2ljXG5cdFx0XHQnWlhZJywgLy8gLT4gWVhaIGV4dHJpbnNpY1xuXHRcdFx0J1lYWicsIC8vIC0+IFpYWSBleHRyaW5zaWNcblx0XHRcdCdYWVonLCAvLyAtPiBaWVggZXh0cmluc2ljXG5cdFx0XHQvLydTcGhlcmljWFlaJywgLy8gbm90IHBvc3NpYmxlIHRvIHN1cHBvcnRcblx0XHRdO1xuXG5cdFx0aWYgKCBvcmRlciA9PT0gNiApIHtcblxuXHRcdFx0Y29uc29sZS53YXJuKCAnVEhSRUUuRkJYTG9hZGVyOiB1bnN1cHBvcnRlZCBFdWxlciBPcmRlcjogU3BoZXJpY2FsIFhZWi4gQW5pbWF0aW9ucyBhbmQgcm90YXRpb25zIG1heSBiZSBpbmNvcnJlY3QuJyApO1xuXHRcdFx0cmV0dXJuIGVudW1zWyAwIF07XG5cblx0XHR9XG5cblx0XHRyZXR1cm4gZW51bXNbIG9yZGVyIF07XG5cblx0fVxuXG5cdC8vIFBhcnNlcyBjb21tYSBzZXBhcmF0ZWQgbGlzdCBvZiBudW1iZXJzIGFuZCByZXR1cm5zIHRoZW0gYW4gYXJyYXkuXG5cdC8vIFVzZWQgaW50ZXJuYWxseSBieSB0aGUgVGV4dFBhcnNlclxuXHRmdW5jdGlvbiBwYXJzZU51bWJlckFycmF5KCB2YWx1ZSApIHtcblxuXHRcdHZhciBhcnJheSA9IHZhbHVlLnNwbGl0KCAnLCcgKS5tYXAoIGZ1bmN0aW9uICggdmFsICkge1xuXG5cdFx0XHRyZXR1cm4gcGFyc2VGbG9hdCggdmFsICk7XG5cblx0XHR9ICk7XG5cblx0XHRyZXR1cm4gYXJyYXk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGNvbnZlcnRBcnJheUJ1ZmZlclRvU3RyaW5nKCBidWZmZXIsIGZyb20sIHRvICkge1xuXG5cdFx0aWYgKCBmcm9tID09PSB1bmRlZmluZWQgKSBmcm9tID0gMDtcblx0XHRpZiAoIHRvID09PSB1bmRlZmluZWQgKSB0byA9IGJ1ZmZlci5ieXRlTGVuZ3RoO1xuXG5cdFx0cmV0dXJuIExvYWRlclV0aWxzLmRlY29kZVRleHQoIG5ldyBVaW50OEFycmF5KCBidWZmZXIsIGZyb20sIHRvICkgKTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gYXBwZW5kKCBhLCBiICkge1xuXG5cdFx0Zm9yICggdmFyIGkgPSAwLCBqID0gYS5sZW5ndGgsIGwgPSBiLmxlbmd0aDsgaSA8IGw7IGkgKyssIGogKysgKSB7XG5cblx0XHRcdGFbIGogXSA9IGJbIGkgXTtcblxuXHRcdH1cblxuXHR9XG5cblx0ZnVuY3Rpb24gc2xpY2UoIGEsIGIsIGZyb20sIHRvICkge1xuXG5cdFx0Zm9yICggdmFyIGkgPSBmcm9tLCBqID0gMDsgaSA8IHRvOyBpICsrLCBqICsrICkge1xuXG5cdFx0XHRhWyBqIF0gPSBiWyBpIF07XG5cblx0XHR9XG5cblx0XHRyZXR1cm4gYTtcblxuXHR9XG5cblx0Ly8gaW5qZWN0IGFycmF5IGEyIGludG8gYXJyYXkgYTEgYXQgaW5kZXhcblx0ZnVuY3Rpb24gaW5qZWN0KCBhMSwgaW5kZXgsIGEyICkge1xuXG5cdFx0cmV0dXJuIGExLnNsaWNlKCAwLCBpbmRleCApLmNvbmNhdCggYTIgKS5jb25jYXQoIGExLnNsaWNlKCBpbmRleCApICk7XG5cblx0fVxuXG5cdHJldHVybiBGQlhMb2FkZXI7XG5cbn0gKSgpO1xuXG5leHBvcnQgeyBGQlhMb2FkZXIgfTtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/three/examples/jsm/loaders/FBXLoader.js\n");

/***/ }),

/***/ "./node_modules/three/examples/jsm/loaders/GLTFLoader.js":
/*!***************************************************************!*\
  !*** ./node_modules/three/examples/jsm/loaders/GLTFLoader.js ***!
  \***************************************************************/
/*! exports provided: GLTFLoader */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"GLTFLoader\", function() { return GLTFLoader; });\n/* harmony import */ var _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../build/three.module.js */ \"./node_modules/three/build/three.module.js\");\n\n\nvar GLTFLoader = ( function () {\n\n\tfunction GLTFLoader( manager ) {\n\n\t\t_build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Loader\"].call( this, manager );\n\n\t\tthis.dracoLoader = null;\n\t\tthis.ktx2Loader = null;\n\t\tthis.meshoptDecoder = null;\n\n\t\tthis.pluginCallbacks = [];\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsClearcoatExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFTextureBasisUExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFTextureWebPExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsTransmissionExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFLightsExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMeshoptCompression( parser );\n\n\t\t} );\n\n\t}\n\n\tGLTFLoader.prototype = Object.assign( Object.create( _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Loader\"].prototype ), {\n\n\t\tconstructor: GLTFLoader,\n\n\t\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\t\tvar scope = this;\n\n\t\t\tvar resourcePath;\n\n\t\t\tif ( this.resourcePath !== '' ) {\n\n\t\t\t\tresourcePath = this.resourcePath;\n\n\t\t\t} else if ( this.path !== '' ) {\n\n\t\t\t\tresourcePath = this.path;\n\n\t\t\t} else {\n\n\t\t\t\tresourcePath = _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"LoaderUtils\"].extractUrlBase( url );\n\n\t\t\t}\n\n\t\t\t// Tells the LoadingManager to track an extra item, which resolves after\n\t\t\t// the model is fully loaded. This means the count of items loaded will\n\t\t\t// be incorrect, but ensures manager.onLoad() does not fire early.\n\t\t\tthis.manager.itemStart( url );\n\n\t\t\tvar _onError = function ( e ) {\n\n\t\t\t\tif ( onError ) {\n\n\t\t\t\t\tonError( e );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( e );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t};\n\n\t\t\tvar loader = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"FileLoader\"]( this.manager );\n\n\t\t\tloader.setPath( this.path );\n\t\t\tloader.setResponseType( 'arraybuffer' );\n\t\t\tloader.setRequestHeader( this.requestHeader );\n\t\t\tloader.setWithCredentials( this.withCredentials );\n\n\t\t\tloader.load( url, function ( data ) {\n\n\t\t\t\ttry {\n\n\t\t\t\t\tscope.parse( data, resourcePath, function ( gltf ) {\n\n\t\t\t\t\t\tonLoad( gltf );\n\n\t\t\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t\t\t}, _onError );\n\n\t\t\t\t} catch ( e ) {\n\n\t\t\t\t\t_onError( e );\n\n\t\t\t\t}\n\n\t\t\t}, onProgress, _onError );\n\n\t\t},\n\n\t\tsetDRACOLoader: function ( dracoLoader ) {\n\n\t\t\tthis.dracoLoader = dracoLoader;\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetDDSLoader: function () {\n\n\t\t\tthrow new Error(\n\n\t\t\t\t'THREE.GLTFLoader: \"MSFT_texture_dds\" no longer supported. Please update to \"KHR_texture_basisu\".'\n\n\t\t\t);\n\n\t\t},\n\n\t\tsetKTX2Loader: function ( ktx2Loader ) {\n\n\t\t\tthis.ktx2Loader = ktx2Loader;\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetMeshoptDecoder: function ( meshoptDecoder ) {\n\n\t\t\tthis.meshoptDecoder = meshoptDecoder;\n\t\t\treturn this;\n\n\t\t},\n\n\t\tregister: function ( callback ) {\n\n\t\t\tif ( this.pluginCallbacks.indexOf( callback ) === - 1 ) {\n\n\t\t\t\tthis.pluginCallbacks.push( callback );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tunregister: function ( callback ) {\n\n\t\t\tif ( this.pluginCallbacks.indexOf( callback ) !== - 1 ) {\n\n\t\t\t\tthis.pluginCallbacks.splice( this.pluginCallbacks.indexOf( callback ), 1 );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tparse: function ( data, path, onLoad, onError ) {\n\n\t\t\tvar content;\n\t\t\tvar extensions = {};\n\t\t\tvar plugins = {};\n\n\t\t\tif ( typeof data === 'string' ) {\n\n\t\t\t\tcontent = data;\n\n\t\t\t} else {\n\n\t\t\t\tvar magic = _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"LoaderUtils\"].decodeText( new Uint8Array( data, 0, 4 ) );\n\n\t\t\t\tif ( magic === BINARY_EXTENSION_HEADER_MAGIC ) {\n\n\t\t\t\t\ttry {\n\n\t\t\t\t\t\textensions[ EXTENSIONS.KHR_BINARY_GLTF ] = new GLTFBinaryExtension( data );\n\n\t\t\t\t\t} catch ( error ) {\n\n\t\t\t\t\t\tif ( onError ) onError( error );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tcontent = extensions[ EXTENSIONS.KHR_BINARY_GLTF ].content;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tcontent = _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"LoaderUtils\"].decodeText( new Uint8Array( data ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar json = JSON.parse( content );\n\n\t\t\tif ( json.asset === undefined || json.asset.version[ 0 ] < 2 ) {\n\n\t\t\t\tif ( onError ) onError( new Error( 'THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.' ) );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tvar parser = new GLTFParser( json, {\n\n\t\t\t\tpath: path || this.resourcePath || '',\n\t\t\t\tcrossOrigin: this.crossOrigin,\n\t\t\t\trequestHeader: this.requestHeader,\n\t\t\t\tmanager: this.manager,\n\t\t\t\tktx2Loader: this.ktx2Loader,\n\t\t\t\tmeshoptDecoder: this.meshoptDecoder\n\n\t\t\t} );\n\n\t\t\tparser.fileLoader.setRequestHeader( this.requestHeader );\n\n\t\t\tfor ( var i = 0; i < this.pluginCallbacks.length; i ++ ) {\n\n\t\t\t\tvar plugin = this.pluginCallbacks[ i ]( parser );\n\t\t\t\tplugins[ plugin.name ] = plugin;\n\n\t\t\t\t// Workaround to avoid determining as unknown extension\n\t\t\t\t// in addUnknownExtensionsToUserData().\n\t\t\t\t// Remove this workaround if we move all the existing\n\t\t\t\t// extension handlers to plugin system\n\t\t\t\textensions[ plugin.name ] = true;\n\n\t\t\t}\n\n\t\t\tif ( json.extensionsUsed ) {\n\n\t\t\t\tfor ( var i = 0; i < json.extensionsUsed.length; ++ i ) {\n\n\t\t\t\t\tvar extensionName = json.extensionsUsed[ i ];\n\t\t\t\t\tvar extensionsRequired = json.extensionsRequired || [];\n\n\t\t\t\t\tswitch ( extensionName ) {\n\n\t\t\t\t\t\tcase EXTENSIONS.KHR_MATERIALS_UNLIT:\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFMaterialsUnlitExtension();\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFMaterialsPbrSpecularGlossinessExtension();\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase EXTENSIONS.KHR_DRACO_MESH_COMPRESSION:\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFDracoMeshCompressionExtension( json, this.dracoLoader );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase EXTENSIONS.KHR_TEXTURE_TRANSFORM:\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFTextureTransformExtension();\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase EXTENSIONS.KHR_MESH_QUANTIZATION:\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFMeshQuantizationExtension();\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\tif ( extensionsRequired.indexOf( extensionName ) >= 0 && plugins[ extensionName ] === undefined ) {\n\n\t\t\t\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Unknown extension \"' + extensionName + '\".' );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tparser.setExtensions( extensions );\n\t\t\tparser.setPlugins( plugins );\n\t\t\tparser.parse( onLoad, onError );\n\n\t\t}\n\n\t} );\n\n\t/* GLTFREGISTRY */\n\n\tfunction GLTFRegistry() {\n\n\t\tvar objects = {};\n\n\t\treturn\t{\n\n\t\t\tget: function ( key ) {\n\n\t\t\t\treturn objects[ key ];\n\n\t\t\t},\n\n\t\t\tadd: function ( key, object ) {\n\n\t\t\t\tobjects[ key ] = object;\n\n\t\t\t},\n\n\t\t\tremove: function ( key ) {\n\n\t\t\t\tdelete objects[ key ];\n\n\t\t\t},\n\n\t\t\tremoveAll: function () {\n\n\t\t\t\tobjects = {};\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\t/*********************************/\n\t/********** EXTENSIONS ***********/\n\t/*********************************/\n\n\tvar EXTENSIONS = {\n\t\tKHR_BINARY_GLTF: 'KHR_binary_glTF',\n\t\tKHR_DRACO_MESH_COMPRESSION: 'KHR_draco_mesh_compression',\n\t\tKHR_LIGHTS_PUNCTUAL: 'KHR_lights_punctual',\n\t\tKHR_MATERIALS_CLEARCOAT: 'KHR_materials_clearcoat',\n\t\tKHR_MATERIALS_PBR_SPECULAR_GLOSSINESS: 'KHR_materials_pbrSpecularGlossiness',\n\t\tKHR_MATERIALS_TRANSMISSION: 'KHR_materials_transmission',\n\t\tKHR_MATERIALS_UNLIT: 'KHR_materials_unlit',\n\t\tKHR_TEXTURE_BASISU: 'KHR_texture_basisu',\n\t\tKHR_TEXTURE_TRANSFORM: 'KHR_texture_transform',\n\t\tKHR_MESH_QUANTIZATION: 'KHR_mesh_quantization',\n\t\tEXT_TEXTURE_WEBP: 'EXT_texture_webp',\n\t\tEXT_MESHOPT_COMPRESSION: 'EXT_meshopt_compression'\n\t};\n\n\t/**\n\t * Punctual Lights Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_lights_punctual\n\t */\n\tfunction GLTFLightsExtension( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_LIGHTS_PUNCTUAL;\n\n\t\t// Object3D instance caches\n\t\tthis.cache = { refs: {}, uses: {} };\n\n\t}\n\n\tGLTFLightsExtension.prototype._markDefs = function () {\n\n\t\tvar parser = this.parser;\n\t\tvar nodeDefs = this.parser.json.nodes || [];\n\n\t\tfor ( var nodeIndex = 0, nodeLength = nodeDefs.length; nodeIndex < nodeLength; nodeIndex ++ ) {\n\n\t\t\tvar nodeDef = nodeDefs[ nodeIndex ];\n\n\t\t\tif ( nodeDef.extensions\n\t\t\t\t&& nodeDef.extensions[ this.name ]\n\t\t\t\t&& nodeDef.extensions[ this.name ].light !== undefined ) {\n\n\t\t\t\tparser._addNodeRef( this.cache, nodeDef.extensions[ this.name ].light );\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tGLTFLightsExtension.prototype._loadLight = function ( lightIndex ) {\n\n\t\tvar parser = this.parser;\n\t\tvar cacheKey = 'light:' + lightIndex;\n\t\tvar dependency = parser.cache.get( cacheKey );\n\n\t\tif ( dependency ) return dependency;\n\n\t\tvar json = parser.json;\n\t\tvar extensions = ( json.extensions && json.extensions[ this.name ] ) || {};\n\t\tvar lightDefs = extensions.lights || [];\n\t\tvar lightDef = lightDefs[ lightIndex ];\n\t\tvar lightNode;\n\n\t\tvar color = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Color\"]( 0xffffff );\n\n\t\tif ( lightDef.color !== undefined ) color.fromArray( lightDef.color );\n\n\t\tvar range = lightDef.range !== undefined ? lightDef.range : 0;\n\n\t\tswitch ( lightDef.type ) {\n\n\t\t\tcase 'directional':\n\t\t\t\tlightNode = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"DirectionalLight\"]( color );\n\t\t\t\tlightNode.target.position.set( 0, 0, - 1 );\n\t\t\t\tlightNode.add( lightNode.target );\n\t\t\t\tbreak;\n\n\t\t\tcase 'point':\n\t\t\t\tlightNode = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"PointLight\"]( color );\n\t\t\t\tlightNode.distance = range;\n\t\t\t\tbreak;\n\n\t\t\tcase 'spot':\n\t\t\t\tlightNode = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"SpotLight\"]( color );\n\t\t\t\tlightNode.distance = range;\n\t\t\t\t// Handle spotlight properties.\n\t\t\t\tlightDef.spot = lightDef.spot || {};\n\t\t\t\tlightDef.spot.innerConeAngle = lightDef.spot.innerConeAngle !== undefined ? lightDef.spot.innerConeAngle : 0;\n\t\t\t\tlightDef.spot.outerConeAngle = lightDef.spot.outerConeAngle !== undefined ? lightDef.spot.outerConeAngle : Math.PI / 4.0;\n\t\t\t\tlightNode.angle = lightDef.spot.outerConeAngle;\n\t\t\t\tlightNode.penumbra = 1.0 - lightDef.spot.innerConeAngle / lightDef.spot.outerConeAngle;\n\t\t\t\tlightNode.target.position.set( 0, 0, - 1 );\n\t\t\t\tlightNode.add( lightNode.target );\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tthrow new Error( 'THREE.GLTFLoader: Unexpected light type: ' + lightDef.type );\n\n\t\t}\n\n\t\t// Some lights (e.g. spot) default to a position other than the origin. Reset the position\n\t\t// here, because node-level parsing will only override position if explicitly specified.\n\t\tlightNode.position.set( 0, 0, 0 );\n\n\t\tlightNode.decay = 2;\n\n\t\tif ( lightDef.intensity !== undefined ) lightNode.intensity = lightDef.intensity;\n\n\t\tlightNode.name = parser.createUniqueName( lightDef.name || ( 'light_' + lightIndex ) );\n\n\t\tdependency = Promise.resolve( lightNode );\n\n\t\tparser.cache.add( cacheKey, dependency );\n\n\t\treturn dependency;\n\n\t};\n\n\tGLTFLightsExtension.prototype.createNodeAttachment = function ( nodeIndex ) {\n\n\t\tvar self = this;\n\t\tvar parser = this.parser;\n\t\tvar json = parser.json;\n\t\tvar nodeDef = json.nodes[ nodeIndex ];\n\t\tvar lightDef = ( nodeDef.extensions && nodeDef.extensions[ this.name ] ) || {};\n\t\tvar lightIndex = lightDef.light;\n\n\t\tif ( lightIndex === undefined ) return null;\n\n\t\treturn this._loadLight( lightIndex ).then( function ( light ) {\n\n\t\t\treturn parser._getNodeRef( self.cache, lightIndex, light );\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Unlit Materials Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_unlit\n\t */\n\tfunction GLTFMaterialsUnlitExtension() {\n\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_UNLIT;\n\n\t}\n\n\tGLTFMaterialsUnlitExtension.prototype.getMaterialType = function () {\n\n\t\treturn _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"MeshBasicMaterial\"];\n\n\t};\n\n\tGLTFMaterialsUnlitExtension.prototype.extendParams = function ( materialParams, materialDef, parser ) {\n\n\t\tvar pending = [];\n\n\t\tmaterialParams.color = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Color\"]( 1.0, 1.0, 1.0 );\n\t\tmaterialParams.opacity = 1.0;\n\n\t\tvar metallicRoughness = materialDef.pbrMetallicRoughness;\n\n\t\tif ( metallicRoughness ) {\n\n\t\t\tif ( Array.isArray( metallicRoughness.baseColorFactor ) ) {\n\n\t\t\t\tvar array = metallicRoughness.baseColorFactor;\n\n\t\t\t\tmaterialParams.color.fromArray( array );\n\t\t\t\tmaterialParams.opacity = array[ 3 ];\n\n\t\t\t}\n\n\t\t\tif ( metallicRoughness.baseColorTexture !== undefined ) {\n\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'map', metallicRoughness.baseColorTexture ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t};\n\n\t/**\n\t * Clearcoat Materials Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_clearcoat\n\t */\n\tfunction GLTFMaterialsClearcoatExtension( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_CLEARCOAT;\n\n\t}\n\n\tGLTFMaterialsClearcoatExtension.prototype.getMaterialType = function ( materialIndex ) {\n\n\t\tvar parser = this.parser;\n\t\tvar materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"MeshPhysicalMaterial\"];\n\n\t};\n\n\tGLTFMaterialsClearcoatExtension.prototype.extendMaterialParams = function ( materialIndex, materialParams ) {\n\n\t\tvar parser = this.parser;\n\t\tvar materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tvar pending = [];\n\n\t\tvar extension = materialDef.extensions[ this.name ];\n\n\t\tif ( extension.clearcoatFactor !== undefined ) {\n\n\t\t\tmaterialParams.clearcoat = extension.clearcoatFactor;\n\n\t\t}\n\n\t\tif ( extension.clearcoatTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'clearcoatMap', extension.clearcoatTexture ) );\n\n\t\t}\n\n\t\tif ( extension.clearcoatRoughnessFactor !== undefined ) {\n\n\t\t\tmaterialParams.clearcoatRoughness = extension.clearcoatRoughnessFactor;\n\n\t\t}\n\n\t\tif ( extension.clearcoatRoughnessTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'clearcoatRoughnessMap', extension.clearcoatRoughnessTexture ) );\n\n\t\t}\n\n\t\tif ( extension.clearcoatNormalTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'clearcoatNormalMap', extension.clearcoatNormalTexture ) );\n\n\t\t\tif ( extension.clearcoatNormalTexture.scale !== undefined ) {\n\n\t\t\t\tvar scale = extension.clearcoatNormalTexture.scale;\n\n\t\t\t\t// https://github.com/mrdoob/three.js/issues/11438#issuecomment-507003995\n\t\t\t\tmaterialParams.clearcoatNormalScale = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector2\"]( scale, - scale );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t};\n\n\t/**\n\t * Transmission Materials Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_transmission\n\t * Draft: https://github.com/KhronosGroup/glTF/pull/1698\n\t */\n\tfunction GLTFMaterialsTransmissionExtension( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_TRANSMISSION;\n\n\t}\n\n\tGLTFMaterialsTransmissionExtension.prototype.getMaterialType = function ( materialIndex ) {\n\n\t\tvar parser = this.parser;\n\t\tvar materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"MeshPhysicalMaterial\"];\n\n\t};\n\n\tGLTFMaterialsTransmissionExtension.prototype.extendMaterialParams = function ( materialIndex, materialParams ) {\n\n\t\tvar parser = this.parser;\n\t\tvar materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tvar pending = [];\n\n\t\tvar extension = materialDef.extensions[ this.name ];\n\n\t\tif ( extension.transmissionFactor !== undefined ) {\n\n\t\t\tmaterialParams.transmission = extension.transmissionFactor;\n\n\t\t}\n\n\t\tif ( extension.transmissionTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'transmissionMap', extension.transmissionTexture ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t};\n\n\t/**\n\t * BasisU Texture Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_texture_basisu\n\t */\n\tfunction GLTFTextureBasisUExtension( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_TEXTURE_BASISU;\n\n\t}\n\n\tGLTFTextureBasisUExtension.prototype.loadTexture = function ( textureIndex ) {\n\n\t\tvar parser = this.parser;\n\t\tvar json = parser.json;\n\n\t\tvar textureDef = json.textures[ textureIndex ];\n\n\t\tif ( ! textureDef.extensions || ! textureDef.extensions[ this.name ] ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tvar extension = textureDef.extensions[ this.name ];\n\t\tvar source = json.images[ extension.source ];\n\t\tvar loader = parser.options.ktx2Loader;\n\n\t\tif ( ! loader ) {\n\n\t\t\tif ( json.extensionsRequired && json.extensionsRequired.indexOf( this.name ) >= 0 ) {\n\n\t\t\t\tthrow new Error( 'THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures' );\n\n\t\t\t} else {\n\n\t\t\t\t// Assumes that the extension is optional and that a fallback texture is present\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn parser.loadTextureImage( textureIndex, source, loader );\n\n\t};\n\n\t/**\n\t * WebP Texture Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/EXT_texture_webp\n\t */\n\tfunction GLTFTextureWebPExtension( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.EXT_TEXTURE_WEBP;\n\t\tthis.isSupported = null;\n\n\t}\n\n\tGLTFTextureWebPExtension.prototype.loadTexture = function ( textureIndex ) {\n\n\t\tvar name = this.name;\n\t\tvar parser = this.parser;\n\t\tvar json = parser.json;\n\n\t\tvar textureDef = json.textures[ textureIndex ];\n\n\t\tif ( ! textureDef.extensions || ! textureDef.extensions[ name ] ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tvar extension = textureDef.extensions[ name ];\n\t\tvar source = json.images[ extension.source ];\n\n\t\tvar loader = parser.textureLoader;\n\t\tif ( source.uri ) {\n\n\t\t\tvar handler = parser.options.manager.getHandler( source.uri );\n\t\t\tif ( handler !== null ) loader = handler;\n\n\t\t}\n\n\t\treturn this.detectSupport().then( function ( isSupported ) {\n\n\t\t\tif ( isSupported ) return parser.loadTextureImage( textureIndex, source, loader );\n\n\t\t\tif ( json.extensionsRequired && json.extensionsRequired.indexOf( name ) >= 0 ) {\n\n\t\t\t\tthrow new Error( 'THREE.GLTFLoader: WebP required by asset but unsupported.' );\n\n\t\t\t}\n\n\t\t\t// Fall back to PNG or JPEG.\n\t\t\treturn parser.loadTexture( textureIndex );\n\n\t\t} );\n\n\t};\n\n\tGLTFTextureWebPExtension.prototype.detectSupport = function () {\n\n\t\tif ( ! this.isSupported ) {\n\n\t\t\tthis.isSupported = new Promise( function ( resolve ) {\n\n\t\t\t\tvar image = new Image();\n\n\t\t\t\t// Lossy test image. Support for lossy images doesn't guarantee support for all\n\t\t\t\t// WebP images, unfortunately.\n\t\t\t\timage.src = 'data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA';\n\n\t\t\t\timage.onload = image.onerror = function () {\n\n\t\t\t\t\tresolve( image.height === 1 );\n\n\t\t\t\t};\n\n\t\t\t} );\n\n\t\t}\n\n\t\treturn this.isSupported;\n\n\t};\n\n\t/**\n\t* meshopt BufferView Compression Extension\n\t*\n\t* Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/EXT_meshopt_compression\n\t*/\n\tfunction GLTFMeshoptCompression( parser ) {\n\n\t\tthis.name = EXTENSIONS.EXT_MESHOPT_COMPRESSION;\n\t\tthis.parser = parser;\n\n\t}\n\n\tGLTFMeshoptCompression.prototype.loadBufferView = function ( index ) {\n\n\t\tvar json = this.parser.json;\n\t\tvar bufferView = json.bufferViews[ index ];\n\n\t\tif ( bufferView.extensions && bufferView.extensions[ this.name ] ) {\n\n\t\t\tvar extensionDef = bufferView.extensions[ this.name ];\n\n\t\t\tvar buffer = this.parser.getDependency( 'buffer', extensionDef.buffer );\n\t\t\tvar decoder = this.parser.options.meshoptDecoder;\n\n\t\t\tif ( ! decoder || ! decoder.supported ) {\n\n\t\t\t\tif ( json.extensionsRequired && json.extensionsRequired.indexOf( this.name ) >= 0 ) {\n\n\t\t\t\t\tthrow new Error( 'THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files' );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// Assumes that the extension is optional and that fallback buffer data is present\n\t\t\t\t\treturn null;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn Promise.all( [ buffer, decoder.ready ] ).then( function ( res ) {\n\n\t\t\t\tvar byteOffset = extensionDef.byteOffset || 0;\n\t\t\t\tvar byteLength = extensionDef.byteLength || 0;\n\n\t\t\t\tvar count = extensionDef.count;\n\t\t\t\tvar stride = extensionDef.byteStride;\n\n\t\t\t\tvar result = new ArrayBuffer( count * stride );\n\t\t\t\tvar source = new Uint8Array( res[ 0 ], byteOffset, byteLength );\n\n\t\t\t\tdecoder.decodeGltfBuffer( new Uint8Array( result ), count, stride, source, extensionDef.mode, extensionDef.filter );\n\t\t\t\treturn result;\n\n\t\t\t} );\n\n\t\t} else {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t};\n\n\t/* BINARY EXTENSION */\n\tvar BINARY_EXTENSION_HEADER_MAGIC = 'glTF';\n\tvar BINARY_EXTENSION_HEADER_LENGTH = 12;\n\tvar BINARY_EXTENSION_CHUNK_TYPES = { JSON: 0x4E4F534A, BIN: 0x004E4942 };\n\n\tfunction GLTFBinaryExtension( data ) {\n\n\t\tthis.name = EXTENSIONS.KHR_BINARY_GLTF;\n\t\tthis.content = null;\n\t\tthis.body = null;\n\n\t\tvar headerView = new DataView( data, 0, BINARY_EXTENSION_HEADER_LENGTH );\n\n\t\tthis.header = {\n\t\t\tmagic: _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"LoaderUtils\"].decodeText( new Uint8Array( data.slice( 0, 4 ) ) ),\n\t\t\tversion: headerView.getUint32( 4, true ),\n\t\t\tlength: headerView.getUint32( 8, true )\n\t\t};\n\n\t\tif ( this.header.magic !== BINARY_EXTENSION_HEADER_MAGIC ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Unsupported glTF-Binary header.' );\n\n\t\t} else if ( this.header.version < 2.0 ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Legacy binary file detected.' );\n\n\t\t}\n\n\t\tvar chunkContentsLength = this.header.length - BINARY_EXTENSION_HEADER_LENGTH;\n\t\tvar chunkView = new DataView( data, BINARY_EXTENSION_HEADER_LENGTH );\n\t\tvar chunkIndex = 0;\n\n\t\twhile ( chunkIndex < chunkContentsLength ) {\n\n\t\t\tvar chunkLength = chunkView.getUint32( chunkIndex, true );\n\t\t\tchunkIndex += 4;\n\n\t\t\tvar chunkType = chunkView.getUint32( chunkIndex, true );\n\t\t\tchunkIndex += 4;\n\n\t\t\tif ( chunkType === BINARY_EXTENSION_CHUNK_TYPES.JSON ) {\n\n\t\t\t\tvar contentArray = new Uint8Array( data, BINARY_EXTENSION_HEADER_LENGTH + chunkIndex, chunkLength );\n\t\t\t\tthis.content = _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"LoaderUtils\"].decodeText( contentArray );\n\n\t\t\t} else if ( chunkType === BINARY_EXTENSION_CHUNK_TYPES.BIN ) {\n\n\t\t\t\tvar byteOffset = BINARY_EXTENSION_HEADER_LENGTH + chunkIndex;\n\t\t\t\tthis.body = data.slice( byteOffset, byteOffset + chunkLength );\n\n\t\t\t}\n\n\t\t\t// Clients must ignore chunks with unknown types.\n\n\t\t\tchunkIndex += chunkLength;\n\n\t\t}\n\n\t\tif ( this.content === null ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: JSON content not found.' );\n\n\t\t}\n\n\t}\n\n\t/**\n\t * DRACO Mesh Compression Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_draco_mesh_compression\n\t */\n\tfunction GLTFDracoMeshCompressionExtension( json, dracoLoader ) {\n\n\t\tif ( ! dracoLoader ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: No DRACOLoader instance provided.' );\n\n\t\t}\n\n\t\tthis.name = EXTENSIONS.KHR_DRACO_MESH_COMPRESSION;\n\t\tthis.json = json;\n\t\tthis.dracoLoader = dracoLoader;\n\t\tthis.dracoLoader.preload();\n\n\t}\n\n\tGLTFDracoMeshCompressionExtension.prototype.decodePrimitive = function ( primitive, parser ) {\n\n\t\tvar json = this.json;\n\t\tvar dracoLoader = this.dracoLoader;\n\t\tvar bufferViewIndex = primitive.extensions[ this.name ].bufferView;\n\t\tvar gltfAttributeMap = primitive.extensions[ this.name ].attributes;\n\t\tvar threeAttributeMap = {};\n\t\tvar attributeNormalizedMap = {};\n\t\tvar attributeTypeMap = {};\n\n\t\tfor ( var attributeName in gltfAttributeMap ) {\n\n\t\t\tvar threeAttributeName = ATTRIBUTES[ attributeName ] || attributeName.toLowerCase();\n\n\t\t\tthreeAttributeMap[ threeAttributeName ] = gltfAttributeMap[ attributeName ];\n\n\t\t}\n\n\t\tfor ( attributeName in primitive.attributes ) {\n\n\t\t\tvar threeAttributeName = ATTRIBUTES[ attributeName ] || attributeName.toLowerCase();\n\n\t\t\tif ( gltfAttributeMap[ attributeName ] !== undefined ) {\n\n\t\t\t\tvar accessorDef = json.accessors[ primitive.attributes[ attributeName ] ];\n\t\t\t\tvar componentType = WEBGL_COMPONENT_TYPES[ accessorDef.componentType ];\n\n\t\t\t\tattributeTypeMap[ threeAttributeName ] = componentType;\n\t\t\t\tattributeNormalizedMap[ threeAttributeName ] = accessorDef.normalized === true;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn parser.getDependency( 'bufferView', bufferViewIndex ).then( function ( bufferView ) {\n\n\t\t\treturn new Promise( function ( resolve ) {\n\n\t\t\t\tdracoLoader.decodeDracoFile( bufferView, function ( geometry ) {\n\n\t\t\t\t\tfor ( var attributeName in geometry.attributes ) {\n\n\t\t\t\t\t\tvar attribute = geometry.attributes[ attributeName ];\n\t\t\t\t\t\tvar normalized = attributeNormalizedMap[ attributeName ];\n\n\t\t\t\t\t\tif ( normalized !== undefined ) attribute.normalized = normalized;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tresolve( geometry );\n\n\t\t\t\t}, threeAttributeMap, attributeTypeMap );\n\n\t\t\t} );\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Texture Transform Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_texture_transform\n\t */\n\tfunction GLTFTextureTransformExtension() {\n\n\t\tthis.name = EXTENSIONS.KHR_TEXTURE_TRANSFORM;\n\n\t}\n\n\tGLTFTextureTransformExtension.prototype.extendTexture = function ( texture, transform ) {\n\n\t\ttexture = texture.clone();\n\n\t\tif ( transform.offset !== undefined ) {\n\n\t\t\ttexture.offset.fromArray( transform.offset );\n\n\t\t}\n\n\t\tif ( transform.rotation !== undefined ) {\n\n\t\t\ttexture.rotation = transform.rotation;\n\n\t\t}\n\n\t\tif ( transform.scale !== undefined ) {\n\n\t\t\ttexture.repeat.fromArray( transform.scale );\n\n\t\t}\n\n\t\tif ( transform.texCoord !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Custom UV sets in \"' + this.name + '\" extension not yet supported.' );\n\n\t\t}\n\n\t\ttexture.needsUpdate = true;\n\n\t\treturn texture;\n\n\t};\n\n\t/**\n\t * Specular-Glossiness Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_pbrSpecularGlossiness\n\t */\n\n\t/**\n\t * A sub class of StandardMaterial with some of the functionality\n\t * changed via the `onBeforeCompile` callback\n\t * @pailhead\n\t */\n\n\tfunction GLTFMeshStandardSGMaterial( params ) {\n\n\t\t_build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"MeshStandardMaterial\"].call( this );\n\n\t\tthis.isGLTFSpecularGlossinessMaterial = true;\n\n\t\t//various chunks that need replacing\n\t\tvar specularMapParsFragmentChunk = [\n\t\t\t'#ifdef USE_SPECULARMAP',\n\t\t\t'\tuniform sampler2D specularMap;',\n\t\t\t'#endif'\n\t\t].join( '\\n' );\n\n\t\tvar glossinessMapParsFragmentChunk = [\n\t\t\t'#ifdef USE_GLOSSINESSMAP',\n\t\t\t'\tuniform sampler2D glossinessMap;',\n\t\t\t'#endif'\n\t\t].join( '\\n' );\n\n\t\tvar specularMapFragmentChunk = [\n\t\t\t'vec3 specularFactor = specular;',\n\t\t\t'#ifdef USE_SPECULARMAP',\n\t\t\t'\tvec4 texelSpecular = texture2D( specularMap, vUv );',\n\t\t\t'\ttexelSpecular = sRGBToLinear( texelSpecular );',\n\t\t\t'\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture',\n\t\t\t'\tspecularFactor *= texelSpecular.rgb;',\n\t\t\t'#endif'\n\t\t].join( '\\n' );\n\n\t\tvar glossinessMapFragmentChunk = [\n\t\t\t'float glossinessFactor = glossiness;',\n\t\t\t'#ifdef USE_GLOSSINESSMAP',\n\t\t\t'\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );',\n\t\t\t'\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture',\n\t\t\t'\tglossinessFactor *= texelGlossiness.a;',\n\t\t\t'#endif'\n\t\t].join( '\\n' );\n\n\t\tvar lightPhysicalFragmentChunk = [\n\t\t\t'PhysicalMaterial material;',\n\t\t\t'material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );',\n\t\t\t'vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );',\n\t\t\t'float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );',\n\t\t\t'material.specularRoughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.',\n\t\t\t'material.specularRoughness += geometryRoughness;',\n\t\t\t'material.specularRoughness = min( material.specularRoughness, 1.0 );',\n\t\t\t'material.specularColor = specularFactor;',\n\t\t].join( '\\n' );\n\n\t\tvar uniforms = {\n\t\t\tspecular: { value: new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Color\"]().setHex( 0xffffff ) },\n\t\t\tglossiness: { value: 1 },\n\t\t\tspecularMap: { value: null },\n\t\t\tglossinessMap: { value: null }\n\t\t};\n\n\t\tthis._extraUniforms = uniforms;\n\n\t\tthis.onBeforeCompile = function ( shader ) {\n\n\t\t\tfor ( var uniformName in uniforms ) {\n\n\t\t\t\tshader.uniforms[ uniformName ] = uniforms[ uniformName ];\n\n\t\t\t}\n\n\t\t\tshader.fragmentShader = shader.fragmentShader\n\t\t\t\t.replace( 'uniform float roughness;', 'uniform vec3 specular;' )\n\t\t\t\t.replace( 'uniform float metalness;', 'uniform float glossiness;' )\n\t\t\t\t.replace( '#include <roughnessmap_pars_fragment>', specularMapParsFragmentChunk )\n\t\t\t\t.replace( '#include <metalnessmap_pars_fragment>', glossinessMapParsFragmentChunk )\n\t\t\t\t.replace( '#include <roughnessmap_fragment>', specularMapFragmentChunk )\n\t\t\t\t.replace( '#include <metalnessmap_fragment>', glossinessMapFragmentChunk )\n\t\t\t\t.replace( '#include <lights_physical_fragment>', lightPhysicalFragmentChunk );\n\n\t\t};\n\n\t\tObject.defineProperties( this, {\n\n\t\t\tspecular: {\n\t\t\t\tget: function () {\n\n\t\t\t\t\treturn uniforms.specular.value;\n\n\t\t\t\t},\n\t\t\t\tset: function ( v ) {\n\n\t\t\t\t\tuniforms.specular.value = v;\n\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tspecularMap: {\n\t\t\t\tget: function () {\n\n\t\t\t\t\treturn uniforms.specularMap.value;\n\n\t\t\t\t},\n\t\t\t\tset: function ( v ) {\n\n\t\t\t\t\tuniforms.specularMap.value = v;\n\n\t\t\t\t\tif ( v ) {\n\n\t\t\t\t\t\tthis.defines.USE_SPECULARMAP = ''; // USE_UV is set by the renderer for specular maps\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tdelete this.defines.USE_SPECULARMAP;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tglossiness: {\n\t\t\t\tget: function () {\n\n\t\t\t\t\treturn uniforms.glossiness.value;\n\n\t\t\t\t},\n\t\t\t\tset: function ( v ) {\n\n\t\t\t\t\tuniforms.glossiness.value = v;\n\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tglossinessMap: {\n\t\t\t\tget: function () {\n\n\t\t\t\t\treturn uniforms.glossinessMap.value;\n\n\t\t\t\t},\n\t\t\t\tset: function ( v ) {\n\n\t\t\t\t\tuniforms.glossinessMap.value = v;\n\n\t\t\t\t\tif ( v ) {\n\n\t\t\t\t\t\tthis.defines.USE_GLOSSINESSMAP = '';\n\t\t\t\t\t\tthis.defines.USE_UV = '';\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tdelete this.defines.USE_GLOSSINESSMAP;\n\t\t\t\t\t\tdelete this.defines.USE_UV;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t} );\n\n\t\tdelete this.metalness;\n\t\tdelete this.roughness;\n\t\tdelete this.metalnessMap;\n\t\tdelete this.roughnessMap;\n\n\t\tthis.setValues( params );\n\n\t}\n\n\tGLTFMeshStandardSGMaterial.prototype = Object.create( _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"MeshStandardMaterial\"].prototype );\n\tGLTFMeshStandardSGMaterial.prototype.constructor = GLTFMeshStandardSGMaterial;\n\n\tGLTFMeshStandardSGMaterial.prototype.copy = function ( source ) {\n\n\t\t_build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"MeshStandardMaterial\"].prototype.copy.call( this, source );\n\t\tthis.specularMap = source.specularMap;\n\t\tthis.specular.copy( source.specular );\n\t\tthis.glossinessMap = source.glossinessMap;\n\t\tthis.glossiness = source.glossiness;\n\t\tdelete this.metalness;\n\t\tdelete this.roughness;\n\t\tdelete this.metalnessMap;\n\t\tdelete this.roughnessMap;\n\t\treturn this;\n\n\t};\n\n\tfunction GLTFMaterialsPbrSpecularGlossinessExtension() {\n\n\t\treturn {\n\n\t\t\tname: EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,\n\n\t\t\tspecularGlossinessParams: [\n\t\t\t\t'color',\n\t\t\t\t'map',\n\t\t\t\t'lightMap',\n\t\t\t\t'lightMapIntensity',\n\t\t\t\t'aoMap',\n\t\t\t\t'aoMapIntensity',\n\t\t\t\t'emissive',\n\t\t\t\t'emissiveIntensity',\n\t\t\t\t'emissiveMap',\n\t\t\t\t'bumpMap',\n\t\t\t\t'bumpScale',\n\t\t\t\t'normalMap',\n\t\t\t\t'normalMapType',\n\t\t\t\t'displacementMap',\n\t\t\t\t'displacementScale',\n\t\t\t\t'displacementBias',\n\t\t\t\t'specularMap',\n\t\t\t\t'specular',\n\t\t\t\t'glossinessMap',\n\t\t\t\t'glossiness',\n\t\t\t\t'alphaMap',\n\t\t\t\t'envMap',\n\t\t\t\t'envMapIntensity',\n\t\t\t\t'refractionRatio',\n\t\t\t],\n\n\t\t\tgetMaterialType: function () {\n\n\t\t\t\treturn GLTFMeshStandardSGMaterial;\n\n\t\t\t},\n\n\t\t\textendParams: function ( materialParams, materialDef, parser ) {\n\n\t\t\t\tvar pbrSpecularGlossiness = materialDef.extensions[ this.name ];\n\n\t\t\t\tmaterialParams.color = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Color\"]( 1.0, 1.0, 1.0 );\n\t\t\t\tmaterialParams.opacity = 1.0;\n\n\t\t\t\tvar pending = [];\n\n\t\t\t\tif ( Array.isArray( pbrSpecularGlossiness.diffuseFactor ) ) {\n\n\t\t\t\t\tvar array = pbrSpecularGlossiness.diffuseFactor;\n\n\t\t\t\t\tmaterialParams.color.fromArray( array );\n\t\t\t\t\tmaterialParams.opacity = array[ 3 ];\n\n\t\t\t\t}\n\n\t\t\t\tif ( pbrSpecularGlossiness.diffuseTexture !== undefined ) {\n\n\t\t\t\t\tpending.push( parser.assignTexture( materialParams, 'map', pbrSpecularGlossiness.diffuseTexture ) );\n\n\t\t\t\t}\n\n\t\t\t\tmaterialParams.emissive = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Color\"]( 0.0, 0.0, 0.0 );\n\t\t\t\tmaterialParams.glossiness = pbrSpecularGlossiness.glossinessFactor !== undefined ? pbrSpecularGlossiness.glossinessFactor : 1.0;\n\t\t\t\tmaterialParams.specular = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Color\"]( 1.0, 1.0, 1.0 );\n\n\t\t\t\tif ( Array.isArray( pbrSpecularGlossiness.specularFactor ) ) {\n\n\t\t\t\t\tmaterialParams.specular.fromArray( pbrSpecularGlossiness.specularFactor );\n\n\t\t\t\t}\n\n\t\t\t\tif ( pbrSpecularGlossiness.specularGlossinessTexture !== undefined ) {\n\n\t\t\t\t\tvar specGlossMapDef = pbrSpecularGlossiness.specularGlossinessTexture;\n\t\t\t\t\tpending.push( parser.assignTexture( materialParams, 'glossinessMap', specGlossMapDef ) );\n\t\t\t\t\tpending.push( parser.assignTexture( materialParams, 'specularMap', specGlossMapDef ) );\n\n\t\t\t\t}\n\n\t\t\t\treturn Promise.all( pending );\n\n\t\t\t},\n\n\t\t\tcreateMaterial: function ( materialParams ) {\n\n\t\t\t\tvar material = new GLTFMeshStandardSGMaterial( materialParams );\n\t\t\t\tmaterial.fog = true;\n\n\t\t\t\tmaterial.color = materialParams.color;\n\n\t\t\t\tmaterial.map = materialParams.map === undefined ? null : materialParams.map;\n\n\t\t\t\tmaterial.lightMap = null;\n\t\t\t\tmaterial.lightMapIntensity = 1.0;\n\n\t\t\t\tmaterial.aoMap = materialParams.aoMap === undefined ? null : materialParams.aoMap;\n\t\t\t\tmaterial.aoMapIntensity = 1.0;\n\n\t\t\t\tmaterial.emissive = materialParams.emissive;\n\t\t\t\tmaterial.emissiveIntensity = 1.0;\n\t\t\t\tmaterial.emissiveMap = materialParams.emissiveMap === undefined ? null : materialParams.emissiveMap;\n\n\t\t\t\tmaterial.bumpMap = materialParams.bumpMap === undefined ? null : materialParams.bumpMap;\n\t\t\t\tmaterial.bumpScale = 1;\n\n\t\t\t\tmaterial.normalMap = materialParams.normalMap === undefined ? null : materialParams.normalMap;\n\t\t\t\tmaterial.normalMapType = _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"TangentSpaceNormalMap\"];\n\n\t\t\t\tif ( materialParams.normalScale ) material.normalScale = materialParams.normalScale;\n\n\t\t\t\tmaterial.displacementMap = null;\n\t\t\t\tmaterial.displacementScale = 1;\n\t\t\t\tmaterial.displacementBias = 0;\n\n\t\t\t\tmaterial.specularMap = materialParams.specularMap === undefined ? null : materialParams.specularMap;\n\t\t\t\tmaterial.specular = materialParams.specular;\n\n\t\t\t\tmaterial.glossinessMap = materialParams.glossinessMap === undefined ? null : materialParams.glossinessMap;\n\t\t\t\tmaterial.glossiness = materialParams.glossiness;\n\n\t\t\t\tmaterial.alphaMap = null;\n\n\t\t\t\tmaterial.envMap = materialParams.envMap === undefined ? null : materialParams.envMap;\n\t\t\t\tmaterial.envMapIntensity = 1.0;\n\n\t\t\t\tmaterial.refractionRatio = 0.98;\n\n\t\t\t\treturn material;\n\n\t\t\t},\n\n\t\t};\n\n\t}\n\n\t/**\n\t * Mesh Quantization Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_mesh_quantization\n\t */\n\tfunction GLTFMeshQuantizationExtension() {\n\n\t\tthis.name = EXTENSIONS.KHR_MESH_QUANTIZATION;\n\n\t}\n\n\t/*********************************/\n\t/********** INTERPOLATION ********/\n\t/*********************************/\n\n\t// Spline Interpolation\n\t// Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#appendix-c-spline-interpolation\n\tfunction GLTFCubicSplineInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\t\t_build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Interpolant\"].call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n\t}\n\n\tGLTFCubicSplineInterpolant.prototype = Object.create( _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Interpolant\"].prototype );\n\tGLTFCubicSplineInterpolant.prototype.constructor = GLTFCubicSplineInterpolant;\n\n\tGLTFCubicSplineInterpolant.prototype.copySampleValue_ = function ( index ) {\n\n\t\t// Copies a sample value to the result buffer. See description of glTF\n\t\t// CUBICSPLINE values layout in interpolate_() function below.\n\n\t\tvar result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tvalueSize = this.valueSize,\n\t\t\toffset = index * valueSize * 3 + valueSize;\n\n\t\tfor ( var i = 0; i !== valueSize; i ++ ) {\n\n\t\t\tresult[ i ] = values[ offset + i ];\n\n\t\t}\n\n\t\treturn result;\n\n\t};\n\n\tGLTFCubicSplineInterpolant.prototype.beforeStart_ = GLTFCubicSplineInterpolant.prototype.copySampleValue_;\n\n\tGLTFCubicSplineInterpolant.prototype.afterEnd_ = GLTFCubicSplineInterpolant.prototype.copySampleValue_;\n\n\tGLTFCubicSplineInterpolant.prototype.interpolate_ = function ( i1, t0, t, t1 ) {\n\n\t\tvar result = this.resultBuffer;\n\t\tvar values = this.sampleValues;\n\t\tvar stride = this.valueSize;\n\n\t\tvar stride2 = stride * 2;\n\t\tvar stride3 = stride * 3;\n\n\t\tvar td = t1 - t0;\n\n\t\tvar p = ( t - t0 ) / td;\n\t\tvar pp = p * p;\n\t\tvar ppp = pp * p;\n\n\t\tvar offset1 = i1 * stride3;\n\t\tvar offset0 = offset1 - stride3;\n\n\t\tvar s2 = - 2 * ppp + 3 * pp;\n\t\tvar s3 = ppp - pp;\n\t\tvar s0 = 1 - s2;\n\t\tvar s1 = s3 - pp + p;\n\n\t\t// Layout of keyframe output values for CUBICSPLINE animations:\n\t\t//   [ inTangent_1, splineVertex_1, outTangent_1, inTangent_2, splineVertex_2, ... ]\n\t\tfor ( var i = 0; i !== stride; i ++ ) {\n\n\t\t\tvar p0 = values[ offset0 + i + stride ]; // splineVertex_k\n\t\t\tvar m0 = values[ offset0 + i + stride2 ] * td; // outTangent_k * (t_k+1 - t_k)\n\t\t\tvar p1 = values[ offset1 + i + stride ]; // splineVertex_k+1\n\t\t\tvar m1 = values[ offset1 + i ] * td; // inTangent_k+1 * (t_k+1 - t_k)\n\n\t\t\tresult[ i ] = s0 * p0 + s1 * m0 + s2 * p1 + s3 * m1;\n\n\t\t}\n\n\t\treturn result;\n\n\t};\n\n\t/*********************************/\n\t/********** INTERNALS ************/\n\t/*********************************/\n\n\t/* CONSTANTS */\n\n\tvar WEBGL_CONSTANTS = {\n\t\tFLOAT: 5126,\n\t\t//FLOAT_MAT2: 35674,\n\t\tFLOAT_MAT3: 35675,\n\t\tFLOAT_MAT4: 35676,\n\t\tFLOAT_VEC2: 35664,\n\t\tFLOAT_VEC3: 35665,\n\t\tFLOAT_VEC4: 35666,\n\t\tLINEAR: 9729,\n\t\tREPEAT: 10497,\n\t\tSAMPLER_2D: 35678,\n\t\tPOINTS: 0,\n\t\tLINES: 1,\n\t\tLINE_LOOP: 2,\n\t\tLINE_STRIP: 3,\n\t\tTRIANGLES: 4,\n\t\tTRIANGLE_STRIP: 5,\n\t\tTRIANGLE_FAN: 6,\n\t\tUNSIGNED_BYTE: 5121,\n\t\tUNSIGNED_SHORT: 5123\n\t};\n\n\tvar WEBGL_COMPONENT_TYPES = {\n\t\t5120: Int8Array,\n\t\t5121: Uint8Array,\n\t\t5122: Int16Array,\n\t\t5123: Uint16Array,\n\t\t5125: Uint32Array,\n\t\t5126: Float32Array\n\t};\n\n\tvar WEBGL_FILTERS = {\n\t\t9728: _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"NearestFilter\"],\n\t\t9729: _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"LinearFilter\"],\n\t\t9984: _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"NearestMipmapNearestFilter\"],\n\t\t9985: _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"LinearMipmapNearestFilter\"],\n\t\t9986: _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"NearestMipmapLinearFilter\"],\n\t\t9987: _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"LinearMipmapLinearFilter\"]\n\t};\n\n\tvar WEBGL_WRAPPINGS = {\n\t\t33071: _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"ClampToEdgeWrapping\"],\n\t\t33648: _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"MirroredRepeatWrapping\"],\n\t\t10497: _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"RepeatWrapping\"]\n\t};\n\n\tvar WEBGL_TYPE_SIZES = {\n\t\t'SCALAR': 1,\n\t\t'VEC2': 2,\n\t\t'VEC3': 3,\n\t\t'VEC4': 4,\n\t\t'MAT2': 4,\n\t\t'MAT3': 9,\n\t\t'MAT4': 16\n\t};\n\n\tvar ATTRIBUTES = {\n\t\tPOSITION: 'position',\n\t\tNORMAL: 'normal',\n\t\tTANGENT: 'tangent',\n\t\tTEXCOORD_0: 'uv',\n\t\tTEXCOORD_1: 'uv2',\n\t\tCOLOR_0: 'color',\n\t\tWEIGHTS_0: 'skinWeight',\n\t\tJOINTS_0: 'skinIndex',\n\t};\n\n\tvar PATH_PROPERTIES = {\n\t\tscale: 'scale',\n\t\ttranslation: 'position',\n\t\trotation: 'quaternion',\n\t\tweights: 'morphTargetInfluences'\n\t};\n\n\tvar INTERPOLATION = {\n\t\tCUBICSPLINE: undefined, // We use a custom interpolant (GLTFCubicSplineInterpolation) for CUBICSPLINE tracks. Each\n\t\t                        // keyframe track will be initialized with a default interpolation type, then modified.\n\t\tLINEAR: _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"InterpolateLinear\"],\n\t\tSTEP: _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"InterpolateDiscrete\"]\n\t};\n\n\tvar ALPHA_MODES = {\n\t\tOPAQUE: 'OPAQUE',\n\t\tMASK: 'MASK',\n\t\tBLEND: 'BLEND'\n\t};\n\n\t/* UTILITY FUNCTIONS */\n\n\tfunction resolveURL( url, path ) {\n\n\t\t// Invalid URL\n\t\tif ( typeof url !== 'string' || url === '' ) return '';\n\n\t\t// Host Relative URL\n\t\tif ( /^https?:\\/\\//i.test( path ) && /^\\//.test( url ) ) {\n\n\t\t\tpath = path.replace( /(^https?:\\/\\/[^\\/]+).*/i, '$1' );\n\n\t\t}\n\n\t\t// Absolute URL http://,https://,//\n\t\tif ( /^(https?:)?\\/\\//i.test( url ) ) return url;\n\n\t\t// Data URI\n\t\tif ( /^data:.*,.*$/i.test( url ) ) return url;\n\n\t\t// Blob URL\n\t\tif ( /^blob:.*$/i.test( url ) ) return url;\n\n\t\t// Relative URL\n\t\treturn path + url;\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#default-material\n\t */\n\tfunction createDefaultMaterial( cache ) {\n\n\t\tif ( cache[ 'DefaultMaterial' ] === undefined ) {\n\n\t\t\tcache[ 'DefaultMaterial' ] = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"MeshStandardMaterial\"]( {\n\t\t\t\tcolor: 0xFFFFFF,\n\t\t\t\temissive: 0x000000,\n\t\t\t\tmetalness: 1,\n\t\t\t\troughness: 1,\n\t\t\t\ttransparent: false,\n\t\t\t\tdepthTest: true,\n\t\t\t\tside: _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"FrontSide\"]\n\t\t\t} );\n\n\t\t}\n\n\t\treturn cache[ 'DefaultMaterial' ];\n\n\t}\n\n\tfunction addUnknownExtensionsToUserData( knownExtensions, object, objectDef ) {\n\n\t\t// Add unknown glTF extensions to an object's userData.\n\n\t\tfor ( var name in objectDef.extensions ) {\n\n\t\t\tif ( knownExtensions[ name ] === undefined ) {\n\n\t\t\t\tobject.userData.gltfExtensions = object.userData.gltfExtensions || {};\n\t\t\t\tobject.userData.gltfExtensions[ name ] = objectDef.extensions[ name ];\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * @param {Object3D|Material|BufferGeometry} object\n\t * @param {GLTF.definition} gltfDef\n\t */\n\tfunction assignExtrasToUserData( object, gltfDef ) {\n\n\t\tif ( gltfDef.extras !== undefined ) {\n\n\t\t\tif ( typeof gltfDef.extras === 'object' ) {\n\n\t\t\t\tObject.assign( object.userData, gltfDef.extras );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Ignoring primitive type .extras, ' + gltfDef.extras );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#morph-targets\n\t *\n\t * @param {BufferGeometry} geometry\n\t * @param {Array<GLTF.Target>} targets\n\t * @param {GLTFParser} parser\n\t * @return {Promise<BufferGeometry>}\n\t */\n\tfunction addMorphTargets( geometry, targets, parser ) {\n\n\t\tvar hasMorphPosition = false;\n\t\tvar hasMorphNormal = false;\n\n\t\tfor ( var i = 0, il = targets.length; i < il; i ++ ) {\n\n\t\t\tvar target = targets[ i ];\n\n\t\t\tif ( target.POSITION !== undefined ) hasMorphPosition = true;\n\t\t\tif ( target.NORMAL !== undefined ) hasMorphNormal = true;\n\n\t\t\tif ( hasMorphPosition && hasMorphNormal ) break;\n\n\t\t}\n\n\t\tif ( ! hasMorphPosition && ! hasMorphNormal ) return Promise.resolve( geometry );\n\n\t\tvar pendingPositionAccessors = [];\n\t\tvar pendingNormalAccessors = [];\n\n\t\tfor ( var i = 0, il = targets.length; i < il; i ++ ) {\n\n\t\t\tvar target = targets[ i ];\n\n\t\t\tif ( hasMorphPosition ) {\n\n\t\t\t\tvar pendingAccessor = target.POSITION !== undefined\n\t\t\t\t\t? parser.getDependency( 'accessor', target.POSITION )\n\t\t\t\t\t: geometry.attributes.position;\n\n\t\t\t\tpendingPositionAccessors.push( pendingAccessor );\n\n\t\t\t}\n\n\t\t\tif ( hasMorphNormal ) {\n\n\t\t\t\tvar pendingAccessor = target.NORMAL !== undefined\n\t\t\t\t\t? parser.getDependency( 'accessor', target.NORMAL )\n\t\t\t\t\t: geometry.attributes.normal;\n\n\t\t\t\tpendingNormalAccessors.push( pendingAccessor );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( [\n\t\t\tPromise.all( pendingPositionAccessors ),\n\t\t\tPromise.all( pendingNormalAccessors )\n\t\t] ).then( function ( accessors ) {\n\n\t\t\tvar morphPositions = accessors[ 0 ];\n\t\t\tvar morphNormals = accessors[ 1 ];\n\n\t\t\tif ( hasMorphPosition ) geometry.morphAttributes.position = morphPositions;\n\t\t\tif ( hasMorphNormal ) geometry.morphAttributes.normal = morphNormals;\n\t\t\tgeometry.morphTargetsRelative = true;\n\n\t\t\treturn geometry;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * @param {Mesh} mesh\n\t * @param {GLTF.Mesh} meshDef\n\t */\n\tfunction updateMorphTargets( mesh, meshDef ) {\n\n\t\tmesh.updateMorphTargets();\n\n\t\tif ( meshDef.weights !== undefined ) {\n\n\t\t\tfor ( var i = 0, il = meshDef.weights.length; i < il; i ++ ) {\n\n\t\t\t\tmesh.morphTargetInfluences[ i ] = meshDef.weights[ i ];\n\n\t\t\t}\n\n\t\t}\n\n\t\t// .extras has user-defined data, so check that .extras.targetNames is an array.\n\t\tif ( meshDef.extras && Array.isArray( meshDef.extras.targetNames ) ) {\n\n\t\t\tvar targetNames = meshDef.extras.targetNames;\n\n\t\t\tif ( mesh.morphTargetInfluences.length === targetNames.length ) {\n\n\t\t\t\tmesh.morphTargetDictionary = {};\n\n\t\t\t\tfor ( var i = 0, il = targetNames.length; i < il; i ++ ) {\n\n\t\t\t\t\tmesh.morphTargetDictionary[ targetNames[ i ] ] = i;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.' );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction createPrimitiveKey( primitiveDef ) {\n\n\t\tvar dracoExtension = primitiveDef.extensions && primitiveDef.extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ];\n\t\tvar geometryKey;\n\n\t\tif ( dracoExtension ) {\n\n\t\t\tgeometryKey = 'draco:' + dracoExtension.bufferView\n\t\t\t\t+ ':' + dracoExtension.indices\n\t\t\t\t+ ':' + createAttributesKey( dracoExtension.attributes );\n\n\t\t} else {\n\n\t\t\tgeometryKey = primitiveDef.indices + ':' + createAttributesKey( primitiveDef.attributes ) + ':' + primitiveDef.mode;\n\n\t\t}\n\n\t\treturn geometryKey;\n\n\t}\n\n\tfunction createAttributesKey( attributes ) {\n\n\t\tvar attributesKey = '';\n\n\t\tvar keys = Object.keys( attributes ).sort();\n\n\t\tfor ( var i = 0, il = keys.length; i < il; i ++ ) {\n\n\t\t\tattributesKey += keys[ i ] + ':' + attributes[ keys[ i ] ] + ';';\n\n\t\t}\n\n\t\treturn attributesKey;\n\n\t}\n\n\t/* GLTF PARSER */\n\n\tfunction GLTFParser( json, options ) {\n\n\t\tthis.json = json || {};\n\t\tthis.extensions = {};\n\t\tthis.plugins = {};\n\t\tthis.options = options || {};\n\n\t\t// loader object cache\n\t\tthis.cache = new GLTFRegistry();\n\n\t\t// associations between Three.js objects and glTF elements\n\t\tthis.associations = new Map();\n\n\t\t// BufferGeometry caching\n\t\tthis.primitiveCache = {};\n\n\t\t// Object3D instance caches\n\t\tthis.meshCache = { refs: {}, uses: {} };\n\t\tthis.cameraCache = { refs: {}, uses: {} };\n\t\tthis.lightCache = { refs: {}, uses: {} };\n\n\t\t// Track node names, to ensure no duplicates\n\t\tthis.nodeNamesUsed = {};\n\n\t\t// Use an ImageBitmapLoader if imageBitmaps are supported. Moves much of the\n\t\t// expensive work of uploading a texture to the GPU off the main thread.\n\t\tif ( typeof createImageBitmap !== 'undefined' && /Firefox/.test( navigator.userAgent ) === false ) {\n\n\t\t\tthis.textureLoader = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"ImageBitmapLoader\"]( this.options.manager );\n\n\t\t} else {\n\n\t\t\tthis.textureLoader = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"TextureLoader\"]( this.options.manager );\n\n\t\t}\n\n\t\tthis.textureLoader.setCrossOrigin( this.options.crossOrigin );\n\t\tthis.textureLoader.setRequestHeader( this.options.requestHeader );\n\n\t\tthis.fileLoader = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"FileLoader\"]( this.options.manager );\n\t\tthis.fileLoader.setResponseType( 'arraybuffer' );\n\n\t\tif ( this.options.crossOrigin === 'use-credentials' ) {\n\n\t\t\tthis.fileLoader.setWithCredentials( true );\n\n\t\t}\n\n\t}\n\n\tGLTFParser.prototype.setExtensions = function ( extensions ) {\n\n\t\tthis.extensions = extensions;\n\n\t};\n\n\tGLTFParser.prototype.setPlugins = function ( plugins ) {\n\n\t\tthis.plugins = plugins;\n\n\t};\n\n\tGLTFParser.prototype.parse = function ( onLoad, onError ) {\n\n\t\tvar parser = this;\n\t\tvar json = this.json;\n\t\tvar extensions = this.extensions;\n\n\t\t// Clear the loader cache\n\t\tthis.cache.removeAll();\n\n\t\t// Mark the special nodes/meshes in json for efficient parse\n\t\tthis._invokeAll( function ( ext ) {\n\n\t\t\treturn ext._markDefs && ext._markDefs();\n\n\t\t} );\n\n\t\tPromise.all( this._invokeAll( function ( ext ) {\n\n\t\t\treturn ext.beforeRoot && ext.beforeRoot();\n\n\t\t} ) ).then( function () {\n\n\t\t\treturn Promise.all( [\n\n\t\t\t\tparser.getDependencies( 'scene' ),\n\t\t\t\tparser.getDependencies( 'animation' ),\n\t\t\t\tparser.getDependencies( 'camera' ),\n\n\t\t\t] );\n\n\t\t} ).then( function ( dependencies ) {\n\n\t\t\tvar result = {\n\t\t\t\tscene: dependencies[ 0 ][ json.scene || 0 ],\n\t\t\t\tscenes: dependencies[ 0 ],\n\t\t\t\tanimations: dependencies[ 1 ],\n\t\t\t\tcameras: dependencies[ 2 ],\n\t\t\t\tasset: json.asset,\n\t\t\t\tparser: parser,\n\t\t\t\tuserData: {}\n\t\t\t};\n\n\t\t\taddUnknownExtensionsToUserData( extensions, result, json );\n\n\t\t\tassignExtrasToUserData( result, json );\n\n\t\t\tPromise.all( parser._invokeAll( function ( ext ) {\n\n\t\t\t\treturn ext.afterRoot && ext.afterRoot( result );\n\n\t\t\t} ) ).then( function () {\n\n\t\t\t\tonLoad( result );\n\n\t\t\t} );\n\n\t\t} ).catch( onError );\n\n\t};\n\n\t/**\n\t * Marks the special nodes/meshes in json for efficient parse.\n\t */\n\tGLTFParser.prototype._markDefs = function () {\n\n\t\tvar nodeDefs = this.json.nodes || [];\n\t\tvar skinDefs = this.json.skins || [];\n\t\tvar meshDefs = this.json.meshes || [];\n\n\t\t// Nothing in the node definition indicates whether it is a Bone or an\n\t\t// Object3D. Use the skins' joint references to mark bones.\n\t\tfor ( var skinIndex = 0, skinLength = skinDefs.length; skinIndex < skinLength; skinIndex ++ ) {\n\n\t\t\tvar joints = skinDefs[ skinIndex ].joints;\n\n\t\t\tfor ( var i = 0, il = joints.length; i < il; i ++ ) {\n\n\t\t\t\tnodeDefs[ joints[ i ] ].isBone = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Iterate over all nodes, marking references to shared resources,\n\t\t// as well as skeleton joints.\n\t\tfor ( var nodeIndex = 0, nodeLength = nodeDefs.length; nodeIndex < nodeLength; nodeIndex ++ ) {\n\n\t\t\tvar nodeDef = nodeDefs[ nodeIndex ];\n\n\t\t\tif ( nodeDef.mesh !== undefined ) {\n\n\t\t\t\tthis._addNodeRef( this.meshCache, nodeDef.mesh );\n\n\t\t\t\t// Nothing in the mesh definition indicates whether it is\n\t\t\t\t// a SkinnedMesh or Mesh. Use the node's mesh reference\n\t\t\t\t// to mark SkinnedMesh if node has skin.\n\t\t\t\tif ( nodeDef.skin !== undefined ) {\n\n\t\t\t\t\tmeshDefs[ nodeDef.mesh ].isSkinnedMesh = true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( nodeDef.camera !== undefined ) {\n\n\t\t\t\tthis._addNodeRef( this.cameraCache, nodeDef.camera );\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\t/**\n\t * Counts references to shared node / Object3D resources. These resources\n\t * can be reused, or \"instantiated\", at multiple nodes in the scene\n\t * hierarchy. Mesh, Camera, and Light instances are instantiated and must\n\t * be marked. Non-scenegraph resources (like Materials, Geometries, and\n\t * Textures) can be reused directly and are not marked here.\n\t *\n\t * Example: CesiumMilkTruck sample model reuses \"Wheel\" meshes.\n\t */\n\tGLTFParser.prototype._addNodeRef = function ( cache, index ) {\n\n\t\tif ( index === undefined ) return;\n\n\t\tif ( cache.refs[ index ] === undefined ) {\n\n\t\t\tcache.refs[ index ] = cache.uses[ index ] = 0;\n\n\t\t}\n\n\t\tcache.refs[ index ] ++;\n\n\t};\n\n\t/** Returns a reference to a shared resource, cloning it if necessary. */\n\tGLTFParser.prototype._getNodeRef = function ( cache, index, object ) {\n\n\t\tif ( cache.refs[ index ] <= 1 ) return object;\n\n\t\tvar ref = object.clone();\n\n\t\tref.name += '_instance_' + ( cache.uses[ index ] ++ );\n\n\t\treturn ref;\n\n\t};\n\n\tGLTFParser.prototype._invokeOne = function ( func ) {\n\n\t\tvar extensions = Object.values( this.plugins );\n\t\textensions.push( this );\n\n\t\tfor ( var i = 0; i < extensions.length; i ++ ) {\n\n\t\t\tvar result = func( extensions[ i ] );\n\n\t\t\tif ( result ) return result;\n\n\t\t}\n\n\t};\n\n\tGLTFParser.prototype._invokeAll = function ( func ) {\n\n\t\tvar extensions = Object.values( this.plugins );\n\t\textensions.unshift( this );\n\n\t\tvar pending = [];\n\n\t\tfor ( var i = 0; i < extensions.length; i ++ ) {\n\n\t\t\tvar result = func( extensions[ i ] );\n\n\t\t\tif ( result ) pending.push( result );\n\n\t\t}\n\n\t\treturn pending;\n\n\t};\n\n\t/**\n\t * Requests the specified dependency asynchronously, with caching.\n\t * @param {string} type\n\t * @param {number} index\n\t * @return {Promise<Object3D|Material|THREE.Texture|AnimationClip|ArrayBuffer|Object>}\n\t */\n\tGLTFParser.prototype.getDependency = function ( type, index ) {\n\n\t\tvar cacheKey = type + ':' + index;\n\t\tvar dependency = this.cache.get( cacheKey );\n\n\t\tif ( ! dependency ) {\n\n\t\t\tswitch ( type ) {\n\n\t\t\t\tcase 'scene':\n\t\t\t\t\tdependency = this.loadScene( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'node':\n\t\t\t\t\tdependency = this.loadNode( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'mesh':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadMesh && ext.loadMesh( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'accessor':\n\t\t\t\t\tdependency = this.loadAccessor( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'bufferView':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadBufferView && ext.loadBufferView( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'buffer':\n\t\t\t\t\tdependency = this.loadBuffer( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'material':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadMaterial && ext.loadMaterial( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'texture':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadTexture && ext.loadTexture( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'skin':\n\t\t\t\t\tdependency = this.loadSkin( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'animation':\n\t\t\t\t\tdependency = this.loadAnimation( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'camera':\n\t\t\t\t\tdependency = this.loadCamera( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new Error( 'Unknown type: ' + type );\n\n\t\t\t}\n\n\t\t\tthis.cache.add( cacheKey, dependency );\n\n\t\t}\n\n\t\treturn dependency;\n\n\t};\n\n\t/**\n\t * Requests all dependencies of the specified type asynchronously, with caching.\n\t * @param {string} type\n\t * @return {Promise<Array<Object>>}\n\t */\n\tGLTFParser.prototype.getDependencies = function ( type ) {\n\n\t\tvar dependencies = this.cache.get( type );\n\n\t\tif ( ! dependencies ) {\n\n\t\t\tvar parser = this;\n\t\t\tvar defs = this.json[ type + ( type === 'mesh' ? 'es' : 's' ) ] || [];\n\n\t\t\tdependencies = Promise.all( defs.map( function ( def, index ) {\n\n\t\t\t\treturn parser.getDependency( type, index );\n\n\t\t\t} ) );\n\n\t\t\tthis.cache.add( type, dependencies );\n\n\t\t}\n\n\t\treturn dependencies;\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\n\t * @param {number} bufferIndex\n\t * @return {Promise<ArrayBuffer>}\n\t */\n\tGLTFParser.prototype.loadBuffer = function ( bufferIndex ) {\n\n\t\tvar bufferDef = this.json.buffers[ bufferIndex ];\n\t\tvar loader = this.fileLoader;\n\n\t\tif ( bufferDef.type && bufferDef.type !== 'arraybuffer' ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: ' + bufferDef.type + ' buffer type is not supported.' );\n\n\t\t}\n\n\t\t// If present, GLB container is required to be the first buffer.\n\t\tif ( bufferDef.uri === undefined && bufferIndex === 0 ) {\n\n\t\t\treturn Promise.resolve( this.extensions[ EXTENSIONS.KHR_BINARY_GLTF ].body );\n\n\t\t}\n\n\t\tvar options = this.options;\n\n\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\tloader.load( resolveURL( bufferDef.uri, options.path ), resolve, undefined, function () {\n\n\t\t\t\treject( new Error( 'THREE.GLTFLoader: Failed to load buffer \"' + bufferDef.uri + '\".' ) );\n\n\t\t\t} );\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\n\t * @param {number} bufferViewIndex\n\t * @return {Promise<ArrayBuffer>}\n\t */\n\tGLTFParser.prototype.loadBufferView = function ( bufferViewIndex ) {\n\n\t\tvar bufferViewDef = this.json.bufferViews[ bufferViewIndex ];\n\n\t\treturn this.getDependency( 'buffer', bufferViewDef.buffer ).then( function ( buffer ) {\n\n\t\t\tvar byteLength = bufferViewDef.byteLength || 0;\n\t\t\tvar byteOffset = bufferViewDef.byteOffset || 0;\n\t\t\treturn buffer.slice( byteOffset, byteOffset + byteLength );\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#accessors\n\t * @param {number} accessorIndex\n\t * @return {Promise<BufferAttribute|InterleavedBufferAttribute>}\n\t */\n\tGLTFParser.prototype.loadAccessor = function ( accessorIndex ) {\n\n\t\tvar parser = this;\n\t\tvar json = this.json;\n\n\t\tvar accessorDef = this.json.accessors[ accessorIndex ];\n\n\t\tif ( accessorDef.bufferView === undefined && accessorDef.sparse === undefined ) {\n\n\t\t\t// Ignore empty accessors, which may be used to declare runtime\n\t\t\t// information about attributes coming from another source (e.g. Draco\n\t\t\t// compression extension).\n\t\t\treturn Promise.resolve( null );\n\n\t\t}\n\n\t\tvar pendingBufferViews = [];\n\n\t\tif ( accessorDef.bufferView !== undefined ) {\n\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.bufferView ) );\n\n\t\t} else {\n\n\t\t\tpendingBufferViews.push( null );\n\n\t\t}\n\n\t\tif ( accessorDef.sparse !== undefined ) {\n\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.sparse.indices.bufferView ) );\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.sparse.values.bufferView ) );\n\n\t\t}\n\n\t\treturn Promise.all( pendingBufferViews ).then( function ( bufferViews ) {\n\n\t\t\tvar bufferView = bufferViews[ 0 ];\n\n\t\t\tvar itemSize = WEBGL_TYPE_SIZES[ accessorDef.type ];\n\t\t\tvar TypedArray = WEBGL_COMPONENT_TYPES[ accessorDef.componentType ];\n\n\t\t\t// For VEC3: itemSize is 3, elementBytes is 4, itemBytes is 12.\n\t\t\tvar elementBytes = TypedArray.BYTES_PER_ELEMENT;\n\t\t\tvar itemBytes = elementBytes * itemSize;\n\t\t\tvar byteOffset = accessorDef.byteOffset || 0;\n\t\t\tvar byteStride = accessorDef.bufferView !== undefined ? json.bufferViews[ accessorDef.bufferView ].byteStride : undefined;\n\t\t\tvar normalized = accessorDef.normalized === true;\n\t\t\tvar array, bufferAttribute;\n\n\t\t\t// The buffer is not interleaved if the stride is the item size in bytes.\n\t\t\tif ( byteStride && byteStride !== itemBytes ) {\n\n\t\t\t\t// Each \"slice\" of the buffer, as defined by 'count' elements of 'byteStride' bytes, gets its own InterleavedBuffer\n\t\t\t\t// This makes sure that IBA.count reflects accessor.count properly\n\t\t\t\tvar ibSlice = Math.floor( byteOffset / byteStride );\n\t\t\t\tvar ibCacheKey = 'InterleavedBuffer:' + accessorDef.bufferView + ':' + accessorDef.componentType + ':' + ibSlice + ':' + accessorDef.count;\n\t\t\t\tvar ib = parser.cache.get( ibCacheKey );\n\n\t\t\t\tif ( ! ib ) {\n\n\t\t\t\t\tarray = new TypedArray( bufferView, ibSlice * byteStride, accessorDef.count * byteStride / elementBytes );\n\n\t\t\t\t\t// Integer parameters to IB/IBA are in array elements, not bytes.\n\t\t\t\t\tib = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"InterleavedBuffer\"]( array, byteStride / elementBytes );\n\n\t\t\t\t\tparser.cache.add( ibCacheKey, ib );\n\n\t\t\t\t}\n\n\t\t\t\tbufferAttribute = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"InterleavedBufferAttribute\"]( ib, itemSize, ( byteOffset % byteStride ) / elementBytes, normalized );\n\n\t\t\t} else {\n\n\t\t\t\tif ( bufferView === null ) {\n\n\t\t\t\t\tarray = new TypedArray( accessorDef.count * itemSize );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tarray = new TypedArray( bufferView, byteOffset, accessorDef.count * itemSize );\n\n\t\t\t\t}\n\n\t\t\t\tbufferAttribute = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"BufferAttribute\"]( array, itemSize, normalized );\n\n\t\t\t}\n\n\t\t\t// https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#sparse-accessors\n\t\t\tif ( accessorDef.sparse !== undefined ) {\n\n\t\t\t\tvar itemSizeIndices = WEBGL_TYPE_SIZES.SCALAR;\n\t\t\t\tvar TypedArrayIndices = WEBGL_COMPONENT_TYPES[ accessorDef.sparse.indices.componentType ];\n\n\t\t\t\tvar byteOffsetIndices = accessorDef.sparse.indices.byteOffset || 0;\n\t\t\t\tvar byteOffsetValues = accessorDef.sparse.values.byteOffset || 0;\n\n\t\t\t\tvar sparseIndices = new TypedArrayIndices( bufferViews[ 1 ], byteOffsetIndices, accessorDef.sparse.count * itemSizeIndices );\n\t\t\t\tvar sparseValues = new TypedArray( bufferViews[ 2 ], byteOffsetValues, accessorDef.sparse.count * itemSize );\n\n\t\t\t\tif ( bufferView !== null ) {\n\n\t\t\t\t\t// Avoid modifying the original ArrayBuffer, if the bufferView wasn't initialized with zeroes.\n\t\t\t\t\tbufferAttribute = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"BufferAttribute\"]( bufferAttribute.array.slice(), bufferAttribute.itemSize, bufferAttribute.normalized );\n\n\t\t\t\t}\n\n\t\t\t\tfor ( var i = 0, il = sparseIndices.length; i < il; i ++ ) {\n\n\t\t\t\t\tvar index = sparseIndices[ i ];\n\n\t\t\t\t\tbufferAttribute.setX( index, sparseValues[ i * itemSize ] );\n\t\t\t\t\tif ( itemSize >= 2 ) bufferAttribute.setY( index, sparseValues[ i * itemSize + 1 ] );\n\t\t\t\t\tif ( itemSize >= 3 ) bufferAttribute.setZ( index, sparseValues[ i * itemSize + 2 ] );\n\t\t\t\t\tif ( itemSize >= 4 ) bufferAttribute.setW( index, sparseValues[ i * itemSize + 3 ] );\n\t\t\t\t\tif ( itemSize >= 5 ) throw new Error( 'THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn bufferAttribute;\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#textures\n\t * @param {number} textureIndex\n\t * @return {Promise<THREE.Texture>}\n\t */\n\tGLTFParser.prototype.loadTexture = function ( textureIndex ) {\n\n\t\tvar json = this.json;\n\t\tvar options = this.options;\n\t\tvar textureDef = json.textures[ textureIndex ];\n\t\tvar source = json.images[ textureDef.source ];\n\n\t\tvar loader = this.textureLoader;\n\n\t\tif ( source.uri ) {\n\n\t\t\tvar handler = options.manager.getHandler( source.uri );\n\t\t\tif ( handler !== null ) loader = handler;\n\n\t\t}\n\n\t\treturn this.loadTextureImage( textureIndex, source, loader );\n\n\t};\n\n\tGLTFParser.prototype.loadTextureImage = function ( textureIndex, source, loader ) {\n\n\t\tvar parser = this;\n\t\tvar json = this.json;\n\t\tvar options = this.options;\n\n\t\tvar textureDef = json.textures[ textureIndex ];\n\n\t\tvar URL = self.URL || self.webkitURL;\n\n\t\tvar sourceURI = source.uri;\n\t\tvar isObjectURL = false;\n\t\tvar hasAlpha = true;\n\n\t\tif ( source.mimeType === 'image/jpeg' ) hasAlpha = false;\n\n\t\tif ( source.bufferView !== undefined ) {\n\n\t\t\t// Load binary image data from bufferView, if provided.\n\n\t\t\tsourceURI = parser.getDependency( 'bufferView', source.bufferView ).then( function ( bufferView ) {\n\n\t\t\t\tif ( source.mimeType === 'image/png' ) {\n\n\t\t\t\t\t// Inspect the PNG 'IHDR' chunk to determine whether the image could have an\n\t\t\t\t\t// alpha channel. This check is conservative — the image could have an alpha\n\t\t\t\t\t// channel with all values == 1, and the indexed type (colorType == 3) only\n\t\t\t\t\t// sometimes contains alpha.\n\t\t\t\t\t//\n\t\t\t\t\t// https://en.wikipedia.org/wiki/Portable_Network_Graphics#File_header\n\t\t\t\t\tvar colorType = new DataView( bufferView, 25, 1 ).getUint8( 0, false );\n\t\t\t\t\thasAlpha = colorType === 6 || colorType === 4 || colorType === 3;\n\n\t\t\t\t}\n\n\t\t\t\tisObjectURL = true;\n\t\t\t\tvar blob = new Blob( [ bufferView ], { type: source.mimeType } );\n\t\t\t\tsourceURI = URL.createObjectURL( blob );\n\t\t\t\treturn sourceURI;\n\n\t\t\t} );\n\n\t\t} else if ( source.uri === undefined ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Image ' + textureIndex + ' is missing URI and bufferView' );\n\n\t\t}\n\n\t\treturn Promise.resolve( sourceURI ).then( function ( sourceURI ) {\n\n\t\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\t\tvar onLoad = resolve;\n\n\t\t\t\tif ( loader.isImageBitmapLoader === true ) {\n\n\t\t\t\t\tonLoad = function ( imageBitmap ) {\n\n\t\t\t\t\t\tresolve( new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"CanvasTexture\"]( imageBitmap ) );\n\n\t\t\t\t\t};\n\n\t\t\t\t}\n\n\t\t\t\tloader.load( resolveURL( sourceURI, options.path ), onLoad, undefined, reject );\n\n\t\t\t} );\n\n\t\t} ).then( function ( texture ) {\n\n\t\t\t// Clean up resources and configure Texture.\n\n\t\t\tif ( isObjectURL === true ) {\n\n\t\t\t\tURL.revokeObjectURL( sourceURI );\n\n\t\t\t}\n\n\t\t\ttexture.flipY = false;\n\n\t\t\tif ( textureDef.name ) texture.name = textureDef.name;\n\n\t\t\t// When there is definitely no alpha channel in the texture, set RGBFormat to save space.\n\t\t\tif ( ! hasAlpha ) texture.format = _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"RGBFormat\"];\n\n\t\t\tvar samplers = json.samplers || {};\n\t\t\tvar sampler = samplers[ textureDef.sampler ] || {};\n\n\t\t\ttexture.magFilter = WEBGL_FILTERS[ sampler.magFilter ] || _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"LinearFilter\"];\n\t\t\ttexture.minFilter = WEBGL_FILTERS[ sampler.minFilter ] || _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"LinearMipmapLinearFilter\"];\n\t\t\ttexture.wrapS = WEBGL_WRAPPINGS[ sampler.wrapS ] || _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"RepeatWrapping\"];\n\t\t\ttexture.wrapT = WEBGL_WRAPPINGS[ sampler.wrapT ] || _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"RepeatWrapping\"];\n\n\t\t\tparser.associations.set( texture, {\n\t\t\t\ttype: 'textures',\n\t\t\t\tindex: textureIndex\n\t\t\t} );\n\n\t\t\treturn texture;\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Asynchronously assigns a texture to the given material parameters.\n\t * @param {Object} materialParams\n\t * @param {string} mapName\n\t * @param {Object} mapDef\n\t * @return {Promise}\n\t */\n\tGLTFParser.prototype.assignTexture = function ( materialParams, mapName, mapDef ) {\n\n\t\tvar parser = this;\n\n\t\treturn this.getDependency( 'texture', mapDef.index ).then( function ( texture ) {\n\n\t\t\t// Materials sample aoMap from UV set 1 and other maps from UV set 0 - this can't be configured\n\t\t\t// However, we will copy UV set 0 to UV set 1 on demand for aoMap\n\t\t\tif ( mapDef.texCoord !== undefined && mapDef.texCoord != 0 && ! ( mapName === 'aoMap' && mapDef.texCoord == 1 ) ) {\n\n\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Custom UV set ' + mapDef.texCoord + ' for texture ' + mapName + ' not yet supported.' );\n\n\t\t\t}\n\n\t\t\tif ( parser.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ] ) {\n\n\t\t\t\tvar transform = mapDef.extensions !== undefined ? mapDef.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ] : undefined;\n\n\t\t\t\tif ( transform ) {\n\n\t\t\t\t\tvar gltfReference = parser.associations.get( texture );\n\t\t\t\t\ttexture = parser.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ].extendTexture( texture, transform );\n\t\t\t\t\tparser.associations.set( texture, gltfReference );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tmaterialParams[ mapName ] = texture;\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Assigns final material to a Mesh, Line, or Points instance. The instance\n\t * already has a material (generated from the glTF material options alone)\n\t * but reuse of the same glTF material may require multiple threejs materials\n\t * to accommodate different primitive types, defines, etc. New materials will\n\t * be created if necessary, and reused from a cache.\n\t * @param  {Object3D} mesh Mesh, Line, or Points instance.\n\t */\n\tGLTFParser.prototype.assignFinalMaterial = function ( mesh ) {\n\n\t\tvar geometry = mesh.geometry;\n\t\tvar material = mesh.material;\n\n\t\tvar useVertexTangents = geometry.attributes.tangent !== undefined;\n\t\tvar useVertexColors = geometry.attributes.color !== undefined;\n\t\tvar useFlatShading = geometry.attributes.normal === undefined;\n\t\tvar useSkinning = mesh.isSkinnedMesh === true;\n\t\tvar useMorphTargets = Object.keys( geometry.morphAttributes ).length > 0;\n\t\tvar useMorphNormals = useMorphTargets && geometry.morphAttributes.normal !== undefined;\n\n\t\tif ( mesh.isPoints ) {\n\n\t\t\tvar cacheKey = 'PointsMaterial:' + material.uuid;\n\n\t\t\tvar pointsMaterial = this.cache.get( cacheKey );\n\n\t\t\tif ( ! pointsMaterial ) {\n\n\t\t\t\tpointsMaterial = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"PointsMaterial\"]();\n\t\t\t\t_build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Material\"].prototype.copy.call( pointsMaterial, material );\n\t\t\t\tpointsMaterial.color.copy( material.color );\n\t\t\t\tpointsMaterial.map = material.map;\n\t\t\t\tpointsMaterial.sizeAttenuation = false; // glTF spec says points should be 1px\n\n\t\t\t\tthis.cache.add( cacheKey, pointsMaterial );\n\n\t\t\t}\n\n\t\t\tmaterial = pointsMaterial;\n\n\t\t} else if ( mesh.isLine ) {\n\n\t\t\tvar cacheKey = 'LineBasicMaterial:' + material.uuid;\n\n\t\t\tvar lineMaterial = this.cache.get( cacheKey );\n\n\t\t\tif ( ! lineMaterial ) {\n\n\t\t\t\tlineMaterial = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"LineBasicMaterial\"]();\n\t\t\t\t_build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Material\"].prototype.copy.call( lineMaterial, material );\n\t\t\t\tlineMaterial.color.copy( material.color );\n\n\t\t\t\tthis.cache.add( cacheKey, lineMaterial );\n\n\t\t\t}\n\n\t\t\tmaterial = lineMaterial;\n\n\t\t}\n\n\t\t// Clone the material if it will be modified\n\t\tif ( useVertexTangents || useVertexColors || useFlatShading || useSkinning || useMorphTargets ) {\n\n\t\t\tvar cacheKey = 'ClonedMaterial:' + material.uuid + ':';\n\n\t\t\tif ( material.isGLTFSpecularGlossinessMaterial ) cacheKey += 'specular-glossiness:';\n\t\t\tif ( useSkinning ) cacheKey += 'skinning:';\n\t\t\tif ( useVertexTangents ) cacheKey += 'vertex-tangents:';\n\t\t\tif ( useVertexColors ) cacheKey += 'vertex-colors:';\n\t\t\tif ( useFlatShading ) cacheKey += 'flat-shading:';\n\t\t\tif ( useMorphTargets ) cacheKey += 'morph-targets:';\n\t\t\tif ( useMorphNormals ) cacheKey += 'morph-normals:';\n\n\t\t\tvar cachedMaterial = this.cache.get( cacheKey );\n\n\t\t\tif ( ! cachedMaterial ) {\n\n\t\t\t\tcachedMaterial = material.clone();\n\n\t\t\t\tif ( useSkinning ) cachedMaterial.skinning = true;\n\t\t\t\tif ( useVertexColors ) cachedMaterial.vertexColors = true;\n\t\t\t\tif ( useFlatShading ) cachedMaterial.flatShading = true;\n\t\t\t\tif ( useMorphTargets ) cachedMaterial.morphTargets = true;\n\t\t\t\tif ( useMorphNormals ) cachedMaterial.morphNormals = true;\n\n\t\t\t\tif ( useVertexTangents ) {\n\n\t\t\t\t\tcachedMaterial.vertexTangents = true;\n\n\t\t\t\t\t// https://github.com/mrdoob/three.js/issues/11438#issuecomment-507003995\n\t\t\t\t\tif ( cachedMaterial.normalScale ) cachedMaterial.normalScale.y *= - 1;\n\t\t\t\t\tif ( cachedMaterial.clearcoatNormalScale ) cachedMaterial.clearcoatNormalScale.y *= - 1;\n\n\t\t\t\t}\n\n\t\t\t\tthis.cache.add( cacheKey, cachedMaterial );\n\n\t\t\t\tthis.associations.set( cachedMaterial, this.associations.get( material ) );\n\n\t\t\t}\n\n\t\t\tmaterial = cachedMaterial;\n\n\t\t}\n\n\t\t// workarounds for mesh and geometry\n\n\t\tif ( material.aoMap && geometry.attributes.uv2 === undefined && geometry.attributes.uv !== undefined ) {\n\n\t\t\tgeometry.setAttribute( 'uv2', geometry.attributes.uv );\n\n\t\t}\n\n\t\tmesh.material = material;\n\n\t};\n\n\tGLTFParser.prototype.getMaterialType = function ( /* materialIndex */ ) {\n\n\t\treturn _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"MeshStandardMaterial\"];\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#materials\n\t * @param {number} materialIndex\n\t * @return {Promise<Material>}\n\t */\n\tGLTFParser.prototype.loadMaterial = function ( materialIndex ) {\n\n\t\tvar parser = this;\n\t\tvar json = this.json;\n\t\tvar extensions = this.extensions;\n\t\tvar materialDef = json.materials[ materialIndex ];\n\n\t\tvar materialType;\n\t\tvar materialParams = {};\n\t\tvar materialExtensions = materialDef.extensions || {};\n\n\t\tvar pending = [];\n\n\t\tif ( materialExtensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ] ) {\n\n\t\t\tvar sgExtension = extensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ];\n\t\t\tmaterialType = sgExtension.getMaterialType();\n\t\t\tpending.push( sgExtension.extendParams( materialParams, materialDef, parser ) );\n\n\t\t} else if ( materialExtensions[ EXTENSIONS.KHR_MATERIALS_UNLIT ] ) {\n\n\t\t\tvar kmuExtension = extensions[ EXTENSIONS.KHR_MATERIALS_UNLIT ];\n\t\t\tmaterialType = kmuExtension.getMaterialType();\n\t\t\tpending.push( kmuExtension.extendParams( materialParams, materialDef, parser ) );\n\n\t\t} else {\n\n\t\t\t// Specification:\n\t\t\t// https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#metallic-roughness-material\n\n\t\t\tvar metallicRoughness = materialDef.pbrMetallicRoughness || {};\n\n\t\t\tmaterialParams.color = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Color\"]( 1.0, 1.0, 1.0 );\n\t\t\tmaterialParams.opacity = 1.0;\n\n\t\t\tif ( Array.isArray( metallicRoughness.baseColorFactor ) ) {\n\n\t\t\t\tvar array = metallicRoughness.baseColorFactor;\n\n\t\t\t\tmaterialParams.color.fromArray( array );\n\t\t\t\tmaterialParams.opacity = array[ 3 ];\n\n\t\t\t}\n\n\t\t\tif ( metallicRoughness.baseColorTexture !== undefined ) {\n\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'map', metallicRoughness.baseColorTexture ) );\n\n\t\t\t}\n\n\t\t\tmaterialParams.metalness = metallicRoughness.metallicFactor !== undefined ? metallicRoughness.metallicFactor : 1.0;\n\t\t\tmaterialParams.roughness = metallicRoughness.roughnessFactor !== undefined ? metallicRoughness.roughnessFactor : 1.0;\n\n\t\t\tif ( metallicRoughness.metallicRoughnessTexture !== undefined ) {\n\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'metalnessMap', metallicRoughness.metallicRoughnessTexture ) );\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'roughnessMap', metallicRoughness.metallicRoughnessTexture ) );\n\n\t\t\t}\n\n\t\t\tmaterialType = this._invokeOne( function ( ext ) {\n\n\t\t\t\treturn ext.getMaterialType && ext.getMaterialType( materialIndex );\n\n\t\t\t} );\n\n\t\t\tpending.push( Promise.all( this._invokeAll( function ( ext ) {\n\n\t\t\t\treturn ext.extendMaterialParams && ext.extendMaterialParams( materialIndex, materialParams );\n\n\t\t\t} ) ) );\n\n\t\t}\n\n\t\tif ( materialDef.doubleSided === true ) {\n\n\t\t\tmaterialParams.side = _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"DoubleSide\"];\n\n\t\t}\n\n\t\tvar alphaMode = materialDef.alphaMode || ALPHA_MODES.OPAQUE;\n\n\t\tif ( alphaMode === ALPHA_MODES.BLEND ) {\n\n\t\t\tmaterialParams.transparent = true;\n\n\t\t\t// See: https://github.com/mrdoob/three.js/issues/17706\n\t\t\tmaterialParams.depthWrite = false;\n\n\t\t} else {\n\n\t\t\tmaterialParams.transparent = false;\n\n\t\t\tif ( alphaMode === ALPHA_MODES.MASK ) {\n\n\t\t\t\tmaterialParams.alphaTest = materialDef.alphaCutoff !== undefined ? materialDef.alphaCutoff : 0.5;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialDef.normalTexture !== undefined && materialType !== _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"MeshBasicMaterial\"] ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'normalMap', materialDef.normalTexture ) );\n\n\t\t\t// https://github.com/mrdoob/three.js/issues/11438#issuecomment-507003995\n\t\t\tmaterialParams.normalScale = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector2\"]( 1, - 1 );\n\n\t\t\tif ( materialDef.normalTexture.scale !== undefined ) {\n\n\t\t\t\tmaterialParams.normalScale.set( materialDef.normalTexture.scale, - materialDef.normalTexture.scale );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialDef.occlusionTexture !== undefined && materialType !== _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"MeshBasicMaterial\"] ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'aoMap', materialDef.occlusionTexture ) );\n\n\t\t\tif ( materialDef.occlusionTexture.strength !== undefined ) {\n\n\t\t\t\tmaterialParams.aoMapIntensity = materialDef.occlusionTexture.strength;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialDef.emissiveFactor !== undefined && materialType !== _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"MeshBasicMaterial\"] ) {\n\n\t\t\tmaterialParams.emissive = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Color\"]().fromArray( materialDef.emissiveFactor );\n\n\t\t}\n\n\t\tif ( materialDef.emissiveTexture !== undefined && materialType !== _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"MeshBasicMaterial\"] ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'emissiveMap', materialDef.emissiveTexture ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending ).then( function () {\n\n\t\t\tvar material;\n\n\t\t\tif ( materialType === GLTFMeshStandardSGMaterial ) {\n\n\t\t\t\tmaterial = extensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ].createMaterial( materialParams );\n\n\t\t\t} else {\n\n\t\t\t\tmaterial = new materialType( materialParams );\n\n\t\t\t}\n\n\t\t\tif ( materialDef.name ) material.name = materialDef.name;\n\n\t\t\t// baseColorTexture, emissiveTexture, and specularGlossinessTexture use sRGB encoding.\n\t\t\tif ( material.map ) material.map.encoding = _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"sRGBEncoding\"];\n\t\t\tif ( material.emissiveMap ) material.emissiveMap.encoding = _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"sRGBEncoding\"];\n\n\t\t\tassignExtrasToUserData( material, materialDef );\n\n\t\t\tparser.associations.set( material, { type: 'materials', index: materialIndex } );\n\n\t\t\tif ( materialDef.extensions ) addUnknownExtensionsToUserData( extensions, material, materialDef );\n\n\t\t\treturn material;\n\n\t\t} );\n\n\t};\n\n\t/** When Object3D instances are targeted by animation, they need unique names. */\n\tGLTFParser.prototype.createUniqueName = function ( originalName ) {\n\n\t\tvar sanitizedName = _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"PropertyBinding\"].sanitizeNodeName( originalName || '' );\n\n\t\tvar name = sanitizedName;\n\n\t\tfor ( var i = 1; this.nodeNamesUsed[ name ]; ++ i ) {\n\n\t\t\tname = sanitizedName + '_' + i;\n\n\t\t}\n\n\t\tthis.nodeNamesUsed[ name ] = true;\n\n\t\treturn name;\n\n\t};\n\n\t/**\n\t * @param {BufferGeometry} geometry\n\t * @param {GLTF.Primitive} primitiveDef\n\t * @param {GLTFParser} parser\n\t */\n\tfunction computeBounds( geometry, primitiveDef, parser ) {\n\n\t\tvar attributes = primitiveDef.attributes;\n\n\t\tvar box = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Box3\"]();\n\n\t\tif ( attributes.POSITION !== undefined ) {\n\n\t\t\tvar accessor = parser.json.accessors[ attributes.POSITION ];\n\n\t\t\tvar min = accessor.min;\n\t\t\tvar max = accessor.max;\n\n\t\t\t// glTF requires 'min' and 'max', but VRM (which extends glTF) currently ignores that requirement.\n\n\t\t\tif ( min !== undefined && max !== undefined ) {\n\n\t\t\t\tbox.set(\n\t\t\t\t\tnew _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector3\"]( min[ 0 ], min[ 1 ], min[ 2 ] ),\n\t\t\t\t\tnew _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector3\"]( max[ 0 ], max[ 1 ], max[ 2 ] ) );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing min/max properties for accessor POSITION.' );\n\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar targets = primitiveDef.targets;\n\n\t\tif ( targets !== undefined ) {\n\n\t\t\tvar maxDisplacement = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector3\"]();\n\t\t\tvar vector = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector3\"]();\n\n\t\t\tfor ( var i = 0, il = targets.length; i < il; i ++ ) {\n\n\t\t\t\tvar target = targets[ i ];\n\n\t\t\t\tif ( target.POSITION !== undefined ) {\n\n\t\t\t\t\tvar accessor = parser.json.accessors[ target.POSITION ];\n\t\t\t\t\tvar min = accessor.min;\n\t\t\t\t\tvar max = accessor.max;\n\n\t\t\t\t\t// glTF requires 'min' and 'max', but VRM (which extends glTF) currently ignores that requirement.\n\n\t\t\t\t\tif ( min !== undefined && max !== undefined ) {\n\n\t\t\t\t\t\t// we need to get max of absolute components because target weight is [-1,1]\n\t\t\t\t\t\tvector.setX( Math.max( Math.abs( min[ 0 ] ), Math.abs( max[ 0 ] ) ) );\n\t\t\t\t\t\tvector.setY( Math.max( Math.abs( min[ 1 ] ), Math.abs( max[ 1 ] ) ) );\n\t\t\t\t\t\tvector.setZ( Math.max( Math.abs( min[ 2 ] ), Math.abs( max[ 2 ] ) ) );\n\n\t\t\t\t\t\t// Note: this assumes that the sum of all weights is at most 1. This isn't quite correct - it's more conservative\n\t\t\t\t\t\t// to assume that each target can have a max weight of 1. However, for some use cases - notably, when morph targets\n\t\t\t\t\t\t// are used to implement key-frame animations and as such only two are active at a time - this results in very large\n\t\t\t\t\t\t// boxes. So for now we make a box that's sometimes a touch too small but is hopefully mostly of reasonable size.\n\t\t\t\t\t\tmaxDisplacement.max( vector );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing min/max properties for accessor POSITION.' );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// As per comment above this box isn't conservative, but has a reasonable size for a very large number of morph targets.\n\t\t\tbox.expandByVector( maxDisplacement );\n\n\t\t}\n\n\t\tgeometry.boundingBox = box;\n\n\t\tvar sphere = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Sphere\"]();\n\n\t\tbox.getCenter( sphere.center );\n\t\tsphere.radius = box.min.distanceTo( box.max ) / 2;\n\n\t\tgeometry.boundingSphere = sphere;\n\n\t}\n\n\t/**\n\t * @param {BufferGeometry} geometry\n\t * @param {GLTF.Primitive} primitiveDef\n\t * @param {GLTFParser} parser\n\t * @return {Promise<BufferGeometry>}\n\t */\n\tfunction addPrimitiveAttributes( geometry, primitiveDef, parser ) {\n\n\t\tvar attributes = primitiveDef.attributes;\n\n\t\tvar pending = [];\n\n\t\tfunction assignAttributeAccessor( accessorIndex, attributeName ) {\n\n\t\t\treturn parser.getDependency( 'accessor', accessorIndex )\n\t\t\t\t.then( function ( accessor ) {\n\n\t\t\t\t\tgeometry.setAttribute( attributeName, accessor );\n\n\t\t\t\t} );\n\n\t\t}\n\n\t\tfor ( var gltfAttributeName in attributes ) {\n\n\t\t\tvar threeAttributeName = ATTRIBUTES[ gltfAttributeName ] || gltfAttributeName.toLowerCase();\n\n\t\t\t// Skip attributes already provided by e.g. Draco extension.\n\t\t\tif ( threeAttributeName in geometry.attributes ) continue;\n\n\t\t\tpending.push( assignAttributeAccessor( attributes[ gltfAttributeName ], threeAttributeName ) );\n\n\t\t}\n\n\t\tif ( primitiveDef.indices !== undefined && ! geometry.index ) {\n\n\t\t\tvar accessor = parser.getDependency( 'accessor', primitiveDef.indices ).then( function ( accessor ) {\n\n\t\t\t\tgeometry.setIndex( accessor );\n\n\t\t\t} );\n\n\t\t\tpending.push( accessor );\n\n\t\t}\n\n\t\tassignExtrasToUserData( geometry, primitiveDef );\n\n\t\tcomputeBounds( geometry, primitiveDef, parser );\n\n\t\treturn Promise.all( pending ).then( function () {\n\n\t\t\treturn primitiveDef.targets !== undefined\n\t\t\t\t? addMorphTargets( geometry, primitiveDef.targets, parser )\n\t\t\t\t: geometry;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * @param {BufferGeometry} geometry\n\t * @param {Number} drawMode\n\t * @return {BufferGeometry}\n\t */\n\tfunction toTrianglesDrawMode( geometry, drawMode ) {\n\n\t\tvar index = geometry.getIndex();\n\n\t\t// generate index if not present\n\n\t\tif ( index === null ) {\n\n\t\t\tvar indices = [];\n\n\t\t\tvar position = geometry.getAttribute( 'position' );\n\n\t\t\tif ( position !== undefined ) {\n\n\t\t\t\tfor ( var i = 0; i < position.count; i ++ ) {\n\n\t\t\t\t\tindices.push( i );\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.setIndex( indices );\n\t\t\t\tindex = geometry.getIndex();\n\n\t\t\t} else {\n\n\t\t\t\tconsole.error( 'THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible.' );\n\t\t\t\treturn geometry;\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tvar numberOfTriangles = index.count - 2;\n\t\tvar newIndices = [];\n\n\t\tif ( drawMode === _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"TriangleFanDrawMode\"] ) {\n\n\t\t\t// gl.TRIANGLE_FAN\n\n\t\t\tfor ( var i = 1; i <= numberOfTriangles; i ++ ) {\n\n\t\t\t\tnewIndices.push( index.getX( 0 ) );\n\t\t\t\tnewIndices.push( index.getX( i ) );\n\t\t\t\tnewIndices.push( index.getX( i + 1 ) );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// gl.TRIANGLE_STRIP\n\n\t\t\tfor ( var i = 0; i < numberOfTriangles; i ++ ) {\n\n\t\t\t\tif ( i % 2 === 0 ) {\n\n\t\t\t\t\tnewIndices.push( index.getX( i ) );\n\t\t\t\t\tnewIndices.push( index.getX( i + 1 ) );\n\t\t\t\t\tnewIndices.push( index.getX( i + 2 ) );\n\n\n\t\t\t\t} else {\n\n\t\t\t\t\tnewIndices.push( index.getX( i + 2 ) );\n\t\t\t\t\tnewIndices.push( index.getX( i + 1 ) );\n\t\t\t\t\tnewIndices.push( index.getX( i ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( ( newIndices.length / 3 ) !== numberOfTriangles ) {\n\n\t\t\tconsole.error( 'THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.' );\n\n\t\t}\n\n\t\t// build final geometry\n\n\t\tvar newGeometry = geometry.clone();\n\t\tnewGeometry.setIndex( newIndices );\n\n\t\treturn newGeometry;\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#geometry\n\t *\n\t * Creates BufferGeometries from primitives.\n\t *\n\t * @param {Array<GLTF.Primitive>} primitives\n\t * @return {Promise<Array<BufferGeometry>>}\n\t */\n\tGLTFParser.prototype.loadGeometries = function ( primitives ) {\n\n\t\tvar parser = this;\n\t\tvar extensions = this.extensions;\n\t\tvar cache = this.primitiveCache;\n\n\t\tfunction createDracoPrimitive( primitive ) {\n\n\t\t\treturn extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ]\n\t\t\t\t.decodePrimitive( primitive, parser )\n\t\t\t\t.then( function ( geometry ) {\n\n\t\t\t\t\treturn addPrimitiveAttributes( geometry, primitive, parser );\n\n\t\t\t\t} );\n\n\t\t}\n\n\t\tvar pending = [];\n\n\t\tfor ( var i = 0, il = primitives.length; i < il; i ++ ) {\n\n\t\t\tvar primitive = primitives[ i ];\n\t\t\tvar cacheKey = createPrimitiveKey( primitive );\n\n\t\t\t// See if we've already created this geometry\n\t\t\tvar cached = cache[ cacheKey ];\n\n\t\t\tif ( cached ) {\n\n\t\t\t\t// Use the cached geometry if it exists\n\t\t\t\tpending.push( cached.promise );\n\n\t\t\t} else {\n\n\t\t\t\tvar geometryPromise;\n\n\t\t\t\tif ( primitive.extensions && primitive.extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ] ) {\n\n\t\t\t\t\t// Use DRACO geometry if available\n\t\t\t\t\tgeometryPromise = createDracoPrimitive( primitive );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// Otherwise create a new geometry\n\t\t\t\t\tgeometryPromise = addPrimitiveAttributes( new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"BufferGeometry\"](), primitive, parser );\n\n\t\t\t\t}\n\n\t\t\t\t// Cache this geometry\n\t\t\t\tcache[ cacheKey ] = { primitive: primitive, promise: geometryPromise };\n\n\t\t\t\tpending.push( geometryPromise );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#meshes\n\t * @param {number} meshIndex\n\t * @return {Promise<Group|Mesh|SkinnedMesh>}\n\t */\n\tGLTFParser.prototype.loadMesh = function ( meshIndex ) {\n\n\t\tvar parser = this;\n\t\tvar json = this.json;\n\t\tvar extensions = this.extensions;\n\n\t\tvar meshDef = json.meshes[ meshIndex ];\n\t\tvar primitives = meshDef.primitives;\n\n\t\tvar pending = [];\n\n\t\tfor ( var i = 0, il = primitives.length; i < il; i ++ ) {\n\n\t\t\tvar material = primitives[ i ].material === undefined\n\t\t\t\t? createDefaultMaterial( this.cache )\n\t\t\t\t: this.getDependency( 'material', primitives[ i ].material );\n\n\t\t\tpending.push( material );\n\n\t\t}\n\n\t\tpending.push( parser.loadGeometries( primitives ) );\n\n\t\treturn Promise.all( pending ).then( function ( results ) {\n\n\t\t\tvar materials = results.slice( 0, results.length - 1 );\n\t\t\tvar geometries = results[ results.length - 1 ];\n\n\t\t\tvar meshes = [];\n\n\t\t\tfor ( var i = 0, il = geometries.length; i < il; i ++ ) {\n\n\t\t\t\tvar geometry = geometries[ i ];\n\t\t\t\tvar primitive = primitives[ i ];\n\n\t\t\t\t// 1. create Mesh\n\n\t\t\t\tvar mesh;\n\n\t\t\t\tvar material = materials[ i ];\n\n\t\t\t\tif ( primitive.mode === WEBGL_CONSTANTS.TRIANGLES ||\n\t\t\t\t\tprimitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP ||\n\t\t\t\t\tprimitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN ||\n\t\t\t\t\tprimitive.mode === undefined ) {\n\n\t\t\t\t\t// .isSkinnedMesh isn't in glTF spec. See ._markDefs()\n\t\t\t\t\tmesh = meshDef.isSkinnedMesh === true\n\t\t\t\t\t\t? new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"SkinnedMesh\"]( geometry, material )\n\t\t\t\t\t\t: new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Mesh\"]( geometry, material );\n\n\t\t\t\t\tif ( mesh.isSkinnedMesh === true && ! mesh.geometry.attributes.skinWeight.normalized ) {\n\n\t\t\t\t\t\t// we normalize floating point skin weight array to fix malformed assets (see #15319)\n\t\t\t\t\t\t// it's important to skip this for non-float32 data since normalizeSkinWeights assumes non-normalized inputs\n\t\t\t\t\t\tmesh.normalizeSkinWeights();\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( primitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP ) {\n\n\t\t\t\t\t\tmesh.geometry = toTrianglesDrawMode( mesh.geometry, _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"TriangleStripDrawMode\"] );\n\n\t\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN ) {\n\n\t\t\t\t\t\tmesh.geometry = toTrianglesDrawMode( mesh.geometry, _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"TriangleFanDrawMode\"] );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINES ) {\n\n\t\t\t\t\tmesh = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"LineSegments\"]( geometry, material );\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINE_STRIP ) {\n\n\t\t\t\t\tmesh = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Line\"]( geometry, material );\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINE_LOOP ) {\n\n\t\t\t\t\tmesh = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"LineLoop\"]( geometry, material );\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.POINTS ) {\n\n\t\t\t\t\tmesh = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Points\"]( geometry, material );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthrow new Error( 'THREE.GLTFLoader: Primitive mode unsupported: ' + primitive.mode );\n\n\t\t\t\t}\n\n\t\t\t\tif ( Object.keys( mesh.geometry.morphAttributes ).length > 0 ) {\n\n\t\t\t\t\tupdateMorphTargets( mesh, meshDef );\n\n\t\t\t\t}\n\n\t\t\t\tmesh.name = parser.createUniqueName( meshDef.name || ( 'mesh_' + meshIndex ) );\n\n\t\t\t\tassignExtrasToUserData( mesh, meshDef );\n\n\t\t\t\tif ( primitive.extensions ) addUnknownExtensionsToUserData( extensions, mesh, primitive );\n\n\t\t\t\tparser.assignFinalMaterial( mesh );\n\n\t\t\t\tmeshes.push( mesh );\n\n\t\t\t}\n\n\t\t\tif ( meshes.length === 1 ) {\n\n\t\t\t\treturn meshes[ 0 ];\n\n\t\t\t}\n\n\t\t\tvar group = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Group\"]();\n\n\t\t\tfor ( var i = 0, il = meshes.length; i < il; i ++ ) {\n\n\t\t\t\tgroup.add( meshes[ i ] );\n\n\t\t\t}\n\n\t\t\treturn group;\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#cameras\n\t * @param {number} cameraIndex\n\t * @return {Promise<THREE.Camera>}\n\t */\n\tGLTFParser.prototype.loadCamera = function ( cameraIndex ) {\n\n\t\tvar camera;\n\t\tvar cameraDef = this.json.cameras[ cameraIndex ];\n\t\tvar params = cameraDef[ cameraDef.type ];\n\n\t\tif ( ! params ) {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing camera parameters.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( cameraDef.type === 'perspective' ) {\n\n\t\t\tcamera = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"PerspectiveCamera\"]( _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"MathUtils\"].radToDeg( params.yfov ), params.aspectRatio || 1, params.znear || 1, params.zfar || 2e6 );\n\n\t\t} else if ( cameraDef.type === 'orthographic' ) {\n\n\t\t\tcamera = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"OrthographicCamera\"]( - params.xmag, params.xmag, params.ymag, - params.ymag, params.znear, params.zfar );\n\n\t\t}\n\n\t\tif ( cameraDef.name ) camera.name = this.createUniqueName( cameraDef.name );\n\n\t\tassignExtrasToUserData( camera, cameraDef );\n\n\t\treturn Promise.resolve( camera );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#skins\n\t * @param {number} skinIndex\n\t * @return {Promise<Object>}\n\t */\n\tGLTFParser.prototype.loadSkin = function ( skinIndex ) {\n\n\t\tvar skinDef = this.json.skins[ skinIndex ];\n\n\t\tvar skinEntry = { joints: skinDef.joints };\n\n\t\tif ( skinDef.inverseBindMatrices === undefined ) {\n\n\t\t\treturn Promise.resolve( skinEntry );\n\n\t\t}\n\n\t\treturn this.getDependency( 'accessor', skinDef.inverseBindMatrices ).then( function ( accessor ) {\n\n\t\t\tskinEntry.inverseBindMatrices = accessor;\n\n\t\t\treturn skinEntry;\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#animations\n\t * @param {number} animationIndex\n\t * @return {Promise<AnimationClip>}\n\t */\n\tGLTFParser.prototype.loadAnimation = function ( animationIndex ) {\n\n\t\tvar json = this.json;\n\n\t\tvar animationDef = json.animations[ animationIndex ];\n\n\t\tvar pendingNodes = [];\n\t\tvar pendingInputAccessors = [];\n\t\tvar pendingOutputAccessors = [];\n\t\tvar pendingSamplers = [];\n\t\tvar pendingTargets = [];\n\n\t\tfor ( var i = 0, il = animationDef.channels.length; i < il; i ++ ) {\n\n\t\t\tvar channel = animationDef.channels[ i ];\n\t\t\tvar sampler = animationDef.samplers[ channel.sampler ];\n\t\t\tvar target = channel.target;\n\t\t\tvar name = target.node !== undefined ? target.node : target.id; // NOTE: target.id is deprecated.\n\t\t\tvar input = animationDef.parameters !== undefined ? animationDef.parameters[ sampler.input ] : sampler.input;\n\t\t\tvar output = animationDef.parameters !== undefined ? animationDef.parameters[ sampler.output ] : sampler.output;\n\n\t\t\tpendingNodes.push( this.getDependency( 'node', name ) );\n\t\t\tpendingInputAccessors.push( this.getDependency( 'accessor', input ) );\n\t\t\tpendingOutputAccessors.push( this.getDependency( 'accessor', output ) );\n\t\t\tpendingSamplers.push( sampler );\n\t\t\tpendingTargets.push( target );\n\n\t\t}\n\n\t\treturn Promise.all( [\n\n\t\t\tPromise.all( pendingNodes ),\n\t\t\tPromise.all( pendingInputAccessors ),\n\t\t\tPromise.all( pendingOutputAccessors ),\n\t\t\tPromise.all( pendingSamplers ),\n\t\t\tPromise.all( pendingTargets )\n\n\t\t] ).then( function ( dependencies ) {\n\n\t\t\tvar nodes = dependencies[ 0 ];\n\t\t\tvar inputAccessors = dependencies[ 1 ];\n\t\t\tvar outputAccessors = dependencies[ 2 ];\n\t\t\tvar samplers = dependencies[ 3 ];\n\t\t\tvar targets = dependencies[ 4 ];\n\n\t\t\tvar tracks = [];\n\n\t\t\tfor ( var i = 0, il = nodes.length; i < il; i ++ ) {\n\n\t\t\t\tvar node = nodes[ i ];\n\t\t\t\tvar inputAccessor = inputAccessors[ i ];\n\t\t\t\tvar outputAccessor = outputAccessors[ i ];\n\t\t\t\tvar sampler = samplers[ i ];\n\t\t\t\tvar target = targets[ i ];\n\n\t\t\t\tif ( node === undefined ) continue;\n\n\t\t\t\tnode.updateMatrix();\n\t\t\t\tnode.matrixAutoUpdate = true;\n\n\t\t\t\tvar TypedKeyframeTrack;\n\n\t\t\t\tswitch ( PATH_PROPERTIES[ target.path ] ) {\n\n\t\t\t\t\tcase PATH_PROPERTIES.weights:\n\n\t\t\t\t\t\tTypedKeyframeTrack = _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"NumberKeyframeTrack\"];\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase PATH_PROPERTIES.rotation:\n\n\t\t\t\t\t\tTypedKeyframeTrack = _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"QuaternionKeyframeTrack\"];\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase PATH_PROPERTIES.position:\n\t\t\t\t\tcase PATH_PROPERTIES.scale:\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tTypedKeyframeTrack = _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"VectorKeyframeTrack\"];\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\tvar targetName = node.name ? node.name : node.uuid;\n\n\t\t\t\tvar interpolation = sampler.interpolation !== undefined ? INTERPOLATION[ sampler.interpolation ] : _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"InterpolateLinear\"];\n\n\t\t\t\tvar targetNames = [];\n\n\t\t\t\tif ( PATH_PROPERTIES[ target.path ] === PATH_PROPERTIES.weights ) {\n\n\t\t\t\t\t// Node may be a Group (glTF mesh with several primitives) or a Mesh.\n\t\t\t\t\tnode.traverse( function ( object ) {\n\n\t\t\t\t\t\tif ( object.isMesh === true && object.morphTargetInfluences ) {\n\n\t\t\t\t\t\t\ttargetNames.push( object.name ? object.name : object.uuid );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} );\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttargetNames.push( targetName );\n\n\t\t\t\t}\n\n\t\t\t\tvar outputArray = outputAccessor.array;\n\n\t\t\t\tif ( outputAccessor.normalized ) {\n\n\t\t\t\t\tvar scale;\n\n\t\t\t\t\tif ( outputArray.constructor === Int8Array ) {\n\n\t\t\t\t\t\tscale = 1 / 127;\n\n\t\t\t\t\t} else if ( outputArray.constructor === Uint8Array ) {\n\n\t\t\t\t\t\tscale = 1 / 255;\n\n\t\t\t\t\t} else if ( outputArray.constructor == Int16Array ) {\n\n\t\t\t\t\t\tscale = 1 / 32767;\n\n\t\t\t\t\t} else if ( outputArray.constructor === Uint16Array ) {\n\n\t\t\t\t\t\tscale = 1 / 65535;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tthrow new Error( 'THREE.GLTFLoader: Unsupported output accessor component type.' );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tvar scaled = new Float32Array( outputArray.length );\n\n\t\t\t\t\tfor ( var j = 0, jl = outputArray.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\tscaled[ j ] = outputArray[ j ] * scale;\n\n\t\t\t\t\t}\n\n\t\t\t\t\toutputArray = scaled;\n\n\t\t\t\t}\n\n\t\t\t\tfor ( var j = 0, jl = targetNames.length; j < jl; j ++ ) {\n\n\t\t\t\t\tvar track = new TypedKeyframeTrack(\n\t\t\t\t\t\ttargetNames[ j ] + '.' + PATH_PROPERTIES[ target.path ],\n\t\t\t\t\t\tinputAccessor.array,\n\t\t\t\t\t\toutputArray,\n\t\t\t\t\t\tinterpolation\n\t\t\t\t\t);\n\n\t\t\t\t\t// Override interpolation with custom factory method.\n\t\t\t\t\tif ( sampler.interpolation === 'CUBICSPLINE' ) {\n\n\t\t\t\t\t\ttrack.createInterpolant = function InterpolantFactoryMethodGLTFCubicSpline( result ) {\n\n\t\t\t\t\t\t\t// A CUBICSPLINE keyframe in glTF has three output values for each input value,\n\t\t\t\t\t\t\t// representing inTangent, splineVertex, and outTangent. As a result, track.getValueSize()\n\t\t\t\t\t\t\t// must be divided by three to get the interpolant's sampleSize argument.\n\n\t\t\t\t\t\t\treturn new GLTFCubicSplineInterpolant( this.times, this.values, this.getValueSize() / 3, result );\n\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\t// Mark as CUBICSPLINE. `track.getInterpolation()` doesn't support custom interpolants.\n\t\t\t\t\t\ttrack.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttracks.push( track );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar name = animationDef.name ? animationDef.name : 'animation_' + animationIndex;\n\n\t\t\treturn new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"AnimationClip\"]( name, undefined, tracks );\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#nodes-and-hierarchy\n\t * @param {number} nodeIndex\n\t * @return {Promise<Object3D>}\n\t */\n\tGLTFParser.prototype.loadNode = function ( nodeIndex ) {\n\n\t\tvar json = this.json;\n\t\tvar extensions = this.extensions;\n\t\tvar parser = this;\n\n\t\tvar nodeDef = json.nodes[ nodeIndex ];\n\n\t\t// reserve node's name before its dependencies, so the root has the intended name.\n\t\tvar nodeName = nodeDef.name ? parser.createUniqueName( nodeDef.name ) : '';\n\n\t\treturn ( function () {\n\n\t\t\tvar pending = [];\n\n\t\t\tif ( nodeDef.mesh !== undefined ) {\n\n\t\t\t\tpending.push( parser.getDependency( 'mesh', nodeDef.mesh ).then( function ( mesh ) {\n\n\t\t\t\t\tvar node = parser._getNodeRef( parser.meshCache, nodeDef.mesh, mesh );\n\n\t\t\t\t\t// if weights are provided on the node, override weights on the mesh.\n\t\t\t\t\tif ( nodeDef.weights !== undefined ) {\n\n\t\t\t\t\t\tnode.traverse( function ( o ) {\n\n\t\t\t\t\t\t\tif ( ! o.isMesh ) return;\n\n\t\t\t\t\t\t\tfor ( var i = 0, il = nodeDef.weights.length; i < il; i ++ ) {\n\n\t\t\t\t\t\t\t\to.morphTargetInfluences[ i ] = nodeDef.weights[ i ];\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t}\n\n\t\t\t\t\treturn node;\n\n\t\t\t\t} ) );\n\n\t\t\t}\n\n\t\t\tif ( nodeDef.camera !== undefined ) {\n\n\t\t\t\tpending.push( parser.getDependency( 'camera', nodeDef.camera ).then( function ( camera ) {\n\n\t\t\t\t\treturn parser._getNodeRef( parser.cameraCache, nodeDef.camera, camera );\n\n\t\t\t\t} ) );\n\n\t\t\t}\n\n\t\t\tparser._invokeAll( function ( ext ) {\n\n\t\t\t\treturn ext.createNodeAttachment && ext.createNodeAttachment( nodeIndex );\n\n\t\t\t} ).forEach( function ( promise ) {\n\n\t\t\t\tpending.push( promise );\n\n\t\t\t} );\n\n\t\t\treturn Promise.all( pending );\n\n\t\t}() ).then( function ( objects ) {\n\n\t\t\tvar node;\n\n\t\t\t// .isBone isn't in glTF spec. See ._markDefs\n\t\t\tif ( nodeDef.isBone === true ) {\n\n\t\t\t\tnode = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Bone\"]();\n\n\t\t\t} else if ( objects.length > 1 ) {\n\n\t\t\t\tnode = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Group\"]();\n\n\t\t\t} else if ( objects.length === 1 ) {\n\n\t\t\t\tnode = objects[ 0 ];\n\n\t\t\t} else {\n\n\t\t\t\tnode = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Object3D\"]();\n\n\t\t\t}\n\n\t\t\tif ( node !== objects[ 0 ] ) {\n\n\t\t\t\tfor ( var i = 0, il = objects.length; i < il; i ++ ) {\n\n\t\t\t\t\tnode.add( objects[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( nodeDef.name ) {\n\n\t\t\t\tnode.userData.name = nodeDef.name;\n\t\t\t\tnode.name = nodeName;\n\n\t\t\t}\n\n\t\t\tassignExtrasToUserData( node, nodeDef );\n\n\t\t\tif ( nodeDef.extensions ) addUnknownExtensionsToUserData( extensions, node, nodeDef );\n\n\t\t\tif ( nodeDef.matrix !== undefined ) {\n\n\t\t\t\tvar matrix = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Matrix4\"]();\n\t\t\t\tmatrix.fromArray( nodeDef.matrix );\n\t\t\t\tnode.applyMatrix4( matrix );\n\n\t\t\t} else {\n\n\t\t\t\tif ( nodeDef.translation !== undefined ) {\n\n\t\t\t\t\tnode.position.fromArray( nodeDef.translation );\n\n\t\t\t\t}\n\n\t\t\t\tif ( nodeDef.rotation !== undefined ) {\n\n\t\t\t\t\tnode.quaternion.fromArray( nodeDef.rotation );\n\n\t\t\t\t}\n\n\t\t\t\tif ( nodeDef.scale !== undefined ) {\n\n\t\t\t\t\tnode.scale.fromArray( nodeDef.scale );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tparser.associations.set( node, { type: 'nodes', index: nodeIndex } );\n\n\t\t\treturn node;\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#scenes\n\t * @param {number} sceneIndex\n\t * @return {Promise<Group>}\n\t */\n\tGLTFParser.prototype.loadScene = function () {\n\n\t\t// scene node hierachy builder\n\n\t\tfunction buildNodeHierachy( nodeId, parentObject, json, parser ) {\n\n\t\t\tvar nodeDef = json.nodes[ nodeId ];\n\n\t\t\treturn parser.getDependency( 'node', nodeId ).then( function ( node ) {\n\n\t\t\t\tif ( nodeDef.skin === undefined ) return node;\n\n\t\t\t\t// build skeleton here as well\n\n\t\t\t\tvar skinEntry;\n\n\t\t\t\treturn parser.getDependency( 'skin', nodeDef.skin ).then( function ( skin ) {\n\n\t\t\t\t\tskinEntry = skin;\n\n\t\t\t\t\tvar pendingJoints = [];\n\n\t\t\t\t\tfor ( var i = 0, il = skinEntry.joints.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tpendingJoints.push( parser.getDependency( 'node', skinEntry.joints[ i ] ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t\treturn Promise.all( pendingJoints );\n\n\t\t\t\t} ).then( function ( jointNodes ) {\n\n\t\t\t\t\tnode.traverse( function ( mesh ) {\n\n\t\t\t\t\t\tif ( ! mesh.isMesh ) return;\n\n\t\t\t\t\t\tvar bones = [];\n\t\t\t\t\t\tvar boneInverses = [];\n\n\t\t\t\t\t\tfor ( var j = 0, jl = jointNodes.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\t\tvar jointNode = jointNodes[ j ];\n\n\t\t\t\t\t\t\tif ( jointNode ) {\n\n\t\t\t\t\t\t\t\tbones.push( jointNode );\n\n\t\t\t\t\t\t\t\tvar mat = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Matrix4\"]();\n\n\t\t\t\t\t\t\t\tif ( skinEntry.inverseBindMatrices !== undefined ) {\n\n\t\t\t\t\t\t\t\t\tmat.fromArray( skinEntry.inverseBindMatrices.array, j * 16 );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tboneInverses.push( mat );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Joint \"%s\" could not be found.', skinEntry.joints[ j ] );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tmesh.bind( new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Skeleton\"]( bones, boneInverses ), mesh.matrixWorld );\n\n\t\t\t\t\t} );\n\n\t\t\t\t\treturn node;\n\n\t\t\t\t} );\n\n\t\t\t} ).then( function ( node ) {\n\n\t\t\t\t// build node hierachy\n\n\t\t\t\tparentObject.add( node );\n\n\t\t\t\tvar pending = [];\n\n\t\t\t\tif ( nodeDef.children ) {\n\n\t\t\t\t\tvar children = nodeDef.children;\n\n\t\t\t\t\tfor ( var i = 0, il = children.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tvar child = children[ i ];\n\t\t\t\t\t\tpending.push( buildNodeHierachy( child, node, json, parser ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\treturn Promise.all( pending );\n\n\t\t\t} );\n\n\t\t}\n\n\t\treturn function loadScene( sceneIndex ) {\n\n\t\t\tvar json = this.json;\n\t\t\tvar extensions = this.extensions;\n\t\t\tvar sceneDef = this.json.scenes[ sceneIndex ];\n\t\t\tvar parser = this;\n\n\t\t\t// Loader returns Group, not Scene.\n\t\t\t// See: https://github.com/mrdoob/three.js/issues/18342#issuecomment-578981172\n\t\t\tvar scene = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Group\"]();\n\t\t\tif ( sceneDef.name ) scene.name = parser.createUniqueName( sceneDef.name );\n\n\t\t\tassignExtrasToUserData( scene, sceneDef );\n\n\t\t\tif ( sceneDef.extensions ) addUnknownExtensionsToUserData( extensions, scene, sceneDef );\n\n\t\t\tvar nodeIds = sceneDef.nodes || [];\n\n\t\t\tvar pending = [];\n\n\t\t\tfor ( var i = 0, il = nodeIds.length; i < il; i ++ ) {\n\n\t\t\t\tpending.push( buildNodeHierachy( nodeIds[ i ], scene, json, parser ) );\n\n\t\t\t}\n\n\t\t\treturn Promise.all( pending ).then( function () {\n\n\t\t\t\treturn scene;\n\n\t\t\t} );\n\n\t\t};\n\n\t}();\n\n\treturn GLTFLoader;\n\n} )();\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL3RocmVlL2V4YW1wbGVzL2pzbS9sb2FkZXJzL0dMVEZMb2FkZXIuanM/MzRhZCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUErRHdDOztBQUV4Qzs7QUFFQTs7QUFFQSxFQUFFLDZEQUFNOztBQUVSO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQSxHQUFHOztBQUVIOztBQUVBOztBQUVBLEdBQUc7O0FBRUg7O0FBRUE7O0FBRUEsR0FBRzs7QUFFSDs7QUFFQTs7QUFFQSxHQUFHOztBQUVIOztBQUVBOztBQUVBLEdBQUc7O0FBRUg7O0FBRUE7O0FBRUEsR0FBRzs7QUFFSDs7QUFFQSxzREFBc0QsNkRBQU07O0FBRTVEOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBLElBQUk7O0FBRUo7O0FBRUEsSUFBSTs7QUFFSixtQkFBbUIsa0VBQVc7O0FBRTlCOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBLEtBQUs7O0FBRUw7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQSxvQkFBb0IsaUVBQVU7O0FBRTlCO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBLE1BQU07O0FBRU4sS0FBSzs7QUFFTDs7QUFFQTs7QUFFQSxJQUFJOztBQUVKLEdBQUc7O0FBRUg7O0FBRUE7QUFDQTs7QUFFQSxHQUFHOztBQUVIOztBQUVBOztBQUVBOztBQUVBOztBQUVBLEdBQUc7O0FBRUg7O0FBRUE7QUFDQTs7QUFFQSxHQUFHOztBQUVIOztBQUVBO0FBQ0E7O0FBRUEsR0FBRzs7QUFFSDs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQSxHQUFHOztBQUVIOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBLEdBQUc7O0FBRUg7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVB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N0I7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQSxJQUFJOztBQUVKO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQSxHQUFHOztBQUVIOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxpQ0FBaUM7O0FBRWpDOztBQUVBOztBQUVBOztBQUVBLElBQUk7O0FBRUo7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBLEtBQUs7O0FBRUw7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBLElBQUk7O0FBRUosR0FBRzs7QUFFSDs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUM7O0FBRXJDOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLFVBQVUsa0VBQVc7QUFDckI7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVB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QTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQSxtQ0FBbUMsa0NBQWtDOztBQUVyRTs7QUFFQSxHQUFHOztBQUVIOztBQUVBO0FBQ0E7QUFDQSxZQUFZLE9BQU87QUFDbkIsYUFBYTtBQUNiO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUEsbURBQW1ELFFBQVE7O0FBRTNEOztBQUVBOztBQUVBOztBQUVBLEtBQUs7O0FBRUw7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQSw4Q0FBOEMsUUFBUTs7QUFFdEQ7O0FBRUE7O0FBRUE7O0FBRUEsc0JBQXNCLDhEQUFPOztBQUU3Qjs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQSxRQUFROztBQUVSOztBQUVBOztBQUVBOztBQUVBLHFCQUFxQiwrREFBUTs7QUFFN0IsTUFBTTs7QUFFTjs7QUFFQSxLQUFLOztBQUVMLElBQUk7O0FBRUo7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUEsMkNBQTJDLFFBQVE7O0FBRW5EO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUEsSUFBSTs7QUFFSjs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsbUJBQW1CLDREQUFLO0FBQ3hCOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBLHdDQUF3QyxRQUFROztBQUVoRDs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQSxJQUFJOztBQUVKOztBQUVBLEVBQUU7O0FBRUY7O0FBRUEsQ0FBQzs7QUFFcUIiLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvdGhyZWUvZXhhbXBsZXMvanNtL2xvYWRlcnMvR0xURkxvYWRlci5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG5cdEFuaW1hdGlvbkNsaXAsXG5cdEJvbmUsXG5cdEJveDMsXG5cdEJ1ZmZlckF0dHJpYnV0ZSxcblx0QnVmZmVyR2VvbWV0cnksXG5cdENhbnZhc1RleHR1cmUsXG5cdENsYW1wVG9FZGdlV3JhcHBpbmcsXG5cdENvbG9yLFxuXHREaXJlY3Rpb25hbExpZ2h0LFxuXHREb3VibGVTaWRlLFxuXHRGaWxlTG9hZGVyLFxuXHRGcm9udFNpZGUsXG5cdEdyb3VwLFxuXHRJbWFnZUJpdG1hcExvYWRlcixcblx0SW50ZXJsZWF2ZWRCdWZmZXIsXG5cdEludGVybGVhdmVkQnVmZmVyQXR0cmlidXRlLFxuXHRJbnRlcnBvbGFudCxcblx0SW50ZXJwb2xhdGVEaXNjcmV0ZSxcblx0SW50ZXJwb2xhdGVMaW5lYXIsXG5cdExpbmUsXG5cdExpbmVCYXNpY01hdGVyaWFsLFxuXHRMaW5lTG9vcCxcblx0TGluZVNlZ21lbnRzLFxuXHRMaW5lYXJGaWx0ZXIsXG5cdExpbmVhck1pcG1hcExpbmVhckZpbHRlcixcblx0TGluZWFyTWlwbWFwTmVhcmVzdEZpbHRlcixcblx0TG9hZGVyLFxuXHRMb2FkZXJVdGlscyxcblx0TWF0ZXJpYWwsXG5cdE1hdGhVdGlscyxcblx0TWF0cml4NCxcblx0TWVzaCxcblx0TWVzaEJhc2ljTWF0ZXJpYWwsXG5cdE1lc2hQaHlzaWNhbE1hdGVyaWFsLFxuXHRNZXNoU3RhbmRhcmRNYXRlcmlhbCxcblx0TWlycm9yZWRSZXBlYXRXcmFwcGluZyxcblx0TmVhcmVzdEZpbHRlcixcblx0TmVhcmVzdE1pcG1hcExpbmVhckZpbHRlcixcblx0TmVhcmVzdE1pcG1hcE5lYXJlc3RGaWx0ZXIsXG5cdE51bWJlcktleWZyYW1lVHJhY2ssXG5cdE9iamVjdDNELFxuXHRPcnRob2dyYXBoaWNDYW1lcmEsXG5cdFBlcnNwZWN0aXZlQ2FtZXJhLFxuXHRQb2ludExpZ2h0LFxuXHRQb2ludHMsXG5cdFBvaW50c01hdGVyaWFsLFxuXHRQcm9wZXJ0eUJpbmRpbmcsXG5cdFF1YXRlcm5pb25LZXlmcmFtZVRyYWNrLFxuXHRSR0JGb3JtYXQsXG5cdFJlcGVhdFdyYXBwaW5nLFxuXHRTa2VsZXRvbixcblx0U2tpbm5lZE1lc2gsXG5cdFNwaGVyZSxcblx0U3BvdExpZ2h0LFxuXHRUYW5nZW50U3BhY2VOb3JtYWxNYXAsXG5cdFRleHR1cmVMb2FkZXIsXG5cdFRyaWFuZ2xlRmFuRHJhd01vZGUsXG5cdFRyaWFuZ2xlU3RyaXBEcmF3TW9kZSxcblx0VmVjdG9yMixcblx0VmVjdG9yMyxcblx0VmVjdG9yS2V5ZnJhbWVUcmFjayxcblx0c1JHQkVuY29kaW5nXG59IGZyb20gJy4uLy4uLy4uL2J1aWxkL3RocmVlLm1vZHVsZS5qcyc7XG5cbnZhciBHTFRGTG9hZGVyID0gKCBmdW5jdGlvbiAoKSB7XG5cblx0ZnVuY3Rpb24gR0xURkxvYWRlciggbWFuYWdlciApIHtcblxuXHRcdExvYWRlci5jYWxsKCB0aGlzLCBtYW5hZ2VyICk7XG5cblx0XHR0aGlzLmRyYWNvTG9hZGVyID0gbnVsbDtcblx0XHR0aGlzLmt0eDJMb2FkZXIgPSBudWxsO1xuXHRcdHRoaXMubWVzaG9wdERlY29kZXIgPSBudWxsO1xuXG5cdFx0dGhpcy5wbHVnaW5DYWxsYmFja3MgPSBbXTtcblxuXHRcdHRoaXMucmVnaXN0ZXIoIGZ1bmN0aW9uICggcGFyc2VyICkge1xuXG5cdFx0XHRyZXR1cm4gbmV3IEdMVEZNYXRlcmlhbHNDbGVhcmNvYXRFeHRlbnNpb24oIHBhcnNlciApO1xuXG5cdFx0fSApO1xuXG5cdFx0dGhpcy5yZWdpc3RlciggZnVuY3Rpb24gKCBwYXJzZXIgKSB7XG5cblx0XHRcdHJldHVybiBuZXcgR0xURlRleHR1cmVCYXNpc1VFeHRlbnNpb24oIHBhcnNlciApO1xuXG5cdFx0fSApO1xuXG5cdFx0dGhpcy5yZWdpc3RlciggZnVuY3Rpb24gKCBwYXJzZXIgKSB7XG5cblx0XHRcdHJldHVybiBuZXcgR0xURlRleHR1cmVXZWJQRXh0ZW5zaW9uKCBwYXJzZXIgKTtcblxuXHRcdH0gKTtcblxuXHRcdHRoaXMucmVnaXN0ZXIoIGZ1bmN0aW9uICggcGFyc2VyICkge1xuXG5cdFx0XHRyZXR1cm4gbmV3IEdMVEZNYXRlcmlhbHNUcmFuc21pc3Npb25FeHRlbnNpb24oIHBhcnNlciApO1xuXG5cdFx0fSApO1xuXG5cdFx0dGhpcy5yZWdpc3RlciggZnVuY3Rpb24gKCBwYXJzZXIgKSB7XG5cblx0XHRcdHJldHVybiBuZXcgR0xURkxpZ2h0c0V4dGVuc2lvbiggcGFyc2VyICk7XG5cblx0XHR9ICk7XG5cblx0XHR0aGlzLnJlZ2lzdGVyKCBmdW5jdGlvbiAoIHBhcnNlciApIHtcblxuXHRcdFx0cmV0dXJuIG5ldyBHTFRGTWVzaG9wdENvbXByZXNzaW9uKCBwYXJzZXIgKTtcblxuXHRcdH0gKTtcblxuXHR9XG5cblx0R0xURkxvYWRlci5wcm90b3R5cGUgPSBPYmplY3QuYXNzaWduKCBPYmplY3QuY3JlYXRlKCBMb2FkZXIucHJvdG90eXBlICksIHtcblxuXHRcdGNvbnN0cnVjdG9yOiBHTFRGTG9hZGVyLFxuXG5cdFx0bG9hZDogZnVuY3Rpb24gKCB1cmwsIG9uTG9hZCwgb25Qcm9ncmVzcywgb25FcnJvciApIHtcblxuXHRcdFx0dmFyIHNjb3BlID0gdGhpcztcblxuXHRcdFx0dmFyIHJlc291cmNlUGF0aDtcblxuXHRcdFx0aWYgKCB0aGlzLnJlc291cmNlUGF0aCAhPT0gJycgKSB7XG5cblx0XHRcdFx0cmVzb3VyY2VQYXRoID0gdGhpcy5yZXNvdXJjZVBhdGg7XG5cblx0XHRcdH0gZWxzZSBpZiAoIHRoaXMucGF0aCAhPT0gJycgKSB7XG5cblx0XHRcdFx0cmVzb3VyY2VQYXRoID0gdGhpcy5wYXRoO1xuXG5cdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdHJlc291cmNlUGF0aCA9IExvYWRlclV0aWxzLmV4dHJhY3RVcmxCYXNlKCB1cmwgKTtcblxuXHRcdFx0fVxuXG5cdFx0XHQvLyBUZWxscyB0aGUgTG9hZGluZ01hbmFnZXIgdG8gdHJhY2sgYW4gZXh0cmEgaXRlbSwgd2hpY2ggcmVzb2x2ZXMgYWZ0ZXJcblx0XHRcdC8vIHRoZSBtb2RlbCBpcyBmdWxseSBsb2FkZWQuIFRoaXMgbWVhbnMgdGhlIGNvdW50IG9mIGl0ZW1zIGxvYWRlZCB3aWxsXG5cdFx0XHQvLyBiZSBpbmNvcnJlY3QsIGJ1dCBlbnN1cmVzIG1hbmFnZXIub25Mb2FkKCkgZG9lcyBub3QgZmlyZSBlYXJseS5cblx0XHRcdHRoaXMubWFuYWdlci5pdGVtU3RhcnQoIHVybCApO1xuXG5cdFx0XHR2YXIgX29uRXJyb3IgPSBmdW5jdGlvbiAoIGUgKSB7XG5cblx0XHRcdFx0aWYgKCBvbkVycm9yICkge1xuXG5cdFx0XHRcdFx0b25FcnJvciggZSApO1xuXG5cdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRjb25zb2xlLmVycm9yKCBlICk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdHNjb3BlLm1hbmFnZXIuaXRlbUVycm9yKCB1cmwgKTtcblx0XHRcdFx0c2NvcGUubWFuYWdlci5pdGVtRW5kKCB1cmwgKTtcblxuXHRcdFx0fTtcblxuXHRcdFx0dmFyIGxvYWRlciA9IG5ldyBGaWxlTG9hZGVyKCB0aGlzLm1hbmFnZXIgKTtcblxuXHRcdFx0bG9hZGVyLnNldFBhdGgoIHRoaXMucGF0aCApO1xuXHRcdFx0bG9hZGVyLnNldFJlc3BvbnNlVHlwZSggJ2FycmF5YnVmZmVyJyApO1xuXHRcdFx0bG9hZGVyLnNldFJlcXVlc3RIZWFkZXIoIHRoaXMucmVxdWVzdEhlYWRlciApO1xuXHRcdFx0bG9hZGVyLnNldFdpdGhDcmVkZW50aWFscyggdGhpcy53aXRoQ3JlZGVudGlhbHMgKTtcblxuXHRcdFx0bG9hZGVyLmxvYWQoIHVybCwgZnVuY3Rpb24gKCBkYXRhICkge1xuXG5cdFx0XHRcdHRyeSB7XG5cblx0XHRcdFx0XHRzY29wZS5wYXJzZSggZGF0YSwgcmVzb3VyY2VQYXRoLCBmdW5jdGlvbiAoIGdsdGYgKSB7XG5cblx0XHRcdFx0XHRcdG9uTG9hZCggZ2x0ZiApO1xuXG5cdFx0XHRcdFx0XHRzY29wZS5tYW5hZ2VyLml0ZW1FbmQoIHVybCApO1xuXG5cdFx0XHRcdFx0fSwgX29uRXJyb3IgKTtcblxuXHRcdFx0XHR9IGNhdGNoICggZSApIHtcblxuXHRcdFx0XHRcdF9vbkVycm9yKCBlICk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9LCBvblByb2dyZXNzLCBfb25FcnJvciApO1xuXG5cdFx0fSxcblxuXHRcdHNldERSQUNPTG9hZGVyOiBmdW5jdGlvbiAoIGRyYWNvTG9hZGVyICkge1xuXG5cdFx0XHR0aGlzLmRyYWNvTG9hZGVyID0gZHJhY29Mb2FkZXI7XG5cdFx0XHRyZXR1cm4gdGhpcztcblxuXHRcdH0sXG5cblx0XHRzZXRERFNMb2FkZXI6IGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFxuXG5cdFx0XHRcdCdUSFJFRS5HTFRGTG9hZGVyOiBcIk1TRlRfdGV4dHVyZV9kZHNcIiBubyBsb25nZXIgc3VwcG9ydGVkLiBQbGVhc2UgdXBkYXRlIHRvIFwiS0hSX3RleHR1cmVfYmFzaXN1XCIuJ1xuXG5cdFx0XHQpO1xuXG5cdFx0fSxcblxuXHRcdHNldEtUWDJMb2FkZXI6IGZ1bmN0aW9uICgga3R4MkxvYWRlciApIHtcblxuXHRcdFx0dGhpcy5rdHgyTG9hZGVyID0ga3R4MkxvYWRlcjtcblx0XHRcdHJldHVybiB0aGlzO1xuXG5cdFx0fSxcblxuXHRcdHNldE1lc2hvcHREZWNvZGVyOiBmdW5jdGlvbiAoIG1lc2hvcHREZWNvZGVyICkge1xuXG5cdFx0XHR0aGlzLm1lc2hvcHREZWNvZGVyID0gbWVzaG9wdERlY29kZXI7XG5cdFx0XHRyZXR1cm4gdGhpcztcblxuXHRcdH0sXG5cblx0XHRyZWdpc3RlcjogZnVuY3Rpb24gKCBjYWxsYmFjayApIHtcblxuXHRcdFx0aWYgKCB0aGlzLnBsdWdpbkNhbGxiYWNrcy5pbmRleE9mKCBjYWxsYmFjayApID09PSAtIDEgKSB7XG5cblx0XHRcdFx0dGhpcy5wbHVnaW5DYWxsYmFja3MucHVzaCggY2FsbGJhY2sgKTtcblxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gdGhpcztcblxuXHRcdH0sXG5cblx0XHR1bnJlZ2lzdGVyOiBmdW5jdGlvbiAoIGNhbGxiYWNrICkge1xuXG5cdFx0XHRpZiAoIHRoaXMucGx1Z2luQ2FsbGJhY2tzLmluZGV4T2YoIGNhbGxiYWNrICkgIT09IC0gMSApIHtcblxuXHRcdFx0XHR0aGlzLnBsdWdpbkNhbGxiYWNrcy5zcGxpY2UoIHRoaXMucGx1Z2luQ2FsbGJhY2tzLmluZGV4T2YoIGNhbGxiYWNrICksIDEgKTtcblxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gdGhpcztcblxuXHRcdH0sXG5cblx0XHRwYXJzZTogZnVuY3Rpb24gKCBkYXRhLCBwYXRoLCBvbkxvYWQsIG9uRXJyb3IgKSB7XG5cblx0XHRcdHZhciBjb250ZW50O1xuXHRcdFx0dmFyIGV4dGVuc2lvbnMgPSB7fTtcblx0XHRcdHZhciBwbHVnaW5zID0ge307XG5cblx0XHRcdGlmICggdHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnICkge1xuXG5cdFx0XHRcdGNvbnRlbnQgPSBkYXRhO1xuXG5cdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdHZhciBtYWdpYyA9IExvYWRlclV0aWxzLmRlY29kZVRleHQoIG5ldyBVaW50OEFycmF5KCBkYXRhLCAwLCA0ICkgKTtcblxuXHRcdFx0XHRpZiAoIG1hZ2ljID09PSBCSU5BUllfRVhURU5TSU9OX0hFQURFUl9NQUdJQyApIHtcblxuXHRcdFx0XHRcdHRyeSB7XG5cblx0XHRcdFx0XHRcdGV4dGVuc2lvbnNbIEVYVEVOU0lPTlMuS0hSX0JJTkFSWV9HTFRGIF0gPSBuZXcgR0xURkJpbmFyeUV4dGVuc2lvbiggZGF0YSApO1xuXG5cdFx0XHRcdFx0fSBjYXRjaCAoIGVycm9yICkge1xuXG5cdFx0XHRcdFx0XHRpZiAoIG9uRXJyb3IgKSBvbkVycm9yKCBlcnJvciApO1xuXHRcdFx0XHRcdFx0cmV0dXJuO1xuXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Y29udGVudCA9IGV4dGVuc2lvbnNbIEVYVEVOU0lPTlMuS0hSX0JJTkFSWV9HTFRGIF0uY29udGVudDtcblxuXHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0Y29udGVudCA9IExvYWRlclV0aWxzLmRlY29kZVRleHQoIG5ldyBVaW50OEFycmF5KCBkYXRhICkgKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdH1cblxuXHRcdFx0dmFyIGpzb24gPSBKU09OLnBhcnNlKCBjb250ZW50ICk7XG5cblx0XHRcdGlmICgganNvbi5hc3NldCA9PT0gdW5kZWZpbmVkIHx8IGpzb24uYXNzZXQudmVyc2lvblsgMCBdIDwgMiApIHtcblxuXHRcdFx0XHRpZiAoIG9uRXJyb3IgKSBvbkVycm9yKCBuZXcgRXJyb3IoICdUSFJFRS5HTFRGTG9hZGVyOiBVbnN1cHBvcnRlZCBhc3NldC4gZ2xURiB2ZXJzaW9ucyA+PTIuMCBhcmUgc3VwcG9ydGVkLicgKSApO1xuXHRcdFx0XHRyZXR1cm47XG5cblx0XHRcdH1cblxuXHRcdFx0dmFyIHBhcnNlciA9IG5ldyBHTFRGUGFyc2VyKCBqc29uLCB7XG5cblx0XHRcdFx0cGF0aDogcGF0aCB8fCB0aGlzLnJlc291cmNlUGF0aCB8fCAnJyxcblx0XHRcdFx0Y3Jvc3NPcmlnaW46IHRoaXMuY3Jvc3NPcmlnaW4sXG5cdFx0XHRcdHJlcXVlc3RIZWFkZXI6IHRoaXMucmVxdWVzdEhlYWRlcixcblx0XHRcdFx0bWFuYWdlcjogdGhpcy5tYW5hZ2VyLFxuXHRcdFx0XHRrdHgyTG9hZGVyOiB0aGlzLmt0eDJMb2FkZXIsXG5cdFx0XHRcdG1lc2hvcHREZWNvZGVyOiB0aGlzLm1lc2hvcHREZWNvZGVyXG5cblx0XHRcdH0gKTtcblxuXHRcdFx0cGFyc2VyLmZpbGVMb2FkZXIuc2V0UmVxdWVzdEhlYWRlciggdGhpcy5yZXF1ZXN0SGVhZGVyICk7XG5cblx0XHRcdGZvciAoIHZhciBpID0gMDsgaSA8IHRoaXMucGx1Z2luQ2FsbGJhY2tzLmxlbmd0aDsgaSArKyApIHtcblxuXHRcdFx0XHR2YXIgcGx1Z2luID0gdGhpcy5wbHVnaW5DYWxsYmFja3NbIGkgXSggcGFyc2VyICk7XG5cdFx0XHRcdHBsdWdpbnNbIHBsdWdpbi5uYW1lIF0gPSBwbHVnaW47XG5cblx0XHRcdFx0Ly8gV29ya2Fyb3VuZCB0byBhdm9pZCBkZXRlcm1pbmluZyBhcyB1bmtub3duIGV4dGVuc2lvblxuXHRcdFx0XHQvLyBpbiBhZGRVbmtub3duRXh0ZW5zaW9uc1RvVXNlckRhdGEoKS5cblx0XHRcdFx0Ly8gUmVtb3ZlIHRoaXMgd29ya2Fyb3VuZCBpZiB3ZSBtb3ZlIGFsbCB0aGUgZXhpc3Rpbmdcblx0XHRcdFx0Ly8gZXh0ZW5zaW9uIGhhbmRsZXJzIHRvIHBsdWdpbiBzeXN0ZW1cblx0XHRcdFx0ZXh0ZW5zaW9uc1sgcGx1Z2luLm5hbWUgXSA9IHRydWU7XG5cblx0XHRcdH1cblxuXHRcdFx0aWYgKCBqc29uLmV4dGVuc2lvbnNVc2VkICkge1xuXG5cdFx0XHRcdGZvciAoIHZhciBpID0gMDsgaSA8IGpzb24uZXh0ZW5zaW9uc1VzZWQubGVuZ3RoOyArKyBpICkge1xuXG5cdFx0XHRcdFx0dmFyIGV4dGVuc2lvbk5hbWUgPSBqc29uLmV4dGVuc2lvbnNVc2VkWyBpIF07XG5cdFx0XHRcdFx0dmFyIGV4dGVuc2lvbnNSZXF1aXJlZCA9IGpzb24uZXh0ZW5zaW9uc1JlcXVpcmVkIHx8IFtdO1xuXG5cdFx0XHRcdFx0c3dpdGNoICggZXh0ZW5zaW9uTmFtZSApIHtcblxuXHRcdFx0XHRcdFx0Y2FzZSBFWFRFTlNJT05TLktIUl9NQVRFUklBTFNfVU5MSVQ6XG5cdFx0XHRcdFx0XHRcdGV4dGVuc2lvbnNbIGV4dGVuc2lvbk5hbWUgXSA9IG5ldyBHTFRGTWF0ZXJpYWxzVW5saXRFeHRlbnNpb24oKTtcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRcdGNhc2UgRVhURU5TSU9OUy5LSFJfTUFURVJJQUxTX1BCUl9TUEVDVUxBUl9HTE9TU0lORVNTOlxuXHRcdFx0XHRcdFx0XHRleHRlbnNpb25zWyBleHRlbnNpb25OYW1lIF0gPSBuZXcgR0xURk1hdGVyaWFsc1BiclNwZWN1bGFyR2xvc3NpbmVzc0V4dGVuc2lvbigpO1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdFx0Y2FzZSBFWFRFTlNJT05TLktIUl9EUkFDT19NRVNIX0NPTVBSRVNTSU9OOlxuXHRcdFx0XHRcdFx0XHRleHRlbnNpb25zWyBleHRlbnNpb25OYW1lIF0gPSBuZXcgR0xURkRyYWNvTWVzaENvbXByZXNzaW9uRXh0ZW5zaW9uKCBqc29uLCB0aGlzLmRyYWNvTG9hZGVyICk7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0XHRjYXNlIEVYVEVOU0lPTlMuS0hSX1RFWFRVUkVfVFJBTlNGT1JNOlxuXHRcdFx0XHRcdFx0XHRleHRlbnNpb25zWyBleHRlbnNpb25OYW1lIF0gPSBuZXcgR0xURlRleHR1cmVUcmFuc2Zvcm1FeHRlbnNpb24oKTtcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRcdGNhc2UgRVhURU5TSU9OUy5LSFJfTUVTSF9RVUFOVElaQVRJT046XG5cdFx0XHRcdFx0XHRcdGV4dGVuc2lvbnNbIGV4dGVuc2lvbk5hbWUgXSA9IG5ldyBHTFRGTWVzaFF1YW50aXphdGlvbkV4dGVuc2lvbigpO1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdFx0ZGVmYXVsdDpcblxuXHRcdFx0XHRcdFx0XHRpZiAoIGV4dGVuc2lvbnNSZXF1aXJlZC5pbmRleE9mKCBleHRlbnNpb25OYW1lICkgPj0gMCAmJiBwbHVnaW5zWyBleHRlbnNpb25OYW1lIF0gPT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0XHRcdFx0XHRcdGNvbnNvbGUud2FybiggJ1RIUkVFLkdMVEZMb2FkZXI6IFVua25vd24gZXh0ZW5zaW9uIFwiJyArIGV4dGVuc2lvbk5hbWUgKyAnXCIuJyApO1xuXG5cdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHR9XG5cblx0XHRcdH1cblxuXHRcdFx0cGFyc2VyLnNldEV4dGVuc2lvbnMoIGV4dGVuc2lvbnMgKTtcblx0XHRcdHBhcnNlci5zZXRQbHVnaW5zKCBwbHVnaW5zICk7XG5cdFx0XHRwYXJzZXIucGFyc2UoIG9uTG9hZCwgb25FcnJvciApO1xuXG5cdFx0fVxuXG5cdH0gKTtcblxuXHQvKiBHTFRGUkVHSVNUUlkgKi9cblxuXHRmdW5jdGlvbiBHTFRGUmVnaXN0cnkoKSB7XG5cblx0XHR2YXIgb2JqZWN0cyA9IHt9O1xuXG5cdFx0cmV0dXJuXHR7XG5cblx0XHRcdGdldDogZnVuY3Rpb24gKCBrZXkgKSB7XG5cblx0XHRcdFx0cmV0dXJuIG9iamVjdHNbIGtleSBdO1xuXG5cdFx0XHR9LFxuXG5cdFx0XHRhZGQ6IGZ1bmN0aW9uICgga2V5LCBvYmplY3QgKSB7XG5cblx0XHRcdFx0b2JqZWN0c1sga2V5IF0gPSBvYmplY3Q7XG5cblx0XHRcdH0sXG5cblx0XHRcdHJlbW92ZTogZnVuY3Rpb24gKCBrZXkgKSB7XG5cblx0XHRcdFx0ZGVsZXRlIG9iamVjdHNbIGtleSBdO1xuXG5cdFx0XHR9LFxuXG5cdFx0XHRyZW1vdmVBbGw6IGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0XHRvYmplY3RzID0ge307XG5cblx0XHRcdH1cblxuXHRcdH07XG5cblx0fVxuXG5cdC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cdC8qKioqKioqKioqIEVYVEVOU0lPTlMgKioqKioqKioqKiovXG5cdC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cblx0dmFyIEVYVEVOU0lPTlMgPSB7XG5cdFx0S0hSX0JJTkFSWV9HTFRGOiAnS0hSX2JpbmFyeV9nbFRGJyxcblx0XHRLSFJfRFJBQ09fTUVTSF9DT01QUkVTU0lPTjogJ0tIUl9kcmFjb19tZXNoX2NvbXByZXNzaW9uJyxcblx0XHRLSFJfTElHSFRTX1BVTkNUVUFMOiAnS0hSX2xpZ2h0c19wdW5jdHVhbCcsXG5cdFx0S0hSX01BVEVSSUFMU19DTEVBUkNPQVQ6ICdLSFJfbWF0ZXJpYWxzX2NsZWFyY29hdCcsXG5cdFx0S0hSX01BVEVSSUFMU19QQlJfU1BFQ1VMQVJfR0xPU1NJTkVTUzogJ0tIUl9tYXRlcmlhbHNfcGJyU3BlY3VsYXJHbG9zc2luZXNzJyxcblx0XHRLSFJfTUFURVJJQUxTX1RSQU5TTUlTU0lPTjogJ0tIUl9tYXRlcmlhbHNfdHJhbnNtaXNzaW9uJyxcblx0XHRLSFJfTUFURVJJQUxTX1VOTElUOiAnS0hSX21hdGVyaWFsc191bmxpdCcsXG5cdFx0S0hSX1RFWFRVUkVfQkFTSVNVOiAnS0hSX3RleHR1cmVfYmFzaXN1Jyxcblx0XHRLSFJfVEVYVFVSRV9UUkFOU0ZPUk06ICdLSFJfdGV4dHVyZV90cmFuc2Zvcm0nLFxuXHRcdEtIUl9NRVNIX1FVQU5USVpBVElPTjogJ0tIUl9tZXNoX3F1YW50aXphdGlvbicsXG5cdFx0RVhUX1RFWFRVUkVfV0VCUDogJ0VYVF90ZXh0dXJlX3dlYnAnLFxuXHRcdEVYVF9NRVNIT1BUX0NPTVBSRVNTSU9OOiAnRVhUX21lc2hvcHRfY29tcHJlc3Npb24nXG5cdH07XG5cblx0LyoqXG5cdCAqIFB1bmN0dWFsIExpZ2h0cyBFeHRlbnNpb25cblx0ICpcblx0ICogU3BlY2lmaWNhdGlvbjogaHR0cHM6Ly9naXRodWIuY29tL0tocm9ub3NHcm91cC9nbFRGL3RyZWUvbWFzdGVyL2V4dGVuc2lvbnMvMi4wL0tocm9ub3MvS0hSX2xpZ2h0c19wdW5jdHVhbFxuXHQgKi9cblx0ZnVuY3Rpb24gR0xURkxpZ2h0c0V4dGVuc2lvbiggcGFyc2VyICkge1xuXG5cdFx0dGhpcy5wYXJzZXIgPSBwYXJzZXI7XG5cdFx0dGhpcy5uYW1lID0gRVhURU5TSU9OUy5LSFJfTElHSFRTX1BVTkNUVUFMO1xuXG5cdFx0Ly8gT2JqZWN0M0QgaW5zdGFuY2UgY2FjaGVzXG5cdFx0dGhpcy5jYWNoZSA9IHsgcmVmczoge30sIHVzZXM6IHt9IH07XG5cblx0fVxuXG5cdEdMVEZMaWdodHNFeHRlbnNpb24ucHJvdG90eXBlLl9tYXJrRGVmcyA9IGZ1bmN0aW9uICgpIHtcblxuXHRcdHZhciBwYXJzZXIgPSB0aGlzLnBhcnNlcjtcblx0XHR2YXIgbm9kZURlZnMgPSB0aGlzLnBhcnNlci5qc29uLm5vZGVzIHx8IFtdO1xuXG5cdFx0Zm9yICggdmFyIG5vZGVJbmRleCA9IDAsIG5vZGVMZW5ndGggPSBub2RlRGVmcy5sZW5ndGg7IG5vZGVJbmRleCA8IG5vZGVMZW5ndGg7IG5vZGVJbmRleCArKyApIHtcblxuXHRcdFx0dmFyIG5vZGVEZWYgPSBub2RlRGVmc1sgbm9kZUluZGV4IF07XG5cblx0XHRcdGlmICggbm9kZURlZi5leHRlbnNpb25zXG5cdFx0XHRcdCYmIG5vZGVEZWYuZXh0ZW5zaW9uc1sgdGhpcy5uYW1lIF1cblx0XHRcdFx0JiYgbm9kZURlZi5leHRlbnNpb25zWyB0aGlzLm5hbWUgXS5saWdodCAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRcdHBhcnNlci5fYWRkTm9kZVJlZiggdGhpcy5jYWNoZSwgbm9kZURlZi5leHRlbnNpb25zWyB0aGlzLm5hbWUgXS5saWdodCApO1xuXG5cdFx0XHR9XG5cblx0XHR9XG5cblx0fTtcblxuXHRHTFRGTGlnaHRzRXh0ZW5zaW9uLnByb3RvdHlwZS5fbG9hZExpZ2h0ID0gZnVuY3Rpb24gKCBsaWdodEluZGV4ICkge1xuXG5cdFx0dmFyIHBhcnNlciA9IHRoaXMucGFyc2VyO1xuXHRcdHZhciBjYWNoZUtleSA9ICdsaWdodDonICsgbGlnaHRJbmRleDtcblx0XHR2YXIgZGVwZW5kZW5jeSA9IHBhcnNlci5jYWNoZS5nZXQoIGNhY2hlS2V5ICk7XG5cblx0XHRpZiAoIGRlcGVuZGVuY3kgKSByZXR1cm4gZGVwZW5kZW5jeTtcblxuXHRcdHZhciBqc29uID0gcGFyc2VyLmpzb247XG5cdFx0dmFyIGV4dGVuc2lvbnMgPSAoIGpzb24uZXh0ZW5zaW9ucyAmJiBqc29uLmV4dGVuc2lvbnNbIHRoaXMubmFtZSBdICkgfHwge307XG5cdFx0dmFyIGxpZ2h0RGVmcyA9IGV4dGVuc2lvbnMubGlnaHRzIHx8IFtdO1xuXHRcdHZhciBsaWdodERlZiA9IGxpZ2h0RGVmc1sgbGlnaHRJbmRleCBdO1xuXHRcdHZhciBsaWdodE5vZGU7XG5cblx0XHR2YXIgY29sb3IgPSBuZXcgQ29sb3IoIDB4ZmZmZmZmICk7XG5cblx0XHRpZiAoIGxpZ2h0RGVmLmNvbG9yICE9PSB1bmRlZmluZWQgKSBjb2xvci5mcm9tQXJyYXkoIGxpZ2h0RGVmLmNvbG9yICk7XG5cblx0XHR2YXIgcmFuZ2UgPSBsaWdodERlZi5yYW5nZSAhPT0gdW5kZWZpbmVkID8gbGlnaHREZWYucmFuZ2UgOiAwO1xuXG5cdFx0c3dpdGNoICggbGlnaHREZWYudHlwZSApIHtcblxuXHRcdFx0Y2FzZSAnZGlyZWN0aW9uYWwnOlxuXHRcdFx0XHRsaWdodE5vZGUgPSBuZXcgRGlyZWN0aW9uYWxMaWdodCggY29sb3IgKTtcblx0XHRcdFx0bGlnaHROb2RlLnRhcmdldC5wb3NpdGlvbi5zZXQoIDAsIDAsIC0gMSApO1xuXHRcdFx0XHRsaWdodE5vZGUuYWRkKCBsaWdodE5vZGUudGFyZ2V0ICk7XG5cdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRjYXNlICdwb2ludCc6XG5cdFx0XHRcdGxpZ2h0Tm9kZSA9IG5ldyBQb2ludExpZ2h0KCBjb2xvciApO1xuXHRcdFx0XHRsaWdodE5vZGUuZGlzdGFuY2UgPSByYW5nZTtcblx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdGNhc2UgJ3Nwb3QnOlxuXHRcdFx0XHRsaWdodE5vZGUgPSBuZXcgU3BvdExpZ2h0KCBjb2xvciApO1xuXHRcdFx0XHRsaWdodE5vZGUuZGlzdGFuY2UgPSByYW5nZTtcblx0XHRcdFx0Ly8gSGFuZGxlIHNwb3RsaWdodCBwcm9wZXJ0aWVzLlxuXHRcdFx0XHRsaWdodERlZi5zcG90ID0gbGlnaHREZWYuc3BvdCB8fCB7fTtcblx0XHRcdFx0bGlnaHREZWYuc3BvdC5pbm5lckNvbmVBbmdsZSA9IGxpZ2h0RGVmLnNwb3QuaW5uZXJDb25lQW5nbGUgIT09IHVuZGVmaW5lZCA/IGxpZ2h0RGVmLnNwb3QuaW5uZXJDb25lQW5nbGUgOiAwO1xuXHRcdFx0XHRsaWdodERlZi5zcG90Lm91dGVyQ29uZUFuZ2xlID0gbGlnaHREZWYuc3BvdC5vdXRlckNvbmVBbmdsZSAhPT0gdW5kZWZpbmVkID8gbGlnaHREZWYuc3BvdC5vdXRlckNvbmVBbmdsZSA6IE1hdGguUEkgLyA0LjA7XG5cdFx0XHRcdGxpZ2h0Tm9kZS5hbmdsZSA9IGxpZ2h0RGVmLnNwb3Qub3V0ZXJDb25lQW5nbGU7XG5cdFx0XHRcdGxpZ2h0Tm9kZS5wZW51bWJyYSA9IDEuMCAtIGxpZ2h0RGVmLnNwb3QuaW5uZXJDb25lQW5nbGUgLyBsaWdodERlZi5zcG90Lm91dGVyQ29uZUFuZ2xlO1xuXHRcdFx0XHRsaWdodE5vZGUudGFyZ2V0LnBvc2l0aW9uLnNldCggMCwgMCwgLSAxICk7XG5cdFx0XHRcdGxpZ2h0Tm9kZS5hZGQoIGxpZ2h0Tm9kZS50YXJnZXQgKTtcblx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdHRocm93IG5ldyBFcnJvciggJ1RIUkVFLkdMVEZMb2FkZXI6IFVuZXhwZWN0ZWQgbGlnaHQgdHlwZTogJyArIGxpZ2h0RGVmLnR5cGUgKTtcblxuXHRcdH1cblxuXHRcdC8vIFNvbWUgbGlnaHRzIChlLmcuIHNwb3QpIGRlZmF1bHQgdG8gYSBwb3NpdGlvbiBvdGhlciB0aGFuIHRoZSBvcmlnaW4uIFJlc2V0IHRoZSBwb3NpdGlvblxuXHRcdC8vIGhlcmUsIGJlY2F1c2Ugbm9kZS1sZXZlbCBwYXJzaW5nIHdpbGwgb25seSBvdmVycmlkZSBwb3NpdGlvbiBpZiBleHBsaWNpdGx5IHNwZWNpZmllZC5cblx0XHRsaWdodE5vZGUucG9zaXRpb24uc2V0KCAwLCAwLCAwICk7XG5cblx0XHRsaWdodE5vZGUuZGVjYXkgPSAyO1xuXG5cdFx0aWYgKCBsaWdodERlZi5pbnRlbnNpdHkgIT09IHVuZGVmaW5lZCApIGxpZ2h0Tm9kZS5pbnRlbnNpdHkgPSBsaWdodERlZi5pbnRlbnNpdHk7XG5cblx0XHRsaWdodE5vZGUubmFtZSA9IHBhcnNlci5jcmVhdGVVbmlxdWVOYW1lKCBsaWdodERlZi5uYW1lIHx8ICggJ2xpZ2h0XycgKyBsaWdodEluZGV4ICkgKTtcblxuXHRcdGRlcGVuZGVuY3kgPSBQcm9taXNlLnJlc29sdmUoIGxpZ2h0Tm9kZSApO1xuXG5cdFx0cGFyc2VyLmNhY2hlLmFkZCggY2FjaGVLZXksIGRlcGVuZGVuY3kgKTtcblxuXHRcdHJldHVybiBkZXBlbmRlbmN5O1xuXG5cdH07XG5cblx0R0xURkxpZ2h0c0V4dGVuc2lvbi5wcm90b3R5cGUuY3JlYXRlTm9kZUF0dGFjaG1lbnQgPSBmdW5jdGlvbiAoIG5vZGVJbmRleCApIHtcblxuXHRcdHZhciBzZWxmID0gdGhpcztcblx0XHR2YXIgcGFyc2VyID0gdGhpcy5wYXJzZXI7XG5cdFx0dmFyIGpzb24gPSBwYXJzZXIuanNvbjtcblx0XHR2YXIgbm9kZURlZiA9IGpzb24ubm9kZXNbIG5vZGVJbmRleCBdO1xuXHRcdHZhciBsaWdodERlZiA9ICggbm9kZURlZi5leHRlbnNpb25zICYmIG5vZGVEZWYuZXh0ZW5zaW9uc1sgdGhpcy5uYW1lIF0gKSB8fCB7fTtcblx0XHR2YXIgbGlnaHRJbmRleCA9IGxpZ2h0RGVmLmxpZ2h0O1xuXG5cdFx0aWYgKCBsaWdodEluZGV4ID09PSB1bmRlZmluZWQgKSByZXR1cm4gbnVsbDtcblxuXHRcdHJldHVybiB0aGlzLl9sb2FkTGlnaHQoIGxpZ2h0SW5kZXggKS50aGVuKCBmdW5jdGlvbiAoIGxpZ2h0ICkge1xuXG5cdFx0XHRyZXR1cm4gcGFyc2VyLl9nZXROb2RlUmVmKCBzZWxmLmNhY2hlLCBsaWdodEluZGV4LCBsaWdodCApO1xuXG5cdFx0fSApO1xuXG5cdH07XG5cblx0LyoqXG5cdCAqIFVubGl0IE1hdGVyaWFscyBFeHRlbnNpb25cblx0ICpcblx0ICogU3BlY2lmaWNhdGlvbjogaHR0cHM6Ly9naXRodWIuY29tL0tocm9ub3NHcm91cC9nbFRGL3RyZWUvbWFzdGVyL2V4dGVuc2lvbnMvMi4wL0tocm9ub3MvS0hSX21hdGVyaWFsc191bmxpdFxuXHQgKi9cblx0ZnVuY3Rpb24gR0xURk1hdGVyaWFsc1VubGl0RXh0ZW5zaW9uKCkge1xuXG5cdFx0dGhpcy5uYW1lID0gRVhURU5TSU9OUy5LSFJfTUFURVJJQUxTX1VOTElUO1xuXG5cdH1cblxuXHRHTFRGTWF0ZXJpYWxzVW5saXRFeHRlbnNpb24ucHJvdG90eXBlLmdldE1hdGVyaWFsVHlwZSA9IGZ1bmN0aW9uICgpIHtcblxuXHRcdHJldHVybiBNZXNoQmFzaWNNYXRlcmlhbDtcblxuXHR9O1xuXG5cdEdMVEZNYXRlcmlhbHNVbmxpdEV4dGVuc2lvbi5wcm90b3R5cGUuZXh0ZW5kUGFyYW1zID0gZnVuY3Rpb24gKCBtYXRlcmlhbFBhcmFtcywgbWF0ZXJpYWxEZWYsIHBhcnNlciApIHtcblxuXHRcdHZhciBwZW5kaW5nID0gW107XG5cblx0XHRtYXRlcmlhbFBhcmFtcy5jb2xvciA9IG5ldyBDb2xvciggMS4wLCAxLjAsIDEuMCApO1xuXHRcdG1hdGVyaWFsUGFyYW1zLm9wYWNpdHkgPSAxLjA7XG5cblx0XHR2YXIgbWV0YWxsaWNSb3VnaG5lc3MgPSBtYXRlcmlhbERlZi5wYnJNZXRhbGxpY1JvdWdobmVzcztcblxuXHRcdGlmICggbWV0YWxsaWNSb3VnaG5lc3MgKSB7XG5cblx0XHRcdGlmICggQXJyYXkuaXNBcnJheSggbWV0YWxsaWNSb3VnaG5lc3MuYmFzZUNvbG9yRmFjdG9yICkgKSB7XG5cblx0XHRcdFx0dmFyIGFycmF5ID0gbWV0YWxsaWNSb3VnaG5lc3MuYmFzZUNvbG9yRmFjdG9yO1xuXG5cdFx0XHRcdG1hdGVyaWFsUGFyYW1zLmNvbG9yLmZyb21BcnJheSggYXJyYXkgKTtcblx0XHRcdFx0bWF0ZXJpYWxQYXJhbXMub3BhY2l0eSA9IGFycmF5WyAzIF07XG5cblx0XHRcdH1cblxuXHRcdFx0aWYgKCBtZXRhbGxpY1JvdWdobmVzcy5iYXNlQ29sb3JUZXh0dXJlICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0cGVuZGluZy5wdXNoKCBwYXJzZXIuYXNzaWduVGV4dHVyZSggbWF0ZXJpYWxQYXJhbXMsICdtYXAnLCBtZXRhbGxpY1JvdWdobmVzcy5iYXNlQ29sb3JUZXh0dXJlICkgKTtcblxuXHRcdFx0fVxuXG5cdFx0fVxuXG5cdFx0cmV0dXJuIFByb21pc2UuYWxsKCBwZW5kaW5nICk7XG5cblx0fTtcblxuXHQvKipcblx0ICogQ2xlYXJjb2F0IE1hdGVyaWFscyBFeHRlbnNpb25cblx0ICpcblx0ICogU3BlY2lmaWNhdGlvbjogaHR0cHM6Ly9naXRodWIuY29tL0tocm9ub3NHcm91cC9nbFRGL3RyZWUvbWFzdGVyL2V4dGVuc2lvbnMvMi4wL0tocm9ub3MvS0hSX21hdGVyaWFsc19jbGVhcmNvYXRcblx0ICovXG5cdGZ1bmN0aW9uIEdMVEZNYXRlcmlhbHNDbGVhcmNvYXRFeHRlbnNpb24oIHBhcnNlciApIHtcblxuXHRcdHRoaXMucGFyc2VyID0gcGFyc2VyO1xuXHRcdHRoaXMubmFtZSA9IEVYVEVOU0lPTlMuS0hSX01BVEVSSUFMU19DTEVBUkNPQVQ7XG5cblx0fVxuXG5cdEdMVEZNYXRlcmlhbHNDbGVhcmNvYXRFeHRlbnNpb24ucHJvdG90eXBlLmdldE1hdGVyaWFsVHlwZSA9IGZ1bmN0aW9uICggbWF0ZXJpYWxJbmRleCApIHtcblxuXHRcdHZhciBwYXJzZXIgPSB0aGlzLnBhcnNlcjtcblx0XHR2YXIgbWF0ZXJpYWxEZWYgPSBwYXJzZXIuanNvbi5tYXRlcmlhbHNbIG1hdGVyaWFsSW5kZXggXTtcblxuXHRcdGlmICggISBtYXRlcmlhbERlZi5leHRlbnNpb25zIHx8ICEgbWF0ZXJpYWxEZWYuZXh0ZW5zaW9uc1sgdGhpcy5uYW1lIF0gKSByZXR1cm4gbnVsbDtcblxuXHRcdHJldHVybiBNZXNoUGh5c2ljYWxNYXRlcmlhbDtcblxuXHR9O1xuXG5cdEdMVEZNYXRlcmlhbHNDbGVhcmNvYXRFeHRlbnNpb24ucHJvdG90eXBlLmV4dGVuZE1hdGVyaWFsUGFyYW1zID0gZnVuY3Rpb24gKCBtYXRlcmlhbEluZGV4LCBtYXRlcmlhbFBhcmFtcyApIHtcblxuXHRcdHZhciBwYXJzZXIgPSB0aGlzLnBhcnNlcjtcblx0XHR2YXIgbWF0ZXJpYWxEZWYgPSBwYXJzZXIuanNvbi5tYXRlcmlhbHNbIG1hdGVyaWFsSW5kZXggXTtcblxuXHRcdGlmICggISBtYXRlcmlhbERlZi5leHRlbnNpb25zIHx8ICEgbWF0ZXJpYWxEZWYuZXh0ZW5zaW9uc1sgdGhpcy5uYW1lIF0gKSB7XG5cblx0XHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcblxuXHRcdH1cblxuXHRcdHZhciBwZW5kaW5nID0gW107XG5cblx0XHR2YXIgZXh0ZW5zaW9uID0gbWF0ZXJpYWxEZWYuZXh0ZW5zaW9uc1sgdGhpcy5uYW1lIF07XG5cblx0XHRpZiAoIGV4dGVuc2lvbi5jbGVhcmNvYXRGYWN0b3IgIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0bWF0ZXJpYWxQYXJhbXMuY2xlYXJjb2F0ID0gZXh0ZW5zaW9uLmNsZWFyY29hdEZhY3RvcjtcblxuXHRcdH1cblxuXHRcdGlmICggZXh0ZW5zaW9uLmNsZWFyY29hdFRleHR1cmUgIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0cGVuZGluZy5wdXNoKCBwYXJzZXIuYXNzaWduVGV4dHVyZSggbWF0ZXJpYWxQYXJhbXMsICdjbGVhcmNvYXRNYXAnLCBleHRlbnNpb24uY2xlYXJjb2F0VGV4dHVyZSApICk7XG5cblx0XHR9XG5cblx0XHRpZiAoIGV4dGVuc2lvbi5jbGVhcmNvYXRSb3VnaG5lc3NGYWN0b3IgIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0bWF0ZXJpYWxQYXJhbXMuY2xlYXJjb2F0Um91Z2huZXNzID0gZXh0ZW5zaW9uLmNsZWFyY29hdFJvdWdobmVzc0ZhY3RvcjtcblxuXHRcdH1cblxuXHRcdGlmICggZXh0ZW5zaW9uLmNsZWFyY29hdFJvdWdobmVzc1RleHR1cmUgIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0cGVuZGluZy5wdXNoKCBwYXJzZXIuYXNzaWduVGV4dHVyZSggbWF0ZXJpYWxQYXJhbXMsICdjbGVhcmNvYXRSb3VnaG5lc3NNYXAnLCBleHRlbnNpb24uY2xlYXJjb2F0Um91Z2huZXNzVGV4dHVyZSApICk7XG5cblx0XHR9XG5cblx0XHRpZiAoIGV4dGVuc2lvbi5jbGVhcmNvYXROb3JtYWxUZXh0dXJlICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdHBlbmRpbmcucHVzaCggcGFyc2VyLmFzc2lnblRleHR1cmUoIG1hdGVyaWFsUGFyYW1zLCAnY2xlYXJjb2F0Tm9ybWFsTWFwJywgZXh0ZW5zaW9uLmNsZWFyY29hdE5vcm1hbFRleHR1cmUgKSApO1xuXG5cdFx0XHRpZiAoIGV4dGVuc2lvbi5jbGVhcmNvYXROb3JtYWxUZXh0dXJlLnNjYWxlICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0dmFyIHNjYWxlID0gZXh0ZW5zaW9uLmNsZWFyY29hdE5vcm1hbFRleHR1cmUuc2NhbGU7XG5cblx0XHRcdFx0Ly8gaHR0cHM6Ly9naXRodWIuY29tL21yZG9vYi90aHJlZS5qcy9pc3N1ZXMvMTE0MzgjaXNzdWVjb21tZW50LTUwNzAwMzk5NVxuXHRcdFx0XHRtYXRlcmlhbFBhcmFtcy5jbGVhcmNvYXROb3JtYWxTY2FsZSA9IG5ldyBWZWN0b3IyKCBzY2FsZSwgLSBzY2FsZSApO1xuXG5cdFx0XHR9XG5cblx0XHR9XG5cblx0XHRyZXR1cm4gUHJvbWlzZS5hbGwoIHBlbmRpbmcgKTtcblxuXHR9O1xuXG5cdC8qKlxuXHQgKiBUcmFuc21pc3Npb24gTWF0ZXJpYWxzIEV4dGVuc2lvblxuXHQgKlxuXHQgKiBTcGVjaWZpY2F0aW9uOiBodHRwczovL2dpdGh1Yi5jb20vS2hyb25vc0dyb3VwL2dsVEYvdHJlZS9tYXN0ZXIvZXh0ZW5zaW9ucy8yLjAvS2hyb25vcy9LSFJfbWF0ZXJpYWxzX3RyYW5zbWlzc2lvblxuXHQgKiBEcmFmdDogaHR0cHM6Ly9naXRodWIuY29tL0tocm9ub3NHcm91cC9nbFRGL3B1bGwvMTY5OFxuXHQgKi9cblx0ZnVuY3Rpb24gR0xURk1hdGVyaWFsc1RyYW5zbWlzc2lvbkV4dGVuc2lvbiggcGFyc2VyICkge1xuXG5cdFx0dGhpcy5wYXJzZXIgPSBwYXJzZXI7XG5cdFx0dGhpcy5uYW1lID0gRVhURU5TSU9OUy5LSFJfTUFURVJJQUxTX1RSQU5TTUlTU0lPTjtcblxuXHR9XG5cblx0R0xURk1hdGVyaWFsc1RyYW5zbWlzc2lvbkV4dGVuc2lvbi5wcm90b3R5cGUuZ2V0TWF0ZXJpYWxUeXBlID0gZnVuY3Rpb24gKCBtYXRlcmlhbEluZGV4ICkge1xuXG5cdFx0dmFyIHBhcnNlciA9IHRoaXMucGFyc2VyO1xuXHRcdHZhciBtYXRlcmlhbERlZiA9IHBhcnNlci5qc29uLm1hdGVyaWFsc1sgbWF0ZXJpYWxJbmRleCBdO1xuXG5cdFx0aWYgKCAhIG1hdGVyaWFsRGVmLmV4dGVuc2lvbnMgfHwgISBtYXRlcmlhbERlZi5leHRlbnNpb25zWyB0aGlzLm5hbWUgXSApIHJldHVybiBudWxsO1xuXG5cdFx0cmV0dXJuIE1lc2hQaHlzaWNhbE1hdGVyaWFsO1xuXG5cdH07XG5cblx0R0xURk1hdGVyaWFsc1RyYW5zbWlzc2lvbkV4dGVuc2lvbi5wcm90b3R5cGUuZXh0ZW5kTWF0ZXJpYWxQYXJhbXMgPSBmdW5jdGlvbiAoIG1hdGVyaWFsSW5kZXgsIG1hdGVyaWFsUGFyYW1zICkge1xuXG5cdFx0dmFyIHBhcnNlciA9IHRoaXMucGFyc2VyO1xuXHRcdHZhciBtYXRlcmlhbERlZiA9IHBhcnNlci5qc29uLm1hdGVyaWFsc1sgbWF0ZXJpYWxJbmRleCBdO1xuXG5cdFx0aWYgKCAhIG1hdGVyaWFsRGVmLmV4dGVuc2lvbnMgfHwgISBtYXRlcmlhbERlZi5leHRlbnNpb25zWyB0aGlzLm5hbWUgXSApIHtcblxuXHRcdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuXG5cdFx0fVxuXG5cdFx0dmFyIHBlbmRpbmcgPSBbXTtcblxuXHRcdHZhciBleHRlbnNpb24gPSBtYXRlcmlhbERlZi5leHRlbnNpb25zWyB0aGlzLm5hbWUgXTtcblxuXHRcdGlmICggZXh0ZW5zaW9uLnRyYW5zbWlzc2lvbkZhY3RvciAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRtYXRlcmlhbFBhcmFtcy50cmFuc21pc3Npb24gPSBleHRlbnNpb24udHJhbnNtaXNzaW9uRmFjdG9yO1xuXG5cdFx0fVxuXG5cdFx0aWYgKCBleHRlbnNpb24udHJhbnNtaXNzaW9uVGV4dHVyZSAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRwZW5kaW5nLnB1c2goIHBhcnNlci5hc3NpZ25UZXh0dXJlKCBtYXRlcmlhbFBhcmFtcywgJ3RyYW5zbWlzc2lvbk1hcCcsIGV4dGVuc2lvbi50cmFuc21pc3Npb25UZXh0dXJlICkgKTtcblxuXHRcdH1cblxuXHRcdHJldHVybiBQcm9taXNlLmFsbCggcGVuZGluZyApO1xuXG5cdH07XG5cblx0LyoqXG5cdCAqIEJhc2lzVSBUZXh0dXJlIEV4dGVuc2lvblxuXHQgKlxuXHQgKiBTcGVjaWZpY2F0aW9uOiBodHRwczovL2dpdGh1Yi5jb20vS2hyb25vc0dyb3VwL2dsVEYvdHJlZS9tYXN0ZXIvZXh0ZW5zaW9ucy8yLjAvS2hyb25vcy9LSFJfdGV4dHVyZV9iYXNpc3Vcblx0ICovXG5cdGZ1bmN0aW9uIEdMVEZUZXh0dXJlQmFzaXNVRXh0ZW5zaW9uKCBwYXJzZXIgKSB7XG5cblx0XHR0aGlzLnBhcnNlciA9IHBhcnNlcjtcblx0XHR0aGlzLm5hbWUgPSBFWFRFTlNJT05TLktIUl9URVhUVVJFX0JBU0lTVTtcblxuXHR9XG5cblx0R0xURlRleHR1cmVCYXNpc1VFeHRlbnNpb24ucHJvdG90eXBlLmxvYWRUZXh0dXJlID0gZnVuY3Rpb24gKCB0ZXh0dXJlSW5kZXggKSB7XG5cblx0XHR2YXIgcGFyc2VyID0gdGhpcy5wYXJzZXI7XG5cdFx0dmFyIGpzb24gPSBwYXJzZXIuanNvbjtcblxuXHRcdHZhciB0ZXh0dXJlRGVmID0ganNvbi50ZXh0dXJlc1sgdGV4dHVyZUluZGV4IF07XG5cblx0XHRpZiAoICEgdGV4dHVyZURlZi5leHRlbnNpb25zIHx8ICEgdGV4dHVyZURlZi5leHRlbnNpb25zWyB0aGlzLm5hbWUgXSApIHtcblxuXHRcdFx0cmV0dXJuIG51bGw7XG5cblx0XHR9XG5cblx0XHR2YXIgZXh0ZW5zaW9uID0gdGV4dHVyZURlZi5leHRlbnNpb25zWyB0aGlzLm5hbWUgXTtcblx0XHR2YXIgc291cmNlID0ganNvbi5pbWFnZXNbIGV4dGVuc2lvbi5zb3VyY2UgXTtcblx0XHR2YXIgbG9hZGVyID0gcGFyc2VyLm9wdGlvbnMua3R4MkxvYWRlcjtcblxuXHRcdGlmICggISBsb2FkZXIgKSB7XG5cblx0XHRcdGlmICgganNvbi5leHRlbnNpb25zUmVxdWlyZWQgJiYganNvbi5leHRlbnNpb25zUmVxdWlyZWQuaW5kZXhPZiggdGhpcy5uYW1lICkgPj0gMCApIHtcblxuXHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoICdUSFJFRS5HTFRGTG9hZGVyOiBzZXRLVFgyTG9hZGVyIG11c3QgYmUgY2FsbGVkIGJlZm9yZSBsb2FkaW5nIEtUWDIgdGV4dHVyZXMnICk7XG5cblx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0Ly8gQXNzdW1lcyB0aGF0IHRoZSBleHRlbnNpb24gaXMgb3B0aW9uYWwgYW5kIHRoYXQgYSBmYWxsYmFjayB0ZXh0dXJlIGlzIHByZXNlbnRcblx0XHRcdFx0cmV0dXJuIG51bGw7XG5cblx0XHRcdH1cblxuXHRcdH1cblxuXHRcdHJldHVybiBwYXJzZXIubG9hZFRleHR1cmVJbWFnZSggdGV4dHVyZUluZGV4LCBzb3VyY2UsIGxvYWRlciApO1xuXG5cdH07XG5cblx0LyoqXG5cdCAqIFdlYlAgVGV4dHVyZSBFeHRlbnNpb25cblx0ICpcblx0ICogU3BlY2lmaWNhdGlvbjogaHR0cHM6Ly9naXRodWIuY29tL0tocm9ub3NHcm91cC9nbFRGL3RyZWUvbWFzdGVyL2V4dGVuc2lvbnMvMi4wL1ZlbmRvci9FWFRfdGV4dHVyZV93ZWJwXG5cdCAqL1xuXHRmdW5jdGlvbiBHTFRGVGV4dHVyZVdlYlBFeHRlbnNpb24oIHBhcnNlciApIHtcblxuXHRcdHRoaXMucGFyc2VyID0gcGFyc2VyO1xuXHRcdHRoaXMubmFtZSA9IEVYVEVOU0lPTlMuRVhUX1RFWFRVUkVfV0VCUDtcblx0XHR0aGlzLmlzU3VwcG9ydGVkID0gbnVsbDtcblxuXHR9XG5cblx0R0xURlRleHR1cmVXZWJQRXh0ZW5zaW9uLnByb3RvdHlwZS5sb2FkVGV4dHVyZSA9IGZ1bmN0aW9uICggdGV4dHVyZUluZGV4ICkge1xuXG5cdFx0dmFyIG5hbWUgPSB0aGlzLm5hbWU7XG5cdFx0dmFyIHBhcnNlciA9IHRoaXMucGFyc2VyO1xuXHRcdHZhciBqc29uID0gcGFyc2VyLmpzb247XG5cblx0XHR2YXIgdGV4dHVyZURlZiA9IGpzb24udGV4dHVyZXNbIHRleHR1cmVJbmRleCBdO1xuXG5cdFx0aWYgKCAhIHRleHR1cmVEZWYuZXh0ZW5zaW9ucyB8fCAhIHRleHR1cmVEZWYuZXh0ZW5zaW9uc1sgbmFtZSBdICkge1xuXG5cdFx0XHRyZXR1cm4gbnVsbDtcblxuXHRcdH1cblxuXHRcdHZhciBleHRlbnNpb24gPSB0ZXh0dXJlRGVmLmV4dGVuc2lvbnNbIG5hbWUgXTtcblx0XHR2YXIgc291cmNlID0ganNvbi5pbWFnZXNbIGV4dGVuc2lvbi5zb3VyY2UgXTtcblxuXHRcdHZhciBsb2FkZXIgPSBwYXJzZXIudGV4dHVyZUxvYWRlcjtcblx0XHRpZiAoIHNvdXJjZS51cmkgKSB7XG5cblx0XHRcdHZhciBoYW5kbGVyID0gcGFyc2VyLm9wdGlvbnMubWFuYWdlci5nZXRIYW5kbGVyKCBzb3VyY2UudXJpICk7XG5cdFx0XHRpZiAoIGhhbmRsZXIgIT09IG51bGwgKSBsb2FkZXIgPSBoYW5kbGVyO1xuXG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXMuZGV0ZWN0U3VwcG9ydCgpLnRoZW4oIGZ1bmN0aW9uICggaXNTdXBwb3J0ZWQgKSB7XG5cblx0XHRcdGlmICggaXNTdXBwb3J0ZWQgKSByZXR1cm4gcGFyc2VyLmxvYWRUZXh0dXJlSW1hZ2UoIHRleHR1cmVJbmRleCwgc291cmNlLCBsb2FkZXIgKTtcblxuXHRcdFx0aWYgKCBqc29uLmV4dGVuc2lvbnNSZXF1aXJlZCAmJiBqc29uLmV4dGVuc2lvbnNSZXF1aXJlZC5pbmRleE9mKCBuYW1lICkgPj0gMCApIHtcblxuXHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoICdUSFJFRS5HTFRGTG9hZGVyOiBXZWJQIHJlcXVpcmVkIGJ5IGFzc2V0IGJ1dCB1bnN1cHBvcnRlZC4nICk7XG5cblx0XHRcdH1cblxuXHRcdFx0Ly8gRmFsbCBiYWNrIHRvIFBORyBvciBKUEVHLlxuXHRcdFx0cmV0dXJuIHBhcnNlci5sb2FkVGV4dHVyZSggdGV4dHVyZUluZGV4ICk7XG5cblx0XHR9ICk7XG5cblx0fTtcblxuXHRHTFRGVGV4dHVyZVdlYlBFeHRlbnNpb24ucHJvdG90eXBlLmRldGVjdFN1cHBvcnQgPSBmdW5jdGlvbiAoKSB7XG5cblx0XHRpZiAoICEgdGhpcy5pc1N1cHBvcnRlZCApIHtcblxuXHRcdFx0dGhpcy5pc1N1cHBvcnRlZCA9IG5ldyBQcm9taXNlKCBmdW5jdGlvbiAoIHJlc29sdmUgKSB7XG5cblx0XHRcdFx0dmFyIGltYWdlID0gbmV3IEltYWdlKCk7XG5cblx0XHRcdFx0Ly8gTG9zc3kgdGVzdCBpbWFnZS4gU3VwcG9ydCBmb3IgbG9zc3kgaW1hZ2VzIGRvZXNuJ3QgZ3VhcmFudGVlIHN1cHBvcnQgZm9yIGFsbFxuXHRcdFx0XHQvLyBXZWJQIGltYWdlcywgdW5mb3J0dW5hdGVseS5cblx0XHRcdFx0aW1hZ2Uuc3JjID0gJ2RhdGE6aW1hZ2Uvd2VicDtiYXNlNjQsVWtsR1JpSUFBQUJYUlVKUVZsQTRJQllBQUFBd0FRQ2RBU29CQUFFQURzRCtKYVFBQTNBQUFBQUEnO1xuXG5cdFx0XHRcdGltYWdlLm9ubG9hZCA9IGltYWdlLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdFx0XHRyZXNvbHZlKCBpbWFnZS5oZWlnaHQgPT09IDEgKTtcblxuXHRcdFx0XHR9O1xuXG5cdFx0XHR9ICk7XG5cblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcy5pc1N1cHBvcnRlZDtcblxuXHR9O1xuXG5cdC8qKlxuXHQqIG1lc2hvcHQgQnVmZmVyVmlldyBDb21wcmVzc2lvbiBFeHRlbnNpb25cblx0KlxuXHQqIFNwZWNpZmljYXRpb246IGh0dHBzOi8vZ2l0aHViLmNvbS9LaHJvbm9zR3JvdXAvZ2xURi90cmVlL21hc3Rlci9leHRlbnNpb25zLzIuMC9WZW5kb3IvRVhUX21lc2hvcHRfY29tcHJlc3Npb25cblx0Ki9cblx0ZnVuY3Rpb24gR0xURk1lc2hvcHRDb21wcmVzc2lvbiggcGFyc2VyICkge1xuXG5cdFx0dGhpcy5uYW1lID0gRVhURU5TSU9OUy5FWFRfTUVTSE9QVF9DT01QUkVTU0lPTjtcblx0XHR0aGlzLnBhcnNlciA9IHBhcnNlcjtcblxuXHR9XG5cblx0R0xURk1lc2hvcHRDb21wcmVzc2lvbi5wcm90b3R5cGUubG9hZEJ1ZmZlclZpZXcgPSBmdW5jdGlvbiAoIGluZGV4ICkge1xuXG5cdFx0dmFyIGpzb24gPSB0aGlzLnBhcnNlci5qc29uO1xuXHRcdHZhciBidWZmZXJWaWV3ID0ganNvbi5idWZmZXJWaWV3c1sgaW5kZXggXTtcblxuXHRcdGlmICggYnVmZmVyVmlldy5leHRlbnNpb25zICYmIGJ1ZmZlclZpZXcuZXh0ZW5zaW9uc1sgdGhpcy5uYW1lIF0gKSB7XG5cblx0XHRcdHZhciBleHRlbnNpb25EZWYgPSBidWZmZXJWaWV3LmV4dGVuc2lvbnNbIHRoaXMubmFtZSBdO1xuXG5cdFx0XHR2YXIgYnVmZmVyID0gdGhpcy5wYXJzZXIuZ2V0RGVwZW5kZW5jeSggJ2J1ZmZlcicsIGV4dGVuc2lvbkRlZi5idWZmZXIgKTtcblx0XHRcdHZhciBkZWNvZGVyID0gdGhpcy5wYXJzZXIub3B0aW9ucy5tZXNob3B0RGVjb2RlcjtcblxuXHRcdFx0aWYgKCAhIGRlY29kZXIgfHwgISBkZWNvZGVyLnN1cHBvcnRlZCApIHtcblxuXHRcdFx0XHRpZiAoIGpzb24uZXh0ZW5zaW9uc1JlcXVpcmVkICYmIGpzb24uZXh0ZW5zaW9uc1JlcXVpcmVkLmluZGV4T2YoIHRoaXMubmFtZSApID49IDAgKSB7XG5cblx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoICdUSFJFRS5HTFRGTG9hZGVyOiBzZXRNZXNob3B0RGVjb2RlciBtdXN0IGJlIGNhbGxlZCBiZWZvcmUgbG9hZGluZyBjb21wcmVzc2VkIGZpbGVzJyApO1xuXG5cdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHQvLyBBc3N1bWVzIHRoYXQgdGhlIGV4dGVuc2lvbiBpcyBvcHRpb25hbCBhbmQgdGhhdCBmYWxsYmFjayBidWZmZXIgZGF0YSBpcyBwcmVzZW50XG5cdFx0XHRcdFx0cmV0dXJuIG51bGw7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBQcm9taXNlLmFsbCggWyBidWZmZXIsIGRlY29kZXIucmVhZHkgXSApLnRoZW4oIGZ1bmN0aW9uICggcmVzICkge1xuXG5cdFx0XHRcdHZhciBieXRlT2Zmc2V0ID0gZXh0ZW5zaW9uRGVmLmJ5dGVPZmZzZXQgfHwgMDtcblx0XHRcdFx0dmFyIGJ5dGVMZW5ndGggPSBleHRlbnNpb25EZWYuYnl0ZUxlbmd0aCB8fCAwO1xuXG5cdFx0XHRcdHZhciBjb3VudCA9IGV4dGVuc2lvbkRlZi5jb3VudDtcblx0XHRcdFx0dmFyIHN0cmlkZSA9IGV4dGVuc2lvbkRlZi5ieXRlU3RyaWRlO1xuXG5cdFx0XHRcdHZhciByZXN1bHQgPSBuZXcgQXJyYXlCdWZmZXIoIGNvdW50ICogc3RyaWRlICk7XG5cdFx0XHRcdHZhciBzb3VyY2UgPSBuZXcgVWludDhBcnJheSggcmVzWyAwIF0sIGJ5dGVPZmZzZXQsIGJ5dGVMZW5ndGggKTtcblxuXHRcdFx0XHRkZWNvZGVyLmRlY29kZUdsdGZCdWZmZXIoIG5ldyBVaW50OEFycmF5KCByZXN1bHQgKSwgY291bnQsIHN0cmlkZSwgc291cmNlLCBleHRlbnNpb25EZWYubW9kZSwgZXh0ZW5zaW9uRGVmLmZpbHRlciApO1xuXHRcdFx0XHRyZXR1cm4gcmVzdWx0O1xuXG5cdFx0XHR9ICk7XG5cblx0XHR9IGVsc2Uge1xuXG5cdFx0XHRyZXR1cm4gbnVsbDtcblxuXHRcdH1cblxuXHR9O1xuXG5cdC8qIEJJTkFSWSBFWFRFTlNJT04gKi9cblx0dmFyIEJJTkFSWV9FWFRFTlNJT05fSEVBREVSX01BR0lDID0gJ2dsVEYnO1xuXHR2YXIgQklOQVJZX0VYVEVOU0lPTl9IRUFERVJfTEVOR1RIID0gMTI7XG5cdHZhciBCSU5BUllfRVhURU5TSU9OX0NIVU5LX1RZUEVTID0geyBKU09OOiAweDRFNEY1MzRBLCBCSU46IDB4MDA0RTQ5NDIgfTtcblxuXHRmdW5jdGlvbiBHTFRGQmluYXJ5RXh0ZW5zaW9uKCBkYXRhICkge1xuXG5cdFx0dGhpcy5uYW1lID0gRVhURU5TSU9OUy5LSFJfQklOQVJZX0dMVEY7XG5cdFx0dGhpcy5jb250ZW50ID0gbnVsbDtcblx0XHR0aGlzLmJvZHkgPSBudWxsO1xuXG5cdFx0dmFyIGhlYWRlclZpZXcgPSBuZXcgRGF0YVZpZXcoIGRhdGEsIDAsIEJJTkFSWV9FWFRFTlNJT05fSEVBREVSX0xFTkdUSCApO1xuXG5cdFx0dGhpcy5oZWFkZXIgPSB7XG5cdFx0XHRtYWdpYzogTG9hZGVyVXRpbHMuZGVjb2RlVGV4dCggbmV3IFVpbnQ4QXJyYXkoIGRhdGEuc2xpY2UoIDAsIDQgKSApICksXG5cdFx0XHR2ZXJzaW9uOiBoZWFkZXJWaWV3LmdldFVpbnQzMiggNCwgdHJ1ZSApLFxuXHRcdFx0bGVuZ3RoOiBoZWFkZXJWaWV3LmdldFVpbnQzMiggOCwgdHJ1ZSApXG5cdFx0fTtcblxuXHRcdGlmICggdGhpcy5oZWFkZXIubWFnaWMgIT09IEJJTkFSWV9FWFRFTlNJT05fSEVBREVSX01BR0lDICkge1xuXG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoICdUSFJFRS5HTFRGTG9hZGVyOiBVbnN1cHBvcnRlZCBnbFRGLUJpbmFyeSBoZWFkZXIuJyApO1xuXG5cdFx0fSBlbHNlIGlmICggdGhpcy5oZWFkZXIudmVyc2lvbiA8IDIuMCApIHtcblxuXHRcdFx0dGhyb3cgbmV3IEVycm9yKCAnVEhSRUUuR0xURkxvYWRlcjogTGVnYWN5IGJpbmFyeSBmaWxlIGRldGVjdGVkLicgKTtcblxuXHRcdH1cblxuXHRcdHZhciBjaHVua0NvbnRlbnRzTGVuZ3RoID0gdGhpcy5oZWFkZXIubGVuZ3RoIC0gQklOQVJZX0VYVEVOU0lPTl9IRUFERVJfTEVOR1RIO1xuXHRcdHZhciBjaHVua1ZpZXcgPSBuZXcgRGF0YVZpZXcoIGRhdGEsIEJJTkFSWV9FWFRFTlNJT05fSEVBREVSX0xFTkdUSCApO1xuXHRcdHZhciBjaHVua0luZGV4ID0gMDtcblxuXHRcdHdoaWxlICggY2h1bmtJbmRleCA8IGNodW5rQ29udGVudHNMZW5ndGggKSB7XG5cblx0XHRcdHZhciBjaHVua0xlbmd0aCA9IGNodW5rVmlldy5nZXRVaW50MzIoIGNodW5rSW5kZXgsIHRydWUgKTtcblx0XHRcdGNodW5rSW5kZXggKz0gNDtcblxuXHRcdFx0dmFyIGNodW5rVHlwZSA9IGNodW5rVmlldy5nZXRVaW50MzIoIGNodW5rSW5kZXgsIHRydWUgKTtcblx0XHRcdGNodW5rSW5kZXggKz0gNDtcblxuXHRcdFx0aWYgKCBjaHVua1R5cGUgPT09IEJJTkFSWV9FWFRFTlNJT05fQ0hVTktfVFlQRVMuSlNPTiApIHtcblxuXHRcdFx0XHR2YXIgY29udGVudEFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoIGRhdGEsIEJJTkFSWV9FWFRFTlNJT05fSEVBREVSX0xFTkdUSCArIGNodW5rSW5kZXgsIGNodW5rTGVuZ3RoICk7XG5cdFx0XHRcdHRoaXMuY29udGVudCA9IExvYWRlclV0aWxzLmRlY29kZVRleHQoIGNvbnRlbnRBcnJheSApO1xuXG5cdFx0XHR9IGVsc2UgaWYgKCBjaHVua1R5cGUgPT09IEJJTkFSWV9FWFRFTlNJT05fQ0hVTktfVFlQRVMuQklOICkge1xuXG5cdFx0XHRcdHZhciBieXRlT2Zmc2V0ID0gQklOQVJZX0VYVEVOU0lPTl9IRUFERVJfTEVOR1RIICsgY2h1bmtJbmRleDtcblx0XHRcdFx0dGhpcy5ib2R5ID0gZGF0YS5zbGljZSggYnl0ZU9mZnNldCwgYnl0ZU9mZnNldCArIGNodW5rTGVuZ3RoICk7XG5cblx0XHRcdH1cblxuXHRcdFx0Ly8gQ2xpZW50cyBtdXN0IGlnbm9yZSBjaHVua3Mgd2l0aCB1bmtub3duIHR5cGVzLlxuXG5cdFx0XHRjaHVua0luZGV4ICs9IGNodW5rTGVuZ3RoO1xuXG5cdFx0fVxuXG5cdFx0aWYgKCB0aGlzLmNvbnRlbnQgPT09IG51bGwgKSB7XG5cblx0XHRcdHRocm93IG5ldyBFcnJvciggJ1RIUkVFLkdMVEZMb2FkZXI6IEpTT04gY29udGVudCBub3QgZm91bmQuJyApO1xuXG5cdFx0fVxuXG5cdH1cblxuXHQvKipcblx0ICogRFJBQ08gTWVzaCBDb21wcmVzc2lvbiBFeHRlbnNpb25cblx0ICpcblx0ICogU3BlY2lmaWNhdGlvbjogaHR0cHM6Ly9naXRodWIuY29tL0tocm9ub3NHcm91cC9nbFRGL3RyZWUvbWFzdGVyL2V4dGVuc2lvbnMvMi4wL0tocm9ub3MvS0hSX2RyYWNvX21lc2hfY29tcHJlc3Npb25cblx0ICovXG5cdGZ1bmN0aW9uIEdMVEZEcmFjb01lc2hDb21wcmVzc2lvbkV4dGVuc2lvbigganNvbiwgZHJhY29Mb2FkZXIgKSB7XG5cblx0XHRpZiAoICEgZHJhY29Mb2FkZXIgKSB7XG5cblx0XHRcdHRocm93IG5ldyBFcnJvciggJ1RIUkVFLkdMVEZMb2FkZXI6IE5vIERSQUNPTG9hZGVyIGluc3RhbmNlIHByb3ZpZGVkLicgKTtcblxuXHRcdH1cblxuXHRcdHRoaXMubmFtZSA9IEVYVEVOU0lPTlMuS0hSX0RSQUNPX01FU0hfQ09NUFJFU1NJT047XG5cdFx0dGhpcy5qc29uID0ganNvbjtcblx0XHR0aGlzLmRyYWNvTG9hZGVyID0gZHJhY29Mb2FkZXI7XG5cdFx0dGhpcy5kcmFjb0xvYWRlci5wcmVsb2FkKCk7XG5cblx0fVxuXG5cdEdMVEZEcmFjb01lc2hDb21wcmVzc2lvbkV4dGVuc2lvbi5wcm90b3R5cGUuZGVjb2RlUHJpbWl0aXZlID0gZnVuY3Rpb24gKCBwcmltaXRpdmUsIHBhcnNlciApIHtcblxuXHRcdHZhciBqc29uID0gdGhpcy5qc29uO1xuXHRcdHZhciBkcmFjb0xvYWRlciA9IHRoaXMuZHJhY29Mb2FkZXI7XG5cdFx0dmFyIGJ1ZmZlclZpZXdJbmRleCA9IHByaW1pdGl2ZS5leHRlbnNpb25zWyB0aGlzLm5hbWUgXS5idWZmZXJWaWV3O1xuXHRcdHZhciBnbHRmQXR0cmlidXRlTWFwID0gcHJpbWl0aXZlLmV4dGVuc2lvbnNbIHRoaXMubmFtZSBdLmF0dHJpYnV0ZXM7XG5cdFx0dmFyIHRocmVlQXR0cmlidXRlTWFwID0ge307XG5cdFx0dmFyIGF0dHJpYnV0ZU5vcm1hbGl6ZWRNYXAgPSB7fTtcblx0XHR2YXIgYXR0cmlidXRlVHlwZU1hcCA9IHt9O1xuXG5cdFx0Zm9yICggdmFyIGF0dHJpYnV0ZU5hbWUgaW4gZ2x0ZkF0dHJpYnV0ZU1hcCApIHtcblxuXHRcdFx0dmFyIHRocmVlQXR0cmlidXRlTmFtZSA9IEFUVFJJQlVURVNbIGF0dHJpYnV0ZU5hbWUgXSB8fCBhdHRyaWJ1dGVOYW1lLnRvTG93ZXJDYXNlKCk7XG5cblx0XHRcdHRocmVlQXR0cmlidXRlTWFwWyB0aHJlZUF0dHJpYnV0ZU5hbWUgXSA9IGdsdGZBdHRyaWJ1dGVNYXBbIGF0dHJpYnV0ZU5hbWUgXTtcblxuXHRcdH1cblxuXHRcdGZvciAoIGF0dHJpYnV0ZU5hbWUgaW4gcHJpbWl0aXZlLmF0dHJpYnV0ZXMgKSB7XG5cblx0XHRcdHZhciB0aHJlZUF0dHJpYnV0ZU5hbWUgPSBBVFRSSUJVVEVTWyBhdHRyaWJ1dGVOYW1lIF0gfHwgYXR0cmlidXRlTmFtZS50b0xvd2VyQ2FzZSgpO1xuXG5cdFx0XHRpZiAoIGdsdGZBdHRyaWJ1dGVNYXBbIGF0dHJpYnV0ZU5hbWUgXSAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRcdHZhciBhY2Nlc3NvckRlZiA9IGpzb24uYWNjZXNzb3JzWyBwcmltaXRpdmUuYXR0cmlidXRlc1sgYXR0cmlidXRlTmFtZSBdIF07XG5cdFx0XHRcdHZhciBjb21wb25lbnRUeXBlID0gV0VCR0xfQ09NUE9ORU5UX1RZUEVTWyBhY2Nlc3NvckRlZi5jb21wb25lbnRUeXBlIF07XG5cblx0XHRcdFx0YXR0cmlidXRlVHlwZU1hcFsgdGhyZWVBdHRyaWJ1dGVOYW1lIF0gPSBjb21wb25lbnRUeXBlO1xuXHRcdFx0XHRhdHRyaWJ1dGVOb3JtYWxpemVkTWFwWyB0aHJlZUF0dHJpYnV0ZU5hbWUgXSA9IGFjY2Vzc29yRGVmLm5vcm1hbGl6ZWQgPT09IHRydWU7XG5cblx0XHRcdH1cblxuXHRcdH1cblxuXHRcdHJldHVybiBwYXJzZXIuZ2V0RGVwZW5kZW5jeSggJ2J1ZmZlclZpZXcnLCBidWZmZXJWaWV3SW5kZXggKS50aGVuKCBmdW5jdGlvbiAoIGJ1ZmZlclZpZXcgKSB7XG5cblx0XHRcdHJldHVybiBuZXcgUHJvbWlzZSggZnVuY3Rpb24gKCByZXNvbHZlICkge1xuXG5cdFx0XHRcdGRyYWNvTG9hZGVyLmRlY29kZURyYWNvRmlsZSggYnVmZmVyVmlldywgZnVuY3Rpb24gKCBnZW9tZXRyeSApIHtcblxuXHRcdFx0XHRcdGZvciAoIHZhciBhdHRyaWJ1dGVOYW1lIGluIGdlb21ldHJ5LmF0dHJpYnV0ZXMgKSB7XG5cblx0XHRcdFx0XHRcdHZhciBhdHRyaWJ1dGUgPSBnZW9tZXRyeS5hdHRyaWJ1dGVzWyBhdHRyaWJ1dGVOYW1lIF07XG5cdFx0XHRcdFx0XHR2YXIgbm9ybWFsaXplZCA9IGF0dHJpYnV0ZU5vcm1hbGl6ZWRNYXBbIGF0dHJpYnV0ZU5hbWUgXTtcblxuXHRcdFx0XHRcdFx0aWYgKCBub3JtYWxpemVkICE9PSB1bmRlZmluZWQgKSBhdHRyaWJ1dGUubm9ybWFsaXplZCA9IG5vcm1hbGl6ZWQ7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRyZXNvbHZlKCBnZW9tZXRyeSApO1xuXG5cdFx0XHRcdH0sIHRocmVlQXR0cmlidXRlTWFwLCBhdHRyaWJ1dGVUeXBlTWFwICk7XG5cblx0XHRcdH0gKTtcblxuXHRcdH0gKTtcblxuXHR9O1xuXG5cdC8qKlxuXHQgKiBUZXh0dXJlIFRyYW5zZm9ybSBFeHRlbnNpb25cblx0ICpcblx0ICogU3BlY2lmaWNhdGlvbjogaHR0cHM6Ly9naXRodWIuY29tL0tocm9ub3NHcm91cC9nbFRGL3RyZWUvbWFzdGVyL2V4dGVuc2lvbnMvMi4wL0tocm9ub3MvS0hSX3RleHR1cmVfdHJhbnNmb3JtXG5cdCAqL1xuXHRmdW5jdGlvbiBHTFRGVGV4dHVyZVRyYW5zZm9ybUV4dGVuc2lvbigpIHtcblxuXHRcdHRoaXMubmFtZSA9IEVYVEVOU0lPTlMuS0hSX1RFWFRVUkVfVFJBTlNGT1JNO1xuXG5cdH1cblxuXHRHTFRGVGV4dHVyZVRyYW5zZm9ybUV4dGVuc2lvbi5wcm90b3R5cGUuZXh0ZW5kVGV4dHVyZSA9IGZ1bmN0aW9uICggdGV4dHVyZSwgdHJhbnNmb3JtICkge1xuXG5cdFx0dGV4dHVyZSA9IHRleHR1cmUuY2xvbmUoKTtcblxuXHRcdGlmICggdHJhbnNmb3JtLm9mZnNldCAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHR0ZXh0dXJlLm9mZnNldC5mcm9tQXJyYXkoIHRyYW5zZm9ybS5vZmZzZXQgKTtcblxuXHRcdH1cblxuXHRcdGlmICggdHJhbnNmb3JtLnJvdGF0aW9uICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdHRleHR1cmUucm90YXRpb24gPSB0cmFuc2Zvcm0ucm90YXRpb247XG5cblx0XHR9XG5cblx0XHRpZiAoIHRyYW5zZm9ybS5zY2FsZSAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHR0ZXh0dXJlLnJlcGVhdC5mcm9tQXJyYXkoIHRyYW5zZm9ybS5zY2FsZSApO1xuXG5cdFx0fVxuXG5cdFx0aWYgKCB0cmFuc2Zvcm0udGV4Q29vcmQgIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0Y29uc29sZS53YXJuKCAnVEhSRUUuR0xURkxvYWRlcjogQ3VzdG9tIFVWIHNldHMgaW4gXCInICsgdGhpcy5uYW1lICsgJ1wiIGV4dGVuc2lvbiBub3QgeWV0IHN1cHBvcnRlZC4nICk7XG5cblx0XHR9XG5cblx0XHR0ZXh0dXJlLm5lZWRzVXBkYXRlID0gdHJ1ZTtcblxuXHRcdHJldHVybiB0ZXh0dXJlO1xuXG5cdH07XG5cblx0LyoqXG5cdCAqIFNwZWN1bGFyLUdsb3NzaW5lc3MgRXh0ZW5zaW9uXG5cdCAqXG5cdCAqIFNwZWNpZmljYXRpb246IGh0dHBzOi8vZ2l0aHViLmNvbS9LaHJvbm9zR3JvdXAvZ2xURi90cmVlL21hc3Rlci9leHRlbnNpb25zLzIuMC9LaHJvbm9zL0tIUl9tYXRlcmlhbHNfcGJyU3BlY3VsYXJHbG9zc2luZXNzXG5cdCAqL1xuXG5cdC8qKlxuXHQgKiBBIHN1YiBjbGFzcyBvZiBTdGFuZGFyZE1hdGVyaWFsIHdpdGggc29tZSBvZiB0aGUgZnVuY3Rpb25hbGl0eVxuXHQgKiBjaGFuZ2VkIHZpYSB0aGUgYG9uQmVmb3JlQ29tcGlsZWAgY2FsbGJhY2tcblx0ICogQHBhaWxoZWFkXG5cdCAqL1xuXG5cdGZ1bmN0aW9uIEdMVEZNZXNoU3RhbmRhcmRTR01hdGVyaWFsKCBwYXJhbXMgKSB7XG5cblx0XHRNZXNoU3RhbmRhcmRNYXRlcmlhbC5jYWxsKCB0aGlzICk7XG5cblx0XHR0aGlzLmlzR0xURlNwZWN1bGFyR2xvc3NpbmVzc01hdGVyaWFsID0gdHJ1ZTtcblxuXHRcdC8vdmFyaW91cyBjaHVua3MgdGhhdCBuZWVkIHJlcGxhY2luZ1xuXHRcdHZhciBzcGVjdWxhck1hcFBhcnNGcmFnbWVudENodW5rID0gW1xuXHRcdFx0JyNpZmRlZiBVU0VfU1BFQ1VMQVJNQVAnLFxuXHRcdFx0J1x0dW5pZm9ybSBzYW1wbGVyMkQgc3BlY3VsYXJNYXA7Jyxcblx0XHRcdCcjZW5kaWYnXG5cdFx0XS5qb2luKCAnXFxuJyApO1xuXG5cdFx0dmFyIGdsb3NzaW5lc3NNYXBQYXJzRnJhZ21lbnRDaHVuayA9IFtcblx0XHRcdCcjaWZkZWYgVVNFX0dMT1NTSU5FU1NNQVAnLFxuXHRcdFx0J1x0dW5pZm9ybSBzYW1wbGVyMkQgZ2xvc3NpbmVzc01hcDsnLFxuXHRcdFx0JyNlbmRpZidcblx0XHRdLmpvaW4oICdcXG4nICk7XG5cblx0XHR2YXIgc3BlY3VsYXJNYXBGcmFnbWVudENodW5rID0gW1xuXHRcdFx0J3ZlYzMgc3BlY3VsYXJGYWN0b3IgPSBzcGVjdWxhcjsnLFxuXHRcdFx0JyNpZmRlZiBVU0VfU1BFQ1VMQVJNQVAnLFxuXHRcdFx0J1x0dmVjNCB0ZXhlbFNwZWN1bGFyID0gdGV4dHVyZTJEKCBzcGVjdWxhck1hcCwgdlV2ICk7Jyxcblx0XHRcdCdcdHRleGVsU3BlY3VsYXIgPSBzUkdCVG9MaW5lYXIoIHRleGVsU3BlY3VsYXIgKTsnLFxuXHRcdFx0J1x0Ly8gcmVhZHMgY2hhbm5lbCBSR0IsIGNvbXBhdGlibGUgd2l0aCBhIGdsVEYgU3BlY3VsYXItR2xvc3NpbmVzcyAoUkdCQSkgdGV4dHVyZScsXG5cdFx0XHQnXHRzcGVjdWxhckZhY3RvciAqPSB0ZXhlbFNwZWN1bGFyLnJnYjsnLFxuXHRcdFx0JyNlbmRpZidcblx0XHRdLmpvaW4oICdcXG4nICk7XG5cblx0XHR2YXIgZ2xvc3NpbmVzc01hcEZyYWdtZW50Q2h1bmsgPSBbXG5cdFx0XHQnZmxvYXQgZ2xvc3NpbmVzc0ZhY3RvciA9IGdsb3NzaW5lc3M7Jyxcblx0XHRcdCcjaWZkZWYgVVNFX0dMT1NTSU5FU1NNQVAnLFxuXHRcdFx0J1x0dmVjNCB0ZXhlbEdsb3NzaW5lc3MgPSB0ZXh0dXJlMkQoIGdsb3NzaW5lc3NNYXAsIHZVdiApOycsXG5cdFx0XHQnXHQvLyByZWFkcyBjaGFubmVsIEEsIGNvbXBhdGlibGUgd2l0aCBhIGdsVEYgU3BlY3VsYXItR2xvc3NpbmVzcyAoUkdCQSkgdGV4dHVyZScsXG5cdFx0XHQnXHRnbG9zc2luZXNzRmFjdG9yICo9IHRleGVsR2xvc3NpbmVzcy5hOycsXG5cdFx0XHQnI2VuZGlmJ1xuXHRcdF0uam9pbiggJ1xcbicgKTtcblxuXHRcdHZhciBsaWdodFBoeXNpY2FsRnJhZ21lbnRDaHVuayA9IFtcblx0XHRcdCdQaHlzaWNhbE1hdGVyaWFsIG1hdGVyaWFsOycsXG5cdFx0XHQnbWF0ZXJpYWwuZGlmZnVzZUNvbG9yID0gZGlmZnVzZUNvbG9yLnJnYiAqICggMS4gLSBtYXgoIHNwZWN1bGFyRmFjdG9yLnIsIG1heCggc3BlY3VsYXJGYWN0b3IuZywgc3BlY3VsYXJGYWN0b3IuYiApICkgKTsnLFxuXHRcdFx0J3ZlYzMgZHh5ID0gbWF4KCBhYnMoIGRGZHgoIGdlb21ldHJ5Tm9ybWFsICkgKSwgYWJzKCBkRmR5KCBnZW9tZXRyeU5vcm1hbCApICkgKTsnLFxuXHRcdFx0J2Zsb2F0IGdlb21ldHJ5Um91Z2huZXNzID0gbWF4KCBtYXgoIGR4eS54LCBkeHkueSApLCBkeHkueiApOycsXG5cdFx0XHQnbWF0ZXJpYWwuc3BlY3VsYXJSb3VnaG5lc3MgPSBtYXgoIDEuMCAtIGdsb3NzaW5lc3NGYWN0b3IsIDAuMDUyNSApOyAvLyAwLjA1MjUgY29ycmVzcG9uZHMgdG8gdGhlIGJhc2UgbWlwIG9mIGEgMjU2IGN1YmVtYXAuJyxcblx0XHRcdCdtYXRlcmlhbC5zcGVjdWxhclJvdWdobmVzcyArPSBnZW9tZXRyeVJvdWdobmVzczsnLFxuXHRcdFx0J21hdGVyaWFsLnNwZWN1bGFyUm91Z2huZXNzID0gbWluKCBtYXRlcmlhbC5zcGVjdWxhclJvdWdobmVzcywgMS4wICk7Jyxcblx0XHRcdCdtYXRlcmlhbC5zcGVjdWxhckNvbG9yID0gc3BlY3VsYXJGYWN0b3I7Jyxcblx0XHRdLmpvaW4oICdcXG4nICk7XG5cblx0XHR2YXIgdW5pZm9ybXMgPSB7XG5cdFx0XHRzcGVjdWxhcjogeyB2YWx1ZTogbmV3IENvbG9yKCkuc2V0SGV4KCAweGZmZmZmZiApIH0sXG5cdFx0XHRnbG9zc2luZXNzOiB7IHZhbHVlOiAxIH0sXG5cdFx0XHRzcGVjdWxhck1hcDogeyB2YWx1ZTogbnVsbCB9LFxuXHRcdFx0Z2xvc3NpbmVzc01hcDogeyB2YWx1ZTogbnVsbCB9XG5cdFx0fTtcblxuXHRcdHRoaXMuX2V4dHJhVW5pZm9ybXMgPSB1bmlmb3JtcztcblxuXHRcdHRoaXMub25CZWZvcmVDb21waWxlID0gZnVuY3Rpb24gKCBzaGFkZXIgKSB7XG5cblx0XHRcdGZvciAoIHZhciB1bmlmb3JtTmFtZSBpbiB1bmlmb3JtcyApIHtcblxuXHRcdFx0XHRzaGFkZXIudW5pZm9ybXNbIHVuaWZvcm1OYW1lIF0gPSB1bmlmb3Jtc1sgdW5pZm9ybU5hbWUgXTtcblxuXHRcdFx0fVxuXG5cdFx0XHRzaGFkZXIuZnJhZ21lbnRTaGFkZXIgPSBzaGFkZXIuZnJhZ21lbnRTaGFkZXJcblx0XHRcdFx0LnJlcGxhY2UoICd1bmlmb3JtIGZsb2F0IHJvdWdobmVzczsnLCAndW5pZm9ybSB2ZWMzIHNwZWN1bGFyOycgKVxuXHRcdFx0XHQucmVwbGFjZSggJ3VuaWZvcm0gZmxvYXQgbWV0YWxuZXNzOycsICd1bmlmb3JtIGZsb2F0IGdsb3NzaW5lc3M7JyApXG5cdFx0XHRcdC5yZXBsYWNlKCAnI2luY2x1ZGUgPHJvdWdobmVzc21hcF9wYXJzX2ZyYWdtZW50PicsIHNwZWN1bGFyTWFwUGFyc0ZyYWdtZW50Q2h1bmsgKVxuXHRcdFx0XHQucmVwbGFjZSggJyNpbmNsdWRlIDxtZXRhbG5lc3NtYXBfcGFyc19mcmFnbWVudD4nLCBnbG9zc2luZXNzTWFwUGFyc0ZyYWdtZW50Q2h1bmsgKVxuXHRcdFx0XHQucmVwbGFjZSggJyNpbmNsdWRlIDxyb3VnaG5lc3NtYXBfZnJhZ21lbnQ+Jywgc3BlY3VsYXJNYXBGcmFnbWVudENodW5rIClcblx0XHRcdFx0LnJlcGxhY2UoICcjaW5jbHVkZSA8bWV0YWxuZXNzbWFwX2ZyYWdtZW50PicsIGdsb3NzaW5lc3NNYXBGcmFnbWVudENodW5rIClcblx0XHRcdFx0LnJlcGxhY2UoICcjaW5jbHVkZSA8bGlnaHRzX3BoeXNpY2FsX2ZyYWdtZW50PicsIGxpZ2h0UGh5c2ljYWxGcmFnbWVudENodW5rICk7XG5cblx0XHR9O1xuXG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnRpZXMoIHRoaXMsIHtcblxuXHRcdFx0c3BlY3VsYXI6IHtcblx0XHRcdFx0Z2V0OiBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdFx0XHRyZXR1cm4gdW5pZm9ybXMuc3BlY3VsYXIudmFsdWU7XG5cblx0XHRcdFx0fSxcblx0XHRcdFx0c2V0OiBmdW5jdGlvbiAoIHYgKSB7XG5cblx0XHRcdFx0XHR1bmlmb3Jtcy5zcGVjdWxhci52YWx1ZSA9IHY7XG5cblx0XHRcdFx0fVxuXHRcdFx0fSxcblxuXHRcdFx0c3BlY3VsYXJNYXA6IHtcblx0XHRcdFx0Z2V0OiBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdFx0XHRyZXR1cm4gdW5pZm9ybXMuc3BlY3VsYXJNYXAudmFsdWU7XG5cblx0XHRcdFx0fSxcblx0XHRcdFx0c2V0OiBmdW5jdGlvbiAoIHYgKSB7XG5cblx0XHRcdFx0XHR1bmlmb3Jtcy5zcGVjdWxhck1hcC52YWx1ZSA9IHY7XG5cblx0XHRcdFx0XHRpZiAoIHYgKSB7XG5cblx0XHRcdFx0XHRcdHRoaXMuZGVmaW5lcy5VU0VfU1BFQ1VMQVJNQVAgPSAnJzsgLy8gVVNFX1VWIGlzIHNldCBieSB0aGUgcmVuZGVyZXIgZm9yIHNwZWN1bGFyIG1hcHNcblxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRcdGRlbGV0ZSB0aGlzLmRlZmluZXMuVVNFX1NQRUNVTEFSTUFQO1xuXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cblx0XHRcdGdsb3NzaW5lc3M6IHtcblx0XHRcdFx0Z2V0OiBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdFx0XHRyZXR1cm4gdW5pZm9ybXMuZ2xvc3NpbmVzcy52YWx1ZTtcblxuXHRcdFx0XHR9LFxuXHRcdFx0XHRzZXQ6IGZ1bmN0aW9uICggdiApIHtcblxuXHRcdFx0XHRcdHVuaWZvcm1zLmdsb3NzaW5lc3MudmFsdWUgPSB2O1xuXG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cblx0XHRcdGdsb3NzaW5lc3NNYXA6IHtcblx0XHRcdFx0Z2V0OiBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdFx0XHRyZXR1cm4gdW5pZm9ybXMuZ2xvc3NpbmVzc01hcC52YWx1ZTtcblxuXHRcdFx0XHR9LFxuXHRcdFx0XHRzZXQ6IGZ1bmN0aW9uICggdiApIHtcblxuXHRcdFx0XHRcdHVuaWZvcm1zLmdsb3NzaW5lc3NNYXAudmFsdWUgPSB2O1xuXG5cdFx0XHRcdFx0aWYgKCB2ICkge1xuXG5cdFx0XHRcdFx0XHR0aGlzLmRlZmluZXMuVVNFX0dMT1NTSU5FU1NNQVAgPSAnJztcblx0XHRcdFx0XHRcdHRoaXMuZGVmaW5lcy5VU0VfVVYgPSAnJztcblxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRcdGRlbGV0ZSB0aGlzLmRlZmluZXMuVVNFX0dMT1NTSU5FU1NNQVA7XG5cdFx0XHRcdFx0XHRkZWxldGUgdGhpcy5kZWZpbmVzLlVTRV9VVjtcblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHR9ICk7XG5cblx0XHRkZWxldGUgdGhpcy5tZXRhbG5lc3M7XG5cdFx0ZGVsZXRlIHRoaXMucm91Z2huZXNzO1xuXHRcdGRlbGV0ZSB0aGlzLm1ldGFsbmVzc01hcDtcblx0XHRkZWxldGUgdGhpcy5yb3VnaG5lc3NNYXA7XG5cblx0XHR0aGlzLnNldFZhbHVlcyggcGFyYW1zICk7XG5cblx0fVxuXG5cdEdMVEZNZXNoU3RhbmRhcmRTR01hdGVyaWFsLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIE1lc2hTdGFuZGFyZE1hdGVyaWFsLnByb3RvdHlwZSApO1xuXHRHTFRGTWVzaFN0YW5kYXJkU0dNYXRlcmlhbC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBHTFRGTWVzaFN0YW5kYXJkU0dNYXRlcmlhbDtcblxuXHRHTFRGTWVzaFN0YW5kYXJkU0dNYXRlcmlhbC5wcm90b3R5cGUuY29weSA9IGZ1bmN0aW9uICggc291cmNlICkge1xuXG5cdFx0TWVzaFN0YW5kYXJkTWF0ZXJpYWwucHJvdG90eXBlLmNvcHkuY2FsbCggdGhpcywgc291cmNlICk7XG5cdFx0dGhpcy5zcGVjdWxhck1hcCA9IHNvdXJjZS5zcGVjdWxhck1hcDtcblx0XHR0aGlzLnNwZWN1bGFyLmNvcHkoIHNvdXJjZS5zcGVjdWxhciApO1xuXHRcdHRoaXMuZ2xvc3NpbmVzc01hcCA9IHNvdXJjZS5nbG9zc2luZXNzTWFwO1xuXHRcdHRoaXMuZ2xvc3NpbmVzcyA9IHNvdXJjZS5nbG9zc2luZXNzO1xuXHRcdGRlbGV0ZSB0aGlzLm1ldGFsbmVzcztcblx0XHRkZWxldGUgdGhpcy5yb3VnaG5lc3M7XG5cdFx0ZGVsZXRlIHRoaXMubWV0YWxuZXNzTWFwO1xuXHRcdGRlbGV0ZSB0aGlzLnJvdWdobmVzc01hcDtcblx0XHRyZXR1cm4gdGhpcztcblxuXHR9O1xuXG5cdGZ1bmN0aW9uIEdMVEZNYXRlcmlhbHNQYnJTcGVjdWxhckdsb3NzaW5lc3NFeHRlbnNpb24oKSB7XG5cblx0XHRyZXR1cm4ge1xuXG5cdFx0XHRuYW1lOiBFWFRFTlNJT05TLktIUl9NQVRFUklBTFNfUEJSX1NQRUNVTEFSX0dMT1NTSU5FU1MsXG5cblx0XHRcdHNwZWN1bGFyR2xvc3NpbmVzc1BhcmFtczogW1xuXHRcdFx0XHQnY29sb3InLFxuXHRcdFx0XHQnbWFwJyxcblx0XHRcdFx0J2xpZ2h0TWFwJyxcblx0XHRcdFx0J2xpZ2h0TWFwSW50ZW5zaXR5Jyxcblx0XHRcdFx0J2FvTWFwJyxcblx0XHRcdFx0J2FvTWFwSW50ZW5zaXR5Jyxcblx0XHRcdFx0J2VtaXNzaXZlJyxcblx0XHRcdFx0J2VtaXNzaXZlSW50ZW5zaXR5Jyxcblx0XHRcdFx0J2VtaXNzaXZlTWFwJyxcblx0XHRcdFx0J2J1bXBNYXAnLFxuXHRcdFx0XHQnYnVtcFNjYWxlJyxcblx0XHRcdFx0J25vcm1hbE1hcCcsXG5cdFx0XHRcdCdub3JtYWxNYXBUeXBlJyxcblx0XHRcdFx0J2Rpc3BsYWNlbWVudE1hcCcsXG5cdFx0XHRcdCdkaXNwbGFjZW1lbnRTY2FsZScsXG5cdFx0XHRcdCdkaXNwbGFjZW1lbnRCaWFzJyxcblx0XHRcdFx0J3NwZWN1bGFyTWFwJyxcblx0XHRcdFx0J3NwZWN1bGFyJyxcblx0XHRcdFx0J2dsb3NzaW5lc3NNYXAnLFxuXHRcdFx0XHQnZ2xvc3NpbmVzcycsXG5cdFx0XHRcdCdhbHBoYU1hcCcsXG5cdFx0XHRcdCdlbnZNYXAnLFxuXHRcdFx0XHQnZW52TWFwSW50ZW5zaXR5Jyxcblx0XHRcdFx0J3JlZnJhY3Rpb25SYXRpbycsXG5cdFx0XHRdLFxuXG5cdFx0XHRnZXRNYXRlcmlhbFR5cGU6IGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0XHRyZXR1cm4gR0xURk1lc2hTdGFuZGFyZFNHTWF0ZXJpYWw7XG5cblx0XHRcdH0sXG5cblx0XHRcdGV4dGVuZFBhcmFtczogZnVuY3Rpb24gKCBtYXRlcmlhbFBhcmFtcywgbWF0ZXJpYWxEZWYsIHBhcnNlciApIHtcblxuXHRcdFx0XHR2YXIgcGJyU3BlY3VsYXJHbG9zc2luZXNzID0gbWF0ZXJpYWxEZWYuZXh0ZW5zaW9uc1sgdGhpcy5uYW1lIF07XG5cblx0XHRcdFx0bWF0ZXJpYWxQYXJhbXMuY29sb3IgPSBuZXcgQ29sb3IoIDEuMCwgMS4wLCAxLjAgKTtcblx0XHRcdFx0bWF0ZXJpYWxQYXJhbXMub3BhY2l0eSA9IDEuMDtcblxuXHRcdFx0XHR2YXIgcGVuZGluZyA9IFtdO1xuXG5cdFx0XHRcdGlmICggQXJyYXkuaXNBcnJheSggcGJyU3BlY3VsYXJHbG9zc2luZXNzLmRpZmZ1c2VGYWN0b3IgKSApIHtcblxuXHRcdFx0XHRcdHZhciBhcnJheSA9IHBiclNwZWN1bGFyR2xvc3NpbmVzcy5kaWZmdXNlRmFjdG9yO1xuXG5cdFx0XHRcdFx0bWF0ZXJpYWxQYXJhbXMuY29sb3IuZnJvbUFycmF5KCBhcnJheSApO1xuXHRcdFx0XHRcdG1hdGVyaWFsUGFyYW1zLm9wYWNpdHkgPSBhcnJheVsgMyBdO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoIHBiclNwZWN1bGFyR2xvc3NpbmVzcy5kaWZmdXNlVGV4dHVyZSAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRcdFx0cGVuZGluZy5wdXNoKCBwYXJzZXIuYXNzaWduVGV4dHVyZSggbWF0ZXJpYWxQYXJhbXMsICdtYXAnLCBwYnJTcGVjdWxhckdsb3NzaW5lc3MuZGlmZnVzZVRleHR1cmUgKSApO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRtYXRlcmlhbFBhcmFtcy5lbWlzc2l2ZSA9IG5ldyBDb2xvciggMC4wLCAwLjAsIDAuMCApO1xuXHRcdFx0XHRtYXRlcmlhbFBhcmFtcy5nbG9zc2luZXNzID0gcGJyU3BlY3VsYXJHbG9zc2luZXNzLmdsb3NzaW5lc3NGYWN0b3IgIT09IHVuZGVmaW5lZCA/IHBiclNwZWN1bGFyR2xvc3NpbmVzcy5nbG9zc2luZXNzRmFjdG9yIDogMS4wO1xuXHRcdFx0XHRtYXRlcmlhbFBhcmFtcy5zcGVjdWxhciA9IG5ldyBDb2xvciggMS4wLCAxLjAsIDEuMCApO1xuXG5cdFx0XHRcdGlmICggQXJyYXkuaXNBcnJheSggcGJyU3BlY3VsYXJHbG9zc2luZXNzLnNwZWN1bGFyRmFjdG9yICkgKSB7XG5cblx0XHRcdFx0XHRtYXRlcmlhbFBhcmFtcy5zcGVjdWxhci5mcm9tQXJyYXkoIHBiclNwZWN1bGFyR2xvc3NpbmVzcy5zcGVjdWxhckZhY3RvciApO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoIHBiclNwZWN1bGFyR2xvc3NpbmVzcy5zcGVjdWxhckdsb3NzaW5lc3NUZXh0dXJlICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0XHR2YXIgc3BlY0dsb3NzTWFwRGVmID0gcGJyU3BlY3VsYXJHbG9zc2luZXNzLnNwZWN1bGFyR2xvc3NpbmVzc1RleHR1cmU7XG5cdFx0XHRcdFx0cGVuZGluZy5wdXNoKCBwYXJzZXIuYXNzaWduVGV4dHVyZSggbWF0ZXJpYWxQYXJhbXMsICdnbG9zc2luZXNzTWFwJywgc3BlY0dsb3NzTWFwRGVmICkgKTtcblx0XHRcdFx0XHRwZW5kaW5nLnB1c2goIHBhcnNlci5hc3NpZ25UZXh0dXJlKCBtYXRlcmlhbFBhcmFtcywgJ3NwZWN1bGFyTWFwJywgc3BlY0dsb3NzTWFwRGVmICkgKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIFByb21pc2UuYWxsKCBwZW5kaW5nICk7XG5cblx0XHRcdH0sXG5cblx0XHRcdGNyZWF0ZU1hdGVyaWFsOiBmdW5jdGlvbiAoIG1hdGVyaWFsUGFyYW1zICkge1xuXG5cdFx0XHRcdHZhciBtYXRlcmlhbCA9IG5ldyBHTFRGTWVzaFN0YW5kYXJkU0dNYXRlcmlhbCggbWF0ZXJpYWxQYXJhbXMgKTtcblx0XHRcdFx0bWF0ZXJpYWwuZm9nID0gdHJ1ZTtcblxuXHRcdFx0XHRtYXRlcmlhbC5jb2xvciA9IG1hdGVyaWFsUGFyYW1zLmNvbG9yO1xuXG5cdFx0XHRcdG1hdGVyaWFsLm1hcCA9IG1hdGVyaWFsUGFyYW1zLm1hcCA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IG1hdGVyaWFsUGFyYW1zLm1hcDtcblxuXHRcdFx0XHRtYXRlcmlhbC5saWdodE1hcCA9IG51bGw7XG5cdFx0XHRcdG1hdGVyaWFsLmxpZ2h0TWFwSW50ZW5zaXR5ID0gMS4wO1xuXG5cdFx0XHRcdG1hdGVyaWFsLmFvTWFwID0gbWF0ZXJpYWxQYXJhbXMuYW9NYXAgPT09IHVuZGVmaW5lZCA/IG51bGwgOiBtYXRlcmlhbFBhcmFtcy5hb01hcDtcblx0XHRcdFx0bWF0ZXJpYWwuYW9NYXBJbnRlbnNpdHkgPSAxLjA7XG5cblx0XHRcdFx0bWF0ZXJpYWwuZW1pc3NpdmUgPSBtYXRlcmlhbFBhcmFtcy5lbWlzc2l2ZTtcblx0XHRcdFx0bWF0ZXJpYWwuZW1pc3NpdmVJbnRlbnNpdHkgPSAxLjA7XG5cdFx0XHRcdG1hdGVyaWFsLmVtaXNzaXZlTWFwID0gbWF0ZXJpYWxQYXJhbXMuZW1pc3NpdmVNYXAgPT09IHVuZGVmaW5lZCA/IG51bGwgOiBtYXRlcmlhbFBhcmFtcy5lbWlzc2l2ZU1hcDtcblxuXHRcdFx0XHRtYXRlcmlhbC5idW1wTWFwID0gbWF0ZXJpYWxQYXJhbXMuYnVtcE1hcCA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IG1hdGVyaWFsUGFyYW1zLmJ1bXBNYXA7XG5cdFx0XHRcdG1hdGVyaWFsLmJ1bXBTY2FsZSA9IDE7XG5cblx0XHRcdFx0bWF0ZXJpYWwubm9ybWFsTWFwID0gbWF0ZXJpYWxQYXJhbXMubm9ybWFsTWFwID09PSB1bmRlZmluZWQgPyBudWxsIDogbWF0ZXJpYWxQYXJhbXMubm9ybWFsTWFwO1xuXHRcdFx0XHRtYXRlcmlhbC5ub3JtYWxNYXBUeXBlID0gVGFuZ2VudFNwYWNlTm9ybWFsTWFwO1xuXG5cdFx0XHRcdGlmICggbWF0ZXJpYWxQYXJhbXMubm9ybWFsU2NhbGUgKSBtYXRlcmlhbC5ub3JtYWxTY2FsZSA9IG1hdGVyaWFsUGFyYW1zLm5vcm1hbFNjYWxlO1xuXG5cdFx0XHRcdG1hdGVyaWFsLmRpc3BsYWNlbWVudE1hcCA9IG51bGw7XG5cdFx0XHRcdG1hdGVyaWFsLmRpc3BsYWNlbWVudFNjYWxlID0gMTtcblx0XHRcdFx0bWF0ZXJpYWwuZGlzcGxhY2VtZW50QmlhcyA9IDA7XG5cblx0XHRcdFx0bWF0ZXJpYWwuc3BlY3VsYXJNYXAgPSBtYXRlcmlhbFBhcmFtcy5zcGVjdWxhck1hcCA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IG1hdGVyaWFsUGFyYW1zLnNwZWN1bGFyTWFwO1xuXHRcdFx0XHRtYXRlcmlhbC5zcGVjdWxhciA9IG1hdGVyaWFsUGFyYW1zLnNwZWN1bGFyO1xuXG5cdFx0XHRcdG1hdGVyaWFsLmdsb3NzaW5lc3NNYXAgPSBtYXRlcmlhbFBhcmFtcy5nbG9zc2luZXNzTWFwID09PSB1bmRlZmluZWQgPyBudWxsIDogbWF0ZXJpYWxQYXJhbXMuZ2xvc3NpbmVzc01hcDtcblx0XHRcdFx0bWF0ZXJpYWwuZ2xvc3NpbmVzcyA9IG1hdGVyaWFsUGFyYW1zLmdsb3NzaW5lc3M7XG5cblx0XHRcdFx0bWF0ZXJpYWwuYWxwaGFNYXAgPSBudWxsO1xuXG5cdFx0XHRcdG1hdGVyaWFsLmVudk1hcCA9IG1hdGVyaWFsUGFyYW1zLmVudk1hcCA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IG1hdGVyaWFsUGFyYW1zLmVudk1hcDtcblx0XHRcdFx0bWF0ZXJpYWwuZW52TWFwSW50ZW5zaXR5ID0gMS4wO1xuXG5cdFx0XHRcdG1hdGVyaWFsLnJlZnJhY3Rpb25SYXRpbyA9IDAuOTg7XG5cblx0XHRcdFx0cmV0dXJuIG1hdGVyaWFsO1xuXG5cdFx0XHR9LFxuXG5cdFx0fTtcblxuXHR9XG5cblx0LyoqXG5cdCAqIE1lc2ggUXVhbnRpemF0aW9uIEV4dGVuc2lvblxuXHQgKlxuXHQgKiBTcGVjaWZpY2F0aW9uOiBodHRwczovL2dpdGh1Yi5jb20vS2hyb25vc0dyb3VwL2dsVEYvdHJlZS9tYXN0ZXIvZXh0ZW5zaW9ucy8yLjAvS2hyb25vcy9LSFJfbWVzaF9xdWFudGl6YXRpb25cblx0ICovXG5cdGZ1bmN0aW9uIEdMVEZNZXNoUXVhbnRpemF0aW9uRXh0ZW5zaW9uKCkge1xuXG5cdFx0dGhpcy5uYW1lID0gRVhURU5TSU9OUy5LSFJfTUVTSF9RVUFOVElaQVRJT047XG5cblx0fVxuXG5cdC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cdC8qKioqKioqKioqIElOVEVSUE9MQVRJT04gKioqKioqKiovXG5cdC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cblx0Ly8gU3BsaW5lIEludGVycG9sYXRpb25cblx0Ly8gU3BlY2lmaWNhdGlvbjogaHR0cHM6Ly9naXRodWIuY29tL0tocm9ub3NHcm91cC9nbFRGL2Jsb2IvbWFzdGVyL3NwZWNpZmljYXRpb24vMi4wL1JFQURNRS5tZCNhcHBlbmRpeC1jLXNwbGluZS1pbnRlcnBvbGF0aW9uXG5cdGZ1bmN0aW9uIEdMVEZDdWJpY1NwbGluZUludGVycG9sYW50KCBwYXJhbWV0ZXJQb3NpdGlvbnMsIHNhbXBsZVZhbHVlcywgc2FtcGxlU2l6ZSwgcmVzdWx0QnVmZmVyICkge1xuXG5cdFx0SW50ZXJwb2xhbnQuY2FsbCggdGhpcywgcGFyYW1ldGVyUG9zaXRpb25zLCBzYW1wbGVWYWx1ZXMsIHNhbXBsZVNpemUsIHJlc3VsdEJ1ZmZlciApO1xuXG5cdH1cblxuXHRHTFRGQ3ViaWNTcGxpbmVJbnRlcnBvbGFudC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBJbnRlcnBvbGFudC5wcm90b3R5cGUgKTtcblx0R0xURkN1YmljU3BsaW5lSW50ZXJwb2xhbnQucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gR0xURkN1YmljU3BsaW5lSW50ZXJwb2xhbnQ7XG5cblx0R0xURkN1YmljU3BsaW5lSW50ZXJwb2xhbnQucHJvdG90eXBlLmNvcHlTYW1wbGVWYWx1ZV8gPSBmdW5jdGlvbiAoIGluZGV4ICkge1xuXG5cdFx0Ly8gQ29waWVzIGEgc2FtcGxlIHZhbHVlIHRvIHRoZSByZXN1bHQgYnVmZmVyLiBTZWUgZGVzY3JpcHRpb24gb2YgZ2xURlxuXHRcdC8vIENVQklDU1BMSU5FIHZhbHVlcyBsYXlvdXQgaW4gaW50ZXJwb2xhdGVfKCkgZnVuY3Rpb24gYmVsb3cuXG5cblx0XHR2YXIgcmVzdWx0ID0gdGhpcy5yZXN1bHRCdWZmZXIsXG5cdFx0XHR2YWx1ZXMgPSB0aGlzLnNhbXBsZVZhbHVlcyxcblx0XHRcdHZhbHVlU2l6ZSA9IHRoaXMudmFsdWVTaXplLFxuXHRcdFx0b2Zmc2V0ID0gaW5kZXggKiB2YWx1ZVNpemUgKiAzICsgdmFsdWVTaXplO1xuXG5cdFx0Zm9yICggdmFyIGkgPSAwOyBpICE9PSB2YWx1ZVNpemU7IGkgKysgKSB7XG5cblx0XHRcdHJlc3VsdFsgaSBdID0gdmFsdWVzWyBvZmZzZXQgKyBpIF07XG5cblx0XHR9XG5cblx0XHRyZXR1cm4gcmVzdWx0O1xuXG5cdH07XG5cblx0R0xURkN1YmljU3BsaW5lSW50ZXJwb2xhbnQucHJvdG90eXBlLmJlZm9yZVN0YXJ0XyA9IEdMVEZDdWJpY1NwbGluZUludGVycG9sYW50LnByb3RvdHlwZS5jb3B5U2FtcGxlVmFsdWVfO1xuXG5cdEdMVEZDdWJpY1NwbGluZUludGVycG9sYW50LnByb3RvdHlwZS5hZnRlckVuZF8gPSBHTFRGQ3ViaWNTcGxpbmVJbnRlcnBvbGFudC5wcm90b3R5cGUuY29weVNhbXBsZVZhbHVlXztcblxuXHRHTFRGQ3ViaWNTcGxpbmVJbnRlcnBvbGFudC5wcm90b3R5cGUuaW50ZXJwb2xhdGVfID0gZnVuY3Rpb24gKCBpMSwgdDAsIHQsIHQxICkge1xuXG5cdFx0dmFyIHJlc3VsdCA9IHRoaXMucmVzdWx0QnVmZmVyO1xuXHRcdHZhciB2YWx1ZXMgPSB0aGlzLnNhbXBsZVZhbHVlcztcblx0XHR2YXIgc3RyaWRlID0gdGhpcy52YWx1ZVNpemU7XG5cblx0XHR2YXIgc3RyaWRlMiA9IHN0cmlkZSAqIDI7XG5cdFx0dmFyIHN0cmlkZTMgPSBzdHJpZGUgKiAzO1xuXG5cdFx0dmFyIHRkID0gdDEgLSB0MDtcblxuXHRcdHZhciBwID0gKCB0IC0gdDAgKSAvIHRkO1xuXHRcdHZhciBwcCA9IHAgKiBwO1xuXHRcdHZhciBwcHAgPSBwcCAqIHA7XG5cblx0XHR2YXIgb2Zmc2V0MSA9IGkxICogc3RyaWRlMztcblx0XHR2YXIgb2Zmc2V0MCA9IG9mZnNldDEgLSBzdHJpZGUzO1xuXG5cdFx0dmFyIHMyID0gLSAyICogcHBwICsgMyAqIHBwO1xuXHRcdHZhciBzMyA9IHBwcCAtIHBwO1xuXHRcdHZhciBzMCA9IDEgLSBzMjtcblx0XHR2YXIgczEgPSBzMyAtIHBwICsgcDtcblxuXHRcdC8vIExheW91dCBvZiBrZXlmcmFtZSBvdXRwdXQgdmFsdWVzIGZvciBDVUJJQ1NQTElORSBhbmltYXRpb25zOlxuXHRcdC8vICAgWyBpblRhbmdlbnRfMSwgc3BsaW5lVmVydGV4XzEsIG91dFRhbmdlbnRfMSwgaW5UYW5nZW50XzIsIHNwbGluZVZlcnRleF8yLCAuLi4gXVxuXHRcdGZvciAoIHZhciBpID0gMDsgaSAhPT0gc3RyaWRlOyBpICsrICkge1xuXG5cdFx0XHR2YXIgcDAgPSB2YWx1ZXNbIG9mZnNldDAgKyBpICsgc3RyaWRlIF07IC8vIHNwbGluZVZlcnRleF9rXG5cdFx0XHR2YXIgbTAgPSB2YWx1ZXNbIG9mZnNldDAgKyBpICsgc3RyaWRlMiBdICogdGQ7IC8vIG91dFRhbmdlbnRfayAqICh0X2srMSAtIHRfaylcblx0XHRcdHZhciBwMSA9IHZhbHVlc1sgb2Zmc2V0MSArIGkgKyBzdHJpZGUgXTsgLy8gc3BsaW5lVmVydGV4X2srMVxuXHRcdFx0dmFyIG0xID0gdmFsdWVzWyBvZmZzZXQxICsgaSBdICogdGQ7IC8vIGluVGFuZ2VudF9rKzEgKiAodF9rKzEgLSB0X2spXG5cblx0XHRcdHJlc3VsdFsgaSBdID0gczAgKiBwMCArIHMxICogbTAgKyBzMiAqIHAxICsgczMgKiBtMTtcblxuXHRcdH1cblxuXHRcdHJldHVybiByZXN1bHQ7XG5cblx0fTtcblxuXHQvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXHQvKioqKioqKioqKiBJTlRFUk5BTFMgKioqKioqKioqKioqL1xuXHQvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG5cdC8qIENPTlNUQU5UUyAqL1xuXG5cdHZhciBXRUJHTF9DT05TVEFOVFMgPSB7XG5cdFx0RkxPQVQ6IDUxMjYsXG5cdFx0Ly9GTE9BVF9NQVQyOiAzNTY3NCxcblx0XHRGTE9BVF9NQVQzOiAzNTY3NSxcblx0XHRGTE9BVF9NQVQ0OiAzNTY3Nixcblx0XHRGTE9BVF9WRUMyOiAzNTY2NCxcblx0XHRGTE9BVF9WRUMzOiAzNTY2NSxcblx0XHRGTE9BVF9WRUM0OiAzNTY2Nixcblx0XHRMSU5FQVI6IDk3MjksXG5cdFx0UkVQRUFUOiAxMDQ5Nyxcblx0XHRTQU1QTEVSXzJEOiAzNTY3OCxcblx0XHRQT0lOVFM6IDAsXG5cdFx0TElORVM6IDEsXG5cdFx0TElORV9MT09QOiAyLFxuXHRcdExJTkVfU1RSSVA6IDMsXG5cdFx0VFJJQU5HTEVTOiA0LFxuXHRcdFRSSUFOR0xFX1NUUklQOiA1LFxuXHRcdFRSSUFOR0xFX0ZBTjogNixcblx0XHRVTlNJR05FRF9CWVRFOiA1MTIxLFxuXHRcdFVOU0lHTkVEX1NIT1JUOiA1MTIzXG5cdH07XG5cblx0dmFyIFdFQkdMX0NPTVBPTkVOVF9UWVBFUyA9IHtcblx0XHQ1MTIwOiBJbnQ4QXJyYXksXG5cdFx0NTEyMTogVWludDhBcnJheSxcblx0XHQ1MTIyOiBJbnQxNkFycmF5LFxuXHRcdDUxMjM6IFVpbnQxNkFycmF5LFxuXHRcdDUxMjU6IFVpbnQzMkFycmF5LFxuXHRcdDUxMjY6IEZsb2F0MzJBcnJheVxuXHR9O1xuXG5cdHZhciBXRUJHTF9GSUxURVJTID0ge1xuXHRcdDk3Mjg6IE5lYXJlc3RGaWx0ZXIsXG5cdFx0OTcyOTogTGluZWFyRmlsdGVyLFxuXHRcdDk5ODQ6IE5lYXJlc3RNaXBtYXBOZWFyZXN0RmlsdGVyLFxuXHRcdDk5ODU6IExpbmVhck1pcG1hcE5lYXJlc3RGaWx0ZXIsXG5cdFx0OTk4NjogTmVhcmVzdE1pcG1hcExpbmVhckZpbHRlcixcblx0XHQ5OTg3OiBMaW5lYXJNaXBtYXBMaW5lYXJGaWx0ZXJcblx0fTtcblxuXHR2YXIgV0VCR0xfV1JBUFBJTkdTID0ge1xuXHRcdDMzMDcxOiBDbGFtcFRvRWRnZVdyYXBwaW5nLFxuXHRcdDMzNjQ4OiBNaXJyb3JlZFJlcGVhdFdyYXBwaW5nLFxuXHRcdDEwNDk3OiBSZXBlYXRXcmFwcGluZ1xuXHR9O1xuXG5cdHZhciBXRUJHTF9UWVBFX1NJWkVTID0ge1xuXHRcdCdTQ0FMQVInOiAxLFxuXHRcdCdWRUMyJzogMixcblx0XHQnVkVDMyc6IDMsXG5cdFx0J1ZFQzQnOiA0LFxuXHRcdCdNQVQyJzogNCxcblx0XHQnTUFUMyc6IDksXG5cdFx0J01BVDQnOiAxNlxuXHR9O1xuXG5cdHZhciBBVFRSSUJVVEVTID0ge1xuXHRcdFBPU0lUSU9OOiAncG9zaXRpb24nLFxuXHRcdE5PUk1BTDogJ25vcm1hbCcsXG5cdFx0VEFOR0VOVDogJ3RhbmdlbnQnLFxuXHRcdFRFWENPT1JEXzA6ICd1dicsXG5cdFx0VEVYQ09PUkRfMTogJ3V2MicsXG5cdFx0Q09MT1JfMDogJ2NvbG9yJyxcblx0XHRXRUlHSFRTXzA6ICdza2luV2VpZ2h0Jyxcblx0XHRKT0lOVFNfMDogJ3NraW5JbmRleCcsXG5cdH07XG5cblx0dmFyIFBBVEhfUFJPUEVSVElFUyA9IHtcblx0XHRzY2FsZTogJ3NjYWxlJyxcblx0XHR0cmFuc2xhdGlvbjogJ3Bvc2l0aW9uJyxcblx0XHRyb3RhdGlvbjogJ3F1YXRlcm5pb24nLFxuXHRcdHdlaWdodHM6ICdtb3JwaFRhcmdldEluZmx1ZW5jZXMnXG5cdH07XG5cblx0dmFyIElOVEVSUE9MQVRJT04gPSB7XG5cdFx0Q1VCSUNTUExJTkU6IHVuZGVmaW5lZCwgLy8gV2UgdXNlIGEgY3VzdG9tIGludGVycG9sYW50IChHTFRGQ3ViaWNTcGxpbmVJbnRlcnBvbGF0aW9uKSBmb3IgQ1VCSUNTUExJTkUgdHJhY2tzLiBFYWNoXG5cdFx0ICAgICAgICAgICAgICAgICAgICAgICAgLy8ga2V5ZnJhbWUgdHJhY2sgd2lsbCBiZSBpbml0aWFsaXplZCB3aXRoIGEgZGVmYXVsdCBpbnRlcnBvbGF0aW9uIHR5cGUsIHRoZW4gbW9kaWZpZWQuXG5cdFx0TElORUFSOiBJbnRlcnBvbGF0ZUxpbmVhcixcblx0XHRTVEVQOiBJbnRlcnBvbGF0ZURpc2NyZXRlXG5cdH07XG5cblx0dmFyIEFMUEhBX01PREVTID0ge1xuXHRcdE9QQVFVRTogJ09QQVFVRScsXG5cdFx0TUFTSzogJ01BU0snLFxuXHRcdEJMRU5EOiAnQkxFTkQnXG5cdH07XG5cblx0LyogVVRJTElUWSBGVU5DVElPTlMgKi9cblxuXHRmdW5jdGlvbiByZXNvbHZlVVJMKCB1cmwsIHBhdGggKSB7XG5cblx0XHQvLyBJbnZhbGlkIFVSTFxuXHRcdGlmICggdHlwZW9mIHVybCAhPT0gJ3N0cmluZycgfHwgdXJsID09PSAnJyApIHJldHVybiAnJztcblxuXHRcdC8vIEhvc3QgUmVsYXRpdmUgVVJMXG5cdFx0aWYgKCAvXmh0dHBzPzpcXC9cXC8vaS50ZXN0KCBwYXRoICkgJiYgL15cXC8vLnRlc3QoIHVybCApICkge1xuXG5cdFx0XHRwYXRoID0gcGF0aC5yZXBsYWNlKCAvKF5odHRwcz86XFwvXFwvW15cXC9dKykuKi9pLCAnJDEnICk7XG5cblx0XHR9XG5cblx0XHQvLyBBYnNvbHV0ZSBVUkwgaHR0cDovLyxodHRwczovLywvL1xuXHRcdGlmICggL14oaHR0cHM/Oik/XFwvXFwvL2kudGVzdCggdXJsICkgKSByZXR1cm4gdXJsO1xuXG5cdFx0Ly8gRGF0YSBVUklcblx0XHRpZiAoIC9eZGF0YTouKiwuKiQvaS50ZXN0KCB1cmwgKSApIHJldHVybiB1cmw7XG5cblx0XHQvLyBCbG9iIFVSTFxuXHRcdGlmICggL15ibG9iOi4qJC9pLnRlc3QoIHVybCApICkgcmV0dXJuIHVybDtcblxuXHRcdC8vIFJlbGF0aXZlIFVSTFxuXHRcdHJldHVybiBwYXRoICsgdXJsO1xuXG5cdH1cblxuXHQvKipcblx0ICogU3BlY2lmaWNhdGlvbjogaHR0cHM6Ly9naXRodWIuY29tL0tocm9ub3NHcm91cC9nbFRGL2Jsb2IvbWFzdGVyL3NwZWNpZmljYXRpb24vMi4wL1JFQURNRS5tZCNkZWZhdWx0LW1hdGVyaWFsXG5cdCAqL1xuXHRmdW5jdGlvbiBjcmVhdGVEZWZhdWx0TWF0ZXJpYWwoIGNhY2hlICkge1xuXG5cdFx0aWYgKCBjYWNoZVsgJ0RlZmF1bHRNYXRlcmlhbCcgXSA9PT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRjYWNoZVsgJ0RlZmF1bHRNYXRlcmlhbCcgXSA9IG5ldyBNZXNoU3RhbmRhcmRNYXRlcmlhbCgge1xuXHRcdFx0XHRjb2xvcjogMHhGRkZGRkYsXG5cdFx0XHRcdGVtaXNzaXZlOiAweDAwMDAwMCxcblx0XHRcdFx0bWV0YWxuZXNzOiAxLFxuXHRcdFx0XHRyb3VnaG5lc3M6IDEsXG5cdFx0XHRcdHRyYW5zcGFyZW50OiBmYWxzZSxcblx0XHRcdFx0ZGVwdGhUZXN0OiB0cnVlLFxuXHRcdFx0XHRzaWRlOiBGcm9udFNpZGVcblx0XHRcdH0gKTtcblxuXHRcdH1cblxuXHRcdHJldHVybiBjYWNoZVsgJ0RlZmF1bHRNYXRlcmlhbCcgXTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gYWRkVW5rbm93bkV4dGVuc2lvbnNUb1VzZXJEYXRhKCBrbm93bkV4dGVuc2lvbnMsIG9iamVjdCwgb2JqZWN0RGVmICkge1xuXG5cdFx0Ly8gQWRkIHVua25vd24gZ2xURiBleHRlbnNpb25zIHRvIGFuIG9iamVjdCdzIHVzZXJEYXRhLlxuXG5cdFx0Zm9yICggdmFyIG5hbWUgaW4gb2JqZWN0RGVmLmV4dGVuc2lvbnMgKSB7XG5cblx0XHRcdGlmICgga25vd25FeHRlbnNpb25zWyBuYW1lIF0gPT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0XHRvYmplY3QudXNlckRhdGEuZ2x0ZkV4dGVuc2lvbnMgPSBvYmplY3QudXNlckRhdGEuZ2x0ZkV4dGVuc2lvbnMgfHwge307XG5cdFx0XHRcdG9iamVjdC51c2VyRGF0YS5nbHRmRXh0ZW5zaW9uc1sgbmFtZSBdID0gb2JqZWN0RGVmLmV4dGVuc2lvbnNbIG5hbWUgXTtcblxuXHRcdFx0fVxuXG5cdFx0fVxuXG5cdH1cblxuXHQvKipcblx0ICogQHBhcmFtIHtPYmplY3QzRHxNYXRlcmlhbHxCdWZmZXJHZW9tZXRyeX0gb2JqZWN0XG5cdCAqIEBwYXJhbSB7R0xURi5kZWZpbml0aW9ufSBnbHRmRGVmXG5cdCAqL1xuXHRmdW5jdGlvbiBhc3NpZ25FeHRyYXNUb1VzZXJEYXRhKCBvYmplY3QsIGdsdGZEZWYgKSB7XG5cblx0XHRpZiAoIGdsdGZEZWYuZXh0cmFzICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdGlmICggdHlwZW9mIGdsdGZEZWYuZXh0cmFzID09PSAnb2JqZWN0JyApIHtcblxuXHRcdFx0XHRPYmplY3QuYXNzaWduKCBvYmplY3QudXNlckRhdGEsIGdsdGZEZWYuZXh0cmFzICk7XG5cblx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0Y29uc29sZS53YXJuKCAnVEhSRUUuR0xURkxvYWRlcjogSWdub3JpbmcgcHJpbWl0aXZlIHR5cGUgLmV4dHJhcywgJyArIGdsdGZEZWYuZXh0cmFzICk7XG5cblx0XHRcdH1cblxuXHRcdH1cblxuXHR9XG5cblx0LyoqXG5cdCAqIFNwZWNpZmljYXRpb246IGh0dHBzOi8vZ2l0aHViLmNvbS9LaHJvbm9zR3JvdXAvZ2xURi9ibG9iL21hc3Rlci9zcGVjaWZpY2F0aW9uLzIuMC9SRUFETUUubWQjbW9ycGgtdGFyZ2V0c1xuXHQgKlxuXHQgKiBAcGFyYW0ge0J1ZmZlckdlb21ldHJ5fSBnZW9tZXRyeVxuXHQgKiBAcGFyYW0ge0FycmF5PEdMVEYuVGFyZ2V0Pn0gdGFyZ2V0c1xuXHQgKiBAcGFyYW0ge0dMVEZQYXJzZXJ9IHBhcnNlclxuXHQgKiBAcmV0dXJuIHtQcm9taXNlPEJ1ZmZlckdlb21ldHJ5Pn1cblx0ICovXG5cdGZ1bmN0aW9uIGFkZE1vcnBoVGFyZ2V0cyggZ2VvbWV0cnksIHRhcmdldHMsIHBhcnNlciApIHtcblxuXHRcdHZhciBoYXNNb3JwaFBvc2l0aW9uID0gZmFsc2U7XG5cdFx0dmFyIGhhc01vcnBoTm9ybWFsID0gZmFsc2U7XG5cblx0XHRmb3IgKCB2YXIgaSA9IDAsIGlsID0gdGFyZ2V0cy5sZW5ndGg7IGkgPCBpbDsgaSArKyApIHtcblxuXHRcdFx0dmFyIHRhcmdldCA9IHRhcmdldHNbIGkgXTtcblxuXHRcdFx0aWYgKCB0YXJnZXQuUE9TSVRJT04gIT09IHVuZGVmaW5lZCApIGhhc01vcnBoUG9zaXRpb24gPSB0cnVlO1xuXHRcdFx0aWYgKCB0YXJnZXQuTk9STUFMICE9PSB1bmRlZmluZWQgKSBoYXNNb3JwaE5vcm1hbCA9IHRydWU7XG5cblx0XHRcdGlmICggaGFzTW9ycGhQb3NpdGlvbiAmJiBoYXNNb3JwaE5vcm1hbCApIGJyZWFrO1xuXG5cdFx0fVxuXG5cdFx0aWYgKCAhIGhhc01vcnBoUG9zaXRpb24gJiYgISBoYXNNb3JwaE5vcm1hbCApIHJldHVybiBQcm9taXNlLnJlc29sdmUoIGdlb21ldHJ5ICk7XG5cblx0XHR2YXIgcGVuZGluZ1Bvc2l0aW9uQWNjZXNzb3JzID0gW107XG5cdFx0dmFyIHBlbmRpbmdOb3JtYWxBY2Nlc3NvcnMgPSBbXTtcblxuXHRcdGZvciAoIHZhciBpID0gMCwgaWwgPSB0YXJnZXRzLmxlbmd0aDsgaSA8IGlsOyBpICsrICkge1xuXG5cdFx0XHR2YXIgdGFyZ2V0ID0gdGFyZ2V0c1sgaSBdO1xuXG5cdFx0XHRpZiAoIGhhc01vcnBoUG9zaXRpb24gKSB7XG5cblx0XHRcdFx0dmFyIHBlbmRpbmdBY2Nlc3NvciA9IHRhcmdldC5QT1NJVElPTiAhPT0gdW5kZWZpbmVkXG5cdFx0XHRcdFx0PyBwYXJzZXIuZ2V0RGVwZW5kZW5jeSggJ2FjY2Vzc29yJywgdGFyZ2V0LlBPU0lUSU9OIClcblx0XHRcdFx0XHQ6IGdlb21ldHJ5LmF0dHJpYnV0ZXMucG9zaXRpb247XG5cblx0XHRcdFx0cGVuZGluZ1Bvc2l0aW9uQWNjZXNzb3JzLnB1c2goIHBlbmRpbmdBY2Nlc3NvciApO1xuXG5cdFx0XHR9XG5cblx0XHRcdGlmICggaGFzTW9ycGhOb3JtYWwgKSB7XG5cblx0XHRcdFx0dmFyIHBlbmRpbmdBY2Nlc3NvciA9IHRhcmdldC5OT1JNQUwgIT09IHVuZGVmaW5lZFxuXHRcdFx0XHRcdD8gcGFyc2VyLmdldERlcGVuZGVuY3koICdhY2Nlc3NvcicsIHRhcmdldC5OT1JNQUwgKVxuXHRcdFx0XHRcdDogZ2VvbWV0cnkuYXR0cmlidXRlcy5ub3JtYWw7XG5cblx0XHRcdFx0cGVuZGluZ05vcm1hbEFjY2Vzc29ycy5wdXNoKCBwZW5kaW5nQWNjZXNzb3IgKTtcblxuXHRcdFx0fVxuXG5cdFx0fVxuXG5cdFx0cmV0dXJuIFByb21pc2UuYWxsKCBbXG5cdFx0XHRQcm9taXNlLmFsbCggcGVuZGluZ1Bvc2l0aW9uQWNjZXNzb3JzICksXG5cdFx0XHRQcm9taXNlLmFsbCggcGVuZGluZ05vcm1hbEFjY2Vzc29ycyApXG5cdFx0XSApLnRoZW4oIGZ1bmN0aW9uICggYWNjZXNzb3JzICkge1xuXG5cdFx0XHR2YXIgbW9ycGhQb3NpdGlvbnMgPSBhY2Nlc3NvcnNbIDAgXTtcblx0XHRcdHZhciBtb3JwaE5vcm1hbHMgPSBhY2Nlc3NvcnNbIDEgXTtcblxuXHRcdFx0aWYgKCBoYXNNb3JwaFBvc2l0aW9uICkgZ2VvbWV0cnkubW9ycGhBdHRyaWJ1dGVzLnBvc2l0aW9uID0gbW9ycGhQb3NpdGlvbnM7XG5cdFx0XHRpZiAoIGhhc01vcnBoTm9ybWFsICkgZ2VvbWV0cnkubW9ycGhBdHRyaWJ1dGVzLm5vcm1hbCA9IG1vcnBoTm9ybWFscztcblx0XHRcdGdlb21ldHJ5Lm1vcnBoVGFyZ2V0c1JlbGF0aXZlID0gdHJ1ZTtcblxuXHRcdFx0cmV0dXJuIGdlb21ldHJ5O1xuXG5cdFx0fSApO1xuXG5cdH1cblxuXHQvKipcblx0ICogQHBhcmFtIHtNZXNofSBtZXNoXG5cdCAqIEBwYXJhbSB7R0xURi5NZXNofSBtZXNoRGVmXG5cdCAqL1xuXHRmdW5jdGlvbiB1cGRhdGVNb3JwaFRhcmdldHMoIG1lc2gsIG1lc2hEZWYgKSB7XG5cblx0XHRtZXNoLnVwZGF0ZU1vcnBoVGFyZ2V0cygpO1xuXG5cdFx0aWYgKCBtZXNoRGVmLndlaWdodHMgIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0Zm9yICggdmFyIGkgPSAwLCBpbCA9IG1lc2hEZWYud2VpZ2h0cy5sZW5ndGg7IGkgPCBpbDsgaSArKyApIHtcblxuXHRcdFx0XHRtZXNoLm1vcnBoVGFyZ2V0SW5mbHVlbmNlc1sgaSBdID0gbWVzaERlZi53ZWlnaHRzWyBpIF07XG5cblx0XHRcdH1cblxuXHRcdH1cblxuXHRcdC8vIC5leHRyYXMgaGFzIHVzZXItZGVmaW5lZCBkYXRhLCBzbyBjaGVjayB0aGF0IC5leHRyYXMudGFyZ2V0TmFtZXMgaXMgYW4gYXJyYXkuXG5cdFx0aWYgKCBtZXNoRGVmLmV4dHJhcyAmJiBBcnJheS5pc0FycmF5KCBtZXNoRGVmLmV4dHJhcy50YXJnZXROYW1lcyApICkge1xuXG5cdFx0XHR2YXIgdGFyZ2V0TmFtZXMgPSBtZXNoRGVmLmV4dHJhcy50YXJnZXROYW1lcztcblxuXHRcdFx0aWYgKCBtZXNoLm1vcnBoVGFyZ2V0SW5mbHVlbmNlcy5sZW5ndGggPT09IHRhcmdldE5hbWVzLmxlbmd0aCApIHtcblxuXHRcdFx0XHRtZXNoLm1vcnBoVGFyZ2V0RGljdGlvbmFyeSA9IHt9O1xuXG5cdFx0XHRcdGZvciAoIHZhciBpID0gMCwgaWwgPSB0YXJnZXROYW1lcy5sZW5ndGg7IGkgPCBpbDsgaSArKyApIHtcblxuXHRcdFx0XHRcdG1lc2gubW9ycGhUYXJnZXREaWN0aW9uYXJ5WyB0YXJnZXROYW1lc1sgaSBdIF0gPSBpO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRjb25zb2xlLndhcm4oICdUSFJFRS5HTFRGTG9hZGVyOiBJbnZhbGlkIGV4dHJhcy50YXJnZXROYW1lcyBsZW5ndGguIElnbm9yaW5nIG5hbWVzLicgKTtcblxuXHRcdFx0fVxuXG5cdFx0fVxuXG5cdH1cblxuXHRmdW5jdGlvbiBjcmVhdGVQcmltaXRpdmVLZXkoIHByaW1pdGl2ZURlZiApIHtcblxuXHRcdHZhciBkcmFjb0V4dGVuc2lvbiA9IHByaW1pdGl2ZURlZi5leHRlbnNpb25zICYmIHByaW1pdGl2ZURlZi5leHRlbnNpb25zWyBFWFRFTlNJT05TLktIUl9EUkFDT19NRVNIX0NPTVBSRVNTSU9OIF07XG5cdFx0dmFyIGdlb21ldHJ5S2V5O1xuXG5cdFx0aWYgKCBkcmFjb0V4dGVuc2lvbiApIHtcblxuXHRcdFx0Z2VvbWV0cnlLZXkgPSAnZHJhY286JyArIGRyYWNvRXh0ZW5zaW9uLmJ1ZmZlclZpZXdcblx0XHRcdFx0KyAnOicgKyBkcmFjb0V4dGVuc2lvbi5pbmRpY2VzXG5cdFx0XHRcdCsgJzonICsgY3JlYXRlQXR0cmlidXRlc0tleSggZHJhY29FeHRlbnNpb24uYXR0cmlidXRlcyApO1xuXG5cdFx0fSBlbHNlIHtcblxuXHRcdFx0Z2VvbWV0cnlLZXkgPSBwcmltaXRpdmVEZWYuaW5kaWNlcyArICc6JyArIGNyZWF0ZUF0dHJpYnV0ZXNLZXkoIHByaW1pdGl2ZURlZi5hdHRyaWJ1dGVzICkgKyAnOicgKyBwcmltaXRpdmVEZWYubW9kZTtcblxuXHRcdH1cblxuXHRcdHJldHVybiBnZW9tZXRyeUtleTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gY3JlYXRlQXR0cmlidXRlc0tleSggYXR0cmlidXRlcyApIHtcblxuXHRcdHZhciBhdHRyaWJ1dGVzS2V5ID0gJyc7XG5cblx0XHR2YXIga2V5cyA9IE9iamVjdC5rZXlzKCBhdHRyaWJ1dGVzICkuc29ydCgpO1xuXG5cdFx0Zm9yICggdmFyIGkgPSAwLCBpbCA9IGtleXMubGVuZ3RoOyBpIDwgaWw7IGkgKysgKSB7XG5cblx0XHRcdGF0dHJpYnV0ZXNLZXkgKz0ga2V5c1sgaSBdICsgJzonICsgYXR0cmlidXRlc1sga2V5c1sgaSBdIF0gKyAnOyc7XG5cblx0XHR9XG5cblx0XHRyZXR1cm4gYXR0cmlidXRlc0tleTtcblxuXHR9XG5cblx0LyogR0xURiBQQVJTRVIgKi9cblxuXHRmdW5jdGlvbiBHTFRGUGFyc2VyKCBqc29uLCBvcHRpb25zICkge1xuXG5cdFx0dGhpcy5qc29uID0ganNvbiB8fCB7fTtcblx0XHR0aGlzLmV4dGVuc2lvbnMgPSB7fTtcblx0XHR0aGlzLnBsdWdpbnMgPSB7fTtcblx0XHR0aGlzLm9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG5cdFx0Ly8gbG9hZGVyIG9iamVjdCBjYWNoZVxuXHRcdHRoaXMuY2FjaGUgPSBuZXcgR0xURlJlZ2lzdHJ5KCk7XG5cblx0XHQvLyBhc3NvY2lhdGlvbnMgYmV0d2VlbiBUaHJlZS5qcyBvYmplY3RzIGFuZCBnbFRGIGVsZW1lbnRzXG5cdFx0dGhpcy5hc3NvY2lhdGlvbnMgPSBuZXcgTWFwKCk7XG5cblx0XHQvLyBCdWZmZXJHZW9tZXRyeSBjYWNoaW5nXG5cdFx0dGhpcy5wcmltaXRpdmVDYWNoZSA9IHt9O1xuXG5cdFx0Ly8gT2JqZWN0M0QgaW5zdGFuY2UgY2FjaGVzXG5cdFx0dGhpcy5tZXNoQ2FjaGUgPSB7IHJlZnM6IHt9LCB1c2VzOiB7fSB9O1xuXHRcdHRoaXMuY2FtZXJhQ2FjaGUgPSB7IHJlZnM6IHt9LCB1c2VzOiB7fSB9O1xuXHRcdHRoaXMubGlnaHRDYWNoZSA9IHsgcmVmczoge30sIHVzZXM6IHt9IH07XG5cblx0XHQvLyBUcmFjayBub2RlIG5hbWVzLCB0byBlbnN1cmUgbm8gZHVwbGljYXRlc1xuXHRcdHRoaXMubm9kZU5hbWVzVXNlZCA9IHt9O1xuXG5cdFx0Ly8gVXNlIGFuIEltYWdlQml0bWFwTG9hZGVyIGlmIGltYWdlQml0bWFwcyBhcmUgc3VwcG9ydGVkLiBNb3ZlcyBtdWNoIG9mIHRoZVxuXHRcdC8vIGV4cGVuc2l2ZSB3b3JrIG9mIHVwbG9hZGluZyBhIHRleHR1cmUgdG8gdGhlIEdQVSBvZmYgdGhlIG1haW4gdGhyZWFkLlxuXHRcdGlmICggdHlwZW9mIGNyZWF0ZUltYWdlQml0bWFwICE9PSAndW5kZWZpbmVkJyAmJiAvRmlyZWZveC8udGVzdCggbmF2aWdhdG9yLnVzZXJBZ2VudCApID09PSBmYWxzZSApIHtcblxuXHRcdFx0dGhpcy50ZXh0dXJlTG9hZGVyID0gbmV3IEltYWdlQml0bWFwTG9hZGVyKCB0aGlzLm9wdGlvbnMubWFuYWdlciApO1xuXG5cdFx0fSBlbHNlIHtcblxuXHRcdFx0dGhpcy50ZXh0dXJlTG9hZGVyID0gbmV3IFRleHR1cmVMb2FkZXIoIHRoaXMub3B0aW9ucy5tYW5hZ2VyICk7XG5cblx0XHR9XG5cblx0XHR0aGlzLnRleHR1cmVMb2FkZXIuc2V0Q3Jvc3NPcmlnaW4oIHRoaXMub3B0aW9ucy5jcm9zc09yaWdpbiApO1xuXHRcdHRoaXMudGV4dHVyZUxvYWRlci5zZXRSZXF1ZXN0SGVhZGVyKCB0aGlzLm9wdGlvbnMucmVxdWVzdEhlYWRlciApO1xuXG5cdFx0dGhpcy5maWxlTG9hZGVyID0gbmV3IEZpbGVMb2FkZXIoIHRoaXMub3B0aW9ucy5tYW5hZ2VyICk7XG5cdFx0dGhpcy5maWxlTG9hZGVyLnNldFJlc3BvbnNlVHlwZSggJ2FycmF5YnVmZmVyJyApO1xuXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMuY3Jvc3NPcmlnaW4gPT09ICd1c2UtY3JlZGVudGlhbHMnICkge1xuXG5cdFx0XHR0aGlzLmZpbGVMb2FkZXIuc2V0V2l0aENyZWRlbnRpYWxzKCB0cnVlICk7XG5cblx0XHR9XG5cblx0fVxuXG5cdEdMVEZQYXJzZXIucHJvdG90eXBlLnNldEV4dGVuc2lvbnMgPSBmdW5jdGlvbiAoIGV4dGVuc2lvbnMgKSB7XG5cblx0XHR0aGlzLmV4dGVuc2lvbnMgPSBleHRlbnNpb25zO1xuXG5cdH07XG5cblx0R0xURlBhcnNlci5wcm90b3R5cGUuc2V0UGx1Z2lucyA9IGZ1bmN0aW9uICggcGx1Z2lucyApIHtcblxuXHRcdHRoaXMucGx1Z2lucyA9IHBsdWdpbnM7XG5cblx0fTtcblxuXHRHTFRGUGFyc2VyLnByb3RvdHlwZS5wYXJzZSA9IGZ1bmN0aW9uICggb25Mb2FkLCBvbkVycm9yICkge1xuXG5cdFx0dmFyIHBhcnNlciA9IHRoaXM7XG5cdFx0dmFyIGpzb24gPSB0aGlzLmpzb247XG5cdFx0dmFyIGV4dGVuc2lvbnMgPSB0aGlzLmV4dGVuc2lvbnM7XG5cblx0XHQvLyBDbGVhciB0aGUgbG9hZGVyIGNhY2hlXG5cdFx0dGhpcy5jYWNoZS5yZW1vdmVBbGwoKTtcblxuXHRcdC8vIE1hcmsgdGhlIHNwZWNpYWwgbm9kZXMvbWVzaGVzIGluIGpzb24gZm9yIGVmZmljaWVudCBwYXJzZVxuXHRcdHRoaXMuX2ludm9rZUFsbCggZnVuY3Rpb24gKCBleHQgKSB7XG5cblx0XHRcdHJldHVybiBleHQuX21hcmtEZWZzICYmIGV4dC5fbWFya0RlZnMoKTtcblxuXHRcdH0gKTtcblxuXHRcdFByb21pc2UuYWxsKCB0aGlzLl9pbnZva2VBbGwoIGZ1bmN0aW9uICggZXh0ICkge1xuXG5cdFx0XHRyZXR1cm4gZXh0LmJlZm9yZVJvb3QgJiYgZXh0LmJlZm9yZVJvb3QoKTtcblxuXHRcdH0gKSApLnRoZW4oIGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0cmV0dXJuIFByb21pc2UuYWxsKCBbXG5cblx0XHRcdFx0cGFyc2VyLmdldERlcGVuZGVuY2llcyggJ3NjZW5lJyApLFxuXHRcdFx0XHRwYXJzZXIuZ2V0RGVwZW5kZW5jaWVzKCAnYW5pbWF0aW9uJyApLFxuXHRcdFx0XHRwYXJzZXIuZ2V0RGVwZW5kZW5jaWVzKCAnY2FtZXJhJyApLFxuXG5cdFx0XHRdICk7XG5cblx0XHR9ICkudGhlbiggZnVuY3Rpb24gKCBkZXBlbmRlbmNpZXMgKSB7XG5cblx0XHRcdHZhciByZXN1bHQgPSB7XG5cdFx0XHRcdHNjZW5lOiBkZXBlbmRlbmNpZXNbIDAgXVsganNvbi5zY2VuZSB8fCAwIF0sXG5cdFx0XHRcdHNjZW5lczogZGVwZW5kZW5jaWVzWyAwIF0sXG5cdFx0XHRcdGFuaW1hdGlvbnM6IGRlcGVuZGVuY2llc1sgMSBdLFxuXHRcdFx0XHRjYW1lcmFzOiBkZXBlbmRlbmNpZXNbIDIgXSxcblx0XHRcdFx0YXNzZXQ6IGpzb24uYXNzZXQsXG5cdFx0XHRcdHBhcnNlcjogcGFyc2VyLFxuXHRcdFx0XHR1c2VyRGF0YToge31cblx0XHRcdH07XG5cblx0XHRcdGFkZFVua25vd25FeHRlbnNpb25zVG9Vc2VyRGF0YSggZXh0ZW5zaW9ucywgcmVzdWx0LCBqc29uICk7XG5cblx0XHRcdGFzc2lnbkV4dHJhc1RvVXNlckRhdGEoIHJlc3VsdCwganNvbiApO1xuXG5cdFx0XHRQcm9taXNlLmFsbCggcGFyc2VyLl9pbnZva2VBbGwoIGZ1bmN0aW9uICggZXh0ICkge1xuXG5cdFx0XHRcdHJldHVybiBleHQuYWZ0ZXJSb290ICYmIGV4dC5hZnRlclJvb3QoIHJlc3VsdCApO1xuXG5cdFx0XHR9ICkgKS50aGVuKCBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdFx0b25Mb2FkKCByZXN1bHQgKTtcblxuXHRcdFx0fSApO1xuXG5cdFx0fSApLmNhdGNoKCBvbkVycm9yICk7XG5cblx0fTtcblxuXHQvKipcblx0ICogTWFya3MgdGhlIHNwZWNpYWwgbm9kZXMvbWVzaGVzIGluIGpzb24gZm9yIGVmZmljaWVudCBwYXJzZS5cblx0ICovXG5cdEdMVEZQYXJzZXIucHJvdG90eXBlLl9tYXJrRGVmcyA9IGZ1bmN0aW9uICgpIHtcblxuXHRcdHZhciBub2RlRGVmcyA9IHRoaXMuanNvbi5ub2RlcyB8fCBbXTtcblx0XHR2YXIgc2tpbkRlZnMgPSB0aGlzLmpzb24uc2tpbnMgfHwgW107XG5cdFx0dmFyIG1lc2hEZWZzID0gdGhpcy5qc29uLm1lc2hlcyB8fCBbXTtcblxuXHRcdC8vIE5vdGhpbmcgaW4gdGhlIG5vZGUgZGVmaW5pdGlvbiBpbmRpY2F0ZXMgd2hldGhlciBpdCBpcyBhIEJvbmUgb3IgYW5cblx0XHQvLyBPYmplY3QzRC4gVXNlIHRoZSBza2lucycgam9pbnQgcmVmZXJlbmNlcyB0byBtYXJrIGJvbmVzLlxuXHRcdGZvciAoIHZhciBza2luSW5kZXggPSAwLCBza2luTGVuZ3RoID0gc2tpbkRlZnMubGVuZ3RoOyBza2luSW5kZXggPCBza2luTGVuZ3RoOyBza2luSW5kZXggKysgKSB7XG5cblx0XHRcdHZhciBqb2ludHMgPSBza2luRGVmc1sgc2tpbkluZGV4IF0uam9pbnRzO1xuXG5cdFx0XHRmb3IgKCB2YXIgaSA9IDAsIGlsID0gam9pbnRzLmxlbmd0aDsgaSA8IGlsOyBpICsrICkge1xuXG5cdFx0XHRcdG5vZGVEZWZzWyBqb2ludHNbIGkgXSBdLmlzQm9uZSA9IHRydWU7XG5cblx0XHRcdH1cblxuXHRcdH1cblxuXHRcdC8vIEl0ZXJhdGUgb3ZlciBhbGwgbm9kZXMsIG1hcmtpbmcgcmVmZXJlbmNlcyB0byBzaGFyZWQgcmVzb3VyY2VzLFxuXHRcdC8vIGFzIHdlbGwgYXMgc2tlbGV0b24gam9pbnRzLlxuXHRcdGZvciAoIHZhciBub2RlSW5kZXggPSAwLCBub2RlTGVuZ3RoID0gbm9kZURlZnMubGVuZ3RoOyBub2RlSW5kZXggPCBub2RlTGVuZ3RoOyBub2RlSW5kZXggKysgKSB7XG5cblx0XHRcdHZhciBub2RlRGVmID0gbm9kZURlZnNbIG5vZGVJbmRleCBdO1xuXG5cdFx0XHRpZiAoIG5vZGVEZWYubWVzaCAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRcdHRoaXMuX2FkZE5vZGVSZWYoIHRoaXMubWVzaENhY2hlLCBub2RlRGVmLm1lc2ggKTtcblxuXHRcdFx0XHQvLyBOb3RoaW5nIGluIHRoZSBtZXNoIGRlZmluaXRpb24gaW5kaWNhdGVzIHdoZXRoZXIgaXQgaXNcblx0XHRcdFx0Ly8gYSBTa2lubmVkTWVzaCBvciBNZXNoLiBVc2UgdGhlIG5vZGUncyBtZXNoIHJlZmVyZW5jZVxuXHRcdFx0XHQvLyB0byBtYXJrIFNraW5uZWRNZXNoIGlmIG5vZGUgaGFzIHNraW4uXG5cdFx0XHRcdGlmICggbm9kZURlZi5za2luICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0XHRtZXNoRGVmc1sgbm9kZURlZi5tZXNoIF0uaXNTa2lubmVkTWVzaCA9IHRydWU7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9XG5cblx0XHRcdGlmICggbm9kZURlZi5jYW1lcmEgIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0XHR0aGlzLl9hZGROb2RlUmVmKCB0aGlzLmNhbWVyYUNhY2hlLCBub2RlRGVmLmNhbWVyYSApO1xuXG5cdFx0XHR9XG5cblx0XHR9XG5cblx0fTtcblxuXHQvKipcblx0ICogQ291bnRzIHJlZmVyZW5jZXMgdG8gc2hhcmVkIG5vZGUgLyBPYmplY3QzRCByZXNvdXJjZXMuIFRoZXNlIHJlc291cmNlc1xuXHQgKiBjYW4gYmUgcmV1c2VkLCBvciBcImluc3RhbnRpYXRlZFwiLCBhdCBtdWx0aXBsZSBub2RlcyBpbiB0aGUgc2NlbmVcblx0ICogaGllcmFyY2h5LiBNZXNoLCBDYW1lcmEsIGFuZCBMaWdodCBpbnN0YW5jZXMgYXJlIGluc3RhbnRpYXRlZCBhbmQgbXVzdFxuXHQgKiBiZSBtYXJrZWQuIE5vbi1zY2VuZWdyYXBoIHJlc291cmNlcyAobGlrZSBNYXRlcmlhbHMsIEdlb21ldHJpZXMsIGFuZFxuXHQgKiBUZXh0dXJlcykgY2FuIGJlIHJldXNlZCBkaXJlY3RseSBhbmQgYXJlIG5vdCBtYXJrZWQgaGVyZS5cblx0ICpcblx0ICogRXhhbXBsZTogQ2VzaXVtTWlsa1RydWNrIHNhbXBsZSBtb2RlbCByZXVzZXMgXCJXaGVlbFwiIG1lc2hlcy5cblx0ICovXG5cdEdMVEZQYXJzZXIucHJvdG90eXBlLl9hZGROb2RlUmVmID0gZnVuY3Rpb24gKCBjYWNoZSwgaW5kZXggKSB7XG5cblx0XHRpZiAoIGluZGV4ID09PSB1bmRlZmluZWQgKSByZXR1cm47XG5cblx0XHRpZiAoIGNhY2hlLnJlZnNbIGluZGV4IF0gPT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0Y2FjaGUucmVmc1sgaW5kZXggXSA9IGNhY2hlLnVzZXNbIGluZGV4IF0gPSAwO1xuXG5cdFx0fVxuXG5cdFx0Y2FjaGUucmVmc1sgaW5kZXggXSArKztcblxuXHR9O1xuXG5cdC8qKiBSZXR1cm5zIGEgcmVmZXJlbmNlIHRvIGEgc2hhcmVkIHJlc291cmNlLCBjbG9uaW5nIGl0IGlmIG5lY2Vzc2FyeS4gKi9cblx0R0xURlBhcnNlci5wcm90b3R5cGUuX2dldE5vZGVSZWYgPSBmdW5jdGlvbiAoIGNhY2hlLCBpbmRleCwgb2JqZWN0ICkge1xuXG5cdFx0aWYgKCBjYWNoZS5yZWZzWyBpbmRleCBdIDw9IDEgKSByZXR1cm4gb2JqZWN0O1xuXG5cdFx0dmFyIHJlZiA9IG9iamVjdC5jbG9uZSgpO1xuXG5cdFx0cmVmLm5hbWUgKz0gJ19pbnN0YW5jZV8nICsgKCBjYWNoZS51c2VzWyBpbmRleCBdICsrICk7XG5cblx0XHRyZXR1cm4gcmVmO1xuXG5cdH07XG5cblx0R0xURlBhcnNlci5wcm90b3R5cGUuX2ludm9rZU9uZSA9IGZ1bmN0aW9uICggZnVuYyApIHtcblxuXHRcdHZhciBleHRlbnNpb25zID0gT2JqZWN0LnZhbHVlcyggdGhpcy5wbHVnaW5zICk7XG5cdFx0ZXh0ZW5zaW9ucy5wdXNoKCB0aGlzICk7XG5cblx0XHRmb3IgKCB2YXIgaSA9IDA7IGkgPCBleHRlbnNpb25zLmxlbmd0aDsgaSArKyApIHtcblxuXHRcdFx0dmFyIHJlc3VsdCA9IGZ1bmMoIGV4dGVuc2lvbnNbIGkgXSApO1xuXG5cdFx0XHRpZiAoIHJlc3VsdCApIHJldHVybiByZXN1bHQ7XG5cblx0XHR9XG5cblx0fTtcblxuXHRHTFRGUGFyc2VyLnByb3RvdHlwZS5faW52b2tlQWxsID0gZnVuY3Rpb24gKCBmdW5jICkge1xuXG5cdFx0dmFyIGV4dGVuc2lvbnMgPSBPYmplY3QudmFsdWVzKCB0aGlzLnBsdWdpbnMgKTtcblx0XHRleHRlbnNpb25zLnVuc2hpZnQoIHRoaXMgKTtcblxuXHRcdHZhciBwZW5kaW5nID0gW107XG5cblx0XHRmb3IgKCB2YXIgaSA9IDA7IGkgPCBleHRlbnNpb25zLmxlbmd0aDsgaSArKyApIHtcblxuXHRcdFx0dmFyIHJlc3VsdCA9IGZ1bmMoIGV4dGVuc2lvbnNbIGkgXSApO1xuXG5cdFx0XHRpZiAoIHJlc3VsdCApIHBlbmRpbmcucHVzaCggcmVzdWx0ICk7XG5cblx0XHR9XG5cblx0XHRyZXR1cm4gcGVuZGluZztcblxuXHR9O1xuXG5cdC8qKlxuXHQgKiBSZXF1ZXN0cyB0aGUgc3BlY2lmaWVkIGRlcGVuZGVuY3kgYXN5bmNocm9ub3VzbHksIHdpdGggY2FjaGluZy5cblx0ICogQHBhcmFtIHtzdHJpbmd9IHR5cGVcblx0ICogQHBhcmFtIHtudW1iZXJ9IGluZGV4XG5cdCAqIEByZXR1cm4ge1Byb21pc2U8T2JqZWN0M0R8TWF0ZXJpYWx8VEhSRUUuVGV4dHVyZXxBbmltYXRpb25DbGlwfEFycmF5QnVmZmVyfE9iamVjdD59XG5cdCAqL1xuXHRHTFRGUGFyc2VyLnByb3RvdHlwZS5nZXREZXBlbmRlbmN5ID0gZnVuY3Rpb24gKCB0eXBlLCBpbmRleCApIHtcblxuXHRcdHZhciBjYWNoZUtleSA9IHR5cGUgKyAnOicgKyBpbmRleDtcblx0XHR2YXIgZGVwZW5kZW5jeSA9IHRoaXMuY2FjaGUuZ2V0KCBjYWNoZUtleSApO1xuXG5cdFx0aWYgKCAhIGRlcGVuZGVuY3kgKSB7XG5cblx0XHRcdHN3aXRjaCAoIHR5cGUgKSB7XG5cblx0XHRcdFx0Y2FzZSAnc2NlbmUnOlxuXHRcdFx0XHRcdGRlcGVuZGVuY3kgPSB0aGlzLmxvYWRTY2VuZSggaW5kZXggKTtcblx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRjYXNlICdub2RlJzpcblx0XHRcdFx0XHRkZXBlbmRlbmN5ID0gdGhpcy5sb2FkTm9kZSggaW5kZXggKTtcblx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRjYXNlICdtZXNoJzpcblx0XHRcdFx0XHRkZXBlbmRlbmN5ID0gdGhpcy5faW52b2tlT25lKCBmdW5jdGlvbiAoIGV4dCApIHtcblxuXHRcdFx0XHRcdFx0cmV0dXJuIGV4dC5sb2FkTWVzaCAmJiBleHQubG9hZE1lc2goIGluZGV4ICk7XG5cblx0XHRcdFx0XHR9ICk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0Y2FzZSAnYWNjZXNzb3InOlxuXHRcdFx0XHRcdGRlcGVuZGVuY3kgPSB0aGlzLmxvYWRBY2Nlc3NvciggaW5kZXggKTtcblx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRjYXNlICdidWZmZXJWaWV3Jzpcblx0XHRcdFx0XHRkZXBlbmRlbmN5ID0gdGhpcy5faW52b2tlT25lKCBmdW5jdGlvbiAoIGV4dCApIHtcblxuXHRcdFx0XHRcdFx0cmV0dXJuIGV4dC5sb2FkQnVmZmVyVmlldyAmJiBleHQubG9hZEJ1ZmZlclZpZXcoIGluZGV4ICk7XG5cblx0XHRcdFx0XHR9ICk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0Y2FzZSAnYnVmZmVyJzpcblx0XHRcdFx0XHRkZXBlbmRlbmN5ID0gdGhpcy5sb2FkQnVmZmVyKCBpbmRleCApO1xuXHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdGNhc2UgJ21hdGVyaWFsJzpcblx0XHRcdFx0XHRkZXBlbmRlbmN5ID0gdGhpcy5faW52b2tlT25lKCBmdW5jdGlvbiAoIGV4dCApIHtcblxuXHRcdFx0XHRcdFx0cmV0dXJuIGV4dC5sb2FkTWF0ZXJpYWwgJiYgZXh0LmxvYWRNYXRlcmlhbCggaW5kZXggKTtcblxuXHRcdFx0XHRcdH0gKTtcblx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRjYXNlICd0ZXh0dXJlJzpcblx0XHRcdFx0XHRkZXBlbmRlbmN5ID0gdGhpcy5faW52b2tlT25lKCBmdW5jdGlvbiAoIGV4dCApIHtcblxuXHRcdFx0XHRcdFx0cmV0dXJuIGV4dC5sb2FkVGV4dHVyZSAmJiBleHQubG9hZFRleHR1cmUoIGluZGV4ICk7XG5cblx0XHRcdFx0XHR9ICk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0Y2FzZSAnc2tpbic6XG5cdFx0XHRcdFx0ZGVwZW5kZW5jeSA9IHRoaXMubG9hZFNraW4oIGluZGV4ICk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0Y2FzZSAnYW5pbWF0aW9uJzpcblx0XHRcdFx0XHRkZXBlbmRlbmN5ID0gdGhpcy5sb2FkQW5pbWF0aW9uKCBpbmRleCApO1xuXHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdGNhc2UgJ2NhbWVyYSc6XG5cdFx0XHRcdFx0ZGVwZW5kZW5jeSA9IHRoaXMubG9hZENhbWVyYSggaW5kZXggKTtcblx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRcdHRocm93IG5ldyBFcnJvciggJ1Vua25vd24gdHlwZTogJyArIHR5cGUgKTtcblxuXHRcdFx0fVxuXG5cdFx0XHR0aGlzLmNhY2hlLmFkZCggY2FjaGVLZXksIGRlcGVuZGVuY3kgKTtcblxuXHRcdH1cblxuXHRcdHJldHVybiBkZXBlbmRlbmN5O1xuXG5cdH07XG5cblx0LyoqXG5cdCAqIFJlcXVlc3RzIGFsbCBkZXBlbmRlbmNpZXMgb2YgdGhlIHNwZWNpZmllZCB0eXBlIGFzeW5jaHJvbm91c2x5LCB3aXRoIGNhY2hpbmcuXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlXG5cdCAqIEByZXR1cm4ge1Byb21pc2U8QXJyYXk8T2JqZWN0Pj59XG5cdCAqL1xuXHRHTFRGUGFyc2VyLnByb3RvdHlwZS5nZXREZXBlbmRlbmNpZXMgPSBmdW5jdGlvbiAoIHR5cGUgKSB7XG5cblx0XHR2YXIgZGVwZW5kZW5jaWVzID0gdGhpcy5jYWNoZS5nZXQoIHR5cGUgKTtcblxuXHRcdGlmICggISBkZXBlbmRlbmNpZXMgKSB7XG5cblx0XHRcdHZhciBwYXJzZXIgPSB0aGlzO1xuXHRcdFx0dmFyIGRlZnMgPSB0aGlzLmpzb25bIHR5cGUgKyAoIHR5cGUgPT09ICdtZXNoJyA/ICdlcycgOiAncycgKSBdIHx8IFtdO1xuXG5cdFx0XHRkZXBlbmRlbmNpZXMgPSBQcm9taXNlLmFsbCggZGVmcy5tYXAoIGZ1bmN0aW9uICggZGVmLCBpbmRleCApIHtcblxuXHRcdFx0XHRyZXR1cm4gcGFyc2VyLmdldERlcGVuZGVuY3koIHR5cGUsIGluZGV4ICk7XG5cblx0XHRcdH0gKSApO1xuXG5cdFx0XHR0aGlzLmNhY2hlLmFkZCggdHlwZSwgZGVwZW5kZW5jaWVzICk7XG5cblx0XHR9XG5cblx0XHRyZXR1cm4gZGVwZW5kZW5jaWVzO1xuXG5cdH07XG5cblx0LyoqXG5cdCAqIFNwZWNpZmljYXRpb246IGh0dHBzOi8vZ2l0aHViLmNvbS9LaHJvbm9zR3JvdXAvZ2xURi9ibG9iL21hc3Rlci9zcGVjaWZpY2F0aW9uLzIuMC9SRUFETUUubWQjYnVmZmVycy1hbmQtYnVmZmVyLXZpZXdzXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBidWZmZXJJbmRleFxuXHQgKiBAcmV0dXJuIHtQcm9taXNlPEFycmF5QnVmZmVyPn1cblx0ICovXG5cdEdMVEZQYXJzZXIucHJvdG90eXBlLmxvYWRCdWZmZXIgPSBmdW5jdGlvbiAoIGJ1ZmZlckluZGV4ICkge1xuXG5cdFx0dmFyIGJ1ZmZlckRlZiA9IHRoaXMuanNvbi5idWZmZXJzWyBidWZmZXJJbmRleCBdO1xuXHRcdHZhciBsb2FkZXIgPSB0aGlzLmZpbGVMb2FkZXI7XG5cblx0XHRpZiAoIGJ1ZmZlckRlZi50eXBlICYmIGJ1ZmZlckRlZi50eXBlICE9PSAnYXJyYXlidWZmZXInICkge1xuXG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoICdUSFJFRS5HTFRGTG9hZGVyOiAnICsgYnVmZmVyRGVmLnR5cGUgKyAnIGJ1ZmZlciB0eXBlIGlzIG5vdCBzdXBwb3J0ZWQuJyApO1xuXG5cdFx0fVxuXG5cdFx0Ly8gSWYgcHJlc2VudCwgR0xCIGNvbnRhaW5lciBpcyByZXF1aXJlZCB0byBiZSB0aGUgZmlyc3QgYnVmZmVyLlxuXHRcdGlmICggYnVmZmVyRGVmLnVyaSA9PT0gdW5kZWZpbmVkICYmIGJ1ZmZlckluZGV4ID09PSAwICkge1xuXG5cdFx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCB0aGlzLmV4dGVuc2lvbnNbIEVYVEVOU0lPTlMuS0hSX0JJTkFSWV9HTFRGIF0uYm9keSApO1xuXG5cdFx0fVxuXG5cdFx0dmFyIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG5cblx0XHRyZXR1cm4gbmV3IFByb21pc2UoIGZ1bmN0aW9uICggcmVzb2x2ZSwgcmVqZWN0ICkge1xuXG5cdFx0XHRsb2FkZXIubG9hZCggcmVzb2x2ZVVSTCggYnVmZmVyRGVmLnVyaSwgb3B0aW9ucy5wYXRoICksIHJlc29sdmUsIHVuZGVmaW5lZCwgZnVuY3Rpb24gKCkge1xuXG5cdFx0XHRcdHJlamVjdCggbmV3IEVycm9yKCAnVEhSRUUuR0xURkxvYWRlcjogRmFpbGVkIHRvIGxvYWQgYnVmZmVyIFwiJyArIGJ1ZmZlckRlZi51cmkgKyAnXCIuJyApICk7XG5cblx0XHRcdH0gKTtcblxuXHRcdH0gKTtcblxuXHR9O1xuXG5cdC8qKlxuXHQgKiBTcGVjaWZpY2F0aW9uOiBodHRwczovL2dpdGh1Yi5jb20vS2hyb25vc0dyb3VwL2dsVEYvYmxvYi9tYXN0ZXIvc3BlY2lmaWNhdGlvbi8yLjAvUkVBRE1FLm1kI2J1ZmZlcnMtYW5kLWJ1ZmZlci12aWV3c1xuXHQgKiBAcGFyYW0ge251bWJlcn0gYnVmZmVyVmlld0luZGV4XG5cdCAqIEByZXR1cm4ge1Byb21pc2U8QXJyYXlCdWZmZXI+fVxuXHQgKi9cblx0R0xURlBhcnNlci5wcm90b3R5cGUubG9hZEJ1ZmZlclZpZXcgPSBmdW5jdGlvbiAoIGJ1ZmZlclZpZXdJbmRleCApIHtcblxuXHRcdHZhciBidWZmZXJWaWV3RGVmID0gdGhpcy5qc29uLmJ1ZmZlclZpZXdzWyBidWZmZXJWaWV3SW5kZXggXTtcblxuXHRcdHJldHVybiB0aGlzLmdldERlcGVuZGVuY3koICdidWZmZXInLCBidWZmZXJWaWV3RGVmLmJ1ZmZlciApLnRoZW4oIGZ1bmN0aW9uICggYnVmZmVyICkge1xuXG5cdFx0XHR2YXIgYnl0ZUxlbmd0aCA9IGJ1ZmZlclZpZXdEZWYuYnl0ZUxlbmd0aCB8fCAwO1xuXHRcdFx0dmFyIGJ5dGVPZmZzZXQgPSBidWZmZXJWaWV3RGVmLmJ5dGVPZmZzZXQgfHwgMDtcblx0XHRcdHJldHVybiBidWZmZXIuc2xpY2UoIGJ5dGVPZmZzZXQsIGJ5dGVPZmZzZXQgKyBieXRlTGVuZ3RoICk7XG5cblx0XHR9ICk7XG5cblx0fTtcblxuXHQvKipcblx0ICogU3BlY2lmaWNhdGlvbjogaHR0cHM6Ly9naXRodWIuY29tL0tocm9ub3NHcm91cC9nbFRGL2Jsb2IvbWFzdGVyL3NwZWNpZmljYXRpb24vMi4wL1JFQURNRS5tZCNhY2Nlc3NvcnNcblx0ICogQHBhcmFtIHtudW1iZXJ9IGFjY2Vzc29ySW5kZXhcblx0ICogQHJldHVybiB7UHJvbWlzZTxCdWZmZXJBdHRyaWJ1dGV8SW50ZXJsZWF2ZWRCdWZmZXJBdHRyaWJ1dGU+fVxuXHQgKi9cblx0R0xURlBhcnNlci5wcm90b3R5cGUubG9hZEFjY2Vzc29yID0gZnVuY3Rpb24gKCBhY2Nlc3NvckluZGV4ICkge1xuXG5cdFx0dmFyIHBhcnNlciA9IHRoaXM7XG5cdFx0dmFyIGpzb24gPSB0aGlzLmpzb247XG5cblx0XHR2YXIgYWNjZXNzb3JEZWYgPSB0aGlzLmpzb24uYWNjZXNzb3JzWyBhY2Nlc3NvckluZGV4IF07XG5cblx0XHRpZiAoIGFjY2Vzc29yRGVmLmJ1ZmZlclZpZXcgPT09IHVuZGVmaW5lZCAmJiBhY2Nlc3NvckRlZi5zcGFyc2UgPT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0Ly8gSWdub3JlIGVtcHR5IGFjY2Vzc29ycywgd2hpY2ggbWF5IGJlIHVzZWQgdG8gZGVjbGFyZSBydW50aW1lXG5cdFx0XHQvLyBpbmZvcm1hdGlvbiBhYm91dCBhdHRyaWJ1dGVzIGNvbWluZyBmcm9tIGFub3RoZXIgc291cmNlIChlLmcuIERyYWNvXG5cdFx0XHQvLyBjb21wcmVzc2lvbiBleHRlbnNpb24pLlxuXHRcdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZSggbnVsbCApO1xuXG5cdFx0fVxuXG5cdFx0dmFyIHBlbmRpbmdCdWZmZXJWaWV3cyA9IFtdO1xuXG5cdFx0aWYgKCBhY2Nlc3NvckRlZi5idWZmZXJWaWV3ICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdHBlbmRpbmdCdWZmZXJWaWV3cy5wdXNoKCB0aGlzLmdldERlcGVuZGVuY3koICdidWZmZXJWaWV3JywgYWNjZXNzb3JEZWYuYnVmZmVyVmlldyApICk7XG5cblx0XHR9IGVsc2Uge1xuXG5cdFx0XHRwZW5kaW5nQnVmZmVyVmlld3MucHVzaCggbnVsbCApO1xuXG5cdFx0fVxuXG5cdFx0aWYgKCBhY2Nlc3NvckRlZi5zcGFyc2UgIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0cGVuZGluZ0J1ZmZlclZpZXdzLnB1c2goIHRoaXMuZ2V0RGVwZW5kZW5jeSggJ2J1ZmZlclZpZXcnLCBhY2Nlc3NvckRlZi5zcGFyc2UuaW5kaWNlcy5idWZmZXJWaWV3ICkgKTtcblx0XHRcdHBlbmRpbmdCdWZmZXJWaWV3cy5wdXNoKCB0aGlzLmdldERlcGVuZGVuY3koICdidWZmZXJWaWV3JywgYWNjZXNzb3JEZWYuc3BhcnNlLnZhbHVlcy5idWZmZXJWaWV3ICkgKTtcblxuXHRcdH1cblxuXHRcdHJldHVybiBQcm9taXNlLmFsbCggcGVuZGluZ0J1ZmZlclZpZXdzICkudGhlbiggZnVuY3Rpb24gKCBidWZmZXJWaWV3cyApIHtcblxuXHRcdFx0dmFyIGJ1ZmZlclZpZXcgPSBidWZmZXJWaWV3c1sgMCBdO1xuXG5cdFx0XHR2YXIgaXRlbVNpemUgPSBXRUJHTF9UWVBFX1NJWkVTWyBhY2Nlc3NvckRlZi50eXBlIF07XG5cdFx0XHR2YXIgVHlwZWRBcnJheSA9IFdFQkdMX0NPTVBPTkVOVF9UWVBFU1sgYWNjZXNzb3JEZWYuY29tcG9uZW50VHlwZSBdO1xuXG5cdFx0XHQvLyBGb3IgVkVDMzogaXRlbVNpemUgaXMgMywgZWxlbWVudEJ5dGVzIGlzIDQsIGl0ZW1CeXRlcyBpcyAxMi5cblx0XHRcdHZhciBlbGVtZW50Qnl0ZXMgPSBUeXBlZEFycmF5LkJZVEVTX1BFUl9FTEVNRU5UO1xuXHRcdFx0dmFyIGl0ZW1CeXRlcyA9IGVsZW1lbnRCeXRlcyAqIGl0ZW1TaXplO1xuXHRcdFx0dmFyIGJ5dGVPZmZzZXQgPSBhY2Nlc3NvckRlZi5ieXRlT2Zmc2V0IHx8IDA7XG5cdFx0XHR2YXIgYnl0ZVN0cmlkZSA9IGFjY2Vzc29yRGVmLmJ1ZmZlclZpZXcgIT09IHVuZGVmaW5lZCA/IGpzb24uYnVmZmVyVmlld3NbIGFjY2Vzc29yRGVmLmJ1ZmZlclZpZXcgXS5ieXRlU3RyaWRlIDogdW5kZWZpbmVkO1xuXHRcdFx0dmFyIG5vcm1hbGl6ZWQgPSBhY2Nlc3NvckRlZi5ub3JtYWxpemVkID09PSB0cnVlO1xuXHRcdFx0dmFyIGFycmF5LCBidWZmZXJBdHRyaWJ1dGU7XG5cblx0XHRcdC8vIFRoZSBidWZmZXIgaXMgbm90IGludGVybGVhdmVkIGlmIHRoZSBzdHJpZGUgaXMgdGhlIGl0ZW0gc2l6ZSBpbiBieXRlcy5cblx0XHRcdGlmICggYnl0ZVN0cmlkZSAmJiBieXRlU3RyaWRlICE9PSBpdGVtQnl0ZXMgKSB7XG5cblx0XHRcdFx0Ly8gRWFjaCBcInNsaWNlXCIgb2YgdGhlIGJ1ZmZlciwgYXMgZGVmaW5lZCBieSAnY291bnQnIGVsZW1lbnRzIG9mICdieXRlU3RyaWRlJyBieXRlcywgZ2V0cyBpdHMgb3duIEludGVybGVhdmVkQnVmZmVyXG5cdFx0XHRcdC8vIFRoaXMgbWFrZXMgc3VyZSB0aGF0IElCQS5jb3VudCByZWZsZWN0cyBhY2Nlc3Nvci5jb3VudCBwcm9wZXJseVxuXHRcdFx0XHR2YXIgaWJTbGljZSA9IE1hdGguZmxvb3IoIGJ5dGVPZmZzZXQgLyBieXRlU3RyaWRlICk7XG5cdFx0XHRcdHZhciBpYkNhY2hlS2V5ID0gJ0ludGVybGVhdmVkQnVmZmVyOicgKyBhY2Nlc3NvckRlZi5idWZmZXJWaWV3ICsgJzonICsgYWNjZXNzb3JEZWYuY29tcG9uZW50VHlwZSArICc6JyArIGliU2xpY2UgKyAnOicgKyBhY2Nlc3NvckRlZi5jb3VudDtcblx0XHRcdFx0dmFyIGliID0gcGFyc2VyLmNhY2hlLmdldCggaWJDYWNoZUtleSApO1xuXG5cdFx0XHRcdGlmICggISBpYiApIHtcblxuXHRcdFx0XHRcdGFycmF5ID0gbmV3IFR5cGVkQXJyYXkoIGJ1ZmZlclZpZXcsIGliU2xpY2UgKiBieXRlU3RyaWRlLCBhY2Nlc3NvckRlZi5jb3VudCAqIGJ5dGVTdHJpZGUgLyBlbGVtZW50Qnl0ZXMgKTtcblxuXHRcdFx0XHRcdC8vIEludGVnZXIgcGFyYW1ldGVycyB0byBJQi9JQkEgYXJlIGluIGFycmF5IGVsZW1lbnRzLCBub3QgYnl0ZXMuXG5cdFx0XHRcdFx0aWIgPSBuZXcgSW50ZXJsZWF2ZWRCdWZmZXIoIGFycmF5LCBieXRlU3RyaWRlIC8gZWxlbWVudEJ5dGVzICk7XG5cblx0XHRcdFx0XHRwYXJzZXIuY2FjaGUuYWRkKCBpYkNhY2hlS2V5LCBpYiApO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRidWZmZXJBdHRyaWJ1dGUgPSBuZXcgSW50ZXJsZWF2ZWRCdWZmZXJBdHRyaWJ1dGUoIGliLCBpdGVtU2l6ZSwgKCBieXRlT2Zmc2V0ICUgYnl0ZVN0cmlkZSApIC8gZWxlbWVudEJ5dGVzLCBub3JtYWxpemVkICk7XG5cblx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0aWYgKCBidWZmZXJWaWV3ID09PSBudWxsICkge1xuXG5cdFx0XHRcdFx0YXJyYXkgPSBuZXcgVHlwZWRBcnJheSggYWNjZXNzb3JEZWYuY291bnQgKiBpdGVtU2l6ZSApO1xuXG5cdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRhcnJheSA9IG5ldyBUeXBlZEFycmF5KCBidWZmZXJWaWV3LCBieXRlT2Zmc2V0LCBhY2Nlc3NvckRlZi5jb3VudCAqIGl0ZW1TaXplICk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdGJ1ZmZlckF0dHJpYnV0ZSA9IG5ldyBCdWZmZXJBdHRyaWJ1dGUoIGFycmF5LCBpdGVtU2l6ZSwgbm9ybWFsaXplZCApO1xuXG5cdFx0XHR9XG5cblx0XHRcdC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9LaHJvbm9zR3JvdXAvZ2xURi9ibG9iL21hc3Rlci9zcGVjaWZpY2F0aW9uLzIuMC9SRUFETUUubWQjc3BhcnNlLWFjY2Vzc29yc1xuXHRcdFx0aWYgKCBhY2Nlc3NvckRlZi5zcGFyc2UgIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0XHR2YXIgaXRlbVNpemVJbmRpY2VzID0gV0VCR0xfVFlQRV9TSVpFUy5TQ0FMQVI7XG5cdFx0XHRcdHZhciBUeXBlZEFycmF5SW5kaWNlcyA9IFdFQkdMX0NPTVBPTkVOVF9UWVBFU1sgYWNjZXNzb3JEZWYuc3BhcnNlLmluZGljZXMuY29tcG9uZW50VHlwZSBdO1xuXG5cdFx0XHRcdHZhciBieXRlT2Zmc2V0SW5kaWNlcyA9IGFjY2Vzc29yRGVmLnNwYXJzZS5pbmRpY2VzLmJ5dGVPZmZzZXQgfHwgMDtcblx0XHRcdFx0dmFyIGJ5dGVPZmZzZXRWYWx1ZXMgPSBhY2Nlc3NvckRlZi5zcGFyc2UudmFsdWVzLmJ5dGVPZmZzZXQgfHwgMDtcblxuXHRcdFx0XHR2YXIgc3BhcnNlSW5kaWNlcyA9IG5ldyBUeXBlZEFycmF5SW5kaWNlcyggYnVmZmVyVmlld3NbIDEgXSwgYnl0ZU9mZnNldEluZGljZXMsIGFjY2Vzc29yRGVmLnNwYXJzZS5jb3VudCAqIGl0ZW1TaXplSW5kaWNlcyApO1xuXHRcdFx0XHR2YXIgc3BhcnNlVmFsdWVzID0gbmV3IFR5cGVkQXJyYXkoIGJ1ZmZlclZpZXdzWyAyIF0sIGJ5dGVPZmZzZXRWYWx1ZXMsIGFjY2Vzc29yRGVmLnNwYXJzZS5jb3VudCAqIGl0ZW1TaXplICk7XG5cblx0XHRcdFx0aWYgKCBidWZmZXJWaWV3ICE9PSBudWxsICkge1xuXG5cdFx0XHRcdFx0Ly8gQXZvaWQgbW9kaWZ5aW5nIHRoZSBvcmlnaW5hbCBBcnJheUJ1ZmZlciwgaWYgdGhlIGJ1ZmZlclZpZXcgd2Fzbid0IGluaXRpYWxpemVkIHdpdGggemVyb2VzLlxuXHRcdFx0XHRcdGJ1ZmZlckF0dHJpYnV0ZSA9IG5ldyBCdWZmZXJBdHRyaWJ1dGUoIGJ1ZmZlckF0dHJpYnV0ZS5hcnJheS5zbGljZSgpLCBidWZmZXJBdHRyaWJ1dGUuaXRlbVNpemUsIGJ1ZmZlckF0dHJpYnV0ZS5ub3JtYWxpemVkICk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdGZvciAoIHZhciBpID0gMCwgaWwgPSBzcGFyc2VJbmRpY2VzLmxlbmd0aDsgaSA8IGlsOyBpICsrICkge1xuXG5cdFx0XHRcdFx0dmFyIGluZGV4ID0gc3BhcnNlSW5kaWNlc1sgaSBdO1xuXG5cdFx0XHRcdFx0YnVmZmVyQXR0cmlidXRlLnNldFgoIGluZGV4LCBzcGFyc2VWYWx1ZXNbIGkgKiBpdGVtU2l6ZSBdICk7XG5cdFx0XHRcdFx0aWYgKCBpdGVtU2l6ZSA+PSAyICkgYnVmZmVyQXR0cmlidXRlLnNldFkoIGluZGV4LCBzcGFyc2VWYWx1ZXNbIGkgKiBpdGVtU2l6ZSArIDEgXSApO1xuXHRcdFx0XHRcdGlmICggaXRlbVNpemUgPj0gMyApIGJ1ZmZlckF0dHJpYnV0ZS5zZXRaKCBpbmRleCwgc3BhcnNlVmFsdWVzWyBpICogaXRlbVNpemUgKyAyIF0gKTtcblx0XHRcdFx0XHRpZiAoIGl0ZW1TaXplID49IDQgKSBidWZmZXJBdHRyaWJ1dGUuc2V0VyggaW5kZXgsIHNwYXJzZVZhbHVlc1sgaSAqIGl0ZW1TaXplICsgMyBdICk7XG5cdFx0XHRcdFx0aWYgKCBpdGVtU2l6ZSA+PSA1ICkgdGhyb3cgbmV3IEVycm9yKCAnVEhSRUUuR0xURkxvYWRlcjogVW5zdXBwb3J0ZWQgaXRlbVNpemUgaW4gc3BhcnNlIEJ1ZmZlckF0dHJpYnV0ZS4nICk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBidWZmZXJBdHRyaWJ1dGU7XG5cblx0XHR9ICk7XG5cblx0fTtcblxuXHQvKipcblx0ICogU3BlY2lmaWNhdGlvbjogaHR0cHM6Ly9naXRodWIuY29tL0tocm9ub3NHcm91cC9nbFRGL3RyZWUvbWFzdGVyL3NwZWNpZmljYXRpb24vMi4wI3RleHR1cmVzXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSB0ZXh0dXJlSW5kZXhcblx0ICogQHJldHVybiB7UHJvbWlzZTxUSFJFRS5UZXh0dXJlPn1cblx0ICovXG5cdEdMVEZQYXJzZXIucHJvdG90eXBlLmxvYWRUZXh0dXJlID0gZnVuY3Rpb24gKCB0ZXh0dXJlSW5kZXggKSB7XG5cblx0XHR2YXIganNvbiA9IHRoaXMuanNvbjtcblx0XHR2YXIgb3B0aW9ucyA9IHRoaXMub3B0aW9ucztcblx0XHR2YXIgdGV4dHVyZURlZiA9IGpzb24udGV4dHVyZXNbIHRleHR1cmVJbmRleCBdO1xuXHRcdHZhciBzb3VyY2UgPSBqc29uLmltYWdlc1sgdGV4dHVyZURlZi5zb3VyY2UgXTtcblxuXHRcdHZhciBsb2FkZXIgPSB0aGlzLnRleHR1cmVMb2FkZXI7XG5cblx0XHRpZiAoIHNvdXJjZS51cmkgKSB7XG5cblx0XHRcdHZhciBoYW5kbGVyID0gb3B0aW9ucy5tYW5hZ2VyLmdldEhhbmRsZXIoIHNvdXJjZS51cmkgKTtcblx0XHRcdGlmICggaGFuZGxlciAhPT0gbnVsbCApIGxvYWRlciA9IGhhbmRsZXI7XG5cblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcy5sb2FkVGV4dHVyZUltYWdlKCB0ZXh0dXJlSW5kZXgsIHNvdXJjZSwgbG9hZGVyICk7XG5cblx0fTtcblxuXHRHTFRGUGFyc2VyLnByb3RvdHlwZS5sb2FkVGV4dHVyZUltYWdlID0gZnVuY3Rpb24gKCB0ZXh0dXJlSW5kZXgsIHNvdXJjZSwgbG9hZGVyICkge1xuXG5cdFx0dmFyIHBhcnNlciA9IHRoaXM7XG5cdFx0dmFyIGpzb24gPSB0aGlzLmpzb247XG5cdFx0dmFyIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG5cblx0XHR2YXIgdGV4dHVyZURlZiA9IGpzb24udGV4dHVyZXNbIHRleHR1cmVJbmRleCBdO1xuXG5cdFx0dmFyIFVSTCA9IHNlbGYuVVJMIHx8IHNlbGYud2Via2l0VVJMO1xuXG5cdFx0dmFyIHNvdXJjZVVSSSA9IHNvdXJjZS51cmk7XG5cdFx0dmFyIGlzT2JqZWN0VVJMID0gZmFsc2U7XG5cdFx0dmFyIGhhc0FscGhhID0gdHJ1ZTtcblxuXHRcdGlmICggc291cmNlLm1pbWVUeXBlID09PSAnaW1hZ2UvanBlZycgKSBoYXNBbHBoYSA9IGZhbHNlO1xuXG5cdFx0aWYgKCBzb3VyY2UuYnVmZmVyVmlldyAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHQvLyBMb2FkIGJpbmFyeSBpbWFnZSBkYXRhIGZyb20gYnVmZmVyVmlldywgaWYgcHJvdmlkZWQuXG5cblx0XHRcdHNvdXJjZVVSSSA9IHBhcnNlci5nZXREZXBlbmRlbmN5KCAnYnVmZmVyVmlldycsIHNvdXJjZS5idWZmZXJWaWV3ICkudGhlbiggZnVuY3Rpb24gKCBidWZmZXJWaWV3ICkge1xuXG5cdFx0XHRcdGlmICggc291cmNlLm1pbWVUeXBlID09PSAnaW1hZ2UvcG5nJyApIHtcblxuXHRcdFx0XHRcdC8vIEluc3BlY3QgdGhlIFBORyAnSUhEUicgY2h1bmsgdG8gZGV0ZXJtaW5lIHdoZXRoZXIgdGhlIGltYWdlIGNvdWxkIGhhdmUgYW5cblx0XHRcdFx0XHQvLyBhbHBoYSBjaGFubmVsLiBUaGlzIGNoZWNrIGlzIGNvbnNlcnZhdGl2ZSDigJQgdGhlIGltYWdlIGNvdWxkIGhhdmUgYW4gYWxwaGFcblx0XHRcdFx0XHQvLyBjaGFubmVsIHdpdGggYWxsIHZhbHVlcyA9PSAxLCBhbmQgdGhlIGluZGV4ZWQgdHlwZSAoY29sb3JUeXBlID09IDMpIG9ubHlcblx0XHRcdFx0XHQvLyBzb21ldGltZXMgY29udGFpbnMgYWxwaGEuXG5cdFx0XHRcdFx0Ly9cblx0XHRcdFx0XHQvLyBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Qb3J0YWJsZV9OZXR3b3JrX0dyYXBoaWNzI0ZpbGVfaGVhZGVyXG5cdFx0XHRcdFx0dmFyIGNvbG9yVHlwZSA9IG5ldyBEYXRhVmlldyggYnVmZmVyVmlldywgMjUsIDEgKS5nZXRVaW50OCggMCwgZmFsc2UgKTtcblx0XHRcdFx0XHRoYXNBbHBoYSA9IGNvbG9yVHlwZSA9PT0gNiB8fCBjb2xvclR5cGUgPT09IDQgfHwgY29sb3JUeXBlID09PSAzO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpc09iamVjdFVSTCA9IHRydWU7XG5cdFx0XHRcdHZhciBibG9iID0gbmV3IEJsb2IoIFsgYnVmZmVyVmlldyBdLCB7IHR5cGU6IHNvdXJjZS5taW1lVHlwZSB9ICk7XG5cdFx0XHRcdHNvdXJjZVVSSSA9IFVSTC5jcmVhdGVPYmplY3RVUkwoIGJsb2IgKTtcblx0XHRcdFx0cmV0dXJuIHNvdXJjZVVSSTtcblxuXHRcdFx0fSApO1xuXG5cdFx0fSBlbHNlIGlmICggc291cmNlLnVyaSA9PT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoICdUSFJFRS5HTFRGTG9hZGVyOiBJbWFnZSAnICsgdGV4dHVyZUluZGV4ICsgJyBpcyBtaXNzaW5nIFVSSSBhbmQgYnVmZmVyVmlldycgKTtcblxuXHRcdH1cblxuXHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUoIHNvdXJjZVVSSSApLnRoZW4oIGZ1bmN0aW9uICggc291cmNlVVJJICkge1xuXG5cdFx0XHRyZXR1cm4gbmV3IFByb21pc2UoIGZ1bmN0aW9uICggcmVzb2x2ZSwgcmVqZWN0ICkge1xuXG5cdFx0XHRcdHZhciBvbkxvYWQgPSByZXNvbHZlO1xuXG5cdFx0XHRcdGlmICggbG9hZGVyLmlzSW1hZ2VCaXRtYXBMb2FkZXIgPT09IHRydWUgKSB7XG5cblx0XHRcdFx0XHRvbkxvYWQgPSBmdW5jdGlvbiAoIGltYWdlQml0bWFwICkge1xuXG5cdFx0XHRcdFx0XHRyZXNvbHZlKCBuZXcgQ2FudmFzVGV4dHVyZSggaW1hZ2VCaXRtYXAgKSApO1xuXG5cdFx0XHRcdFx0fTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdFx0bG9hZGVyLmxvYWQoIHJlc29sdmVVUkwoIHNvdXJjZVVSSSwgb3B0aW9ucy5wYXRoICksIG9uTG9hZCwgdW5kZWZpbmVkLCByZWplY3QgKTtcblxuXHRcdFx0fSApO1xuXG5cdFx0fSApLnRoZW4oIGZ1bmN0aW9uICggdGV4dHVyZSApIHtcblxuXHRcdFx0Ly8gQ2xlYW4gdXAgcmVzb3VyY2VzIGFuZCBjb25maWd1cmUgVGV4dHVyZS5cblxuXHRcdFx0aWYgKCBpc09iamVjdFVSTCA9PT0gdHJ1ZSApIHtcblxuXHRcdFx0XHRVUkwucmV2b2tlT2JqZWN0VVJMKCBzb3VyY2VVUkkgKTtcblxuXHRcdFx0fVxuXG5cdFx0XHR0ZXh0dXJlLmZsaXBZID0gZmFsc2U7XG5cblx0XHRcdGlmICggdGV4dHVyZURlZi5uYW1lICkgdGV4dHVyZS5uYW1lID0gdGV4dHVyZURlZi5uYW1lO1xuXG5cdFx0XHQvLyBXaGVuIHRoZXJlIGlzIGRlZmluaXRlbHkgbm8gYWxwaGEgY2hhbm5lbCBpbiB0aGUgdGV4dHVyZSwgc2V0IFJHQkZvcm1hdCB0byBzYXZlIHNwYWNlLlxuXHRcdFx0aWYgKCAhIGhhc0FscGhhICkgdGV4dHVyZS5mb3JtYXQgPSBSR0JGb3JtYXQ7XG5cblx0XHRcdHZhciBzYW1wbGVycyA9IGpzb24uc2FtcGxlcnMgfHwge307XG5cdFx0XHR2YXIgc2FtcGxlciA9IHNhbXBsZXJzWyB0ZXh0dXJlRGVmLnNhbXBsZXIgXSB8fCB7fTtcblxuXHRcdFx0dGV4dHVyZS5tYWdGaWx0ZXIgPSBXRUJHTF9GSUxURVJTWyBzYW1wbGVyLm1hZ0ZpbHRlciBdIHx8IExpbmVhckZpbHRlcjtcblx0XHRcdHRleHR1cmUubWluRmlsdGVyID0gV0VCR0xfRklMVEVSU1sgc2FtcGxlci5taW5GaWx0ZXIgXSB8fCBMaW5lYXJNaXBtYXBMaW5lYXJGaWx0ZXI7XG5cdFx0XHR0ZXh0dXJlLndyYXBTID0gV0VCR0xfV1JBUFBJTkdTWyBzYW1wbGVyLndyYXBTIF0gfHwgUmVwZWF0V3JhcHBpbmc7XG5cdFx0XHR0ZXh0dXJlLndyYXBUID0gV0VCR0xfV1JBUFBJTkdTWyBzYW1wbGVyLndyYXBUIF0gfHwgUmVwZWF0V3JhcHBpbmc7XG5cblx0XHRcdHBhcnNlci5hc3NvY2lhdGlvbnMuc2V0KCB0ZXh0dXJlLCB7XG5cdFx0XHRcdHR5cGU6ICd0ZXh0dXJlcycsXG5cdFx0XHRcdGluZGV4OiB0ZXh0dXJlSW5kZXhcblx0XHRcdH0gKTtcblxuXHRcdFx0cmV0dXJuIHRleHR1cmU7XG5cblx0XHR9ICk7XG5cblx0fTtcblxuXHQvKipcblx0ICogQXN5bmNocm9ub3VzbHkgYXNzaWducyBhIHRleHR1cmUgdG8gdGhlIGdpdmVuIG1hdGVyaWFsIHBhcmFtZXRlcnMuXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBtYXRlcmlhbFBhcmFtc1xuXHQgKiBAcGFyYW0ge3N0cmluZ30gbWFwTmFtZVxuXHQgKiBAcGFyYW0ge09iamVjdH0gbWFwRGVmXG5cdCAqIEByZXR1cm4ge1Byb21pc2V9XG5cdCAqL1xuXHRHTFRGUGFyc2VyLnByb3RvdHlwZS5hc3NpZ25UZXh0dXJlID0gZnVuY3Rpb24gKCBtYXRlcmlhbFBhcmFtcywgbWFwTmFtZSwgbWFwRGVmICkge1xuXG5cdFx0dmFyIHBhcnNlciA9IHRoaXM7XG5cblx0XHRyZXR1cm4gdGhpcy5nZXREZXBlbmRlbmN5KCAndGV4dHVyZScsIG1hcERlZi5pbmRleCApLnRoZW4oIGZ1bmN0aW9uICggdGV4dHVyZSApIHtcblxuXHRcdFx0Ly8gTWF0ZXJpYWxzIHNhbXBsZSBhb01hcCBmcm9tIFVWIHNldCAxIGFuZCBvdGhlciBtYXBzIGZyb20gVVYgc2V0IDAgLSB0aGlzIGNhbid0IGJlIGNvbmZpZ3VyZWRcblx0XHRcdC8vIEhvd2V2ZXIsIHdlIHdpbGwgY29weSBVViBzZXQgMCB0byBVViBzZXQgMSBvbiBkZW1hbmQgZm9yIGFvTWFwXG5cdFx0XHRpZiAoIG1hcERlZi50ZXhDb29yZCAhPT0gdW5kZWZpbmVkICYmIG1hcERlZi50ZXhDb29yZCAhPSAwICYmICEgKCBtYXBOYW1lID09PSAnYW9NYXAnICYmIG1hcERlZi50ZXhDb29yZCA9PSAxICkgKSB7XG5cblx0XHRcdFx0Y29uc29sZS53YXJuKCAnVEhSRUUuR0xURkxvYWRlcjogQ3VzdG9tIFVWIHNldCAnICsgbWFwRGVmLnRleENvb3JkICsgJyBmb3IgdGV4dHVyZSAnICsgbWFwTmFtZSArICcgbm90IHlldCBzdXBwb3J0ZWQuJyApO1xuXG5cdFx0XHR9XG5cblx0XHRcdGlmICggcGFyc2VyLmV4dGVuc2lvbnNbIEVYVEVOU0lPTlMuS0hSX1RFWFRVUkVfVFJBTlNGT1JNIF0gKSB7XG5cblx0XHRcdFx0dmFyIHRyYW5zZm9ybSA9IG1hcERlZi5leHRlbnNpb25zICE9PSB1bmRlZmluZWQgPyBtYXBEZWYuZXh0ZW5zaW9uc1sgRVhURU5TSU9OUy5LSFJfVEVYVFVSRV9UUkFOU0ZPUk0gXSA6IHVuZGVmaW5lZDtcblxuXHRcdFx0XHRpZiAoIHRyYW5zZm9ybSApIHtcblxuXHRcdFx0XHRcdHZhciBnbHRmUmVmZXJlbmNlID0gcGFyc2VyLmFzc29jaWF0aW9ucy5nZXQoIHRleHR1cmUgKTtcblx0XHRcdFx0XHR0ZXh0dXJlID0gcGFyc2VyLmV4dGVuc2lvbnNbIEVYVEVOU0lPTlMuS0hSX1RFWFRVUkVfVFJBTlNGT1JNIF0uZXh0ZW5kVGV4dHVyZSggdGV4dHVyZSwgdHJhbnNmb3JtICk7XG5cdFx0XHRcdFx0cGFyc2VyLmFzc29jaWF0aW9ucy5zZXQoIHRleHR1cmUsIGdsdGZSZWZlcmVuY2UgKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdH1cblxuXHRcdFx0bWF0ZXJpYWxQYXJhbXNbIG1hcE5hbWUgXSA9IHRleHR1cmU7XG5cblx0XHR9ICk7XG5cblx0fTtcblxuXHQvKipcblx0ICogQXNzaWducyBmaW5hbCBtYXRlcmlhbCB0byBhIE1lc2gsIExpbmUsIG9yIFBvaW50cyBpbnN0YW5jZS4gVGhlIGluc3RhbmNlXG5cdCAqIGFscmVhZHkgaGFzIGEgbWF0ZXJpYWwgKGdlbmVyYXRlZCBmcm9tIHRoZSBnbFRGIG1hdGVyaWFsIG9wdGlvbnMgYWxvbmUpXG5cdCAqIGJ1dCByZXVzZSBvZiB0aGUgc2FtZSBnbFRGIG1hdGVyaWFsIG1heSByZXF1aXJlIG11bHRpcGxlIHRocmVlanMgbWF0ZXJpYWxzXG5cdCAqIHRvIGFjY29tbW9kYXRlIGRpZmZlcmVudCBwcmltaXRpdmUgdHlwZXMsIGRlZmluZXMsIGV0Yy4gTmV3IG1hdGVyaWFscyB3aWxsXG5cdCAqIGJlIGNyZWF0ZWQgaWYgbmVjZXNzYXJ5LCBhbmQgcmV1c2VkIGZyb20gYSBjYWNoZS5cblx0ICogQHBhcmFtICB7T2JqZWN0M0R9IG1lc2ggTWVzaCwgTGluZSwgb3IgUG9pbnRzIGluc3RhbmNlLlxuXHQgKi9cblx0R0xURlBhcnNlci5wcm90b3R5cGUuYXNzaWduRmluYWxNYXRlcmlhbCA9IGZ1bmN0aW9uICggbWVzaCApIHtcblxuXHRcdHZhciBnZW9tZXRyeSA9IG1lc2guZ2VvbWV0cnk7XG5cdFx0dmFyIG1hdGVyaWFsID0gbWVzaC5tYXRlcmlhbDtcblxuXHRcdHZhciB1c2VWZXJ0ZXhUYW5nZW50cyA9IGdlb21ldHJ5LmF0dHJpYnV0ZXMudGFuZ2VudCAhPT0gdW5kZWZpbmVkO1xuXHRcdHZhciB1c2VWZXJ0ZXhDb2xvcnMgPSBnZW9tZXRyeS5hdHRyaWJ1dGVzLmNvbG9yICE9PSB1bmRlZmluZWQ7XG5cdFx0dmFyIHVzZUZsYXRTaGFkaW5nID0gZ2VvbWV0cnkuYXR0cmlidXRlcy5ub3JtYWwgPT09IHVuZGVmaW5lZDtcblx0XHR2YXIgdXNlU2tpbm5pbmcgPSBtZXNoLmlzU2tpbm5lZE1lc2ggPT09IHRydWU7XG5cdFx0dmFyIHVzZU1vcnBoVGFyZ2V0cyA9IE9iamVjdC5rZXlzKCBnZW9tZXRyeS5tb3JwaEF0dHJpYnV0ZXMgKS5sZW5ndGggPiAwO1xuXHRcdHZhciB1c2VNb3JwaE5vcm1hbHMgPSB1c2VNb3JwaFRhcmdldHMgJiYgZ2VvbWV0cnkubW9ycGhBdHRyaWJ1dGVzLm5vcm1hbCAhPT0gdW5kZWZpbmVkO1xuXG5cdFx0aWYgKCBtZXNoLmlzUG9pbnRzICkge1xuXG5cdFx0XHR2YXIgY2FjaGVLZXkgPSAnUG9pbnRzTWF0ZXJpYWw6JyArIG1hdGVyaWFsLnV1aWQ7XG5cblx0XHRcdHZhciBwb2ludHNNYXRlcmlhbCA9IHRoaXMuY2FjaGUuZ2V0KCBjYWNoZUtleSApO1xuXG5cdFx0XHRpZiAoICEgcG9pbnRzTWF0ZXJpYWwgKSB7XG5cblx0XHRcdFx0cG9pbnRzTWF0ZXJpYWwgPSBuZXcgUG9pbnRzTWF0ZXJpYWwoKTtcblx0XHRcdFx0TWF0ZXJpYWwucHJvdG90eXBlLmNvcHkuY2FsbCggcG9pbnRzTWF0ZXJpYWwsIG1hdGVyaWFsICk7XG5cdFx0XHRcdHBvaW50c01hdGVyaWFsLmNvbG9yLmNvcHkoIG1hdGVyaWFsLmNvbG9yICk7XG5cdFx0XHRcdHBvaW50c01hdGVyaWFsLm1hcCA9IG1hdGVyaWFsLm1hcDtcblx0XHRcdFx0cG9pbnRzTWF0ZXJpYWwuc2l6ZUF0dGVudWF0aW9uID0gZmFsc2U7IC8vIGdsVEYgc3BlYyBzYXlzIHBvaW50cyBzaG91bGQgYmUgMXB4XG5cblx0XHRcdFx0dGhpcy5jYWNoZS5hZGQoIGNhY2hlS2V5LCBwb2ludHNNYXRlcmlhbCApO1xuXG5cdFx0XHR9XG5cblx0XHRcdG1hdGVyaWFsID0gcG9pbnRzTWF0ZXJpYWw7XG5cblx0XHR9IGVsc2UgaWYgKCBtZXNoLmlzTGluZSApIHtcblxuXHRcdFx0dmFyIGNhY2hlS2V5ID0gJ0xpbmVCYXNpY01hdGVyaWFsOicgKyBtYXRlcmlhbC51dWlkO1xuXG5cdFx0XHR2YXIgbGluZU1hdGVyaWFsID0gdGhpcy5jYWNoZS5nZXQoIGNhY2hlS2V5ICk7XG5cblx0XHRcdGlmICggISBsaW5lTWF0ZXJpYWwgKSB7XG5cblx0XHRcdFx0bGluZU1hdGVyaWFsID0gbmV3IExpbmVCYXNpY01hdGVyaWFsKCk7XG5cdFx0XHRcdE1hdGVyaWFsLnByb3RvdHlwZS5jb3B5LmNhbGwoIGxpbmVNYXRlcmlhbCwgbWF0ZXJpYWwgKTtcblx0XHRcdFx0bGluZU1hdGVyaWFsLmNvbG9yLmNvcHkoIG1hdGVyaWFsLmNvbG9yICk7XG5cblx0XHRcdFx0dGhpcy5jYWNoZS5hZGQoIGNhY2hlS2V5LCBsaW5lTWF0ZXJpYWwgKTtcblxuXHRcdFx0fVxuXG5cdFx0XHRtYXRlcmlhbCA9IGxpbmVNYXRlcmlhbDtcblxuXHRcdH1cblxuXHRcdC8vIENsb25lIHRoZSBtYXRlcmlhbCBpZiBpdCB3aWxsIGJlIG1vZGlmaWVkXG5cdFx0aWYgKCB1c2VWZXJ0ZXhUYW5nZW50cyB8fCB1c2VWZXJ0ZXhDb2xvcnMgfHwgdXNlRmxhdFNoYWRpbmcgfHwgdXNlU2tpbm5pbmcgfHwgdXNlTW9ycGhUYXJnZXRzICkge1xuXG5cdFx0XHR2YXIgY2FjaGVLZXkgPSAnQ2xvbmVkTWF0ZXJpYWw6JyArIG1hdGVyaWFsLnV1aWQgKyAnOic7XG5cblx0XHRcdGlmICggbWF0ZXJpYWwuaXNHTFRGU3BlY3VsYXJHbG9zc2luZXNzTWF0ZXJpYWwgKSBjYWNoZUtleSArPSAnc3BlY3VsYXItZ2xvc3NpbmVzczonO1xuXHRcdFx0aWYgKCB1c2VTa2lubmluZyApIGNhY2hlS2V5ICs9ICdza2lubmluZzonO1xuXHRcdFx0aWYgKCB1c2VWZXJ0ZXhUYW5nZW50cyApIGNhY2hlS2V5ICs9ICd2ZXJ0ZXgtdGFuZ2VudHM6Jztcblx0XHRcdGlmICggdXNlVmVydGV4Q29sb3JzICkgY2FjaGVLZXkgKz0gJ3ZlcnRleC1jb2xvcnM6Jztcblx0XHRcdGlmICggdXNlRmxhdFNoYWRpbmcgKSBjYWNoZUtleSArPSAnZmxhdC1zaGFkaW5nOic7XG5cdFx0XHRpZiAoIHVzZU1vcnBoVGFyZ2V0cyApIGNhY2hlS2V5ICs9ICdtb3JwaC10YXJnZXRzOic7XG5cdFx0XHRpZiAoIHVzZU1vcnBoTm9ybWFscyApIGNhY2hlS2V5ICs9ICdtb3JwaC1ub3JtYWxzOic7XG5cblx0XHRcdHZhciBjYWNoZWRNYXRlcmlhbCA9IHRoaXMuY2FjaGUuZ2V0KCBjYWNoZUtleSApO1xuXG5cdFx0XHRpZiAoICEgY2FjaGVkTWF0ZXJpYWwgKSB7XG5cblx0XHRcdFx0Y2FjaGVkTWF0ZXJpYWwgPSBtYXRlcmlhbC5jbG9uZSgpO1xuXG5cdFx0XHRcdGlmICggdXNlU2tpbm5pbmcgKSBjYWNoZWRNYXRlcmlhbC5za2lubmluZyA9IHRydWU7XG5cdFx0XHRcdGlmICggdXNlVmVydGV4Q29sb3JzICkgY2FjaGVkTWF0ZXJpYWwudmVydGV4Q29sb3JzID0gdHJ1ZTtcblx0XHRcdFx0aWYgKCB1c2VGbGF0U2hhZGluZyApIGNhY2hlZE1hdGVyaWFsLmZsYXRTaGFkaW5nID0gdHJ1ZTtcblx0XHRcdFx0aWYgKCB1c2VNb3JwaFRhcmdldHMgKSBjYWNoZWRNYXRlcmlhbC5tb3JwaFRhcmdldHMgPSB0cnVlO1xuXHRcdFx0XHRpZiAoIHVzZU1vcnBoTm9ybWFscyApIGNhY2hlZE1hdGVyaWFsLm1vcnBoTm9ybWFscyA9IHRydWU7XG5cblx0XHRcdFx0aWYgKCB1c2VWZXJ0ZXhUYW5nZW50cyApIHtcblxuXHRcdFx0XHRcdGNhY2hlZE1hdGVyaWFsLnZlcnRleFRhbmdlbnRzID0gdHJ1ZTtcblxuXHRcdFx0XHRcdC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9tcmRvb2IvdGhyZWUuanMvaXNzdWVzLzExNDM4I2lzc3VlY29tbWVudC01MDcwMDM5OTVcblx0XHRcdFx0XHRpZiAoIGNhY2hlZE1hdGVyaWFsLm5vcm1hbFNjYWxlICkgY2FjaGVkTWF0ZXJpYWwubm9ybWFsU2NhbGUueSAqPSAtIDE7XG5cdFx0XHRcdFx0aWYgKCBjYWNoZWRNYXRlcmlhbC5jbGVhcmNvYXROb3JtYWxTY2FsZSApIGNhY2hlZE1hdGVyaWFsLmNsZWFyY29hdE5vcm1hbFNjYWxlLnkgKj0gLSAxO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHR0aGlzLmNhY2hlLmFkZCggY2FjaGVLZXksIGNhY2hlZE1hdGVyaWFsICk7XG5cblx0XHRcdFx0dGhpcy5hc3NvY2lhdGlvbnMuc2V0KCBjYWNoZWRNYXRlcmlhbCwgdGhpcy5hc3NvY2lhdGlvbnMuZ2V0KCBtYXRlcmlhbCApICk7XG5cblx0XHRcdH1cblxuXHRcdFx0bWF0ZXJpYWwgPSBjYWNoZWRNYXRlcmlhbDtcblxuXHRcdH1cblxuXHRcdC8vIHdvcmthcm91bmRzIGZvciBtZXNoIGFuZCBnZW9tZXRyeVxuXG5cdFx0aWYgKCBtYXRlcmlhbC5hb01hcCAmJiBnZW9tZXRyeS5hdHRyaWJ1dGVzLnV2MiA9PT0gdW5kZWZpbmVkICYmIGdlb21ldHJ5LmF0dHJpYnV0ZXMudXYgIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0Z2VvbWV0cnkuc2V0QXR0cmlidXRlKCAndXYyJywgZ2VvbWV0cnkuYXR0cmlidXRlcy51diApO1xuXG5cdFx0fVxuXG5cdFx0bWVzaC5tYXRlcmlhbCA9IG1hdGVyaWFsO1xuXG5cdH07XG5cblx0R0xURlBhcnNlci5wcm90b3R5cGUuZ2V0TWF0ZXJpYWxUeXBlID0gZnVuY3Rpb24gKCAvKiBtYXRlcmlhbEluZGV4ICovICkge1xuXG5cdFx0cmV0dXJuIE1lc2hTdGFuZGFyZE1hdGVyaWFsO1xuXG5cdH07XG5cblx0LyoqXG5cdCAqIFNwZWNpZmljYXRpb246IGh0dHBzOi8vZ2l0aHViLmNvbS9LaHJvbm9zR3JvdXAvZ2xURi9ibG9iL21hc3Rlci9zcGVjaWZpY2F0aW9uLzIuMC9SRUFETUUubWQjbWF0ZXJpYWxzXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBtYXRlcmlhbEluZGV4XG5cdCAqIEByZXR1cm4ge1Byb21pc2U8TWF0ZXJpYWw+fVxuXHQgKi9cblx0R0xURlBhcnNlci5wcm90b3R5cGUubG9hZE1hdGVyaWFsID0gZnVuY3Rpb24gKCBtYXRlcmlhbEluZGV4ICkge1xuXG5cdFx0dmFyIHBhcnNlciA9IHRoaXM7XG5cdFx0dmFyIGpzb24gPSB0aGlzLmpzb247XG5cdFx0dmFyIGV4dGVuc2lvbnMgPSB0aGlzLmV4dGVuc2lvbnM7XG5cdFx0dmFyIG1hdGVyaWFsRGVmID0ganNvbi5tYXRlcmlhbHNbIG1hdGVyaWFsSW5kZXggXTtcblxuXHRcdHZhciBtYXRlcmlhbFR5cGU7XG5cdFx0dmFyIG1hdGVyaWFsUGFyYW1zID0ge307XG5cdFx0dmFyIG1hdGVyaWFsRXh0ZW5zaW9ucyA9IG1hdGVyaWFsRGVmLmV4dGVuc2lvbnMgfHwge307XG5cblx0XHR2YXIgcGVuZGluZyA9IFtdO1xuXG5cdFx0aWYgKCBtYXRlcmlhbEV4dGVuc2lvbnNbIEVYVEVOU0lPTlMuS0hSX01BVEVSSUFMU19QQlJfU1BFQ1VMQVJfR0xPU1NJTkVTUyBdICkge1xuXG5cdFx0XHR2YXIgc2dFeHRlbnNpb24gPSBleHRlbnNpb25zWyBFWFRFTlNJT05TLktIUl9NQVRFUklBTFNfUEJSX1NQRUNVTEFSX0dMT1NTSU5FU1MgXTtcblx0XHRcdG1hdGVyaWFsVHlwZSA9IHNnRXh0ZW5zaW9uLmdldE1hdGVyaWFsVHlwZSgpO1xuXHRcdFx0cGVuZGluZy5wdXNoKCBzZ0V4dGVuc2lvbi5leHRlbmRQYXJhbXMoIG1hdGVyaWFsUGFyYW1zLCBtYXRlcmlhbERlZiwgcGFyc2VyICkgKTtcblxuXHRcdH0gZWxzZSBpZiAoIG1hdGVyaWFsRXh0ZW5zaW9uc1sgRVhURU5TSU9OUy5LSFJfTUFURVJJQUxTX1VOTElUIF0gKSB7XG5cblx0XHRcdHZhciBrbXVFeHRlbnNpb24gPSBleHRlbnNpb25zWyBFWFRFTlNJT05TLktIUl9NQVRFUklBTFNfVU5MSVQgXTtcblx0XHRcdG1hdGVyaWFsVHlwZSA9IGttdUV4dGVuc2lvbi5nZXRNYXRlcmlhbFR5cGUoKTtcblx0XHRcdHBlbmRpbmcucHVzaCgga211RXh0ZW5zaW9uLmV4dGVuZFBhcmFtcyggbWF0ZXJpYWxQYXJhbXMsIG1hdGVyaWFsRGVmLCBwYXJzZXIgKSApO1xuXG5cdFx0fSBlbHNlIHtcblxuXHRcdFx0Ly8gU3BlY2lmaWNhdGlvbjpcblx0XHRcdC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9LaHJvbm9zR3JvdXAvZ2xURi90cmVlL21hc3Rlci9zcGVjaWZpY2F0aW9uLzIuMCNtZXRhbGxpYy1yb3VnaG5lc3MtbWF0ZXJpYWxcblxuXHRcdFx0dmFyIG1ldGFsbGljUm91Z2huZXNzID0gbWF0ZXJpYWxEZWYucGJyTWV0YWxsaWNSb3VnaG5lc3MgfHwge307XG5cblx0XHRcdG1hdGVyaWFsUGFyYW1zLmNvbG9yID0gbmV3IENvbG9yKCAxLjAsIDEuMCwgMS4wICk7XG5cdFx0XHRtYXRlcmlhbFBhcmFtcy5vcGFjaXR5ID0gMS4wO1xuXG5cdFx0XHRpZiAoIEFycmF5LmlzQXJyYXkoIG1ldGFsbGljUm91Z2huZXNzLmJhc2VDb2xvckZhY3RvciApICkge1xuXG5cdFx0XHRcdHZhciBhcnJheSA9IG1ldGFsbGljUm91Z2huZXNzLmJhc2VDb2xvckZhY3RvcjtcblxuXHRcdFx0XHRtYXRlcmlhbFBhcmFtcy5jb2xvci5mcm9tQXJyYXkoIGFycmF5ICk7XG5cdFx0XHRcdG1hdGVyaWFsUGFyYW1zLm9wYWNpdHkgPSBhcnJheVsgMyBdO1xuXG5cdFx0XHR9XG5cblx0XHRcdGlmICggbWV0YWxsaWNSb3VnaG5lc3MuYmFzZUNvbG9yVGV4dHVyZSAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRcdHBlbmRpbmcucHVzaCggcGFyc2VyLmFzc2lnblRleHR1cmUoIG1hdGVyaWFsUGFyYW1zLCAnbWFwJywgbWV0YWxsaWNSb3VnaG5lc3MuYmFzZUNvbG9yVGV4dHVyZSApICk7XG5cblx0XHRcdH1cblxuXHRcdFx0bWF0ZXJpYWxQYXJhbXMubWV0YWxuZXNzID0gbWV0YWxsaWNSb3VnaG5lc3MubWV0YWxsaWNGYWN0b3IgIT09IHVuZGVmaW5lZCA/IG1ldGFsbGljUm91Z2huZXNzLm1ldGFsbGljRmFjdG9yIDogMS4wO1xuXHRcdFx0bWF0ZXJpYWxQYXJhbXMucm91Z2huZXNzID0gbWV0YWxsaWNSb3VnaG5lc3Mucm91Z2huZXNzRmFjdG9yICE9PSB1bmRlZmluZWQgPyBtZXRhbGxpY1JvdWdobmVzcy5yb3VnaG5lc3NGYWN0b3IgOiAxLjA7XG5cblx0XHRcdGlmICggbWV0YWxsaWNSb3VnaG5lc3MubWV0YWxsaWNSb3VnaG5lc3NUZXh0dXJlICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0cGVuZGluZy5wdXNoKCBwYXJzZXIuYXNzaWduVGV4dHVyZSggbWF0ZXJpYWxQYXJhbXMsICdtZXRhbG5lc3NNYXAnLCBtZXRhbGxpY1JvdWdobmVzcy5tZXRhbGxpY1JvdWdobmVzc1RleHR1cmUgKSApO1xuXHRcdFx0XHRwZW5kaW5nLnB1c2goIHBhcnNlci5hc3NpZ25UZXh0dXJlKCBtYXRlcmlhbFBhcmFtcywgJ3JvdWdobmVzc01hcCcsIG1ldGFsbGljUm91Z2huZXNzLm1ldGFsbGljUm91Z2huZXNzVGV4dHVyZSApICk7XG5cblx0XHRcdH1cblxuXHRcdFx0bWF0ZXJpYWxUeXBlID0gdGhpcy5faW52b2tlT25lKCBmdW5jdGlvbiAoIGV4dCApIHtcblxuXHRcdFx0XHRyZXR1cm4gZXh0LmdldE1hdGVyaWFsVHlwZSAmJiBleHQuZ2V0TWF0ZXJpYWxUeXBlKCBtYXRlcmlhbEluZGV4ICk7XG5cblx0XHRcdH0gKTtcblxuXHRcdFx0cGVuZGluZy5wdXNoKCBQcm9taXNlLmFsbCggdGhpcy5faW52b2tlQWxsKCBmdW5jdGlvbiAoIGV4dCApIHtcblxuXHRcdFx0XHRyZXR1cm4gZXh0LmV4dGVuZE1hdGVyaWFsUGFyYW1zICYmIGV4dC5leHRlbmRNYXRlcmlhbFBhcmFtcyggbWF0ZXJpYWxJbmRleCwgbWF0ZXJpYWxQYXJhbXMgKTtcblxuXHRcdFx0fSApICkgKTtcblxuXHRcdH1cblxuXHRcdGlmICggbWF0ZXJpYWxEZWYuZG91YmxlU2lkZWQgPT09IHRydWUgKSB7XG5cblx0XHRcdG1hdGVyaWFsUGFyYW1zLnNpZGUgPSBEb3VibGVTaWRlO1xuXG5cdFx0fVxuXG5cdFx0dmFyIGFscGhhTW9kZSA9IG1hdGVyaWFsRGVmLmFscGhhTW9kZSB8fCBBTFBIQV9NT0RFUy5PUEFRVUU7XG5cblx0XHRpZiAoIGFscGhhTW9kZSA9PT0gQUxQSEFfTU9ERVMuQkxFTkQgKSB7XG5cblx0XHRcdG1hdGVyaWFsUGFyYW1zLnRyYW5zcGFyZW50ID0gdHJ1ZTtcblxuXHRcdFx0Ly8gU2VlOiBodHRwczovL2dpdGh1Yi5jb20vbXJkb29iL3RocmVlLmpzL2lzc3Vlcy8xNzcwNlxuXHRcdFx0bWF0ZXJpYWxQYXJhbXMuZGVwdGhXcml0ZSA9IGZhbHNlO1xuXG5cdFx0fSBlbHNlIHtcblxuXHRcdFx0bWF0ZXJpYWxQYXJhbXMudHJhbnNwYXJlbnQgPSBmYWxzZTtcblxuXHRcdFx0aWYgKCBhbHBoYU1vZGUgPT09IEFMUEhBX01PREVTLk1BU0sgKSB7XG5cblx0XHRcdFx0bWF0ZXJpYWxQYXJhbXMuYWxwaGFUZXN0ID0gbWF0ZXJpYWxEZWYuYWxwaGFDdXRvZmYgIT09IHVuZGVmaW5lZCA/IG1hdGVyaWFsRGVmLmFscGhhQ3V0b2ZmIDogMC41O1xuXG5cdFx0XHR9XG5cblx0XHR9XG5cblx0XHRpZiAoIG1hdGVyaWFsRGVmLm5vcm1hbFRleHR1cmUgIT09IHVuZGVmaW5lZCAmJiBtYXRlcmlhbFR5cGUgIT09IE1lc2hCYXNpY01hdGVyaWFsICkge1xuXG5cdFx0XHRwZW5kaW5nLnB1c2goIHBhcnNlci5hc3NpZ25UZXh0dXJlKCBtYXRlcmlhbFBhcmFtcywgJ25vcm1hbE1hcCcsIG1hdGVyaWFsRGVmLm5vcm1hbFRleHR1cmUgKSApO1xuXG5cdFx0XHQvLyBodHRwczovL2dpdGh1Yi5jb20vbXJkb29iL3RocmVlLmpzL2lzc3Vlcy8xMTQzOCNpc3N1ZWNvbW1lbnQtNTA3MDAzOTk1XG5cdFx0XHRtYXRlcmlhbFBhcmFtcy5ub3JtYWxTY2FsZSA9IG5ldyBWZWN0b3IyKCAxLCAtIDEgKTtcblxuXHRcdFx0aWYgKCBtYXRlcmlhbERlZi5ub3JtYWxUZXh0dXJlLnNjYWxlICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0bWF0ZXJpYWxQYXJhbXMubm9ybWFsU2NhbGUuc2V0KCBtYXRlcmlhbERlZi5ub3JtYWxUZXh0dXJlLnNjYWxlLCAtIG1hdGVyaWFsRGVmLm5vcm1hbFRleHR1cmUuc2NhbGUgKTtcblxuXHRcdFx0fVxuXG5cdFx0fVxuXG5cdFx0aWYgKCBtYXRlcmlhbERlZi5vY2NsdXNpb25UZXh0dXJlICE9PSB1bmRlZmluZWQgJiYgbWF0ZXJpYWxUeXBlICE9PSBNZXNoQmFzaWNNYXRlcmlhbCApIHtcblxuXHRcdFx0cGVuZGluZy5wdXNoKCBwYXJzZXIuYXNzaWduVGV4dHVyZSggbWF0ZXJpYWxQYXJhbXMsICdhb01hcCcsIG1hdGVyaWFsRGVmLm9jY2x1c2lvblRleHR1cmUgKSApO1xuXG5cdFx0XHRpZiAoIG1hdGVyaWFsRGVmLm9jY2x1c2lvblRleHR1cmUuc3RyZW5ndGggIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0XHRtYXRlcmlhbFBhcmFtcy5hb01hcEludGVuc2l0eSA9IG1hdGVyaWFsRGVmLm9jY2x1c2lvblRleHR1cmUuc3RyZW5ndGg7XG5cblx0XHRcdH1cblxuXHRcdH1cblxuXHRcdGlmICggbWF0ZXJpYWxEZWYuZW1pc3NpdmVGYWN0b3IgIT09IHVuZGVmaW5lZCAmJiBtYXRlcmlhbFR5cGUgIT09IE1lc2hCYXNpY01hdGVyaWFsICkge1xuXG5cdFx0XHRtYXRlcmlhbFBhcmFtcy5lbWlzc2l2ZSA9IG5ldyBDb2xvcigpLmZyb21BcnJheSggbWF0ZXJpYWxEZWYuZW1pc3NpdmVGYWN0b3IgKTtcblxuXHRcdH1cblxuXHRcdGlmICggbWF0ZXJpYWxEZWYuZW1pc3NpdmVUZXh0dXJlICE9PSB1bmRlZmluZWQgJiYgbWF0ZXJpYWxUeXBlICE9PSBNZXNoQmFzaWNNYXRlcmlhbCApIHtcblxuXHRcdFx0cGVuZGluZy5wdXNoKCBwYXJzZXIuYXNzaWduVGV4dHVyZSggbWF0ZXJpYWxQYXJhbXMsICdlbWlzc2l2ZU1hcCcsIG1hdGVyaWFsRGVmLmVtaXNzaXZlVGV4dHVyZSApICk7XG5cblx0XHR9XG5cblx0XHRyZXR1cm4gUHJvbWlzZS5hbGwoIHBlbmRpbmcgKS50aGVuKCBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdHZhciBtYXRlcmlhbDtcblxuXHRcdFx0aWYgKCBtYXRlcmlhbFR5cGUgPT09IEdMVEZNZXNoU3RhbmRhcmRTR01hdGVyaWFsICkge1xuXG5cdFx0XHRcdG1hdGVyaWFsID0gZXh0ZW5zaW9uc1sgRVhURU5TSU9OUy5LSFJfTUFURVJJQUxTX1BCUl9TUEVDVUxBUl9HTE9TU0lORVNTIF0uY3JlYXRlTWF0ZXJpYWwoIG1hdGVyaWFsUGFyYW1zICk7XG5cblx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0bWF0ZXJpYWwgPSBuZXcgbWF0ZXJpYWxUeXBlKCBtYXRlcmlhbFBhcmFtcyApO1xuXG5cdFx0XHR9XG5cblx0XHRcdGlmICggbWF0ZXJpYWxEZWYubmFtZSApIG1hdGVyaWFsLm5hbWUgPSBtYXRlcmlhbERlZi5uYW1lO1xuXG5cdFx0XHQvLyBiYXNlQ29sb3JUZXh0dXJlLCBlbWlzc2l2ZVRleHR1cmUsIGFuZCBzcGVjdWxhckdsb3NzaW5lc3NUZXh0dXJlIHVzZSBzUkdCIGVuY29kaW5nLlxuXHRcdFx0aWYgKCBtYXRlcmlhbC5tYXAgKSBtYXRlcmlhbC5tYXAuZW5jb2RpbmcgPSBzUkdCRW5jb2Rpbmc7XG5cdFx0XHRpZiAoIG1hdGVyaWFsLmVtaXNzaXZlTWFwICkgbWF0ZXJpYWwuZW1pc3NpdmVNYXAuZW5jb2RpbmcgPSBzUkdCRW5jb2Rpbmc7XG5cblx0XHRcdGFzc2lnbkV4dHJhc1RvVXNlckRhdGEoIG1hdGVyaWFsLCBtYXRlcmlhbERlZiApO1xuXG5cdFx0XHRwYXJzZXIuYXNzb2NpYXRpb25zLnNldCggbWF0ZXJpYWwsIHsgdHlwZTogJ21hdGVyaWFscycsIGluZGV4OiBtYXRlcmlhbEluZGV4IH0gKTtcblxuXHRcdFx0aWYgKCBtYXRlcmlhbERlZi5leHRlbnNpb25zICkgYWRkVW5rbm93bkV4dGVuc2lvbnNUb1VzZXJEYXRhKCBleHRlbnNpb25zLCBtYXRlcmlhbCwgbWF0ZXJpYWxEZWYgKTtcblxuXHRcdFx0cmV0dXJuIG1hdGVyaWFsO1xuXG5cdFx0fSApO1xuXG5cdH07XG5cblx0LyoqIFdoZW4gT2JqZWN0M0QgaW5zdGFuY2VzIGFyZSB0YXJnZXRlZCBieSBhbmltYXRpb24sIHRoZXkgbmVlZCB1bmlxdWUgbmFtZXMuICovXG5cdEdMVEZQYXJzZXIucHJvdG90eXBlLmNyZWF0ZVVuaXF1ZU5hbWUgPSBmdW5jdGlvbiAoIG9yaWdpbmFsTmFtZSApIHtcblxuXHRcdHZhciBzYW5pdGl6ZWROYW1lID0gUHJvcGVydHlCaW5kaW5nLnNhbml0aXplTm9kZU5hbWUoIG9yaWdpbmFsTmFtZSB8fCAnJyApO1xuXG5cdFx0dmFyIG5hbWUgPSBzYW5pdGl6ZWROYW1lO1xuXG5cdFx0Zm9yICggdmFyIGkgPSAxOyB0aGlzLm5vZGVOYW1lc1VzZWRbIG5hbWUgXTsgKysgaSApIHtcblxuXHRcdFx0bmFtZSA9IHNhbml0aXplZE5hbWUgKyAnXycgKyBpO1xuXG5cdFx0fVxuXG5cdFx0dGhpcy5ub2RlTmFtZXNVc2VkWyBuYW1lIF0gPSB0cnVlO1xuXG5cdFx0cmV0dXJuIG5hbWU7XG5cblx0fTtcblxuXHQvKipcblx0ICogQHBhcmFtIHtCdWZmZXJHZW9tZXRyeX0gZ2VvbWV0cnlcblx0ICogQHBhcmFtIHtHTFRGLlByaW1pdGl2ZX0gcHJpbWl0aXZlRGVmXG5cdCAqIEBwYXJhbSB7R0xURlBhcnNlcn0gcGFyc2VyXG5cdCAqL1xuXHRmdW5jdGlvbiBjb21wdXRlQm91bmRzKCBnZW9tZXRyeSwgcHJpbWl0aXZlRGVmLCBwYXJzZXIgKSB7XG5cblx0XHR2YXIgYXR0cmlidXRlcyA9IHByaW1pdGl2ZURlZi5hdHRyaWJ1dGVzO1xuXG5cdFx0dmFyIGJveCA9IG5ldyBCb3gzKCk7XG5cblx0XHRpZiAoIGF0dHJpYnV0ZXMuUE9TSVRJT04gIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0dmFyIGFjY2Vzc29yID0gcGFyc2VyLmpzb24uYWNjZXNzb3JzWyBhdHRyaWJ1dGVzLlBPU0lUSU9OIF07XG5cblx0XHRcdHZhciBtaW4gPSBhY2Nlc3Nvci5taW47XG5cdFx0XHR2YXIgbWF4ID0gYWNjZXNzb3IubWF4O1xuXG5cdFx0XHQvLyBnbFRGIHJlcXVpcmVzICdtaW4nIGFuZCAnbWF4JywgYnV0IFZSTSAod2hpY2ggZXh0ZW5kcyBnbFRGKSBjdXJyZW50bHkgaWdub3JlcyB0aGF0IHJlcXVpcmVtZW50LlxuXG5cdFx0XHRpZiAoIG1pbiAhPT0gdW5kZWZpbmVkICYmIG1heCAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRcdGJveC5zZXQoXG5cdFx0XHRcdFx0bmV3IFZlY3RvcjMoIG1pblsgMCBdLCBtaW5bIDEgXSwgbWluWyAyIF0gKSxcblx0XHRcdFx0XHRuZXcgVmVjdG9yMyggbWF4WyAwIF0sIG1heFsgMSBdLCBtYXhbIDIgXSApICk7XG5cblx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0Y29uc29sZS53YXJuKCAnVEhSRUUuR0xURkxvYWRlcjogTWlzc2luZyBtaW4vbWF4IHByb3BlcnRpZXMgZm9yIGFjY2Vzc29yIFBPU0lUSU9OLicgKTtcblxuXHRcdFx0XHRyZXR1cm47XG5cblx0XHRcdH1cblxuXHRcdH0gZWxzZSB7XG5cblx0XHRcdHJldHVybjtcblxuXHRcdH1cblxuXHRcdHZhciB0YXJnZXRzID0gcHJpbWl0aXZlRGVmLnRhcmdldHM7XG5cblx0XHRpZiAoIHRhcmdldHMgIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0dmFyIG1heERpc3BsYWNlbWVudCA9IG5ldyBWZWN0b3IzKCk7XG5cdFx0XHR2YXIgdmVjdG9yID0gbmV3IFZlY3RvcjMoKTtcblxuXHRcdFx0Zm9yICggdmFyIGkgPSAwLCBpbCA9IHRhcmdldHMubGVuZ3RoOyBpIDwgaWw7IGkgKysgKSB7XG5cblx0XHRcdFx0dmFyIHRhcmdldCA9IHRhcmdldHNbIGkgXTtcblxuXHRcdFx0XHRpZiAoIHRhcmdldC5QT1NJVElPTiAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRcdFx0dmFyIGFjY2Vzc29yID0gcGFyc2VyLmpzb24uYWNjZXNzb3JzWyB0YXJnZXQuUE9TSVRJT04gXTtcblx0XHRcdFx0XHR2YXIgbWluID0gYWNjZXNzb3IubWluO1xuXHRcdFx0XHRcdHZhciBtYXggPSBhY2Nlc3Nvci5tYXg7XG5cblx0XHRcdFx0XHQvLyBnbFRGIHJlcXVpcmVzICdtaW4nIGFuZCAnbWF4JywgYnV0IFZSTSAod2hpY2ggZXh0ZW5kcyBnbFRGKSBjdXJyZW50bHkgaWdub3JlcyB0aGF0IHJlcXVpcmVtZW50LlxuXG5cdFx0XHRcdFx0aWYgKCBtaW4gIT09IHVuZGVmaW5lZCAmJiBtYXggIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0XHRcdFx0Ly8gd2UgbmVlZCB0byBnZXQgbWF4IG9mIGFic29sdXRlIGNvbXBvbmVudHMgYmVjYXVzZSB0YXJnZXQgd2VpZ2h0IGlzIFstMSwxXVxuXHRcdFx0XHRcdFx0dmVjdG9yLnNldFgoIE1hdGgubWF4KCBNYXRoLmFicyggbWluWyAwIF0gKSwgTWF0aC5hYnMoIG1heFsgMCBdICkgKSApO1xuXHRcdFx0XHRcdFx0dmVjdG9yLnNldFkoIE1hdGgubWF4KCBNYXRoLmFicyggbWluWyAxIF0gKSwgTWF0aC5hYnMoIG1heFsgMSBdICkgKSApO1xuXHRcdFx0XHRcdFx0dmVjdG9yLnNldFooIE1hdGgubWF4KCBNYXRoLmFicyggbWluWyAyIF0gKSwgTWF0aC5hYnMoIG1heFsgMiBdICkgKSApO1xuXG5cdFx0XHRcdFx0XHQvLyBOb3RlOiB0aGlzIGFzc3VtZXMgdGhhdCB0aGUgc3VtIG9mIGFsbCB3ZWlnaHRzIGlzIGF0IG1vc3QgMS4gVGhpcyBpc24ndCBxdWl0ZSBjb3JyZWN0IC0gaXQncyBtb3JlIGNvbnNlcnZhdGl2ZVxuXHRcdFx0XHRcdFx0Ly8gdG8gYXNzdW1lIHRoYXQgZWFjaCB0YXJnZXQgY2FuIGhhdmUgYSBtYXggd2VpZ2h0IG9mIDEuIEhvd2V2ZXIsIGZvciBzb21lIHVzZSBjYXNlcyAtIG5vdGFibHksIHdoZW4gbW9ycGggdGFyZ2V0c1xuXHRcdFx0XHRcdFx0Ly8gYXJlIHVzZWQgdG8gaW1wbGVtZW50IGtleS1mcmFtZSBhbmltYXRpb25zIGFuZCBhcyBzdWNoIG9ubHkgdHdvIGFyZSBhY3RpdmUgYXQgYSB0aW1lIC0gdGhpcyByZXN1bHRzIGluIHZlcnkgbGFyZ2Vcblx0XHRcdFx0XHRcdC8vIGJveGVzLiBTbyBmb3Igbm93IHdlIG1ha2UgYSBib3ggdGhhdCdzIHNvbWV0aW1lcyBhIHRvdWNoIHRvbyBzbWFsbCBidXQgaXMgaG9wZWZ1bGx5IG1vc3RseSBvZiByZWFzb25hYmxlIHNpemUuXG5cdFx0XHRcdFx0XHRtYXhEaXNwbGFjZW1lbnQubWF4KCB2ZWN0b3IgKTtcblxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRcdGNvbnNvbGUud2FybiggJ1RIUkVFLkdMVEZMb2FkZXI6IE1pc3NpbmcgbWluL21heCBwcm9wZXJ0aWVzIGZvciBhY2Nlc3NvciBQT1NJVElPTi4nICk7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9XG5cblx0XHRcdC8vIEFzIHBlciBjb21tZW50IGFib3ZlIHRoaXMgYm94IGlzbid0IGNvbnNlcnZhdGl2ZSwgYnV0IGhhcyBhIHJlYXNvbmFibGUgc2l6ZSBmb3IgYSB2ZXJ5IGxhcmdlIG51bWJlciBvZiBtb3JwaCB0YXJnZXRzLlxuXHRcdFx0Ym94LmV4cGFuZEJ5VmVjdG9yKCBtYXhEaXNwbGFjZW1lbnQgKTtcblxuXHRcdH1cblxuXHRcdGdlb21ldHJ5LmJvdW5kaW5nQm94ID0gYm94O1xuXG5cdFx0dmFyIHNwaGVyZSA9IG5ldyBTcGhlcmUoKTtcblxuXHRcdGJveC5nZXRDZW50ZXIoIHNwaGVyZS5jZW50ZXIgKTtcblx0XHRzcGhlcmUucmFkaXVzID0gYm94Lm1pbi5kaXN0YW5jZVRvKCBib3gubWF4ICkgLyAyO1xuXG5cdFx0Z2VvbWV0cnkuYm91bmRpbmdTcGhlcmUgPSBzcGhlcmU7XG5cblx0fVxuXG5cdC8qKlxuXHQgKiBAcGFyYW0ge0J1ZmZlckdlb21ldHJ5fSBnZW9tZXRyeVxuXHQgKiBAcGFyYW0ge0dMVEYuUHJpbWl0aXZlfSBwcmltaXRpdmVEZWZcblx0ICogQHBhcmFtIHtHTFRGUGFyc2VyfSBwYXJzZXJcblx0ICogQHJldHVybiB7UHJvbWlzZTxCdWZmZXJHZW9tZXRyeT59XG5cdCAqL1xuXHRmdW5jdGlvbiBhZGRQcmltaXRpdmVBdHRyaWJ1dGVzKCBnZW9tZXRyeSwgcHJpbWl0aXZlRGVmLCBwYXJzZXIgKSB7XG5cblx0XHR2YXIgYXR0cmlidXRlcyA9IHByaW1pdGl2ZURlZi5hdHRyaWJ1dGVzO1xuXG5cdFx0dmFyIHBlbmRpbmcgPSBbXTtcblxuXHRcdGZ1bmN0aW9uIGFzc2lnbkF0dHJpYnV0ZUFjY2Vzc29yKCBhY2Nlc3NvckluZGV4LCBhdHRyaWJ1dGVOYW1lICkge1xuXG5cdFx0XHRyZXR1cm4gcGFyc2VyLmdldERlcGVuZGVuY3koICdhY2Nlc3NvcicsIGFjY2Vzc29ySW5kZXggKVxuXHRcdFx0XHQudGhlbiggZnVuY3Rpb24gKCBhY2Nlc3NvciApIHtcblxuXHRcdFx0XHRcdGdlb21ldHJ5LnNldEF0dHJpYnV0ZSggYXR0cmlidXRlTmFtZSwgYWNjZXNzb3IgKTtcblxuXHRcdFx0XHR9ICk7XG5cblx0XHR9XG5cblx0XHRmb3IgKCB2YXIgZ2x0ZkF0dHJpYnV0ZU5hbWUgaW4gYXR0cmlidXRlcyApIHtcblxuXHRcdFx0dmFyIHRocmVlQXR0cmlidXRlTmFtZSA9IEFUVFJJQlVURVNbIGdsdGZBdHRyaWJ1dGVOYW1lIF0gfHwgZ2x0ZkF0dHJpYnV0ZU5hbWUudG9Mb3dlckNhc2UoKTtcblxuXHRcdFx0Ly8gU2tpcCBhdHRyaWJ1dGVzIGFscmVhZHkgcHJvdmlkZWQgYnkgZS5nLiBEcmFjbyBleHRlbnNpb24uXG5cdFx0XHRpZiAoIHRocmVlQXR0cmlidXRlTmFtZSBpbiBnZW9tZXRyeS5hdHRyaWJ1dGVzICkgY29udGludWU7XG5cblx0XHRcdHBlbmRpbmcucHVzaCggYXNzaWduQXR0cmlidXRlQWNjZXNzb3IoIGF0dHJpYnV0ZXNbIGdsdGZBdHRyaWJ1dGVOYW1lIF0sIHRocmVlQXR0cmlidXRlTmFtZSApICk7XG5cblx0XHR9XG5cblx0XHRpZiAoIHByaW1pdGl2ZURlZi5pbmRpY2VzICE9PSB1bmRlZmluZWQgJiYgISBnZW9tZXRyeS5pbmRleCApIHtcblxuXHRcdFx0dmFyIGFjY2Vzc29yID0gcGFyc2VyLmdldERlcGVuZGVuY3koICdhY2Nlc3NvcicsIHByaW1pdGl2ZURlZi5pbmRpY2VzICkudGhlbiggZnVuY3Rpb24gKCBhY2Nlc3NvciApIHtcblxuXHRcdFx0XHRnZW9tZXRyeS5zZXRJbmRleCggYWNjZXNzb3IgKTtcblxuXHRcdFx0fSApO1xuXG5cdFx0XHRwZW5kaW5nLnB1c2goIGFjY2Vzc29yICk7XG5cblx0XHR9XG5cblx0XHRhc3NpZ25FeHRyYXNUb1VzZXJEYXRhKCBnZW9tZXRyeSwgcHJpbWl0aXZlRGVmICk7XG5cblx0XHRjb21wdXRlQm91bmRzKCBnZW9tZXRyeSwgcHJpbWl0aXZlRGVmLCBwYXJzZXIgKTtcblxuXHRcdHJldHVybiBQcm9taXNlLmFsbCggcGVuZGluZyApLnRoZW4oIGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0cmV0dXJuIHByaW1pdGl2ZURlZi50YXJnZXRzICE9PSB1bmRlZmluZWRcblx0XHRcdFx0PyBhZGRNb3JwaFRhcmdldHMoIGdlb21ldHJ5LCBwcmltaXRpdmVEZWYudGFyZ2V0cywgcGFyc2VyIClcblx0XHRcdFx0OiBnZW9tZXRyeTtcblxuXHRcdH0gKTtcblxuXHR9XG5cblx0LyoqXG5cdCAqIEBwYXJhbSB7QnVmZmVyR2VvbWV0cnl9IGdlb21ldHJ5XG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBkcmF3TW9kZVxuXHQgKiBAcmV0dXJuIHtCdWZmZXJHZW9tZXRyeX1cblx0ICovXG5cdGZ1bmN0aW9uIHRvVHJpYW5nbGVzRHJhd01vZGUoIGdlb21ldHJ5LCBkcmF3TW9kZSApIHtcblxuXHRcdHZhciBpbmRleCA9IGdlb21ldHJ5LmdldEluZGV4KCk7XG5cblx0XHQvLyBnZW5lcmF0ZSBpbmRleCBpZiBub3QgcHJlc2VudFxuXG5cdFx0aWYgKCBpbmRleCA9PT0gbnVsbCApIHtcblxuXHRcdFx0dmFyIGluZGljZXMgPSBbXTtcblxuXHRcdFx0dmFyIHBvc2l0aW9uID0gZ2VvbWV0cnkuZ2V0QXR0cmlidXRlKCAncG9zaXRpb24nICk7XG5cblx0XHRcdGlmICggcG9zaXRpb24gIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0XHRmb3IgKCB2YXIgaSA9IDA7IGkgPCBwb3NpdGlvbi5jb3VudDsgaSArKyApIHtcblxuXHRcdFx0XHRcdGluZGljZXMucHVzaCggaSApO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRnZW9tZXRyeS5zZXRJbmRleCggaW5kaWNlcyApO1xuXHRcdFx0XHRpbmRleCA9IGdlb21ldHJ5LmdldEluZGV4KCk7XG5cblx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0Y29uc29sZS5lcnJvciggJ1RIUkVFLkdMVEZMb2FkZXIudG9UcmlhbmdsZXNEcmF3TW9kZSgpOiBVbmRlZmluZWQgcG9zaXRpb24gYXR0cmlidXRlLiBQcm9jZXNzaW5nIG5vdCBwb3NzaWJsZS4nICk7XG5cdFx0XHRcdHJldHVybiBnZW9tZXRyeTtcblxuXHRcdFx0fVxuXG5cdFx0fVxuXG5cdFx0Ly9cblxuXHRcdHZhciBudW1iZXJPZlRyaWFuZ2xlcyA9IGluZGV4LmNvdW50IC0gMjtcblx0XHR2YXIgbmV3SW5kaWNlcyA9IFtdO1xuXG5cdFx0aWYgKCBkcmF3TW9kZSA9PT0gVHJpYW5nbGVGYW5EcmF3TW9kZSApIHtcblxuXHRcdFx0Ly8gZ2wuVFJJQU5HTEVfRkFOXG5cblx0XHRcdGZvciAoIHZhciBpID0gMTsgaSA8PSBudW1iZXJPZlRyaWFuZ2xlczsgaSArKyApIHtcblxuXHRcdFx0XHRuZXdJbmRpY2VzLnB1c2goIGluZGV4LmdldFgoIDAgKSApO1xuXHRcdFx0XHRuZXdJbmRpY2VzLnB1c2goIGluZGV4LmdldFgoIGkgKSApO1xuXHRcdFx0XHRuZXdJbmRpY2VzLnB1c2goIGluZGV4LmdldFgoIGkgKyAxICkgKTtcblxuXHRcdFx0fVxuXG5cdFx0fSBlbHNlIHtcblxuXHRcdFx0Ly8gZ2wuVFJJQU5HTEVfU1RSSVBcblxuXHRcdFx0Zm9yICggdmFyIGkgPSAwOyBpIDwgbnVtYmVyT2ZUcmlhbmdsZXM7IGkgKysgKSB7XG5cblx0XHRcdFx0aWYgKCBpICUgMiA9PT0gMCApIHtcblxuXHRcdFx0XHRcdG5ld0luZGljZXMucHVzaCggaW5kZXguZ2V0WCggaSApICk7XG5cdFx0XHRcdFx0bmV3SW5kaWNlcy5wdXNoKCBpbmRleC5nZXRYKCBpICsgMSApICk7XG5cdFx0XHRcdFx0bmV3SW5kaWNlcy5wdXNoKCBpbmRleC5nZXRYKCBpICsgMiApICk7XG5cblxuXHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0bmV3SW5kaWNlcy5wdXNoKCBpbmRleC5nZXRYKCBpICsgMiApICk7XG5cdFx0XHRcdFx0bmV3SW5kaWNlcy5wdXNoKCBpbmRleC5nZXRYKCBpICsgMSApICk7XG5cdFx0XHRcdFx0bmV3SW5kaWNlcy5wdXNoKCBpbmRleC5nZXRYKCBpICkgKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdH1cblxuXHRcdH1cblxuXHRcdGlmICggKCBuZXdJbmRpY2VzLmxlbmd0aCAvIDMgKSAhPT0gbnVtYmVyT2ZUcmlhbmdsZXMgKSB7XG5cblx0XHRcdGNvbnNvbGUuZXJyb3IoICdUSFJFRS5HTFRGTG9hZGVyLnRvVHJpYW5nbGVzRHJhd01vZGUoKTogVW5hYmxlIHRvIGdlbmVyYXRlIGNvcnJlY3QgYW1vdW50IG9mIHRyaWFuZ2xlcy4nICk7XG5cblx0XHR9XG5cblx0XHQvLyBidWlsZCBmaW5hbCBnZW9tZXRyeVxuXG5cdFx0dmFyIG5ld0dlb21ldHJ5ID0gZ2VvbWV0cnkuY2xvbmUoKTtcblx0XHRuZXdHZW9tZXRyeS5zZXRJbmRleCggbmV3SW5kaWNlcyApO1xuXG5cdFx0cmV0dXJuIG5ld0dlb21ldHJ5O1xuXG5cdH1cblxuXHQvKipcblx0ICogU3BlY2lmaWNhdGlvbjogaHR0cHM6Ly9naXRodWIuY29tL0tocm9ub3NHcm91cC9nbFRGL2Jsb2IvbWFzdGVyL3NwZWNpZmljYXRpb24vMi4wL1JFQURNRS5tZCNnZW9tZXRyeVxuXHQgKlxuXHQgKiBDcmVhdGVzIEJ1ZmZlckdlb21ldHJpZXMgZnJvbSBwcmltaXRpdmVzLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0FycmF5PEdMVEYuUHJpbWl0aXZlPn0gcHJpbWl0aXZlc1xuXHQgKiBAcmV0dXJuIHtQcm9taXNlPEFycmF5PEJ1ZmZlckdlb21ldHJ5Pj59XG5cdCAqL1xuXHRHTFRGUGFyc2VyLnByb3RvdHlwZS5sb2FkR2VvbWV0cmllcyA9IGZ1bmN0aW9uICggcHJpbWl0aXZlcyApIHtcblxuXHRcdHZhciBwYXJzZXIgPSB0aGlzO1xuXHRcdHZhciBleHRlbnNpb25zID0gdGhpcy5leHRlbnNpb25zO1xuXHRcdHZhciBjYWNoZSA9IHRoaXMucHJpbWl0aXZlQ2FjaGU7XG5cblx0XHRmdW5jdGlvbiBjcmVhdGVEcmFjb1ByaW1pdGl2ZSggcHJpbWl0aXZlICkge1xuXG5cdFx0XHRyZXR1cm4gZXh0ZW5zaW9uc1sgRVhURU5TSU9OUy5LSFJfRFJBQ09fTUVTSF9DT01QUkVTU0lPTiBdXG5cdFx0XHRcdC5kZWNvZGVQcmltaXRpdmUoIHByaW1pdGl2ZSwgcGFyc2VyIClcblx0XHRcdFx0LnRoZW4oIGZ1bmN0aW9uICggZ2VvbWV0cnkgKSB7XG5cblx0XHRcdFx0XHRyZXR1cm4gYWRkUHJpbWl0aXZlQXR0cmlidXRlcyggZ2VvbWV0cnksIHByaW1pdGl2ZSwgcGFyc2VyICk7XG5cblx0XHRcdFx0fSApO1xuXG5cdFx0fVxuXG5cdFx0dmFyIHBlbmRpbmcgPSBbXTtcblxuXHRcdGZvciAoIHZhciBpID0gMCwgaWwgPSBwcmltaXRpdmVzLmxlbmd0aDsgaSA8IGlsOyBpICsrICkge1xuXG5cdFx0XHR2YXIgcHJpbWl0aXZlID0gcHJpbWl0aXZlc1sgaSBdO1xuXHRcdFx0dmFyIGNhY2hlS2V5ID0gY3JlYXRlUHJpbWl0aXZlS2V5KCBwcmltaXRpdmUgKTtcblxuXHRcdFx0Ly8gU2VlIGlmIHdlJ3ZlIGFscmVhZHkgY3JlYXRlZCB0aGlzIGdlb21ldHJ5XG5cdFx0XHR2YXIgY2FjaGVkID0gY2FjaGVbIGNhY2hlS2V5IF07XG5cblx0XHRcdGlmICggY2FjaGVkICkge1xuXG5cdFx0XHRcdC8vIFVzZSB0aGUgY2FjaGVkIGdlb21ldHJ5IGlmIGl0IGV4aXN0c1xuXHRcdFx0XHRwZW5kaW5nLnB1c2goIGNhY2hlZC5wcm9taXNlICk7XG5cblx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0dmFyIGdlb21ldHJ5UHJvbWlzZTtcblxuXHRcdFx0XHRpZiAoIHByaW1pdGl2ZS5leHRlbnNpb25zICYmIHByaW1pdGl2ZS5leHRlbnNpb25zWyBFWFRFTlNJT05TLktIUl9EUkFDT19NRVNIX0NPTVBSRVNTSU9OIF0gKSB7XG5cblx0XHRcdFx0XHQvLyBVc2UgRFJBQ08gZ2VvbWV0cnkgaWYgYXZhaWxhYmxlXG5cdFx0XHRcdFx0Z2VvbWV0cnlQcm9taXNlID0gY3JlYXRlRHJhY29QcmltaXRpdmUoIHByaW1pdGl2ZSApO1xuXG5cdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHQvLyBPdGhlcndpc2UgY3JlYXRlIGEgbmV3IGdlb21ldHJ5XG5cdFx0XHRcdFx0Z2VvbWV0cnlQcm9taXNlID0gYWRkUHJpbWl0aXZlQXR0cmlidXRlcyggbmV3IEJ1ZmZlckdlb21ldHJ5KCksIHByaW1pdGl2ZSwgcGFyc2VyICk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIENhY2hlIHRoaXMgZ2VvbWV0cnlcblx0XHRcdFx0Y2FjaGVbIGNhY2hlS2V5IF0gPSB7IHByaW1pdGl2ZTogcHJpbWl0aXZlLCBwcm9taXNlOiBnZW9tZXRyeVByb21pc2UgfTtcblxuXHRcdFx0XHRwZW5kaW5nLnB1c2goIGdlb21ldHJ5UHJvbWlzZSApO1xuXG5cdFx0XHR9XG5cblx0XHR9XG5cblx0XHRyZXR1cm4gUHJvbWlzZS5hbGwoIHBlbmRpbmcgKTtcblxuXHR9O1xuXG5cdC8qKlxuXHQgKiBTcGVjaWZpY2F0aW9uOiBodHRwczovL2dpdGh1Yi5jb20vS2hyb25vc0dyb3VwL2dsVEYvYmxvYi9tYXN0ZXIvc3BlY2lmaWNhdGlvbi8yLjAvUkVBRE1FLm1kI21lc2hlc1xuXHQgKiBAcGFyYW0ge251bWJlcn0gbWVzaEluZGV4XG5cdCAqIEByZXR1cm4ge1Byb21pc2U8R3JvdXB8TWVzaHxTa2lubmVkTWVzaD59XG5cdCAqL1xuXHRHTFRGUGFyc2VyLnByb3RvdHlwZS5sb2FkTWVzaCA9IGZ1bmN0aW9uICggbWVzaEluZGV4ICkge1xuXG5cdFx0dmFyIHBhcnNlciA9IHRoaXM7XG5cdFx0dmFyIGpzb24gPSB0aGlzLmpzb247XG5cdFx0dmFyIGV4dGVuc2lvbnMgPSB0aGlzLmV4dGVuc2lvbnM7XG5cblx0XHR2YXIgbWVzaERlZiA9IGpzb24ubWVzaGVzWyBtZXNoSW5kZXggXTtcblx0XHR2YXIgcHJpbWl0aXZlcyA9IG1lc2hEZWYucHJpbWl0aXZlcztcblxuXHRcdHZhciBwZW5kaW5nID0gW107XG5cblx0XHRmb3IgKCB2YXIgaSA9IDAsIGlsID0gcHJpbWl0aXZlcy5sZW5ndGg7IGkgPCBpbDsgaSArKyApIHtcblxuXHRcdFx0dmFyIG1hdGVyaWFsID0gcHJpbWl0aXZlc1sgaSBdLm1hdGVyaWFsID09PSB1bmRlZmluZWRcblx0XHRcdFx0PyBjcmVhdGVEZWZhdWx0TWF0ZXJpYWwoIHRoaXMuY2FjaGUgKVxuXHRcdFx0XHQ6IHRoaXMuZ2V0RGVwZW5kZW5jeSggJ21hdGVyaWFsJywgcHJpbWl0aXZlc1sgaSBdLm1hdGVyaWFsICk7XG5cblx0XHRcdHBlbmRpbmcucHVzaCggbWF0ZXJpYWwgKTtcblxuXHRcdH1cblxuXHRcdHBlbmRpbmcucHVzaCggcGFyc2VyLmxvYWRHZW9tZXRyaWVzKCBwcmltaXRpdmVzICkgKTtcblxuXHRcdHJldHVybiBQcm9taXNlLmFsbCggcGVuZGluZyApLnRoZW4oIGZ1bmN0aW9uICggcmVzdWx0cyApIHtcblxuXHRcdFx0dmFyIG1hdGVyaWFscyA9IHJlc3VsdHMuc2xpY2UoIDAsIHJlc3VsdHMubGVuZ3RoIC0gMSApO1xuXHRcdFx0dmFyIGdlb21ldHJpZXMgPSByZXN1bHRzWyByZXN1bHRzLmxlbmd0aCAtIDEgXTtcblxuXHRcdFx0dmFyIG1lc2hlcyA9IFtdO1xuXG5cdFx0XHRmb3IgKCB2YXIgaSA9IDAsIGlsID0gZ2VvbWV0cmllcy5sZW5ndGg7IGkgPCBpbDsgaSArKyApIHtcblxuXHRcdFx0XHR2YXIgZ2VvbWV0cnkgPSBnZW9tZXRyaWVzWyBpIF07XG5cdFx0XHRcdHZhciBwcmltaXRpdmUgPSBwcmltaXRpdmVzWyBpIF07XG5cblx0XHRcdFx0Ly8gMS4gY3JlYXRlIE1lc2hcblxuXHRcdFx0XHR2YXIgbWVzaDtcblxuXHRcdFx0XHR2YXIgbWF0ZXJpYWwgPSBtYXRlcmlhbHNbIGkgXTtcblxuXHRcdFx0XHRpZiAoIHByaW1pdGl2ZS5tb2RlID09PSBXRUJHTF9DT05TVEFOVFMuVFJJQU5HTEVTIHx8XG5cdFx0XHRcdFx0cHJpbWl0aXZlLm1vZGUgPT09IFdFQkdMX0NPTlNUQU5UUy5UUklBTkdMRV9TVFJJUCB8fFxuXHRcdFx0XHRcdHByaW1pdGl2ZS5tb2RlID09PSBXRUJHTF9DT05TVEFOVFMuVFJJQU5HTEVfRkFOIHx8XG5cdFx0XHRcdFx0cHJpbWl0aXZlLm1vZGUgPT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0XHRcdC8vIC5pc1NraW5uZWRNZXNoIGlzbid0IGluIGdsVEYgc3BlYy4gU2VlIC5fbWFya0RlZnMoKVxuXHRcdFx0XHRcdG1lc2ggPSBtZXNoRGVmLmlzU2tpbm5lZE1lc2ggPT09IHRydWVcblx0XHRcdFx0XHRcdD8gbmV3IFNraW5uZWRNZXNoKCBnZW9tZXRyeSwgbWF0ZXJpYWwgKVxuXHRcdFx0XHRcdFx0OiBuZXcgTWVzaCggZ2VvbWV0cnksIG1hdGVyaWFsICk7XG5cblx0XHRcdFx0XHRpZiAoIG1lc2guaXNTa2lubmVkTWVzaCA9PT0gdHJ1ZSAmJiAhIG1lc2guZ2VvbWV0cnkuYXR0cmlidXRlcy5za2luV2VpZ2h0Lm5vcm1hbGl6ZWQgKSB7XG5cblx0XHRcdFx0XHRcdC8vIHdlIG5vcm1hbGl6ZSBmbG9hdGluZyBwb2ludCBza2luIHdlaWdodCBhcnJheSB0byBmaXggbWFsZm9ybWVkIGFzc2V0cyAoc2VlICMxNTMxOSlcblx0XHRcdFx0XHRcdC8vIGl0J3MgaW1wb3J0YW50IHRvIHNraXAgdGhpcyBmb3Igbm9uLWZsb2F0MzIgZGF0YSBzaW5jZSBub3JtYWxpemVTa2luV2VpZ2h0cyBhc3N1bWVzIG5vbi1ub3JtYWxpemVkIGlucHV0c1xuXHRcdFx0XHRcdFx0bWVzaC5ub3JtYWxpemVTa2luV2VpZ2h0cygpO1xuXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0aWYgKCBwcmltaXRpdmUubW9kZSA9PT0gV0VCR0xfQ09OU1RBTlRTLlRSSUFOR0xFX1NUUklQICkge1xuXG5cdFx0XHRcdFx0XHRtZXNoLmdlb21ldHJ5ID0gdG9UcmlhbmdsZXNEcmF3TW9kZSggbWVzaC5nZW9tZXRyeSwgVHJpYW5nbGVTdHJpcERyYXdNb2RlICk7XG5cblx0XHRcdFx0XHR9IGVsc2UgaWYgKCBwcmltaXRpdmUubW9kZSA9PT0gV0VCR0xfQ09OU1RBTlRTLlRSSUFOR0xFX0ZBTiApIHtcblxuXHRcdFx0XHRcdFx0bWVzaC5nZW9tZXRyeSA9IHRvVHJpYW5nbGVzRHJhd01vZGUoIG1lc2guZ2VvbWV0cnksIFRyaWFuZ2xlRmFuRHJhd01vZGUgKTtcblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHR9IGVsc2UgaWYgKCBwcmltaXRpdmUubW9kZSA9PT0gV0VCR0xfQ09OU1RBTlRTLkxJTkVTICkge1xuXG5cdFx0XHRcdFx0bWVzaCA9IG5ldyBMaW5lU2VnbWVudHMoIGdlb21ldHJ5LCBtYXRlcmlhbCApO1xuXG5cdFx0XHRcdH0gZWxzZSBpZiAoIHByaW1pdGl2ZS5tb2RlID09PSBXRUJHTF9DT05TVEFOVFMuTElORV9TVFJJUCApIHtcblxuXHRcdFx0XHRcdG1lc2ggPSBuZXcgTGluZSggZ2VvbWV0cnksIG1hdGVyaWFsICk7XG5cblx0XHRcdFx0fSBlbHNlIGlmICggcHJpbWl0aXZlLm1vZGUgPT09IFdFQkdMX0NPTlNUQU5UUy5MSU5FX0xPT1AgKSB7XG5cblx0XHRcdFx0XHRtZXNoID0gbmV3IExpbmVMb29wKCBnZW9tZXRyeSwgbWF0ZXJpYWwgKTtcblxuXHRcdFx0XHR9IGVsc2UgaWYgKCBwcmltaXRpdmUubW9kZSA9PT0gV0VCR0xfQ09OU1RBTlRTLlBPSU5UUyApIHtcblxuXHRcdFx0XHRcdG1lc2ggPSBuZXcgUG9pbnRzKCBnZW9tZXRyeSwgbWF0ZXJpYWwgKTtcblxuXHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKCAnVEhSRUUuR0xURkxvYWRlcjogUHJpbWl0aXZlIG1vZGUgdW5zdXBwb3J0ZWQ6ICcgKyBwcmltaXRpdmUubW9kZSApO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoIE9iamVjdC5rZXlzKCBtZXNoLmdlb21ldHJ5Lm1vcnBoQXR0cmlidXRlcyApLmxlbmd0aCA+IDAgKSB7XG5cblx0XHRcdFx0XHR1cGRhdGVNb3JwaFRhcmdldHMoIG1lc2gsIG1lc2hEZWYgKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdFx0bWVzaC5uYW1lID0gcGFyc2VyLmNyZWF0ZVVuaXF1ZU5hbWUoIG1lc2hEZWYubmFtZSB8fCAoICdtZXNoXycgKyBtZXNoSW5kZXggKSApO1xuXG5cdFx0XHRcdGFzc2lnbkV4dHJhc1RvVXNlckRhdGEoIG1lc2gsIG1lc2hEZWYgKTtcblxuXHRcdFx0XHRpZiAoIHByaW1pdGl2ZS5leHRlbnNpb25zICkgYWRkVW5rbm93bkV4dGVuc2lvbnNUb1VzZXJEYXRhKCBleHRlbnNpb25zLCBtZXNoLCBwcmltaXRpdmUgKTtcblxuXHRcdFx0XHRwYXJzZXIuYXNzaWduRmluYWxNYXRlcmlhbCggbWVzaCApO1xuXG5cdFx0XHRcdG1lc2hlcy5wdXNoKCBtZXNoICk7XG5cblx0XHRcdH1cblxuXHRcdFx0aWYgKCBtZXNoZXMubGVuZ3RoID09PSAxICkge1xuXG5cdFx0XHRcdHJldHVybiBtZXNoZXNbIDAgXTtcblxuXHRcdFx0fVxuXG5cdFx0XHR2YXIgZ3JvdXAgPSBuZXcgR3JvdXAoKTtcblxuXHRcdFx0Zm9yICggdmFyIGkgPSAwLCBpbCA9IG1lc2hlcy5sZW5ndGg7IGkgPCBpbDsgaSArKyApIHtcblxuXHRcdFx0XHRncm91cC5hZGQoIG1lc2hlc1sgaSBdICk7XG5cblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGdyb3VwO1xuXG5cdFx0fSApO1xuXG5cdH07XG5cblx0LyoqXG5cdCAqIFNwZWNpZmljYXRpb246IGh0dHBzOi8vZ2l0aHViLmNvbS9LaHJvbm9zR3JvdXAvZ2xURi90cmVlL21hc3Rlci9zcGVjaWZpY2F0aW9uLzIuMCNjYW1lcmFzXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBjYW1lcmFJbmRleFxuXHQgKiBAcmV0dXJuIHtQcm9taXNlPFRIUkVFLkNhbWVyYT59XG5cdCAqL1xuXHRHTFRGUGFyc2VyLnByb3RvdHlwZS5sb2FkQ2FtZXJhID0gZnVuY3Rpb24gKCBjYW1lcmFJbmRleCApIHtcblxuXHRcdHZhciBjYW1lcmE7XG5cdFx0dmFyIGNhbWVyYURlZiA9IHRoaXMuanNvbi5jYW1lcmFzWyBjYW1lcmFJbmRleCBdO1xuXHRcdHZhciBwYXJhbXMgPSBjYW1lcmFEZWZbIGNhbWVyYURlZi50eXBlIF07XG5cblx0XHRpZiAoICEgcGFyYW1zICkge1xuXG5cdFx0XHRjb25zb2xlLndhcm4oICdUSFJFRS5HTFRGTG9hZGVyOiBNaXNzaW5nIGNhbWVyYSBwYXJhbWV0ZXJzLicgKTtcblx0XHRcdHJldHVybjtcblxuXHRcdH1cblxuXHRcdGlmICggY2FtZXJhRGVmLnR5cGUgPT09ICdwZXJzcGVjdGl2ZScgKSB7XG5cblx0XHRcdGNhbWVyYSA9IG5ldyBQZXJzcGVjdGl2ZUNhbWVyYSggTWF0aFV0aWxzLnJhZFRvRGVnKCBwYXJhbXMueWZvdiApLCBwYXJhbXMuYXNwZWN0UmF0aW8gfHwgMSwgcGFyYW1zLnpuZWFyIHx8IDEsIHBhcmFtcy56ZmFyIHx8IDJlNiApO1xuXG5cdFx0fSBlbHNlIGlmICggY2FtZXJhRGVmLnR5cGUgPT09ICdvcnRob2dyYXBoaWMnICkge1xuXG5cdFx0XHRjYW1lcmEgPSBuZXcgT3J0aG9ncmFwaGljQ2FtZXJhKCAtIHBhcmFtcy54bWFnLCBwYXJhbXMueG1hZywgcGFyYW1zLnltYWcsIC0gcGFyYW1zLnltYWcsIHBhcmFtcy56bmVhciwgcGFyYW1zLnpmYXIgKTtcblxuXHRcdH1cblxuXHRcdGlmICggY2FtZXJhRGVmLm5hbWUgKSBjYW1lcmEubmFtZSA9IHRoaXMuY3JlYXRlVW5pcXVlTmFtZSggY2FtZXJhRGVmLm5hbWUgKTtcblxuXHRcdGFzc2lnbkV4dHJhc1RvVXNlckRhdGEoIGNhbWVyYSwgY2FtZXJhRGVmICk7XG5cblx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCBjYW1lcmEgKTtcblxuXHR9O1xuXG5cdC8qKlxuXHQgKiBTcGVjaWZpY2F0aW9uOiBodHRwczovL2dpdGh1Yi5jb20vS2hyb25vc0dyb3VwL2dsVEYvdHJlZS9tYXN0ZXIvc3BlY2lmaWNhdGlvbi8yLjAjc2tpbnNcblx0ICogQHBhcmFtIHtudW1iZXJ9IHNraW5JbmRleFxuXHQgKiBAcmV0dXJuIHtQcm9taXNlPE9iamVjdD59XG5cdCAqL1xuXHRHTFRGUGFyc2VyLnByb3RvdHlwZS5sb2FkU2tpbiA9IGZ1bmN0aW9uICggc2tpbkluZGV4ICkge1xuXG5cdFx0dmFyIHNraW5EZWYgPSB0aGlzLmpzb24uc2tpbnNbIHNraW5JbmRleCBdO1xuXG5cdFx0dmFyIHNraW5FbnRyeSA9IHsgam9pbnRzOiBza2luRGVmLmpvaW50cyB9O1xuXG5cdFx0aWYgKCBza2luRGVmLmludmVyc2VCaW5kTWF0cmljZXMgPT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZSggc2tpbkVudHJ5ICk7XG5cblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcy5nZXREZXBlbmRlbmN5KCAnYWNjZXNzb3InLCBza2luRGVmLmludmVyc2VCaW5kTWF0cmljZXMgKS50aGVuKCBmdW5jdGlvbiAoIGFjY2Vzc29yICkge1xuXG5cdFx0XHRza2luRW50cnkuaW52ZXJzZUJpbmRNYXRyaWNlcyA9IGFjY2Vzc29yO1xuXG5cdFx0XHRyZXR1cm4gc2tpbkVudHJ5O1xuXG5cdFx0fSApO1xuXG5cdH07XG5cblx0LyoqXG5cdCAqIFNwZWNpZmljYXRpb246IGh0dHBzOi8vZ2l0aHViLmNvbS9LaHJvbm9zR3JvdXAvZ2xURi90cmVlL21hc3Rlci9zcGVjaWZpY2F0aW9uLzIuMCNhbmltYXRpb25zXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBhbmltYXRpb25JbmRleFxuXHQgKiBAcmV0dXJuIHtQcm9taXNlPEFuaW1hdGlvbkNsaXA+fVxuXHQgKi9cblx0R0xURlBhcnNlci5wcm90b3R5cGUubG9hZEFuaW1hdGlvbiA9IGZ1bmN0aW9uICggYW5pbWF0aW9uSW5kZXggKSB7XG5cblx0XHR2YXIganNvbiA9IHRoaXMuanNvbjtcblxuXHRcdHZhciBhbmltYXRpb25EZWYgPSBqc29uLmFuaW1hdGlvbnNbIGFuaW1hdGlvbkluZGV4IF07XG5cblx0XHR2YXIgcGVuZGluZ05vZGVzID0gW107XG5cdFx0dmFyIHBlbmRpbmdJbnB1dEFjY2Vzc29ycyA9IFtdO1xuXHRcdHZhciBwZW5kaW5nT3V0cHV0QWNjZXNzb3JzID0gW107XG5cdFx0dmFyIHBlbmRpbmdTYW1wbGVycyA9IFtdO1xuXHRcdHZhciBwZW5kaW5nVGFyZ2V0cyA9IFtdO1xuXG5cdFx0Zm9yICggdmFyIGkgPSAwLCBpbCA9IGFuaW1hdGlvbkRlZi5jaGFubmVscy5sZW5ndGg7IGkgPCBpbDsgaSArKyApIHtcblxuXHRcdFx0dmFyIGNoYW5uZWwgPSBhbmltYXRpb25EZWYuY2hhbm5lbHNbIGkgXTtcblx0XHRcdHZhciBzYW1wbGVyID0gYW5pbWF0aW9uRGVmLnNhbXBsZXJzWyBjaGFubmVsLnNhbXBsZXIgXTtcblx0XHRcdHZhciB0YXJnZXQgPSBjaGFubmVsLnRhcmdldDtcblx0XHRcdHZhciBuYW1lID0gdGFyZ2V0Lm5vZGUgIT09IHVuZGVmaW5lZCA/IHRhcmdldC5ub2RlIDogdGFyZ2V0LmlkOyAvLyBOT1RFOiB0YXJnZXQuaWQgaXMgZGVwcmVjYXRlZC5cblx0XHRcdHZhciBpbnB1dCA9IGFuaW1hdGlvbkRlZi5wYXJhbWV0ZXJzICE9PSB1bmRlZmluZWQgPyBhbmltYXRpb25EZWYucGFyYW1ldGVyc1sgc2FtcGxlci5pbnB1dCBdIDogc2FtcGxlci5pbnB1dDtcblx0XHRcdHZhciBvdXRwdXQgPSBhbmltYXRpb25EZWYucGFyYW1ldGVycyAhPT0gdW5kZWZpbmVkID8gYW5pbWF0aW9uRGVmLnBhcmFtZXRlcnNbIHNhbXBsZXIub3V0cHV0IF0gOiBzYW1wbGVyLm91dHB1dDtcblxuXHRcdFx0cGVuZGluZ05vZGVzLnB1c2goIHRoaXMuZ2V0RGVwZW5kZW5jeSggJ25vZGUnLCBuYW1lICkgKTtcblx0XHRcdHBlbmRpbmdJbnB1dEFjY2Vzc29ycy5wdXNoKCB0aGlzLmdldERlcGVuZGVuY3koICdhY2Nlc3NvcicsIGlucHV0ICkgKTtcblx0XHRcdHBlbmRpbmdPdXRwdXRBY2Nlc3NvcnMucHVzaCggdGhpcy5nZXREZXBlbmRlbmN5KCAnYWNjZXNzb3InLCBvdXRwdXQgKSApO1xuXHRcdFx0cGVuZGluZ1NhbXBsZXJzLnB1c2goIHNhbXBsZXIgKTtcblx0XHRcdHBlbmRpbmdUYXJnZXRzLnB1c2goIHRhcmdldCApO1xuXG5cdFx0fVxuXG5cdFx0cmV0dXJuIFByb21pc2UuYWxsKCBbXG5cblx0XHRcdFByb21pc2UuYWxsKCBwZW5kaW5nTm9kZXMgKSxcblx0XHRcdFByb21pc2UuYWxsKCBwZW5kaW5nSW5wdXRBY2Nlc3NvcnMgKSxcblx0XHRcdFByb21pc2UuYWxsKCBwZW5kaW5nT3V0cHV0QWNjZXNzb3JzICksXG5cdFx0XHRQcm9taXNlLmFsbCggcGVuZGluZ1NhbXBsZXJzICksXG5cdFx0XHRQcm9taXNlLmFsbCggcGVuZGluZ1RhcmdldHMgKVxuXG5cdFx0XSApLnRoZW4oIGZ1bmN0aW9uICggZGVwZW5kZW5jaWVzICkge1xuXG5cdFx0XHR2YXIgbm9kZXMgPSBkZXBlbmRlbmNpZXNbIDAgXTtcblx0XHRcdHZhciBpbnB1dEFjY2Vzc29ycyA9IGRlcGVuZGVuY2llc1sgMSBdO1xuXHRcdFx0dmFyIG91dHB1dEFjY2Vzc29ycyA9IGRlcGVuZGVuY2llc1sgMiBdO1xuXHRcdFx0dmFyIHNhbXBsZXJzID0gZGVwZW5kZW5jaWVzWyAzIF07XG5cdFx0XHR2YXIgdGFyZ2V0cyA9IGRlcGVuZGVuY2llc1sgNCBdO1xuXG5cdFx0XHR2YXIgdHJhY2tzID0gW107XG5cblx0XHRcdGZvciAoIHZhciBpID0gMCwgaWwgPSBub2Rlcy5sZW5ndGg7IGkgPCBpbDsgaSArKyApIHtcblxuXHRcdFx0XHR2YXIgbm9kZSA9IG5vZGVzWyBpIF07XG5cdFx0XHRcdHZhciBpbnB1dEFjY2Vzc29yID0gaW5wdXRBY2Nlc3NvcnNbIGkgXTtcblx0XHRcdFx0dmFyIG91dHB1dEFjY2Vzc29yID0gb3V0cHV0QWNjZXNzb3JzWyBpIF07XG5cdFx0XHRcdHZhciBzYW1wbGVyID0gc2FtcGxlcnNbIGkgXTtcblx0XHRcdFx0dmFyIHRhcmdldCA9IHRhcmdldHNbIGkgXTtcblxuXHRcdFx0XHRpZiAoIG5vZGUgPT09IHVuZGVmaW5lZCApIGNvbnRpbnVlO1xuXG5cdFx0XHRcdG5vZGUudXBkYXRlTWF0cml4KCk7XG5cdFx0XHRcdG5vZGUubWF0cml4QXV0b1VwZGF0ZSA9IHRydWU7XG5cblx0XHRcdFx0dmFyIFR5cGVkS2V5ZnJhbWVUcmFjaztcblxuXHRcdFx0XHRzd2l0Y2ggKCBQQVRIX1BST1BFUlRJRVNbIHRhcmdldC5wYXRoIF0gKSB7XG5cblx0XHRcdFx0XHRjYXNlIFBBVEhfUFJPUEVSVElFUy53ZWlnaHRzOlxuXG5cdFx0XHRcdFx0XHRUeXBlZEtleWZyYW1lVHJhY2sgPSBOdW1iZXJLZXlmcmFtZVRyYWNrO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRjYXNlIFBBVEhfUFJPUEVSVElFUy5yb3RhdGlvbjpcblxuXHRcdFx0XHRcdFx0VHlwZWRLZXlmcmFtZVRyYWNrID0gUXVhdGVybmlvbktleWZyYW1lVHJhY2s7XG5cdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdGNhc2UgUEFUSF9QUk9QRVJUSUVTLnBvc2l0aW9uOlxuXHRcdFx0XHRcdGNhc2UgUEFUSF9QUk9QRVJUSUVTLnNjYWxlOlxuXHRcdFx0XHRcdGRlZmF1bHQ6XG5cblx0XHRcdFx0XHRcdFR5cGVkS2V5ZnJhbWVUcmFjayA9IFZlY3RvcktleWZyYW1lVHJhY2s7XG5cdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHR9XG5cblx0XHRcdFx0dmFyIHRhcmdldE5hbWUgPSBub2RlLm5hbWUgPyBub2RlLm5hbWUgOiBub2RlLnV1aWQ7XG5cblx0XHRcdFx0dmFyIGludGVycG9sYXRpb24gPSBzYW1wbGVyLmludGVycG9sYXRpb24gIT09IHVuZGVmaW5lZCA/IElOVEVSUE9MQVRJT05bIHNhbXBsZXIuaW50ZXJwb2xhdGlvbiBdIDogSW50ZXJwb2xhdGVMaW5lYXI7XG5cblx0XHRcdFx0dmFyIHRhcmdldE5hbWVzID0gW107XG5cblx0XHRcdFx0aWYgKCBQQVRIX1BST1BFUlRJRVNbIHRhcmdldC5wYXRoIF0gPT09IFBBVEhfUFJPUEVSVElFUy53ZWlnaHRzICkge1xuXG5cdFx0XHRcdFx0Ly8gTm9kZSBtYXkgYmUgYSBHcm91cCAoZ2xURiBtZXNoIHdpdGggc2V2ZXJhbCBwcmltaXRpdmVzKSBvciBhIE1lc2guXG5cdFx0XHRcdFx0bm9kZS50cmF2ZXJzZSggZnVuY3Rpb24gKCBvYmplY3QgKSB7XG5cblx0XHRcdFx0XHRcdGlmICggb2JqZWN0LmlzTWVzaCA9PT0gdHJ1ZSAmJiBvYmplY3QubW9ycGhUYXJnZXRJbmZsdWVuY2VzICkge1xuXG5cdFx0XHRcdFx0XHRcdHRhcmdldE5hbWVzLnB1c2goIG9iamVjdC5uYW1lID8gb2JqZWN0Lm5hbWUgOiBvYmplY3QudXVpZCApO1xuXG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHR9ICk7XG5cblx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdHRhcmdldE5hbWVzLnB1c2goIHRhcmdldE5hbWUgKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdFx0dmFyIG91dHB1dEFycmF5ID0gb3V0cHV0QWNjZXNzb3IuYXJyYXk7XG5cblx0XHRcdFx0aWYgKCBvdXRwdXRBY2Nlc3Nvci5ub3JtYWxpemVkICkge1xuXG5cdFx0XHRcdFx0dmFyIHNjYWxlO1xuXG5cdFx0XHRcdFx0aWYgKCBvdXRwdXRBcnJheS5jb25zdHJ1Y3RvciA9PT0gSW50OEFycmF5ICkge1xuXG5cdFx0XHRcdFx0XHRzY2FsZSA9IDEgLyAxMjc7XG5cblx0XHRcdFx0XHR9IGVsc2UgaWYgKCBvdXRwdXRBcnJheS5jb25zdHJ1Y3RvciA9PT0gVWludDhBcnJheSApIHtcblxuXHRcdFx0XHRcdFx0c2NhbGUgPSAxIC8gMjU1O1xuXG5cdFx0XHRcdFx0fSBlbHNlIGlmICggb3V0cHV0QXJyYXkuY29uc3RydWN0b3IgPT0gSW50MTZBcnJheSApIHtcblxuXHRcdFx0XHRcdFx0c2NhbGUgPSAxIC8gMzI3Njc7XG5cblx0XHRcdFx0XHR9IGVsc2UgaWYgKCBvdXRwdXRBcnJheS5jb25zdHJ1Y3RvciA9PT0gVWludDE2QXJyYXkgKSB7XG5cblx0XHRcdFx0XHRcdHNjYWxlID0gMSAvIDY1NTM1O1xuXG5cdFx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKCAnVEhSRUUuR0xURkxvYWRlcjogVW5zdXBwb3J0ZWQgb3V0cHV0IGFjY2Vzc29yIGNvbXBvbmVudCB0eXBlLicgKTtcblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdHZhciBzY2FsZWQgPSBuZXcgRmxvYXQzMkFycmF5KCBvdXRwdXRBcnJheS5sZW5ndGggKTtcblxuXHRcdFx0XHRcdGZvciAoIHZhciBqID0gMCwgamwgPSBvdXRwdXRBcnJheS5sZW5ndGg7IGogPCBqbDsgaiArKyApIHtcblxuXHRcdFx0XHRcdFx0c2NhbGVkWyBqIF0gPSBvdXRwdXRBcnJheVsgaiBdICogc2NhbGU7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRvdXRwdXRBcnJheSA9IHNjYWxlZDtcblxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Zm9yICggdmFyIGogPSAwLCBqbCA9IHRhcmdldE5hbWVzLmxlbmd0aDsgaiA8IGpsOyBqICsrICkge1xuXG5cdFx0XHRcdFx0dmFyIHRyYWNrID0gbmV3IFR5cGVkS2V5ZnJhbWVUcmFjayhcblx0XHRcdFx0XHRcdHRhcmdldE5hbWVzWyBqIF0gKyAnLicgKyBQQVRIX1BST1BFUlRJRVNbIHRhcmdldC5wYXRoIF0sXG5cdFx0XHRcdFx0XHRpbnB1dEFjY2Vzc29yLmFycmF5LFxuXHRcdFx0XHRcdFx0b3V0cHV0QXJyYXksXG5cdFx0XHRcdFx0XHRpbnRlcnBvbGF0aW9uXG5cdFx0XHRcdFx0KTtcblxuXHRcdFx0XHRcdC8vIE92ZXJyaWRlIGludGVycG9sYXRpb24gd2l0aCBjdXN0b20gZmFjdG9yeSBtZXRob2QuXG5cdFx0XHRcdFx0aWYgKCBzYW1wbGVyLmludGVycG9sYXRpb24gPT09ICdDVUJJQ1NQTElORScgKSB7XG5cblx0XHRcdFx0XHRcdHRyYWNrLmNyZWF0ZUludGVycG9sYW50ID0gZnVuY3Rpb24gSW50ZXJwb2xhbnRGYWN0b3J5TWV0aG9kR0xURkN1YmljU3BsaW5lKCByZXN1bHQgKSB7XG5cblx0XHRcdFx0XHRcdFx0Ly8gQSBDVUJJQ1NQTElORSBrZXlmcmFtZSBpbiBnbFRGIGhhcyB0aHJlZSBvdXRwdXQgdmFsdWVzIGZvciBlYWNoIGlucHV0IHZhbHVlLFxuXHRcdFx0XHRcdFx0XHQvLyByZXByZXNlbnRpbmcgaW5UYW5nZW50LCBzcGxpbmVWZXJ0ZXgsIGFuZCBvdXRUYW5nZW50LiBBcyBhIHJlc3VsdCwgdHJhY2suZ2V0VmFsdWVTaXplKClcblx0XHRcdFx0XHRcdFx0Ly8gbXVzdCBiZSBkaXZpZGVkIGJ5IHRocmVlIHRvIGdldCB0aGUgaW50ZXJwb2xhbnQncyBzYW1wbGVTaXplIGFyZ3VtZW50LlxuXG5cdFx0XHRcdFx0XHRcdHJldHVybiBuZXcgR0xURkN1YmljU3BsaW5lSW50ZXJwb2xhbnQoIHRoaXMudGltZXMsIHRoaXMudmFsdWVzLCB0aGlzLmdldFZhbHVlU2l6ZSgpIC8gMywgcmVzdWx0ICk7XG5cblx0XHRcdFx0XHRcdH07XG5cblx0XHRcdFx0XHRcdC8vIE1hcmsgYXMgQ1VCSUNTUExJTkUuIGB0cmFjay5nZXRJbnRlcnBvbGF0aW9uKClgIGRvZXNuJ3Qgc3VwcG9ydCBjdXN0b20gaW50ZXJwb2xhbnRzLlxuXHRcdFx0XHRcdFx0dHJhY2suY3JlYXRlSW50ZXJwb2xhbnQuaXNJbnRlcnBvbGFudEZhY3RvcnlNZXRob2RHTFRGQ3ViaWNTcGxpbmUgPSB0cnVlO1xuXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0dHJhY2tzLnB1c2goIHRyYWNrICk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9XG5cblx0XHRcdHZhciBuYW1lID0gYW5pbWF0aW9uRGVmLm5hbWUgPyBhbmltYXRpb25EZWYubmFtZSA6ICdhbmltYXRpb25fJyArIGFuaW1hdGlvbkluZGV4O1xuXG5cdFx0XHRyZXR1cm4gbmV3IEFuaW1hdGlvbkNsaXAoIG5hbWUsIHVuZGVmaW5lZCwgdHJhY2tzICk7XG5cblx0XHR9ICk7XG5cblx0fTtcblxuXHQvKipcblx0ICogU3BlY2lmaWNhdGlvbjogaHR0cHM6Ly9naXRodWIuY29tL0tocm9ub3NHcm91cC9nbFRGL3RyZWUvbWFzdGVyL3NwZWNpZmljYXRpb24vMi4wI25vZGVzLWFuZC1oaWVyYXJjaHlcblx0ICogQHBhcmFtIHtudW1iZXJ9IG5vZGVJbmRleFxuXHQgKiBAcmV0dXJuIHtQcm9taXNlPE9iamVjdDNEPn1cblx0ICovXG5cdEdMVEZQYXJzZXIucHJvdG90eXBlLmxvYWROb2RlID0gZnVuY3Rpb24gKCBub2RlSW5kZXggKSB7XG5cblx0XHR2YXIganNvbiA9IHRoaXMuanNvbjtcblx0XHR2YXIgZXh0ZW5zaW9ucyA9IHRoaXMuZXh0ZW5zaW9ucztcblx0XHR2YXIgcGFyc2VyID0gdGhpcztcblxuXHRcdHZhciBub2RlRGVmID0ganNvbi5ub2Rlc1sgbm9kZUluZGV4IF07XG5cblx0XHQvLyByZXNlcnZlIG5vZGUncyBuYW1lIGJlZm9yZSBpdHMgZGVwZW5kZW5jaWVzLCBzbyB0aGUgcm9vdCBoYXMgdGhlIGludGVuZGVkIG5hbWUuXG5cdFx0dmFyIG5vZGVOYW1lID0gbm9kZURlZi5uYW1lID8gcGFyc2VyLmNyZWF0ZVVuaXF1ZU5hbWUoIG5vZGVEZWYubmFtZSApIDogJyc7XG5cblx0XHRyZXR1cm4gKCBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdHZhciBwZW5kaW5nID0gW107XG5cblx0XHRcdGlmICggbm9kZURlZi5tZXNoICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0cGVuZGluZy5wdXNoKCBwYXJzZXIuZ2V0RGVwZW5kZW5jeSggJ21lc2gnLCBub2RlRGVmLm1lc2ggKS50aGVuKCBmdW5jdGlvbiAoIG1lc2ggKSB7XG5cblx0XHRcdFx0XHR2YXIgbm9kZSA9IHBhcnNlci5fZ2V0Tm9kZVJlZiggcGFyc2VyLm1lc2hDYWNoZSwgbm9kZURlZi5tZXNoLCBtZXNoICk7XG5cblx0XHRcdFx0XHQvLyBpZiB3ZWlnaHRzIGFyZSBwcm92aWRlZCBvbiB0aGUgbm9kZSwgb3ZlcnJpZGUgd2VpZ2h0cyBvbiB0aGUgbWVzaC5cblx0XHRcdFx0XHRpZiAoIG5vZGVEZWYud2VpZ2h0cyAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRcdFx0XHRub2RlLnRyYXZlcnNlKCBmdW5jdGlvbiAoIG8gKSB7XG5cblx0XHRcdFx0XHRcdFx0aWYgKCAhIG8uaXNNZXNoICkgcmV0dXJuO1xuXG5cdFx0XHRcdFx0XHRcdGZvciAoIHZhciBpID0gMCwgaWwgPSBub2RlRGVmLndlaWdodHMubGVuZ3RoOyBpIDwgaWw7IGkgKysgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHRvLm1vcnBoVGFyZ2V0SW5mbHVlbmNlc1sgaSBdID0gbm9kZURlZi53ZWlnaHRzWyBpIF07XG5cblx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHR9ICk7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRyZXR1cm4gbm9kZTtcblxuXHRcdFx0XHR9ICkgKTtcblxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIG5vZGVEZWYuY2FtZXJhICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0cGVuZGluZy5wdXNoKCBwYXJzZXIuZ2V0RGVwZW5kZW5jeSggJ2NhbWVyYScsIG5vZGVEZWYuY2FtZXJhICkudGhlbiggZnVuY3Rpb24gKCBjYW1lcmEgKSB7XG5cblx0XHRcdFx0XHRyZXR1cm4gcGFyc2VyLl9nZXROb2RlUmVmKCBwYXJzZXIuY2FtZXJhQ2FjaGUsIG5vZGVEZWYuY2FtZXJhLCBjYW1lcmEgKTtcblxuXHRcdFx0XHR9ICkgKTtcblxuXHRcdFx0fVxuXG5cdFx0XHRwYXJzZXIuX2ludm9rZUFsbCggZnVuY3Rpb24gKCBleHQgKSB7XG5cblx0XHRcdFx0cmV0dXJuIGV4dC5jcmVhdGVOb2RlQXR0YWNobWVudCAmJiBleHQuY3JlYXRlTm9kZUF0dGFjaG1lbnQoIG5vZGVJbmRleCApO1xuXG5cdFx0XHR9ICkuZm9yRWFjaCggZnVuY3Rpb24gKCBwcm9taXNlICkge1xuXG5cdFx0XHRcdHBlbmRpbmcucHVzaCggcHJvbWlzZSApO1xuXG5cdFx0XHR9ICk7XG5cblx0XHRcdHJldHVybiBQcm9taXNlLmFsbCggcGVuZGluZyApO1xuXG5cdFx0fSgpICkudGhlbiggZnVuY3Rpb24gKCBvYmplY3RzICkge1xuXG5cdFx0XHR2YXIgbm9kZTtcblxuXHRcdFx0Ly8gLmlzQm9uZSBpc24ndCBpbiBnbFRGIHNwZWMuIFNlZSAuX21hcmtEZWZzXG5cdFx0XHRpZiAoIG5vZGVEZWYuaXNCb25lID09PSB0cnVlICkge1xuXG5cdFx0XHRcdG5vZGUgPSBuZXcgQm9uZSgpO1xuXG5cdFx0XHR9IGVsc2UgaWYgKCBvYmplY3RzLmxlbmd0aCA+IDEgKSB7XG5cblx0XHRcdFx0bm9kZSA9IG5ldyBHcm91cCgpO1xuXG5cdFx0XHR9IGVsc2UgaWYgKCBvYmplY3RzLmxlbmd0aCA9PT0gMSApIHtcblxuXHRcdFx0XHRub2RlID0gb2JqZWN0c1sgMCBdO1xuXG5cdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdG5vZGUgPSBuZXcgT2JqZWN0M0QoKTtcblxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIG5vZGUgIT09IG9iamVjdHNbIDAgXSApIHtcblxuXHRcdFx0XHRmb3IgKCB2YXIgaSA9IDAsIGlsID0gb2JqZWN0cy5sZW5ndGg7IGkgPCBpbDsgaSArKyApIHtcblxuXHRcdFx0XHRcdG5vZGUuYWRkKCBvYmplY3RzWyBpIF0gKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdH1cblxuXHRcdFx0aWYgKCBub2RlRGVmLm5hbWUgKSB7XG5cblx0XHRcdFx0bm9kZS51c2VyRGF0YS5uYW1lID0gbm9kZURlZi5uYW1lO1xuXHRcdFx0XHRub2RlLm5hbWUgPSBub2RlTmFtZTtcblxuXHRcdFx0fVxuXG5cdFx0XHRhc3NpZ25FeHRyYXNUb1VzZXJEYXRhKCBub2RlLCBub2RlRGVmICk7XG5cblx0XHRcdGlmICggbm9kZURlZi5leHRlbnNpb25zICkgYWRkVW5rbm93bkV4dGVuc2lvbnNUb1VzZXJEYXRhKCBleHRlbnNpb25zLCBub2RlLCBub2RlRGVmICk7XG5cblx0XHRcdGlmICggbm9kZURlZi5tYXRyaXggIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0XHR2YXIgbWF0cml4ID0gbmV3IE1hdHJpeDQoKTtcblx0XHRcdFx0bWF0cml4LmZyb21BcnJheSggbm9kZURlZi5tYXRyaXggKTtcblx0XHRcdFx0bm9kZS5hcHBseU1hdHJpeDQoIG1hdHJpeCApO1xuXG5cdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdGlmICggbm9kZURlZi50cmFuc2xhdGlvbiAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRcdFx0bm9kZS5wb3NpdGlvbi5mcm9tQXJyYXkoIG5vZGVEZWYudHJhbnNsYXRpb24gKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKCBub2RlRGVmLnJvdGF0aW9uICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0XHRub2RlLnF1YXRlcm5pb24uZnJvbUFycmF5KCBub2RlRGVmLnJvdGF0aW9uICk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmICggbm9kZURlZi5zY2FsZSAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRcdFx0bm9kZS5zY2FsZS5mcm9tQXJyYXkoIG5vZGVEZWYuc2NhbGUgKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdH1cblxuXHRcdFx0cGFyc2VyLmFzc29jaWF0aW9ucy5zZXQoIG5vZGUsIHsgdHlwZTogJ25vZGVzJywgaW5kZXg6IG5vZGVJbmRleCB9ICk7XG5cblx0XHRcdHJldHVybiBub2RlO1xuXG5cdFx0fSApO1xuXG5cdH07XG5cblx0LyoqXG5cdCAqIFNwZWNpZmljYXRpb246IGh0dHBzOi8vZ2l0aHViLmNvbS9LaHJvbm9zR3JvdXAvZ2xURi90cmVlL21hc3Rlci9zcGVjaWZpY2F0aW9uLzIuMCNzY2VuZXNcblx0ICogQHBhcmFtIHtudW1iZXJ9IHNjZW5lSW5kZXhcblx0ICogQHJldHVybiB7UHJvbWlzZTxHcm91cD59XG5cdCAqL1xuXHRHTFRGUGFyc2VyLnByb3RvdHlwZS5sb2FkU2NlbmUgPSBmdW5jdGlvbiAoKSB7XG5cblx0XHQvLyBzY2VuZSBub2RlIGhpZXJhY2h5IGJ1aWxkZXJcblxuXHRcdGZ1bmN0aW9uIGJ1aWxkTm9kZUhpZXJhY2h5KCBub2RlSWQsIHBhcmVudE9iamVjdCwganNvbiwgcGFyc2VyICkge1xuXG5cdFx0XHR2YXIgbm9kZURlZiA9IGpzb24ubm9kZXNbIG5vZGVJZCBdO1xuXG5cdFx0XHRyZXR1cm4gcGFyc2VyLmdldERlcGVuZGVuY3koICdub2RlJywgbm9kZUlkICkudGhlbiggZnVuY3Rpb24gKCBub2RlICkge1xuXG5cdFx0XHRcdGlmICggbm9kZURlZi5za2luID09PSB1bmRlZmluZWQgKSByZXR1cm4gbm9kZTtcblxuXHRcdFx0XHQvLyBidWlsZCBza2VsZXRvbiBoZXJlIGFzIHdlbGxcblxuXHRcdFx0XHR2YXIgc2tpbkVudHJ5O1xuXG5cdFx0XHRcdHJldHVybiBwYXJzZXIuZ2V0RGVwZW5kZW5jeSggJ3NraW4nLCBub2RlRGVmLnNraW4gKS50aGVuKCBmdW5jdGlvbiAoIHNraW4gKSB7XG5cblx0XHRcdFx0XHRza2luRW50cnkgPSBza2luO1xuXG5cdFx0XHRcdFx0dmFyIHBlbmRpbmdKb2ludHMgPSBbXTtcblxuXHRcdFx0XHRcdGZvciAoIHZhciBpID0gMCwgaWwgPSBza2luRW50cnkuam9pbnRzLmxlbmd0aDsgaSA8IGlsOyBpICsrICkge1xuXG5cdFx0XHRcdFx0XHRwZW5kaW5nSm9pbnRzLnB1c2goIHBhcnNlci5nZXREZXBlbmRlbmN5KCAnbm9kZScsIHNraW5FbnRyeS5qb2ludHNbIGkgXSApICk7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRyZXR1cm4gUHJvbWlzZS5hbGwoIHBlbmRpbmdKb2ludHMgKTtcblxuXHRcdFx0XHR9ICkudGhlbiggZnVuY3Rpb24gKCBqb2ludE5vZGVzICkge1xuXG5cdFx0XHRcdFx0bm9kZS50cmF2ZXJzZSggZnVuY3Rpb24gKCBtZXNoICkge1xuXG5cdFx0XHRcdFx0XHRpZiAoICEgbWVzaC5pc01lc2ggKSByZXR1cm47XG5cblx0XHRcdFx0XHRcdHZhciBib25lcyA9IFtdO1xuXHRcdFx0XHRcdFx0dmFyIGJvbmVJbnZlcnNlcyA9IFtdO1xuXG5cdFx0XHRcdFx0XHRmb3IgKCB2YXIgaiA9IDAsIGpsID0gam9pbnROb2Rlcy5sZW5ndGg7IGogPCBqbDsgaiArKyApIHtcblxuXHRcdFx0XHRcdFx0XHR2YXIgam9pbnROb2RlID0gam9pbnROb2Rlc1sgaiBdO1xuXG5cdFx0XHRcdFx0XHRcdGlmICggam9pbnROb2RlICkge1xuXG5cdFx0XHRcdFx0XHRcdFx0Ym9uZXMucHVzaCggam9pbnROb2RlICk7XG5cblx0XHRcdFx0XHRcdFx0XHR2YXIgbWF0ID0gbmV3IE1hdHJpeDQoKTtcblxuXHRcdFx0XHRcdFx0XHRcdGlmICggc2tpbkVudHJ5LmludmVyc2VCaW5kTWF0cmljZXMgIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0XHRcdFx0XHRcdFx0bWF0LmZyb21BcnJheSggc2tpbkVudHJ5LmludmVyc2VCaW5kTWF0cmljZXMuYXJyYXksIGogKiAxNiApO1xuXG5cdFx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdFx0Ym9uZUludmVyc2VzLnB1c2goIG1hdCApO1xuXG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRcdFx0XHRjb25zb2xlLndhcm4oICdUSFJFRS5HTFRGTG9hZGVyOiBKb2ludCBcIiVzXCIgY291bGQgbm90IGJlIGZvdW5kLicsIHNraW5FbnRyeS5qb2ludHNbIGogXSApO1xuXG5cdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRtZXNoLmJpbmQoIG5ldyBTa2VsZXRvbiggYm9uZXMsIGJvbmVJbnZlcnNlcyApLCBtZXNoLm1hdHJpeFdvcmxkICk7XG5cblx0XHRcdFx0XHR9ICk7XG5cblx0XHRcdFx0XHRyZXR1cm4gbm9kZTtcblxuXHRcdFx0XHR9ICk7XG5cblx0XHRcdH0gKS50aGVuKCBmdW5jdGlvbiAoIG5vZGUgKSB7XG5cblx0XHRcdFx0Ly8gYnVpbGQgbm9kZSBoaWVyYWNoeVxuXG5cdFx0XHRcdHBhcmVudE9iamVjdC5hZGQoIG5vZGUgKTtcblxuXHRcdFx0XHR2YXIgcGVuZGluZyA9IFtdO1xuXG5cdFx0XHRcdGlmICggbm9kZURlZi5jaGlsZHJlbiApIHtcblxuXHRcdFx0XHRcdHZhciBjaGlsZHJlbiA9IG5vZGVEZWYuY2hpbGRyZW47XG5cblx0XHRcdFx0XHRmb3IgKCB2YXIgaSA9IDAsIGlsID0gY2hpbGRyZW4ubGVuZ3RoOyBpIDwgaWw7IGkgKysgKSB7XG5cblx0XHRcdFx0XHRcdHZhciBjaGlsZCA9IGNoaWxkcmVuWyBpIF07XG5cdFx0XHRcdFx0XHRwZW5kaW5nLnB1c2goIGJ1aWxkTm9kZUhpZXJhY2h5KCBjaGlsZCwgbm9kZSwganNvbiwgcGFyc2VyICkgKTtcblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIFByb21pc2UuYWxsKCBwZW5kaW5nICk7XG5cblx0XHRcdH0gKTtcblxuXHRcdH1cblxuXHRcdHJldHVybiBmdW5jdGlvbiBsb2FkU2NlbmUoIHNjZW5lSW5kZXggKSB7XG5cblx0XHRcdHZhciBqc29uID0gdGhpcy5qc29uO1xuXHRcdFx0dmFyIGV4dGVuc2lvbnMgPSB0aGlzLmV4dGVuc2lvbnM7XG5cdFx0XHR2YXIgc2NlbmVEZWYgPSB0aGlzLmpzb24uc2NlbmVzWyBzY2VuZUluZGV4IF07XG5cdFx0XHR2YXIgcGFyc2VyID0gdGhpcztcblxuXHRcdFx0Ly8gTG9hZGVyIHJldHVybnMgR3JvdXAsIG5vdCBTY2VuZS5cblx0XHRcdC8vIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL21yZG9vYi90aHJlZS5qcy9pc3N1ZXMvMTgzNDIjaXNzdWVjb21tZW50LTU3ODk4MTE3MlxuXHRcdFx0dmFyIHNjZW5lID0gbmV3IEdyb3VwKCk7XG5cdFx0XHRpZiAoIHNjZW5lRGVmLm5hbWUgKSBzY2VuZS5uYW1lID0gcGFyc2VyLmNyZWF0ZVVuaXF1ZU5hbWUoIHNjZW5lRGVmLm5hbWUgKTtcblxuXHRcdFx0YXNzaWduRXh0cmFzVG9Vc2VyRGF0YSggc2NlbmUsIHNjZW5lRGVmICk7XG5cblx0XHRcdGlmICggc2NlbmVEZWYuZXh0ZW5zaW9ucyApIGFkZFVua25vd25FeHRlbnNpb25zVG9Vc2VyRGF0YSggZXh0ZW5zaW9ucywgc2NlbmUsIHNjZW5lRGVmICk7XG5cblx0XHRcdHZhciBub2RlSWRzID0gc2NlbmVEZWYubm9kZXMgfHwgW107XG5cblx0XHRcdHZhciBwZW5kaW5nID0gW107XG5cblx0XHRcdGZvciAoIHZhciBpID0gMCwgaWwgPSBub2RlSWRzLmxlbmd0aDsgaSA8IGlsOyBpICsrICkge1xuXG5cdFx0XHRcdHBlbmRpbmcucHVzaCggYnVpbGROb2RlSGllcmFjaHkoIG5vZGVJZHNbIGkgXSwgc2NlbmUsIGpzb24sIHBhcnNlciApICk7XG5cblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIFByb21pc2UuYWxsKCBwZW5kaW5nICkudGhlbiggZnVuY3Rpb24gKCkge1xuXG5cdFx0XHRcdHJldHVybiBzY2VuZTtcblxuXHRcdFx0fSApO1xuXG5cdFx0fTtcblxuXHR9KCk7XG5cblx0cmV0dXJuIEdMVEZMb2FkZXI7XG5cbn0gKSgpO1xuXG5leHBvcnQgeyBHTFRGTG9hZGVyIH07XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/three/examples/jsm/loaders/GLTFLoader.js\n");

/***/ }),

/***/ "./node_modules/three/examples/jsm/loaders/MTLLoader.js":
/*!**************************************************************!*\
  !*** ./node_modules/three/examples/jsm/loaders/MTLLoader.js ***!
  \**************************************************************/
/*! exports provided: MTLLoader */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MTLLoader\", function() { return MTLLoader; });\n/* harmony import */ var _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../build/three.module.js */ \"./node_modules/three/build/three.module.js\");\n\n\n/**\n * Loads a Wavefront .mtl file specifying materials\n */\n\nvar MTLLoader = function ( manager ) {\n\n\t_build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Loader\"].call( this, manager );\n\n};\n\nMTLLoader.prototype = Object.assign( Object.create( _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Loader\"].prototype ), {\n\n\tconstructor: MTLLoader,\n\n\t/**\n\t * Loads and parses a MTL asset from a URL.\n\t *\n\t * @param {String} url - URL to the MTL file.\n\t * @param {Function} [onLoad] - Callback invoked with the loaded object.\n\t * @param {Function} [onProgress] - Callback for download progress.\n\t * @param {Function} [onError] - Callback for download errors.\n\t *\n\t * @see setPath setResourcePath\n\t *\n\t * @note In order for relative texture references to resolve correctly\n\t * you must call setResourcePath() explicitly prior to load.\n\t */\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar scope = this;\n\n\t\tvar path = ( this.path === '' ) ? _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"LoaderUtils\"].extractUrlBase( url ) : this.path;\n\n\t\tvar loader = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"FileLoader\"]( this.manager );\n\t\tloader.setPath( this.path );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setWithCredentials( this.withCredentials );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\ttry {\n\n\t\t\t\tonLoad( scope.parse( text, path ) );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\tif ( onError ) {\n\n\t\t\t\t\tonError( e );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( e );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t},\n\n\tsetMaterialOptions: function ( value ) {\n\n\t\tthis.materialOptions = value;\n\t\treturn this;\n\n\t},\n\n\t/**\n\t * Parses a MTL file.\n\t *\n\t * @param {String} text - Content of MTL file\n\t * @return {MTLLoader.MaterialCreator}\n\t *\n\t * @see setPath setResourcePath\n\t *\n\t * @note In order for relative texture references to resolve correctly\n\t * you must call setResourcePath() explicitly prior to parse.\n\t */\n\tparse: function ( text, path ) {\n\n\t\tvar lines = text.split( '\\n' );\n\t\tvar info = {};\n\t\tvar delimiter_pattern = /\\s+/;\n\t\tvar materialsInfo = {};\n\n\t\tfor ( var i = 0; i < lines.length; i ++ ) {\n\n\t\t\tvar line = lines[ i ];\n\t\t\tline = line.trim();\n\n\t\t\tif ( line.length === 0 || line.charAt( 0 ) === '#' ) {\n\n\t\t\t\t// Blank line or comment ignore\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tvar pos = line.indexOf( ' ' );\n\n\t\t\tvar key = ( pos >= 0 ) ? line.substring( 0, pos ) : line;\n\t\t\tkey = key.toLowerCase();\n\n\t\t\tvar value = ( pos >= 0 ) ? line.substring( pos + 1 ) : '';\n\t\t\tvalue = value.trim();\n\n\t\t\tif ( key === 'newmtl' ) {\n\n\t\t\t\t// New material\n\n\t\t\t\tinfo = { name: value };\n\t\t\t\tmaterialsInfo[ value ] = info;\n\n\t\t\t} else {\n\n\t\t\t\tif ( key === 'ka' || key === 'kd' || key === 'ks' || key === 'ke' ) {\n\n\t\t\t\t\tvar ss = value.split( delimiter_pattern, 3 );\n\t\t\t\t\tinfo[ key ] = [ parseFloat( ss[ 0 ] ), parseFloat( ss[ 1 ] ), parseFloat( ss[ 2 ] ) ];\n\n\t\t\t\t} else {\n\n\t\t\t\t\tinfo[ key ] = value;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar materialCreator = new MTLLoader.MaterialCreator( this.resourcePath || path, this.materialOptions );\n\t\tmaterialCreator.setCrossOrigin( this.crossOrigin );\n\t\tmaterialCreator.setManager( this.manager );\n\t\tmaterialCreator.setMaterials( materialsInfo );\n\t\treturn materialCreator;\n\n\t}\n\n} );\n\n/**\n * Create a new MTLLoader.MaterialCreator\n * @param baseUrl - Url relative to which textures are loaded\n * @param options - Set of options on how to construct the materials\n *                  side: Which side to apply the material\n *                        FrontSide (default), THREE.BackSide, THREE.DoubleSide\n *                  wrap: What type of wrapping to apply for textures\n *                        RepeatWrapping (default), THREE.ClampToEdgeWrapping, THREE.MirroredRepeatWrapping\n *                  normalizeRGB: RGBs need to be normalized to 0-1 from 0-255\n *                                Default: false, assumed to be already normalized\n *                  ignoreZeroRGBs: Ignore values of RGBs (Ka,Kd,Ks) that are all 0's\n *                                  Default: false\n * @constructor\n */\n\nMTLLoader.MaterialCreator = function ( baseUrl, options ) {\n\n\tthis.baseUrl = baseUrl || '';\n\tthis.options = options;\n\tthis.materialsInfo = {};\n\tthis.materials = {};\n\tthis.materialsArray = [];\n\tthis.nameLookup = {};\n\n\tthis.side = ( this.options && this.options.side ) ? this.options.side : _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"FrontSide\"];\n\tthis.wrap = ( this.options && this.options.wrap ) ? this.options.wrap : _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"RepeatWrapping\"];\n\n};\n\nMTLLoader.MaterialCreator.prototype = {\n\n\tconstructor: MTLLoader.MaterialCreator,\n\n\tcrossOrigin: 'anonymous',\n\n\tsetCrossOrigin: function ( value ) {\n\n\t\tthis.crossOrigin = value;\n\t\treturn this;\n\n\t},\n\n\tsetManager: function ( value ) {\n\n\t\tthis.manager = value;\n\n\t},\n\n\tsetMaterials: function ( materialsInfo ) {\n\n\t\tthis.materialsInfo = this.convert( materialsInfo );\n\t\tthis.materials = {};\n\t\tthis.materialsArray = [];\n\t\tthis.nameLookup = {};\n\n\t},\n\n\tconvert: function ( materialsInfo ) {\n\n\t\tif ( ! this.options ) return materialsInfo;\n\n\t\tvar converted = {};\n\n\t\tfor ( var mn in materialsInfo ) {\n\n\t\t\t// Convert materials info into normalized form based on options\n\n\t\t\tvar mat = materialsInfo[ mn ];\n\n\t\t\tvar covmat = {};\n\n\t\t\tconverted[ mn ] = covmat;\n\n\t\t\tfor ( var prop in mat ) {\n\n\t\t\t\tvar save = true;\n\t\t\t\tvar value = mat[ prop ];\n\t\t\t\tvar lprop = prop.toLowerCase();\n\n\t\t\t\tswitch ( lprop ) {\n\n\t\t\t\t\tcase 'kd':\n\t\t\t\t\tcase 'ka':\n\t\t\t\t\tcase 'ks':\n\n\t\t\t\t\t\t// Diffuse color (color under white light) using RGB values\n\n\t\t\t\t\t\tif ( this.options && this.options.normalizeRGB ) {\n\n\t\t\t\t\t\t\tvalue = [ value[ 0 ] / 255, value[ 1 ] / 255, value[ 2 ] / 255 ];\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( this.options && this.options.ignoreZeroRGBs ) {\n\n\t\t\t\t\t\t\tif ( value[ 0 ] === 0 && value[ 1 ] === 0 && value[ 2 ] === 0 ) {\n\n\t\t\t\t\t\t\t\t// ignore\n\n\t\t\t\t\t\t\t\tsave = false;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\tif ( save ) {\n\n\t\t\t\t\tcovmat[ lprop ] = value;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn converted;\n\n\t},\n\n\tpreload: function () {\n\n\t\tfor ( var mn in this.materialsInfo ) {\n\n\t\t\tthis.create( mn );\n\n\t\t}\n\n\t},\n\n\tgetIndex: function ( materialName ) {\n\n\t\treturn this.nameLookup[ materialName ];\n\n\t},\n\n\tgetAsArray: function () {\n\n\t\tvar index = 0;\n\n\t\tfor ( var mn in this.materialsInfo ) {\n\n\t\t\tthis.materialsArray[ index ] = this.create( mn );\n\t\t\tthis.nameLookup[ mn ] = index;\n\t\t\tindex ++;\n\n\t\t}\n\n\t\treturn this.materialsArray;\n\n\t},\n\n\tcreate: function ( materialName ) {\n\n\t\tif ( this.materials[ materialName ] === undefined ) {\n\n\t\t\tthis.createMaterial_( materialName );\n\n\t\t}\n\n\t\treturn this.materials[ materialName ];\n\n\t},\n\n\tcreateMaterial_: function ( materialName ) {\n\n\t\t// Create material\n\n\t\tvar scope = this;\n\t\tvar mat = this.materialsInfo[ materialName ];\n\t\tvar params = {\n\n\t\t\tname: materialName,\n\t\t\tside: this.side\n\n\t\t};\n\n\t\tfunction resolveURL( baseUrl, url ) {\n\n\t\t\tif ( typeof url !== 'string' || url === '' )\n\t\t\t\treturn '';\n\n\t\t\t// Absolute URL\n\t\t\tif ( /^https?:\\/\\//i.test( url ) ) return url;\n\n\t\t\treturn baseUrl + url;\n\n\t\t}\n\n\t\tfunction setMapForType( mapType, value ) {\n\n\t\t\tif ( params[ mapType ] ) return; // Keep the first encountered texture\n\n\t\t\tvar texParams = scope.getTextureParams( value, params );\n\t\t\tvar map = scope.loadTexture( resolveURL( scope.baseUrl, texParams.url ) );\n\n\t\t\tmap.repeat.copy( texParams.scale );\n\t\t\tmap.offset.copy( texParams.offset );\n\n\t\t\tmap.wrapS = scope.wrap;\n\t\t\tmap.wrapT = scope.wrap;\n\n\t\t\tparams[ mapType ] = map;\n\n\t\t}\n\n\t\tfor ( var prop in mat ) {\n\n\t\t\tvar value = mat[ prop ];\n\t\t\tvar n;\n\n\t\t\tif ( value === '' ) continue;\n\n\t\t\tswitch ( prop.toLowerCase() ) {\n\n\t\t\t\t// Ns is material specular exponent\n\n\t\t\t\tcase 'kd':\n\n\t\t\t\t\t// Diffuse color (color under white light) using RGB values\n\n\t\t\t\t\tparams.color = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Color\"]().fromArray( value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'ks':\n\n\t\t\t\t\t// Specular color (color when light is reflected from shiny surface) using RGB values\n\t\t\t\t\tparams.specular = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Color\"]().fromArray( value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'ke':\n\n\t\t\t\t\t// Emissive using RGB values\n\t\t\t\t\tparams.emissive = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Color\"]().fromArray( value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'map_kd':\n\n\t\t\t\t\t// Diffuse texture map\n\n\t\t\t\t\tsetMapForType( 'map', value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'map_ks':\n\n\t\t\t\t\t// Specular map\n\n\t\t\t\t\tsetMapForType( 'specularMap', value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'map_ke':\n\n\t\t\t\t\t// Emissive map\n\n\t\t\t\t\tsetMapForType( 'emissiveMap', value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'norm':\n\n\t\t\t\t\tsetMapForType( 'normalMap', value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'map_bump':\n\t\t\t\tcase 'bump':\n\n\t\t\t\t\t// Bump texture map\n\n\t\t\t\t\tsetMapForType( 'bumpMap', value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'map_d':\n\n\t\t\t\t\t// Alpha map\n\n\t\t\t\t\tsetMapForType( 'alphaMap', value );\n\t\t\t\t\tparams.transparent = true;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'ns':\n\n\t\t\t\t\t// The specular exponent (defines the focus of the specular highlight)\n\t\t\t\t\t// A high exponent results in a tight, concentrated highlight. Ns values normally range from 0 to 1000.\n\n\t\t\t\t\tparams.shininess = parseFloat( value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'd':\n\t\t\t\t\tn = parseFloat( value );\n\n\t\t\t\t\tif ( n < 1 ) {\n\n\t\t\t\t\t\tparams.opacity = n;\n\t\t\t\t\t\tparams.transparent = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'tr':\n\t\t\t\t\tn = parseFloat( value );\n\n\t\t\t\t\tif ( this.options && this.options.invertTrProperty ) n = 1 - n;\n\n\t\t\t\t\tif ( n > 0 ) {\n\n\t\t\t\t\t\tparams.opacity = 1 - n;\n\t\t\t\t\t\tparams.transparent = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.materials[ materialName ] = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"MeshPhongMaterial\"]( params );\n\t\treturn this.materials[ materialName ];\n\n\t},\n\n\tgetTextureParams: function ( value, matParams ) {\n\n\t\tvar texParams = {\n\n\t\t\tscale: new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector2\"]( 1, 1 ),\n\t\t\toffset: new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector2\"]( 0, 0 )\n\n\t\t };\n\n\t\tvar items = value.split( /\\s+/ );\n\t\tvar pos;\n\n\t\tpos = items.indexOf( '-bm' );\n\n\t\tif ( pos >= 0 ) {\n\n\t\t\tmatParams.bumpScale = parseFloat( items[ pos + 1 ] );\n\t\t\titems.splice( pos, 2 );\n\n\t\t}\n\n\t\tpos = items.indexOf( '-s' );\n\n\t\tif ( pos >= 0 ) {\n\n\t\t\ttexParams.scale.set( parseFloat( items[ pos + 1 ] ), parseFloat( items[ pos + 2 ] ) );\n\t\t\titems.splice( pos, 4 ); // we expect 3 parameters here!\n\n\t\t}\n\n\t\tpos = items.indexOf( '-o' );\n\n\t\tif ( pos >= 0 ) {\n\n\t\t\ttexParams.offset.set( parseFloat( items[ pos + 1 ] ), parseFloat( items[ pos + 2 ] ) );\n\t\t\titems.splice( pos, 4 ); // we expect 3 parameters here!\n\n\t\t}\n\n\t\ttexParams.url = items.join( ' ' ).trim();\n\t\treturn texParams;\n\n\t},\n\n\tloadTexture: function ( url, mapping, onLoad, onProgress, onError ) {\n\n\t\tvar texture;\n\t\tvar manager = ( this.manager !== undefined ) ? this.manager : _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"DefaultLoadingManager\"];\n\t\tvar loader = manager.getHandler( url );\n\n\t\tif ( loader === null ) {\n\n\t\t\tloader = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"TextureLoader\"]( manager );\n\n\t\t}\n\n\t\tif ( loader.setCrossOrigin ) loader.setCrossOrigin( this.crossOrigin );\n\t\ttexture = loader.load( url, onLoad, onProgress, onError );\n\n\t\tif ( mapping !== undefined ) texture.mapping = mapping;\n\n\t\treturn texture;\n\n\t}\n\n};\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL3RocmVlL2V4YW1wbGVzL2pzbS9sb2FkZXJzL01UTExvYWRlci5qcz80MDg2Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQVd3Qzs7QUFFeEM7QUFDQTtBQUNBOztBQUVBOztBQUVBLENBQUMsNkRBQU07O0FBRVA7O0FBRUEsb0RBQW9ELDZEQUFNOztBQUUxRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLE9BQU87QUFDbkIsWUFBWSxTQUFTO0FBQ3JCLFlBQVksU0FBUztBQUNyQixZQUFZLFNBQVM7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsb0NBQW9DLGtFQUFXOztBQUUvQyxtQkFBbUIsaUVBQVU7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUEsSUFBSTs7QUFFSjs7QUFFQTs7QUFFQSxLQUFLOztBQUVMOztBQUVBOztBQUVBOztBQUVBOztBQUVBLEdBQUc7O0FBRUgsRUFBRTs7QUFFRjs7QUFFQTtBQUNBOztBQUVBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0EsWUFBWSxPQUFPO0FBQ25CLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxrQkFBa0Isa0JBQWtCOztBQUVwQztBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBLFlBQVk7QUFDWjs7QUFFQSxJQUFJOztBQUVKOztBQUVBO0FBQ0E7O0FBRUEsS0FBSzs7QUFFTDs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEseUVBQXlFLGdFQUFTO0FBQ2xGLHlFQUF5RSxxRUFBYzs7QUFFdkY7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQSxFQUFFOztBQUVGOztBQUVBOztBQUVBLEVBQUU7O0FBRUY7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsRUFBRTs7QUFFRjs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBLEVBQUU7O0FBRUY7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUEsRUFBRTs7QUFFRjs7QUFFQTs7QUFFQSxFQUFFOztBQUVGOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQSxFQUFFOztBQUVGOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBLEVBQUU7O0FBRUY7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBLG1DQUFtQzs7QUFFbkM7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQSx3QkFBd0IsNERBQUs7O0FBRTdCOztBQUVBOztBQUVBO0FBQ0EsMkJBQTJCLDREQUFLOztBQUVoQzs7QUFFQTs7QUFFQTtBQUNBLDJCQUEyQiw0REFBSzs7QUFFaEM7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBLHVDQUF1Qyx3RUFBaUI7QUFDeEQ7O0FBRUEsRUFBRTs7QUFFRjs7QUFFQTs7QUFFQSxjQUFjLDhEQUFPO0FBQ3JCLGVBQWUsOERBQU87O0FBRXRCOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBLDBCQUEwQjs7QUFFMUI7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQSwwQkFBMEI7O0FBRTFCOztBQUVBO0FBQ0E7O0FBRUEsRUFBRTs7QUFFRjs7QUFFQTtBQUNBLGdFQUFnRSw0RUFBcUI7QUFDckY7O0FBRUE7O0FBRUEsZ0JBQWdCLG9FQUFhOztBQUU3Qjs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVxQiIsImZpbGUiOiIuL25vZGVfbW9kdWxlcy90aHJlZS9leGFtcGxlcy9qc20vbG9hZGVycy9NVExMb2FkZXIuanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuXHRDb2xvcixcblx0RGVmYXVsdExvYWRpbmdNYW5hZ2VyLFxuXHRGaWxlTG9hZGVyLFxuXHRGcm9udFNpZGUsXG5cdExvYWRlcixcblx0TG9hZGVyVXRpbHMsXG5cdE1lc2hQaG9uZ01hdGVyaWFsLFxuXHRSZXBlYXRXcmFwcGluZyxcblx0VGV4dHVyZUxvYWRlcixcblx0VmVjdG9yMlxufSBmcm9tICcuLi8uLi8uLi9idWlsZC90aHJlZS5tb2R1bGUuanMnO1xuXG4vKipcbiAqIExvYWRzIGEgV2F2ZWZyb250IC5tdGwgZmlsZSBzcGVjaWZ5aW5nIG1hdGVyaWFsc1xuICovXG5cbnZhciBNVExMb2FkZXIgPSBmdW5jdGlvbiAoIG1hbmFnZXIgKSB7XG5cblx0TG9hZGVyLmNhbGwoIHRoaXMsIG1hbmFnZXIgKTtcblxufTtcblxuTVRMTG9hZGVyLnByb3RvdHlwZSA9IE9iamVjdC5hc3NpZ24oIE9iamVjdC5jcmVhdGUoIExvYWRlci5wcm90b3R5cGUgKSwge1xuXG5cdGNvbnN0cnVjdG9yOiBNVExMb2FkZXIsXG5cblx0LyoqXG5cdCAqIExvYWRzIGFuZCBwYXJzZXMgYSBNVEwgYXNzZXQgZnJvbSBhIFVSTC5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHVybCAtIFVSTCB0byB0aGUgTVRMIGZpbGUuXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IFtvbkxvYWRdIC0gQ2FsbGJhY2sgaW52b2tlZCB3aXRoIHRoZSBsb2FkZWQgb2JqZWN0LlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb25Qcm9ncmVzc10gLSBDYWxsYmFjayBmb3IgZG93bmxvYWQgcHJvZ3Jlc3MuXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IFtvbkVycm9yXSAtIENhbGxiYWNrIGZvciBkb3dubG9hZCBlcnJvcnMuXG5cdCAqXG5cdCAqIEBzZWUgc2V0UGF0aCBzZXRSZXNvdXJjZVBhdGhcblx0ICpcblx0ICogQG5vdGUgSW4gb3JkZXIgZm9yIHJlbGF0aXZlIHRleHR1cmUgcmVmZXJlbmNlcyB0byByZXNvbHZlIGNvcnJlY3RseVxuXHQgKiB5b3UgbXVzdCBjYWxsIHNldFJlc291cmNlUGF0aCgpIGV4cGxpY2l0bHkgcHJpb3IgdG8gbG9hZC5cblx0ICovXG5cdGxvYWQ6IGZ1bmN0aW9uICggdXJsLCBvbkxvYWQsIG9uUHJvZ3Jlc3MsIG9uRXJyb3IgKSB7XG5cblx0XHR2YXIgc2NvcGUgPSB0aGlzO1xuXG5cdFx0dmFyIHBhdGggPSAoIHRoaXMucGF0aCA9PT0gJycgKSA/IExvYWRlclV0aWxzLmV4dHJhY3RVcmxCYXNlKCB1cmwgKSA6IHRoaXMucGF0aDtcblxuXHRcdHZhciBsb2FkZXIgPSBuZXcgRmlsZUxvYWRlciggdGhpcy5tYW5hZ2VyICk7XG5cdFx0bG9hZGVyLnNldFBhdGgoIHRoaXMucGF0aCApO1xuXHRcdGxvYWRlci5zZXRSZXF1ZXN0SGVhZGVyKCB0aGlzLnJlcXVlc3RIZWFkZXIgKTtcblx0XHRsb2FkZXIuc2V0V2l0aENyZWRlbnRpYWxzKCB0aGlzLndpdGhDcmVkZW50aWFscyApO1xuXHRcdGxvYWRlci5sb2FkKCB1cmwsIGZ1bmN0aW9uICggdGV4dCApIHtcblxuXHRcdFx0dHJ5IHtcblxuXHRcdFx0XHRvbkxvYWQoIHNjb3BlLnBhcnNlKCB0ZXh0LCBwYXRoICkgKTtcblxuXHRcdFx0fSBjYXRjaCAoIGUgKSB7XG5cblx0XHRcdFx0aWYgKCBvbkVycm9yICkge1xuXG5cdFx0XHRcdFx0b25FcnJvciggZSApO1xuXG5cdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRjb25zb2xlLmVycm9yKCBlICk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdHNjb3BlLm1hbmFnZXIuaXRlbUVycm9yKCB1cmwgKTtcblxuXHRcdFx0fVxuXG5cdFx0fSwgb25Qcm9ncmVzcywgb25FcnJvciApO1xuXG5cdH0sXG5cblx0c2V0TWF0ZXJpYWxPcHRpb25zOiBmdW5jdGlvbiAoIHZhbHVlICkge1xuXG5cdFx0dGhpcy5tYXRlcmlhbE9wdGlvbnMgPSB2YWx1ZTtcblx0XHRyZXR1cm4gdGhpcztcblxuXHR9LFxuXG5cdC8qKlxuXHQgKiBQYXJzZXMgYSBNVEwgZmlsZS5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHRleHQgLSBDb250ZW50IG9mIE1UTCBmaWxlXG5cdCAqIEByZXR1cm4ge01UTExvYWRlci5NYXRlcmlhbENyZWF0b3J9XG5cdCAqXG5cdCAqIEBzZWUgc2V0UGF0aCBzZXRSZXNvdXJjZVBhdGhcblx0ICpcblx0ICogQG5vdGUgSW4gb3JkZXIgZm9yIHJlbGF0aXZlIHRleHR1cmUgcmVmZXJlbmNlcyB0byByZXNvbHZlIGNvcnJlY3RseVxuXHQgKiB5b3UgbXVzdCBjYWxsIHNldFJlc291cmNlUGF0aCgpIGV4cGxpY2l0bHkgcHJpb3IgdG8gcGFyc2UuXG5cdCAqL1xuXHRwYXJzZTogZnVuY3Rpb24gKCB0ZXh0LCBwYXRoICkge1xuXG5cdFx0dmFyIGxpbmVzID0gdGV4dC5zcGxpdCggJ1xcbicgKTtcblx0XHR2YXIgaW5mbyA9IHt9O1xuXHRcdHZhciBkZWxpbWl0ZXJfcGF0dGVybiA9IC9cXHMrLztcblx0XHR2YXIgbWF0ZXJpYWxzSW5mbyA9IHt9O1xuXG5cdFx0Zm9yICggdmFyIGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyBpICsrICkge1xuXG5cdFx0XHR2YXIgbGluZSA9IGxpbmVzWyBpIF07XG5cdFx0XHRsaW5lID0gbGluZS50cmltKCk7XG5cblx0XHRcdGlmICggbGluZS5sZW5ndGggPT09IDAgfHwgbGluZS5jaGFyQXQoIDAgKSA9PT0gJyMnICkge1xuXG5cdFx0XHRcdC8vIEJsYW5rIGxpbmUgb3IgY29tbWVudCBpZ25vcmVcblx0XHRcdFx0Y29udGludWU7XG5cblx0XHRcdH1cblxuXHRcdFx0dmFyIHBvcyA9IGxpbmUuaW5kZXhPZiggJyAnICk7XG5cblx0XHRcdHZhciBrZXkgPSAoIHBvcyA+PSAwICkgPyBsaW5lLnN1YnN0cmluZyggMCwgcG9zICkgOiBsaW5lO1xuXHRcdFx0a2V5ID0ga2V5LnRvTG93ZXJDYXNlKCk7XG5cblx0XHRcdHZhciB2YWx1ZSA9ICggcG9zID49IDAgKSA/IGxpbmUuc3Vic3RyaW5nKCBwb3MgKyAxICkgOiAnJztcblx0XHRcdHZhbHVlID0gdmFsdWUudHJpbSgpO1xuXG5cdFx0XHRpZiAoIGtleSA9PT0gJ25ld210bCcgKSB7XG5cblx0XHRcdFx0Ly8gTmV3IG1hdGVyaWFsXG5cblx0XHRcdFx0aW5mbyA9IHsgbmFtZTogdmFsdWUgfTtcblx0XHRcdFx0bWF0ZXJpYWxzSW5mb1sgdmFsdWUgXSA9IGluZm87XG5cblx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0aWYgKCBrZXkgPT09ICdrYScgfHwga2V5ID09PSAna2QnIHx8IGtleSA9PT0gJ2tzJyB8fCBrZXkgPT09ICdrZScgKSB7XG5cblx0XHRcdFx0XHR2YXIgc3MgPSB2YWx1ZS5zcGxpdCggZGVsaW1pdGVyX3BhdHRlcm4sIDMgKTtcblx0XHRcdFx0XHRpbmZvWyBrZXkgXSA9IFsgcGFyc2VGbG9hdCggc3NbIDAgXSApLCBwYXJzZUZsb2F0KCBzc1sgMSBdICksIHBhcnNlRmxvYXQoIHNzWyAyIF0gKSBdO1xuXG5cdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRpbmZvWyBrZXkgXSA9IHZhbHVlO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fVxuXG5cdFx0fVxuXG5cdFx0dmFyIG1hdGVyaWFsQ3JlYXRvciA9IG5ldyBNVExMb2FkZXIuTWF0ZXJpYWxDcmVhdG9yKCB0aGlzLnJlc291cmNlUGF0aCB8fCBwYXRoLCB0aGlzLm1hdGVyaWFsT3B0aW9ucyApO1xuXHRcdG1hdGVyaWFsQ3JlYXRvci5zZXRDcm9zc09yaWdpbiggdGhpcy5jcm9zc09yaWdpbiApO1xuXHRcdG1hdGVyaWFsQ3JlYXRvci5zZXRNYW5hZ2VyKCB0aGlzLm1hbmFnZXIgKTtcblx0XHRtYXRlcmlhbENyZWF0b3Iuc2V0TWF0ZXJpYWxzKCBtYXRlcmlhbHNJbmZvICk7XG5cdFx0cmV0dXJuIG1hdGVyaWFsQ3JlYXRvcjtcblxuXHR9XG5cbn0gKTtcblxuLyoqXG4gKiBDcmVhdGUgYSBuZXcgTVRMTG9hZGVyLk1hdGVyaWFsQ3JlYXRvclxuICogQHBhcmFtIGJhc2VVcmwgLSBVcmwgcmVsYXRpdmUgdG8gd2hpY2ggdGV4dHVyZXMgYXJlIGxvYWRlZFxuICogQHBhcmFtIG9wdGlvbnMgLSBTZXQgb2Ygb3B0aW9ucyBvbiBob3cgdG8gY29uc3RydWN0IHRoZSBtYXRlcmlhbHNcbiAqICAgICAgICAgICAgICAgICAgc2lkZTogV2hpY2ggc2lkZSB0byBhcHBseSB0aGUgbWF0ZXJpYWxcbiAqICAgICAgICAgICAgICAgICAgICAgICAgRnJvbnRTaWRlIChkZWZhdWx0KSwgVEhSRUUuQmFja1NpZGUsIFRIUkVFLkRvdWJsZVNpZGVcbiAqICAgICAgICAgICAgICAgICAgd3JhcDogV2hhdCB0eXBlIG9mIHdyYXBwaW5nIHRvIGFwcGx5IGZvciB0ZXh0dXJlc1xuICogICAgICAgICAgICAgICAgICAgICAgICBSZXBlYXRXcmFwcGluZyAoZGVmYXVsdCksIFRIUkVFLkNsYW1wVG9FZGdlV3JhcHBpbmcsIFRIUkVFLk1pcnJvcmVkUmVwZWF0V3JhcHBpbmdcbiAqICAgICAgICAgICAgICAgICAgbm9ybWFsaXplUkdCOiBSR0JzIG5lZWQgdG8gYmUgbm9ybWFsaXplZCB0byAwLTEgZnJvbSAwLTI1NVxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlZmF1bHQ6IGZhbHNlLCBhc3N1bWVkIHRvIGJlIGFscmVhZHkgbm9ybWFsaXplZFxuICogICAgICAgICAgICAgICAgICBpZ25vcmVaZXJvUkdCczogSWdub3JlIHZhbHVlcyBvZiBSR0JzIChLYSxLZCxLcykgdGhhdCBhcmUgYWxsIDAnc1xuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVmYXVsdDogZmFsc2VcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5cbk1UTExvYWRlci5NYXRlcmlhbENyZWF0b3IgPSBmdW5jdGlvbiAoIGJhc2VVcmwsIG9wdGlvbnMgKSB7XG5cblx0dGhpcy5iYXNlVXJsID0gYmFzZVVybCB8fCAnJztcblx0dGhpcy5vcHRpb25zID0gb3B0aW9ucztcblx0dGhpcy5tYXRlcmlhbHNJbmZvID0ge307XG5cdHRoaXMubWF0ZXJpYWxzID0ge307XG5cdHRoaXMubWF0ZXJpYWxzQXJyYXkgPSBbXTtcblx0dGhpcy5uYW1lTG9va3VwID0ge307XG5cblx0dGhpcy5zaWRlID0gKCB0aGlzLm9wdGlvbnMgJiYgdGhpcy5vcHRpb25zLnNpZGUgKSA/IHRoaXMub3B0aW9ucy5zaWRlIDogRnJvbnRTaWRlO1xuXHR0aGlzLndyYXAgPSAoIHRoaXMub3B0aW9ucyAmJiB0aGlzLm9wdGlvbnMud3JhcCApID8gdGhpcy5vcHRpb25zLndyYXAgOiBSZXBlYXRXcmFwcGluZztcblxufTtcblxuTVRMTG9hZGVyLk1hdGVyaWFsQ3JlYXRvci5wcm90b3R5cGUgPSB7XG5cblx0Y29uc3RydWN0b3I6IE1UTExvYWRlci5NYXRlcmlhbENyZWF0b3IsXG5cblx0Y3Jvc3NPcmlnaW46ICdhbm9ueW1vdXMnLFxuXG5cdHNldENyb3NzT3JpZ2luOiBmdW5jdGlvbiAoIHZhbHVlICkge1xuXG5cdFx0dGhpcy5jcm9zc09yaWdpbiA9IHZhbHVlO1xuXHRcdHJldHVybiB0aGlzO1xuXG5cdH0sXG5cblx0c2V0TWFuYWdlcjogZnVuY3Rpb24gKCB2YWx1ZSApIHtcblxuXHRcdHRoaXMubWFuYWdlciA9IHZhbHVlO1xuXG5cdH0sXG5cblx0c2V0TWF0ZXJpYWxzOiBmdW5jdGlvbiAoIG1hdGVyaWFsc0luZm8gKSB7XG5cblx0XHR0aGlzLm1hdGVyaWFsc0luZm8gPSB0aGlzLmNvbnZlcnQoIG1hdGVyaWFsc0luZm8gKTtcblx0XHR0aGlzLm1hdGVyaWFscyA9IHt9O1xuXHRcdHRoaXMubWF0ZXJpYWxzQXJyYXkgPSBbXTtcblx0XHR0aGlzLm5hbWVMb29rdXAgPSB7fTtcblxuXHR9LFxuXG5cdGNvbnZlcnQ6IGZ1bmN0aW9uICggbWF0ZXJpYWxzSW5mbyApIHtcblxuXHRcdGlmICggISB0aGlzLm9wdGlvbnMgKSByZXR1cm4gbWF0ZXJpYWxzSW5mbztcblxuXHRcdHZhciBjb252ZXJ0ZWQgPSB7fTtcblxuXHRcdGZvciAoIHZhciBtbiBpbiBtYXRlcmlhbHNJbmZvICkge1xuXG5cdFx0XHQvLyBDb252ZXJ0IG1hdGVyaWFscyBpbmZvIGludG8gbm9ybWFsaXplZCBmb3JtIGJhc2VkIG9uIG9wdGlvbnNcblxuXHRcdFx0dmFyIG1hdCA9IG1hdGVyaWFsc0luZm9bIG1uIF07XG5cblx0XHRcdHZhciBjb3ZtYXQgPSB7fTtcblxuXHRcdFx0Y29udmVydGVkWyBtbiBdID0gY292bWF0O1xuXG5cdFx0XHRmb3IgKCB2YXIgcHJvcCBpbiBtYXQgKSB7XG5cblx0XHRcdFx0dmFyIHNhdmUgPSB0cnVlO1xuXHRcdFx0XHR2YXIgdmFsdWUgPSBtYXRbIHByb3AgXTtcblx0XHRcdFx0dmFyIGxwcm9wID0gcHJvcC50b0xvd2VyQ2FzZSgpO1xuXG5cdFx0XHRcdHN3aXRjaCAoIGxwcm9wICkge1xuXG5cdFx0XHRcdFx0Y2FzZSAna2QnOlxuXHRcdFx0XHRcdGNhc2UgJ2thJzpcblx0XHRcdFx0XHRjYXNlICdrcyc6XG5cblx0XHRcdFx0XHRcdC8vIERpZmZ1c2UgY29sb3IgKGNvbG9yIHVuZGVyIHdoaXRlIGxpZ2h0KSB1c2luZyBSR0IgdmFsdWVzXG5cblx0XHRcdFx0XHRcdGlmICggdGhpcy5vcHRpb25zICYmIHRoaXMub3B0aW9ucy5ub3JtYWxpemVSR0IgKSB7XG5cblx0XHRcdFx0XHRcdFx0dmFsdWUgPSBbIHZhbHVlWyAwIF0gLyAyNTUsIHZhbHVlWyAxIF0gLyAyNTUsIHZhbHVlWyAyIF0gLyAyNTUgXTtcblxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRpZiAoIHRoaXMub3B0aW9ucyAmJiB0aGlzLm9wdGlvbnMuaWdub3JlWmVyb1JHQnMgKSB7XG5cblx0XHRcdFx0XHRcdFx0aWYgKCB2YWx1ZVsgMCBdID09PSAwICYmIHZhbHVlWyAxIF0gPT09IDAgJiYgdmFsdWVbIDIgXSA9PT0gMCApIHtcblxuXHRcdFx0XHRcdFx0XHRcdC8vIGlnbm9yZVxuXG5cdFx0XHRcdFx0XHRcdFx0c2F2ZSA9IGZhbHNlO1xuXG5cdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdGRlZmF1bHQ6XG5cblx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoIHNhdmUgKSB7XG5cblx0XHRcdFx0XHRjb3ZtYXRbIGxwcm9wIF0gPSB2YWx1ZTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdH1cblxuXHRcdH1cblxuXHRcdHJldHVybiBjb252ZXJ0ZWQ7XG5cblx0fSxcblxuXHRwcmVsb2FkOiBmdW5jdGlvbiAoKSB7XG5cblx0XHRmb3IgKCB2YXIgbW4gaW4gdGhpcy5tYXRlcmlhbHNJbmZvICkge1xuXG5cdFx0XHR0aGlzLmNyZWF0ZSggbW4gKTtcblxuXHRcdH1cblxuXHR9LFxuXG5cdGdldEluZGV4OiBmdW5jdGlvbiAoIG1hdGVyaWFsTmFtZSApIHtcblxuXHRcdHJldHVybiB0aGlzLm5hbWVMb29rdXBbIG1hdGVyaWFsTmFtZSBdO1xuXG5cdH0sXG5cblx0Z2V0QXNBcnJheTogZnVuY3Rpb24gKCkge1xuXG5cdFx0dmFyIGluZGV4ID0gMDtcblxuXHRcdGZvciAoIHZhciBtbiBpbiB0aGlzLm1hdGVyaWFsc0luZm8gKSB7XG5cblx0XHRcdHRoaXMubWF0ZXJpYWxzQXJyYXlbIGluZGV4IF0gPSB0aGlzLmNyZWF0ZSggbW4gKTtcblx0XHRcdHRoaXMubmFtZUxvb2t1cFsgbW4gXSA9IGluZGV4O1xuXHRcdFx0aW5kZXggKys7XG5cblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcy5tYXRlcmlhbHNBcnJheTtcblxuXHR9LFxuXG5cdGNyZWF0ZTogZnVuY3Rpb24gKCBtYXRlcmlhbE5hbWUgKSB7XG5cblx0XHRpZiAoIHRoaXMubWF0ZXJpYWxzWyBtYXRlcmlhbE5hbWUgXSA9PT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHR0aGlzLmNyZWF0ZU1hdGVyaWFsXyggbWF0ZXJpYWxOYW1lICk7XG5cblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcy5tYXRlcmlhbHNbIG1hdGVyaWFsTmFtZSBdO1xuXG5cdH0sXG5cblx0Y3JlYXRlTWF0ZXJpYWxfOiBmdW5jdGlvbiAoIG1hdGVyaWFsTmFtZSApIHtcblxuXHRcdC8vIENyZWF0ZSBtYXRlcmlhbFxuXG5cdFx0dmFyIHNjb3BlID0gdGhpcztcblx0XHR2YXIgbWF0ID0gdGhpcy5tYXRlcmlhbHNJbmZvWyBtYXRlcmlhbE5hbWUgXTtcblx0XHR2YXIgcGFyYW1zID0ge1xuXG5cdFx0XHRuYW1lOiBtYXRlcmlhbE5hbWUsXG5cdFx0XHRzaWRlOiB0aGlzLnNpZGVcblxuXHRcdH07XG5cblx0XHRmdW5jdGlvbiByZXNvbHZlVVJMKCBiYXNlVXJsLCB1cmwgKSB7XG5cblx0XHRcdGlmICggdHlwZW9mIHVybCAhPT0gJ3N0cmluZycgfHwgdXJsID09PSAnJyApXG5cdFx0XHRcdHJldHVybiAnJztcblxuXHRcdFx0Ly8gQWJzb2x1dGUgVVJMXG5cdFx0XHRpZiAoIC9eaHR0cHM/OlxcL1xcLy9pLnRlc3QoIHVybCApICkgcmV0dXJuIHVybDtcblxuXHRcdFx0cmV0dXJuIGJhc2VVcmwgKyB1cmw7XG5cblx0XHR9XG5cblx0XHRmdW5jdGlvbiBzZXRNYXBGb3JUeXBlKCBtYXBUeXBlLCB2YWx1ZSApIHtcblxuXHRcdFx0aWYgKCBwYXJhbXNbIG1hcFR5cGUgXSApIHJldHVybjsgLy8gS2VlcCB0aGUgZmlyc3QgZW5jb3VudGVyZWQgdGV4dHVyZVxuXG5cdFx0XHR2YXIgdGV4UGFyYW1zID0gc2NvcGUuZ2V0VGV4dHVyZVBhcmFtcyggdmFsdWUsIHBhcmFtcyApO1xuXHRcdFx0dmFyIG1hcCA9IHNjb3BlLmxvYWRUZXh0dXJlKCByZXNvbHZlVVJMKCBzY29wZS5iYXNlVXJsLCB0ZXhQYXJhbXMudXJsICkgKTtcblxuXHRcdFx0bWFwLnJlcGVhdC5jb3B5KCB0ZXhQYXJhbXMuc2NhbGUgKTtcblx0XHRcdG1hcC5vZmZzZXQuY29weSggdGV4UGFyYW1zLm9mZnNldCApO1xuXG5cdFx0XHRtYXAud3JhcFMgPSBzY29wZS53cmFwO1xuXHRcdFx0bWFwLndyYXBUID0gc2NvcGUud3JhcDtcblxuXHRcdFx0cGFyYW1zWyBtYXBUeXBlIF0gPSBtYXA7XG5cblx0XHR9XG5cblx0XHRmb3IgKCB2YXIgcHJvcCBpbiBtYXQgKSB7XG5cblx0XHRcdHZhciB2YWx1ZSA9IG1hdFsgcHJvcCBdO1xuXHRcdFx0dmFyIG47XG5cblx0XHRcdGlmICggdmFsdWUgPT09ICcnICkgY29udGludWU7XG5cblx0XHRcdHN3aXRjaCAoIHByb3AudG9Mb3dlckNhc2UoKSApIHtcblxuXHRcdFx0XHQvLyBOcyBpcyBtYXRlcmlhbCBzcGVjdWxhciBleHBvbmVudFxuXG5cdFx0XHRcdGNhc2UgJ2tkJzpcblxuXHRcdFx0XHRcdC8vIERpZmZ1c2UgY29sb3IgKGNvbG9yIHVuZGVyIHdoaXRlIGxpZ2h0KSB1c2luZyBSR0IgdmFsdWVzXG5cblx0XHRcdFx0XHRwYXJhbXMuY29sb3IgPSBuZXcgQ29sb3IoKS5mcm9tQXJyYXkoIHZhbHVlICk7XG5cblx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRjYXNlICdrcyc6XG5cblx0XHRcdFx0XHQvLyBTcGVjdWxhciBjb2xvciAoY29sb3Igd2hlbiBsaWdodCBpcyByZWZsZWN0ZWQgZnJvbSBzaGlueSBzdXJmYWNlKSB1c2luZyBSR0IgdmFsdWVzXG5cdFx0XHRcdFx0cGFyYW1zLnNwZWN1bGFyID0gbmV3IENvbG9yKCkuZnJvbUFycmF5KCB2YWx1ZSApO1xuXG5cdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0Y2FzZSAna2UnOlxuXG5cdFx0XHRcdFx0Ly8gRW1pc3NpdmUgdXNpbmcgUkdCIHZhbHVlc1xuXHRcdFx0XHRcdHBhcmFtcy5lbWlzc2l2ZSA9IG5ldyBDb2xvcigpLmZyb21BcnJheSggdmFsdWUgKTtcblxuXHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdGNhc2UgJ21hcF9rZCc6XG5cblx0XHRcdFx0XHQvLyBEaWZmdXNlIHRleHR1cmUgbWFwXG5cblx0XHRcdFx0XHRzZXRNYXBGb3JUeXBlKCAnbWFwJywgdmFsdWUgKTtcblxuXHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdGNhc2UgJ21hcF9rcyc6XG5cblx0XHRcdFx0XHQvLyBTcGVjdWxhciBtYXBcblxuXHRcdFx0XHRcdHNldE1hcEZvclR5cGUoICdzcGVjdWxhck1hcCcsIHZhbHVlICk7XG5cblx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRjYXNlICdtYXBfa2UnOlxuXG5cdFx0XHRcdFx0Ly8gRW1pc3NpdmUgbWFwXG5cblx0XHRcdFx0XHRzZXRNYXBGb3JUeXBlKCAnZW1pc3NpdmVNYXAnLCB2YWx1ZSApO1xuXG5cdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0Y2FzZSAnbm9ybSc6XG5cblx0XHRcdFx0XHRzZXRNYXBGb3JUeXBlKCAnbm9ybWFsTWFwJywgdmFsdWUgKTtcblxuXHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdGNhc2UgJ21hcF9idW1wJzpcblx0XHRcdFx0Y2FzZSAnYnVtcCc6XG5cblx0XHRcdFx0XHQvLyBCdW1wIHRleHR1cmUgbWFwXG5cblx0XHRcdFx0XHRzZXRNYXBGb3JUeXBlKCAnYnVtcE1hcCcsIHZhbHVlICk7XG5cblx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRjYXNlICdtYXBfZCc6XG5cblx0XHRcdFx0XHQvLyBBbHBoYSBtYXBcblxuXHRcdFx0XHRcdHNldE1hcEZvclR5cGUoICdhbHBoYU1hcCcsIHZhbHVlICk7XG5cdFx0XHRcdFx0cGFyYW1zLnRyYW5zcGFyZW50ID0gdHJ1ZTtcblxuXHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdGNhc2UgJ25zJzpcblxuXHRcdFx0XHRcdC8vIFRoZSBzcGVjdWxhciBleHBvbmVudCAoZGVmaW5lcyB0aGUgZm9jdXMgb2YgdGhlIHNwZWN1bGFyIGhpZ2hsaWdodClcblx0XHRcdFx0XHQvLyBBIGhpZ2ggZXhwb25lbnQgcmVzdWx0cyBpbiBhIHRpZ2h0LCBjb25jZW50cmF0ZWQgaGlnaGxpZ2h0LiBOcyB2YWx1ZXMgbm9ybWFsbHkgcmFuZ2UgZnJvbSAwIHRvIDEwMDAuXG5cblx0XHRcdFx0XHRwYXJhbXMuc2hpbmluZXNzID0gcGFyc2VGbG9hdCggdmFsdWUgKTtcblxuXHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdGNhc2UgJ2QnOlxuXHRcdFx0XHRcdG4gPSBwYXJzZUZsb2F0KCB2YWx1ZSApO1xuXG5cdFx0XHRcdFx0aWYgKCBuIDwgMSApIHtcblxuXHRcdFx0XHRcdFx0cGFyYW1zLm9wYWNpdHkgPSBuO1xuXHRcdFx0XHRcdFx0cGFyYW1zLnRyYW5zcGFyZW50ID0gdHJ1ZTtcblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdGNhc2UgJ3RyJzpcblx0XHRcdFx0XHRuID0gcGFyc2VGbG9hdCggdmFsdWUgKTtcblxuXHRcdFx0XHRcdGlmICggdGhpcy5vcHRpb25zICYmIHRoaXMub3B0aW9ucy5pbnZlcnRUclByb3BlcnR5ICkgbiA9IDEgLSBuO1xuXG5cdFx0XHRcdFx0aWYgKCBuID4gMCApIHtcblxuXHRcdFx0XHRcdFx0cGFyYW1zLm9wYWNpdHkgPSAxIC0gbjtcblx0XHRcdFx0XHRcdHBhcmFtcy50cmFuc3BhcmVudCA9IHRydWU7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHR9XG5cblx0XHR9XG5cblx0XHR0aGlzLm1hdGVyaWFsc1sgbWF0ZXJpYWxOYW1lIF0gPSBuZXcgTWVzaFBob25nTWF0ZXJpYWwoIHBhcmFtcyApO1xuXHRcdHJldHVybiB0aGlzLm1hdGVyaWFsc1sgbWF0ZXJpYWxOYW1lIF07XG5cblx0fSxcblxuXHRnZXRUZXh0dXJlUGFyYW1zOiBmdW5jdGlvbiAoIHZhbHVlLCBtYXRQYXJhbXMgKSB7XG5cblx0XHR2YXIgdGV4UGFyYW1zID0ge1xuXG5cdFx0XHRzY2FsZTogbmV3IFZlY3RvcjIoIDEsIDEgKSxcblx0XHRcdG9mZnNldDogbmV3IFZlY3RvcjIoIDAsIDAgKVxuXG5cdFx0IH07XG5cblx0XHR2YXIgaXRlbXMgPSB2YWx1ZS5zcGxpdCggL1xccysvICk7XG5cdFx0dmFyIHBvcztcblxuXHRcdHBvcyA9IGl0ZW1zLmluZGV4T2YoICctYm0nICk7XG5cblx0XHRpZiAoIHBvcyA+PSAwICkge1xuXG5cdFx0XHRtYXRQYXJhbXMuYnVtcFNjYWxlID0gcGFyc2VGbG9hdCggaXRlbXNbIHBvcyArIDEgXSApO1xuXHRcdFx0aXRlbXMuc3BsaWNlKCBwb3MsIDIgKTtcblxuXHRcdH1cblxuXHRcdHBvcyA9IGl0ZW1zLmluZGV4T2YoICctcycgKTtcblxuXHRcdGlmICggcG9zID49IDAgKSB7XG5cblx0XHRcdHRleFBhcmFtcy5zY2FsZS5zZXQoIHBhcnNlRmxvYXQoIGl0ZW1zWyBwb3MgKyAxIF0gKSwgcGFyc2VGbG9hdCggaXRlbXNbIHBvcyArIDIgXSApICk7XG5cdFx0XHRpdGVtcy5zcGxpY2UoIHBvcywgNCApOyAvLyB3ZSBleHBlY3QgMyBwYXJhbWV0ZXJzIGhlcmUhXG5cblx0XHR9XG5cblx0XHRwb3MgPSBpdGVtcy5pbmRleE9mKCAnLW8nICk7XG5cblx0XHRpZiAoIHBvcyA+PSAwICkge1xuXG5cdFx0XHR0ZXhQYXJhbXMub2Zmc2V0LnNldCggcGFyc2VGbG9hdCggaXRlbXNbIHBvcyArIDEgXSApLCBwYXJzZUZsb2F0KCBpdGVtc1sgcG9zICsgMiBdICkgKTtcblx0XHRcdGl0ZW1zLnNwbGljZSggcG9zLCA0ICk7IC8vIHdlIGV4cGVjdCAzIHBhcmFtZXRlcnMgaGVyZSFcblxuXHRcdH1cblxuXHRcdHRleFBhcmFtcy51cmwgPSBpdGVtcy5qb2luKCAnICcgKS50cmltKCk7XG5cdFx0cmV0dXJuIHRleFBhcmFtcztcblxuXHR9LFxuXG5cdGxvYWRUZXh0dXJlOiBmdW5jdGlvbiAoIHVybCwgbWFwcGluZywgb25Mb2FkLCBvblByb2dyZXNzLCBvbkVycm9yICkge1xuXG5cdFx0dmFyIHRleHR1cmU7XG5cdFx0dmFyIG1hbmFnZXIgPSAoIHRoaXMubWFuYWdlciAhPT0gdW5kZWZpbmVkICkgPyB0aGlzLm1hbmFnZXIgOiBEZWZhdWx0TG9hZGluZ01hbmFnZXI7XG5cdFx0dmFyIGxvYWRlciA9IG1hbmFnZXIuZ2V0SGFuZGxlciggdXJsICk7XG5cblx0XHRpZiAoIGxvYWRlciA9PT0gbnVsbCApIHtcblxuXHRcdFx0bG9hZGVyID0gbmV3IFRleHR1cmVMb2FkZXIoIG1hbmFnZXIgKTtcblxuXHRcdH1cblxuXHRcdGlmICggbG9hZGVyLnNldENyb3NzT3JpZ2luICkgbG9hZGVyLnNldENyb3NzT3JpZ2luKCB0aGlzLmNyb3NzT3JpZ2luICk7XG5cdFx0dGV4dHVyZSA9IGxvYWRlci5sb2FkKCB1cmwsIG9uTG9hZCwgb25Qcm9ncmVzcywgb25FcnJvciApO1xuXG5cdFx0aWYgKCBtYXBwaW5nICE9PSB1bmRlZmluZWQgKSB0ZXh0dXJlLm1hcHBpbmcgPSBtYXBwaW5nO1xuXG5cdFx0cmV0dXJuIHRleHR1cmU7XG5cblx0fVxuXG59O1xuXG5leHBvcnQgeyBNVExMb2FkZXIgfTtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/three/examples/jsm/loaders/MTLLoader.js\n");

/***/ }),

/***/ "./node_modules/three/examples/jsm/loaders/OBJLoader.js":
/*!**************************************************************!*\
  !*** ./node_modules/three/examples/jsm/loaders/OBJLoader.js ***!
  \**************************************************************/
/*! exports provided: OBJLoader */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"OBJLoader\", function() { return OBJLoader; });\n/* harmony import */ var _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../build/three.module.js */ \"./node_modules/three/build/three.module.js\");\n\n\nvar OBJLoader = ( function () {\n\n\t// o object_name | g group_name\n\tvar object_pattern = /^[og]\\s*(.+)?/;\n\t// mtllib file_reference\n\tvar material_library_pattern = /^mtllib /;\n\t// usemtl material_name\n\tvar material_use_pattern = /^usemtl /;\n\t// usemap map_name\n\tvar map_use_pattern = /^usemap /;\n\n\tvar vA = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector3\"]();\n\tvar vB = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector3\"]();\n\tvar vC = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector3\"]();\n\n\tvar ab = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector3\"]();\n\tvar cb = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector3\"]();\n\n\tfunction ParserState() {\n\n\t\tvar state = {\n\t\t\tobjects: [],\n\t\t\tobject: {},\n\n\t\t\tvertices: [],\n\t\t\tnormals: [],\n\t\t\tcolors: [],\n\t\t\tuvs: [],\n\n\t\t\tmaterials: {},\n\t\t\tmaterialLibraries: [],\n\n\t\t\tstartObject: function ( name, fromDeclaration ) {\n\n\t\t\t\t// If the current object (initial from reset) is not from a g/o declaration in the parsed\n\t\t\t\t// file. We need to use it for the first parsed g/o to keep things in sync.\n\t\t\t\tif ( this.object && this.object.fromDeclaration === false ) {\n\n\t\t\t\t\tthis.object.name = name;\n\t\t\t\t\tthis.object.fromDeclaration = ( fromDeclaration !== false );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tvar previousMaterial = ( this.object && typeof this.object.currentMaterial === 'function' ? this.object.currentMaterial() : undefined );\n\n\t\t\t\tif ( this.object && typeof this.object._finalize === 'function' ) {\n\n\t\t\t\t\tthis.object._finalize( true );\n\n\t\t\t\t}\n\n\t\t\t\tthis.object = {\n\t\t\t\t\tname: name || '',\n\t\t\t\t\tfromDeclaration: ( fromDeclaration !== false ),\n\n\t\t\t\t\tgeometry: {\n\t\t\t\t\t\tvertices: [],\n\t\t\t\t\t\tnormals: [],\n\t\t\t\t\t\tcolors: [],\n\t\t\t\t\t\tuvs: [],\n\t\t\t\t\t\thasUVIndices: false\n\t\t\t\t\t},\n\t\t\t\t\tmaterials: [],\n\t\t\t\t\tsmooth: true,\n\n\t\t\t\t\tstartMaterial: function ( name, libraries ) {\n\n\t\t\t\t\t\tvar previous = this._finalize( false );\n\n\t\t\t\t\t\t// New usemtl declaration overwrites an inherited material, except if faces were declared\n\t\t\t\t\t\t// after the material, then it must be preserved for proper MultiMaterial continuation.\n\t\t\t\t\t\tif ( previous && ( previous.inherited || previous.groupCount <= 0 ) ) {\n\n\t\t\t\t\t\t\tthis.materials.splice( previous.index, 1 );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar material = {\n\t\t\t\t\t\t\tindex: this.materials.length,\n\t\t\t\t\t\t\tname: name || '',\n\t\t\t\t\t\t\tmtllib: ( Array.isArray( libraries ) && libraries.length > 0 ? libraries[ libraries.length - 1 ] : '' ),\n\t\t\t\t\t\t\tsmooth: ( previous !== undefined ? previous.smooth : this.smooth ),\n\t\t\t\t\t\t\tgroupStart: ( previous !== undefined ? previous.groupEnd : 0 ),\n\t\t\t\t\t\t\tgroupEnd: - 1,\n\t\t\t\t\t\t\tgroupCount: - 1,\n\t\t\t\t\t\t\tinherited: false,\n\n\t\t\t\t\t\t\tclone: function ( index ) {\n\n\t\t\t\t\t\t\t\tvar cloned = {\n\t\t\t\t\t\t\t\t\tindex: ( typeof index === 'number' ? index : this.index ),\n\t\t\t\t\t\t\t\t\tname: this.name,\n\t\t\t\t\t\t\t\t\tmtllib: this.mtllib,\n\t\t\t\t\t\t\t\t\tsmooth: this.smooth,\n\t\t\t\t\t\t\t\t\tgroupStart: 0,\n\t\t\t\t\t\t\t\t\tgroupEnd: - 1,\n\t\t\t\t\t\t\t\t\tgroupCount: - 1,\n\t\t\t\t\t\t\t\t\tinherited: false\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tcloned.clone = this.clone.bind( cloned );\n\t\t\t\t\t\t\t\treturn cloned;\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tthis.materials.push( material );\n\n\t\t\t\t\t\treturn material;\n\n\t\t\t\t\t},\n\n\t\t\t\t\tcurrentMaterial: function () {\n\n\t\t\t\t\t\tif ( this.materials.length > 0 ) {\n\n\t\t\t\t\t\t\treturn this.materials[ this.materials.length - 1 ];\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn undefined;\n\n\t\t\t\t\t},\n\n\t\t\t\t\t_finalize: function ( end ) {\n\n\t\t\t\t\t\tvar lastMultiMaterial = this.currentMaterial();\n\t\t\t\t\t\tif ( lastMultiMaterial && lastMultiMaterial.groupEnd === - 1 ) {\n\n\t\t\t\t\t\t\tlastMultiMaterial.groupEnd = this.geometry.vertices.length / 3;\n\t\t\t\t\t\t\tlastMultiMaterial.groupCount = lastMultiMaterial.groupEnd - lastMultiMaterial.groupStart;\n\t\t\t\t\t\t\tlastMultiMaterial.inherited = false;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Ignore objects tail materials if no face declarations followed them before a new o/g started.\n\t\t\t\t\t\tif ( end && this.materials.length > 1 ) {\n\n\t\t\t\t\t\t\tfor ( var mi = this.materials.length - 1; mi >= 0; mi -- ) {\n\n\t\t\t\t\t\t\t\tif ( this.materials[ mi ].groupCount <= 0 ) {\n\n\t\t\t\t\t\t\t\t\tthis.materials.splice( mi, 1 );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Guarantee at least one empty material, this makes the creation later more straight forward.\n\t\t\t\t\t\tif ( end && this.materials.length === 0 ) {\n\n\t\t\t\t\t\t\tthis.materials.push( {\n\t\t\t\t\t\t\t\tname: '',\n\t\t\t\t\t\t\t\tsmooth: this.smooth\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn lastMultiMaterial;\n\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\t// Inherit previous objects material.\n\t\t\t\t// Spec tells us that a declared material must be set to all objects until a new material is declared.\n\t\t\t\t// If a usemtl declaration is encountered while this new object is being parsed, it will\n\t\t\t\t// overwrite the inherited material. Exception being that there was already face declarations\n\t\t\t\t// to the inherited material, then it will be preserved for proper MultiMaterial continuation.\n\n\t\t\t\tif ( previousMaterial && previousMaterial.name && typeof previousMaterial.clone === 'function' ) {\n\n\t\t\t\t\tvar declared = previousMaterial.clone( 0 );\n\t\t\t\t\tdeclared.inherited = true;\n\t\t\t\t\tthis.object.materials.push( declared );\n\n\t\t\t\t}\n\n\t\t\t\tthis.objects.push( this.object );\n\n\t\t\t},\n\n\t\t\tfinalize: function () {\n\n\t\t\t\tif ( this.object && typeof this.object._finalize === 'function' ) {\n\n\t\t\t\t\tthis.object._finalize( true );\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tparseVertexIndex: function ( value, len ) {\n\n\t\t\t\tvar index = parseInt( value, 10 );\n\t\t\t\treturn ( index >= 0 ? index - 1 : index + len / 3 ) * 3;\n\n\t\t\t},\n\n\t\t\tparseNormalIndex: function ( value, len ) {\n\n\t\t\t\tvar index = parseInt( value, 10 );\n\t\t\t\treturn ( index >= 0 ? index - 1 : index + len / 3 ) * 3;\n\n\t\t\t},\n\n\t\t\tparseUVIndex: function ( value, len ) {\n\n\t\t\t\tvar index = parseInt( value, 10 );\n\t\t\t\treturn ( index >= 0 ? index - 1 : index + len / 2 ) * 2;\n\n\t\t\t},\n\n\t\t\taddVertex: function ( a, b, c ) {\n\n\t\t\t\tvar src = this.vertices;\n\t\t\t\tvar dst = this.object.geometry.vertices;\n\n\t\t\t\tdst.push( src[ a + 0 ], src[ a + 1 ], src[ a + 2 ] );\n\t\t\t\tdst.push( src[ b + 0 ], src[ b + 1 ], src[ b + 2 ] );\n\t\t\t\tdst.push( src[ c + 0 ], src[ c + 1 ], src[ c + 2 ] );\n\n\t\t\t},\n\n\t\t\taddVertexPoint: function ( a ) {\n\n\t\t\t\tvar src = this.vertices;\n\t\t\t\tvar dst = this.object.geometry.vertices;\n\n\t\t\t\tdst.push( src[ a + 0 ], src[ a + 1 ], src[ a + 2 ] );\n\n\t\t\t},\n\n\t\t\taddVertexLine: function ( a ) {\n\n\t\t\t\tvar src = this.vertices;\n\t\t\t\tvar dst = this.object.geometry.vertices;\n\n\t\t\t\tdst.push( src[ a + 0 ], src[ a + 1 ], src[ a + 2 ] );\n\n\t\t\t},\n\n\t\t\taddNormal: function ( a, b, c ) {\n\n\t\t\t\tvar src = this.normals;\n\t\t\t\tvar dst = this.object.geometry.normals;\n\n\t\t\t\tdst.push( src[ a + 0 ], src[ a + 1 ], src[ a + 2 ] );\n\t\t\t\tdst.push( src[ b + 0 ], src[ b + 1 ], src[ b + 2 ] );\n\t\t\t\tdst.push( src[ c + 0 ], src[ c + 1 ], src[ c + 2 ] );\n\n\t\t\t},\n\n\t\t\taddFaceNormal: function ( a, b, c ) {\n\n\t\t\t\tvar src = this.vertices;\n\t\t\t\tvar dst = this.object.geometry.normals;\n\n\t\t\t\tvA.fromArray( src, a );\n\t\t\t\tvB.fromArray( src, b );\n\t\t\t\tvC.fromArray( src, c );\n\n\t\t\t\tcb.subVectors( vC, vB );\n\t\t\t\tab.subVectors( vA, vB );\n\t\t\t\tcb.cross( ab );\n\n\t\t\t\tcb.normalize();\n\n\t\t\t\tdst.push( cb.x, cb.y, cb.z );\n\t\t\t\tdst.push( cb.x, cb.y, cb.z );\n\t\t\t\tdst.push( cb.x, cb.y, cb.z );\n\n\t\t\t},\n\n\t\t\taddColor: function ( a, b, c ) {\n\n\t\t\t\tvar src = this.colors;\n\t\t\t\tvar dst = this.object.geometry.colors;\n\n\t\t\t\tif ( src[ a ] !== undefined ) dst.push( src[ a + 0 ], src[ a + 1 ], src[ a + 2 ] );\n\t\t\t\tif ( src[ b ] !== undefined ) dst.push( src[ b + 0 ], src[ b + 1 ], src[ b + 2 ] );\n\t\t\t\tif ( src[ c ] !== undefined ) dst.push( src[ c + 0 ], src[ c + 1 ], src[ c + 2 ] );\n\n\t\t\t},\n\n\t\t\taddUV: function ( a, b, c ) {\n\n\t\t\t\tvar src = this.uvs;\n\t\t\t\tvar dst = this.object.geometry.uvs;\n\n\t\t\t\tdst.push( src[ a + 0 ], src[ a + 1 ] );\n\t\t\t\tdst.push( src[ b + 0 ], src[ b + 1 ] );\n\t\t\t\tdst.push( src[ c + 0 ], src[ c + 1 ] );\n\n\t\t\t},\n\n\t\t\taddDefaultUV: function () {\n\n\t\t\t\tvar dst = this.object.geometry.uvs;\n\n\t\t\t\tdst.push( 0, 0 );\n\t\t\t\tdst.push( 0, 0 );\n\t\t\t\tdst.push( 0, 0 );\n\n\t\t\t},\n\n\t\t\taddUVLine: function ( a ) {\n\n\t\t\t\tvar src = this.uvs;\n\t\t\t\tvar dst = this.object.geometry.uvs;\n\n\t\t\t\tdst.push( src[ a + 0 ], src[ a + 1 ] );\n\n\t\t\t},\n\n\t\t\taddFace: function ( a, b, c, ua, ub, uc, na, nb, nc ) {\n\n\t\t\t\tvar vLen = this.vertices.length;\n\n\t\t\t\tvar ia = this.parseVertexIndex( a, vLen );\n\t\t\t\tvar ib = this.parseVertexIndex( b, vLen );\n\t\t\t\tvar ic = this.parseVertexIndex( c, vLen );\n\n\t\t\t\tthis.addVertex( ia, ib, ic );\n\t\t\t\tthis.addColor( ia, ib, ic );\n\n\t\t\t\t// normals\n\n\t\t\t\tif ( na !== undefined && na !== '' ) {\n\n\t\t\t\t\tvar nLen = this.normals.length;\n\n\t\t\t\t\tia = this.parseNormalIndex( na, nLen );\n\t\t\t\t\tib = this.parseNormalIndex( nb, nLen );\n\t\t\t\t\tic = this.parseNormalIndex( nc, nLen );\n\n\t\t\t\t\tthis.addNormal( ia, ib, ic );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis.addFaceNormal( ia, ib, ic );\n\n\t\t\t\t}\n\n\t\t\t\t// uvs\n\n\t\t\t\tif ( ua !== undefined && ua !== '' ) {\n\n\t\t\t\t\tvar uvLen = this.uvs.length;\n\n\t\t\t\t\tia = this.parseUVIndex( ua, uvLen );\n\t\t\t\t\tib = this.parseUVIndex( ub, uvLen );\n\t\t\t\t\tic = this.parseUVIndex( uc, uvLen );\n\n\t\t\t\t\tthis.addUV( ia, ib, ic );\n\n\t\t\t\t\tthis.object.geometry.hasUVIndices = true;\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// add placeholder values (for inconsistent face definitions)\n\n\t\t\t\t\tthis.addDefaultUV();\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\taddPointGeometry: function ( vertices ) {\n\n\t\t\t\tthis.object.geometry.type = 'Points';\n\n\t\t\t\tvar vLen = this.vertices.length;\n\n\t\t\t\tfor ( var vi = 0, l = vertices.length; vi < l; vi ++ ) {\n\n\t\t\t\t\tvar index = this.parseVertexIndex( vertices[ vi ], vLen );\n\n\t\t\t\t\tthis.addVertexPoint( index );\n\t\t\t\t\tthis.addColor( index );\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\taddLineGeometry: function ( vertices, uvs ) {\n\n\t\t\t\tthis.object.geometry.type = 'Line';\n\n\t\t\t\tvar vLen = this.vertices.length;\n\t\t\t\tvar uvLen = this.uvs.length;\n\n\t\t\t\tfor ( var vi = 0, l = vertices.length; vi < l; vi ++ ) {\n\n\t\t\t\t\tthis.addVertexLine( this.parseVertexIndex( vertices[ vi ], vLen ) );\n\n\t\t\t\t}\n\n\t\t\t\tfor ( var uvi = 0, l = uvs.length; uvi < l; uvi ++ ) {\n\n\t\t\t\t\tthis.addUVLine( this.parseUVIndex( uvs[ uvi ], uvLen ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t\tstate.startObject( '', false );\n\n\t\treturn state;\n\n\t}\n\n\t//\n\n\tfunction OBJLoader( manager ) {\n\n\t\t_build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Loader\"].call( this, manager );\n\n\t\tthis.materials = null;\n\n\t}\n\n\tOBJLoader.prototype = Object.assign( Object.create( _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Loader\"].prototype ), {\n\n\t\tconstructor: OBJLoader,\n\n\t\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\t\tvar scope = this;\n\n\t\t\tvar loader = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"FileLoader\"]( this.manager );\n\t\t\tloader.setPath( this.path );\n\t\t\tloader.setRequestHeader( this.requestHeader );\n\t\t\tloader.setWithCredentials( this.withCredentials );\n\t\t\tloader.load( url, function ( text ) {\n\n\t\t\t\ttry {\n\n\t\t\t\t\tonLoad( scope.parse( text ) );\n\n\t\t\t\t} catch ( e ) {\n\n\t\t\t\t\tif ( onError ) {\n\n\t\t\t\t\t\tonError( e );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconsole.error( e );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t\t}\n\n\t\t\t}, onProgress, onError );\n\n\t\t},\n\n\t\tsetMaterials: function ( materials ) {\n\n\t\t\tthis.materials = materials;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tparse: function ( text ) {\n\n\t\t\tvar state = new ParserState();\n\n\t\t\tif ( text.indexOf( '\\r\\n' ) !== - 1 ) {\n\n\t\t\t\t// This is faster than String.split with regex that splits on both\n\t\t\t\ttext = text.replace( /\\r\\n/g, '\\n' );\n\n\t\t\t}\n\n\t\t\tif ( text.indexOf( '\\\\\\n' ) !== - 1 ) {\n\n\t\t\t\t// join lines separated by a line continuation character (\\)\n\t\t\t\ttext = text.replace( /\\\\\\n/g, '' );\n\n\t\t\t}\n\n\t\t\tvar lines = text.split( '\\n' );\n\t\t\tvar line = '', lineFirstChar = '';\n\t\t\tvar lineLength = 0;\n\t\t\tvar result = [];\n\n\t\t\t// Faster to just trim left side of the line. Use if available.\n\t\t\tvar trimLeft = ( typeof ''.trimLeft === 'function' );\n\n\t\t\tfor ( var i = 0, l = lines.length; i < l; i ++ ) {\n\n\t\t\t\tline = lines[ i ];\n\n\t\t\t\tline = trimLeft ? line.trimLeft() : line.trim();\n\n\t\t\t\tlineLength = line.length;\n\n\t\t\t\tif ( lineLength === 0 ) continue;\n\n\t\t\t\tlineFirstChar = line.charAt( 0 );\n\n\t\t\t\t// @todo invoke passed in handler if any\n\t\t\t\tif ( lineFirstChar === '#' ) continue;\n\n\t\t\t\tif ( lineFirstChar === 'v' ) {\n\n\t\t\t\t\tvar data = line.split( /\\s+/ );\n\n\t\t\t\t\tswitch ( data[ 0 ] ) {\n\n\t\t\t\t\t\tcase 'v':\n\t\t\t\t\t\t\tstate.vertices.push(\n\t\t\t\t\t\t\t\tparseFloat( data[ 1 ] ),\n\t\t\t\t\t\t\t\tparseFloat( data[ 2 ] ),\n\t\t\t\t\t\t\t\tparseFloat( data[ 3 ] )\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tif ( data.length >= 7 ) {\n\n\t\t\t\t\t\t\t\tstate.colors.push(\n\t\t\t\t\t\t\t\t\tparseFloat( data[ 4 ] ),\n\t\t\t\t\t\t\t\t\tparseFloat( data[ 5 ] ),\n\t\t\t\t\t\t\t\t\tparseFloat( data[ 6 ] )\n\n\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t// if no colors are defined, add placeholders so color and vertex indices match\n\n\t\t\t\t\t\t\t\tstate.colors.push( undefined, undefined, undefined );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'vn':\n\t\t\t\t\t\t\tstate.normals.push(\n\t\t\t\t\t\t\t\tparseFloat( data[ 1 ] ),\n\t\t\t\t\t\t\t\tparseFloat( data[ 2 ] ),\n\t\t\t\t\t\t\t\tparseFloat( data[ 3 ] )\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'vt':\n\t\t\t\t\t\t\tstate.uvs.push(\n\t\t\t\t\t\t\t\tparseFloat( data[ 1 ] ),\n\t\t\t\t\t\t\t\tparseFloat( data[ 2 ] )\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( lineFirstChar === 'f' ) {\n\n\t\t\t\t\tvar lineData = line.substr( 1 ).trim();\n\t\t\t\t\tvar vertexData = lineData.split( /\\s+/ );\n\t\t\t\t\tvar faceVertices = [];\n\n\t\t\t\t\t// Parse the face vertex data into an easy to work with format\n\n\t\t\t\t\tfor ( var j = 0, jl = vertexData.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\tvar vertex = vertexData[ j ];\n\n\t\t\t\t\t\tif ( vertex.length > 0 ) {\n\n\t\t\t\t\t\t\tvar vertexParts = vertex.split( '/' );\n\t\t\t\t\t\t\tfaceVertices.push( vertexParts );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// Draw an edge between the first vertex and all subsequent vertices to form an n-gon\n\n\t\t\t\t\tvar v1 = faceVertices[ 0 ];\n\n\t\t\t\t\tfor ( var j = 1, jl = faceVertices.length - 1; j < jl; j ++ ) {\n\n\t\t\t\t\t\tvar v2 = faceVertices[ j ];\n\t\t\t\t\t\tvar v3 = faceVertices[ j + 1 ];\n\n\t\t\t\t\t\tstate.addFace(\n\t\t\t\t\t\t\tv1[ 0 ], v2[ 0 ], v3[ 0 ],\n\t\t\t\t\t\t\tv1[ 1 ], v2[ 1 ], v3[ 1 ],\n\t\t\t\t\t\t\tv1[ 2 ], v2[ 2 ], v3[ 2 ]\n\t\t\t\t\t\t);\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( lineFirstChar === 'l' ) {\n\n\t\t\t\t\tvar lineParts = line.substring( 1 ).trim().split( ' ' );\n\t\t\t\t\tvar lineVertices = [], lineUVs = [];\n\n\t\t\t\t\tif ( line.indexOf( '/' ) === - 1 ) {\n\n\t\t\t\t\t\tlineVertices = lineParts;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tfor ( var li = 0, llen = lineParts.length; li < llen; li ++ ) {\n\n\t\t\t\t\t\t\tvar parts = lineParts[ li ].split( '/' );\n\n\t\t\t\t\t\t\tif ( parts[ 0 ] !== '' ) lineVertices.push( parts[ 0 ] );\n\t\t\t\t\t\t\tif ( parts[ 1 ] !== '' ) lineUVs.push( parts[ 1 ] );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tstate.addLineGeometry( lineVertices, lineUVs );\n\n\t\t\t\t} else if ( lineFirstChar === 'p' ) {\n\n\t\t\t\t\tvar lineData = line.substr( 1 ).trim();\n\t\t\t\t\tvar pointData = lineData.split( ' ' );\n\n\t\t\t\t\tstate.addPointGeometry( pointData );\n\n\t\t\t\t} else if ( ( result = object_pattern.exec( line ) ) !== null ) {\n\n\t\t\t\t\t// o object_name\n\t\t\t\t\t// or\n\t\t\t\t\t// g group_name\n\n\t\t\t\t\t// WORKAROUND: https://bugs.chromium.org/p/v8/issues/detail?id=2869\n\t\t\t\t\t// var name = result[ 0 ].substr( 1 ).trim();\n\t\t\t\t\tvar name = ( ' ' + result[ 0 ].substr( 1 ).trim() ).substr( 1 );\n\n\t\t\t\t\tstate.startObject( name );\n\n\t\t\t\t} else if ( material_use_pattern.test( line ) ) {\n\n\t\t\t\t\t// material\n\n\t\t\t\t\tstate.object.startMaterial( line.substring( 7 ).trim(), state.materialLibraries );\n\n\t\t\t\t} else if ( material_library_pattern.test( line ) ) {\n\n\t\t\t\t\t// mtl file\n\n\t\t\t\t\tstate.materialLibraries.push( line.substring( 7 ).trim() );\n\n\t\t\t\t} else if ( map_use_pattern.test( line ) ) {\n\n\t\t\t\t\t// the line is parsed but ignored since the loader assumes textures are defined MTL files\n\t\t\t\t\t// (according to https://www.okino.com/conv/imp_wave.htm, 'usemap' is the old-style Wavefront texture reference method)\n\n\t\t\t\t\tconsole.warn( 'THREE.OBJLoader: Rendering identifier \"usemap\" not supported. Textures must be defined in MTL files.' );\n\n\t\t\t\t} else if ( lineFirstChar === 's' ) {\n\n\t\t\t\t\tresult = line.split( ' ' );\n\n\t\t\t\t\t// smooth shading\n\n\t\t\t\t\t// @todo Handle files that have varying smooth values for a set of faces inside one geometry,\n\t\t\t\t\t// but does not define a usemtl for each face set.\n\t\t\t\t\t// This should be detected and a dummy material created (later MultiMaterial and geometry groups).\n\t\t\t\t\t// This requires some care to not create extra material on each smooth value for \"normal\" obj files.\n\t\t\t\t\t// where explicit usemtl defines geometry groups.\n\t\t\t\t\t// Example asset: examples/models/obj/cerberus/Cerberus.obj\n\n\t\t\t\t\t/*\n\t\t\t\t\t * http://paulbourke.net/dataformats/obj/\n\t\t\t\t\t * or\n\t\t\t\t\t * http://www.cs.utah.edu/~boulos/cs3505/obj_spec.pdf\n\t\t\t\t\t *\n\t\t\t\t\t * From chapter \"Grouping\" Syntax explanation \"s group_number\":\n\t\t\t\t\t * \"group_number is the smoothing group number. To turn off smoothing groups, use a value of 0 or off.\n\t\t\t\t\t * Polygonal elements use group numbers to put elements in different smoothing groups. For free-form\n\t\t\t\t\t * surfaces, smoothing groups are either turned on or off; there is no difference between values greater\n\t\t\t\t\t * than 0.\"\n\t\t\t\t\t */\n\t\t\t\t\tif ( result.length > 1 ) {\n\n\t\t\t\t\t\tvar value = result[ 1 ].trim().toLowerCase();\n\t\t\t\t\t\tstate.object.smooth = ( value !== '0' && value !== 'off' );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// ZBrush can produce \"s\" lines #11707\n\t\t\t\t\t\tstate.object.smooth = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tvar material = state.object.currentMaterial();\n\t\t\t\t\tif ( material ) material.smooth = state.object.smooth;\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// Handle null terminated files without exception\n\t\t\t\t\tif ( line === '\\0' ) continue;\n\n\t\t\t\t\tconsole.warn( 'THREE.OBJLoader: Unexpected line: \"' + line + '\"' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tstate.finalize();\n\n\t\t\tvar container = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Group\"]();\n\t\t\tcontainer.materialLibraries = [].concat( state.materialLibraries );\n\n\t\t\tvar hasPrimitives = ! ( state.objects.length === 1 && state.objects[ 0 ].geometry.vertices.length === 0 );\n\n\t\t\tif ( hasPrimitives === true ) {\n\n\t\t\t\tfor ( var i = 0, l = state.objects.length; i < l; i ++ ) {\n\n\t\t\t\t\tvar object = state.objects[ i ];\n\t\t\t\t\tvar geometry = object.geometry;\n\t\t\t\t\tvar materials = object.materials;\n\t\t\t\t\tvar isLine = ( geometry.type === 'Line' );\n\t\t\t\t\tvar isPoints = ( geometry.type === 'Points' );\n\t\t\t\t\tvar hasVertexColors = false;\n\n\t\t\t\t\t// Skip o/g line declarations that did not follow with any faces\n\t\t\t\t\tif ( geometry.vertices.length === 0 ) continue;\n\n\t\t\t\t\tvar buffergeometry = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"BufferGeometry\"]();\n\n\t\t\t\t\tbuffergeometry.setAttribute( 'position', new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Float32BufferAttribute\"]( geometry.vertices, 3 ) );\n\n\t\t\t\t\tif ( geometry.normals.length > 0 ) {\n\n\t\t\t\t\t\tbuffergeometry.setAttribute( 'normal', new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Float32BufferAttribute\"]( geometry.normals, 3 ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( geometry.colors.length > 0 ) {\n\n\t\t\t\t\t\thasVertexColors = true;\n\t\t\t\t\t\tbuffergeometry.setAttribute( 'color', new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Float32BufferAttribute\"]( geometry.colors, 3 ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( geometry.hasUVIndices === true ) {\n\n\t\t\t\t\t\tbuffergeometry.setAttribute( 'uv', new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Float32BufferAttribute\"]( geometry.uvs, 2 ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// Create materials\n\n\t\t\t\t\tvar createdMaterials = [];\n\n\t\t\t\t\tfor ( var mi = 0, miLen = materials.length; mi < miLen; mi ++ ) {\n\n\t\t\t\t\t\tvar sourceMaterial = materials[ mi ];\n\t\t\t\t\t\tvar materialHash = sourceMaterial.name + '_' + sourceMaterial.smooth + '_' + hasVertexColors;\n\t\t\t\t\t\tvar material = state.materials[ materialHash ];\n\n\t\t\t\t\t\tif ( this.materials !== null ) {\n\n\t\t\t\t\t\t\tmaterial = this.materials.create( sourceMaterial.name );\n\n\t\t\t\t\t\t\t// mtl etc. loaders probably can't create line materials correctly, copy properties to a line material.\n\t\t\t\t\t\t\tif ( isLine && material && ! ( material instanceof _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"LineBasicMaterial\"] ) ) {\n\n\t\t\t\t\t\t\t\tvar materialLine = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"LineBasicMaterial\"]();\n\t\t\t\t\t\t\t\t_build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Material\"].prototype.copy.call( materialLine, material );\n\t\t\t\t\t\t\t\tmaterialLine.color.copy( material.color );\n\t\t\t\t\t\t\t\tmaterial = materialLine;\n\n\t\t\t\t\t\t\t} else if ( isPoints && material && ! ( material instanceof _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"PointsMaterial\"] ) ) {\n\n\t\t\t\t\t\t\t\tvar materialPoints = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"PointsMaterial\"]( { size: 10, sizeAttenuation: false } );\n\t\t\t\t\t\t\t\t_build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Material\"].prototype.copy.call( materialPoints, material );\n\t\t\t\t\t\t\t\tmaterialPoints.color.copy( material.color );\n\t\t\t\t\t\t\t\tmaterialPoints.map = material.map;\n\t\t\t\t\t\t\t\tmaterial = materialPoints;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( material === undefined ) {\n\n\t\t\t\t\t\t\tif ( isLine ) {\n\n\t\t\t\t\t\t\t\tmaterial = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"LineBasicMaterial\"]();\n\n\t\t\t\t\t\t\t} else if ( isPoints ) {\n\n\t\t\t\t\t\t\t\tmaterial = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"PointsMaterial\"]( { size: 1, sizeAttenuation: false } );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tmaterial = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"MeshPhongMaterial\"]();\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tmaterial.name = sourceMaterial.name;\n\t\t\t\t\t\t\tmaterial.flatShading = sourceMaterial.smooth ? false : true;\n\t\t\t\t\t\t\tmaterial.vertexColors = hasVertexColors;\n\n\t\t\t\t\t\t\tstate.materials[ materialHash ] = material;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcreatedMaterials.push( material );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// Create mesh\n\n\t\t\t\t\tvar mesh;\n\n\t\t\t\t\tif ( createdMaterials.length > 1 ) {\n\n\t\t\t\t\t\tfor ( var mi = 0, miLen = materials.length; mi < miLen; mi ++ ) {\n\n\t\t\t\t\t\t\tvar sourceMaterial = materials[ mi ];\n\t\t\t\t\t\t\tbuffergeometry.addGroup( sourceMaterial.groupStart, sourceMaterial.groupCount, mi );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( isLine ) {\n\n\t\t\t\t\t\t\tmesh = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"LineSegments\"]( buffergeometry, createdMaterials );\n\n\t\t\t\t\t\t} else if ( isPoints ) {\n\n\t\t\t\t\t\t\tmesh = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Points\"]( buffergeometry, createdMaterials );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tmesh = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Mesh\"]( buffergeometry, createdMaterials );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( isLine ) {\n\n\t\t\t\t\t\t\tmesh = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"LineSegments\"]( buffergeometry, createdMaterials[ 0 ] );\n\n\t\t\t\t\t\t} else if ( isPoints ) {\n\n\t\t\t\t\t\t\tmesh = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Points\"]( buffergeometry, createdMaterials[ 0 ] );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tmesh = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Mesh\"]( buffergeometry, createdMaterials[ 0 ] );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tmesh.name = object.name;\n\n\t\t\t\t\tcontainer.add( mesh );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// if there is only the default parser state object with no geometry data, interpret data as point cloud\n\n\t\t\t\tif ( state.vertices.length > 0 ) {\n\n\t\t\t\t\tvar material = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"PointsMaterial\"]( { size: 1, sizeAttenuation: false } );\n\n\t\t\t\t\tvar buffergeometry = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"BufferGeometry\"]();\n\n\t\t\t\t\tbuffergeometry.setAttribute( 'position', new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Float32BufferAttribute\"]( state.vertices, 3 ) );\n\n\t\t\t\t\tif ( state.colors.length > 0 && state.colors[ 0 ] !== undefined ) {\n\n\t\t\t\t\t\tbuffergeometry.setAttribute( 'color', new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Float32BufferAttribute\"]( state.colors, 3 ) );\n\t\t\t\t\t\tmaterial.vertexColors = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tvar points = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Points\"]( buffergeometry, material );\n\t\t\t\t\tcontainer.add( points );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn container;\n\n\t\t}\n\n\t} );\n\n\treturn OBJLoader;\n\n} )();\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL3RocmVlL2V4YW1wbGVzL2pzbS9sb2FkZXJzL09CSkxvYWRlci5qcz9lNjQyIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQWN3Qzs7QUFFeEM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxjQUFjLDhEQUFPO0FBQ3JCLGNBQWMsOERBQU87QUFDckIsY0FBYyw4REFBTzs7QUFFckIsY0FBYyw4REFBTztBQUNyQixjQUFjLDhEQUFPOztBQUVyQjs7QUFFQTtBQUNBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxnQkFBZ0I7QUFDaEI7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQSxNQUFNOztBQUVOOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBLE1BQU07O0FBRU47O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQSxnREFBZ0QsU0FBUzs7QUFFekQ7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxRQUFROztBQUVSOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUEsSUFBSTs7QUFFSjs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQSxJQUFJOztBQUVKOztBQUVBO0FBQ0E7O0FBRUEsSUFBSTs7QUFFSjs7QUFFQTtBQUNBOztBQUVBLElBQUk7O0FBRUo7O0FBRUE7QUFDQTs7QUFFQSxJQUFJOztBQUVKOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLElBQUk7O0FBRUo7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQSxJQUFJOztBQUVKOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUEsSUFBSTs7QUFFSjs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxJQUFJOztBQUVKOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsSUFBSTs7QUFFSjs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxJQUFJOztBQUVKOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLElBQUk7O0FBRUo7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBLElBQUk7O0FBRUo7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQSxJQUFJOztBQUVKOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSxLQUFLOztBQUVMOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQSxLQUFLOztBQUVMOztBQUVBOztBQUVBOztBQUVBLElBQUk7O0FBRUo7O0FBRUE7O0FBRUE7O0FBRUEsMENBQTBDLFFBQVE7O0FBRWxEOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUEsSUFBSTs7QUFFSjs7QUFFQTs7QUFFQTtBQUNBOztBQUVBLDBDQUEwQyxRQUFROztBQUVsRDs7QUFFQTs7QUFFQSxzQ0FBc0MsU0FBUzs7QUFFL0M7O0FB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QUFROztBQUVSLHVCQUF1Qix3RUFBaUI7O0FBRXhDOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQSxpREFBaUQsWUFBWTs7QUFFN0Q7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQSxrQkFBa0IsbUVBQVk7O0FBRTlCLE9BQU87O0FBRVAsa0JBQWtCLDZEQUFNOztBQUV4QixPQUFPOztBQUVQLGtCQUFrQiwyREFBSTs7QUFFdEI7O0FBRUEsTUFBTTs7QUFFTjs7QUFFQSxrQkFBa0IsbUVBQVk7O0FBRTlCLE9BQU87O0FBRVAsa0JBQWtCLDZEQUFNOztBQUV4QixPQUFPOztBQUVQLGtCQUFrQiwyREFBSTs7QUFFdEI7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUEsSUFBSTs7QUFFSjs7QUFFQTs7QUFFQSx3QkFBd0IscUVBQWMsR0FBRyxrQ0FBa0M7O0FBRTNFLDhCQUE4QixxRUFBYzs7QUFFNUMsa0RBQWtELDZFQUFzQjs7QUFFeEU7O0FBRUEsZ0RBQWdELDZFQUFzQjtBQUN0RTs7QUFFQTs7QUFFQSxzQkFBc0IsNkRBQU07QUFDNUI7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUEsRUFBRTs7QUFFRjs7QUFFQSxDQUFDOztBQUVvQiIsImZpbGUiOiIuL25vZGVfbW9kdWxlcy90aHJlZS9leGFtcGxlcy9qc20vbG9hZGVycy9PQkpMb2FkZXIuanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuXHRCdWZmZXJHZW9tZXRyeSxcblx0RmlsZUxvYWRlcixcblx0RmxvYXQzMkJ1ZmZlckF0dHJpYnV0ZSxcblx0R3JvdXAsXG5cdExpbmVCYXNpY01hdGVyaWFsLFxuXHRMaW5lU2VnbWVudHMsXG5cdExvYWRlcixcblx0TWF0ZXJpYWwsXG5cdE1lc2gsXG5cdE1lc2hQaG9uZ01hdGVyaWFsLFxuXHRQb2ludHMsXG5cdFBvaW50c01hdGVyaWFsLFxuXHRWZWN0b3IzXG59IGZyb20gJy4uLy4uLy4uL2J1aWxkL3RocmVlLm1vZHVsZS5qcyc7XG5cbnZhciBPQkpMb2FkZXIgPSAoIGZ1bmN0aW9uICgpIHtcblxuXHQvLyBvIG9iamVjdF9uYW1lIHwgZyBncm91cF9uYW1lXG5cdHZhciBvYmplY3RfcGF0dGVybiA9IC9eW29nXVxccyooLispPy87XG5cdC8vIG10bGxpYiBmaWxlX3JlZmVyZW5jZVxuXHR2YXIgbWF0ZXJpYWxfbGlicmFyeV9wYXR0ZXJuID0gL15tdGxsaWIgLztcblx0Ly8gdXNlbXRsIG1hdGVyaWFsX25hbWVcblx0dmFyIG1hdGVyaWFsX3VzZV9wYXR0ZXJuID0gL151c2VtdGwgLztcblx0Ly8gdXNlbWFwIG1hcF9uYW1lXG5cdHZhciBtYXBfdXNlX3BhdHRlcm4gPSAvXnVzZW1hcCAvO1xuXG5cdHZhciB2QSA9IG5ldyBWZWN0b3IzKCk7XG5cdHZhciB2QiA9IG5ldyBWZWN0b3IzKCk7XG5cdHZhciB2QyA9IG5ldyBWZWN0b3IzKCk7XG5cblx0dmFyIGFiID0gbmV3IFZlY3RvcjMoKTtcblx0dmFyIGNiID0gbmV3IFZlY3RvcjMoKTtcblxuXHRmdW5jdGlvbiBQYXJzZXJTdGF0ZSgpIHtcblxuXHRcdHZhciBzdGF0ZSA9IHtcblx0XHRcdG9iamVjdHM6IFtdLFxuXHRcdFx0b2JqZWN0OiB7fSxcblxuXHRcdFx0dmVydGljZXM6IFtdLFxuXHRcdFx0bm9ybWFsczogW10sXG5cdFx0XHRjb2xvcnM6IFtdLFxuXHRcdFx0dXZzOiBbXSxcblxuXHRcdFx0bWF0ZXJpYWxzOiB7fSxcblx0XHRcdG1hdGVyaWFsTGlicmFyaWVzOiBbXSxcblxuXHRcdFx0c3RhcnRPYmplY3Q6IGZ1bmN0aW9uICggbmFtZSwgZnJvbURlY2xhcmF0aW9uICkge1xuXG5cdFx0XHRcdC8vIElmIHRoZSBjdXJyZW50IG9iamVjdCAoaW5pdGlhbCBmcm9tIHJlc2V0KSBpcyBub3QgZnJvbSBhIGcvbyBkZWNsYXJhdGlvbiBpbiB0aGUgcGFyc2VkXG5cdFx0XHRcdC8vIGZpbGUuIFdlIG5lZWQgdG8gdXNlIGl0IGZvciB0aGUgZmlyc3QgcGFyc2VkIGcvbyB0byBrZWVwIHRoaW5ncyBpbiBzeW5jLlxuXHRcdFx0XHRpZiAoIHRoaXMub2JqZWN0ICYmIHRoaXMub2JqZWN0LmZyb21EZWNsYXJhdGlvbiA9PT0gZmFsc2UgKSB7XG5cblx0XHRcdFx0XHR0aGlzLm9iamVjdC5uYW1lID0gbmFtZTtcblx0XHRcdFx0XHR0aGlzLm9iamVjdC5mcm9tRGVjbGFyYXRpb24gPSAoIGZyb21EZWNsYXJhdGlvbiAhPT0gZmFsc2UgKTtcblx0XHRcdFx0XHRyZXR1cm47XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdHZhciBwcmV2aW91c01hdGVyaWFsID0gKCB0aGlzLm9iamVjdCAmJiB0eXBlb2YgdGhpcy5vYmplY3QuY3VycmVudE1hdGVyaWFsID09PSAnZnVuY3Rpb24nID8gdGhpcy5vYmplY3QuY3VycmVudE1hdGVyaWFsKCkgOiB1bmRlZmluZWQgKTtcblxuXHRcdFx0XHRpZiAoIHRoaXMub2JqZWN0ICYmIHR5cGVvZiB0aGlzLm9iamVjdC5fZmluYWxpemUgPT09ICdmdW5jdGlvbicgKSB7XG5cblx0XHRcdFx0XHR0aGlzLm9iamVjdC5fZmluYWxpemUoIHRydWUgKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdFx0dGhpcy5vYmplY3QgPSB7XG5cdFx0XHRcdFx0bmFtZTogbmFtZSB8fCAnJyxcblx0XHRcdFx0XHRmcm9tRGVjbGFyYXRpb246ICggZnJvbURlY2xhcmF0aW9uICE9PSBmYWxzZSApLFxuXG5cdFx0XHRcdFx0Z2VvbWV0cnk6IHtcblx0XHRcdFx0XHRcdHZlcnRpY2VzOiBbXSxcblx0XHRcdFx0XHRcdG5vcm1hbHM6IFtdLFxuXHRcdFx0XHRcdFx0Y29sb3JzOiBbXSxcblx0XHRcdFx0XHRcdHV2czogW10sXG5cdFx0XHRcdFx0XHRoYXNVVkluZGljZXM6IGZhbHNlXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRtYXRlcmlhbHM6IFtdLFxuXHRcdFx0XHRcdHNtb290aDogdHJ1ZSxcblxuXHRcdFx0XHRcdHN0YXJ0TWF0ZXJpYWw6IGZ1bmN0aW9uICggbmFtZSwgbGlicmFyaWVzICkge1xuXG5cdFx0XHRcdFx0XHR2YXIgcHJldmlvdXMgPSB0aGlzLl9maW5hbGl6ZSggZmFsc2UgKTtcblxuXHRcdFx0XHRcdFx0Ly8gTmV3IHVzZW10bCBkZWNsYXJhdGlvbiBvdmVyd3JpdGVzIGFuIGluaGVyaXRlZCBtYXRlcmlhbCwgZXhjZXB0IGlmIGZhY2VzIHdlcmUgZGVjbGFyZWRcblx0XHRcdFx0XHRcdC8vIGFmdGVyIHRoZSBtYXRlcmlhbCwgdGhlbiBpdCBtdXN0IGJlIHByZXNlcnZlZCBmb3IgcHJvcGVyIE11bHRpTWF0ZXJpYWwgY29udGludWF0aW9uLlxuXHRcdFx0XHRcdFx0aWYgKCBwcmV2aW91cyAmJiAoIHByZXZpb3VzLmluaGVyaXRlZCB8fCBwcmV2aW91cy5ncm91cENvdW50IDw9IDAgKSApIHtcblxuXHRcdFx0XHRcdFx0XHR0aGlzLm1hdGVyaWFscy5zcGxpY2UoIHByZXZpb3VzLmluZGV4LCAxICk7XG5cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0dmFyIG1hdGVyaWFsID0ge1xuXHRcdFx0XHRcdFx0XHRpbmRleDogdGhpcy5tYXRlcmlhbHMubGVuZ3RoLFxuXHRcdFx0XHRcdFx0XHRuYW1lOiBuYW1lIHx8ICcnLFxuXHRcdFx0XHRcdFx0XHRtdGxsaWI6ICggQXJyYXkuaXNBcnJheSggbGlicmFyaWVzICkgJiYgbGlicmFyaWVzLmxlbmd0aCA+IDAgPyBsaWJyYXJpZXNbIGxpYnJhcmllcy5sZW5ndGggLSAxIF0gOiAnJyApLFxuXHRcdFx0XHRcdFx0XHRzbW9vdGg6ICggcHJldmlvdXMgIT09IHVuZGVmaW5lZCA/IHByZXZpb3VzLnNtb290aCA6IHRoaXMuc21vb3RoICksXG5cdFx0XHRcdFx0XHRcdGdyb3VwU3RhcnQ6ICggcHJldmlvdXMgIT09IHVuZGVmaW5lZCA/IHByZXZpb3VzLmdyb3VwRW5kIDogMCApLFxuXHRcdFx0XHRcdFx0XHRncm91cEVuZDogLSAxLFxuXHRcdFx0XHRcdFx0XHRncm91cENvdW50OiAtIDEsXG5cdFx0XHRcdFx0XHRcdGluaGVyaXRlZDogZmFsc2UsXG5cblx0XHRcdFx0XHRcdFx0Y2xvbmU6IGZ1bmN0aW9uICggaW5kZXggKSB7XG5cblx0XHRcdFx0XHRcdFx0XHR2YXIgY2xvbmVkID0ge1xuXHRcdFx0XHRcdFx0XHRcdFx0aW5kZXg6ICggdHlwZW9mIGluZGV4ID09PSAnbnVtYmVyJyA/IGluZGV4IDogdGhpcy5pbmRleCApLFxuXHRcdFx0XHRcdFx0XHRcdFx0bmFtZTogdGhpcy5uYW1lLFxuXHRcdFx0XHRcdFx0XHRcdFx0bXRsbGliOiB0aGlzLm10bGxpYixcblx0XHRcdFx0XHRcdFx0XHRcdHNtb290aDogdGhpcy5zbW9vdGgsXG5cdFx0XHRcdFx0XHRcdFx0XHRncm91cFN0YXJ0OiAwLFxuXHRcdFx0XHRcdFx0XHRcdFx0Z3JvdXBFbmQ6IC0gMSxcblx0XHRcdFx0XHRcdFx0XHRcdGdyb3VwQ291bnQ6IC0gMSxcblx0XHRcdFx0XHRcdFx0XHRcdGluaGVyaXRlZDogZmFsc2Vcblx0XHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0XHRcdGNsb25lZC5jbG9uZSA9IHRoaXMuY2xvbmUuYmluZCggY2xvbmVkICk7XG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuIGNsb25lZDtcblxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9O1xuXG5cdFx0XHRcdFx0XHR0aGlzLm1hdGVyaWFscy5wdXNoKCBtYXRlcmlhbCApO1xuXG5cdFx0XHRcdFx0XHRyZXR1cm4gbWF0ZXJpYWw7XG5cblx0XHRcdFx0XHR9LFxuXG5cdFx0XHRcdFx0Y3VycmVudE1hdGVyaWFsOiBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdFx0XHRcdGlmICggdGhpcy5tYXRlcmlhbHMubGVuZ3RoID4gMCApIHtcblxuXHRcdFx0XHRcdFx0XHRyZXR1cm4gdGhpcy5tYXRlcmlhbHNbIHRoaXMubWF0ZXJpYWxzLmxlbmd0aCAtIDEgXTtcblxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRyZXR1cm4gdW5kZWZpbmVkO1xuXG5cdFx0XHRcdFx0fSxcblxuXHRcdFx0XHRcdF9maW5hbGl6ZTogZnVuY3Rpb24gKCBlbmQgKSB7XG5cblx0XHRcdFx0XHRcdHZhciBsYXN0TXVsdGlNYXRlcmlhbCA9IHRoaXMuY3VycmVudE1hdGVyaWFsKCk7XG5cdFx0XHRcdFx0XHRpZiAoIGxhc3RNdWx0aU1hdGVyaWFsICYmIGxhc3RNdWx0aU1hdGVyaWFsLmdyb3VwRW5kID09PSAtIDEgKSB7XG5cblx0XHRcdFx0XHRcdFx0bGFzdE11bHRpTWF0ZXJpYWwuZ3JvdXBFbmQgPSB0aGlzLmdlb21ldHJ5LnZlcnRpY2VzLmxlbmd0aCAvIDM7XG5cdFx0XHRcdFx0XHRcdGxhc3RNdWx0aU1hdGVyaWFsLmdyb3VwQ291bnQgPSBsYXN0TXVsdGlNYXRlcmlhbC5ncm91cEVuZCAtIGxhc3RNdWx0aU1hdGVyaWFsLmdyb3VwU3RhcnQ7XG5cdFx0XHRcdFx0XHRcdGxhc3RNdWx0aU1hdGVyaWFsLmluaGVyaXRlZCA9IGZhbHNlO1xuXG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdC8vIElnbm9yZSBvYmplY3RzIHRhaWwgbWF0ZXJpYWxzIGlmIG5vIGZhY2UgZGVjbGFyYXRpb25zIGZvbGxvd2VkIHRoZW0gYmVmb3JlIGEgbmV3IG8vZyBzdGFydGVkLlxuXHRcdFx0XHRcdFx0aWYgKCBlbmQgJiYgdGhpcy5tYXRlcmlhbHMubGVuZ3RoID4gMSApIHtcblxuXHRcdFx0XHRcdFx0XHRmb3IgKCB2YXIgbWkgPSB0aGlzLm1hdGVyaWFscy5sZW5ndGggLSAxOyBtaSA+PSAwOyBtaSAtLSApIHtcblxuXHRcdFx0XHRcdFx0XHRcdGlmICggdGhpcy5tYXRlcmlhbHNbIG1pIF0uZ3JvdXBDb3VudCA8PSAwICkge1xuXG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLm1hdGVyaWFscy5zcGxpY2UoIG1pLCAxICk7XG5cblx0XHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdC8vIEd1YXJhbnRlZSBhdCBsZWFzdCBvbmUgZW1wdHkgbWF0ZXJpYWwsIHRoaXMgbWFrZXMgdGhlIGNyZWF0aW9uIGxhdGVyIG1vcmUgc3RyYWlnaHQgZm9yd2FyZC5cblx0XHRcdFx0XHRcdGlmICggZW5kICYmIHRoaXMubWF0ZXJpYWxzLmxlbmd0aCA9PT0gMCApIHtcblxuXHRcdFx0XHRcdFx0XHR0aGlzLm1hdGVyaWFscy5wdXNoKCB7XG5cdFx0XHRcdFx0XHRcdFx0bmFtZTogJycsXG5cdFx0XHRcdFx0XHRcdFx0c21vb3RoOiB0aGlzLnNtb290aFxuXHRcdFx0XHRcdFx0XHR9ICk7XG5cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0cmV0dXJuIGxhc3RNdWx0aU1hdGVyaWFsO1xuXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9O1xuXG5cdFx0XHRcdC8vIEluaGVyaXQgcHJldmlvdXMgb2JqZWN0cyBtYXRlcmlhbC5cblx0XHRcdFx0Ly8gU3BlYyB0ZWxscyB1cyB0aGF0IGEgZGVjbGFyZWQgbWF0ZXJpYWwgbXVzdCBiZSBzZXQgdG8gYWxsIG9iamVjdHMgdW50aWwgYSBuZXcgbWF0ZXJpYWwgaXMgZGVjbGFyZWQuXG5cdFx0XHRcdC8vIElmIGEgdXNlbXRsIGRlY2xhcmF0aW9uIGlzIGVuY291bnRlcmVkIHdoaWxlIHRoaXMgbmV3IG9iamVjdCBpcyBiZWluZyBwYXJzZWQsIGl0IHdpbGxcblx0XHRcdFx0Ly8gb3ZlcndyaXRlIHRoZSBpbmhlcml0ZWQgbWF0ZXJpYWwuIEV4Y2VwdGlvbiBiZWluZyB0aGF0IHRoZXJlIHdhcyBhbHJlYWR5IGZhY2UgZGVjbGFyYXRpb25zXG5cdFx0XHRcdC8vIHRvIHRoZSBpbmhlcml0ZWQgbWF0ZXJpYWwsIHRoZW4gaXQgd2lsbCBiZSBwcmVzZXJ2ZWQgZm9yIHByb3BlciBNdWx0aU1hdGVyaWFsIGNvbnRpbnVhdGlvbi5cblxuXHRcdFx0XHRpZiAoIHByZXZpb3VzTWF0ZXJpYWwgJiYgcHJldmlvdXNNYXRlcmlhbC5uYW1lICYmIHR5cGVvZiBwcmV2aW91c01hdGVyaWFsLmNsb25lID09PSAnZnVuY3Rpb24nICkge1xuXG5cdFx0XHRcdFx0dmFyIGRlY2xhcmVkID0gcHJldmlvdXNNYXRlcmlhbC5jbG9uZSggMCApO1xuXHRcdFx0XHRcdGRlY2xhcmVkLmluaGVyaXRlZCA9IHRydWU7XG5cdFx0XHRcdFx0dGhpcy5vYmplY3QubWF0ZXJpYWxzLnB1c2goIGRlY2xhcmVkICk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdHRoaXMub2JqZWN0cy5wdXNoKCB0aGlzLm9iamVjdCApO1xuXG5cdFx0XHR9LFxuXG5cdFx0XHRmaW5hbGl6ZTogZnVuY3Rpb24gKCkge1xuXG5cdFx0XHRcdGlmICggdGhpcy5vYmplY3QgJiYgdHlwZW9mIHRoaXMub2JqZWN0Ll9maW5hbGl6ZSA9PT0gJ2Z1bmN0aW9uJyApIHtcblxuXHRcdFx0XHRcdHRoaXMub2JqZWN0Ll9maW5hbGl6ZSggdHJ1ZSApO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fSxcblxuXHRcdFx0cGFyc2VWZXJ0ZXhJbmRleDogZnVuY3Rpb24gKCB2YWx1ZSwgbGVuICkge1xuXG5cdFx0XHRcdHZhciBpbmRleCA9IHBhcnNlSW50KCB2YWx1ZSwgMTAgKTtcblx0XHRcdFx0cmV0dXJuICggaW5kZXggPj0gMCA/IGluZGV4IC0gMSA6IGluZGV4ICsgbGVuIC8gMyApICogMztcblxuXHRcdFx0fSxcblxuXHRcdFx0cGFyc2VOb3JtYWxJbmRleDogZnVuY3Rpb24gKCB2YWx1ZSwgbGVuICkge1xuXG5cdFx0XHRcdHZhciBpbmRleCA9IHBhcnNlSW50KCB2YWx1ZSwgMTAgKTtcblx0XHRcdFx0cmV0dXJuICggaW5kZXggPj0gMCA/IGluZGV4IC0gMSA6IGluZGV4ICsgbGVuIC8gMyApICogMztcblxuXHRcdFx0fSxcblxuXHRcdFx0cGFyc2VVVkluZGV4OiBmdW5jdGlvbiAoIHZhbHVlLCBsZW4gKSB7XG5cblx0XHRcdFx0dmFyIGluZGV4ID0gcGFyc2VJbnQoIHZhbHVlLCAxMCApO1xuXHRcdFx0XHRyZXR1cm4gKCBpbmRleCA+PSAwID8gaW5kZXggLSAxIDogaW5kZXggKyBsZW4gLyAyICkgKiAyO1xuXG5cdFx0XHR9LFxuXG5cdFx0XHRhZGRWZXJ0ZXg6IGZ1bmN0aW9uICggYSwgYiwgYyApIHtcblxuXHRcdFx0XHR2YXIgc3JjID0gdGhpcy52ZXJ0aWNlcztcblx0XHRcdFx0dmFyIGRzdCA9IHRoaXMub2JqZWN0Lmdlb21ldHJ5LnZlcnRpY2VzO1xuXG5cdFx0XHRcdGRzdC5wdXNoKCBzcmNbIGEgKyAwIF0sIHNyY1sgYSArIDEgXSwgc3JjWyBhICsgMiBdICk7XG5cdFx0XHRcdGRzdC5wdXNoKCBzcmNbIGIgKyAwIF0sIHNyY1sgYiArIDEgXSwgc3JjWyBiICsgMiBdICk7XG5cdFx0XHRcdGRzdC5wdXNoKCBzcmNbIGMgKyAwIF0sIHNyY1sgYyArIDEgXSwgc3JjWyBjICsgMiBdICk7XG5cblx0XHRcdH0sXG5cblx0XHRcdGFkZFZlcnRleFBvaW50OiBmdW5jdGlvbiAoIGEgKSB7XG5cblx0XHRcdFx0dmFyIHNyYyA9IHRoaXMudmVydGljZXM7XG5cdFx0XHRcdHZhciBkc3QgPSB0aGlzLm9iamVjdC5nZW9tZXRyeS52ZXJ0aWNlcztcblxuXHRcdFx0XHRkc3QucHVzaCggc3JjWyBhICsgMCBdLCBzcmNbIGEgKyAxIF0sIHNyY1sgYSArIDIgXSApO1xuXG5cdFx0XHR9LFxuXG5cdFx0XHRhZGRWZXJ0ZXhMaW5lOiBmdW5jdGlvbiAoIGEgKSB7XG5cblx0XHRcdFx0dmFyIHNyYyA9IHRoaXMudmVydGljZXM7XG5cdFx0XHRcdHZhciBkc3QgPSB0aGlzLm9iamVjdC5nZW9tZXRyeS52ZXJ0aWNlcztcblxuXHRcdFx0XHRkc3QucHVzaCggc3JjWyBhICsgMCBdLCBzcmNbIGEgKyAxIF0sIHNyY1sgYSArIDIgXSApO1xuXG5cdFx0XHR9LFxuXG5cdFx0XHRhZGROb3JtYWw6IGZ1bmN0aW9uICggYSwgYiwgYyApIHtcblxuXHRcdFx0XHR2YXIgc3JjID0gdGhpcy5ub3JtYWxzO1xuXHRcdFx0XHR2YXIgZHN0ID0gdGhpcy5vYmplY3QuZ2VvbWV0cnkubm9ybWFscztcblxuXHRcdFx0XHRkc3QucHVzaCggc3JjWyBhICsgMCBdLCBzcmNbIGEgKyAxIF0sIHNyY1sgYSArIDIgXSApO1xuXHRcdFx0XHRkc3QucHVzaCggc3JjWyBiICsgMCBdLCBzcmNbIGIgKyAxIF0sIHNyY1sgYiArIDIgXSApO1xuXHRcdFx0XHRkc3QucHVzaCggc3JjWyBjICsgMCBdLCBzcmNbIGMgKyAxIF0sIHNyY1sgYyArIDIgXSApO1xuXG5cdFx0XHR9LFxuXG5cdFx0XHRhZGRGYWNlTm9ybWFsOiBmdW5jdGlvbiAoIGEsIGIsIGMgKSB7XG5cblx0XHRcdFx0dmFyIHNyYyA9IHRoaXMudmVydGljZXM7XG5cdFx0XHRcdHZhciBkc3QgPSB0aGlzLm9iamVjdC5nZW9tZXRyeS5ub3JtYWxzO1xuXG5cdFx0XHRcdHZBLmZyb21BcnJheSggc3JjLCBhICk7XG5cdFx0XHRcdHZCLmZyb21BcnJheSggc3JjLCBiICk7XG5cdFx0XHRcdHZDLmZyb21BcnJheSggc3JjLCBjICk7XG5cblx0XHRcdFx0Y2Iuc3ViVmVjdG9ycyggdkMsIHZCICk7XG5cdFx0XHRcdGFiLnN1YlZlY3RvcnMoIHZBLCB2QiApO1xuXHRcdFx0XHRjYi5jcm9zcyggYWIgKTtcblxuXHRcdFx0XHRjYi5ub3JtYWxpemUoKTtcblxuXHRcdFx0XHRkc3QucHVzaCggY2IueCwgY2IueSwgY2IueiApO1xuXHRcdFx0XHRkc3QucHVzaCggY2IueCwgY2IueSwgY2IueiApO1xuXHRcdFx0XHRkc3QucHVzaCggY2IueCwgY2IueSwgY2IueiApO1xuXG5cdFx0XHR9LFxuXG5cdFx0XHRhZGRDb2xvcjogZnVuY3Rpb24gKCBhLCBiLCBjICkge1xuXG5cdFx0XHRcdHZhciBzcmMgPSB0aGlzLmNvbG9ycztcblx0XHRcdFx0dmFyIGRzdCA9IHRoaXMub2JqZWN0Lmdlb21ldHJ5LmNvbG9ycztcblxuXHRcdFx0XHRpZiAoIHNyY1sgYSBdICE9PSB1bmRlZmluZWQgKSBkc3QucHVzaCggc3JjWyBhICsgMCBdLCBzcmNbIGEgKyAxIF0sIHNyY1sgYSArIDIgXSApO1xuXHRcdFx0XHRpZiAoIHNyY1sgYiBdICE9PSB1bmRlZmluZWQgKSBkc3QucHVzaCggc3JjWyBiICsgMCBdLCBzcmNbIGIgKyAxIF0sIHNyY1sgYiArIDIgXSApO1xuXHRcdFx0XHRpZiAoIHNyY1sgYyBdICE9PSB1bmRlZmluZWQgKSBkc3QucHVzaCggc3JjWyBjICsgMCBdLCBzcmNbIGMgKyAxIF0sIHNyY1sgYyArIDIgXSApO1xuXG5cdFx0XHR9LFxuXG5cdFx0XHRhZGRVVjogZnVuY3Rpb24gKCBhLCBiLCBjICkge1xuXG5cdFx0XHRcdHZhciBzcmMgPSB0aGlzLnV2cztcblx0XHRcdFx0dmFyIGRzdCA9IHRoaXMub2JqZWN0Lmdlb21ldHJ5LnV2cztcblxuXHRcdFx0XHRkc3QucHVzaCggc3JjWyBhICsgMCBdLCBzcmNbIGEgKyAxIF0gKTtcblx0XHRcdFx0ZHN0LnB1c2goIHNyY1sgYiArIDAgXSwgc3JjWyBiICsgMSBdICk7XG5cdFx0XHRcdGRzdC5wdXNoKCBzcmNbIGMgKyAwIF0sIHNyY1sgYyArIDEgXSApO1xuXG5cdFx0XHR9LFxuXG5cdFx0XHRhZGREZWZhdWx0VVY6IGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0XHR2YXIgZHN0ID0gdGhpcy5vYmplY3QuZ2VvbWV0cnkudXZzO1xuXG5cdFx0XHRcdGRzdC5wdXNoKCAwLCAwICk7XG5cdFx0XHRcdGRzdC5wdXNoKCAwLCAwICk7XG5cdFx0XHRcdGRzdC5wdXNoKCAwLCAwICk7XG5cblx0XHRcdH0sXG5cblx0XHRcdGFkZFVWTGluZTogZnVuY3Rpb24gKCBhICkge1xuXG5cdFx0XHRcdHZhciBzcmMgPSB0aGlzLnV2cztcblx0XHRcdFx0dmFyIGRzdCA9IHRoaXMub2JqZWN0Lmdlb21ldHJ5LnV2cztcblxuXHRcdFx0XHRkc3QucHVzaCggc3JjWyBhICsgMCBdLCBzcmNbIGEgKyAxIF0gKTtcblxuXHRcdFx0fSxcblxuXHRcdFx0YWRkRmFjZTogZnVuY3Rpb24gKCBhLCBiLCBjLCB1YSwgdWIsIHVjLCBuYSwgbmIsIG5jICkge1xuXG5cdFx0XHRcdHZhciB2TGVuID0gdGhpcy52ZXJ0aWNlcy5sZW5ndGg7XG5cblx0XHRcdFx0dmFyIGlhID0gdGhpcy5wYXJzZVZlcnRleEluZGV4KCBhLCB2TGVuICk7XG5cdFx0XHRcdHZhciBpYiA9IHRoaXMucGFyc2VWZXJ0ZXhJbmRleCggYiwgdkxlbiApO1xuXHRcdFx0XHR2YXIgaWMgPSB0aGlzLnBhcnNlVmVydGV4SW5kZXgoIGMsIHZMZW4gKTtcblxuXHRcdFx0XHR0aGlzLmFkZFZlcnRleCggaWEsIGliLCBpYyApO1xuXHRcdFx0XHR0aGlzLmFkZENvbG9yKCBpYSwgaWIsIGljICk7XG5cblx0XHRcdFx0Ly8gbm9ybWFsc1xuXG5cdFx0XHRcdGlmICggbmEgIT09IHVuZGVmaW5lZCAmJiBuYSAhPT0gJycgKSB7XG5cblx0XHRcdFx0XHR2YXIgbkxlbiA9IHRoaXMubm9ybWFscy5sZW5ndGg7XG5cblx0XHRcdFx0XHRpYSA9IHRoaXMucGFyc2VOb3JtYWxJbmRleCggbmEsIG5MZW4gKTtcblx0XHRcdFx0XHRpYiA9IHRoaXMucGFyc2VOb3JtYWxJbmRleCggbmIsIG5MZW4gKTtcblx0XHRcdFx0XHRpYyA9IHRoaXMucGFyc2VOb3JtYWxJbmRleCggbmMsIG5MZW4gKTtcblxuXHRcdFx0XHRcdHRoaXMuYWRkTm9ybWFsKCBpYSwgaWIsIGljICk7XG5cblx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdHRoaXMuYWRkRmFjZU5vcm1hbCggaWEsIGliLCBpYyApO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyB1dnNcblxuXHRcdFx0XHRpZiAoIHVhICE9PSB1bmRlZmluZWQgJiYgdWEgIT09ICcnICkge1xuXG5cdFx0XHRcdFx0dmFyIHV2TGVuID0gdGhpcy51dnMubGVuZ3RoO1xuXG5cdFx0XHRcdFx0aWEgPSB0aGlzLnBhcnNlVVZJbmRleCggdWEsIHV2TGVuICk7XG5cdFx0XHRcdFx0aWIgPSB0aGlzLnBhcnNlVVZJbmRleCggdWIsIHV2TGVuICk7XG5cdFx0XHRcdFx0aWMgPSB0aGlzLnBhcnNlVVZJbmRleCggdWMsIHV2TGVuICk7XG5cblx0XHRcdFx0XHR0aGlzLmFkZFVWKCBpYSwgaWIsIGljICk7XG5cblx0XHRcdFx0XHR0aGlzLm9iamVjdC5nZW9tZXRyeS5oYXNVVkluZGljZXMgPSB0cnVlO1xuXG5cdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHQvLyBhZGQgcGxhY2Vob2xkZXIgdmFsdWVzIChmb3IgaW5jb25zaXN0ZW50IGZhY2UgZGVmaW5pdGlvbnMpXG5cblx0XHRcdFx0XHR0aGlzLmFkZERlZmF1bHRVVigpO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fSxcblxuXHRcdFx0YWRkUG9pbnRHZW9tZXRyeTogZnVuY3Rpb24gKCB2ZXJ0aWNlcyApIHtcblxuXHRcdFx0XHR0aGlzLm9iamVjdC5nZW9tZXRyeS50eXBlID0gJ1BvaW50cyc7XG5cblx0XHRcdFx0dmFyIHZMZW4gPSB0aGlzLnZlcnRpY2VzLmxlbmd0aDtcblxuXHRcdFx0XHRmb3IgKCB2YXIgdmkgPSAwLCBsID0gdmVydGljZXMubGVuZ3RoOyB2aSA8IGw7IHZpICsrICkge1xuXG5cdFx0XHRcdFx0dmFyIGluZGV4ID0gdGhpcy5wYXJzZVZlcnRleEluZGV4KCB2ZXJ0aWNlc1sgdmkgXSwgdkxlbiApO1xuXG5cdFx0XHRcdFx0dGhpcy5hZGRWZXJ0ZXhQb2ludCggaW5kZXggKTtcblx0XHRcdFx0XHR0aGlzLmFkZENvbG9yKCBpbmRleCApO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fSxcblxuXHRcdFx0YWRkTGluZUdlb21ldHJ5OiBmdW5jdGlvbiAoIHZlcnRpY2VzLCB1dnMgKSB7XG5cblx0XHRcdFx0dGhpcy5vYmplY3QuZ2VvbWV0cnkudHlwZSA9ICdMaW5lJztcblxuXHRcdFx0XHR2YXIgdkxlbiA9IHRoaXMudmVydGljZXMubGVuZ3RoO1xuXHRcdFx0XHR2YXIgdXZMZW4gPSB0aGlzLnV2cy5sZW5ndGg7XG5cblx0XHRcdFx0Zm9yICggdmFyIHZpID0gMCwgbCA9IHZlcnRpY2VzLmxlbmd0aDsgdmkgPCBsOyB2aSArKyApIHtcblxuXHRcdFx0XHRcdHRoaXMuYWRkVmVydGV4TGluZSggdGhpcy5wYXJzZVZlcnRleEluZGV4KCB2ZXJ0aWNlc1sgdmkgXSwgdkxlbiApICk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdGZvciAoIHZhciB1dmkgPSAwLCBsID0gdXZzLmxlbmd0aDsgdXZpIDwgbDsgdXZpICsrICkge1xuXG5cdFx0XHRcdFx0dGhpcy5hZGRVVkxpbmUoIHRoaXMucGFyc2VVVkluZGV4KCB1dnNbIHV2aSBdLCB1dkxlbiApICk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9XG5cblx0XHR9O1xuXG5cdFx0c3RhdGUuc3RhcnRPYmplY3QoICcnLCBmYWxzZSApO1xuXG5cdFx0cmV0dXJuIHN0YXRlO1xuXG5cdH1cblxuXHQvL1xuXG5cdGZ1bmN0aW9uIE9CSkxvYWRlciggbWFuYWdlciApIHtcblxuXHRcdExvYWRlci5jYWxsKCB0aGlzLCBtYW5hZ2VyICk7XG5cblx0XHR0aGlzLm1hdGVyaWFscyA9IG51bGw7XG5cblx0fVxuXG5cdE9CSkxvYWRlci5wcm90b3R5cGUgPSBPYmplY3QuYXNzaWduKCBPYmplY3QuY3JlYXRlKCBMb2FkZXIucHJvdG90eXBlICksIHtcblxuXHRcdGNvbnN0cnVjdG9yOiBPQkpMb2FkZXIsXG5cblx0XHRsb2FkOiBmdW5jdGlvbiAoIHVybCwgb25Mb2FkLCBvblByb2dyZXNzLCBvbkVycm9yICkge1xuXG5cdFx0XHR2YXIgc2NvcGUgPSB0aGlzO1xuXG5cdFx0XHR2YXIgbG9hZGVyID0gbmV3IEZpbGVMb2FkZXIoIHRoaXMubWFuYWdlciApO1xuXHRcdFx0bG9hZGVyLnNldFBhdGgoIHRoaXMucGF0aCApO1xuXHRcdFx0bG9hZGVyLnNldFJlcXVlc3RIZWFkZXIoIHRoaXMucmVxdWVzdEhlYWRlciApO1xuXHRcdFx0bG9hZGVyLnNldFdpdGhDcmVkZW50aWFscyggdGhpcy53aXRoQ3JlZGVudGlhbHMgKTtcblx0XHRcdGxvYWRlci5sb2FkKCB1cmwsIGZ1bmN0aW9uICggdGV4dCApIHtcblxuXHRcdFx0XHR0cnkge1xuXG5cdFx0XHRcdFx0b25Mb2FkKCBzY29wZS5wYXJzZSggdGV4dCApICk7XG5cblx0XHRcdFx0fSBjYXRjaCAoIGUgKSB7XG5cblx0XHRcdFx0XHRpZiAoIG9uRXJyb3IgKSB7XG5cblx0XHRcdFx0XHRcdG9uRXJyb3IoIGUgKTtcblxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoIGUgKTtcblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdHNjb3BlLm1hbmFnZXIuaXRlbUVycm9yKCB1cmwgKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdH0sIG9uUHJvZ3Jlc3MsIG9uRXJyb3IgKTtcblxuXHRcdH0sXG5cblx0XHRzZXRNYXRlcmlhbHM6IGZ1bmN0aW9uICggbWF0ZXJpYWxzICkge1xuXG5cdFx0XHR0aGlzLm1hdGVyaWFscyA9IG1hdGVyaWFscztcblxuXHRcdFx0cmV0dXJuIHRoaXM7XG5cblx0XHR9LFxuXG5cdFx0cGFyc2U6IGZ1bmN0aW9uICggdGV4dCApIHtcblxuXHRcdFx0dmFyIHN0YXRlID0gbmV3IFBhcnNlclN0YXRlKCk7XG5cblx0XHRcdGlmICggdGV4dC5pbmRleE9mKCAnXFxyXFxuJyApICE9PSAtIDEgKSB7XG5cblx0XHRcdFx0Ly8gVGhpcyBpcyBmYXN0ZXIgdGhhbiBTdHJpbmcuc3BsaXQgd2l0aCByZWdleCB0aGF0IHNwbGl0cyBvbiBib3RoXG5cdFx0XHRcdHRleHQgPSB0ZXh0LnJlcGxhY2UoIC9cXHJcXG4vZywgJ1xcbicgKTtcblxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIHRleHQuaW5kZXhPZiggJ1xcXFxcXG4nICkgIT09IC0gMSApIHtcblxuXHRcdFx0XHQvLyBqb2luIGxpbmVzIHNlcGFyYXRlZCBieSBhIGxpbmUgY29udGludWF0aW9uIGNoYXJhY3RlciAoXFwpXG5cdFx0XHRcdHRleHQgPSB0ZXh0LnJlcGxhY2UoIC9cXFxcXFxuL2csICcnICk7XG5cblx0XHRcdH1cblxuXHRcdFx0dmFyIGxpbmVzID0gdGV4dC5zcGxpdCggJ1xcbicgKTtcblx0XHRcdHZhciBsaW5lID0gJycsIGxpbmVGaXJzdENoYXIgPSAnJztcblx0XHRcdHZhciBsaW5lTGVuZ3RoID0gMDtcblx0XHRcdHZhciByZXN1bHQgPSBbXTtcblxuXHRcdFx0Ly8gRmFzdGVyIHRvIGp1c3QgdHJpbSBsZWZ0IHNpZGUgb2YgdGhlIGxpbmUuIFVzZSBpZiBhdmFpbGFibGUuXG5cdFx0XHR2YXIgdHJpbUxlZnQgPSAoIHR5cGVvZiAnJy50cmltTGVmdCA9PT0gJ2Z1bmN0aW9uJyApO1xuXG5cdFx0XHRmb3IgKCB2YXIgaSA9IDAsIGwgPSBsaW5lcy5sZW5ndGg7IGkgPCBsOyBpICsrICkge1xuXG5cdFx0XHRcdGxpbmUgPSBsaW5lc1sgaSBdO1xuXG5cdFx0XHRcdGxpbmUgPSB0cmltTGVmdCA/IGxpbmUudHJpbUxlZnQoKSA6IGxpbmUudHJpbSgpO1xuXG5cdFx0XHRcdGxpbmVMZW5ndGggPSBsaW5lLmxlbmd0aDtcblxuXHRcdFx0XHRpZiAoIGxpbmVMZW5ndGggPT09IDAgKSBjb250aW51ZTtcblxuXHRcdFx0XHRsaW5lRmlyc3RDaGFyID0gbGluZS5jaGFyQXQoIDAgKTtcblxuXHRcdFx0XHQvLyBAdG9kbyBpbnZva2UgcGFzc2VkIGluIGhhbmRsZXIgaWYgYW55XG5cdFx0XHRcdGlmICggbGluZUZpcnN0Q2hhciA9PT0gJyMnICkgY29udGludWU7XG5cblx0XHRcdFx0aWYgKCBsaW5lRmlyc3RDaGFyID09PSAndicgKSB7XG5cblx0XHRcdFx0XHR2YXIgZGF0YSA9IGxpbmUuc3BsaXQoIC9cXHMrLyApO1xuXG5cdFx0XHRcdFx0c3dpdGNoICggZGF0YVsgMCBdICkge1xuXG5cdFx0XHRcdFx0XHRjYXNlICd2Jzpcblx0XHRcdFx0XHRcdFx0c3RhdGUudmVydGljZXMucHVzaChcblx0XHRcdFx0XHRcdFx0XHRwYXJzZUZsb2F0KCBkYXRhWyAxIF0gKSxcblx0XHRcdFx0XHRcdFx0XHRwYXJzZUZsb2F0KCBkYXRhWyAyIF0gKSxcblx0XHRcdFx0XHRcdFx0XHRwYXJzZUZsb2F0KCBkYXRhWyAzIF0gKVxuXHRcdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0XHRpZiAoIGRhdGEubGVuZ3RoID49IDcgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHRzdGF0ZS5jb2xvcnMucHVzaChcblx0XHRcdFx0XHRcdFx0XHRcdHBhcnNlRmxvYXQoIGRhdGFbIDQgXSApLFxuXHRcdFx0XHRcdFx0XHRcdFx0cGFyc2VGbG9hdCggZGF0YVsgNSBdICksXG5cdFx0XHRcdFx0XHRcdFx0XHRwYXJzZUZsb2F0KCBkYXRhWyA2IF0gKVxuXG5cdFx0XHRcdFx0XHRcdFx0KTtcblxuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0XHRcdFx0Ly8gaWYgbm8gY29sb3JzIGFyZSBkZWZpbmVkLCBhZGQgcGxhY2Vob2xkZXJzIHNvIGNvbG9yIGFuZCB2ZXJ0ZXggaW5kaWNlcyBtYXRjaFxuXG5cdFx0XHRcdFx0XHRcdFx0c3RhdGUuY29sb3JzLnB1c2goIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQgKTtcblxuXHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHRjYXNlICd2bic6XG5cdFx0XHRcdFx0XHRcdHN0YXRlLm5vcm1hbHMucHVzaChcblx0XHRcdFx0XHRcdFx0XHRwYXJzZUZsb2F0KCBkYXRhWyAxIF0gKSxcblx0XHRcdFx0XHRcdFx0XHRwYXJzZUZsb2F0KCBkYXRhWyAyIF0gKSxcblx0XHRcdFx0XHRcdFx0XHRwYXJzZUZsb2F0KCBkYXRhWyAzIF0gKVxuXHRcdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdGNhc2UgJ3Z0Jzpcblx0XHRcdFx0XHRcdFx0c3RhdGUudXZzLnB1c2goXG5cdFx0XHRcdFx0XHRcdFx0cGFyc2VGbG9hdCggZGF0YVsgMSBdICksXG5cdFx0XHRcdFx0XHRcdFx0cGFyc2VGbG9hdCggZGF0YVsgMiBdIClcblx0XHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fSBlbHNlIGlmICggbGluZUZpcnN0Q2hhciA9PT0gJ2YnICkge1xuXG5cdFx0XHRcdFx0dmFyIGxpbmVEYXRhID0gbGluZS5zdWJzdHIoIDEgKS50cmltKCk7XG5cdFx0XHRcdFx0dmFyIHZlcnRleERhdGEgPSBsaW5lRGF0YS5zcGxpdCggL1xccysvICk7XG5cdFx0XHRcdFx0dmFyIGZhY2VWZXJ0aWNlcyA9IFtdO1xuXG5cdFx0XHRcdFx0Ly8gUGFyc2UgdGhlIGZhY2UgdmVydGV4IGRhdGEgaW50byBhbiBlYXN5IHRvIHdvcmsgd2l0aCBmb3JtYXRcblxuXHRcdFx0XHRcdGZvciAoIHZhciBqID0gMCwgamwgPSB2ZXJ0ZXhEYXRhLmxlbmd0aDsgaiA8IGpsOyBqICsrICkge1xuXG5cdFx0XHRcdFx0XHR2YXIgdmVydGV4ID0gdmVydGV4RGF0YVsgaiBdO1xuXG5cdFx0XHRcdFx0XHRpZiAoIHZlcnRleC5sZW5ndGggPiAwICkge1xuXG5cdFx0XHRcdFx0XHRcdHZhciB2ZXJ0ZXhQYXJ0cyA9IHZlcnRleC5zcGxpdCggJy8nICk7XG5cdFx0XHRcdFx0XHRcdGZhY2VWZXJ0aWNlcy5wdXNoKCB2ZXJ0ZXhQYXJ0cyApO1xuXG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBEcmF3IGFuIGVkZ2UgYmV0d2VlbiB0aGUgZmlyc3QgdmVydGV4IGFuZCBhbGwgc3Vic2VxdWVudCB2ZXJ0aWNlcyB0byBmb3JtIGFuIG4tZ29uXG5cblx0XHRcdFx0XHR2YXIgdjEgPSBmYWNlVmVydGljZXNbIDAgXTtcblxuXHRcdFx0XHRcdGZvciAoIHZhciBqID0gMSwgamwgPSBmYWNlVmVydGljZXMubGVuZ3RoIC0gMTsgaiA8IGpsOyBqICsrICkge1xuXG5cdFx0XHRcdFx0XHR2YXIgdjIgPSBmYWNlVmVydGljZXNbIGogXTtcblx0XHRcdFx0XHRcdHZhciB2MyA9IGZhY2VWZXJ0aWNlc1sgaiArIDEgXTtcblxuXHRcdFx0XHRcdFx0c3RhdGUuYWRkRmFjZShcblx0XHRcdFx0XHRcdFx0djFbIDAgXSwgdjJbIDAgXSwgdjNbIDAgXSxcblx0XHRcdFx0XHRcdFx0djFbIDEgXSwgdjJbIDEgXSwgdjNbIDEgXSxcblx0XHRcdFx0XHRcdFx0djFbIDIgXSwgdjJbIDIgXSwgdjNbIDIgXVxuXHRcdFx0XHRcdFx0KTtcblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHR9IGVsc2UgaWYgKCBsaW5lRmlyc3RDaGFyID09PSAnbCcgKSB7XG5cblx0XHRcdFx0XHR2YXIgbGluZVBhcnRzID0gbGluZS5zdWJzdHJpbmcoIDEgKS50cmltKCkuc3BsaXQoICcgJyApO1xuXHRcdFx0XHRcdHZhciBsaW5lVmVydGljZXMgPSBbXSwgbGluZVVWcyA9IFtdO1xuXG5cdFx0XHRcdFx0aWYgKCBsaW5lLmluZGV4T2YoICcvJyApID09PSAtIDEgKSB7XG5cblx0XHRcdFx0XHRcdGxpbmVWZXJ0aWNlcyA9IGxpbmVQYXJ0cztcblxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRcdGZvciAoIHZhciBsaSA9IDAsIGxsZW4gPSBsaW5lUGFydHMubGVuZ3RoOyBsaSA8IGxsZW47IGxpICsrICkge1xuXG5cdFx0XHRcdFx0XHRcdHZhciBwYXJ0cyA9IGxpbmVQYXJ0c1sgbGkgXS5zcGxpdCggJy8nICk7XG5cblx0XHRcdFx0XHRcdFx0aWYgKCBwYXJ0c1sgMCBdICE9PSAnJyApIGxpbmVWZXJ0aWNlcy5wdXNoKCBwYXJ0c1sgMCBdICk7XG5cdFx0XHRcdFx0XHRcdGlmICggcGFydHNbIDEgXSAhPT0gJycgKSBsaW5lVVZzLnB1c2goIHBhcnRzWyAxIF0gKTtcblxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0c3RhdGUuYWRkTGluZUdlb21ldHJ5KCBsaW5lVmVydGljZXMsIGxpbmVVVnMgKTtcblxuXHRcdFx0XHR9IGVsc2UgaWYgKCBsaW5lRmlyc3RDaGFyID09PSAncCcgKSB7XG5cblx0XHRcdFx0XHR2YXIgbGluZURhdGEgPSBsaW5lLnN1YnN0ciggMSApLnRyaW0oKTtcblx0XHRcdFx0XHR2YXIgcG9pbnREYXRhID0gbGluZURhdGEuc3BsaXQoICcgJyApO1xuXG5cdFx0XHRcdFx0c3RhdGUuYWRkUG9pbnRHZW9tZXRyeSggcG9pbnREYXRhICk7XG5cblx0XHRcdFx0fSBlbHNlIGlmICggKCByZXN1bHQgPSBvYmplY3RfcGF0dGVybi5leGVjKCBsaW5lICkgKSAhPT0gbnVsbCApIHtcblxuXHRcdFx0XHRcdC8vIG8gb2JqZWN0X25hbWVcblx0XHRcdFx0XHQvLyBvclxuXHRcdFx0XHRcdC8vIGcgZ3JvdXBfbmFtZVxuXG5cdFx0XHRcdFx0Ly8gV09SS0FST1VORDogaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL3Y4L2lzc3Vlcy9kZXRhaWw/aWQ9Mjg2OVxuXHRcdFx0XHRcdC8vIHZhciBuYW1lID0gcmVzdWx0WyAwIF0uc3Vic3RyKCAxICkudHJpbSgpO1xuXHRcdFx0XHRcdHZhciBuYW1lID0gKCAnICcgKyByZXN1bHRbIDAgXS5zdWJzdHIoIDEgKS50cmltKCkgKS5zdWJzdHIoIDEgKTtcblxuXHRcdFx0XHRcdHN0YXRlLnN0YXJ0T2JqZWN0KCBuYW1lICk7XG5cblx0XHRcdFx0fSBlbHNlIGlmICggbWF0ZXJpYWxfdXNlX3BhdHRlcm4udGVzdCggbGluZSApICkge1xuXG5cdFx0XHRcdFx0Ly8gbWF0ZXJpYWxcblxuXHRcdFx0XHRcdHN0YXRlLm9iamVjdC5zdGFydE1hdGVyaWFsKCBsaW5lLnN1YnN0cmluZyggNyApLnRyaW0oKSwgc3RhdGUubWF0ZXJpYWxMaWJyYXJpZXMgKTtcblxuXHRcdFx0XHR9IGVsc2UgaWYgKCBtYXRlcmlhbF9saWJyYXJ5X3BhdHRlcm4udGVzdCggbGluZSApICkge1xuXG5cdFx0XHRcdFx0Ly8gbXRsIGZpbGVcblxuXHRcdFx0XHRcdHN0YXRlLm1hdGVyaWFsTGlicmFyaWVzLnB1c2goIGxpbmUuc3Vic3RyaW5nKCA3ICkudHJpbSgpICk7XG5cblx0XHRcdFx0fSBlbHNlIGlmICggbWFwX3VzZV9wYXR0ZXJuLnRlc3QoIGxpbmUgKSApIHtcblxuXHRcdFx0XHRcdC8vIHRoZSBsaW5lIGlzIHBhcnNlZCBidXQgaWdub3JlZCBzaW5jZSB0aGUgbG9hZGVyIGFzc3VtZXMgdGV4dHVyZXMgYXJlIGRlZmluZWQgTVRMIGZpbGVzXG5cdFx0XHRcdFx0Ly8gKGFjY29yZGluZyB0byBodHRwczovL3d3dy5va2luby5jb20vY29udi9pbXBfd2F2ZS5odG0sICd1c2VtYXAnIGlzIHRoZSBvbGQtc3R5bGUgV2F2ZWZyb250IHRleHR1cmUgcmVmZXJlbmNlIG1ldGhvZClcblxuXHRcdFx0XHRcdGNvbnNvbGUud2FybiggJ1RIUkVFLk9CSkxvYWRlcjogUmVuZGVyaW5nIGlkZW50aWZpZXIgXCJ1c2VtYXBcIiBub3Qgc3VwcG9ydGVkLiBUZXh0dXJlcyBtdXN0IGJlIGRlZmluZWQgaW4gTVRMIGZpbGVzLicgKTtcblxuXHRcdFx0XHR9IGVsc2UgaWYgKCBsaW5lRmlyc3RDaGFyID09PSAncycgKSB7XG5cblx0XHRcdFx0XHRyZXN1bHQgPSBsaW5lLnNwbGl0KCAnICcgKTtcblxuXHRcdFx0XHRcdC8vIHNtb290aCBzaGFkaW5nXG5cblx0XHRcdFx0XHQvLyBAdG9kbyBIYW5kbGUgZmlsZXMgdGhhdCBoYXZlIHZhcnlpbmcgc21vb3RoIHZhbHVlcyBmb3IgYSBzZXQgb2YgZmFjZXMgaW5zaWRlIG9uZSBnZW9tZXRyeSxcblx0XHRcdFx0XHQvLyBidXQgZG9lcyBub3QgZGVmaW5lIGEgdXNlbXRsIGZvciBlYWNoIGZhY2Ugc2V0LlxuXHRcdFx0XHRcdC8vIFRoaXMgc2hvdWxkIGJlIGRldGVjdGVkIGFuZCBhIGR1bW15IG1hdGVyaWFsIGNyZWF0ZWQgKGxhdGVyIE11bHRpTWF0ZXJpYWwgYW5kIGdlb21ldHJ5IGdyb3VwcykuXG5cdFx0XHRcdFx0Ly8gVGhpcyByZXF1aXJlcyBzb21lIGNhcmUgdG8gbm90IGNyZWF0ZSBleHRyYSBtYXRlcmlhbCBvbiBlYWNoIHNtb290aCB2YWx1ZSBmb3IgXCJub3JtYWxcIiBvYmogZmlsZXMuXG5cdFx0XHRcdFx0Ly8gd2hlcmUgZXhwbGljaXQgdXNlbXRsIGRlZmluZXMgZ2VvbWV0cnkgZ3JvdXBzLlxuXHRcdFx0XHRcdC8vIEV4YW1wbGUgYXNzZXQ6IGV4YW1wbGVzL21vZGVscy9vYmovY2VyYmVydXMvQ2VyYmVydXMub2JqXG5cblx0XHRcdFx0XHQvKlxuXHRcdFx0XHRcdCAqIGh0dHA6Ly9wYXVsYm91cmtlLm5ldC9kYXRhZm9ybWF0cy9vYmovXG5cdFx0XHRcdFx0ICogb3Jcblx0XHRcdFx0XHQgKiBodHRwOi8vd3d3LmNzLnV0YWguZWR1L35ib3Vsb3MvY3MzNTA1L29ial9zcGVjLnBkZlxuXHRcdFx0XHRcdCAqXG5cdFx0XHRcdFx0ICogRnJvbSBjaGFwdGVyIFwiR3JvdXBpbmdcIiBTeW50YXggZXhwbGFuYXRpb24gXCJzIGdyb3VwX251bWJlclwiOlxuXHRcdFx0XHRcdCAqIFwiZ3JvdXBfbnVtYmVyIGlzIHRoZSBzbW9vdGhpbmcgZ3JvdXAgbnVtYmVyLiBUbyB0dXJuIG9mZiBzbW9vdGhpbmcgZ3JvdXBzLCB1c2UgYSB2YWx1ZSBvZiAwIG9yIG9mZi5cblx0XHRcdFx0XHQgKiBQb2x5Z29uYWwgZWxlbWVudHMgdXNlIGdyb3VwIG51bWJlcnMgdG8gcHV0IGVsZW1lbnRzIGluIGRpZmZlcmVudCBzbW9vdGhpbmcgZ3JvdXBzLiBGb3IgZnJlZS1mb3JtXG5cdFx0XHRcdFx0ICogc3VyZmFjZXMsIHNtb290aGluZyBncm91cHMgYXJlIGVpdGhlciB0dXJuZWQgb24gb3Igb2ZmOyB0aGVyZSBpcyBubyBkaWZmZXJlbmNlIGJldHdlZW4gdmFsdWVzIGdyZWF0ZXJcblx0XHRcdFx0XHQgKiB0aGFuIDAuXCJcblx0XHRcdFx0XHQgKi9cblx0XHRcdFx0XHRpZiAoIHJlc3VsdC5sZW5ndGggPiAxICkge1xuXG5cdFx0XHRcdFx0XHR2YXIgdmFsdWUgPSByZXN1bHRbIDEgXS50cmltKCkudG9Mb3dlckNhc2UoKTtcblx0XHRcdFx0XHRcdHN0YXRlLm9iamVjdC5zbW9vdGggPSAoIHZhbHVlICE9PSAnMCcgJiYgdmFsdWUgIT09ICdvZmYnICk7XG5cblx0XHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0XHQvLyBaQnJ1c2ggY2FuIHByb2R1Y2UgXCJzXCIgbGluZXMgIzExNzA3XG5cdFx0XHRcdFx0XHRzdGF0ZS5vYmplY3Quc21vb3RoID0gdHJ1ZTtcblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdHZhciBtYXRlcmlhbCA9IHN0YXRlLm9iamVjdC5jdXJyZW50TWF0ZXJpYWwoKTtcblx0XHRcdFx0XHRpZiAoIG1hdGVyaWFsICkgbWF0ZXJpYWwuc21vb3RoID0gc3RhdGUub2JqZWN0LnNtb290aDtcblxuXHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0Ly8gSGFuZGxlIG51bGwgdGVybWluYXRlZCBmaWxlcyB3aXRob3V0IGV4Y2VwdGlvblxuXHRcdFx0XHRcdGlmICggbGluZSA9PT0gJ1xcMCcgKSBjb250aW51ZTtcblxuXHRcdFx0XHRcdGNvbnNvbGUud2FybiggJ1RIUkVFLk9CSkxvYWRlcjogVW5leHBlY3RlZCBsaW5lOiBcIicgKyBsaW5lICsgJ1wiJyApO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fVxuXG5cdFx0XHRzdGF0ZS5maW5hbGl6ZSgpO1xuXG5cdFx0XHR2YXIgY29udGFpbmVyID0gbmV3IEdyb3VwKCk7XG5cdFx0XHRjb250YWluZXIubWF0ZXJpYWxMaWJyYXJpZXMgPSBbXS5jb25jYXQoIHN0YXRlLm1hdGVyaWFsTGlicmFyaWVzICk7XG5cblx0XHRcdHZhciBoYXNQcmltaXRpdmVzID0gISAoIHN0YXRlLm9iamVjdHMubGVuZ3RoID09PSAxICYmIHN0YXRlLm9iamVjdHNbIDAgXS5nZW9tZXRyeS52ZXJ0aWNlcy5sZW5ndGggPT09IDAgKTtcblxuXHRcdFx0aWYgKCBoYXNQcmltaXRpdmVzID09PSB0cnVlICkge1xuXG5cdFx0XHRcdGZvciAoIHZhciBpID0gMCwgbCA9IHN0YXRlLm9iamVjdHMubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcblxuXHRcdFx0XHRcdHZhciBvYmplY3QgPSBzdGF0ZS5vYmplY3RzWyBpIF07XG5cdFx0XHRcdFx0dmFyIGdlb21ldHJ5ID0gb2JqZWN0Lmdlb21ldHJ5O1xuXHRcdFx0XHRcdHZhciBtYXRlcmlhbHMgPSBvYmplY3QubWF0ZXJpYWxzO1xuXHRcdFx0XHRcdHZhciBpc0xpbmUgPSAoIGdlb21ldHJ5LnR5cGUgPT09ICdMaW5lJyApO1xuXHRcdFx0XHRcdHZhciBpc1BvaW50cyA9ICggZ2VvbWV0cnkudHlwZSA9PT0gJ1BvaW50cycgKTtcblx0XHRcdFx0XHR2YXIgaGFzVmVydGV4Q29sb3JzID0gZmFsc2U7XG5cblx0XHRcdFx0XHQvLyBTa2lwIG8vZyBsaW5lIGRlY2xhcmF0aW9ucyB0aGF0IGRpZCBub3QgZm9sbG93IHdpdGggYW55IGZhY2VzXG5cdFx0XHRcdFx0aWYgKCBnZW9tZXRyeS52ZXJ0aWNlcy5sZW5ndGggPT09IDAgKSBjb250aW51ZTtcblxuXHRcdFx0XHRcdHZhciBidWZmZXJnZW9tZXRyeSA9IG5ldyBCdWZmZXJHZW9tZXRyeSgpO1xuXG5cdFx0XHRcdFx0YnVmZmVyZ2VvbWV0cnkuc2V0QXR0cmlidXRlKCAncG9zaXRpb24nLCBuZXcgRmxvYXQzMkJ1ZmZlckF0dHJpYnV0ZSggZ2VvbWV0cnkudmVydGljZXMsIDMgKSApO1xuXG5cdFx0XHRcdFx0aWYgKCBnZW9tZXRyeS5ub3JtYWxzLmxlbmd0aCA+IDAgKSB7XG5cblx0XHRcdFx0XHRcdGJ1ZmZlcmdlb21ldHJ5LnNldEF0dHJpYnV0ZSggJ25vcm1hbCcsIG5ldyBGbG9hdDMyQnVmZmVyQXR0cmlidXRlKCBnZW9tZXRyeS5ub3JtYWxzLCAzICkgKTtcblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGlmICggZ2VvbWV0cnkuY29sb3JzLmxlbmd0aCA+IDAgKSB7XG5cblx0XHRcdFx0XHRcdGhhc1ZlcnRleENvbG9ycyA9IHRydWU7XG5cdFx0XHRcdFx0XHRidWZmZXJnZW9tZXRyeS5zZXRBdHRyaWJ1dGUoICdjb2xvcicsIG5ldyBGbG9hdDMyQnVmZmVyQXR0cmlidXRlKCBnZW9tZXRyeS5jb2xvcnMsIDMgKSApO1xuXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0aWYgKCBnZW9tZXRyeS5oYXNVVkluZGljZXMgPT09IHRydWUgKSB7XG5cblx0XHRcdFx0XHRcdGJ1ZmZlcmdlb21ldHJ5LnNldEF0dHJpYnV0ZSggJ3V2JywgbmV3IEZsb2F0MzJCdWZmZXJBdHRyaWJ1dGUoIGdlb21ldHJ5LnV2cywgMiApICk7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBDcmVhdGUgbWF0ZXJpYWxzXG5cblx0XHRcdFx0XHR2YXIgY3JlYXRlZE1hdGVyaWFscyA9IFtdO1xuXG5cdFx0XHRcdFx0Zm9yICggdmFyIG1pID0gMCwgbWlMZW4gPSBtYXRlcmlhbHMubGVuZ3RoOyBtaSA8IG1pTGVuOyBtaSArKyApIHtcblxuXHRcdFx0XHRcdFx0dmFyIHNvdXJjZU1hdGVyaWFsID0gbWF0ZXJpYWxzWyBtaSBdO1xuXHRcdFx0XHRcdFx0dmFyIG1hdGVyaWFsSGFzaCA9IHNvdXJjZU1hdGVyaWFsLm5hbWUgKyAnXycgKyBzb3VyY2VNYXRlcmlhbC5zbW9vdGggKyAnXycgKyBoYXNWZXJ0ZXhDb2xvcnM7XG5cdFx0XHRcdFx0XHR2YXIgbWF0ZXJpYWwgPSBzdGF0ZS5tYXRlcmlhbHNbIG1hdGVyaWFsSGFzaCBdO1xuXG5cdFx0XHRcdFx0XHRpZiAoIHRoaXMubWF0ZXJpYWxzICE9PSBudWxsICkge1xuXG5cdFx0XHRcdFx0XHRcdG1hdGVyaWFsID0gdGhpcy5tYXRlcmlhbHMuY3JlYXRlKCBzb3VyY2VNYXRlcmlhbC5uYW1lICk7XG5cblx0XHRcdFx0XHRcdFx0Ly8gbXRsIGV0Yy4gbG9hZGVycyBwcm9iYWJseSBjYW4ndCBjcmVhdGUgbGluZSBtYXRlcmlhbHMgY29ycmVjdGx5LCBjb3B5IHByb3BlcnRpZXMgdG8gYSBsaW5lIG1hdGVyaWFsLlxuXHRcdFx0XHRcdFx0XHRpZiAoIGlzTGluZSAmJiBtYXRlcmlhbCAmJiAhICggbWF0ZXJpYWwgaW5zdGFuY2VvZiBMaW5lQmFzaWNNYXRlcmlhbCApICkge1xuXG5cdFx0XHRcdFx0XHRcdFx0dmFyIG1hdGVyaWFsTGluZSA9IG5ldyBMaW5lQmFzaWNNYXRlcmlhbCgpO1xuXHRcdFx0XHRcdFx0XHRcdE1hdGVyaWFsLnByb3RvdHlwZS5jb3B5LmNhbGwoIG1hdGVyaWFsTGluZSwgbWF0ZXJpYWwgKTtcblx0XHRcdFx0XHRcdFx0XHRtYXRlcmlhbExpbmUuY29sb3IuY29weSggbWF0ZXJpYWwuY29sb3IgKTtcblx0XHRcdFx0XHRcdFx0XHRtYXRlcmlhbCA9IG1hdGVyaWFsTGluZTtcblxuXHRcdFx0XHRcdFx0XHR9IGVsc2UgaWYgKCBpc1BvaW50cyAmJiBtYXRlcmlhbCAmJiAhICggbWF0ZXJpYWwgaW5zdGFuY2VvZiBQb2ludHNNYXRlcmlhbCApICkge1xuXG5cdFx0XHRcdFx0XHRcdFx0dmFyIG1hdGVyaWFsUG9pbnRzID0gbmV3IFBvaW50c01hdGVyaWFsKCB7IHNpemU6IDEwLCBzaXplQXR0ZW51YXRpb246IGZhbHNlIH0gKTtcblx0XHRcdFx0XHRcdFx0XHRNYXRlcmlhbC5wcm90b3R5cGUuY29weS5jYWxsKCBtYXRlcmlhbFBvaW50cywgbWF0ZXJpYWwgKTtcblx0XHRcdFx0XHRcdFx0XHRtYXRlcmlhbFBvaW50cy5jb2xvci5jb3B5KCBtYXRlcmlhbC5jb2xvciApO1xuXHRcdFx0XHRcdFx0XHRcdG1hdGVyaWFsUG9pbnRzLm1hcCA9IG1hdGVyaWFsLm1hcDtcblx0XHRcdFx0XHRcdFx0XHRtYXRlcmlhbCA9IG1hdGVyaWFsUG9pbnRzO1xuXG5cdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRpZiAoIG1hdGVyaWFsID09PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0XHRcdFx0aWYgKCBpc0xpbmUgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHRtYXRlcmlhbCA9IG5ldyBMaW5lQmFzaWNNYXRlcmlhbCgpO1xuXG5cdFx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoIGlzUG9pbnRzICkge1xuXG5cdFx0XHRcdFx0XHRcdFx0bWF0ZXJpYWwgPSBuZXcgUG9pbnRzTWF0ZXJpYWwoIHsgc2l6ZTogMSwgc2l6ZUF0dGVudWF0aW9uOiBmYWxzZSB9ICk7XG5cblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdFx0XHRcdG1hdGVyaWFsID0gbmV3IE1lc2hQaG9uZ01hdGVyaWFsKCk7XG5cblx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdG1hdGVyaWFsLm5hbWUgPSBzb3VyY2VNYXRlcmlhbC5uYW1lO1xuXHRcdFx0XHRcdFx0XHRtYXRlcmlhbC5mbGF0U2hhZGluZyA9IHNvdXJjZU1hdGVyaWFsLnNtb290aCA/IGZhbHNlIDogdHJ1ZTtcblx0XHRcdFx0XHRcdFx0bWF0ZXJpYWwudmVydGV4Q29sb3JzID0gaGFzVmVydGV4Q29sb3JzO1xuXG5cdFx0XHRcdFx0XHRcdHN0YXRlLm1hdGVyaWFsc1sgbWF0ZXJpYWxIYXNoIF0gPSBtYXRlcmlhbDtcblxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRjcmVhdGVkTWF0ZXJpYWxzLnB1c2goIG1hdGVyaWFsICk7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBDcmVhdGUgbWVzaFxuXG5cdFx0XHRcdFx0dmFyIG1lc2g7XG5cblx0XHRcdFx0XHRpZiAoIGNyZWF0ZWRNYXRlcmlhbHMubGVuZ3RoID4gMSApIHtcblxuXHRcdFx0XHRcdFx0Zm9yICggdmFyIG1pID0gMCwgbWlMZW4gPSBtYXRlcmlhbHMubGVuZ3RoOyBtaSA8IG1pTGVuOyBtaSArKyApIHtcblxuXHRcdFx0XHRcdFx0XHR2YXIgc291cmNlTWF0ZXJpYWwgPSBtYXRlcmlhbHNbIG1pIF07XG5cdFx0XHRcdFx0XHRcdGJ1ZmZlcmdlb21ldHJ5LmFkZEdyb3VwKCBzb3VyY2VNYXRlcmlhbC5ncm91cFN0YXJ0LCBzb3VyY2VNYXRlcmlhbC5ncm91cENvdW50LCBtaSApO1xuXG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdGlmICggaXNMaW5lICkge1xuXG5cdFx0XHRcdFx0XHRcdG1lc2ggPSBuZXcgTGluZVNlZ21lbnRzKCBidWZmZXJnZW9tZXRyeSwgY3JlYXRlZE1hdGVyaWFscyApO1xuXG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKCBpc1BvaW50cyApIHtcblxuXHRcdFx0XHRcdFx0XHRtZXNoID0gbmV3IFBvaW50cyggYnVmZmVyZ2VvbWV0cnksIGNyZWF0ZWRNYXRlcmlhbHMgKTtcblxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdFx0XHRtZXNoID0gbmV3IE1lc2goIGJ1ZmZlcmdlb21ldHJ5LCBjcmVhdGVkTWF0ZXJpYWxzICk7XG5cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRcdGlmICggaXNMaW5lICkge1xuXG5cdFx0XHRcdFx0XHRcdG1lc2ggPSBuZXcgTGluZVNlZ21lbnRzKCBidWZmZXJnZW9tZXRyeSwgY3JlYXRlZE1hdGVyaWFsc1sgMCBdICk7XG5cblx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoIGlzUG9pbnRzICkge1xuXG5cdFx0XHRcdFx0XHRcdG1lc2ggPSBuZXcgUG9pbnRzKCBidWZmZXJnZW9tZXRyeSwgY3JlYXRlZE1hdGVyaWFsc1sgMCBdICk7XG5cblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRcdFx0bWVzaCA9IG5ldyBNZXNoKCBidWZmZXJnZW9tZXRyeSwgY3JlYXRlZE1hdGVyaWFsc1sgMCBdICk7XG5cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdG1lc2gubmFtZSA9IG9iamVjdC5uYW1lO1xuXG5cdFx0XHRcdFx0Y29udGFpbmVyLmFkZCggbWVzaCApO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHQvLyBpZiB0aGVyZSBpcyBvbmx5IHRoZSBkZWZhdWx0IHBhcnNlciBzdGF0ZSBvYmplY3Qgd2l0aCBubyBnZW9tZXRyeSBkYXRhLCBpbnRlcnByZXQgZGF0YSBhcyBwb2ludCBjbG91ZFxuXG5cdFx0XHRcdGlmICggc3RhdGUudmVydGljZXMubGVuZ3RoID4gMCApIHtcblxuXHRcdFx0XHRcdHZhciBtYXRlcmlhbCA9IG5ldyBQb2ludHNNYXRlcmlhbCggeyBzaXplOiAxLCBzaXplQXR0ZW51YXRpb246IGZhbHNlIH0gKTtcblxuXHRcdFx0XHRcdHZhciBidWZmZXJnZW9tZXRyeSA9IG5ldyBCdWZmZXJHZW9tZXRyeSgpO1xuXG5cdFx0XHRcdFx0YnVmZmVyZ2VvbWV0cnkuc2V0QXR0cmlidXRlKCAncG9zaXRpb24nLCBuZXcgRmxvYXQzMkJ1ZmZlckF0dHJpYnV0ZSggc3RhdGUudmVydGljZXMsIDMgKSApO1xuXG5cdFx0XHRcdFx0aWYgKCBzdGF0ZS5jb2xvcnMubGVuZ3RoID4gMCAmJiBzdGF0ZS5jb2xvcnNbIDAgXSAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRcdFx0XHRidWZmZXJnZW9tZXRyeS5zZXRBdHRyaWJ1dGUoICdjb2xvcicsIG5ldyBGbG9hdDMyQnVmZmVyQXR0cmlidXRlKCBzdGF0ZS5jb2xvcnMsIDMgKSApO1xuXHRcdFx0XHRcdFx0bWF0ZXJpYWwudmVydGV4Q29sb3JzID0gdHJ1ZTtcblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdHZhciBwb2ludHMgPSBuZXcgUG9pbnRzKCBidWZmZXJnZW9tZXRyeSwgbWF0ZXJpYWwgKTtcblx0XHRcdFx0XHRjb250YWluZXIuYWRkKCBwb2ludHMgKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGNvbnRhaW5lcjtcblxuXHRcdH1cblxuXHR9ICk7XG5cblx0cmV0dXJuIE9CSkxvYWRlcjtcblxufSApKCk7XG5cbmV4cG9ydCB7IE9CSkxvYWRlciB9O1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/three/examples/jsm/loaders/OBJLoader.js\n");

/***/ }),

/***/ "./node_modules/three/examples/jsm/loaders/PCDLoader.js":
/*!**************************************************************!*\
  !*** ./node_modules/three/examples/jsm/loaders/PCDLoader.js ***!
  \**************************************************************/
/*! exports provided: PCDLoader */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"PCDLoader\", function() { return PCDLoader; });\n/* harmony import */ var _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../build/three.module.js */ \"./node_modules/three/build/three.module.js\");\n\n\nvar PCDLoader = function ( manager ) {\n\n\t_build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Loader\"].call( this, manager );\n\n\tthis.littleEndian = true;\n\n};\n\n\nPCDLoader.prototype = Object.assign( Object.create( _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Loader\"].prototype ), {\n\n\tconstructor: PCDLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar scope = this;\n\n\t\tvar loader = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"FileLoader\"]( scope.manager );\n\t\tloader.setPath( scope.path );\n\t\tloader.setResponseType( 'arraybuffer' );\n\t\tloader.setRequestHeader( scope.requestHeader );\n\t\tloader.setWithCredentials( scope.withCredentials );\n\t\tloader.load( url, function ( data ) {\n\n\t\t\ttry {\n\n\t\t\t\tonLoad( scope.parse( data, url ) );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\tif ( onError ) {\n\n\t\t\t\t\tonError( e );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( e );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t},\n\n\tparse: function ( data, url ) {\n\n\t\t// from https://gitlab.com/taketwo/three-pcd-loader/blob/master/decompress-lzf.js\n\n\t\tfunction decompressLZF( inData, outLength ) {\n\n\t\t\tvar inLength = inData.length;\n\t\t\tvar outData = new Uint8Array( outLength );\n\t\t\tvar inPtr = 0;\n\t\t\tvar outPtr = 0;\n\t\t\tvar ctrl;\n\t\t\tvar len;\n\t\t\tvar ref;\n\t\t\tdo {\n\n\t\t\t\tctrl = inData[ inPtr ++ ];\n\t\t\t\tif ( ctrl < ( 1 << 5 ) ) {\n\n\t\t\t\t\tctrl ++;\n\t\t\t\t\tif ( outPtr + ctrl > outLength ) throw new Error( 'Output buffer is not large enough' );\n\t\t\t\t\tif ( inPtr + ctrl > inLength ) throw new Error( 'Invalid compressed data' );\n\t\t\t\t\tdo {\n\n\t\t\t\t\t\toutData[ outPtr ++ ] = inData[ inPtr ++ ];\n\n\t\t\t\t\t} while ( -- ctrl );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tlen = ctrl >> 5;\n\t\t\t\t\tref = outPtr - ( ( ctrl & 0x1f ) << 8 ) - 1;\n\t\t\t\t\tif ( inPtr >= inLength ) throw new Error( 'Invalid compressed data' );\n\t\t\t\t\tif ( len === 7 ) {\n\n\t\t\t\t\t\tlen += inData[ inPtr ++ ];\n\t\t\t\t\t\tif ( inPtr >= inLength ) throw new Error( 'Invalid compressed data' );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tref -= inData[ inPtr ++ ];\n\t\t\t\t\tif ( outPtr + len + 2 > outLength ) throw new Error( 'Output buffer is not large enough' );\n\t\t\t\t\tif ( ref < 0 ) throw new Error( 'Invalid compressed data' );\n\t\t\t\t\tif ( ref >= outPtr ) throw new Error( 'Invalid compressed data' );\n\t\t\t\t\tdo {\n\n\t\t\t\t\t\toutData[ outPtr ++ ] = outData[ ref ++ ];\n\n\t\t\t\t\t} while ( -- len + 2 );\n\n\t\t\t\t}\n\n\t\t\t} while ( inPtr < inLength );\n\n\t\t\treturn outData;\n\n\t\t}\n\n\t\tfunction parseHeader( data ) {\n\n\t\t\tvar PCDheader = {};\n\t\t\tvar result1 = data.search( /[\\r\\n]DATA\\s(\\S*)\\s/i );\n\t\t\tvar result2 = /[\\r\\n]DATA\\s(\\S*)\\s/i.exec( data.substr( result1 - 1 ) );\n\n\t\t\tPCDheader.data = result2[ 1 ];\n\t\t\tPCDheader.headerLen = result2[ 0 ].length + result1;\n\t\t\tPCDheader.str = data.substr( 0, PCDheader.headerLen );\n\n\t\t\t// remove comments\n\n\t\t\tPCDheader.str = PCDheader.str.replace( /\\#.*/gi, '' );\n\n\t\t\t// parse\n\n\t\t\tPCDheader.version = /VERSION (.*)/i.exec( PCDheader.str );\n\t\t\tPCDheader.fields = /FIELDS (.*)/i.exec( PCDheader.str );\n\t\t\tPCDheader.size = /SIZE (.*)/i.exec( PCDheader.str );\n\t\t\tPCDheader.type = /TYPE (.*)/i.exec( PCDheader.str );\n\t\t\tPCDheader.count = /COUNT (.*)/i.exec( PCDheader.str );\n\t\t\tPCDheader.width = /WIDTH (.*)/i.exec( PCDheader.str );\n\t\t\tPCDheader.height = /HEIGHT (.*)/i.exec( PCDheader.str );\n\t\t\tPCDheader.viewpoint = /VIEWPOINT (.*)/i.exec( PCDheader.str );\n\t\t\tPCDheader.points = /POINTS (.*)/i.exec( PCDheader.str );\n\n\t\t\t// evaluate\n\n\t\t\tif ( PCDheader.version !== null )\n\t\t\t\tPCDheader.version = parseFloat( PCDheader.version[ 1 ] );\n\n\t\t\tif ( PCDheader.fields !== null )\n\t\t\t\tPCDheader.fields = PCDheader.fields[ 1 ].split( ' ' );\n\n\t\t\tif ( PCDheader.type !== null )\n\t\t\t\tPCDheader.type = PCDheader.type[ 1 ].split( ' ' );\n\n\t\t\tif ( PCDheader.width !== null )\n\t\t\t\tPCDheader.width = parseInt( PCDheader.width[ 1 ] );\n\n\t\t\tif ( PCDheader.height !== null )\n\t\t\t\tPCDheader.height = parseInt( PCDheader.height[ 1 ] );\n\n\t\t\tif ( PCDheader.viewpoint !== null )\n\t\t\t\tPCDheader.viewpoint = PCDheader.viewpoint[ 1 ];\n\n\t\t\tif ( PCDheader.points !== null )\n\t\t\t\tPCDheader.points = parseInt( PCDheader.points[ 1 ], 10 );\n\n\t\t\tif ( PCDheader.points === null )\n\t\t\t\tPCDheader.points = PCDheader.width * PCDheader.height;\n\n\t\t\tif ( PCDheader.size !== null ) {\n\n\t\t\t\tPCDheader.size = PCDheader.size[ 1 ].split( ' ' ).map( function ( x ) {\n\n\t\t\t\t\treturn parseInt( x, 10 );\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\tif ( PCDheader.count !== null ) {\n\n\t\t\t\tPCDheader.count = PCDheader.count[ 1 ].split( ' ' ).map( function ( x ) {\n\n\t\t\t\t\treturn parseInt( x, 10 );\n\n\t\t\t\t} );\n\n\t\t\t} else {\n\n\t\t\t\tPCDheader.count = [];\n\n\t\t\t\tfor ( var i = 0, l = PCDheader.fields.length; i < l; i ++ ) {\n\n\t\t\t\t\tPCDheader.count.push( 1 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tPCDheader.offset = {};\n\n\t\t\tvar sizeSum = 0;\n\n\t\t\tfor ( var i = 0, l = PCDheader.fields.length; i < l; i ++ ) {\n\n\t\t\t\tif ( PCDheader.data === 'ascii' ) {\n\n\t\t\t\t\tPCDheader.offset[ PCDheader.fields[ i ] ] = i;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tPCDheader.offset[ PCDheader.fields[ i ] ] = sizeSum;\n\t\t\t\t\tsizeSum += PCDheader.size[ i ] * PCDheader.count[ i ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// for binary only\n\n\t\t\tPCDheader.rowSize = sizeSum;\n\n\t\t\treturn PCDheader;\n\n\t\t}\n\n\t\tvar textData = _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"LoaderUtils\"].decodeText( new Uint8Array( data ) );\n\n\t\t// parse header (always ascii format)\n\n\t\tvar PCDheader = parseHeader( textData );\n\n\t\t// parse data\n\n\t\tvar position = [];\n\t\tvar normal = [];\n\t\tvar color = [];\n\n\t\t// ascii\n\n\t\tif ( PCDheader.data === 'ascii' ) {\n\n\t\t\tvar offset = PCDheader.offset;\n\t\t\tvar pcdData = textData.substr( PCDheader.headerLen );\n\t\t\tvar lines = pcdData.split( '\\n' );\n\n\t\t\tfor ( var i = 0, l = lines.length; i < l; i ++ ) {\n\n\t\t\t\tif ( lines[ i ] === '' ) continue;\n\n\t\t\t\tvar line = lines[ i ].split( ' ' );\n\n\t\t\t\tif ( offset.x !== undefined ) {\n\n\t\t\t\t\tposition.push( parseFloat( line[ offset.x ] ) );\n\t\t\t\t\tposition.push( parseFloat( line[ offset.y ] ) );\n\t\t\t\t\tposition.push( parseFloat( line[ offset.z ] ) );\n\n\t\t\t\t}\n\n\t\t\t\tif ( offset.rgb !== undefined ) {\n\n\t\t\t\t\tvar rgb = parseFloat( line[ offset.rgb ] );\n\t\t\t\t\tvar r = ( rgb >> 16 ) & 0x0000ff;\n\t\t\t\t\tvar g = ( rgb >> 8 ) & 0x0000ff;\n\t\t\t\t\tvar b = ( rgb >> 0 ) & 0x0000ff;\n\t\t\t\t\tcolor.push( r / 255, g / 255, b / 255 );\n\n\t\t\t\t}\n\n\t\t\t\tif ( offset.normal_x !== undefined ) {\n\n\t\t\t\t\tnormal.push( parseFloat( line[ offset.normal_x ] ) );\n\t\t\t\t\tnormal.push( parseFloat( line[ offset.normal_y ] ) );\n\t\t\t\t\tnormal.push( parseFloat( line[ offset.normal_z ] ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// binary-compressed\n\n\t\t// normally data in PCD files are organized as array of structures: XYZRGBXYZRGB\n\t\t// binary compressed PCD files organize their data as structure of arrays: XXYYZZRGBRGB\n\t\t// that requires a totally different parsing approach compared to non-compressed data\n\n\t\tif ( PCDheader.data === 'binary_compressed' ) {\n\n\t\t\tvar sizes = new Uint32Array( data.slice( PCDheader.headerLen, PCDheader.headerLen + 8 ) );\n\t\t\tvar compressedSize = sizes[ 0 ];\n\t\t\tvar decompressedSize = sizes[ 1 ];\n\t\t\tvar decompressed = decompressLZF( new Uint8Array( data, PCDheader.headerLen + 8, compressedSize ), decompressedSize );\n\t\t\tvar dataview = new DataView( decompressed.buffer );\n\n\t\t\tvar offset = PCDheader.offset;\n\n\t\t\tfor ( var i = 0; i < PCDheader.points; i ++ ) {\n\n\t\t\t\tif ( offset.x !== undefined ) {\n\n\t\t\t\t\tposition.push( dataview.getFloat32( ( PCDheader.points * offset.x ) + PCDheader.size[ 0 ] * i, this.littleEndian ) );\n\t\t\t\t\tposition.push( dataview.getFloat32( ( PCDheader.points * offset.y ) + PCDheader.size[ 1 ] * i, this.littleEndian ) );\n\t\t\t\t\tposition.push( dataview.getFloat32( ( PCDheader.points * offset.z ) + PCDheader.size[ 2 ] * i, this.littleEndian ) );\n\n\t\t\t\t}\n\n\t\t\t\tif ( offset.rgb !== undefined ) {\n\n\t\t\t\t\tcolor.push( dataview.getUint8( ( PCDheader.points * offset.rgb ) + PCDheader.size[ 3 ] * i + 0 ) / 255.0 );\n\t\t\t\t\tcolor.push( dataview.getUint8( ( PCDheader.points * offset.rgb ) + PCDheader.size[ 3 ] * i + 1 ) / 255.0 );\n\t\t\t\t\tcolor.push( dataview.getUint8( ( PCDheader.points * offset.rgb ) + PCDheader.size[ 3 ] * i + 2 ) / 255.0 );\n\n\t\t\t\t}\n\n\t\t\t\tif ( offset.normal_x !== undefined ) {\n\n\t\t\t\t\tnormal.push( dataview.getFloat32( ( PCDheader.points * offset.normal_x ) + PCDheader.size[ 4 ] * i, this.littleEndian ) );\n\t\t\t\t\tnormal.push( dataview.getFloat32( ( PCDheader.points * offset.normal_y ) + PCDheader.size[ 5 ] * i, this.littleEndian ) );\n\t\t\t\t\tnormal.push( dataview.getFloat32( ( PCDheader.points * offset.normal_z ) + PCDheader.size[ 6 ] * i, this.littleEndian ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// binary\n\n\t\tif ( PCDheader.data === 'binary' ) {\n\n\t\t\tvar dataview = new DataView( data, PCDheader.headerLen );\n\t\t\tvar offset = PCDheader.offset;\n\n\t\t\tfor ( var i = 0, row = 0; i < PCDheader.points; i ++, row += PCDheader.rowSize ) {\n\n\t\t\t\tif ( offset.x !== undefined ) {\n\n\t\t\t\t\tposition.push( dataview.getFloat32( row + offset.x, this.littleEndian ) );\n\t\t\t\t\tposition.push( dataview.getFloat32( row + offset.y, this.littleEndian ) );\n\t\t\t\t\tposition.push( dataview.getFloat32( row + offset.z, this.littleEndian ) );\n\n\t\t\t\t}\n\n\t\t\t\tif ( offset.rgb !== undefined ) {\n\n\t\t\t\t\tcolor.push( dataview.getUint8( row + offset.rgb + 2 ) / 255.0 );\n\t\t\t\t\tcolor.push( dataview.getUint8( row + offset.rgb + 1 ) / 255.0 );\n\t\t\t\t\tcolor.push( dataview.getUint8( row + offset.rgb + 0 ) / 255.0 );\n\n\t\t\t\t}\n\n\t\t\t\tif ( offset.normal_x !== undefined ) {\n\n\t\t\t\t\tnormal.push( dataview.getFloat32( row + offset.normal_x, this.littleEndian ) );\n\t\t\t\t\tnormal.push( dataview.getFloat32( row + offset.normal_y, this.littleEndian ) );\n\t\t\t\t\tnormal.push( dataview.getFloat32( row + offset.normal_z, this.littleEndian ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tvar geometry = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"BufferGeometry\"]();\n\n\t\tif ( position.length > 0 ) geometry.setAttribute( 'position', new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Float32BufferAttribute\"]( position, 3 ) );\n\t\tif ( normal.length > 0 ) geometry.setAttribute( 'normal', new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Float32BufferAttribute\"]( normal, 3 ) );\n\t\tif ( color.length > 0 ) geometry.setAttribute( 'color', new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Float32BufferAttribute\"]( color, 3 ) );\n\n\t\tgeometry.computeBoundingSphere();\n\n\t\t// build material\n\n\t\tvar material = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"PointsMaterial\"]( { size: 0.005 } );\n\n\t\tif ( color.length > 0 ) {\n\n\t\t\tmaterial.vertexColors = true;\n\n\t\t} else {\n\n\t\t\tmaterial.color.setHex( Math.random() * 0xffffff );\n\n\t\t}\n\n\t\t// build point cloud\n\n\t\tvar mesh = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Points\"]( geometry, material );\n\t\tvar name = url.split( '' ).reverse().join( '' );\n\t\tname = /([^\\/]*)/.exec( name );\n\t\tname = name[ 1 ].split( '' ).reverse().join( '' );\n\t\tmesh.name = name;\n\n\t\treturn mesh;\n\n\t}\n\n} );\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL3RocmVlL2V4YW1wbGVzL2pzbS9sb2FkZXJzL1BDRExvYWRlci5qcz9lZGQ0Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQVF3Qzs7QUFFeEM7O0FBRUEsQ0FBQyw2REFBTTs7QUFFUDs7QUFFQTs7O0FBR0Esb0RBQW9ELDZEQUFNOztBQUUxRDs7QUFFQTs7QUFFQTs7QUFFQSxtQkFBbUIsaUVBQVU7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQSxJQUFJOztBQUVKOztBQUVBOztBQUVBLEtBQUs7O0FBRUw7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUEsR0FBRzs7QUFFSCxFQUFFOztBQUVGOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSxNQUFNOztBQUVOLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBLE1BQU07O0FBRU47O0FBRUEsSUFBSTs7QUFFSjs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUEsS0FBSzs7QUFFTDs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQSxLQUFLOztBQUVMLElBQUk7O0FBRUo7O0FBRUEsaURBQWlELE9BQU87O0FBRXhEOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBLGdEQUFnRCxPQUFPOztBQUV2RDs7QUFFQTs7QUFFQSxLQUFLOztBQUVMO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUEsaUJBQWlCLGtFQUFXOztBQUU1Qjs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBLHFDQUFxQyxPQUFPOztBQUU1Qzs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsbUJBQW1CLHNCQUFzQjs7QUFFekM7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQSw0QkFBNEIsc0JBQXNCOztBQUVsRDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQSxxQkFBcUIscUVBQWM7O0FBRW5DLG9FQUFvRSw2RUFBc0I7QUFDMUYsZ0VBQWdFLDZFQUFzQjtBQUN0Riw4REFBOEQsNkVBQXNCOztBQUVwRjs7QUFFQTs7QUFFQSxxQkFBcUIscUVBQWMsR0FBRyxjQUFjOztBQUVwRDs7QUFFQTs7QUFFQSxHQUFHOztBQUVIOztBQUVBOztBQUVBOztBQUVBLGlCQUFpQiw2REFBTTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQSxDQUFDOztBQUVvQiIsImZpbGUiOiIuL25vZGVfbW9kdWxlcy90aHJlZS9leGFtcGxlcy9qc20vbG9hZGVycy9QQ0RMb2FkZXIuanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuXHRCdWZmZXJHZW9tZXRyeSxcblx0RmlsZUxvYWRlcixcblx0RmxvYXQzMkJ1ZmZlckF0dHJpYnV0ZSxcblx0TG9hZGVyLFxuXHRMb2FkZXJVdGlscyxcblx0UG9pbnRzLFxuXHRQb2ludHNNYXRlcmlhbFxufSBmcm9tICcuLi8uLi8uLi9idWlsZC90aHJlZS5tb2R1bGUuanMnO1xuXG52YXIgUENETG9hZGVyID0gZnVuY3Rpb24gKCBtYW5hZ2VyICkge1xuXG5cdExvYWRlci5jYWxsKCB0aGlzLCBtYW5hZ2VyICk7XG5cblx0dGhpcy5saXR0bGVFbmRpYW4gPSB0cnVlO1xuXG59O1xuXG5cblBDRExvYWRlci5wcm90b3R5cGUgPSBPYmplY3QuYXNzaWduKCBPYmplY3QuY3JlYXRlKCBMb2FkZXIucHJvdG90eXBlICksIHtcblxuXHRjb25zdHJ1Y3RvcjogUENETG9hZGVyLFxuXG5cdGxvYWQ6IGZ1bmN0aW9uICggdXJsLCBvbkxvYWQsIG9uUHJvZ3Jlc3MsIG9uRXJyb3IgKSB7XG5cblx0XHR2YXIgc2NvcGUgPSB0aGlzO1xuXG5cdFx0dmFyIGxvYWRlciA9IG5ldyBGaWxlTG9hZGVyKCBzY29wZS5tYW5hZ2VyICk7XG5cdFx0bG9hZGVyLnNldFBhdGgoIHNjb3BlLnBhdGggKTtcblx0XHRsb2FkZXIuc2V0UmVzcG9uc2VUeXBlKCAnYXJyYXlidWZmZXInICk7XG5cdFx0bG9hZGVyLnNldFJlcXVlc3RIZWFkZXIoIHNjb3BlLnJlcXVlc3RIZWFkZXIgKTtcblx0XHRsb2FkZXIuc2V0V2l0aENyZWRlbnRpYWxzKCBzY29wZS53aXRoQ3JlZGVudGlhbHMgKTtcblx0XHRsb2FkZXIubG9hZCggdXJsLCBmdW5jdGlvbiAoIGRhdGEgKSB7XG5cblx0XHRcdHRyeSB7XG5cblx0XHRcdFx0b25Mb2FkKCBzY29wZS5wYXJzZSggZGF0YSwgdXJsICkgKTtcblxuXHRcdFx0fSBjYXRjaCAoIGUgKSB7XG5cblx0XHRcdFx0aWYgKCBvbkVycm9yICkge1xuXG5cdFx0XHRcdFx0b25FcnJvciggZSApO1xuXG5cdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRjb25zb2xlLmVycm9yKCBlICk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdHNjb3BlLm1hbmFnZXIuaXRlbUVycm9yKCB1cmwgKTtcblxuXHRcdFx0fVxuXG5cdFx0fSwgb25Qcm9ncmVzcywgb25FcnJvciApO1xuXG5cdH0sXG5cblx0cGFyc2U6IGZ1bmN0aW9uICggZGF0YSwgdXJsICkge1xuXG5cdFx0Ly8gZnJvbSBodHRwczovL2dpdGxhYi5jb20vdGFrZXR3by90aHJlZS1wY2QtbG9hZGVyL2Jsb2IvbWFzdGVyL2RlY29tcHJlc3MtbHpmLmpzXG5cblx0XHRmdW5jdGlvbiBkZWNvbXByZXNzTFpGKCBpbkRhdGEsIG91dExlbmd0aCApIHtcblxuXHRcdFx0dmFyIGluTGVuZ3RoID0gaW5EYXRhLmxlbmd0aDtcblx0XHRcdHZhciBvdXREYXRhID0gbmV3IFVpbnQ4QXJyYXkoIG91dExlbmd0aCApO1xuXHRcdFx0dmFyIGluUHRyID0gMDtcblx0XHRcdHZhciBvdXRQdHIgPSAwO1xuXHRcdFx0dmFyIGN0cmw7XG5cdFx0XHR2YXIgbGVuO1xuXHRcdFx0dmFyIHJlZjtcblx0XHRcdGRvIHtcblxuXHRcdFx0XHRjdHJsID0gaW5EYXRhWyBpblB0ciArKyBdO1xuXHRcdFx0XHRpZiAoIGN0cmwgPCAoIDEgPDwgNSApICkge1xuXG5cdFx0XHRcdFx0Y3RybCArKztcblx0XHRcdFx0XHRpZiAoIG91dFB0ciArIGN0cmwgPiBvdXRMZW5ndGggKSB0aHJvdyBuZXcgRXJyb3IoICdPdXRwdXQgYnVmZmVyIGlzIG5vdCBsYXJnZSBlbm91Z2gnICk7XG5cdFx0XHRcdFx0aWYgKCBpblB0ciArIGN0cmwgPiBpbkxlbmd0aCApIHRocm93IG5ldyBFcnJvciggJ0ludmFsaWQgY29tcHJlc3NlZCBkYXRhJyApO1xuXHRcdFx0XHRcdGRvIHtcblxuXHRcdFx0XHRcdFx0b3V0RGF0YVsgb3V0UHRyICsrIF0gPSBpbkRhdGFbIGluUHRyICsrIF07XG5cblx0XHRcdFx0XHR9IHdoaWxlICggLS0gY3RybCApO1xuXG5cdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRsZW4gPSBjdHJsID4+IDU7XG5cdFx0XHRcdFx0cmVmID0gb3V0UHRyIC0gKCAoIGN0cmwgJiAweDFmICkgPDwgOCApIC0gMTtcblx0XHRcdFx0XHRpZiAoIGluUHRyID49IGluTGVuZ3RoICkgdGhyb3cgbmV3IEVycm9yKCAnSW52YWxpZCBjb21wcmVzc2VkIGRhdGEnICk7XG5cdFx0XHRcdFx0aWYgKCBsZW4gPT09IDcgKSB7XG5cblx0XHRcdFx0XHRcdGxlbiArPSBpbkRhdGFbIGluUHRyICsrIF07XG5cdFx0XHRcdFx0XHRpZiAoIGluUHRyID49IGluTGVuZ3RoICkgdGhyb3cgbmV3IEVycm9yKCAnSW52YWxpZCBjb21wcmVzc2VkIGRhdGEnICk7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRyZWYgLT0gaW5EYXRhWyBpblB0ciArKyBdO1xuXHRcdFx0XHRcdGlmICggb3V0UHRyICsgbGVuICsgMiA+IG91dExlbmd0aCApIHRocm93IG5ldyBFcnJvciggJ091dHB1dCBidWZmZXIgaXMgbm90IGxhcmdlIGVub3VnaCcgKTtcblx0XHRcdFx0XHRpZiAoIHJlZiA8IDAgKSB0aHJvdyBuZXcgRXJyb3IoICdJbnZhbGlkIGNvbXByZXNzZWQgZGF0YScgKTtcblx0XHRcdFx0XHRpZiAoIHJlZiA+PSBvdXRQdHIgKSB0aHJvdyBuZXcgRXJyb3IoICdJbnZhbGlkIGNvbXByZXNzZWQgZGF0YScgKTtcblx0XHRcdFx0XHRkbyB7XG5cblx0XHRcdFx0XHRcdG91dERhdGFbIG91dFB0ciArKyBdID0gb3V0RGF0YVsgcmVmICsrIF07XG5cblx0XHRcdFx0XHR9IHdoaWxlICggLS0gbGVuICsgMiApO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fSB3aGlsZSAoIGluUHRyIDwgaW5MZW5ndGggKTtcblxuXHRcdFx0cmV0dXJuIG91dERhdGE7XG5cblx0XHR9XG5cblx0XHRmdW5jdGlvbiBwYXJzZUhlYWRlciggZGF0YSApIHtcblxuXHRcdFx0dmFyIFBDRGhlYWRlciA9IHt9O1xuXHRcdFx0dmFyIHJlc3VsdDEgPSBkYXRhLnNlYXJjaCggL1tcXHJcXG5dREFUQVxccyhcXFMqKVxccy9pICk7XG5cdFx0XHR2YXIgcmVzdWx0MiA9IC9bXFxyXFxuXURBVEFcXHMoXFxTKilcXHMvaS5leGVjKCBkYXRhLnN1YnN0ciggcmVzdWx0MSAtIDEgKSApO1xuXG5cdFx0XHRQQ0RoZWFkZXIuZGF0YSA9IHJlc3VsdDJbIDEgXTtcblx0XHRcdFBDRGhlYWRlci5oZWFkZXJMZW4gPSByZXN1bHQyWyAwIF0ubGVuZ3RoICsgcmVzdWx0MTtcblx0XHRcdFBDRGhlYWRlci5zdHIgPSBkYXRhLnN1YnN0ciggMCwgUENEaGVhZGVyLmhlYWRlckxlbiApO1xuXG5cdFx0XHQvLyByZW1vdmUgY29tbWVudHNcblxuXHRcdFx0UENEaGVhZGVyLnN0ciA9IFBDRGhlYWRlci5zdHIucmVwbGFjZSggL1xcIy4qL2dpLCAnJyApO1xuXG5cdFx0XHQvLyBwYXJzZVxuXG5cdFx0XHRQQ0RoZWFkZXIudmVyc2lvbiA9IC9WRVJTSU9OICguKikvaS5leGVjKCBQQ0RoZWFkZXIuc3RyICk7XG5cdFx0XHRQQ0RoZWFkZXIuZmllbGRzID0gL0ZJRUxEUyAoLiopL2kuZXhlYyggUENEaGVhZGVyLnN0ciApO1xuXHRcdFx0UENEaGVhZGVyLnNpemUgPSAvU0laRSAoLiopL2kuZXhlYyggUENEaGVhZGVyLnN0ciApO1xuXHRcdFx0UENEaGVhZGVyLnR5cGUgPSAvVFlQRSAoLiopL2kuZXhlYyggUENEaGVhZGVyLnN0ciApO1xuXHRcdFx0UENEaGVhZGVyLmNvdW50ID0gL0NPVU5UICguKikvaS5leGVjKCBQQ0RoZWFkZXIuc3RyICk7XG5cdFx0XHRQQ0RoZWFkZXIud2lkdGggPSAvV0lEVEggKC4qKS9pLmV4ZWMoIFBDRGhlYWRlci5zdHIgKTtcblx0XHRcdFBDRGhlYWRlci5oZWlnaHQgPSAvSEVJR0hUICguKikvaS5leGVjKCBQQ0RoZWFkZXIuc3RyICk7XG5cdFx0XHRQQ0RoZWFkZXIudmlld3BvaW50ID0gL1ZJRVdQT0lOVCAoLiopL2kuZXhlYyggUENEaGVhZGVyLnN0ciApO1xuXHRcdFx0UENEaGVhZGVyLnBvaW50cyA9IC9QT0lOVFMgKC4qKS9pLmV4ZWMoIFBDRGhlYWRlci5zdHIgKTtcblxuXHRcdFx0Ly8gZXZhbHVhdGVcblxuXHRcdFx0aWYgKCBQQ0RoZWFkZXIudmVyc2lvbiAhPT0gbnVsbCApXG5cdFx0XHRcdFBDRGhlYWRlci52ZXJzaW9uID0gcGFyc2VGbG9hdCggUENEaGVhZGVyLnZlcnNpb25bIDEgXSApO1xuXG5cdFx0XHRpZiAoIFBDRGhlYWRlci5maWVsZHMgIT09IG51bGwgKVxuXHRcdFx0XHRQQ0RoZWFkZXIuZmllbGRzID0gUENEaGVhZGVyLmZpZWxkc1sgMSBdLnNwbGl0KCAnICcgKTtcblxuXHRcdFx0aWYgKCBQQ0RoZWFkZXIudHlwZSAhPT0gbnVsbCApXG5cdFx0XHRcdFBDRGhlYWRlci50eXBlID0gUENEaGVhZGVyLnR5cGVbIDEgXS5zcGxpdCggJyAnICk7XG5cblx0XHRcdGlmICggUENEaGVhZGVyLndpZHRoICE9PSBudWxsIClcblx0XHRcdFx0UENEaGVhZGVyLndpZHRoID0gcGFyc2VJbnQoIFBDRGhlYWRlci53aWR0aFsgMSBdICk7XG5cblx0XHRcdGlmICggUENEaGVhZGVyLmhlaWdodCAhPT0gbnVsbCApXG5cdFx0XHRcdFBDRGhlYWRlci5oZWlnaHQgPSBwYXJzZUludCggUENEaGVhZGVyLmhlaWdodFsgMSBdICk7XG5cblx0XHRcdGlmICggUENEaGVhZGVyLnZpZXdwb2ludCAhPT0gbnVsbCApXG5cdFx0XHRcdFBDRGhlYWRlci52aWV3cG9pbnQgPSBQQ0RoZWFkZXIudmlld3BvaW50WyAxIF07XG5cblx0XHRcdGlmICggUENEaGVhZGVyLnBvaW50cyAhPT0gbnVsbCApXG5cdFx0XHRcdFBDRGhlYWRlci5wb2ludHMgPSBwYXJzZUludCggUENEaGVhZGVyLnBvaW50c1sgMSBdLCAxMCApO1xuXG5cdFx0XHRpZiAoIFBDRGhlYWRlci5wb2ludHMgPT09IG51bGwgKVxuXHRcdFx0XHRQQ0RoZWFkZXIucG9pbnRzID0gUENEaGVhZGVyLndpZHRoICogUENEaGVhZGVyLmhlaWdodDtcblxuXHRcdFx0aWYgKCBQQ0RoZWFkZXIuc2l6ZSAhPT0gbnVsbCApIHtcblxuXHRcdFx0XHRQQ0RoZWFkZXIuc2l6ZSA9IFBDRGhlYWRlci5zaXplWyAxIF0uc3BsaXQoICcgJyApLm1hcCggZnVuY3Rpb24gKCB4ICkge1xuXG5cdFx0XHRcdFx0cmV0dXJuIHBhcnNlSW50KCB4LCAxMCApO1xuXG5cdFx0XHRcdH0gKTtcblxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIFBDRGhlYWRlci5jb3VudCAhPT0gbnVsbCApIHtcblxuXHRcdFx0XHRQQ0RoZWFkZXIuY291bnQgPSBQQ0RoZWFkZXIuY291bnRbIDEgXS5zcGxpdCggJyAnICkubWFwKCBmdW5jdGlvbiAoIHggKSB7XG5cblx0XHRcdFx0XHRyZXR1cm4gcGFyc2VJbnQoIHgsIDEwICk7XG5cblx0XHRcdFx0fSApO1xuXG5cdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFBDRGhlYWRlci5jb3VudCA9IFtdO1xuXG5cdFx0XHRcdGZvciAoIHZhciBpID0gMCwgbCA9IFBDRGhlYWRlci5maWVsZHMubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcblxuXHRcdFx0XHRcdFBDRGhlYWRlci5jb3VudC5wdXNoKCAxICk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9XG5cblx0XHRcdFBDRGhlYWRlci5vZmZzZXQgPSB7fTtcblxuXHRcdFx0dmFyIHNpemVTdW0gPSAwO1xuXG5cdFx0XHRmb3IgKCB2YXIgaSA9IDAsIGwgPSBQQ0RoZWFkZXIuZmllbGRzLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG5cblx0XHRcdFx0aWYgKCBQQ0RoZWFkZXIuZGF0YSA9PT0gJ2FzY2lpJyApIHtcblxuXHRcdFx0XHRcdFBDRGhlYWRlci5vZmZzZXRbIFBDRGhlYWRlci5maWVsZHNbIGkgXSBdID0gaTtcblxuXHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0UENEaGVhZGVyLm9mZnNldFsgUENEaGVhZGVyLmZpZWxkc1sgaSBdIF0gPSBzaXplU3VtO1xuXHRcdFx0XHRcdHNpemVTdW0gKz0gUENEaGVhZGVyLnNpemVbIGkgXSAqIFBDRGhlYWRlci5jb3VudFsgaSBdO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fVxuXG5cdFx0XHQvLyBmb3IgYmluYXJ5IG9ubHlcblxuXHRcdFx0UENEaGVhZGVyLnJvd1NpemUgPSBzaXplU3VtO1xuXG5cdFx0XHRyZXR1cm4gUENEaGVhZGVyO1xuXG5cdFx0fVxuXG5cdFx0dmFyIHRleHREYXRhID0gTG9hZGVyVXRpbHMuZGVjb2RlVGV4dCggbmV3IFVpbnQ4QXJyYXkoIGRhdGEgKSApO1xuXG5cdFx0Ly8gcGFyc2UgaGVhZGVyIChhbHdheXMgYXNjaWkgZm9ybWF0KVxuXG5cdFx0dmFyIFBDRGhlYWRlciA9IHBhcnNlSGVhZGVyKCB0ZXh0RGF0YSApO1xuXG5cdFx0Ly8gcGFyc2UgZGF0YVxuXG5cdFx0dmFyIHBvc2l0aW9uID0gW107XG5cdFx0dmFyIG5vcm1hbCA9IFtdO1xuXHRcdHZhciBjb2xvciA9IFtdO1xuXG5cdFx0Ly8gYXNjaWlcblxuXHRcdGlmICggUENEaGVhZGVyLmRhdGEgPT09ICdhc2NpaScgKSB7XG5cblx0XHRcdHZhciBvZmZzZXQgPSBQQ0RoZWFkZXIub2Zmc2V0O1xuXHRcdFx0dmFyIHBjZERhdGEgPSB0ZXh0RGF0YS5zdWJzdHIoIFBDRGhlYWRlci5oZWFkZXJMZW4gKTtcblx0XHRcdHZhciBsaW5lcyA9IHBjZERhdGEuc3BsaXQoICdcXG4nICk7XG5cblx0XHRcdGZvciAoIHZhciBpID0gMCwgbCA9IGxpbmVzLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG5cblx0XHRcdFx0aWYgKCBsaW5lc1sgaSBdID09PSAnJyApIGNvbnRpbnVlO1xuXG5cdFx0XHRcdHZhciBsaW5lID0gbGluZXNbIGkgXS5zcGxpdCggJyAnICk7XG5cblx0XHRcdFx0aWYgKCBvZmZzZXQueCAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRcdFx0cG9zaXRpb24ucHVzaCggcGFyc2VGbG9hdCggbGluZVsgb2Zmc2V0LnggXSApICk7XG5cdFx0XHRcdFx0cG9zaXRpb24ucHVzaCggcGFyc2VGbG9hdCggbGluZVsgb2Zmc2V0LnkgXSApICk7XG5cdFx0XHRcdFx0cG9zaXRpb24ucHVzaCggcGFyc2VGbG9hdCggbGluZVsgb2Zmc2V0LnogXSApICk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmICggb2Zmc2V0LnJnYiAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRcdFx0dmFyIHJnYiA9IHBhcnNlRmxvYXQoIGxpbmVbIG9mZnNldC5yZ2IgXSApO1xuXHRcdFx0XHRcdHZhciByID0gKCByZ2IgPj4gMTYgKSAmIDB4MDAwMGZmO1xuXHRcdFx0XHRcdHZhciBnID0gKCByZ2IgPj4gOCApICYgMHgwMDAwZmY7XG5cdFx0XHRcdFx0dmFyIGIgPSAoIHJnYiA+PiAwICkgJiAweDAwMDBmZjtcblx0XHRcdFx0XHRjb2xvci5wdXNoKCByIC8gMjU1LCBnIC8gMjU1LCBiIC8gMjU1ICk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmICggb2Zmc2V0Lm5vcm1hbF94ICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0XHRub3JtYWwucHVzaCggcGFyc2VGbG9hdCggbGluZVsgb2Zmc2V0Lm5vcm1hbF94IF0gKSApO1xuXHRcdFx0XHRcdG5vcm1hbC5wdXNoKCBwYXJzZUZsb2F0KCBsaW5lWyBvZmZzZXQubm9ybWFsX3kgXSApICk7XG5cdFx0XHRcdFx0bm9ybWFsLnB1c2goIHBhcnNlRmxvYXQoIGxpbmVbIG9mZnNldC5ub3JtYWxfeiBdICkgKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdH1cblxuXHRcdH1cblxuXHRcdC8vIGJpbmFyeS1jb21wcmVzc2VkXG5cblx0XHQvLyBub3JtYWxseSBkYXRhIGluIFBDRCBmaWxlcyBhcmUgb3JnYW5pemVkIGFzIGFycmF5IG9mIHN0cnVjdHVyZXM6IFhZWlJHQlhZWlJHQlxuXHRcdC8vIGJpbmFyeSBjb21wcmVzc2VkIFBDRCBmaWxlcyBvcmdhbml6ZSB0aGVpciBkYXRhIGFzIHN0cnVjdHVyZSBvZiBhcnJheXM6IFhYWVlaWlJHQlJHQlxuXHRcdC8vIHRoYXQgcmVxdWlyZXMgYSB0b3RhbGx5IGRpZmZlcmVudCBwYXJzaW5nIGFwcHJvYWNoIGNvbXBhcmVkIHRvIG5vbi1jb21wcmVzc2VkIGRhdGFcblxuXHRcdGlmICggUENEaGVhZGVyLmRhdGEgPT09ICdiaW5hcnlfY29tcHJlc3NlZCcgKSB7XG5cblx0XHRcdHZhciBzaXplcyA9IG5ldyBVaW50MzJBcnJheSggZGF0YS5zbGljZSggUENEaGVhZGVyLmhlYWRlckxlbiwgUENEaGVhZGVyLmhlYWRlckxlbiArIDggKSApO1xuXHRcdFx0dmFyIGNvbXByZXNzZWRTaXplID0gc2l6ZXNbIDAgXTtcblx0XHRcdHZhciBkZWNvbXByZXNzZWRTaXplID0gc2l6ZXNbIDEgXTtcblx0XHRcdHZhciBkZWNvbXByZXNzZWQgPSBkZWNvbXByZXNzTFpGKCBuZXcgVWludDhBcnJheSggZGF0YSwgUENEaGVhZGVyLmhlYWRlckxlbiArIDgsIGNvbXByZXNzZWRTaXplICksIGRlY29tcHJlc3NlZFNpemUgKTtcblx0XHRcdHZhciBkYXRhdmlldyA9IG5ldyBEYXRhVmlldyggZGVjb21wcmVzc2VkLmJ1ZmZlciApO1xuXG5cdFx0XHR2YXIgb2Zmc2V0ID0gUENEaGVhZGVyLm9mZnNldDtcblxuXHRcdFx0Zm9yICggdmFyIGkgPSAwOyBpIDwgUENEaGVhZGVyLnBvaW50czsgaSArKyApIHtcblxuXHRcdFx0XHRpZiAoIG9mZnNldC54ICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0XHRwb3NpdGlvbi5wdXNoKCBkYXRhdmlldy5nZXRGbG9hdDMyKCAoIFBDRGhlYWRlci5wb2ludHMgKiBvZmZzZXQueCApICsgUENEaGVhZGVyLnNpemVbIDAgXSAqIGksIHRoaXMubGl0dGxlRW5kaWFuICkgKTtcblx0XHRcdFx0XHRwb3NpdGlvbi5wdXNoKCBkYXRhdmlldy5nZXRGbG9hdDMyKCAoIFBDRGhlYWRlci5wb2ludHMgKiBvZmZzZXQueSApICsgUENEaGVhZGVyLnNpemVbIDEgXSAqIGksIHRoaXMubGl0dGxlRW5kaWFuICkgKTtcblx0XHRcdFx0XHRwb3NpdGlvbi5wdXNoKCBkYXRhdmlldy5nZXRGbG9hdDMyKCAoIFBDRGhlYWRlci5wb2ludHMgKiBvZmZzZXQueiApICsgUENEaGVhZGVyLnNpemVbIDIgXSAqIGksIHRoaXMubGl0dGxlRW5kaWFuICkgKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKCBvZmZzZXQucmdiICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0XHRjb2xvci5wdXNoKCBkYXRhdmlldy5nZXRVaW50OCggKCBQQ0RoZWFkZXIucG9pbnRzICogb2Zmc2V0LnJnYiApICsgUENEaGVhZGVyLnNpemVbIDMgXSAqIGkgKyAwICkgLyAyNTUuMCApO1xuXHRcdFx0XHRcdGNvbG9yLnB1c2goIGRhdGF2aWV3LmdldFVpbnQ4KCAoIFBDRGhlYWRlci5wb2ludHMgKiBvZmZzZXQucmdiICkgKyBQQ0RoZWFkZXIuc2l6ZVsgMyBdICogaSArIDEgKSAvIDI1NS4wICk7XG5cdFx0XHRcdFx0Y29sb3IucHVzaCggZGF0YXZpZXcuZ2V0VWludDgoICggUENEaGVhZGVyLnBvaW50cyAqIG9mZnNldC5yZ2IgKSArIFBDRGhlYWRlci5zaXplWyAzIF0gKiBpICsgMiApIC8gMjU1LjAgKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKCBvZmZzZXQubm9ybWFsX3ggIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0XHRcdG5vcm1hbC5wdXNoKCBkYXRhdmlldy5nZXRGbG9hdDMyKCAoIFBDRGhlYWRlci5wb2ludHMgKiBvZmZzZXQubm9ybWFsX3ggKSArIFBDRGhlYWRlci5zaXplWyA0IF0gKiBpLCB0aGlzLmxpdHRsZUVuZGlhbiApICk7XG5cdFx0XHRcdFx0bm9ybWFsLnB1c2goIGRhdGF2aWV3LmdldEZsb2F0MzIoICggUENEaGVhZGVyLnBvaW50cyAqIG9mZnNldC5ub3JtYWxfeSApICsgUENEaGVhZGVyLnNpemVbIDUgXSAqIGksIHRoaXMubGl0dGxlRW5kaWFuICkgKTtcblx0XHRcdFx0XHRub3JtYWwucHVzaCggZGF0YXZpZXcuZ2V0RmxvYXQzMiggKCBQQ0RoZWFkZXIucG9pbnRzICogb2Zmc2V0Lm5vcm1hbF96ICkgKyBQQ0RoZWFkZXIuc2l6ZVsgNiBdICogaSwgdGhpcy5saXR0bGVFbmRpYW4gKSApO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fVxuXG5cdFx0fVxuXG5cdFx0Ly8gYmluYXJ5XG5cblx0XHRpZiAoIFBDRGhlYWRlci5kYXRhID09PSAnYmluYXJ5JyApIHtcblxuXHRcdFx0dmFyIGRhdGF2aWV3ID0gbmV3IERhdGFWaWV3KCBkYXRhLCBQQ0RoZWFkZXIuaGVhZGVyTGVuICk7XG5cdFx0XHR2YXIgb2Zmc2V0ID0gUENEaGVhZGVyLm9mZnNldDtcblxuXHRcdFx0Zm9yICggdmFyIGkgPSAwLCByb3cgPSAwOyBpIDwgUENEaGVhZGVyLnBvaW50czsgaSArKywgcm93ICs9IFBDRGhlYWRlci5yb3dTaXplICkge1xuXG5cdFx0XHRcdGlmICggb2Zmc2V0LnggIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0XHRcdHBvc2l0aW9uLnB1c2goIGRhdGF2aWV3LmdldEZsb2F0MzIoIHJvdyArIG9mZnNldC54LCB0aGlzLmxpdHRsZUVuZGlhbiApICk7XG5cdFx0XHRcdFx0cG9zaXRpb24ucHVzaCggZGF0YXZpZXcuZ2V0RmxvYXQzMiggcm93ICsgb2Zmc2V0LnksIHRoaXMubGl0dGxlRW5kaWFuICkgKTtcblx0XHRcdFx0XHRwb3NpdGlvbi5wdXNoKCBkYXRhdmlldy5nZXRGbG9hdDMyKCByb3cgKyBvZmZzZXQueiwgdGhpcy5saXR0bGVFbmRpYW4gKSApO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoIG9mZnNldC5yZ2IgIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0XHRcdGNvbG9yLnB1c2goIGRhdGF2aWV3LmdldFVpbnQ4KCByb3cgKyBvZmZzZXQucmdiICsgMiApIC8gMjU1LjAgKTtcblx0XHRcdFx0XHRjb2xvci5wdXNoKCBkYXRhdmlldy5nZXRVaW50OCggcm93ICsgb2Zmc2V0LnJnYiArIDEgKSAvIDI1NS4wICk7XG5cdFx0XHRcdFx0Y29sb3IucHVzaCggZGF0YXZpZXcuZ2V0VWludDgoIHJvdyArIG9mZnNldC5yZ2IgKyAwICkgLyAyNTUuMCApO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoIG9mZnNldC5ub3JtYWxfeCAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRcdFx0bm9ybWFsLnB1c2goIGRhdGF2aWV3LmdldEZsb2F0MzIoIHJvdyArIG9mZnNldC5ub3JtYWxfeCwgdGhpcy5saXR0bGVFbmRpYW4gKSApO1xuXHRcdFx0XHRcdG5vcm1hbC5wdXNoKCBkYXRhdmlldy5nZXRGbG9hdDMyKCByb3cgKyBvZmZzZXQubm9ybWFsX3ksIHRoaXMubGl0dGxlRW5kaWFuICkgKTtcblx0XHRcdFx0XHRub3JtYWwucHVzaCggZGF0YXZpZXcuZ2V0RmxvYXQzMiggcm93ICsgb2Zmc2V0Lm5vcm1hbF96LCB0aGlzLmxpdHRsZUVuZGlhbiApICk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9XG5cblx0XHR9XG5cblx0XHQvLyBidWlsZCBnZW9tZXRyeVxuXG5cdFx0dmFyIGdlb21ldHJ5ID0gbmV3IEJ1ZmZlckdlb21ldHJ5KCk7XG5cblx0XHRpZiAoIHBvc2l0aW9uLmxlbmd0aCA+IDAgKSBnZW9tZXRyeS5zZXRBdHRyaWJ1dGUoICdwb3NpdGlvbicsIG5ldyBGbG9hdDMyQnVmZmVyQXR0cmlidXRlKCBwb3NpdGlvbiwgMyApICk7XG5cdFx0aWYgKCBub3JtYWwubGVuZ3RoID4gMCApIGdlb21ldHJ5LnNldEF0dHJpYnV0ZSggJ25vcm1hbCcsIG5ldyBGbG9hdDMyQnVmZmVyQXR0cmlidXRlKCBub3JtYWwsIDMgKSApO1xuXHRcdGlmICggY29sb3IubGVuZ3RoID4gMCApIGdlb21ldHJ5LnNldEF0dHJpYnV0ZSggJ2NvbG9yJywgbmV3IEZsb2F0MzJCdWZmZXJBdHRyaWJ1dGUoIGNvbG9yLCAzICkgKTtcblxuXHRcdGdlb21ldHJ5LmNvbXB1dGVCb3VuZGluZ1NwaGVyZSgpO1xuXG5cdFx0Ly8gYnVpbGQgbWF0ZXJpYWxcblxuXHRcdHZhciBtYXRlcmlhbCA9IG5ldyBQb2ludHNNYXRlcmlhbCggeyBzaXplOiAwLjAwNSB9ICk7XG5cblx0XHRpZiAoIGNvbG9yLmxlbmd0aCA+IDAgKSB7XG5cblx0XHRcdG1hdGVyaWFsLnZlcnRleENvbG9ycyA9IHRydWU7XG5cblx0XHR9IGVsc2Uge1xuXG5cdFx0XHRtYXRlcmlhbC5jb2xvci5zZXRIZXgoIE1hdGgucmFuZG9tKCkgKiAweGZmZmZmZiApO1xuXG5cdFx0fVxuXG5cdFx0Ly8gYnVpbGQgcG9pbnQgY2xvdWRcblxuXHRcdHZhciBtZXNoID0gbmV3IFBvaW50cyggZ2VvbWV0cnksIG1hdGVyaWFsICk7XG5cdFx0dmFyIG5hbWUgPSB1cmwuc3BsaXQoICcnICkucmV2ZXJzZSgpLmpvaW4oICcnICk7XG5cdFx0bmFtZSA9IC8oW15cXC9dKikvLmV4ZWMoIG5hbWUgKTtcblx0XHRuYW1lID0gbmFtZVsgMSBdLnNwbGl0KCAnJyApLnJldmVyc2UoKS5qb2luKCAnJyApO1xuXHRcdG1lc2gubmFtZSA9IG5hbWU7XG5cblx0XHRyZXR1cm4gbWVzaDtcblxuXHR9XG5cbn0gKTtcblxuZXhwb3J0IHsgUENETG9hZGVyIH07XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/three/examples/jsm/loaders/PCDLoader.js\n");

/***/ }),

/***/ "./node_modules/three/examples/jsm/loaders/PLYLoader.js":
/*!**************************************************************!*\
  !*** ./node_modules/three/examples/jsm/loaders/PLYLoader.js ***!
  \**************************************************************/
/*! exports provided: PLYLoader */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"PLYLoader\", function() { return PLYLoader; });\n/* harmony import */ var _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../build/three.module.js */ \"./node_modules/three/build/three.module.js\");\n\n\n/**\n * Description: A THREE loader for PLY ASCII files (known as the Polygon\n * File Format or the Stanford Triangle Format).\n *\n * Limitations: ASCII decoding assumes file is UTF-8.\n *\n * Usage:\n *\tvar loader = new PLYLoader();\n *\tloader.load('./models/ply/ascii/dolphins.ply', function (geometry) {\n *\n *\t\tscene.add( new THREE.Mesh( geometry ) );\n *\n *\t} );\n *\n * If the PLY file uses non standard property names, they can be mapped while\n * loading. For example, the following maps the properties\n * “diffuse_(red|green|blue)” in the file to standard color names.\n *\n * loader.setPropertyNameMapping( {\n *\tdiffuse_red: 'red',\n *\tdiffuse_green: 'green',\n *\tdiffuse_blue: 'blue'\n * } );\n *\n */\n\n\nvar PLYLoader = function ( manager ) {\n\n\t_build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Loader\"].call( this, manager );\n\n\tthis.propertyNameMapping = {};\n\n};\n\nPLYLoader.prototype = Object.assign( Object.create( _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Loader\"].prototype ), {\n\n\tconstructor: PLYLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar scope = this;\n\n\t\tvar loader = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"FileLoader\"]( this.manager );\n\t\tloader.setPath( this.path );\n\t\tloader.setResponseType( 'arraybuffer' );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setWithCredentials( this.withCredentials );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\ttry {\n\n\t\t\t\tonLoad( scope.parse( text ) );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\tif ( onError ) {\n\n\t\t\t\t\tonError( e );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( e );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t},\n\n\tsetPropertyNameMapping: function ( mapping ) {\n\n\t\tthis.propertyNameMapping = mapping;\n\n\t},\n\n\tparse: function ( data ) {\n\n\t\tfunction parseHeader( data ) {\n\n\t\t\tvar patternHeader = /ply([\\s\\S]*)end_header\\r?\\n/;\n\t\t\tvar headerText = '';\n\t\t\tvar headerLength = 0;\n\t\t\tvar result = patternHeader.exec( data );\n\n\t\t\tif ( result !== null ) {\n\n\t\t\t\theaderText = result[ 1 ];\n\t\t\t\theaderLength = new Blob( [ result[ 0 ] ] ).size;\n\n\t\t\t}\n\n\t\t\tvar header = {\n\t\t\t\tcomments: [],\n\t\t\t\telements: [],\n\t\t\t\theaderLength: headerLength,\n\t\t\t\tobjInfo: ''\n\t\t\t};\n\n\t\t\tvar lines = headerText.split( '\\n' );\n\t\t\tvar currentElement;\n\t\t\tvar lineType, lineValues;\n\n\t\t\tfunction make_ply_element_property( propertValues, propertyNameMapping ) {\n\n\t\t\t\tvar property = { type: propertValues[ 0 ] };\n\n\t\t\t\tif ( property.type === 'list' ) {\n\n\t\t\t\t\tproperty.name = propertValues[ 3 ];\n\t\t\t\t\tproperty.countType = propertValues[ 1 ];\n\t\t\t\t\tproperty.itemType = propertValues[ 2 ];\n\n\t\t\t\t} else {\n\n\t\t\t\t\tproperty.name = propertValues[ 1 ];\n\n\t\t\t\t}\n\n\t\t\t\tif ( property.name in propertyNameMapping ) {\n\n\t\t\t\t\tproperty.name = propertyNameMapping[ property.name ];\n\n\t\t\t\t}\n\n\t\t\t\treturn property;\n\n\t\t\t}\n\n\t\t\tfor ( var i = 0; i < lines.length; i ++ ) {\n\n\t\t\t\tvar line = lines[ i ];\n\t\t\t\tline = line.trim();\n\n\t\t\t\tif ( line === '' ) continue;\n\n\t\t\t\tlineValues = line.split( /\\s+/ );\n\t\t\t\tlineType = lineValues.shift();\n\t\t\t\tline = lineValues.join( ' ' );\n\n\t\t\t\tswitch ( lineType ) {\n\n\t\t\t\t\tcase 'format':\n\n\t\t\t\t\t\theader.format = lineValues[ 0 ];\n\t\t\t\t\t\theader.version = lineValues[ 1 ];\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'comment':\n\n\t\t\t\t\t\theader.comments.push( line );\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'element':\n\n\t\t\t\t\t\tif ( currentElement !== undefined ) {\n\n\t\t\t\t\t\t\theader.elements.push( currentElement );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcurrentElement = {};\n\t\t\t\t\t\tcurrentElement.name = lineValues[ 0 ];\n\t\t\t\t\t\tcurrentElement.count = parseInt( lineValues[ 1 ] );\n\t\t\t\t\t\tcurrentElement.properties = [];\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'property':\n\n\t\t\t\t\t\tcurrentElement.properties.push( make_ply_element_property( lineValues, scope.propertyNameMapping ) );\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'obj_info':\n\n\t\t\t\t\t\theader.objInfo = line;\n\n\t\t\t\t\t\tbreak;\n\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tconsole.log( 'unhandled', lineType, lineValues );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( currentElement !== undefined ) {\n\n\t\t\t\theader.elements.push( currentElement );\n\n\t\t\t}\n\n\t\t\treturn header;\n\n\t\t}\n\n\t\tfunction parseASCIINumber( n, type ) {\n\n\t\t\tswitch ( type ) {\n\n\t\t\t\tcase 'char': case 'uchar': case 'short': case 'ushort': case 'int': case 'uint':\n\t\t\t\tcase 'int8': case 'uint8': case 'int16': case 'uint16': case 'int32': case 'uint32':\n\n\t\t\t\t\treturn parseInt( n );\n\n\t\t\t\tcase 'float': case 'double': case 'float32': case 'float64':\n\n\t\t\t\t\treturn parseFloat( n );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction parseASCIIElement( properties, line ) {\n\n\t\t\tvar values = line.split( /\\s+/ );\n\n\t\t\tvar element = {};\n\n\t\t\tfor ( var i = 0; i < properties.length; i ++ ) {\n\n\t\t\t\tif ( properties[ i ].type === 'list' ) {\n\n\t\t\t\t\tvar list = [];\n\t\t\t\t\tvar n = parseASCIINumber( values.shift(), properties[ i ].countType );\n\n\t\t\t\t\tfor ( var j = 0; j < n; j ++ ) {\n\n\t\t\t\t\t\tlist.push( parseASCIINumber( values.shift(), properties[ i ].itemType ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t\telement[ properties[ i ].name ] = list;\n\n\t\t\t\t} else {\n\n\t\t\t\t\telement[ properties[ i ].name ] = parseASCIINumber( values.shift(), properties[ i ].type );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn element;\n\n\t\t}\n\n\t\tfunction parseASCII( data, header ) {\n\n\t\t\t// PLY ascii format specification, as per http://en.wikipedia.org/wiki/PLY_(file_format)\n\n\t\t\tvar buffer = {\n\t\t\t\tindices: [],\n\t\t\t\tvertices: [],\n\t\t\t\tnormals: [],\n\t\t\t\tuvs: [],\n\t\t\t\tfaceVertexUvs: [],\n\t\t\t\tcolors: []\n\t\t\t};\n\n\t\t\tvar result;\n\n\t\t\tvar patternBody = /end_header\\s([\\s\\S]*)$/;\n\t\t\tvar body = '';\n\t\t\tif ( ( result = patternBody.exec( data ) ) !== null ) {\n\n\t\t\t\tbody = result[ 1 ];\n\n\t\t\t}\n\n\t\t\tvar lines = body.split( '\\n' );\n\t\t\tvar currentElement = 0;\n\t\t\tvar currentElementCount = 0;\n\n\t\t\tfor ( var i = 0; i < lines.length; i ++ ) {\n\n\t\t\t\tvar line = lines[ i ];\n\t\t\t\tline = line.trim();\n\t\t\t\tif ( line === '' ) {\n\n\t\t\t\t\tcontinue;\n\n\t\t\t\t}\n\n\t\t\t\tif ( currentElementCount >= header.elements[ currentElement ].count ) {\n\n\t\t\t\t\tcurrentElement ++;\n\t\t\t\t\tcurrentElementCount = 0;\n\n\t\t\t\t}\n\n\t\t\t\tvar element = parseASCIIElement( header.elements[ currentElement ].properties, line );\n\n\t\t\t\thandleElement( buffer, header.elements[ currentElement ].name, element );\n\n\t\t\t\tcurrentElementCount ++;\n\n\t\t\t}\n\n\t\t\treturn postProcess( buffer );\n\n\t\t}\n\n\t\tfunction postProcess( buffer ) {\n\n\t\t\tvar geometry = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"BufferGeometry\"]();\n\n\t\t\t// mandatory buffer data\n\n\t\t\tif ( buffer.indices.length > 0 ) {\n\n\t\t\t\tgeometry.setIndex( buffer.indices );\n\n\t\t\t}\n\n\t\t\tgeometry.setAttribute( 'position', new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Float32BufferAttribute\"]( buffer.vertices, 3 ) );\n\n\t\t\t// optional buffer data\n\n\t\t\tif ( buffer.normals.length > 0 ) {\n\n\t\t\t\tgeometry.setAttribute( 'normal', new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Float32BufferAttribute\"]( buffer.normals, 3 ) );\n\n\t\t\t}\n\n\t\t\tif ( buffer.uvs.length > 0 ) {\n\n\t\t\t\tgeometry.setAttribute( 'uv', new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Float32BufferAttribute\"]( buffer.uvs, 2 ) );\n\n\t\t\t}\n\n\t\t\tif ( buffer.colors.length > 0 ) {\n\n\t\t\t\tgeometry.setAttribute( 'color', new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Float32BufferAttribute\"]( buffer.colors, 3 ) );\n\n\t\t\t}\n\n\t\t\tif ( buffer.faceVertexUvs.length > 0 ) {\n\n\t\t\t\tgeometry = geometry.toNonIndexed();\n\t\t\t\tgeometry.setAttribute( 'uv', new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Float32BufferAttribute\"]( buffer.faceVertexUvs, 2 ) );\n\n\t\t\t}\n\n\t\t\tgeometry.computeBoundingSphere();\n\n\t\t\treturn geometry;\n\n\t\t}\n\n\t\tfunction handleElement( buffer, elementName, element ) {\n\n\t\t\tif ( elementName === 'vertex' ) {\n\n\t\t\t\tbuffer.vertices.push( element.x, element.y, element.z );\n\n\t\t\t\tif ( 'nx' in element && 'ny' in element && 'nz' in element ) {\n\n\t\t\t\t\tbuffer.normals.push( element.nx, element.ny, element.nz );\n\n\t\t\t\t}\n\n\t\t\t\tif ( 's' in element && 't' in element ) {\n\n\t\t\t\t\tbuffer.uvs.push( element.s, element.t );\n\n\t\t\t\t}\n\n\t\t\t\tif ( 'red' in element && 'green' in element && 'blue' in element ) {\n\n\t\t\t\t\tbuffer.colors.push( element.red / 255.0, element.green / 255.0, element.blue / 255.0 );\n\n\t\t\t\t}\n\n\t\t\t} else if ( elementName === 'face' ) {\n\n\t\t\t\tvar vertex_indices = element.vertex_indices || element.vertex_index; // issue #9338\n\t\t\t\tvar texcoord = element.texcoord;\n\n\t\t\t\tif ( vertex_indices.length === 3 ) {\n\n\t\t\t\t\tbuffer.indices.push( vertex_indices[ 0 ], vertex_indices[ 1 ], vertex_indices[ 2 ] );\n\n\t\t\t\t\tif ( texcoord && texcoord.length === 6 ) {\n\n\t\t\t\t\t\tbuffer.faceVertexUvs.push( texcoord[ 0 ], texcoord[ 1 ] );\n\t\t\t\t\t\tbuffer.faceVertexUvs.push( texcoord[ 2 ], texcoord[ 3 ] );\n\t\t\t\t\t\tbuffer.faceVertexUvs.push( texcoord[ 4 ], texcoord[ 5 ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( vertex_indices.length === 4 ) {\n\n\t\t\t\t\tbuffer.indices.push( vertex_indices[ 0 ], vertex_indices[ 1 ], vertex_indices[ 3 ] );\n\t\t\t\t\tbuffer.indices.push( vertex_indices[ 1 ], vertex_indices[ 2 ], vertex_indices[ 3 ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction binaryRead( dataview, at, type, little_endian ) {\n\n\t\t\tswitch ( type ) {\n\n\t\t\t\t// corespondences for non-specific length types here match rply:\n\t\t\t\tcase 'int8':\t\tcase 'char':\t return [ dataview.getInt8( at ), 1 ];\n\t\t\t\tcase 'uint8':\t\tcase 'uchar':\t return [ dataview.getUint8( at ), 1 ];\n\t\t\t\tcase 'int16':\t\tcase 'short':\t return [ dataview.getInt16( at, little_endian ), 2 ];\n\t\t\t\tcase 'uint16':\tcase 'ushort': return [ dataview.getUint16( at, little_endian ), 2 ];\n\t\t\t\tcase 'int32':\t\tcase 'int':\t\t return [ dataview.getInt32( at, little_endian ), 4 ];\n\t\t\t\tcase 'uint32':\tcase 'uint':\t return [ dataview.getUint32( at, little_endian ), 4 ];\n\t\t\t\tcase 'float32': case 'float':\t return [ dataview.getFloat32( at, little_endian ), 4 ];\n\t\t\t\tcase 'float64': case 'double': return [ dataview.getFloat64( at, little_endian ), 8 ];\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction binaryReadElement( dataview, at, properties, little_endian ) {\n\n\t\t\tvar element = {};\n\t\t\tvar result, read = 0;\n\n\t\t\tfor ( var i = 0; i < properties.length; i ++ ) {\n\n\t\t\t\tif ( properties[ i ].type === 'list' ) {\n\n\t\t\t\t\tvar list = [];\n\n\t\t\t\t\tresult = binaryRead( dataview, at + read, properties[ i ].countType, little_endian );\n\t\t\t\t\tvar n = result[ 0 ];\n\t\t\t\t\tread += result[ 1 ];\n\n\t\t\t\t\tfor ( var j = 0; j < n; j ++ ) {\n\n\t\t\t\t\t\tresult = binaryRead( dataview, at + read, properties[ i ].itemType, little_endian );\n\t\t\t\t\t\tlist.push( result[ 0 ] );\n\t\t\t\t\t\tread += result[ 1 ];\n\n\t\t\t\t\t}\n\n\t\t\t\t\telement[ properties[ i ].name ] = list;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tresult = binaryRead( dataview, at + read, properties[ i ].type, little_endian );\n\t\t\t\t\telement[ properties[ i ].name ] = result[ 0 ];\n\t\t\t\t\tread += result[ 1 ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn [ element, read ];\n\n\t\t}\n\n\t\tfunction parseBinary( data, header ) {\n\n\t\t\tvar buffer = {\n\t\t\t\tindices: [],\n\t\t\t\tvertices: [],\n\t\t\t\tnormals: [],\n\t\t\t\tuvs: [],\n\t\t\t\tfaceVertexUvs: [],\n\t\t\t\tcolors: []\n\t\t\t};\n\n\t\t\tvar little_endian = ( header.format === 'binary_little_endian' );\n\t\t\tvar body = new DataView( data, header.headerLength );\n\t\t\tvar result, loc = 0;\n\n\t\t\tfor ( var currentElement = 0; currentElement < header.elements.length; currentElement ++ ) {\n\n\t\t\t\tfor ( var currentElementCount = 0; currentElementCount < header.elements[ currentElement ].count; currentElementCount ++ ) {\n\n\t\t\t\t\tresult = binaryReadElement( body, loc, header.elements[ currentElement ].properties, little_endian );\n\t\t\t\t\tloc += result[ 1 ];\n\t\t\t\t\tvar element = result[ 0 ];\n\n\t\t\t\t\thandleElement( buffer, header.elements[ currentElement ].name, element );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn postProcess( buffer );\n\n\t\t}\n\n\t\t//\n\n\t\tvar geometry;\n\t\tvar scope = this;\n\n\t\tif ( data instanceof ArrayBuffer ) {\n\n\t\t\tvar text = _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"LoaderUtils\"].decodeText( new Uint8Array( data ) );\n\t\t\tvar header = parseHeader( text );\n\n\t\t\tgeometry = header.format === 'ascii' ? parseASCII( text, header ) : parseBinary( data, header );\n\n\t\t} else {\n\n\t\t\tgeometry = parseASCII( data, parseHeader( data ) );\n\n\t\t}\n\n\t\treturn geometry;\n\n\t}\n\n} );\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL3RocmVlL2V4YW1wbGVzL2pzbS9sb2FkZXJzL1BMWUxvYWRlci5qcz8yMWNiIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQU13Qzs7QUFFeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBOzs7QUFHQTs7QUFFQSxDQUFDLDZEQUFNOztBQUVQOztBQUVBOztBQUVBLG9EQUFvRCw2REFBTTs7QUFFMUQ7O0FBRUE7O0FBRUE7O0FBRUEsbUJBQW1CLGlFQUFVO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUEsSUFBSTs7QUFFSjs7QUFFQTs7QUFFQSxLQUFLOztBQUVMOztBQUVBOztBQUVBOztBQUVBOztBQUVBLEdBQUc7O0FBRUgsRUFBRTs7QUFFRjs7QUFFQTs7QUFFQSxFQUFFOztBQUVGOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSxvQkFBb0I7O0FBRXBCOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLOztBQUVMOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBLG1CQUFtQixrQkFBa0I7O0FBRXJDO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7OztBQUdBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUEsbUJBQW1CLHVCQUF1Qjs7QUFFMUM7O0FBRUE7QUFDQTs7QUFFQSxxQkFBcUIsT0FBTzs7QUFFNUI7O0FBRUE7O0FBRUE7O0FBRUEsS0FBSzs7QUFFTDs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsbUJBQW1CLGtCQUFrQjs7QUFFckM7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUEsc0JBQXNCLHFFQUFjOztBQUVwQzs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQSwwQ0FBMEMsNkVBQXNCOztBQUVoRTs7QUFFQTs7QUFFQSx5Q0FBeUMsNkVBQXNCOztBQUUvRDs7QUFFQTs7QUFFQSxxQ0FBcUMsNkVBQXNCOztBQUUzRDs7QUFFQTs7QUFFQSx3Q0FBd0MsNkVBQXNCOztBQUU5RDs7QUFFQTs7QUFFQTtBQUNBLHFDQUFxQyw2RUFBc0I7O0FBRTNEOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBLElBQUk7O0FBRUosd0VBQXdFO0FBQ3hFOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSxLQUFLOztBQUVMO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUEsbUJBQW1CLHVCQUF1Qjs7QUFFMUM7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBLHFCQUFxQixPQUFPOztBQUU1QjtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUEsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsZ0NBQWdDLHlDQUF5Qzs7QUFFekUsc0NBQXNDLCtEQUErRDs7QUFFckc7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUEsY0FBYyxrRUFBVztBQUN6Qjs7QUFFQTs7QUFFQSxHQUFHOztBQUVIOztBQUVBOztBQUVBOztBQUVBOztBQUVBLENBQUM7O0FBRW9CIiwiZmlsZSI6Ii4vbm9kZV9tb2R1bGVzL3RocmVlL2V4YW1wbGVzL2pzbS9sb2FkZXJzL1BMWUxvYWRlci5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG5cdEJ1ZmZlckdlb21ldHJ5LFxuXHRGaWxlTG9hZGVyLFxuXHRGbG9hdDMyQnVmZmVyQXR0cmlidXRlLFxuXHRMb2FkZXIsXG5cdExvYWRlclV0aWxzXG59IGZyb20gJy4uLy4uLy4uL2J1aWxkL3RocmVlLm1vZHVsZS5qcyc7XG5cbi8qKlxuICogRGVzY3JpcHRpb246IEEgVEhSRUUgbG9hZGVyIGZvciBQTFkgQVNDSUkgZmlsZXMgKGtub3duIGFzIHRoZSBQb2x5Z29uXG4gKiBGaWxlIEZvcm1hdCBvciB0aGUgU3RhbmZvcmQgVHJpYW5nbGUgRm9ybWF0KS5cbiAqXG4gKiBMaW1pdGF0aW9uczogQVNDSUkgZGVjb2RpbmcgYXNzdW1lcyBmaWxlIGlzIFVURi04LlxuICpcbiAqIFVzYWdlOlxuICpcdHZhciBsb2FkZXIgPSBuZXcgUExZTG9hZGVyKCk7XG4gKlx0bG9hZGVyLmxvYWQoJy4vbW9kZWxzL3BseS9hc2NpaS9kb2xwaGlucy5wbHknLCBmdW5jdGlvbiAoZ2VvbWV0cnkpIHtcbiAqXG4gKlx0XHRzY2VuZS5hZGQoIG5ldyBUSFJFRS5NZXNoKCBnZW9tZXRyeSApICk7XG4gKlxuICpcdH0gKTtcbiAqXG4gKiBJZiB0aGUgUExZIGZpbGUgdXNlcyBub24gc3RhbmRhcmQgcHJvcGVydHkgbmFtZXMsIHRoZXkgY2FuIGJlIG1hcHBlZCB3aGlsZVxuICogbG9hZGluZy4gRm9yIGV4YW1wbGUsIHRoZSBmb2xsb3dpbmcgbWFwcyB0aGUgcHJvcGVydGllc1xuICog4oCcZGlmZnVzZV8ocmVkfGdyZWVufGJsdWUp4oCdIGluIHRoZSBmaWxlIHRvIHN0YW5kYXJkIGNvbG9yIG5hbWVzLlxuICpcbiAqIGxvYWRlci5zZXRQcm9wZXJ0eU5hbWVNYXBwaW5nKCB7XG4gKlx0ZGlmZnVzZV9yZWQ6ICdyZWQnLFxuICpcdGRpZmZ1c2VfZ3JlZW46ICdncmVlbicsXG4gKlx0ZGlmZnVzZV9ibHVlOiAnYmx1ZSdcbiAqIH0gKTtcbiAqXG4gKi9cblxuXG52YXIgUExZTG9hZGVyID0gZnVuY3Rpb24gKCBtYW5hZ2VyICkge1xuXG5cdExvYWRlci5jYWxsKCB0aGlzLCBtYW5hZ2VyICk7XG5cblx0dGhpcy5wcm9wZXJ0eU5hbWVNYXBwaW5nID0ge307XG5cbn07XG5cblBMWUxvYWRlci5wcm90b3R5cGUgPSBPYmplY3QuYXNzaWduKCBPYmplY3QuY3JlYXRlKCBMb2FkZXIucHJvdG90eXBlICksIHtcblxuXHRjb25zdHJ1Y3RvcjogUExZTG9hZGVyLFxuXG5cdGxvYWQ6IGZ1bmN0aW9uICggdXJsLCBvbkxvYWQsIG9uUHJvZ3Jlc3MsIG9uRXJyb3IgKSB7XG5cblx0XHR2YXIgc2NvcGUgPSB0aGlzO1xuXG5cdFx0dmFyIGxvYWRlciA9IG5ldyBGaWxlTG9hZGVyKCB0aGlzLm1hbmFnZXIgKTtcblx0XHRsb2FkZXIuc2V0UGF0aCggdGhpcy5wYXRoICk7XG5cdFx0bG9hZGVyLnNldFJlc3BvbnNlVHlwZSggJ2FycmF5YnVmZmVyJyApO1xuXHRcdGxvYWRlci5zZXRSZXF1ZXN0SGVhZGVyKCB0aGlzLnJlcXVlc3RIZWFkZXIgKTtcblx0XHRsb2FkZXIuc2V0V2l0aENyZWRlbnRpYWxzKCB0aGlzLndpdGhDcmVkZW50aWFscyApO1xuXHRcdGxvYWRlci5sb2FkKCB1cmwsIGZ1bmN0aW9uICggdGV4dCApIHtcblxuXHRcdFx0dHJ5IHtcblxuXHRcdFx0XHRvbkxvYWQoIHNjb3BlLnBhcnNlKCB0ZXh0ICkgKTtcblxuXHRcdFx0fSBjYXRjaCAoIGUgKSB7XG5cblx0XHRcdFx0aWYgKCBvbkVycm9yICkge1xuXG5cdFx0XHRcdFx0b25FcnJvciggZSApO1xuXG5cdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRjb25zb2xlLmVycm9yKCBlICk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdHNjb3BlLm1hbmFnZXIuaXRlbUVycm9yKCB1cmwgKTtcblxuXHRcdFx0fVxuXG5cdFx0fSwgb25Qcm9ncmVzcywgb25FcnJvciApO1xuXG5cdH0sXG5cblx0c2V0UHJvcGVydHlOYW1lTWFwcGluZzogZnVuY3Rpb24gKCBtYXBwaW5nICkge1xuXG5cdFx0dGhpcy5wcm9wZXJ0eU5hbWVNYXBwaW5nID0gbWFwcGluZztcblxuXHR9LFxuXG5cdHBhcnNlOiBmdW5jdGlvbiAoIGRhdGEgKSB7XG5cblx0XHRmdW5jdGlvbiBwYXJzZUhlYWRlciggZGF0YSApIHtcblxuXHRcdFx0dmFyIHBhdHRlcm5IZWFkZXIgPSAvcGx5KFtcXHNcXFNdKillbmRfaGVhZGVyXFxyP1xcbi87XG5cdFx0XHR2YXIgaGVhZGVyVGV4dCA9ICcnO1xuXHRcdFx0dmFyIGhlYWRlckxlbmd0aCA9IDA7XG5cdFx0XHR2YXIgcmVzdWx0ID0gcGF0dGVybkhlYWRlci5leGVjKCBkYXRhICk7XG5cblx0XHRcdGlmICggcmVzdWx0ICE9PSBudWxsICkge1xuXG5cdFx0XHRcdGhlYWRlclRleHQgPSByZXN1bHRbIDEgXTtcblx0XHRcdFx0aGVhZGVyTGVuZ3RoID0gbmV3IEJsb2IoIFsgcmVzdWx0WyAwIF0gXSApLnNpemU7XG5cblx0XHRcdH1cblxuXHRcdFx0dmFyIGhlYWRlciA9IHtcblx0XHRcdFx0Y29tbWVudHM6IFtdLFxuXHRcdFx0XHRlbGVtZW50czogW10sXG5cdFx0XHRcdGhlYWRlckxlbmd0aDogaGVhZGVyTGVuZ3RoLFxuXHRcdFx0XHRvYmpJbmZvOiAnJ1xuXHRcdFx0fTtcblxuXHRcdFx0dmFyIGxpbmVzID0gaGVhZGVyVGV4dC5zcGxpdCggJ1xcbicgKTtcblx0XHRcdHZhciBjdXJyZW50RWxlbWVudDtcblx0XHRcdHZhciBsaW5lVHlwZSwgbGluZVZhbHVlcztcblxuXHRcdFx0ZnVuY3Rpb24gbWFrZV9wbHlfZWxlbWVudF9wcm9wZXJ0eSggcHJvcGVydFZhbHVlcywgcHJvcGVydHlOYW1lTWFwcGluZyApIHtcblxuXHRcdFx0XHR2YXIgcHJvcGVydHkgPSB7IHR5cGU6IHByb3BlcnRWYWx1ZXNbIDAgXSB9O1xuXG5cdFx0XHRcdGlmICggcHJvcGVydHkudHlwZSA9PT0gJ2xpc3QnICkge1xuXG5cdFx0XHRcdFx0cHJvcGVydHkubmFtZSA9IHByb3BlcnRWYWx1ZXNbIDMgXTtcblx0XHRcdFx0XHRwcm9wZXJ0eS5jb3VudFR5cGUgPSBwcm9wZXJ0VmFsdWVzWyAxIF07XG5cdFx0XHRcdFx0cHJvcGVydHkuaXRlbVR5cGUgPSBwcm9wZXJ0VmFsdWVzWyAyIF07XG5cblx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdHByb3BlcnR5Lm5hbWUgPSBwcm9wZXJ0VmFsdWVzWyAxIF07XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmICggcHJvcGVydHkubmFtZSBpbiBwcm9wZXJ0eU5hbWVNYXBwaW5nICkge1xuXG5cdFx0XHRcdFx0cHJvcGVydHkubmFtZSA9IHByb3BlcnR5TmFtZU1hcHBpbmdbIHByb3BlcnR5Lm5hbWUgXTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIHByb3BlcnR5O1xuXG5cdFx0XHR9XG5cblx0XHRcdGZvciAoIHZhciBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgaSArKyApIHtcblxuXHRcdFx0XHR2YXIgbGluZSA9IGxpbmVzWyBpIF07XG5cdFx0XHRcdGxpbmUgPSBsaW5lLnRyaW0oKTtcblxuXHRcdFx0XHRpZiAoIGxpbmUgPT09ICcnICkgY29udGludWU7XG5cblx0XHRcdFx0bGluZVZhbHVlcyA9IGxpbmUuc3BsaXQoIC9cXHMrLyApO1xuXHRcdFx0XHRsaW5lVHlwZSA9IGxpbmVWYWx1ZXMuc2hpZnQoKTtcblx0XHRcdFx0bGluZSA9IGxpbmVWYWx1ZXMuam9pbiggJyAnICk7XG5cblx0XHRcdFx0c3dpdGNoICggbGluZVR5cGUgKSB7XG5cblx0XHRcdFx0XHRjYXNlICdmb3JtYXQnOlxuXG5cdFx0XHRcdFx0XHRoZWFkZXIuZm9ybWF0ID0gbGluZVZhbHVlc1sgMCBdO1xuXHRcdFx0XHRcdFx0aGVhZGVyLnZlcnNpb24gPSBsaW5lVmFsdWVzWyAxIF07XG5cblx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0Y2FzZSAnY29tbWVudCc6XG5cblx0XHRcdFx0XHRcdGhlYWRlci5jb21tZW50cy5wdXNoKCBsaW5lICk7XG5cblx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0Y2FzZSAnZWxlbWVudCc6XG5cblx0XHRcdFx0XHRcdGlmICggY3VycmVudEVsZW1lbnQgIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0XHRcdFx0XHRoZWFkZXIuZWxlbWVudHMucHVzaCggY3VycmVudEVsZW1lbnQgKTtcblxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRjdXJyZW50RWxlbWVudCA9IHt9O1xuXHRcdFx0XHRcdFx0Y3VycmVudEVsZW1lbnQubmFtZSA9IGxpbmVWYWx1ZXNbIDAgXTtcblx0XHRcdFx0XHRcdGN1cnJlbnRFbGVtZW50LmNvdW50ID0gcGFyc2VJbnQoIGxpbmVWYWx1ZXNbIDEgXSApO1xuXHRcdFx0XHRcdFx0Y3VycmVudEVsZW1lbnQucHJvcGVydGllcyA9IFtdO1xuXG5cdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdGNhc2UgJ3Byb3BlcnR5JzpcblxuXHRcdFx0XHRcdFx0Y3VycmVudEVsZW1lbnQucHJvcGVydGllcy5wdXNoKCBtYWtlX3BseV9lbGVtZW50X3Byb3BlcnR5KCBsaW5lVmFsdWVzLCBzY29wZS5wcm9wZXJ0eU5hbWVNYXBwaW5nICkgKTtcblxuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRjYXNlICdvYmpfaW5mbyc6XG5cblx0XHRcdFx0XHRcdGhlYWRlci5vYmpJbmZvID0gbGluZTtcblxuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblxuXHRcdFx0XHRcdGRlZmF1bHQ6XG5cblx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKCAndW5oYW5kbGVkJywgbGluZVR5cGUsIGxpbmVWYWx1ZXMgKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdH1cblxuXHRcdFx0aWYgKCBjdXJyZW50RWxlbWVudCAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRcdGhlYWRlci5lbGVtZW50cy5wdXNoKCBjdXJyZW50RWxlbWVudCApO1xuXG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBoZWFkZXI7XG5cblx0XHR9XG5cblx0XHRmdW5jdGlvbiBwYXJzZUFTQ0lJTnVtYmVyKCBuLCB0eXBlICkge1xuXG5cdFx0XHRzd2l0Y2ggKCB0eXBlICkge1xuXG5cdFx0XHRcdGNhc2UgJ2NoYXInOiBjYXNlICd1Y2hhcic6IGNhc2UgJ3Nob3J0JzogY2FzZSAndXNob3J0JzogY2FzZSAnaW50JzogY2FzZSAndWludCc6XG5cdFx0XHRcdGNhc2UgJ2ludDgnOiBjYXNlICd1aW50OCc6IGNhc2UgJ2ludDE2JzogY2FzZSAndWludDE2JzogY2FzZSAnaW50MzInOiBjYXNlICd1aW50MzInOlxuXG5cdFx0XHRcdFx0cmV0dXJuIHBhcnNlSW50KCBuICk7XG5cblx0XHRcdFx0Y2FzZSAnZmxvYXQnOiBjYXNlICdkb3VibGUnOiBjYXNlICdmbG9hdDMyJzogY2FzZSAnZmxvYXQ2NCc6XG5cblx0XHRcdFx0XHRyZXR1cm4gcGFyc2VGbG9hdCggbiApO1xuXG5cdFx0XHR9XG5cblx0XHR9XG5cblx0XHRmdW5jdGlvbiBwYXJzZUFTQ0lJRWxlbWVudCggcHJvcGVydGllcywgbGluZSApIHtcblxuXHRcdFx0dmFyIHZhbHVlcyA9IGxpbmUuc3BsaXQoIC9cXHMrLyApO1xuXG5cdFx0XHR2YXIgZWxlbWVudCA9IHt9O1xuXG5cdFx0XHRmb3IgKCB2YXIgaSA9IDA7IGkgPCBwcm9wZXJ0aWVzLmxlbmd0aDsgaSArKyApIHtcblxuXHRcdFx0XHRpZiAoIHByb3BlcnRpZXNbIGkgXS50eXBlID09PSAnbGlzdCcgKSB7XG5cblx0XHRcdFx0XHR2YXIgbGlzdCA9IFtdO1xuXHRcdFx0XHRcdHZhciBuID0gcGFyc2VBU0NJSU51bWJlciggdmFsdWVzLnNoaWZ0KCksIHByb3BlcnRpZXNbIGkgXS5jb3VudFR5cGUgKTtcblxuXHRcdFx0XHRcdGZvciAoIHZhciBqID0gMDsgaiA8IG47IGogKysgKSB7XG5cblx0XHRcdFx0XHRcdGxpc3QucHVzaCggcGFyc2VBU0NJSU51bWJlciggdmFsdWVzLnNoaWZ0KCksIHByb3BlcnRpZXNbIGkgXS5pdGVtVHlwZSApICk7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRlbGVtZW50WyBwcm9wZXJ0aWVzWyBpIF0ubmFtZSBdID0gbGlzdDtcblxuXHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0ZWxlbWVudFsgcHJvcGVydGllc1sgaSBdLm5hbWUgXSA9IHBhcnNlQVNDSUlOdW1iZXIoIHZhbHVlcy5zaGlmdCgpLCBwcm9wZXJ0aWVzWyBpIF0udHlwZSApO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gZWxlbWVudDtcblxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIHBhcnNlQVNDSUkoIGRhdGEsIGhlYWRlciApIHtcblxuXHRcdFx0Ly8gUExZIGFzY2lpIGZvcm1hdCBzcGVjaWZpY2F0aW9uLCBhcyBwZXIgaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9QTFlfKGZpbGVfZm9ybWF0KVxuXG5cdFx0XHR2YXIgYnVmZmVyID0ge1xuXHRcdFx0XHRpbmRpY2VzOiBbXSxcblx0XHRcdFx0dmVydGljZXM6IFtdLFxuXHRcdFx0XHRub3JtYWxzOiBbXSxcblx0XHRcdFx0dXZzOiBbXSxcblx0XHRcdFx0ZmFjZVZlcnRleFV2czogW10sXG5cdFx0XHRcdGNvbG9yczogW11cblx0XHRcdH07XG5cblx0XHRcdHZhciByZXN1bHQ7XG5cblx0XHRcdHZhciBwYXR0ZXJuQm9keSA9IC9lbmRfaGVhZGVyXFxzKFtcXHNcXFNdKikkLztcblx0XHRcdHZhciBib2R5ID0gJyc7XG5cdFx0XHRpZiAoICggcmVzdWx0ID0gcGF0dGVybkJvZHkuZXhlYyggZGF0YSApICkgIT09IG51bGwgKSB7XG5cblx0XHRcdFx0Ym9keSA9IHJlc3VsdFsgMSBdO1xuXG5cdFx0XHR9XG5cblx0XHRcdHZhciBsaW5lcyA9IGJvZHkuc3BsaXQoICdcXG4nICk7XG5cdFx0XHR2YXIgY3VycmVudEVsZW1lbnQgPSAwO1xuXHRcdFx0dmFyIGN1cnJlbnRFbGVtZW50Q291bnQgPSAwO1xuXG5cdFx0XHRmb3IgKCB2YXIgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7IGkgKysgKSB7XG5cblx0XHRcdFx0dmFyIGxpbmUgPSBsaW5lc1sgaSBdO1xuXHRcdFx0XHRsaW5lID0gbGluZS50cmltKCk7XG5cdFx0XHRcdGlmICggbGluZSA9PT0gJycgKSB7XG5cblx0XHRcdFx0XHRjb250aW51ZTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKCBjdXJyZW50RWxlbWVudENvdW50ID49IGhlYWRlci5lbGVtZW50c1sgY3VycmVudEVsZW1lbnQgXS5jb3VudCApIHtcblxuXHRcdFx0XHRcdGN1cnJlbnRFbGVtZW50ICsrO1xuXHRcdFx0XHRcdGN1cnJlbnRFbGVtZW50Q291bnQgPSAwO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHR2YXIgZWxlbWVudCA9IHBhcnNlQVNDSUlFbGVtZW50KCBoZWFkZXIuZWxlbWVudHNbIGN1cnJlbnRFbGVtZW50IF0ucHJvcGVydGllcywgbGluZSApO1xuXG5cdFx0XHRcdGhhbmRsZUVsZW1lbnQoIGJ1ZmZlciwgaGVhZGVyLmVsZW1lbnRzWyBjdXJyZW50RWxlbWVudCBdLm5hbWUsIGVsZW1lbnQgKTtcblxuXHRcdFx0XHRjdXJyZW50RWxlbWVudENvdW50ICsrO1xuXG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBwb3N0UHJvY2VzcyggYnVmZmVyICk7XG5cblx0XHR9XG5cblx0XHRmdW5jdGlvbiBwb3N0UHJvY2VzcyggYnVmZmVyICkge1xuXG5cdFx0XHR2YXIgZ2VvbWV0cnkgPSBuZXcgQnVmZmVyR2VvbWV0cnkoKTtcblxuXHRcdFx0Ly8gbWFuZGF0b3J5IGJ1ZmZlciBkYXRhXG5cblx0XHRcdGlmICggYnVmZmVyLmluZGljZXMubGVuZ3RoID4gMCApIHtcblxuXHRcdFx0XHRnZW9tZXRyeS5zZXRJbmRleCggYnVmZmVyLmluZGljZXMgKTtcblxuXHRcdFx0fVxuXG5cdFx0XHRnZW9tZXRyeS5zZXRBdHRyaWJ1dGUoICdwb3NpdGlvbicsIG5ldyBGbG9hdDMyQnVmZmVyQXR0cmlidXRlKCBidWZmZXIudmVydGljZXMsIDMgKSApO1xuXG5cdFx0XHQvLyBvcHRpb25hbCBidWZmZXIgZGF0YVxuXG5cdFx0XHRpZiAoIGJ1ZmZlci5ub3JtYWxzLmxlbmd0aCA+IDAgKSB7XG5cblx0XHRcdFx0Z2VvbWV0cnkuc2V0QXR0cmlidXRlKCAnbm9ybWFsJywgbmV3IEZsb2F0MzJCdWZmZXJBdHRyaWJ1dGUoIGJ1ZmZlci5ub3JtYWxzLCAzICkgKTtcblxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIGJ1ZmZlci51dnMubGVuZ3RoID4gMCApIHtcblxuXHRcdFx0XHRnZW9tZXRyeS5zZXRBdHRyaWJ1dGUoICd1dicsIG5ldyBGbG9hdDMyQnVmZmVyQXR0cmlidXRlKCBidWZmZXIudXZzLCAyICkgKTtcblxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIGJ1ZmZlci5jb2xvcnMubGVuZ3RoID4gMCApIHtcblxuXHRcdFx0XHRnZW9tZXRyeS5zZXRBdHRyaWJ1dGUoICdjb2xvcicsIG5ldyBGbG9hdDMyQnVmZmVyQXR0cmlidXRlKCBidWZmZXIuY29sb3JzLCAzICkgKTtcblxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIGJ1ZmZlci5mYWNlVmVydGV4VXZzLmxlbmd0aCA+IDAgKSB7XG5cblx0XHRcdFx0Z2VvbWV0cnkgPSBnZW9tZXRyeS50b05vbkluZGV4ZWQoKTtcblx0XHRcdFx0Z2VvbWV0cnkuc2V0QXR0cmlidXRlKCAndXYnLCBuZXcgRmxvYXQzMkJ1ZmZlckF0dHJpYnV0ZSggYnVmZmVyLmZhY2VWZXJ0ZXhVdnMsIDIgKSApO1xuXG5cdFx0XHR9XG5cblx0XHRcdGdlb21ldHJ5LmNvbXB1dGVCb3VuZGluZ1NwaGVyZSgpO1xuXG5cdFx0XHRyZXR1cm4gZ2VvbWV0cnk7XG5cblx0XHR9XG5cblx0XHRmdW5jdGlvbiBoYW5kbGVFbGVtZW50KCBidWZmZXIsIGVsZW1lbnROYW1lLCBlbGVtZW50ICkge1xuXG5cdFx0XHRpZiAoIGVsZW1lbnROYW1lID09PSAndmVydGV4JyApIHtcblxuXHRcdFx0XHRidWZmZXIudmVydGljZXMucHVzaCggZWxlbWVudC54LCBlbGVtZW50LnksIGVsZW1lbnQueiApO1xuXG5cdFx0XHRcdGlmICggJ254JyBpbiBlbGVtZW50ICYmICdueScgaW4gZWxlbWVudCAmJiAnbnonIGluIGVsZW1lbnQgKSB7XG5cblx0XHRcdFx0XHRidWZmZXIubm9ybWFscy5wdXNoKCBlbGVtZW50Lm54LCBlbGVtZW50Lm55LCBlbGVtZW50Lm56ICk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmICggJ3MnIGluIGVsZW1lbnQgJiYgJ3QnIGluIGVsZW1lbnQgKSB7XG5cblx0XHRcdFx0XHRidWZmZXIudXZzLnB1c2goIGVsZW1lbnQucywgZWxlbWVudC50ICk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmICggJ3JlZCcgaW4gZWxlbWVudCAmJiAnZ3JlZW4nIGluIGVsZW1lbnQgJiYgJ2JsdWUnIGluIGVsZW1lbnQgKSB7XG5cblx0XHRcdFx0XHRidWZmZXIuY29sb3JzLnB1c2goIGVsZW1lbnQucmVkIC8gMjU1LjAsIGVsZW1lbnQuZ3JlZW4gLyAyNTUuMCwgZWxlbWVudC5ibHVlIC8gMjU1LjAgKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdH0gZWxzZSBpZiAoIGVsZW1lbnROYW1lID09PSAnZmFjZScgKSB7XG5cblx0XHRcdFx0dmFyIHZlcnRleF9pbmRpY2VzID0gZWxlbWVudC52ZXJ0ZXhfaW5kaWNlcyB8fCBlbGVtZW50LnZlcnRleF9pbmRleDsgLy8gaXNzdWUgIzkzMzhcblx0XHRcdFx0dmFyIHRleGNvb3JkID0gZWxlbWVudC50ZXhjb29yZDtcblxuXHRcdFx0XHRpZiAoIHZlcnRleF9pbmRpY2VzLmxlbmd0aCA9PT0gMyApIHtcblxuXHRcdFx0XHRcdGJ1ZmZlci5pbmRpY2VzLnB1c2goIHZlcnRleF9pbmRpY2VzWyAwIF0sIHZlcnRleF9pbmRpY2VzWyAxIF0sIHZlcnRleF9pbmRpY2VzWyAyIF0gKTtcblxuXHRcdFx0XHRcdGlmICggdGV4Y29vcmQgJiYgdGV4Y29vcmQubGVuZ3RoID09PSA2ICkge1xuXG5cdFx0XHRcdFx0XHRidWZmZXIuZmFjZVZlcnRleFV2cy5wdXNoKCB0ZXhjb29yZFsgMCBdLCB0ZXhjb29yZFsgMSBdICk7XG5cdFx0XHRcdFx0XHRidWZmZXIuZmFjZVZlcnRleFV2cy5wdXNoKCB0ZXhjb29yZFsgMiBdLCB0ZXhjb29yZFsgMyBdICk7XG5cdFx0XHRcdFx0XHRidWZmZXIuZmFjZVZlcnRleFV2cy5wdXNoKCB0ZXhjb29yZFsgNCBdLCB0ZXhjb29yZFsgNSBdICk7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fSBlbHNlIGlmICggdmVydGV4X2luZGljZXMubGVuZ3RoID09PSA0ICkge1xuXG5cdFx0XHRcdFx0YnVmZmVyLmluZGljZXMucHVzaCggdmVydGV4X2luZGljZXNbIDAgXSwgdmVydGV4X2luZGljZXNbIDEgXSwgdmVydGV4X2luZGljZXNbIDMgXSApO1xuXHRcdFx0XHRcdGJ1ZmZlci5pbmRpY2VzLnB1c2goIHZlcnRleF9pbmRpY2VzWyAxIF0sIHZlcnRleF9pbmRpY2VzWyAyIF0sIHZlcnRleF9pbmRpY2VzWyAzIF0gKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdH1cblxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGJpbmFyeVJlYWQoIGRhdGF2aWV3LCBhdCwgdHlwZSwgbGl0dGxlX2VuZGlhbiApIHtcblxuXHRcdFx0c3dpdGNoICggdHlwZSApIHtcblxuXHRcdFx0XHQvLyBjb3Jlc3BvbmRlbmNlcyBmb3Igbm9uLXNwZWNpZmljIGxlbmd0aCB0eXBlcyBoZXJlIG1hdGNoIHJwbHk6XG5cdFx0XHRcdGNhc2UgJ2ludDgnOlx0XHRjYXNlICdjaGFyJzpcdCByZXR1cm4gWyBkYXRhdmlldy5nZXRJbnQ4KCBhdCApLCAxIF07XG5cdFx0XHRcdGNhc2UgJ3VpbnQ4JzpcdFx0Y2FzZSAndWNoYXInOlx0IHJldHVybiBbIGRhdGF2aWV3LmdldFVpbnQ4KCBhdCApLCAxIF07XG5cdFx0XHRcdGNhc2UgJ2ludDE2JzpcdFx0Y2FzZSAnc2hvcnQnOlx0IHJldHVybiBbIGRhdGF2aWV3LmdldEludDE2KCBhdCwgbGl0dGxlX2VuZGlhbiApLCAyIF07XG5cdFx0XHRcdGNhc2UgJ3VpbnQxNic6XHRjYXNlICd1c2hvcnQnOiByZXR1cm4gWyBkYXRhdmlldy5nZXRVaW50MTYoIGF0LCBsaXR0bGVfZW5kaWFuICksIDIgXTtcblx0XHRcdFx0Y2FzZSAnaW50MzInOlx0XHRjYXNlICdpbnQnOlx0XHQgcmV0dXJuIFsgZGF0YXZpZXcuZ2V0SW50MzIoIGF0LCBsaXR0bGVfZW5kaWFuICksIDQgXTtcblx0XHRcdFx0Y2FzZSAndWludDMyJzpcdGNhc2UgJ3VpbnQnOlx0IHJldHVybiBbIGRhdGF2aWV3LmdldFVpbnQzMiggYXQsIGxpdHRsZV9lbmRpYW4gKSwgNCBdO1xuXHRcdFx0XHRjYXNlICdmbG9hdDMyJzogY2FzZSAnZmxvYXQnOlx0IHJldHVybiBbIGRhdGF2aWV3LmdldEZsb2F0MzIoIGF0LCBsaXR0bGVfZW5kaWFuICksIDQgXTtcblx0XHRcdFx0Y2FzZSAnZmxvYXQ2NCc6IGNhc2UgJ2RvdWJsZSc6IHJldHVybiBbIGRhdGF2aWV3LmdldEZsb2F0NjQoIGF0LCBsaXR0bGVfZW5kaWFuICksIDggXTtcblxuXHRcdFx0fVxuXG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gYmluYXJ5UmVhZEVsZW1lbnQoIGRhdGF2aWV3LCBhdCwgcHJvcGVydGllcywgbGl0dGxlX2VuZGlhbiApIHtcblxuXHRcdFx0dmFyIGVsZW1lbnQgPSB7fTtcblx0XHRcdHZhciByZXN1bHQsIHJlYWQgPSAwO1xuXG5cdFx0XHRmb3IgKCB2YXIgaSA9IDA7IGkgPCBwcm9wZXJ0aWVzLmxlbmd0aDsgaSArKyApIHtcblxuXHRcdFx0XHRpZiAoIHByb3BlcnRpZXNbIGkgXS50eXBlID09PSAnbGlzdCcgKSB7XG5cblx0XHRcdFx0XHR2YXIgbGlzdCA9IFtdO1xuXG5cdFx0XHRcdFx0cmVzdWx0ID0gYmluYXJ5UmVhZCggZGF0YXZpZXcsIGF0ICsgcmVhZCwgcHJvcGVydGllc1sgaSBdLmNvdW50VHlwZSwgbGl0dGxlX2VuZGlhbiApO1xuXHRcdFx0XHRcdHZhciBuID0gcmVzdWx0WyAwIF07XG5cdFx0XHRcdFx0cmVhZCArPSByZXN1bHRbIDEgXTtcblxuXHRcdFx0XHRcdGZvciAoIHZhciBqID0gMDsgaiA8IG47IGogKysgKSB7XG5cblx0XHRcdFx0XHRcdHJlc3VsdCA9IGJpbmFyeVJlYWQoIGRhdGF2aWV3LCBhdCArIHJlYWQsIHByb3BlcnRpZXNbIGkgXS5pdGVtVHlwZSwgbGl0dGxlX2VuZGlhbiApO1xuXHRcdFx0XHRcdFx0bGlzdC5wdXNoKCByZXN1bHRbIDAgXSApO1xuXHRcdFx0XHRcdFx0cmVhZCArPSByZXN1bHRbIDEgXTtcblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGVsZW1lbnRbIHByb3BlcnRpZXNbIGkgXS5uYW1lIF0gPSBsaXN0O1xuXG5cdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRyZXN1bHQgPSBiaW5hcnlSZWFkKCBkYXRhdmlldywgYXQgKyByZWFkLCBwcm9wZXJ0aWVzWyBpIF0udHlwZSwgbGl0dGxlX2VuZGlhbiApO1xuXHRcdFx0XHRcdGVsZW1lbnRbIHByb3BlcnRpZXNbIGkgXS5uYW1lIF0gPSByZXN1bHRbIDAgXTtcblx0XHRcdFx0XHRyZWFkICs9IHJlc3VsdFsgMSBdO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gWyBlbGVtZW50LCByZWFkIF07XG5cblx0XHR9XG5cblx0XHRmdW5jdGlvbiBwYXJzZUJpbmFyeSggZGF0YSwgaGVhZGVyICkge1xuXG5cdFx0XHR2YXIgYnVmZmVyID0ge1xuXHRcdFx0XHRpbmRpY2VzOiBbXSxcblx0XHRcdFx0dmVydGljZXM6IFtdLFxuXHRcdFx0XHRub3JtYWxzOiBbXSxcblx0XHRcdFx0dXZzOiBbXSxcblx0XHRcdFx0ZmFjZVZlcnRleFV2czogW10sXG5cdFx0XHRcdGNvbG9yczogW11cblx0XHRcdH07XG5cblx0XHRcdHZhciBsaXR0bGVfZW5kaWFuID0gKCBoZWFkZXIuZm9ybWF0ID09PSAnYmluYXJ5X2xpdHRsZV9lbmRpYW4nICk7XG5cdFx0XHR2YXIgYm9keSA9IG5ldyBEYXRhVmlldyggZGF0YSwgaGVhZGVyLmhlYWRlckxlbmd0aCApO1xuXHRcdFx0dmFyIHJlc3VsdCwgbG9jID0gMDtcblxuXHRcdFx0Zm9yICggdmFyIGN1cnJlbnRFbGVtZW50ID0gMDsgY3VycmVudEVsZW1lbnQgPCBoZWFkZXIuZWxlbWVudHMubGVuZ3RoOyBjdXJyZW50RWxlbWVudCArKyApIHtcblxuXHRcdFx0XHRmb3IgKCB2YXIgY3VycmVudEVsZW1lbnRDb3VudCA9IDA7IGN1cnJlbnRFbGVtZW50Q291bnQgPCBoZWFkZXIuZWxlbWVudHNbIGN1cnJlbnRFbGVtZW50IF0uY291bnQ7IGN1cnJlbnRFbGVtZW50Q291bnQgKysgKSB7XG5cblx0XHRcdFx0XHRyZXN1bHQgPSBiaW5hcnlSZWFkRWxlbWVudCggYm9keSwgbG9jLCBoZWFkZXIuZWxlbWVudHNbIGN1cnJlbnRFbGVtZW50IF0ucHJvcGVydGllcywgbGl0dGxlX2VuZGlhbiApO1xuXHRcdFx0XHRcdGxvYyArPSByZXN1bHRbIDEgXTtcblx0XHRcdFx0XHR2YXIgZWxlbWVudCA9IHJlc3VsdFsgMCBdO1xuXG5cdFx0XHRcdFx0aGFuZGxlRWxlbWVudCggYnVmZmVyLCBoZWFkZXIuZWxlbWVudHNbIGN1cnJlbnRFbGVtZW50IF0ubmFtZSwgZWxlbWVudCApO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gcG9zdFByb2Nlc3MoIGJ1ZmZlciApO1xuXG5cdFx0fVxuXG5cdFx0Ly9cblxuXHRcdHZhciBnZW9tZXRyeTtcblx0XHR2YXIgc2NvcGUgPSB0aGlzO1xuXG5cdFx0aWYgKCBkYXRhIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIgKSB7XG5cblx0XHRcdHZhciB0ZXh0ID0gTG9hZGVyVXRpbHMuZGVjb2RlVGV4dCggbmV3IFVpbnQ4QXJyYXkoIGRhdGEgKSApO1xuXHRcdFx0dmFyIGhlYWRlciA9IHBhcnNlSGVhZGVyKCB0ZXh0ICk7XG5cblx0XHRcdGdlb21ldHJ5ID0gaGVhZGVyLmZvcm1hdCA9PT0gJ2FzY2lpJyA/IHBhcnNlQVNDSUkoIHRleHQsIGhlYWRlciApIDogcGFyc2VCaW5hcnkoIGRhdGEsIGhlYWRlciApO1xuXG5cdFx0fSBlbHNlIHtcblxuXHRcdFx0Z2VvbWV0cnkgPSBwYXJzZUFTQ0lJKCBkYXRhLCBwYXJzZUhlYWRlciggZGF0YSApICk7XG5cblx0XHR9XG5cblx0XHRyZXR1cm4gZ2VvbWV0cnk7XG5cblx0fVxuXG59ICk7XG5cbmV4cG9ydCB7IFBMWUxvYWRlciB9O1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/three/examples/jsm/loaders/PLYLoader.js\n");

/***/ }),

/***/ "./node_modules/three/examples/jsm/loaders/STLLoader.js":
/*!**************************************************************!*\
  !*** ./node_modules/three/examples/jsm/loaders/STLLoader.js ***!
  \**************************************************************/
/*! exports provided: STLLoader */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"STLLoader\", function() { return STLLoader; });\n/* harmony import */ var _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../build/three.module.js */ \"./node_modules/three/build/three.module.js\");\n\n\n/**\n * Description: A THREE loader for STL ASCII files, as created by Solidworks and other CAD programs.\n *\n * Supports both binary and ASCII encoded files, with automatic detection of type.\n *\n * The loader returns a non-indexed buffer geometry.\n *\n * Limitations:\n *  Binary decoding supports \"Magics\" color format (http://en.wikipedia.org/wiki/STL_(file_format)#Color_in_binary_STL).\n *  There is perhaps some question as to how valid it is to always assume little-endian-ness.\n *  ASCII decoding assumes file is UTF-8.\n *\n * Usage:\n *  var loader = new STLLoader();\n *  loader.load( './models/stl/slotted_disk.stl', function ( geometry ) {\n *    scene.add( new THREE.Mesh( geometry ) );\n *  });\n *\n * For binary STLs geometry might contain colors for vertices. To use it:\n *  // use the same code to load STL as above\n *  if (geometry.hasColors) {\n *    material = new THREE.MeshPhongMaterial({ opacity: geometry.alpha, vertexColors: true });\n *  } else { .... }\n *  var mesh = new THREE.Mesh( geometry, material );\n *\n * For ASCII STLs containing multiple solids, each solid is assigned to a different group.\n * Groups can be used to assign a different color by defining an array of materials with the same length of\n * geometry.groups and passing it to the Mesh constructor:\n *\n * var mesh = new THREE.Mesh( geometry, material );\n *\n * For example:\n *\n *  var materials = [];\n *  var nGeometryGroups = geometry.groups.length;\n *\n *  var colorMap = ...; // Some logic to index colors.\n *\n *  for (var i = 0; i < nGeometryGroups; i++) {\n *\n *\t\tvar material = new THREE.MeshPhongMaterial({\n *\t\t\tcolor: colorMap[i],\n *\t\t\twireframe: false\n *\t\t});\n *\n *  }\n *\n *  materials.push(material);\n *  var mesh = new THREE.Mesh(geometry, materials);\n */\n\n\nvar STLLoader = function ( manager ) {\n\n\t_build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Loader\"].call( this, manager );\n\n};\n\nSTLLoader.prototype = Object.assign( Object.create( _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Loader\"].prototype ), {\n\n\tconstructor: STLLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar scope = this;\n\n\t\tvar loader = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"FileLoader\"]( this.manager );\n\t\tloader.setPath( this.path );\n\t\tloader.setResponseType( 'arraybuffer' );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setWithCredentials( this.withCredentials );\n\n\t\tloader.load( url, function ( text ) {\n\n\t\t\ttry {\n\n\t\t\t\tonLoad( scope.parse( text ) );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\tif ( onError ) {\n\n\t\t\t\t\tonError( e );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( e );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t},\n\n\tparse: function ( data ) {\n\n\t\tfunction isBinary( data ) {\n\n\t\t\tvar expect, face_size, n_faces, reader;\n\t\t\treader = new DataView( data );\n\t\t\tface_size = ( 32 / 8 * 3 ) + ( ( 32 / 8 * 3 ) * 3 ) + ( 16 / 8 );\n\t\t\tn_faces = reader.getUint32( 80, true );\n\t\t\texpect = 80 + ( 32 / 8 ) + ( n_faces * face_size );\n\n\t\t\tif ( expect === reader.byteLength ) {\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\t\t\t// An ASCII STL data must begin with 'solid ' as the first six bytes.\n\t\t\t// However, ASCII STLs lacking the SPACE after the 'd' are known to be\n\t\t\t// plentiful.  So, check the first 5 bytes for 'solid'.\n\n\t\t\t// Several encodings, such as UTF-8, precede the text with up to 5 bytes:\n\t\t\t// https://en.wikipedia.org/wiki/Byte_order_mark#Byte_order_marks_by_encoding\n\t\t\t// Search for \"solid\" to start anywhere after those prefixes.\n\n\t\t\t// US-ASCII ordinal values for 's', 'o', 'l', 'i', 'd'\n\n\t\t\tvar solid = [ 115, 111, 108, 105, 100 ];\n\n\t\t\tfor ( var off = 0; off < 5; off ++ ) {\n\n\t\t\t\t// If \"solid\" text is matched to the current offset, declare it to be an ASCII STL.\n\n\t\t\t\tif ( matchDataViewAt( solid, reader, off ) ) return false;\n\n\t\t\t}\n\n\t\t\t// Couldn't find \"solid\" text at the beginning; it is binary STL.\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\tfunction matchDataViewAt( query, reader, offset ) {\n\n\t\t\t// Check if each byte in query matches the corresponding byte from the current offset\n\n\t\t\tfor ( var i = 0, il = query.length; i < il; i ++ ) {\n\n\t\t\t\tif ( query[ i ] !== reader.getUint8( offset + i, false ) ) return false;\n\n\t\t\t}\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\tfunction parseBinary( data ) {\n\n\t\t\tvar reader = new DataView( data );\n\t\t\tvar faces = reader.getUint32( 80, true );\n\n\t\t\tvar r, g, b, hasColors = false, colors;\n\t\t\tvar defaultR, defaultG, defaultB, alpha;\n\n\t\t\t// process STL header\n\t\t\t// check for default color in header (\"COLOR=rgba\" sequence).\n\n\t\t\tfor ( var index = 0; index < 80 - 10; index ++ ) {\n\n\t\t\t\tif ( ( reader.getUint32( index, false ) == 0x434F4C4F /*COLO*/ ) &&\n\t\t\t\t\t( reader.getUint8( index + 4 ) == 0x52 /*'R'*/ ) &&\n\t\t\t\t\t( reader.getUint8( index + 5 ) == 0x3D /*'='*/ ) ) {\n\n\t\t\t\t\thasColors = true;\n\t\t\t\t\tcolors = new Float32Array( faces * 3 * 3 );\n\n\t\t\t\t\tdefaultR = reader.getUint8( index + 6 ) / 255;\n\t\t\t\t\tdefaultG = reader.getUint8( index + 7 ) / 255;\n\t\t\t\t\tdefaultB = reader.getUint8( index + 8 ) / 255;\n\t\t\t\t\talpha = reader.getUint8( index + 9 ) / 255;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar dataOffset = 84;\n\t\t\tvar faceLength = 12 * 4 + 2;\n\n\t\t\tvar geometry = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"BufferGeometry\"]();\n\n\t\t\tvar vertices = new Float32Array( faces * 3 * 3 );\n\t\t\tvar normals = new Float32Array( faces * 3 * 3 );\n\n\t\t\tfor ( var face = 0; face < faces; face ++ ) {\n\n\t\t\t\tvar start = dataOffset + face * faceLength;\n\t\t\t\tvar normalX = reader.getFloat32( start, true );\n\t\t\t\tvar normalY = reader.getFloat32( start + 4, true );\n\t\t\t\tvar normalZ = reader.getFloat32( start + 8, true );\n\n\t\t\t\tif ( hasColors ) {\n\n\t\t\t\t\tvar packedColor = reader.getUint16( start + 48, true );\n\n\t\t\t\t\tif ( ( packedColor & 0x8000 ) === 0 ) {\n\n\t\t\t\t\t\t// facet has its own unique color\n\n\t\t\t\t\t\tr = ( packedColor & 0x1F ) / 31;\n\t\t\t\t\t\tg = ( ( packedColor >> 5 ) & 0x1F ) / 31;\n\t\t\t\t\t\tb = ( ( packedColor >> 10 ) & 0x1F ) / 31;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tr = defaultR;\n\t\t\t\t\t\tg = defaultG;\n\t\t\t\t\t\tb = defaultB;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tfor ( var i = 1; i <= 3; i ++ ) {\n\n\t\t\t\t\tvar vertexstart = start + i * 12;\n\t\t\t\t\tvar componentIdx = ( face * 3 * 3 ) + ( ( i - 1 ) * 3 );\n\n\t\t\t\t\tvertices[ componentIdx ] = reader.getFloat32( vertexstart, true );\n\t\t\t\t\tvertices[ componentIdx + 1 ] = reader.getFloat32( vertexstart + 4, true );\n\t\t\t\t\tvertices[ componentIdx + 2 ] = reader.getFloat32( vertexstart + 8, true );\n\n\t\t\t\t\tnormals[ componentIdx ] = normalX;\n\t\t\t\t\tnormals[ componentIdx + 1 ] = normalY;\n\t\t\t\t\tnormals[ componentIdx + 2 ] = normalZ;\n\n\t\t\t\t\tif ( hasColors ) {\n\n\t\t\t\t\t\tcolors[ componentIdx ] = r;\n\t\t\t\t\t\tcolors[ componentIdx + 1 ] = g;\n\t\t\t\t\t\tcolors[ componentIdx + 2 ] = b;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tgeometry.setAttribute( 'position', new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"BufferAttribute\"]( vertices, 3 ) );\n\t\t\tgeometry.setAttribute( 'normal', new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"BufferAttribute\"]( normals, 3 ) );\n\n\t\t\tif ( hasColors ) {\n\n\t\t\t\tgeometry.setAttribute( 'color', new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"BufferAttribute\"]( colors, 3 ) );\n\t\t\t\tgeometry.hasColors = true;\n\t\t\t\tgeometry.alpha = alpha;\n\n\t\t\t}\n\n\t\t\treturn geometry;\n\n\t\t}\n\n\t\tfunction parseASCII( data ) {\n\n\t\t\tvar geometry = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"BufferGeometry\"]();\n\t\t\tvar patternSolid = /solid([\\s\\S]*?)endsolid/g;\n\t\t\tvar patternFace = /facet([\\s\\S]*?)endfacet/g;\n\t\t\tvar faceCounter = 0;\n\n\t\t\tvar patternFloat = /[\\s]+([+-]?(?:\\d*)(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)/.source;\n\t\t\tvar patternVertex = new RegExp( 'vertex' + patternFloat + patternFloat + patternFloat, 'g' );\n\t\t\tvar patternNormal = new RegExp( 'normal' + patternFloat + patternFloat + patternFloat, 'g' );\n\n\t\t\tvar vertices = [];\n\t\t\tvar normals = [];\n\n\t\t\tvar normal = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector3\"]();\n\n\t\t\tvar result;\n\n\t\t\tvar groupCount = 0;\n\t\t\tvar startVertex = 0;\n\t\t\tvar endVertex = 0;\n\n\t\t\twhile ( ( result = patternSolid.exec( data ) ) !== null ) {\n\n\t\t\t\tstartVertex = endVertex;\n\n\t\t\t\tvar solid = result[ 0 ];\n\n\t\t\t\twhile ( ( result = patternFace.exec( solid ) ) !== null ) {\n\n\t\t\t\t\tvar vertexCountPerFace = 0;\n\t\t\t\t\tvar normalCountPerFace = 0;\n\n\t\t\t\t\tvar text = result[ 0 ];\n\n\t\t\t\t\twhile ( ( result = patternNormal.exec( text ) ) !== null ) {\n\n\t\t\t\t\t\tnormal.x = parseFloat( result[ 1 ] );\n\t\t\t\t\t\tnormal.y = parseFloat( result[ 2 ] );\n\t\t\t\t\t\tnormal.z = parseFloat( result[ 3 ] );\n\t\t\t\t\t\tnormalCountPerFace ++;\n\n\t\t\t\t\t}\n\n\t\t\t\t\twhile ( ( result = patternVertex.exec( text ) ) !== null ) {\n\n\t\t\t\t\t\tvertices.push( parseFloat( result[ 1 ] ), parseFloat( result[ 2 ] ), parseFloat( result[ 3 ] ) );\n\t\t\t\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\t\t\t\t\t\tvertexCountPerFace ++;\n\t\t\t\t\t\tendVertex ++;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// every face have to own ONE valid normal\n\n\t\t\t\t\tif ( normalCountPerFace !== 1 ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.STLLoader: Something isn\\'t right with the normal of face number ' + faceCounter );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// each face have to own THREE valid vertices\n\n\t\t\t\t\tif ( vertexCountPerFace !== 3 ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.STLLoader: Something isn\\'t right with the vertices of face number ' + faceCounter );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfaceCounter ++;\n\n\t\t\t\t}\n\n\t\t\t\tvar start = startVertex;\n\t\t\t\tvar count = endVertex - startVertex;\n\n\t\t\t\tgeometry.addGroup( start, count, groupCount );\n\t\t\t\tgroupCount ++;\n\n\t\t\t}\n\n\t\t\tgeometry.setAttribute( 'position', new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Float32BufferAttribute\"]( vertices, 3 ) );\n\t\t\tgeometry.setAttribute( 'normal', new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Float32BufferAttribute\"]( normals, 3 ) );\n\n\t\t\treturn geometry;\n\n\t\t}\n\n\t\tfunction ensureString( buffer ) {\n\n\t\t\tif ( typeof buffer !== 'string' ) {\n\n\t\t\t\treturn _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"LoaderUtils\"].decodeText( new Uint8Array( buffer ) );\n\n\t\t\t}\n\n\t\t\treturn buffer;\n\n\t\t}\n\n\t\tfunction ensureBinary( buffer ) {\n\n\t\t\tif ( typeof buffer === 'string' ) {\n\n\t\t\t\tvar array_buffer = new Uint8Array( buffer.length );\n\t\t\t\tfor ( var i = 0; i < buffer.length; i ++ ) {\n\n\t\t\t\t\tarray_buffer[ i ] = buffer.charCodeAt( i ) & 0xff; // implicitly assumes little-endian\n\n\t\t\t\t}\n\n\t\t\t\treturn array_buffer.buffer || array_buffer;\n\n\t\t\t} else {\n\n\t\t\t\treturn buffer;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// start\n\n\t\tvar binData = ensureBinary( data );\n\n\t\treturn isBinary( binData ) ? parseBinary( binData ) : parseASCII( ensureString( data ) );\n\n\t}\n\n} );\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL3RocmVlL2V4YW1wbGVzL2pzbS9sb2FkZXJzL1NUTExvYWRlci5qcz81MThlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQVF3Qzs7QUFFeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBOEMsOENBQThDO0FBQzVGLEtBQUssT0FBTztBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCO0FBQ3ZCO0FBQ0EsbUJBQW1CLHFCQUFxQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBOztBQUVBLENBQUMsNkRBQU07O0FBRVA7O0FBRUEsb0RBQW9ELDZEQUFNOztBQUUxRDs7QUFFQTs7QUFFQTs7QUFFQSxtQkFBbUIsaUVBQVU7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUEsSUFBSTs7QUFFSjs7QUFFQTs7QUFFQSxLQUFLOztBQUVMOztBQUVBOztBQUVBOztBQUVBOztBQUVBLEdBQUc7O0FBRUgsRUFBRTs7QUFFRjs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUEscUJBQXFCLFNBQVM7O0FBRTlCOztBQUVBOztBQUVBOztBQUVBLGtEQUFrRDs7QUFFbEQ7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUEsc0NBQXNDLFFBQVE7O0FBRTlDOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBLHVCQUF1QixpQkFBaUI7O0FBRXhDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUEsc0JBQXNCLHFFQUFjOztBQUVwQztBQUNBOztBQUVBLHNCQUFzQixjQUFjOztBQUVwQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsTUFBTTs7QUFFTjtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUEsb0JBQW9CLFFBQVE7O0FBRTVCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUEsMENBQTBDLHNFQUFlO0FBQ3pELHdDQUF3QyxzRUFBZTs7QUFFdkQ7O0FBRUEsd0NBQXdDLHNFQUFlO0FBQ3ZEO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUEsc0JBQXNCLHFFQUFjO0FBQ3BDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxvQkFBb0IsOERBQU87O0FBRTNCOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQSwwQ0FBMEMsNkVBQXNCO0FBQ2hFLHdDQUF3Qyw2RUFBc0I7O0FBRTlEOztBQUVBOztBQUVBOztBQUVBOztBQUVBLFdBQVcsa0VBQVc7O0FBRXRCOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0Esb0JBQW9CLG1CQUFtQjs7QUFFdkMsdURBQXVEOztBQUV2RDs7QUFFQTs7QUFFQSxJQUFJOztBQUVKOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBLENBQUM7O0FBRW9CIiwiZmlsZSI6Ii4vbm9kZV9tb2R1bGVzL3RocmVlL2V4YW1wbGVzL2pzbS9sb2FkZXJzL1NUTExvYWRlci5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG5cdEJ1ZmZlckF0dHJpYnV0ZSxcblx0QnVmZmVyR2VvbWV0cnksXG5cdEZpbGVMb2FkZXIsXG5cdEZsb2F0MzJCdWZmZXJBdHRyaWJ1dGUsXG5cdExvYWRlcixcblx0TG9hZGVyVXRpbHMsXG5cdFZlY3RvcjNcbn0gZnJvbSAnLi4vLi4vLi4vYnVpbGQvdGhyZWUubW9kdWxlLmpzJztcblxuLyoqXG4gKiBEZXNjcmlwdGlvbjogQSBUSFJFRSBsb2FkZXIgZm9yIFNUTCBBU0NJSSBmaWxlcywgYXMgY3JlYXRlZCBieSBTb2xpZHdvcmtzIGFuZCBvdGhlciBDQUQgcHJvZ3JhbXMuXG4gKlxuICogU3VwcG9ydHMgYm90aCBiaW5hcnkgYW5kIEFTQ0lJIGVuY29kZWQgZmlsZXMsIHdpdGggYXV0b21hdGljIGRldGVjdGlvbiBvZiB0eXBlLlxuICpcbiAqIFRoZSBsb2FkZXIgcmV0dXJucyBhIG5vbi1pbmRleGVkIGJ1ZmZlciBnZW9tZXRyeS5cbiAqXG4gKiBMaW1pdGF0aW9uczpcbiAqICBCaW5hcnkgZGVjb2Rpbmcgc3VwcG9ydHMgXCJNYWdpY3NcIiBjb2xvciBmb3JtYXQgKGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvU1RMXyhmaWxlX2Zvcm1hdCkjQ29sb3JfaW5fYmluYXJ5X1NUTCkuXG4gKiAgVGhlcmUgaXMgcGVyaGFwcyBzb21lIHF1ZXN0aW9uIGFzIHRvIGhvdyB2YWxpZCBpdCBpcyB0byBhbHdheXMgYXNzdW1lIGxpdHRsZS1lbmRpYW4tbmVzcy5cbiAqICBBU0NJSSBkZWNvZGluZyBhc3N1bWVzIGZpbGUgaXMgVVRGLTguXG4gKlxuICogVXNhZ2U6XG4gKiAgdmFyIGxvYWRlciA9IG5ldyBTVExMb2FkZXIoKTtcbiAqICBsb2FkZXIubG9hZCggJy4vbW9kZWxzL3N0bC9zbG90dGVkX2Rpc2suc3RsJywgZnVuY3Rpb24gKCBnZW9tZXRyeSApIHtcbiAqICAgIHNjZW5lLmFkZCggbmV3IFRIUkVFLk1lc2goIGdlb21ldHJ5ICkgKTtcbiAqICB9KTtcbiAqXG4gKiBGb3IgYmluYXJ5IFNUTHMgZ2VvbWV0cnkgbWlnaHQgY29udGFpbiBjb2xvcnMgZm9yIHZlcnRpY2VzLiBUbyB1c2UgaXQ6XG4gKiAgLy8gdXNlIHRoZSBzYW1lIGNvZGUgdG8gbG9hZCBTVEwgYXMgYWJvdmVcbiAqICBpZiAoZ2VvbWV0cnkuaGFzQ29sb3JzKSB7XG4gKiAgICBtYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoUGhvbmdNYXRlcmlhbCh7IG9wYWNpdHk6IGdlb21ldHJ5LmFscGhhLCB2ZXJ0ZXhDb2xvcnM6IHRydWUgfSk7XG4gKiAgfSBlbHNlIHsgLi4uLiB9XG4gKiAgdmFyIG1lc2ggPSBuZXcgVEhSRUUuTWVzaCggZ2VvbWV0cnksIG1hdGVyaWFsICk7XG4gKlxuICogRm9yIEFTQ0lJIFNUTHMgY29udGFpbmluZyBtdWx0aXBsZSBzb2xpZHMsIGVhY2ggc29saWQgaXMgYXNzaWduZWQgdG8gYSBkaWZmZXJlbnQgZ3JvdXAuXG4gKiBHcm91cHMgY2FuIGJlIHVzZWQgdG8gYXNzaWduIGEgZGlmZmVyZW50IGNvbG9yIGJ5IGRlZmluaW5nIGFuIGFycmF5IG9mIG1hdGVyaWFscyB3aXRoIHRoZSBzYW1lIGxlbmd0aCBvZlxuICogZ2VvbWV0cnkuZ3JvdXBzIGFuZCBwYXNzaW5nIGl0IHRvIHRoZSBNZXNoIGNvbnN0cnVjdG9yOlxuICpcbiAqIHZhciBtZXNoID0gbmV3IFRIUkVFLk1lc2goIGdlb21ldHJ5LCBtYXRlcmlhbCApO1xuICpcbiAqIEZvciBleGFtcGxlOlxuICpcbiAqICB2YXIgbWF0ZXJpYWxzID0gW107XG4gKiAgdmFyIG5HZW9tZXRyeUdyb3VwcyA9IGdlb21ldHJ5Lmdyb3Vwcy5sZW5ndGg7XG4gKlxuICogIHZhciBjb2xvck1hcCA9IC4uLjsgLy8gU29tZSBsb2dpYyB0byBpbmRleCBjb2xvcnMuXG4gKlxuICogIGZvciAodmFyIGkgPSAwOyBpIDwgbkdlb21ldHJ5R3JvdXBzOyBpKyspIHtcbiAqXG4gKlx0XHR2YXIgbWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaFBob25nTWF0ZXJpYWwoe1xuICpcdFx0XHRjb2xvcjogY29sb3JNYXBbaV0sXG4gKlx0XHRcdHdpcmVmcmFtZTogZmFsc2VcbiAqXHRcdH0pO1xuICpcbiAqICB9XG4gKlxuICogIG1hdGVyaWFscy5wdXNoKG1hdGVyaWFsKTtcbiAqICB2YXIgbWVzaCA9IG5ldyBUSFJFRS5NZXNoKGdlb21ldHJ5LCBtYXRlcmlhbHMpO1xuICovXG5cblxudmFyIFNUTExvYWRlciA9IGZ1bmN0aW9uICggbWFuYWdlciApIHtcblxuXHRMb2FkZXIuY2FsbCggdGhpcywgbWFuYWdlciApO1xuXG59O1xuXG5TVExMb2FkZXIucHJvdG90eXBlID0gT2JqZWN0LmFzc2lnbiggT2JqZWN0LmNyZWF0ZSggTG9hZGVyLnByb3RvdHlwZSApLCB7XG5cblx0Y29uc3RydWN0b3I6IFNUTExvYWRlcixcblxuXHRsb2FkOiBmdW5jdGlvbiAoIHVybCwgb25Mb2FkLCBvblByb2dyZXNzLCBvbkVycm9yICkge1xuXG5cdFx0dmFyIHNjb3BlID0gdGhpcztcblxuXHRcdHZhciBsb2FkZXIgPSBuZXcgRmlsZUxvYWRlciggdGhpcy5tYW5hZ2VyICk7XG5cdFx0bG9hZGVyLnNldFBhdGgoIHRoaXMucGF0aCApO1xuXHRcdGxvYWRlci5zZXRSZXNwb25zZVR5cGUoICdhcnJheWJ1ZmZlcicgKTtcblx0XHRsb2FkZXIuc2V0UmVxdWVzdEhlYWRlciggdGhpcy5yZXF1ZXN0SGVhZGVyICk7XG5cdFx0bG9hZGVyLnNldFdpdGhDcmVkZW50aWFscyggdGhpcy53aXRoQ3JlZGVudGlhbHMgKTtcblxuXHRcdGxvYWRlci5sb2FkKCB1cmwsIGZ1bmN0aW9uICggdGV4dCApIHtcblxuXHRcdFx0dHJ5IHtcblxuXHRcdFx0XHRvbkxvYWQoIHNjb3BlLnBhcnNlKCB0ZXh0ICkgKTtcblxuXHRcdFx0fSBjYXRjaCAoIGUgKSB7XG5cblx0XHRcdFx0aWYgKCBvbkVycm9yICkge1xuXG5cdFx0XHRcdFx0b25FcnJvciggZSApO1xuXG5cdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRjb25zb2xlLmVycm9yKCBlICk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdHNjb3BlLm1hbmFnZXIuaXRlbUVycm9yKCB1cmwgKTtcblxuXHRcdFx0fVxuXG5cdFx0fSwgb25Qcm9ncmVzcywgb25FcnJvciApO1xuXG5cdH0sXG5cblx0cGFyc2U6IGZ1bmN0aW9uICggZGF0YSApIHtcblxuXHRcdGZ1bmN0aW9uIGlzQmluYXJ5KCBkYXRhICkge1xuXG5cdFx0XHR2YXIgZXhwZWN0LCBmYWNlX3NpemUsIG5fZmFjZXMsIHJlYWRlcjtcblx0XHRcdHJlYWRlciA9IG5ldyBEYXRhVmlldyggZGF0YSApO1xuXHRcdFx0ZmFjZV9zaXplID0gKCAzMiAvIDggKiAzICkgKyAoICggMzIgLyA4ICogMyApICogMyApICsgKCAxNiAvIDggKTtcblx0XHRcdG5fZmFjZXMgPSByZWFkZXIuZ2V0VWludDMyKCA4MCwgdHJ1ZSApO1xuXHRcdFx0ZXhwZWN0ID0gODAgKyAoIDMyIC8gOCApICsgKCBuX2ZhY2VzICogZmFjZV9zaXplICk7XG5cblx0XHRcdGlmICggZXhwZWN0ID09PSByZWFkZXIuYnl0ZUxlbmd0aCApIHtcblxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblxuXHRcdFx0fVxuXG5cdFx0XHQvLyBBbiBBU0NJSSBTVEwgZGF0YSBtdXN0IGJlZ2luIHdpdGggJ3NvbGlkICcgYXMgdGhlIGZpcnN0IHNpeCBieXRlcy5cblx0XHRcdC8vIEhvd2V2ZXIsIEFTQ0lJIFNUTHMgbGFja2luZyB0aGUgU1BBQ0UgYWZ0ZXIgdGhlICdkJyBhcmUga25vd24gdG8gYmVcblx0XHRcdC8vIHBsZW50aWZ1bC4gIFNvLCBjaGVjayB0aGUgZmlyc3QgNSBieXRlcyBmb3IgJ3NvbGlkJy5cblxuXHRcdFx0Ly8gU2V2ZXJhbCBlbmNvZGluZ3MsIHN1Y2ggYXMgVVRGLTgsIHByZWNlZGUgdGhlIHRleHQgd2l0aCB1cCB0byA1IGJ5dGVzOlxuXHRcdFx0Ly8gaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQnl0ZV9vcmRlcl9tYXJrI0J5dGVfb3JkZXJfbWFya3NfYnlfZW5jb2Rpbmdcblx0XHRcdC8vIFNlYXJjaCBmb3IgXCJzb2xpZFwiIHRvIHN0YXJ0IGFueXdoZXJlIGFmdGVyIHRob3NlIHByZWZpeGVzLlxuXG5cdFx0XHQvLyBVUy1BU0NJSSBvcmRpbmFsIHZhbHVlcyBmb3IgJ3MnLCAnbycsICdsJywgJ2knLCAnZCdcblxuXHRcdFx0dmFyIHNvbGlkID0gWyAxMTUsIDExMSwgMTA4LCAxMDUsIDEwMCBdO1xuXG5cdFx0XHRmb3IgKCB2YXIgb2ZmID0gMDsgb2ZmIDwgNTsgb2ZmICsrICkge1xuXG5cdFx0XHRcdC8vIElmIFwic29saWRcIiB0ZXh0IGlzIG1hdGNoZWQgdG8gdGhlIGN1cnJlbnQgb2Zmc2V0LCBkZWNsYXJlIGl0IHRvIGJlIGFuIEFTQ0lJIFNUTC5cblxuXHRcdFx0XHRpZiAoIG1hdGNoRGF0YVZpZXdBdCggc29saWQsIHJlYWRlciwgb2ZmICkgKSByZXR1cm4gZmFsc2U7XG5cblx0XHRcdH1cblxuXHRcdFx0Ly8gQ291bGRuJ3QgZmluZCBcInNvbGlkXCIgdGV4dCBhdCB0aGUgYmVnaW5uaW5nOyBpdCBpcyBiaW5hcnkgU1RMLlxuXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIG1hdGNoRGF0YVZpZXdBdCggcXVlcnksIHJlYWRlciwgb2Zmc2V0ICkge1xuXG5cdFx0XHQvLyBDaGVjayBpZiBlYWNoIGJ5dGUgaW4gcXVlcnkgbWF0Y2hlcyB0aGUgY29ycmVzcG9uZGluZyBieXRlIGZyb20gdGhlIGN1cnJlbnQgb2Zmc2V0XG5cblx0XHRcdGZvciAoIHZhciBpID0gMCwgaWwgPSBxdWVyeS5sZW5ndGg7IGkgPCBpbDsgaSArKyApIHtcblxuXHRcdFx0XHRpZiAoIHF1ZXJ5WyBpIF0gIT09IHJlYWRlci5nZXRVaW50OCggb2Zmc2V0ICsgaSwgZmFsc2UgKSApIHJldHVybiBmYWxzZTtcblxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIHBhcnNlQmluYXJ5KCBkYXRhICkge1xuXG5cdFx0XHR2YXIgcmVhZGVyID0gbmV3IERhdGFWaWV3KCBkYXRhICk7XG5cdFx0XHR2YXIgZmFjZXMgPSByZWFkZXIuZ2V0VWludDMyKCA4MCwgdHJ1ZSApO1xuXG5cdFx0XHR2YXIgciwgZywgYiwgaGFzQ29sb3JzID0gZmFsc2UsIGNvbG9ycztcblx0XHRcdHZhciBkZWZhdWx0UiwgZGVmYXVsdEcsIGRlZmF1bHRCLCBhbHBoYTtcblxuXHRcdFx0Ly8gcHJvY2VzcyBTVEwgaGVhZGVyXG5cdFx0XHQvLyBjaGVjayBmb3IgZGVmYXVsdCBjb2xvciBpbiBoZWFkZXIgKFwiQ09MT1I9cmdiYVwiIHNlcXVlbmNlKS5cblxuXHRcdFx0Zm9yICggdmFyIGluZGV4ID0gMDsgaW5kZXggPCA4MCAtIDEwOyBpbmRleCArKyApIHtcblxuXHRcdFx0XHRpZiAoICggcmVhZGVyLmdldFVpbnQzMiggaW5kZXgsIGZhbHNlICkgPT0gMHg0MzRGNEM0RiAvKkNPTE8qLyApICYmXG5cdFx0XHRcdFx0KCByZWFkZXIuZ2V0VWludDgoIGluZGV4ICsgNCApID09IDB4NTIgLyonUicqLyApICYmXG5cdFx0XHRcdFx0KCByZWFkZXIuZ2V0VWludDgoIGluZGV4ICsgNSApID09IDB4M0QgLyonPScqLyApICkge1xuXG5cdFx0XHRcdFx0aGFzQ29sb3JzID0gdHJ1ZTtcblx0XHRcdFx0XHRjb2xvcnMgPSBuZXcgRmxvYXQzMkFycmF5KCBmYWNlcyAqIDMgKiAzICk7XG5cblx0XHRcdFx0XHRkZWZhdWx0UiA9IHJlYWRlci5nZXRVaW50OCggaW5kZXggKyA2ICkgLyAyNTU7XG5cdFx0XHRcdFx0ZGVmYXVsdEcgPSByZWFkZXIuZ2V0VWludDgoIGluZGV4ICsgNyApIC8gMjU1O1xuXHRcdFx0XHRcdGRlZmF1bHRCID0gcmVhZGVyLmdldFVpbnQ4KCBpbmRleCArIDggKSAvIDI1NTtcblx0XHRcdFx0XHRhbHBoYSA9IHJlYWRlci5nZXRVaW50OCggaW5kZXggKyA5ICkgLyAyNTU7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9XG5cblx0XHRcdHZhciBkYXRhT2Zmc2V0ID0gODQ7XG5cdFx0XHR2YXIgZmFjZUxlbmd0aCA9IDEyICogNCArIDI7XG5cblx0XHRcdHZhciBnZW9tZXRyeSA9IG5ldyBCdWZmZXJHZW9tZXRyeSgpO1xuXG5cdFx0XHR2YXIgdmVydGljZXMgPSBuZXcgRmxvYXQzMkFycmF5KCBmYWNlcyAqIDMgKiAzICk7XG5cdFx0XHR2YXIgbm9ybWFscyA9IG5ldyBGbG9hdDMyQXJyYXkoIGZhY2VzICogMyAqIDMgKTtcblxuXHRcdFx0Zm9yICggdmFyIGZhY2UgPSAwOyBmYWNlIDwgZmFjZXM7IGZhY2UgKysgKSB7XG5cblx0XHRcdFx0dmFyIHN0YXJ0ID0gZGF0YU9mZnNldCArIGZhY2UgKiBmYWNlTGVuZ3RoO1xuXHRcdFx0XHR2YXIgbm9ybWFsWCA9IHJlYWRlci5nZXRGbG9hdDMyKCBzdGFydCwgdHJ1ZSApO1xuXHRcdFx0XHR2YXIgbm9ybWFsWSA9IHJlYWRlci5nZXRGbG9hdDMyKCBzdGFydCArIDQsIHRydWUgKTtcblx0XHRcdFx0dmFyIG5vcm1hbFogPSByZWFkZXIuZ2V0RmxvYXQzMiggc3RhcnQgKyA4LCB0cnVlICk7XG5cblx0XHRcdFx0aWYgKCBoYXNDb2xvcnMgKSB7XG5cblx0XHRcdFx0XHR2YXIgcGFja2VkQ29sb3IgPSByZWFkZXIuZ2V0VWludDE2KCBzdGFydCArIDQ4LCB0cnVlICk7XG5cblx0XHRcdFx0XHRpZiAoICggcGFja2VkQ29sb3IgJiAweDgwMDAgKSA9PT0gMCApIHtcblxuXHRcdFx0XHRcdFx0Ly8gZmFjZXQgaGFzIGl0cyBvd24gdW5pcXVlIGNvbG9yXG5cblx0XHRcdFx0XHRcdHIgPSAoIHBhY2tlZENvbG9yICYgMHgxRiApIC8gMzE7XG5cdFx0XHRcdFx0XHRnID0gKCAoIHBhY2tlZENvbG9yID4+IDUgKSAmIDB4MUYgKSAvIDMxO1xuXHRcdFx0XHRcdFx0YiA9ICggKCBwYWNrZWRDb2xvciA+PiAxMCApICYgMHgxRiApIC8gMzE7XG5cblx0XHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0XHRyID0gZGVmYXVsdFI7XG5cdFx0XHRcdFx0XHRnID0gZGVmYXVsdEc7XG5cdFx0XHRcdFx0XHRiID0gZGVmYXVsdEI7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdGZvciAoIHZhciBpID0gMTsgaSA8PSAzOyBpICsrICkge1xuXG5cdFx0XHRcdFx0dmFyIHZlcnRleHN0YXJ0ID0gc3RhcnQgKyBpICogMTI7XG5cdFx0XHRcdFx0dmFyIGNvbXBvbmVudElkeCA9ICggZmFjZSAqIDMgKiAzICkgKyAoICggaSAtIDEgKSAqIDMgKTtcblxuXHRcdFx0XHRcdHZlcnRpY2VzWyBjb21wb25lbnRJZHggXSA9IHJlYWRlci5nZXRGbG9hdDMyKCB2ZXJ0ZXhzdGFydCwgdHJ1ZSApO1xuXHRcdFx0XHRcdHZlcnRpY2VzWyBjb21wb25lbnRJZHggKyAxIF0gPSByZWFkZXIuZ2V0RmxvYXQzMiggdmVydGV4c3RhcnQgKyA0LCB0cnVlICk7XG5cdFx0XHRcdFx0dmVydGljZXNbIGNvbXBvbmVudElkeCArIDIgXSA9IHJlYWRlci5nZXRGbG9hdDMyKCB2ZXJ0ZXhzdGFydCArIDgsIHRydWUgKTtcblxuXHRcdFx0XHRcdG5vcm1hbHNbIGNvbXBvbmVudElkeCBdID0gbm9ybWFsWDtcblx0XHRcdFx0XHRub3JtYWxzWyBjb21wb25lbnRJZHggKyAxIF0gPSBub3JtYWxZO1xuXHRcdFx0XHRcdG5vcm1hbHNbIGNvbXBvbmVudElkeCArIDIgXSA9IG5vcm1hbFo7XG5cblx0XHRcdFx0XHRpZiAoIGhhc0NvbG9ycyApIHtcblxuXHRcdFx0XHRcdFx0Y29sb3JzWyBjb21wb25lbnRJZHggXSA9IHI7XG5cdFx0XHRcdFx0XHRjb2xvcnNbIGNvbXBvbmVudElkeCArIDEgXSA9IGc7XG5cdFx0XHRcdFx0XHRjb2xvcnNbIGNvbXBvbmVudElkeCArIDIgXSA9IGI7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9XG5cblx0XHRcdGdlb21ldHJ5LnNldEF0dHJpYnV0ZSggJ3Bvc2l0aW9uJywgbmV3IEJ1ZmZlckF0dHJpYnV0ZSggdmVydGljZXMsIDMgKSApO1xuXHRcdFx0Z2VvbWV0cnkuc2V0QXR0cmlidXRlKCAnbm9ybWFsJywgbmV3IEJ1ZmZlckF0dHJpYnV0ZSggbm9ybWFscywgMyApICk7XG5cblx0XHRcdGlmICggaGFzQ29sb3JzICkge1xuXG5cdFx0XHRcdGdlb21ldHJ5LnNldEF0dHJpYnV0ZSggJ2NvbG9yJywgbmV3IEJ1ZmZlckF0dHJpYnV0ZSggY29sb3JzLCAzICkgKTtcblx0XHRcdFx0Z2VvbWV0cnkuaGFzQ29sb3JzID0gdHJ1ZTtcblx0XHRcdFx0Z2VvbWV0cnkuYWxwaGEgPSBhbHBoYTtcblxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gZ2VvbWV0cnk7XG5cblx0XHR9XG5cblx0XHRmdW5jdGlvbiBwYXJzZUFTQ0lJKCBkYXRhICkge1xuXG5cdFx0XHR2YXIgZ2VvbWV0cnkgPSBuZXcgQnVmZmVyR2VvbWV0cnkoKTtcblx0XHRcdHZhciBwYXR0ZXJuU29saWQgPSAvc29saWQoW1xcc1xcU10qPyllbmRzb2xpZC9nO1xuXHRcdFx0dmFyIHBhdHRlcm5GYWNlID0gL2ZhY2V0KFtcXHNcXFNdKj8pZW5kZmFjZXQvZztcblx0XHRcdHZhciBmYWNlQ291bnRlciA9IDA7XG5cblx0XHRcdHZhciBwYXR0ZXJuRmxvYXQgPSAvW1xcc10rKFsrLV0/KD86XFxkKikoPzpcXC5cXGQqKT8oPzpbZUVdWystXT9cXGQrKT8pLy5zb3VyY2U7XG5cdFx0XHR2YXIgcGF0dGVyblZlcnRleCA9IG5ldyBSZWdFeHAoICd2ZXJ0ZXgnICsgcGF0dGVybkZsb2F0ICsgcGF0dGVybkZsb2F0ICsgcGF0dGVybkZsb2F0LCAnZycgKTtcblx0XHRcdHZhciBwYXR0ZXJuTm9ybWFsID0gbmV3IFJlZ0V4cCggJ25vcm1hbCcgKyBwYXR0ZXJuRmxvYXQgKyBwYXR0ZXJuRmxvYXQgKyBwYXR0ZXJuRmxvYXQsICdnJyApO1xuXG5cdFx0XHR2YXIgdmVydGljZXMgPSBbXTtcblx0XHRcdHZhciBub3JtYWxzID0gW107XG5cblx0XHRcdHZhciBub3JtYWwgPSBuZXcgVmVjdG9yMygpO1xuXG5cdFx0XHR2YXIgcmVzdWx0O1xuXG5cdFx0XHR2YXIgZ3JvdXBDb3VudCA9IDA7XG5cdFx0XHR2YXIgc3RhcnRWZXJ0ZXggPSAwO1xuXHRcdFx0dmFyIGVuZFZlcnRleCA9IDA7XG5cblx0XHRcdHdoaWxlICggKCByZXN1bHQgPSBwYXR0ZXJuU29saWQuZXhlYyggZGF0YSApICkgIT09IG51bGwgKSB7XG5cblx0XHRcdFx0c3RhcnRWZXJ0ZXggPSBlbmRWZXJ0ZXg7XG5cblx0XHRcdFx0dmFyIHNvbGlkID0gcmVzdWx0WyAwIF07XG5cblx0XHRcdFx0d2hpbGUgKCAoIHJlc3VsdCA9IHBhdHRlcm5GYWNlLmV4ZWMoIHNvbGlkICkgKSAhPT0gbnVsbCApIHtcblxuXHRcdFx0XHRcdHZhciB2ZXJ0ZXhDb3VudFBlckZhY2UgPSAwO1xuXHRcdFx0XHRcdHZhciBub3JtYWxDb3VudFBlckZhY2UgPSAwO1xuXG5cdFx0XHRcdFx0dmFyIHRleHQgPSByZXN1bHRbIDAgXTtcblxuXHRcdFx0XHRcdHdoaWxlICggKCByZXN1bHQgPSBwYXR0ZXJuTm9ybWFsLmV4ZWMoIHRleHQgKSApICE9PSBudWxsICkge1xuXG5cdFx0XHRcdFx0XHRub3JtYWwueCA9IHBhcnNlRmxvYXQoIHJlc3VsdFsgMSBdICk7XG5cdFx0XHRcdFx0XHRub3JtYWwueSA9IHBhcnNlRmxvYXQoIHJlc3VsdFsgMiBdICk7XG5cdFx0XHRcdFx0XHRub3JtYWwueiA9IHBhcnNlRmxvYXQoIHJlc3VsdFsgMyBdICk7XG5cdFx0XHRcdFx0XHRub3JtYWxDb3VudFBlckZhY2UgKys7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHR3aGlsZSAoICggcmVzdWx0ID0gcGF0dGVyblZlcnRleC5leGVjKCB0ZXh0ICkgKSAhPT0gbnVsbCApIHtcblxuXHRcdFx0XHRcdFx0dmVydGljZXMucHVzaCggcGFyc2VGbG9hdCggcmVzdWx0WyAxIF0gKSwgcGFyc2VGbG9hdCggcmVzdWx0WyAyIF0gKSwgcGFyc2VGbG9hdCggcmVzdWx0WyAzIF0gKSApO1xuXHRcdFx0XHRcdFx0bm9ybWFscy5wdXNoKCBub3JtYWwueCwgbm9ybWFsLnksIG5vcm1hbC56ICk7XG5cdFx0XHRcdFx0XHR2ZXJ0ZXhDb3VudFBlckZhY2UgKys7XG5cdFx0XHRcdFx0XHRlbmRWZXJ0ZXggKys7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBldmVyeSBmYWNlIGhhdmUgdG8gb3duIE9ORSB2YWxpZCBub3JtYWxcblxuXHRcdFx0XHRcdGlmICggbm9ybWFsQ291bnRQZXJGYWNlICE9PSAxICkge1xuXG5cdFx0XHRcdFx0XHRjb25zb2xlLmVycm9yKCAnVEhSRUUuU1RMTG9hZGVyOiBTb21ldGhpbmcgaXNuXFwndCByaWdodCB3aXRoIHRoZSBub3JtYWwgb2YgZmFjZSBudW1iZXIgJyArIGZhY2VDb3VudGVyICk7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBlYWNoIGZhY2UgaGF2ZSB0byBvd24gVEhSRUUgdmFsaWQgdmVydGljZXNcblxuXHRcdFx0XHRcdGlmICggdmVydGV4Q291bnRQZXJGYWNlICE9PSAzICkge1xuXG5cdFx0XHRcdFx0XHRjb25zb2xlLmVycm9yKCAnVEhSRUUuU1RMTG9hZGVyOiBTb21ldGhpbmcgaXNuXFwndCByaWdodCB3aXRoIHRoZSB2ZXJ0aWNlcyBvZiBmYWNlIG51bWJlciAnICsgZmFjZUNvdW50ZXIgKTtcblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGZhY2VDb3VudGVyICsrO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHR2YXIgc3RhcnQgPSBzdGFydFZlcnRleDtcblx0XHRcdFx0dmFyIGNvdW50ID0gZW5kVmVydGV4IC0gc3RhcnRWZXJ0ZXg7XG5cblx0XHRcdFx0Z2VvbWV0cnkuYWRkR3JvdXAoIHN0YXJ0LCBjb3VudCwgZ3JvdXBDb3VudCApO1xuXHRcdFx0XHRncm91cENvdW50ICsrO1xuXG5cdFx0XHR9XG5cblx0XHRcdGdlb21ldHJ5LnNldEF0dHJpYnV0ZSggJ3Bvc2l0aW9uJywgbmV3IEZsb2F0MzJCdWZmZXJBdHRyaWJ1dGUoIHZlcnRpY2VzLCAzICkgKTtcblx0XHRcdGdlb21ldHJ5LnNldEF0dHJpYnV0ZSggJ25vcm1hbCcsIG5ldyBGbG9hdDMyQnVmZmVyQXR0cmlidXRlKCBub3JtYWxzLCAzICkgKTtcblxuXHRcdFx0cmV0dXJuIGdlb21ldHJ5O1xuXG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gZW5zdXJlU3RyaW5nKCBidWZmZXIgKSB7XG5cblx0XHRcdGlmICggdHlwZW9mIGJ1ZmZlciAhPT0gJ3N0cmluZycgKSB7XG5cblx0XHRcdFx0cmV0dXJuIExvYWRlclV0aWxzLmRlY29kZVRleHQoIG5ldyBVaW50OEFycmF5KCBidWZmZXIgKSApO1xuXG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBidWZmZXI7XG5cblx0XHR9XG5cblx0XHRmdW5jdGlvbiBlbnN1cmVCaW5hcnkoIGJ1ZmZlciApIHtcblxuXHRcdFx0aWYgKCB0eXBlb2YgYnVmZmVyID09PSAnc3RyaW5nJyApIHtcblxuXHRcdFx0XHR2YXIgYXJyYXlfYnVmZmVyID0gbmV3IFVpbnQ4QXJyYXkoIGJ1ZmZlci5sZW5ndGggKTtcblx0XHRcdFx0Zm9yICggdmFyIGkgPSAwOyBpIDwgYnVmZmVyLmxlbmd0aDsgaSArKyApIHtcblxuXHRcdFx0XHRcdGFycmF5X2J1ZmZlclsgaSBdID0gYnVmZmVyLmNoYXJDb2RlQXQoIGkgKSAmIDB4ZmY7IC8vIGltcGxpY2l0bHkgYXNzdW1lcyBsaXR0bGUtZW5kaWFuXG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiBhcnJheV9idWZmZXIuYnVmZmVyIHx8IGFycmF5X2J1ZmZlcjtcblxuXHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRyZXR1cm4gYnVmZmVyO1xuXG5cdFx0XHR9XG5cblx0XHR9XG5cblx0XHQvLyBzdGFydFxuXG5cdFx0dmFyIGJpbkRhdGEgPSBlbnN1cmVCaW5hcnkoIGRhdGEgKTtcblxuXHRcdHJldHVybiBpc0JpbmFyeSggYmluRGF0YSApID8gcGFyc2VCaW5hcnkoIGJpbkRhdGEgKSA6IHBhcnNlQVNDSUkoIGVuc3VyZVN0cmluZyggZGF0YSApICk7XG5cblx0fVxuXG59ICk7XG5cbmV4cG9ydCB7IFNUTExvYWRlciB9O1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/three/examples/jsm/loaders/STLLoader.js\n");

/***/ }),

/***/ "./node_modules/three/examples/jsm/loaders/SVGLoader.js":
/*!**************************************************************!*\
  !*** ./node_modules/three/examples/jsm/loaders/SVGLoader.js ***!
  \**************************************************************/
/*! exports provided: SVGLoader */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SVGLoader\", function() { return SVGLoader; });\n/* harmony import */ var _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../build/three.module.js */ \"./node_modules/three/build/three.module.js\");\n\n\nvar SVGLoader = function ( manager ) {\n\n\t_build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Loader\"].call( this, manager );\n\n\t// Default dots per inch\n\tthis.defaultDPI = 90;\n\n\t// Accepted units: 'mm', 'cm', 'in', 'pt', 'pc', 'px'\n\tthis.defaultUnit = 'px';\n\n};\n\nSVGLoader.prototype = Object.assign( Object.create( _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Loader\"].prototype ), {\n\n\tconstructor: SVGLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar scope = this;\n\n\t\tvar loader = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"FileLoader\"]( scope.manager );\n\t\tloader.setPath( scope.path );\n\t\tloader.setRequestHeader( scope.requestHeader );\n\t\tloader.setWithCredentials( scope.withCredentials );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\ttry {\n\n\t\t\t\tonLoad( scope.parse( text ) );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\tif ( onError ) {\n\n\t\t\t\t\tonError( e );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( e );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t},\n\n\tparse: function ( text ) {\n\n\t\tvar scope = this;\n\n\t\tfunction parseNode( node, style ) {\n\n\t\t\tif ( node.nodeType !== 1 ) return;\n\n\t\t\tvar transform = getNodeTransform( node );\n\n\t\t\tvar traverseChildNodes = true;\n\n\t\t\tvar path = null;\n\n\t\t\tswitch ( node.nodeName ) {\n\n\t\t\t\tcase 'svg':\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'style':\n\t\t\t\t\tparseCSSStylesheet( node );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'g':\n\t\t\t\t\tstyle = parseStyle( node, style );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'path':\n\t\t\t\t\tstyle = parseStyle( node, style );\n\t\t\t\t\tif ( node.hasAttribute( 'd' ) ) path = parsePathNode( node );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'rect':\n\t\t\t\t\tstyle = parseStyle( node, style );\n\t\t\t\t\tpath = parseRectNode( node );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'polygon':\n\t\t\t\t\tstyle = parseStyle( node, style );\n\t\t\t\t\tpath = parsePolygonNode( node );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'polyline':\n\t\t\t\t\tstyle = parseStyle( node, style );\n\t\t\t\t\tpath = parsePolylineNode( node );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'circle':\n\t\t\t\t\tstyle = parseStyle( node, style );\n\t\t\t\t\tpath = parseCircleNode( node );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'ellipse':\n\t\t\t\t\tstyle = parseStyle( node, style );\n\t\t\t\t\tpath = parseEllipseNode( node );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'line':\n\t\t\t\t\tstyle = parseStyle( node, style );\n\t\t\t\t\tpath = parseLineNode( node );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'defs':\n\t\t\t\t\ttraverseChildNodes = false;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'use':\n\t\t\t\t\tstyle = parseStyle( node, style );\n\t\t\t\t\tvar usedNodeId = node.href.baseVal.substring( 1 );\n\t\t\t\t\tvar usedNode = node.viewportElement.getElementById( usedNodeId );\n\t\t\t\t\tif ( usedNode ) {\n\n\t\t\t\t\t\tparseNode( usedNode, style );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconsole.warn( 'SVGLoader: \\'use node\\' references non-existent node id: ' + usedNodeId );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\t// console.log( node );\n\n\t\t\t}\n\n\t\t\tif ( path ) {\n\n\t\t\t\tif ( style.fill !== undefined && style.fill !== 'none' ) {\n\n\t\t\t\t\tpath.color.setStyle( style.fill );\n\n\t\t\t\t}\n\n\t\t\t\ttransformPath( path, currentTransform );\n\n\t\t\t\tpaths.push( path );\n\n\t\t\t\tpath.userData = { node: node, style: style };\n\n\t\t\t}\n\n\t\t\tif ( traverseChildNodes ) {\n\n\t\t\t\tvar nodes = node.childNodes;\n\n\t\t\t\tfor ( var i = 0; i < nodes.length; i ++ ) {\n\n\t\t\t\t\tparseNode( nodes[ i ], style );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( transform ) {\n\n\t\t\t\ttransformStack.pop();\n\n\t\t\t\tif ( transformStack.length > 0 ) {\n\n\t\t\t\t\tcurrentTransform.copy( transformStack[ transformStack.length - 1 ] );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tcurrentTransform.identity();\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction parsePathNode( node ) {\n\n\t\t\tvar path = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"ShapePath\"]();\n\n\t\t\tvar point = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector2\"]();\n\t\t\tvar control = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector2\"]();\n\n\t\t\tvar firstPoint = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector2\"]();\n\t\t\tvar isFirstPoint = true;\n\t\t\tvar doSetFirstPoint = false;\n\n\t\t\tvar d = node.getAttribute( 'd' );\n\n\t\t\t// console.log( d );\n\n\t\t\tvar commands = d.match( /[a-df-z][^a-df-z]*/ig );\n\n\t\t\tfor ( var i = 0, l = commands.length; i < l; i ++ ) {\n\n\t\t\t\tvar command = commands[ i ];\n\n\t\t\t\tvar type = command.charAt( 0 );\n\t\t\t\tvar data = command.substr( 1 ).trim();\n\n\t\t\t\tif ( isFirstPoint === true ) {\n\n\t\t\t\t\tdoSetFirstPoint = true;\n\t\t\t\t\tisFirstPoint = false;\n\n\t\t\t\t}\n\n\t\t\t\tswitch ( type ) {\n\n\t\t\t\t\tcase 'M':\n\t\t\t\t\t\tvar numbers = parseFloats( data );\n\t\t\t\t\t\tfor ( var j = 0, jl = numbers.length; j < jl; j += 2 ) {\n\n\t\t\t\t\t\t\tpoint.x = numbers[ j + 0 ];\n\t\t\t\t\t\t\tpoint.y = numbers[ j + 1 ];\n\t\t\t\t\t\t\tcontrol.x = point.x;\n\t\t\t\t\t\t\tcontrol.y = point.y;\n\n\t\t\t\t\t\t\tif ( j === 0 ) {\n\n\t\t\t\t\t\t\t\tpath.moveTo( point.x, point.y );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tpath.lineTo( point.x, point.y );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( j === 0 && doSetFirstPoint === true ) firstPoint.copy( point );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'H':\n\t\t\t\t\t\tvar numbers = parseFloats( data );\n\n\t\t\t\t\t\tfor ( var j = 0, jl = numbers.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\t\tpoint.x = numbers[ j ];\n\t\t\t\t\t\t\tcontrol.x = point.x;\n\t\t\t\t\t\t\tcontrol.y = point.y;\n\t\t\t\t\t\t\tpath.lineTo( point.x, point.y );\n\n\t\t\t\t\t\t\tif ( j === 0 && doSetFirstPoint === true ) firstPoint.copy( point );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'V':\n\t\t\t\t\t\tvar numbers = parseFloats( data );\n\n\t\t\t\t\t\tfor ( var j = 0, jl = numbers.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\t\tpoint.y = numbers[ j ];\n\t\t\t\t\t\t\tcontrol.x = point.x;\n\t\t\t\t\t\t\tcontrol.y = point.y;\n\t\t\t\t\t\t\tpath.lineTo( point.x, point.y );\n\n\t\t\t\t\t\t\tif ( j === 0 && doSetFirstPoint === true ) firstPoint.copy( point );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'L':\n\t\t\t\t\t\tvar numbers = parseFloats( data );\n\n\t\t\t\t\t\tfor ( var j = 0, jl = numbers.length; j < jl; j += 2 ) {\n\n\t\t\t\t\t\t\tpoint.x = numbers[ j + 0 ];\n\t\t\t\t\t\t\tpoint.y = numbers[ j + 1 ];\n\t\t\t\t\t\t\tcontrol.x = point.x;\n\t\t\t\t\t\t\tcontrol.y = point.y;\n\t\t\t\t\t\t\tpath.lineTo( point.x, point.y );\n\n\t\t\t\t\t\t\tif ( j === 0 && doSetFirstPoint === true ) firstPoint.copy( point );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'C':\n\t\t\t\t\t\tvar numbers = parseFloats( data );\n\n\t\t\t\t\t\tfor ( var j = 0, jl = numbers.length; j < jl; j += 6 ) {\n\n\t\t\t\t\t\t\tpath.bezierCurveTo(\n\t\t\t\t\t\t\t\tnumbers[ j + 0 ],\n\t\t\t\t\t\t\t\tnumbers[ j + 1 ],\n\t\t\t\t\t\t\t\tnumbers[ j + 2 ],\n\t\t\t\t\t\t\t\tnumbers[ j + 3 ],\n\t\t\t\t\t\t\t\tnumbers[ j + 4 ],\n\t\t\t\t\t\t\t\tnumbers[ j + 5 ]\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tcontrol.x = numbers[ j + 2 ];\n\t\t\t\t\t\t\tcontrol.y = numbers[ j + 3 ];\n\t\t\t\t\t\t\tpoint.x = numbers[ j + 4 ];\n\t\t\t\t\t\t\tpoint.y = numbers[ j + 5 ];\n\n\t\t\t\t\t\t\tif ( j === 0 && doSetFirstPoint === true ) firstPoint.copy( point );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'S':\n\t\t\t\t\t\tvar numbers = parseFloats( data );\n\n\t\t\t\t\t\tfor ( var j = 0, jl = numbers.length; j < jl; j += 4 ) {\n\n\t\t\t\t\t\t\tpath.bezierCurveTo(\n\t\t\t\t\t\t\t\tgetReflection( point.x, control.x ),\n\t\t\t\t\t\t\t\tgetReflection( point.y, control.y ),\n\t\t\t\t\t\t\t\tnumbers[ j + 0 ],\n\t\t\t\t\t\t\t\tnumbers[ j + 1 ],\n\t\t\t\t\t\t\t\tnumbers[ j + 2 ],\n\t\t\t\t\t\t\t\tnumbers[ j + 3 ]\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tcontrol.x = numbers[ j + 0 ];\n\t\t\t\t\t\t\tcontrol.y = numbers[ j + 1 ];\n\t\t\t\t\t\t\tpoint.x = numbers[ j + 2 ];\n\t\t\t\t\t\t\tpoint.y = numbers[ j + 3 ];\n\n\t\t\t\t\t\t\tif ( j === 0 && doSetFirstPoint === true ) firstPoint.copy( point );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'Q':\n\t\t\t\t\t\tvar numbers = parseFloats( data );\n\n\t\t\t\t\t\tfor ( var j = 0, jl = numbers.length; j < jl; j += 4 ) {\n\n\t\t\t\t\t\t\tpath.quadraticCurveTo(\n\t\t\t\t\t\t\t\tnumbers[ j + 0 ],\n\t\t\t\t\t\t\t\tnumbers[ j + 1 ],\n\t\t\t\t\t\t\t\tnumbers[ j + 2 ],\n\t\t\t\t\t\t\t\tnumbers[ j + 3 ]\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tcontrol.x = numbers[ j + 0 ];\n\t\t\t\t\t\t\tcontrol.y = numbers[ j + 1 ];\n\t\t\t\t\t\t\tpoint.x = numbers[ j + 2 ];\n\t\t\t\t\t\t\tpoint.y = numbers[ j + 3 ];\n\n\t\t\t\t\t\t\tif ( j === 0 && doSetFirstPoint === true ) firstPoint.copy( point );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'T':\n\t\t\t\t\t\tvar numbers = parseFloats( data );\n\n\t\t\t\t\t\tfor ( var j = 0, jl = numbers.length; j < jl; j += 2 ) {\n\n\t\t\t\t\t\t\tvar rx = getReflection( point.x, control.x );\n\t\t\t\t\t\t\tvar ry = getReflection( point.y, control.y );\n\t\t\t\t\t\t\tpath.quadraticCurveTo(\n\t\t\t\t\t\t\t\trx,\n\t\t\t\t\t\t\t\try,\n\t\t\t\t\t\t\t\tnumbers[ j + 0 ],\n\t\t\t\t\t\t\t\tnumbers[ j + 1 ]\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tcontrol.x = rx;\n\t\t\t\t\t\t\tcontrol.y = ry;\n\t\t\t\t\t\t\tpoint.x = numbers[ j + 0 ];\n\t\t\t\t\t\t\tpoint.y = numbers[ j + 1 ];\n\n\t\t\t\t\t\t\tif ( j === 0 && doSetFirstPoint === true ) firstPoint.copy( point );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'A':\n\t\t\t\t\t\tvar numbers = parseFloats( data );\n\n\t\t\t\t\t\tfor ( var j = 0, jl = numbers.length; j < jl; j += 7 ) {\n\n\t\t\t\t\t\t\t// skip command if start point == end point\n\t\t\t\t\t\t\tif ( numbers[ j + 5 ] == point.x && numbers[ j + 6 ] == point.y ) continue;\n\n\t\t\t\t\t\t\tvar start = point.clone();\n\t\t\t\t\t\t\tpoint.x = numbers[ j + 5 ];\n\t\t\t\t\t\t\tpoint.y = numbers[ j + 6 ];\n\t\t\t\t\t\t\tcontrol.x = point.x;\n\t\t\t\t\t\t\tcontrol.y = point.y;\n\t\t\t\t\t\t\tparseArcCommand(\n\t\t\t\t\t\t\t\tpath, numbers[ j ], numbers[ j + 1 ], numbers[ j + 2 ], numbers[ j + 3 ], numbers[ j + 4 ], start, point\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tif ( j === 0 && doSetFirstPoint === true ) firstPoint.copy( point );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'm':\n\t\t\t\t\t\tvar numbers = parseFloats( data );\n\n\t\t\t\t\t\tfor ( var j = 0, jl = numbers.length; j < jl; j += 2 ) {\n\n\t\t\t\t\t\t\tpoint.x += numbers[ j + 0 ];\n\t\t\t\t\t\t\tpoint.y += numbers[ j + 1 ];\n\t\t\t\t\t\t\tcontrol.x = point.x;\n\t\t\t\t\t\t\tcontrol.y = point.y;\n\n\t\t\t\t\t\t\tif ( j === 0 ) {\n\n\t\t\t\t\t\t\t\tpath.moveTo( point.x, point.y );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tpath.lineTo( point.x, point.y );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( j === 0 && doSetFirstPoint === true ) firstPoint.copy( point );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'h':\n\t\t\t\t\t\tvar numbers = parseFloats( data );\n\n\t\t\t\t\t\tfor ( var j = 0, jl = numbers.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\t\tpoint.x += numbers[ j ];\n\t\t\t\t\t\t\tcontrol.x = point.x;\n\t\t\t\t\t\t\tcontrol.y = point.y;\n\t\t\t\t\t\t\tpath.lineTo( point.x, point.y );\n\n\t\t\t\t\t\t\tif ( j === 0 && doSetFirstPoint === true ) firstPoint.copy( point );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'v':\n\t\t\t\t\t\tvar numbers = parseFloats( data );\n\n\t\t\t\t\t\tfor ( var j = 0, jl = numbers.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\t\tpoint.y += numbers[ j ];\n\t\t\t\t\t\t\tcontrol.x = point.x;\n\t\t\t\t\t\t\tcontrol.y = point.y;\n\t\t\t\t\t\t\tpath.lineTo( point.x, point.y );\n\n\t\t\t\t\t\t\tif ( j === 0 && doSetFirstPoint === true ) firstPoint.copy( point );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'l':\n\t\t\t\t\t\tvar numbers = parseFloats( data );\n\n\t\t\t\t\t\tfor ( var j = 0, jl = numbers.length; j < jl; j += 2 ) {\n\n\t\t\t\t\t\t\tpoint.x += numbers[ j + 0 ];\n\t\t\t\t\t\t\tpoint.y += numbers[ j + 1 ];\n\t\t\t\t\t\t\tcontrol.x = point.x;\n\t\t\t\t\t\t\tcontrol.y = point.y;\n\t\t\t\t\t\t\tpath.lineTo( point.x, point.y );\n\n\t\t\t\t\t\t\tif ( j === 0 && doSetFirstPoint === true ) firstPoint.copy( point );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'c':\n\t\t\t\t\t\tvar numbers = parseFloats( data );\n\n\t\t\t\t\t\tfor ( var j = 0, jl = numbers.length; j < jl; j += 6 ) {\n\n\t\t\t\t\t\t\tpath.bezierCurveTo(\n\t\t\t\t\t\t\t\tpoint.x + numbers[ j + 0 ],\n\t\t\t\t\t\t\t\tpoint.y + numbers[ j + 1 ],\n\t\t\t\t\t\t\t\tpoint.x + numbers[ j + 2 ],\n\t\t\t\t\t\t\t\tpoint.y + numbers[ j + 3 ],\n\t\t\t\t\t\t\t\tpoint.x + numbers[ j + 4 ],\n\t\t\t\t\t\t\t\tpoint.y + numbers[ j + 5 ]\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tcontrol.x = point.x + numbers[ j + 2 ];\n\t\t\t\t\t\t\tcontrol.y = point.y + numbers[ j + 3 ];\n\t\t\t\t\t\t\tpoint.x += numbers[ j + 4 ];\n\t\t\t\t\t\t\tpoint.y += numbers[ j + 5 ];\n\n\t\t\t\t\t\t\tif ( j === 0 && doSetFirstPoint === true ) firstPoint.copy( point );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 's':\n\t\t\t\t\t\tvar numbers = parseFloats( data );\n\n\t\t\t\t\t\tfor ( var j = 0, jl = numbers.length; j < jl; j += 4 ) {\n\n\t\t\t\t\t\t\tpath.bezierCurveTo(\n\t\t\t\t\t\t\t\tgetReflection( point.x, control.x ),\n\t\t\t\t\t\t\t\tgetReflection( point.y, control.y ),\n\t\t\t\t\t\t\t\tpoint.x + numbers[ j + 0 ],\n\t\t\t\t\t\t\t\tpoint.y + numbers[ j + 1 ],\n\t\t\t\t\t\t\t\tpoint.x + numbers[ j + 2 ],\n\t\t\t\t\t\t\t\tpoint.y + numbers[ j + 3 ]\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tcontrol.x = point.x + numbers[ j + 0 ];\n\t\t\t\t\t\t\tcontrol.y = point.y + numbers[ j + 1 ];\n\t\t\t\t\t\t\tpoint.x += numbers[ j + 2 ];\n\t\t\t\t\t\t\tpoint.y += numbers[ j + 3 ];\n\n\t\t\t\t\t\t\tif ( j === 0 && doSetFirstPoint === true ) firstPoint.copy( point );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'q':\n\t\t\t\t\t\tvar numbers = parseFloats( data );\n\n\t\t\t\t\t\tfor ( var j = 0, jl = numbers.length; j < jl; j += 4 ) {\n\n\t\t\t\t\t\t\tpath.quadraticCurveTo(\n\t\t\t\t\t\t\t\tpoint.x + numbers[ j + 0 ],\n\t\t\t\t\t\t\t\tpoint.y + numbers[ j + 1 ],\n\t\t\t\t\t\t\t\tpoint.x + numbers[ j + 2 ],\n\t\t\t\t\t\t\t\tpoint.y + numbers[ j + 3 ]\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tcontrol.x = point.x + numbers[ j + 0 ];\n\t\t\t\t\t\t\tcontrol.y = point.y + numbers[ j + 1 ];\n\t\t\t\t\t\t\tpoint.x += numbers[ j + 2 ];\n\t\t\t\t\t\t\tpoint.y += numbers[ j + 3 ];\n\n\t\t\t\t\t\t\tif ( j === 0 && doSetFirstPoint === true ) firstPoint.copy( point );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 't':\n\t\t\t\t\t\tvar numbers = parseFloats( data );\n\n\t\t\t\t\t\tfor ( var j = 0, jl = numbers.length; j < jl; j += 2 ) {\n\n\t\t\t\t\t\t\tvar rx = getReflection( point.x, control.x );\n\t\t\t\t\t\t\tvar ry = getReflection( point.y, control.y );\n\t\t\t\t\t\t\tpath.quadraticCurveTo(\n\t\t\t\t\t\t\t\trx,\n\t\t\t\t\t\t\t\try,\n\t\t\t\t\t\t\t\tpoint.x + numbers[ j + 0 ],\n\t\t\t\t\t\t\t\tpoint.y + numbers[ j + 1 ]\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tcontrol.x = rx;\n\t\t\t\t\t\t\tcontrol.y = ry;\n\t\t\t\t\t\t\tpoint.x = point.x + numbers[ j + 0 ];\n\t\t\t\t\t\t\tpoint.y = point.y + numbers[ j + 1 ];\n\n\t\t\t\t\t\t\tif ( j === 0 && doSetFirstPoint === true ) firstPoint.copy( point );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'a':\n\t\t\t\t\t\tvar numbers = parseFloats( data );\n\n\t\t\t\t\t\tfor ( var j = 0, jl = numbers.length; j < jl; j += 7 ) {\n\n\t\t\t\t\t\t\t// skip command if no displacement\n\t\t\t\t\t\t\tif ( numbers[ j + 5 ] == 0 && numbers[ j + 6 ] == 0 ) continue;\n\n\t\t\t\t\t\t\tvar start = point.clone();\n\t\t\t\t\t\t\tpoint.x += numbers[ j + 5 ];\n\t\t\t\t\t\t\tpoint.y += numbers[ j + 6 ];\n\t\t\t\t\t\t\tcontrol.x = point.x;\n\t\t\t\t\t\t\tcontrol.y = point.y;\n\t\t\t\t\t\t\tparseArcCommand(\n\t\t\t\t\t\t\t\tpath, numbers[ j ], numbers[ j + 1 ], numbers[ j + 2 ], numbers[ j + 3 ], numbers[ j + 4 ], start, point\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tif ( j === 0 && doSetFirstPoint === true ) firstPoint.copy( point );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'Z':\n\t\t\t\t\tcase 'z':\n\t\t\t\t\t\tpath.currentPath.autoClose = true;\n\n\t\t\t\t\t\tif ( path.currentPath.curves.length > 0 ) {\n\n\t\t\t\t\t\t\t// Reset point to beginning of Path\n\t\t\t\t\t\t\tpoint.copy( firstPoint );\n\t\t\t\t\t\t\tpath.currentPath.currentPoint.copy( point );\n\t\t\t\t\t\t\tisFirstPoint = true;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tconsole.warn( command );\n\n\t\t\t\t}\n\n\t\t\t\t// console.log( type, parseFloats( data ), parseFloats( data ).length  )\n\n\t\t\t\tdoSetFirstPoint = false;\n\n\t\t\t}\n\n\t\t\treturn path;\n\n\t\t}\n\n\t\tfunction parseCSSStylesheet( node ) {\n\n\t\t\tif ( ! node.sheet || ! node.sheet.cssRules || ! node.sheet.cssRules.length ) return;\n\n\t\t\tfor ( var i = 0; i < node.sheet.cssRules.length; i ++ ) {\n\n\t\t\t\tvar stylesheet = node.sheet.cssRules[ i ];\n\n\t\t\t\tif ( stylesheet.type !== 1 ) continue;\n\n\t\t\t\tvar selectorList = stylesheet.selectorText\n\t\t\t\t\t.split( /,/gm )\n\t\t\t\t\t.filter( Boolean )\n\t\t\t\t\t.map( i => i.trim() );\n\n\t\t\t\tfor ( var j = 0; j < selectorList.length; j ++ ) {\n\n\t\t\t\t\tstylesheets[ selectorList[ j ] ] = Object.assign(\n\t\t\t\t\t\tstylesheets[ selectorList[ j ] ] || {},\n\t\t\t\t\t\tstylesheet.style\n\t\t\t\t\t);\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t/**\n\t\t * https://www.w3.org/TR/SVG/implnote.html#ArcImplementationNotes\n\t\t * https://mortoray.com/2017/02/16/rendering-an-svg-elliptical-arc-as-bezier-curves/ Appendix: Endpoint to center arc conversion\n\t\t * From\n\t\t * rx ry x-axis-rotation large-arc-flag sweep-flag x y\n\t\t * To\n\t\t * aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation\n\t\t */\n\n\t\tfunction parseArcCommand( path, rx, ry, x_axis_rotation, large_arc_flag, sweep_flag, start, end ) {\n\n\t\t\tif ( rx == 0 || ry == 0 ) {\n\n\t\t\t\t// draw a line if either of the radii == 0\n\t\t\t\tpath.lineTo( end.x, end.y );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tx_axis_rotation = x_axis_rotation * Math.PI / 180;\n\n\t\t\t// Ensure radii are positive\n\t\t\trx = Math.abs( rx );\n\t\t\try = Math.abs( ry );\n\n\t\t\t// Compute (x1', y1')\n\t\t\tvar dx2 = ( start.x - end.x ) / 2.0;\n\t\t\tvar dy2 = ( start.y - end.y ) / 2.0;\n\t\t\tvar x1p = Math.cos( x_axis_rotation ) * dx2 + Math.sin( x_axis_rotation ) * dy2;\n\t\t\tvar y1p = - Math.sin( x_axis_rotation ) * dx2 + Math.cos( x_axis_rotation ) * dy2;\n\n\t\t\t// Compute (cx', cy')\n\t\t\tvar rxs = rx * rx;\n\t\t\tvar rys = ry * ry;\n\t\t\tvar x1ps = x1p * x1p;\n\t\t\tvar y1ps = y1p * y1p;\n\n\t\t\t// Ensure radii are large enough\n\t\t\tvar cr = x1ps / rxs + y1ps / rys;\n\n\t\t\tif ( cr > 1 ) {\n\n\t\t\t\t// scale up rx,ry equally so cr == 1\n\t\t\t\tvar s = Math.sqrt( cr );\n\t\t\t\trx = s * rx;\n\t\t\t\try = s * ry;\n\t\t\t\trxs = rx * rx;\n\t\t\t\trys = ry * ry;\n\n\t\t\t}\n\n\t\t\tvar dq = ( rxs * y1ps + rys * x1ps );\n\t\t\tvar pq = ( rxs * rys - dq ) / dq;\n\t\t\tvar q = Math.sqrt( Math.max( 0, pq ) );\n\t\t\tif ( large_arc_flag === sweep_flag ) q = - q;\n\t\t\tvar cxp = q * rx * y1p / ry;\n\t\t\tvar cyp = - q * ry * x1p / rx;\n\n\t\t\t// Step 3: Compute (cx, cy) from (cx', cy')\n\t\t\tvar cx = Math.cos( x_axis_rotation ) * cxp - Math.sin( x_axis_rotation ) * cyp + ( start.x + end.x ) / 2;\n\t\t\tvar cy = Math.sin( x_axis_rotation ) * cxp + Math.cos( x_axis_rotation ) * cyp + ( start.y + end.y ) / 2;\n\n\t\t\t// Step 4: Compute θ1 and Δθ\n\t\t\tvar theta = svgAngle( 1, 0, ( x1p - cxp ) / rx, ( y1p - cyp ) / ry );\n\t\t\tvar delta = svgAngle( ( x1p - cxp ) / rx, ( y1p - cyp ) / ry, ( - x1p - cxp ) / rx, ( - y1p - cyp ) / ry ) % ( Math.PI * 2 );\n\n\t\t\tpath.currentPath.absellipse( cx, cy, rx, ry, theta, theta + delta, sweep_flag === 0, x_axis_rotation );\n\n\t\t}\n\n\t\tfunction svgAngle( ux, uy, vx, vy ) {\n\n\t\t\tvar dot = ux * vx + uy * vy;\n\t\t\tvar len = Math.sqrt( ux * ux + uy * uy ) * Math.sqrt( vx * vx + vy * vy );\n\t\t\tvar ang = Math.acos( Math.max( - 1, Math.min( 1, dot / len ) ) ); // floating point precision, slightly over values appear\n\t\t\tif ( ( ux * vy - uy * vx ) < 0 ) ang = - ang;\n\t\t\treturn ang;\n\n\t\t}\n\n\t\t/*\n\t\t* According to https://www.w3.org/TR/SVG/shapes.html#RectElementRXAttribute\n\t\t* rounded corner should be rendered to elliptical arc, but bezier curve does the job well enough\n\t\t*/\n\t\tfunction parseRectNode( node ) {\n\n\t\t\tvar x = parseFloatWithUnits( node.getAttribute( 'x' ) || 0 );\n\t\t\tvar y = parseFloatWithUnits( node.getAttribute( 'y' ) || 0 );\n\t\t\tvar rx = parseFloatWithUnits( node.getAttribute( 'rx' ) || 0 );\n\t\t\tvar ry = parseFloatWithUnits( node.getAttribute( 'ry' ) || 0 );\n\t\t\tvar w = parseFloatWithUnits( node.getAttribute( 'width' ) );\n\t\t\tvar h = parseFloatWithUnits( node.getAttribute( 'height' ) );\n\n\t\t\tvar path = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"ShapePath\"]();\n\t\t\tpath.moveTo( x + 2 * rx, y );\n\t\t\tpath.lineTo( x + w - 2 * rx, y );\n\t\t\tif ( rx !== 0 || ry !== 0 ) path.bezierCurveTo( x + w, y, x + w, y, x + w, y + 2 * ry );\n\t\t\tpath.lineTo( x + w, y + h - 2 * ry );\n\t\t\tif ( rx !== 0 || ry !== 0 ) path.bezierCurveTo( x + w, y + h, x + w, y + h, x + w - 2 * rx, y + h );\n\t\t\tpath.lineTo( x + 2 * rx, y + h );\n\n\t\t\tif ( rx !== 0 || ry !== 0 ) {\n\n\t\t\t\tpath.bezierCurveTo( x, y + h, x, y + h, x, y + h - 2 * ry );\n\n\t\t\t}\n\n\t\t\tpath.lineTo( x, y + 2 * ry );\n\n\t\t\tif ( rx !== 0 || ry !== 0 ) {\n\n\t\t\t\tpath.bezierCurveTo( x, y, x, y, x + 2 * rx, y );\n\n\t\t\t}\n\n\t\t\treturn path;\n\n\t\t}\n\n\t\tfunction parsePolygonNode( node ) {\n\n\t\t\tfunction iterator( match, a, b ) {\n\n\t\t\t\tvar x = parseFloatWithUnits( a );\n\t\t\t\tvar y = parseFloatWithUnits( b );\n\n\t\t\t\tif ( index === 0 ) {\n\n\t\t\t\t\tpath.moveTo( x, y );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tpath.lineTo( x, y );\n\n\t\t\t\t}\n\n\t\t\t\tindex ++;\n\n\t\t\t}\n\n\t\t\tvar regex = /(-?[\\d\\.?]+)[,|\\s](-?[\\d\\.?]+)/g;\n\n\t\t\tvar path = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"ShapePath\"]();\n\n\t\t\tvar index = 0;\n\n\t\t\tnode.getAttribute( 'points' ).replace( regex, iterator );\n\n\t\t\tpath.currentPath.autoClose = true;\n\n\t\t\treturn path;\n\n\t\t}\n\n\t\tfunction parsePolylineNode( node ) {\n\n\t\t\tfunction iterator( match, a, b ) {\n\n\t\t\t\tvar x = parseFloatWithUnits( a );\n\t\t\t\tvar y = parseFloatWithUnits( b );\n\n\t\t\t\tif ( index === 0 ) {\n\n\t\t\t\t\tpath.moveTo( x, y );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tpath.lineTo( x, y );\n\n\t\t\t\t}\n\n\t\t\t\tindex ++;\n\n\t\t\t}\n\n\t\t\tvar regex = /(-?[\\d\\.?]+)[,|\\s](-?[\\d\\.?]+)/g;\n\n\t\t\tvar path = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"ShapePath\"]();\n\n\t\t\tvar index = 0;\n\n\t\t\tnode.getAttribute( 'points' ).replace( regex, iterator );\n\n\t\t\tpath.currentPath.autoClose = false;\n\n\t\t\treturn path;\n\n\t\t}\n\n\t\tfunction parseCircleNode( node ) {\n\n\t\t\tvar x = parseFloatWithUnits( node.getAttribute( 'cx' ) );\n\t\t\tvar y = parseFloatWithUnits( node.getAttribute( 'cy' ) );\n\t\t\tvar r = parseFloatWithUnits( node.getAttribute( 'r' ) );\n\n\t\t\tvar subpath = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Path\"]();\n\t\t\tsubpath.absarc( x, y, r, 0, Math.PI * 2 );\n\n\t\t\tvar path = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"ShapePath\"]();\n\t\t\tpath.subPaths.push( subpath );\n\n\t\t\treturn path;\n\n\t\t}\n\n\t\tfunction parseEllipseNode( node ) {\n\n\t\t\tvar x = parseFloatWithUnits( node.getAttribute( 'cx' ) );\n\t\t\tvar y = parseFloatWithUnits( node.getAttribute( 'cy' ) );\n\t\t\tvar rx = parseFloatWithUnits( node.getAttribute( 'rx' ) );\n\t\t\tvar ry = parseFloatWithUnits( node.getAttribute( 'ry' ) );\n\n\t\t\tvar subpath = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Path\"]();\n\t\t\tsubpath.absellipse( x, y, rx, ry, 0, Math.PI * 2 );\n\n\t\t\tvar path = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"ShapePath\"]();\n\t\t\tpath.subPaths.push( subpath );\n\n\t\t\treturn path;\n\n\t\t}\n\n\t\tfunction parseLineNode( node ) {\n\n\t\t\tvar x1 = parseFloatWithUnits( node.getAttribute( 'x1' ) );\n\t\t\tvar y1 = parseFloatWithUnits( node.getAttribute( 'y1' ) );\n\t\t\tvar x2 = parseFloatWithUnits( node.getAttribute( 'x2' ) );\n\t\t\tvar y2 = parseFloatWithUnits( node.getAttribute( 'y2' ) );\n\n\t\t\tvar path = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"ShapePath\"]();\n\t\t\tpath.moveTo( x1, y1 );\n\t\t\tpath.lineTo( x2, y2 );\n\t\t\tpath.currentPath.autoClose = false;\n\n\t\t\treturn path;\n\n\t\t}\n\n\t\t//\n\n\t\tfunction parseStyle( node, style ) {\n\n\t\t\tstyle = Object.assign( {}, style ); // clone style\n\n\t\t\tvar stylesheetStyles = {};\n\n\t\t\tif ( node.hasAttribute( 'class' ) ) {\n\n\t\t\t\tvar classSelectors = node.getAttribute( 'class' )\n\t\t\t\t\t.split( /\\s/ )\n\t\t\t\t\t.filter( Boolean )\n\t\t\t\t\t.map( i => i.trim() );\n\n\t\t\t\tfor ( var i = 0; i < classSelectors.length; i ++ ) {\n\n\t\t\t\t\tstylesheetStyles = Object.assign( stylesheetStyles, stylesheets[ '.' + classSelectors[ i ] ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( node.hasAttribute( 'id' ) ) {\n\n\t\t\t\tstylesheetStyles = Object.assign( stylesheetStyles, stylesheets[ '#' + node.getAttribute( 'id' ) ] );\n\n\t\t\t}\n\n\t\t\tfunction addStyle( svgName, jsName, adjustFunction ) {\n\n\t\t\t\tif ( adjustFunction === undefined ) adjustFunction = function copy( v ) {\n\n\t\t\t\t\tif ( v.startsWith( 'url' ) ) console.warn( 'SVGLoader: url access in attributes is not implemented.' );\n\n\t\t\t\t\treturn v;\n\n\t\t\t\t};\n\n\t\t\t\tif ( node.hasAttribute( svgName ) ) style[ jsName ] = adjustFunction( node.getAttribute( svgName ) );\n\t\t\t\tif ( stylesheetStyles[ svgName ] ) style[ jsName ] = adjustFunction( stylesheetStyles[ svgName ] );\n\t\t\t\tif ( node.style && node.style[ svgName ] !== '' ) style[ jsName ] = adjustFunction( node.style[ svgName ] );\n\n\t\t\t}\n\n\t\t\tfunction clamp( v ) {\n\n\t\t\t\treturn Math.max( 0, Math.min( 1, parseFloatWithUnits( v ) ) );\n\n\t\t\t}\n\n\t\t\tfunction positive( v ) {\n\n\t\t\t\treturn Math.max( 0, parseFloatWithUnits( v ) );\n\n\t\t\t}\n\n\t\t\taddStyle( 'fill', 'fill' );\n\t\t\taddStyle( 'fill-opacity', 'fillOpacity', clamp );\n\t\t\taddStyle( 'opacity', 'opacity', clamp );\n\t\t\taddStyle( 'stroke', 'stroke' );\n\t\t\taddStyle( 'stroke-opacity', 'strokeOpacity', clamp );\n\t\t\taddStyle( 'stroke-width', 'strokeWidth', positive );\n\t\t\taddStyle( 'stroke-linejoin', 'strokeLineJoin' );\n\t\t\taddStyle( 'stroke-linecap', 'strokeLineCap' );\n\t\t\taddStyle( 'stroke-miterlimit', 'strokeMiterLimit', positive );\n\t\t\taddStyle( 'visibility', 'visibility' );\n\n\t\t\treturn style;\n\n\t\t}\n\n\t\t// http://www.w3.org/TR/SVG11/implnote.html#PathElementImplementationNotes\n\n\t\tfunction getReflection( a, b ) {\n\n\t\t\treturn a - ( b - a );\n\n\t\t}\n\n\t\t// from https://github.com/ppvg/svg-numbers (MIT License)\n\n\t\tfunction parseFloats( input ) {\n\n\t\t\tif ( typeof input !== 'string' ) {\n\n\t\t\t\tthrow new TypeError( 'Invalid input: ' + typeof input );\n\n\t\t\t}\n\n\t\t\t// Character groups\n\t\t\tvar RE = {\n\t\t\t\tSEPARATOR: /[ \\t\\r\\n\\,.\\-+]/,\n\t\t\t\tWHITESPACE: /[ \\t\\r\\n]/,\n\t\t\t\tDIGIT: /[\\d]/,\n\t\t\t\tSIGN: /[-+]/,\n\t\t\t\tPOINT: /\\./,\n\t\t\t\tCOMMA: /,/,\n\t\t\t\tEXP: /e/i\n\t\t\t};\n\n\t\t\t// States\n\t\t\tvar SEP = 0;\n\t\t\tvar INT = 1;\n\t\t\tvar FLOAT = 2;\n\t\t\tvar EXP = 3;\n\n\t\t\tvar state = SEP;\n\t\t\tvar seenComma = true;\n\t\t\tvar result = [], number = '', exponent = '';\n\n\t\t\tfunction throwSyntaxError( current, i, partial ) {\n\n\t\t\t\tvar error = new SyntaxError( 'Unexpected character \"' + current + '\" at index ' + i + '.' );\n\t\t\t\terror.partial = partial;\n\t\t\t\tthrow error;\n\n\t\t\t}\n\n\t\t\tfunction newNumber() {\n\n\t\t\t\tif ( number !== '' ) {\n\n\t\t\t\t\tif ( exponent === '' ) result.push( Number( number ) );\n\t\t\t\t\telse result.push( Number( number ) * Math.pow( 10, Number( exponent ) ) );\n\n\t\t\t\t}\n\n\t\t\t\tnumber = '';\n\t\t\t\texponent = '';\n\n\t\t\t}\n\n\t\t\tvar current, i = 0, length = input.length;\n\t\t\tfor ( i = 0; i < length; i ++ ) {\n\n\t\t\t\tcurrent = input[ i ];\n\n\t\t\t\t// parse until next number\n\t\t\t\tif ( state === SEP ) {\n\n\t\t\t\t\t// eat whitespace\n\t\t\t\t\tif ( RE.WHITESPACE.test( current ) ) {\n\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// start new number\n\t\t\t\t\tif ( RE.DIGIT.test( current ) || RE.SIGN.test( current ) ) {\n\n\t\t\t\t\t\tstate = INT;\n\t\t\t\t\t\tnumber = current;\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( RE.POINT.test( current ) ) {\n\n\t\t\t\t\t\tstate = FLOAT;\n\t\t\t\t\t\tnumber = current;\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// throw on double commas (e.g. \"1, , 2\")\n\t\t\t\t\tif ( RE.COMMA.test( current ) ) {\n\n\t\t\t\t\t\tif ( seenComma ) {\n\n\t\t\t\t\t\t\tthrowSyntaxError( current, i, result );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tseenComma = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// parse integer part\n\t\t\t\tif ( state === INT ) {\n\n\t\t\t\t\tif ( RE.DIGIT.test( current ) ) {\n\n\t\t\t\t\t\tnumber += current;\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( RE.POINT.test( current ) ) {\n\n\t\t\t\t\t\tnumber += current;\n\t\t\t\t\t\tstate = FLOAT;\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( RE.EXP.test( current ) ) {\n\n\t\t\t\t\t\tstate = EXP;\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// throw on double signs (\"-+1\"), but not on sign as separator (\"-1-2\")\n\t\t\t\t\tif ( RE.SIGN.test( current )\n\t\t\t\t\t\t\t&& number.length === 1\n\t\t\t\t\t\t\t&& RE.SIGN.test( number[ 0 ] ) ) {\n\n\t\t\t\t\t\tthrowSyntaxError( current, i, result );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// parse decimal part\n\t\t\t\tif ( state === FLOAT ) {\n\n\t\t\t\t\tif ( RE.DIGIT.test( current ) ) {\n\n\t\t\t\t\t\tnumber += current;\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( RE.EXP.test( current ) ) {\n\n\t\t\t\t\t\tstate = EXP;\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// throw on double decimal points (e.g. \"1..2\")\n\t\t\t\t\tif ( RE.POINT.test( current ) && number[ number.length - 1 ] === '.' ) {\n\n\t\t\t\t\t\tthrowSyntaxError( current, i, result );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// parse exponent part\n\t\t\t\tif ( state == EXP ) {\n\n\t\t\t\t\tif ( RE.DIGIT.test( current ) ) {\n\n\t\t\t\t\t\texponent += current;\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( RE.SIGN.test( current ) ) {\n\n\t\t\t\t\t\tif ( exponent === '' ) {\n\n\t\t\t\t\t\t\texponent += current;\n\t\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( exponent.length === 1 && RE.SIGN.test( exponent ) ) {\n\n\t\t\t\t\t\t\tthrowSyntaxError( current, i, result );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\n\t\t\t\t// end of number\n\t\t\t\tif ( RE.WHITESPACE.test( current ) ) {\n\n\t\t\t\t\tnewNumber();\n\t\t\t\t\tstate = SEP;\n\t\t\t\t\tseenComma = false;\n\n\t\t\t\t} else if ( RE.COMMA.test( current ) ) {\n\n\t\t\t\t\tnewNumber();\n\t\t\t\t\tstate = SEP;\n\t\t\t\t\tseenComma = true;\n\n\t\t\t\t} else if ( RE.SIGN.test( current ) ) {\n\n\t\t\t\t\tnewNumber();\n\t\t\t\t\tstate = INT;\n\t\t\t\t\tnumber = current;\n\n\t\t\t\t} else if ( RE.POINT.test( current ) ) {\n\n\t\t\t\t\tnewNumber();\n\t\t\t\t\tstate = FLOAT;\n\t\t\t\t\tnumber = current;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthrowSyntaxError( current, i, result );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// add the last number found (if any)\n\t\t\tnewNumber();\n\n\t\t\treturn result;\n\n\t\t}\n\n\t\t// Units\n\n\t\tvar units = [ 'mm', 'cm', 'in', 'pt', 'pc', 'px' ];\n\n\t\t// Conversion: [ fromUnit ][ toUnit ] (-1 means dpi dependent)\n\t\tvar unitConversion = {\n\n\t\t\t'mm': {\n\t\t\t\t'mm': 1,\n\t\t\t\t'cm': 0.1,\n\t\t\t\t'in': 1 / 25.4,\n\t\t\t\t'pt': 72 / 25.4,\n\t\t\t\t'pc': 6 / 25.4,\n\t\t\t\t'px': - 1\n\t\t\t},\n\t\t\t'cm': {\n\t\t\t\t'mm': 10,\n\t\t\t\t'cm': 1,\n\t\t\t\t'in': 1 / 2.54,\n\t\t\t\t'pt': 72 / 2.54,\n\t\t\t\t'pc': 6 / 2.54,\n\t\t\t\t'px': - 1\n\t\t\t},\n\t\t\t'in': {\n\t\t\t\t'mm': 25.4,\n\t\t\t\t'cm': 2.54,\n\t\t\t\t'in': 1,\n\t\t\t\t'pt': 72,\n\t\t\t\t'pc': 6,\n\t\t\t\t'px': - 1\n\t\t\t},\n\t\t\t'pt': {\n\t\t\t\t'mm': 25.4 / 72,\n\t\t\t\t'cm': 2.54 / 72,\n\t\t\t\t'in': 1 / 72,\n\t\t\t\t'pt': 1,\n\t\t\t\t'pc': 6 / 72,\n\t\t\t\t'px': - 1\n\t\t\t},\n\t\t\t'pc': {\n\t\t\t\t'mm': 25.4 / 6,\n\t\t\t\t'cm': 2.54 / 6,\n\t\t\t\t'in': 1 / 6,\n\t\t\t\t'pt': 72 / 6,\n\t\t\t\t'pc': 1,\n\t\t\t\t'px': - 1\n\t\t\t},\n\t\t\t'px': {\n\t\t\t\t'px': 1\n\t\t\t}\n\n\t\t};\n\n\t\tfunction parseFloatWithUnits( string ) {\n\n\t\t\tvar theUnit = 'px';\n\n\t\t\tif ( typeof string === 'string' || string instanceof String ) {\n\n\t\t\t\tfor ( var i = 0, n = units.length; i < n; i ++ ) {\n\n\t\t\t\t\tvar u = units[ i ];\n\n\t\t\t\t\tif ( string.endsWith( u ) ) {\n\n\t\t\t\t\t\ttheUnit = u;\n\t\t\t\t\t\tstring = string.substring( 0, string.length - u.length );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar scale = undefined;\n\n\t\t\tif ( theUnit === 'px' && scope.defaultUnit !== 'px' ) {\n\n\t\t\t\t// Conversion scale from  pixels to inches, then to default units\n\n\t\t\t\tscale = unitConversion[ 'in' ][ scope.defaultUnit ] / scope.defaultDPI;\n\n\t\t\t} else {\n\n\t\t\t\tscale = unitConversion[ theUnit ][ scope.defaultUnit ];\n\n\t\t\t\tif ( scale < 0 ) {\n\n\t\t\t\t\t// Conversion scale to pixels\n\n\t\t\t\t\tscale = unitConversion[ theUnit ][ 'in' ] * scope.defaultDPI;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn scale * parseFloat( string );\n\n\t\t}\n\n\t\t// Transforms\n\n\t\tfunction getNodeTransform( node ) {\n\n\t\t\tif ( ! ( node.hasAttribute( 'transform' ) || ( node.nodeName === 'use' && ( node.hasAttribute( 'x' ) || node.hasAttribute( 'y' ) ) ) ) ) {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\tvar transform = parseNodeTransform( node );\n\n\t\t\tif ( transformStack.length > 0 ) {\n\n\t\t\t\ttransform.premultiply( transformStack[ transformStack.length - 1 ] );\n\n\t\t\t}\n\n\t\t\tcurrentTransform.copy( transform );\n\t\t\ttransformStack.push( transform );\n\n\t\t\treturn transform;\n\n\t\t}\n\n\t\tfunction parseNodeTransform( node ) {\n\n\t\t\tvar transform = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Matrix3\"]();\n\t\t\tvar currentTransform = tempTransform0;\n\n\t\t\tif ( node.nodeName === 'use' && ( node.hasAttribute( 'x' ) || node.hasAttribute( 'y' ) ) ) {\n\n\t\t\t\tvar tx = parseFloatWithUnits( node.getAttribute( 'x' ) );\n\t\t\t\tvar ty = parseFloatWithUnits( node.getAttribute( 'y' ) );\n\n\t\t\t\ttransform.translate( tx, ty );\n\n\t\t\t}\n\n\t\t\tif ( node.hasAttribute( 'transform' ) ) {\n\n\t\t\t\tvar transformsTexts = node.getAttribute( 'transform' ).split( ')' );\n\n\t\t\t\tfor ( var tIndex = transformsTexts.length - 1; tIndex >= 0; tIndex -- ) {\n\n\t\t\t\t\tvar transformText = transformsTexts[ tIndex ].trim();\n\n\t\t\t\t\tif ( transformText === '' ) continue;\n\n\t\t\t\t\tvar openParPos = transformText.indexOf( '(' );\n\t\t\t\t\tvar closeParPos = transformText.length;\n\n\t\t\t\t\tif ( openParPos > 0 && openParPos < closeParPos ) {\n\n\t\t\t\t\t\tvar transformType = transformText.substr( 0, openParPos );\n\n\t\t\t\t\t\tvar array = parseFloats( transformText.substr( openParPos + 1, closeParPos - openParPos - 1 ) );\n\n\t\t\t\t\t\tcurrentTransform.identity();\n\n\t\t\t\t\t\tswitch ( transformType ) {\n\n\t\t\t\t\t\t\tcase 'translate':\n\n\t\t\t\t\t\t\t\tif ( array.length >= 1 ) {\n\n\t\t\t\t\t\t\t\t\tvar tx = array[ 0 ];\n\t\t\t\t\t\t\t\t\tvar ty = tx;\n\n\t\t\t\t\t\t\t\t\tif ( array.length >= 2 ) {\n\n\t\t\t\t\t\t\t\t\t\tty = array[ 1 ];\n\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tcurrentTransform.translate( tx, ty );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 'rotate':\n\n\t\t\t\t\t\t\t\tif ( array.length >= 1 ) {\n\n\t\t\t\t\t\t\t\t\tvar angle = 0;\n\t\t\t\t\t\t\t\t\tvar cx = 0;\n\t\t\t\t\t\t\t\t\tvar cy = 0;\n\n\t\t\t\t\t\t\t\t\t// Angle\n\t\t\t\t\t\t\t\t\tangle = - array[ 0 ] * Math.PI / 180;\n\n\t\t\t\t\t\t\t\t\tif ( array.length >= 3 ) {\n\n\t\t\t\t\t\t\t\t\t\t// Center x, y\n\t\t\t\t\t\t\t\t\t\tcx = array[ 1 ];\n\t\t\t\t\t\t\t\t\t\tcy = array[ 2 ];\n\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t// Rotate around center (cx, cy)\n\t\t\t\t\t\t\t\t\ttempTransform1.identity().translate( - cx, - cy );\n\t\t\t\t\t\t\t\t\ttempTransform2.identity().rotate( angle );\n\t\t\t\t\t\t\t\t\ttempTransform3.multiplyMatrices( tempTransform2, tempTransform1 );\n\t\t\t\t\t\t\t\t\ttempTransform1.identity().translate( cx, cy );\n\t\t\t\t\t\t\t\t\tcurrentTransform.multiplyMatrices( tempTransform1, tempTransform3 );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 'scale':\n\n\t\t\t\t\t\t\t\tif ( array.length >= 1 ) {\n\n\t\t\t\t\t\t\t\t\tvar scaleX = array[ 0 ];\n\t\t\t\t\t\t\t\t\tvar scaleY = scaleX;\n\n\t\t\t\t\t\t\t\t\tif ( array.length >= 2 ) {\n\n\t\t\t\t\t\t\t\t\t\tscaleY = array[ 1 ];\n\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tcurrentTransform.scale( scaleX, scaleY );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 'skewX':\n\n\t\t\t\t\t\t\t\tif ( array.length === 1 ) {\n\n\t\t\t\t\t\t\t\t\tcurrentTransform.set(\n\t\t\t\t\t\t\t\t\t\t1, Math.tan( array[ 0 ] * Math.PI / 180 ), 0,\n\t\t\t\t\t\t\t\t\t\t0, 1, 0,\n\t\t\t\t\t\t\t\t\t\t0, 0, 1\n\t\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 'skewY':\n\n\t\t\t\t\t\t\t\tif ( array.length === 1 ) {\n\n\t\t\t\t\t\t\t\t\tcurrentTransform.set(\n\t\t\t\t\t\t\t\t\t\t1, 0, 0,\n\t\t\t\t\t\t\t\t\t\tMath.tan( array[ 0 ] * Math.PI / 180 ), 1, 0,\n\t\t\t\t\t\t\t\t\t\t0, 0, 1\n\t\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 'matrix':\n\n\t\t\t\t\t\t\t\tif ( array.length === 6 ) {\n\n\t\t\t\t\t\t\t\t\tcurrentTransform.set(\n\t\t\t\t\t\t\t\t\t\tarray[ 0 ], array[ 2 ], array[ 4 ],\n\t\t\t\t\t\t\t\t\t\tarray[ 1 ], array[ 3 ], array[ 5 ],\n\t\t\t\t\t\t\t\t\t\t0, 0, 1\n\t\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttransform.premultiply( currentTransform );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn transform;\n\n\t\t}\n\n\t\tfunction transformPath( path, m ) {\n\n\t\t\tfunction transfVec2( v2 ) {\n\n\t\t\t\ttempV3.set( v2.x, v2.y, 1 ).applyMatrix3( m );\n\n\t\t\t\tv2.set( tempV3.x, tempV3.y );\n\n\t\t\t}\n\n\t\t\tvar isRotated = isTransformRotated( m );\n\n\t\t\tvar subPaths = path.subPaths;\n\n\t\t\tfor ( var i = 0, n = subPaths.length; i < n; i ++ ) {\n\n\t\t\t\tvar subPath = subPaths[ i ];\n\t\t\t\tvar curves = subPath.curves;\n\n\t\t\t\tfor ( var j = 0; j < curves.length; j ++ ) {\n\n\t\t\t\t\tvar curve = curves[ j ];\n\n\t\t\t\t\tif ( curve.isLineCurve ) {\n\n\t\t\t\t\t\ttransfVec2( curve.v1 );\n\t\t\t\t\t\ttransfVec2( curve.v2 );\n\n\t\t\t\t\t} else if ( curve.isCubicBezierCurve ) {\n\n\t\t\t\t\t\ttransfVec2( curve.v0 );\n\t\t\t\t\t\ttransfVec2( curve.v1 );\n\t\t\t\t\t\ttransfVec2( curve.v2 );\n\t\t\t\t\t\ttransfVec2( curve.v3 );\n\n\t\t\t\t\t} else if ( curve.isQuadraticBezierCurve ) {\n\n\t\t\t\t\t\ttransfVec2( curve.v0 );\n\t\t\t\t\t\ttransfVec2( curve.v1 );\n\t\t\t\t\t\ttransfVec2( curve.v2 );\n\n\t\t\t\t\t} else if ( curve.isEllipseCurve ) {\n\n\t\t\t\t\t\tif ( isRotated ) {\n\n\t\t\t\t\t\t\tconsole.warn( 'SVGLoader: Elliptic arc or ellipse rotation or skewing is not implemented.' );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ttempV2.set( curve.aX, curve.aY );\n\t\t\t\t\t\ttransfVec2( tempV2 );\n\t\t\t\t\t\tcurve.aX = tempV2.x;\n\t\t\t\t\t\tcurve.aY = tempV2.y;\n\n\t\t\t\t\t\tcurve.xRadius *= getTransformScaleX( m );\n\t\t\t\t\t\tcurve.yRadius *= getTransformScaleY( m );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction isTransformRotated( m ) {\n\n\t\t\treturn m.elements[ 1 ] !== 0 || m.elements[ 3 ] !== 0;\n\n\t\t}\n\n\t\tfunction getTransformScaleX( m ) {\n\n\t\t\tvar te = m.elements;\n\t\t\treturn Math.sqrt( te[ 0 ] * te[ 0 ] + te[ 1 ] * te[ 1 ] );\n\n\t\t}\n\n\t\tfunction getTransformScaleY( m ) {\n\n\t\t\tvar te = m.elements;\n\t\t\treturn Math.sqrt( te[ 3 ] * te[ 3 ] + te[ 4 ] * te[ 4 ] );\n\n\t\t}\n\n\t\t//\n\n\t\tvar paths = [];\n\t\tvar stylesheets = {};\n\n\t\tvar transformStack = [];\n\n\t\tvar tempTransform0 = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Matrix3\"]();\n\t\tvar tempTransform1 = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Matrix3\"]();\n\t\tvar tempTransform2 = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Matrix3\"]();\n\t\tvar tempTransform3 = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Matrix3\"]();\n\t\tvar tempV2 = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector2\"]();\n\t\tvar tempV3 = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector3\"]();\n\n\t\tvar currentTransform = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Matrix3\"]();\n\n\t\tvar xml = new DOMParser().parseFromString( text, 'image/svg+xml' ); // application/xml\n\n\t\tparseNode( xml.documentElement, {\n\t\t\tfill: '#000',\n\t\t\tfillOpacity: 1,\n\t\t\tstrokeOpacity: 1,\n\t\t\tstrokeWidth: 1,\n\t\t\tstrokeLineJoin: 'miter',\n\t\t\tstrokeLineCap: 'butt',\n\t\t\tstrokeMiterLimit: 4\n\t\t} );\n\n\t\tvar data = { paths: paths, xml: xml.documentElement };\n\n\t\t// console.log( paths );\n\t\treturn data;\n\n\t}\n\n} );\n\nSVGLoader.getStrokeStyle = function ( width, color, lineJoin, lineCap, miterLimit ) {\n\n\t// Param width: Stroke width\n\t// Param color: As returned by THREE.Color.getStyle()\n\t// Param lineJoin: One of \"round\", \"bevel\", \"miter\" or \"miter-limit\"\n\t// Param lineCap: One of \"round\", \"square\" or \"butt\"\n\t// Param miterLimit: Maximum join length, in multiples of the \"width\" parameter (join is truncated if it exceeds that distance)\n\t// Returns style object\n\n\twidth = width !== undefined ? width : 1;\n\tcolor = color !== undefined ? color : '#000';\n\tlineJoin = lineJoin !== undefined ? lineJoin : 'miter';\n\tlineCap = lineCap !== undefined ? lineCap : 'butt';\n\tmiterLimit = miterLimit !== undefined ? miterLimit : 4;\n\n\treturn {\n\t\tstrokeColor: color,\n\t\tstrokeWidth: width,\n\t\tstrokeLineJoin: lineJoin,\n\t\tstrokeLineCap: lineCap,\n\t\tstrokeMiterLimit: miterLimit\n\t};\n\n};\n\nSVGLoader.pointsToStroke = function ( points, style, arcDivisions, minDistance ) {\n\n\t// Generates a stroke with some witdh around the given path.\n\t// The path can be open or closed (last point equals to first point)\n\t// Param points: Array of Vector2D (the path). Minimum 2 points.\n\t// Param style: Object with SVG properties as returned by SVGLoader.getStrokeStyle(), or SVGLoader.parse() in the path.userData.style object\n\t// Params arcDivisions: Arc divisions for round joins and endcaps. (Optional)\n\t// Param minDistance: Points closer to this distance will be merged. (Optional)\n\t// Returns BufferGeometry with stroke triangles (In plane z = 0). UV coordinates are generated ('u' along path. 'v' across it, from left to right)\n\n\tvar vertices = [];\n\tvar normals = [];\n\tvar uvs = [];\n\n\tif ( SVGLoader.pointsToStrokeWithBuffers( points, style, arcDivisions, minDistance, vertices, normals, uvs ) === 0 ) {\n\n\t\treturn null;\n\n\t}\n\n\tvar geometry = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"BufferGeometry\"]();\n\tgeometry.setAttribute( 'position', new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Float32BufferAttribute\"]( vertices, 3 ) );\n\tgeometry.setAttribute( 'normal', new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Float32BufferAttribute\"]( normals, 3 ) );\n\tgeometry.setAttribute( 'uv', new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Float32BufferAttribute\"]( uvs, 2 ) );\n\n\treturn geometry;\n\n};\n\nSVGLoader.pointsToStrokeWithBuffers = function () {\n\n\tvar tempV2_1 = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector2\"]();\n\tvar tempV2_2 = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector2\"]();\n\tvar tempV2_3 = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector2\"]();\n\tvar tempV2_4 = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector2\"]();\n\tvar tempV2_5 = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector2\"]();\n\tvar tempV2_6 = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector2\"]();\n\tvar tempV2_7 = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector2\"]();\n\tvar lastPointL = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector2\"]();\n\tvar lastPointR = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector2\"]();\n\tvar point0L = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector2\"]();\n\tvar point0R = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector2\"]();\n\tvar currentPointL = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector2\"]();\n\tvar currentPointR = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector2\"]();\n\tvar nextPointL = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector2\"]();\n\tvar nextPointR = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector2\"]();\n\tvar innerPoint = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector2\"]();\n\tvar outerPoint = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector2\"]();\n\n\treturn function ( points, style, arcDivisions, minDistance, vertices, normals, uvs, vertexOffset ) {\n\n\t\t// This function can be called to update existing arrays or buffers.\n\t\t// Accepts same parameters as pointsToStroke, plus the buffers and optional offset.\n\t\t// Param vertexOffset: Offset vertices to start writing in the buffers (3 elements/vertex for vertices and normals, and 2 elements/vertex for uvs)\n\t\t// Returns number of written vertices / normals / uvs pairs\n\t\t// if 'vertices' parameter is undefined no triangles will be generated, but the returned vertices count will still be valid (useful to preallocate the buffers)\n\t\t// 'normals' and 'uvs' buffers are optional\n\n\t\tarcDivisions = arcDivisions !== undefined ? arcDivisions : 12;\n\t\tminDistance = minDistance !== undefined ? minDistance : 0.001;\n\t\tvertexOffset = vertexOffset !== undefined ? vertexOffset : 0;\n\n\t\t// First ensure there are no duplicated points\n\t\tpoints = removeDuplicatedPoints( points );\n\n\t\tvar numPoints = points.length;\n\n\t\tif ( numPoints < 2 ) return 0;\n\n\t\tvar isClosed = points[ 0 ].equals( points[ numPoints - 1 ] );\n\n\t\tvar currentPoint;\n\t\tvar previousPoint = points[ 0 ];\n\t\tvar nextPoint;\n\n\t\tvar strokeWidth2 = style.strokeWidth / 2;\n\n\t\tvar deltaU = 1 / ( numPoints - 1 );\n\t\tvar u0 = 0;\n\n\t\tvar innerSideModified;\n\t\tvar joinIsOnLeftSide;\n\t\tvar isMiter;\n\t\tvar initialJoinIsOnLeftSide = false;\n\n\t\tvar numVertices = 0;\n\t\tvar currentCoordinate = vertexOffset * 3;\n\t\tvar currentCoordinateUV = vertexOffset * 2;\n\n\t\t// Get initial left and right stroke points\n\t\tgetNormal( points[ 0 ], points[ 1 ], tempV2_1 ).multiplyScalar( strokeWidth2 );\n\t\tlastPointL.copy( points[ 0 ] ).sub( tempV2_1 );\n\t\tlastPointR.copy( points[ 0 ] ).add( tempV2_1 );\n\t\tpoint0L.copy( lastPointL );\n\t\tpoint0R.copy( lastPointR );\n\n\t\tfor ( var iPoint = 1; iPoint < numPoints; iPoint ++ ) {\n\n\t\t\tcurrentPoint = points[ iPoint ];\n\n\t\t\t// Get next point\n\t\t\tif ( iPoint === numPoints - 1 ) {\n\n\t\t\t\tif ( isClosed ) {\n\n\t\t\t\t\t// Skip duplicated initial point\n\t\t\t\t\tnextPoint = points[ 1 ];\n\n\t\t\t\t} else nextPoint = undefined;\n\n\t\t\t} else {\n\n\t\t\t\tnextPoint = points[ iPoint + 1 ];\n\n\t\t\t}\n\n\t\t\t// Normal of previous segment in tempV2_1\n\t\t\tvar normal1 = tempV2_1;\n\t\t\tgetNormal( previousPoint, currentPoint, normal1 );\n\n\t\t\ttempV2_3.copy( normal1 ).multiplyScalar( strokeWidth2 );\n\t\t\tcurrentPointL.copy( currentPoint ).sub( tempV2_3 );\n\t\t\tcurrentPointR.copy( currentPoint ).add( tempV2_3 );\n\n\t\t\tvar u1 = u0 + deltaU;\n\n\t\t\tinnerSideModified = false;\n\n\t\t\tif ( nextPoint !== undefined ) {\n\n\t\t\t\t// Normal of next segment in tempV2_2\n\t\t\t\tgetNormal( currentPoint, nextPoint, tempV2_2 );\n\n\t\t\t\ttempV2_3.copy( tempV2_2 ).multiplyScalar( strokeWidth2 );\n\t\t\t\tnextPointL.copy( currentPoint ).sub( tempV2_3 );\n\t\t\t\tnextPointR.copy( currentPoint ).add( tempV2_3 );\n\n\t\t\t\tjoinIsOnLeftSide = true;\n\t\t\t\ttempV2_3.subVectors( nextPoint, previousPoint );\n\t\t\t\tif ( normal1.dot( tempV2_3 ) < 0 ) {\n\n\t\t\t\t\tjoinIsOnLeftSide = false;\n\n\t\t\t\t}\n\n\t\t\t\tif ( iPoint === 1 ) initialJoinIsOnLeftSide = joinIsOnLeftSide;\n\n\t\t\t\ttempV2_3.subVectors( nextPoint, currentPoint );\n\t\t\t\ttempV2_3.normalize();\n\t\t\t\tvar dot = Math.abs( normal1.dot( tempV2_3 ) );\n\n\t\t\t\t// If path is straight, don't create join\n\t\t\t\tif ( dot !== 0 ) {\n\n\t\t\t\t\t// Compute inner and outer segment intersections\n\t\t\t\t\tvar miterSide = strokeWidth2 / dot;\n\t\t\t\t\ttempV2_3.multiplyScalar( - miterSide );\n\t\t\t\t\ttempV2_4.subVectors( currentPoint, previousPoint );\n\t\t\t\t\ttempV2_5.copy( tempV2_4 ).setLength( miterSide ).add( tempV2_3 );\n\t\t\t\t\tinnerPoint.copy( tempV2_5 ).negate();\n\t\t\t\t\tvar miterLength2 = tempV2_5.length();\n\t\t\t\t\tvar segmentLengthPrev = tempV2_4.length();\n\t\t\t\t\ttempV2_4.divideScalar( segmentLengthPrev );\n\t\t\t\t\ttempV2_6.subVectors( nextPoint, currentPoint );\n\t\t\t\t\tvar segmentLengthNext = tempV2_6.length();\n\t\t\t\t\ttempV2_6.divideScalar( segmentLengthNext );\n\t\t\t\t\t// Check that previous and next segments doesn't overlap with the innerPoint of intersection\n\t\t\t\t\tif ( tempV2_4.dot( innerPoint ) < segmentLengthPrev && tempV2_6.dot( innerPoint ) < segmentLengthNext ) {\n\n\t\t\t\t\t\tinnerSideModified = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t\touterPoint.copy( tempV2_5 ).add( currentPoint );\n\t\t\t\t\tinnerPoint.add( currentPoint );\n\n\t\t\t\t\tisMiter = false;\n\n\t\t\t\t\tif ( innerSideModified ) {\n\n\t\t\t\t\t\tif ( joinIsOnLeftSide ) {\n\n\t\t\t\t\t\t\tnextPointR.copy( innerPoint );\n\t\t\t\t\t\t\tcurrentPointR.copy( innerPoint );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tnextPointL.copy( innerPoint );\n\t\t\t\t\t\t\tcurrentPointL.copy( innerPoint );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// The segment triangles are generated here if there was overlapping\n\n\t\t\t\t\t\tmakeSegmentTriangles();\n\n\t\t\t\t\t}\n\n\t\t\t\t\tswitch ( style.strokeLineJoin ) {\n\n\t\t\t\t\t\tcase 'bevel':\n\n\t\t\t\t\t\t\tmakeSegmentWithBevelJoin( joinIsOnLeftSide, innerSideModified, u1 );\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'round':\n\n\t\t\t\t\t\t\t// Segment triangles\n\n\t\t\t\t\t\t\tcreateSegmentTrianglesWithMiddleSection( joinIsOnLeftSide, innerSideModified );\n\n\t\t\t\t\t\t\t// Join triangles\n\n\t\t\t\t\t\t\tif ( joinIsOnLeftSide ) {\n\n\t\t\t\t\t\t\t\tmakeCircularSector( currentPoint, currentPointL, nextPointL, u1, 0 );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tmakeCircularSector( currentPoint, nextPointR, currentPointR, u1, 1 );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'miter':\n\t\t\t\t\t\tcase 'miter-clip':\n\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\tvar miterFraction = ( strokeWidth2 * style.strokeMiterLimit ) / miterLength2;\n\n\t\t\t\t\t\t\tif ( miterFraction < 1 ) {\n\n\t\t\t\t\t\t\t\t// The join miter length exceeds the miter limit\n\n\t\t\t\t\t\t\t\tif ( style.strokeLineJoin !== 'miter-clip' ) {\n\n\t\t\t\t\t\t\t\t\tmakeSegmentWithBevelJoin( joinIsOnLeftSide, innerSideModified, u1 );\n\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t// Segment triangles\n\n\t\t\t\t\t\t\t\t\tcreateSegmentTrianglesWithMiddleSection( joinIsOnLeftSide, innerSideModified );\n\n\t\t\t\t\t\t\t\t\t// Miter-clip join triangles\n\n\t\t\t\t\t\t\t\t\tif ( joinIsOnLeftSide ) {\n\n\t\t\t\t\t\t\t\t\t\ttempV2_6.subVectors( outerPoint, currentPointL ).multiplyScalar( miterFraction ).add( currentPointL );\n\t\t\t\t\t\t\t\t\t\ttempV2_7.subVectors( outerPoint, nextPointL ).multiplyScalar( miterFraction ).add( nextPointL );\n\n\t\t\t\t\t\t\t\t\t\taddVertex( currentPointL, u1, 0 );\n\t\t\t\t\t\t\t\t\t\taddVertex( tempV2_6, u1, 0 );\n\t\t\t\t\t\t\t\t\t\taddVertex( currentPoint, u1, 0.5 );\n\n\t\t\t\t\t\t\t\t\t\taddVertex( currentPoint, u1, 0.5 );\n\t\t\t\t\t\t\t\t\t\taddVertex( tempV2_6, u1, 0 );\n\t\t\t\t\t\t\t\t\t\taddVertex( tempV2_7, u1, 0 );\n\n\t\t\t\t\t\t\t\t\t\taddVertex( currentPoint, u1, 0.5 );\n\t\t\t\t\t\t\t\t\t\taddVertex( tempV2_7, u1, 0 );\n\t\t\t\t\t\t\t\t\t\taddVertex( nextPointL, u1, 0 );\n\n\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\ttempV2_6.subVectors( outerPoint, currentPointR ).multiplyScalar( miterFraction ).add( currentPointR );\n\t\t\t\t\t\t\t\t\t\ttempV2_7.subVectors( outerPoint, nextPointR ).multiplyScalar( miterFraction ).add( nextPointR );\n\n\t\t\t\t\t\t\t\t\t\taddVertex( currentPointR, u1, 1 );\n\t\t\t\t\t\t\t\t\t\taddVertex( tempV2_6, u1, 1 );\n\t\t\t\t\t\t\t\t\t\taddVertex( currentPoint, u1, 0.5 );\n\n\t\t\t\t\t\t\t\t\t\taddVertex( currentPoint, u1, 0.5 );\n\t\t\t\t\t\t\t\t\t\taddVertex( tempV2_6, u1, 1 );\n\t\t\t\t\t\t\t\t\t\taddVertex( tempV2_7, u1, 1 );\n\n\t\t\t\t\t\t\t\t\t\taddVertex( currentPoint, u1, 0.5 );\n\t\t\t\t\t\t\t\t\t\taddVertex( tempV2_7, u1, 1 );\n\t\t\t\t\t\t\t\t\t\taddVertex( nextPointR, u1, 1 );\n\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t// Miter join segment triangles\n\n\t\t\t\t\t\t\t\tif ( innerSideModified ) {\n\n\t\t\t\t\t\t\t\t\t// Optimized segment + join triangles\n\n\t\t\t\t\t\t\t\t\tif ( joinIsOnLeftSide ) {\n\n\t\t\t\t\t\t\t\t\t\taddVertex( lastPointR, u0, 1 );\n\t\t\t\t\t\t\t\t\t\taddVertex( lastPointL, u0, 0 );\n\t\t\t\t\t\t\t\t\t\taddVertex( outerPoint, u1, 0 );\n\n\t\t\t\t\t\t\t\t\t\taddVertex( lastPointR, u0, 1 );\n\t\t\t\t\t\t\t\t\t\taddVertex( outerPoint, u1, 0 );\n\t\t\t\t\t\t\t\t\t\taddVertex( innerPoint, u1, 1 );\n\n\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\taddVertex( lastPointR, u0, 1 );\n\t\t\t\t\t\t\t\t\t\taddVertex( lastPointL, u0, 0 );\n\t\t\t\t\t\t\t\t\t\taddVertex( outerPoint, u1, 1 );\n\n\t\t\t\t\t\t\t\t\t\taddVertex( lastPointL, u0, 0 );\n\t\t\t\t\t\t\t\t\t\taddVertex( innerPoint, u1, 0 );\n\t\t\t\t\t\t\t\t\t\taddVertex( outerPoint, u1, 1 );\n\n\t\t\t\t\t\t\t\t\t}\n\n\n\t\t\t\t\t\t\t\t\tif ( joinIsOnLeftSide ) {\n\n\t\t\t\t\t\t\t\t\t\tnextPointL.copy( outerPoint );\n\n\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\tnextPointR.copy( outerPoint );\n\n\t\t\t\t\t\t\t\t\t}\n\n\n\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t// Add extra miter join triangles\n\n\t\t\t\t\t\t\t\t\tif ( joinIsOnLeftSide ) {\n\n\t\t\t\t\t\t\t\t\t\taddVertex( currentPointL, u1, 0 );\n\t\t\t\t\t\t\t\t\t\taddVertex( outerPoint, u1, 0 );\n\t\t\t\t\t\t\t\t\t\taddVertex( currentPoint, u1, 0.5 );\n\n\t\t\t\t\t\t\t\t\t\taddVertex( currentPoint, u1, 0.5 );\n\t\t\t\t\t\t\t\t\t\taddVertex( outerPoint, u1, 0 );\n\t\t\t\t\t\t\t\t\t\taddVertex( nextPointL, u1, 0 );\n\n\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\taddVertex( currentPointR, u1, 1 );\n\t\t\t\t\t\t\t\t\t\taddVertex( outerPoint, u1, 1 );\n\t\t\t\t\t\t\t\t\t\taddVertex( currentPoint, u1, 0.5 );\n\n\t\t\t\t\t\t\t\t\t\taddVertex( currentPoint, u1, 0.5 );\n\t\t\t\t\t\t\t\t\t\taddVertex( outerPoint, u1, 1 );\n\t\t\t\t\t\t\t\t\t\taddVertex( nextPointR, u1, 1 );\n\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tisMiter = true;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// The segment triangles are generated here when two consecutive points are collinear\n\n\t\t\t\t\tmakeSegmentTriangles();\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// The segment triangles are generated here if it is the ending segment\n\n\t\t\t\tmakeSegmentTriangles();\n\n\t\t\t}\n\n\t\t\tif ( ! isClosed && iPoint === numPoints - 1 ) {\n\n\t\t\t\t// Start line endcap\n\t\t\t\taddCapGeometry( points[ 0 ], point0L, point0R, joinIsOnLeftSide, true, u0 );\n\n\t\t\t}\n\n\t\t\t// Increment loop variables\n\n\t\t\tu0 = u1;\n\n\t\t\tpreviousPoint = currentPoint;\n\n\t\t\tlastPointL.copy( nextPointL );\n\t\t\tlastPointR.copy( nextPointR );\n\n\t\t}\n\n\t\tif ( ! isClosed ) {\n\n\t\t\t// Ending line endcap\n\t\t\taddCapGeometry( currentPoint, currentPointL, currentPointR, joinIsOnLeftSide, false, u1 );\n\n\t\t} else if ( innerSideModified && vertices ) {\n\n\t\t\t// Modify path first segment vertices to adjust to the segments inner and outer intersections\n\n\t\t\tvar lastOuter = outerPoint;\n\t\t\tvar lastInner = innerPoint;\n\n\t\t\tif ( initialJoinIsOnLeftSide !== joinIsOnLeftSide ) {\n\n\t\t\t\tlastOuter = innerPoint;\n\t\t\t\tlastInner = outerPoint;\n\n\t\t\t}\n\n\t\t\tif ( joinIsOnLeftSide ) {\n\n\t\t\t\tif ( isMiter || initialJoinIsOnLeftSide ) {\n\n\t\t\t\t\tlastInner.toArray( vertices, 0 * 3 );\n\t\t\t\t\tlastInner.toArray( vertices, 3 * 3 );\n\n\t\t\t\t\tif ( isMiter ) {\n\n\t\t\t\t\t\tlastOuter.toArray( vertices, 1 * 3 );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tif ( isMiter || ! initialJoinIsOnLeftSide ) {\n\n\t\t\t\t\tlastInner.toArray( vertices, 1 * 3 );\n\t\t\t\t\tlastInner.toArray( vertices, 3 * 3 );\n\n\t\t\t\t\tif ( isMiter ) {\n\n\t\t\t\t\t\tlastOuter.toArray( vertices, 0 * 3 );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn numVertices;\n\n\t\t// -- End of algorithm\n\n\t\t// -- Functions\n\n\t\tfunction getNormal( p1, p2, result ) {\n\n\t\t\tresult.subVectors( p2, p1 );\n\t\t\treturn result.set( - result.y, result.x ).normalize();\n\n\t\t}\n\n\t\tfunction addVertex( position, u, v ) {\n\n\t\t\tif ( vertices ) {\n\n\t\t\t\tvertices[ currentCoordinate ] = position.x;\n\t\t\t\tvertices[ currentCoordinate + 1 ] = position.y;\n\t\t\t\tvertices[ currentCoordinate + 2 ] = 0;\n\n\t\t\t\tif ( normals ) {\n\n\t\t\t\t\tnormals[ currentCoordinate ] = 0;\n\t\t\t\t\tnormals[ currentCoordinate + 1 ] = 0;\n\t\t\t\t\tnormals[ currentCoordinate + 2 ] = 1;\n\n\t\t\t\t}\n\n\t\t\t\tcurrentCoordinate += 3;\n\n\t\t\t\tif ( uvs ) {\n\n\t\t\t\t\tuvs[ currentCoordinateUV ] = u;\n\t\t\t\t\tuvs[ currentCoordinateUV + 1 ] = v;\n\n\t\t\t\t\tcurrentCoordinateUV += 2;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tnumVertices += 3;\n\n\t\t}\n\n\t\tfunction makeCircularSector( center, p1, p2, u, v ) {\n\n\t\t\t// param p1, p2: Points in the circle arc.\n\t\t\t// p1 and p2 are in clockwise direction.\n\n\t\t\ttempV2_1.copy( p1 ).sub( center ).normalize();\n\t\t\ttempV2_2.copy( p2 ).sub( center ).normalize();\n\n\t\t\tvar angle = Math.PI;\n\t\t\tvar dot = tempV2_1.dot( tempV2_2 );\n\t\t\tif ( Math.abs( dot ) < 1 ) angle = Math.abs( Math.acos( dot ) );\n\n\t\t\tangle /= arcDivisions;\n\n\t\t\ttempV2_3.copy( p1 );\n\n\t\t\tfor ( var i = 0, il = arcDivisions - 1; i < il; i ++ ) {\n\n\t\t\t\ttempV2_4.copy( tempV2_3 ).rotateAround( center, angle );\n\n\t\t\t\taddVertex( tempV2_3, u, v );\n\t\t\t\taddVertex( tempV2_4, u, v );\n\t\t\t\taddVertex( center, u, 0.5 );\n\n\t\t\t\ttempV2_3.copy( tempV2_4 );\n\n\t\t\t}\n\n\t\t\taddVertex( tempV2_4, u, v );\n\t\t\taddVertex( p2, u, v );\n\t\t\taddVertex( center, u, 0.5 );\n\n\t\t}\n\n\t\tfunction makeSegmentTriangles() {\n\n\t\t\taddVertex( lastPointR, u0, 1 );\n\t\t\taddVertex( lastPointL, u0, 0 );\n\t\t\taddVertex( currentPointL, u1, 0 );\n\n\t\t\taddVertex( lastPointR, u0, 1 );\n\t\t\taddVertex( currentPointL, u1, 1 );\n\t\t\taddVertex( currentPointR, u1, 0 );\n\n\t\t}\n\n\t\tfunction makeSegmentWithBevelJoin( joinIsOnLeftSide, innerSideModified, u ) {\n\n\t\t\tif ( innerSideModified ) {\n\n\t\t\t\t// Optimized segment + bevel triangles\n\n\t\t\t\tif ( joinIsOnLeftSide ) {\n\n\t\t\t\t\t// Path segments triangles\n\n\t\t\t\t\taddVertex( lastPointR, u0, 1 );\n\t\t\t\t\taddVertex( lastPointL, u0, 0 );\n\t\t\t\t\taddVertex( currentPointL, u1, 0 );\n\n\t\t\t\t\taddVertex( lastPointR, u0, 1 );\n\t\t\t\t\taddVertex( currentPointL, u1, 0 );\n\t\t\t\t\taddVertex( innerPoint, u1, 1 );\n\n\t\t\t\t\t// Bevel join triangle\n\n\t\t\t\t\taddVertex( currentPointL, u, 0 );\n\t\t\t\t\taddVertex( nextPointL, u, 0 );\n\t\t\t\t\taddVertex( innerPoint, u, 0.5 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// Path segments triangles\n\n\t\t\t\t\taddVertex( lastPointR, u0, 1 );\n\t\t\t\t\taddVertex( lastPointL, u0, 0 );\n\t\t\t\t\taddVertex( currentPointR, u1, 1 );\n\n\t\t\t\t\taddVertex( lastPointL, u0, 0 );\n\t\t\t\t\taddVertex( innerPoint, u1, 0 );\n\t\t\t\t\taddVertex( currentPointR, u1, 1 );\n\n\t\t\t\t\t// Bevel join triangle\n\n\t\t\t\t\taddVertex( currentPointR, u, 1 );\n\t\t\t\t\taddVertex( nextPointR, u, 0 );\n\t\t\t\t\taddVertex( innerPoint, u, 0.5 );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// Bevel join triangle. The segment triangles are done in the main loop\n\n\t\t\t\tif ( joinIsOnLeftSide ) {\n\n\t\t\t\t\taddVertex( currentPointL, u, 0 );\n\t\t\t\t\taddVertex( nextPointL, u, 0 );\n\t\t\t\t\taddVertex( currentPoint, u, 0.5 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\taddVertex( currentPointR, u, 1 );\n\t\t\t\t\taddVertex( nextPointR, u, 0 );\n\t\t\t\t\taddVertex( currentPoint, u, 0.5 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction createSegmentTrianglesWithMiddleSection( joinIsOnLeftSide, innerSideModified ) {\n\n\t\t\tif ( innerSideModified ) {\n\n\t\t\t\tif ( joinIsOnLeftSide ) {\n\n\t\t\t\t\taddVertex( lastPointR, u0, 1 );\n\t\t\t\t\taddVertex( lastPointL, u0, 0 );\n\t\t\t\t\taddVertex( currentPointL, u1, 0 );\n\n\t\t\t\t\taddVertex( lastPointR, u0, 1 );\n\t\t\t\t\taddVertex( currentPointL, u1, 0 );\n\t\t\t\t\taddVertex( innerPoint, u1, 1 );\n\n\t\t\t\t\taddVertex( currentPointL, u0, 0 );\n\t\t\t\t\taddVertex( currentPoint, u1, 0.5 );\n\t\t\t\t\taddVertex( innerPoint, u1, 1 );\n\n\t\t\t\t\taddVertex( currentPoint, u1, 0.5 );\n\t\t\t\t\taddVertex( nextPointL, u0, 0 );\n\t\t\t\t\taddVertex( innerPoint, u1, 1 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\taddVertex( lastPointR, u0, 1 );\n\t\t\t\t\taddVertex( lastPointL, u0, 0 );\n\t\t\t\t\taddVertex( currentPointR, u1, 1 );\n\n\t\t\t\t\taddVertex( lastPointL, u0, 0 );\n\t\t\t\t\taddVertex( innerPoint, u1, 0 );\n\t\t\t\t\taddVertex( currentPointR, u1, 1 );\n\n\t\t\t\t\taddVertex( currentPointR, u0, 1 );\n\t\t\t\t\taddVertex( innerPoint, u1, 0 );\n\t\t\t\t\taddVertex( currentPoint, u1, 0.5 );\n\n\t\t\t\t\taddVertex( currentPoint, u1, 0.5 );\n\t\t\t\t\taddVertex( innerPoint, u1, 0 );\n\t\t\t\t\taddVertex( nextPointR, u0, 1 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction addCapGeometry( center, p1, p2, joinIsOnLeftSide, start, u ) {\n\n\t\t\t// param center: End point of the path\n\t\t\t// param p1, p2: Left and right cap points\n\n\t\t\tswitch ( style.strokeLineCap ) {\n\n\t\t\t\tcase 'round':\n\n\t\t\t\t\tif ( start ) {\n\n\t\t\t\t\t\tmakeCircularSector( center, p2, p1, u, 0.5 );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tmakeCircularSector( center, p1, p2, u, 0.5 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'square':\n\n\t\t\t\t\tif ( start ) {\n\n\t\t\t\t\t\ttempV2_1.subVectors( p1, center );\n\t\t\t\t\t\ttempV2_2.set( tempV2_1.y, - tempV2_1.x );\n\n\t\t\t\t\t\ttempV2_3.addVectors( tempV2_1, tempV2_2 ).add( center );\n\t\t\t\t\t\ttempV2_4.subVectors( tempV2_2, tempV2_1 ).add( center );\n\n\t\t\t\t\t\t// Modify already existing vertices\n\t\t\t\t\t\tif ( joinIsOnLeftSide ) {\n\n\t\t\t\t\t\t\ttempV2_3.toArray( vertices, 1 * 3 );\n\t\t\t\t\t\t\ttempV2_4.toArray( vertices, 0 * 3 );\n\t\t\t\t\t\t\ttempV2_4.toArray( vertices, 3 * 3 );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\ttempV2_3.toArray( vertices, 1 * 3 );\n\t\t\t\t\t\t\ttempV2_3.toArray( vertices, 3 * 3 );\n\t\t\t\t\t\t\ttempV2_4.toArray( vertices, 0 * 3 );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\ttempV2_1.subVectors( p2, center );\n\t\t\t\t\t\ttempV2_2.set( tempV2_1.y, - tempV2_1.x );\n\n\t\t\t\t\t\ttempV2_3.addVectors( tempV2_1, tempV2_2 ).add( center );\n\t\t\t\t\t\ttempV2_4.subVectors( tempV2_2, tempV2_1 ).add( center );\n\n\t\t\t\t\t\tvar vl = vertices.length;\n\n\t\t\t\t\t\t// Modify already existing vertices\n\t\t\t\t\t\tif ( joinIsOnLeftSide ) {\n\n\t\t\t\t\t\t\ttempV2_3.toArray( vertices, vl - 1 * 3 );\n\t\t\t\t\t\t\ttempV2_4.toArray( vertices, vl - 2 * 3 );\n\t\t\t\t\t\t\ttempV2_4.toArray( vertices, vl - 4 * 3 );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\ttempV2_3.toArray( vertices, vl - 2 * 3 );\n\t\t\t\t\t\t\ttempV2_4.toArray( vertices, vl - 1 * 3 );\n\t\t\t\t\t\t\ttempV2_4.toArray( vertices, vl - 4 * 3 );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'butt':\n\t\t\t\tdefault:\n\n\t\t\t\t\t// Nothing to do here\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction removeDuplicatedPoints( points ) {\n\n\t\t\t// Creates a new array if necessary with duplicated points removed.\n\t\t\t// This does not remove duplicated initial and ending points of a closed path.\n\n\t\t\tvar dupPoints = false;\n\t\t\tfor ( var i = 1, n = points.length - 1; i < n; i ++ ) {\n\n\t\t\t\tif ( points[ i ].distanceTo( points[ i + 1 ] ) < minDistance ) {\n\n\t\t\t\t\tdupPoints = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( ! dupPoints ) return points;\n\n\t\t\tvar newPoints = [];\n\t\t\tnewPoints.push( points[ 0 ] );\n\n\t\t\tfor ( var i = 1, n = points.length - 1; i < n; i ++ ) {\n\n\t\t\t\tif ( points[ i ].distanceTo( points[ i + 1 ] ) >= minDistance ) {\n\n\t\t\t\t\tnewPoints.push( points[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tnewPoints.push( points[ points.length - 1 ] );\n\n\t\t\treturn newPoints;\n\n\t\t}\n\n\t};\n\n}();\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL3RocmVlL2V4YW1wbGVzL2pzbS9sb2FkZXJzL1NWR0xvYWRlci5qcz84NDhmIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQVV3Qzs7QUFFeEM7O0FBRUEsQ0FBQyw2REFBTTs7QUFFUDtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUEsb0RBQW9ELDZEQUFNOztBQUUxRDs7QUFFQTs7QUFFQTs7QUFFQSxtQkFBbUIsaUVBQVU7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUEsSUFBSTs7QUFFSjs7QUFFQTs7QUFFQSxLQUFLOztBQUVMOztBQUVBOztBQUVBOztBQUVBOztBQUVBLEdBQUc7O0FBRUgsRUFBRTs7QUFFRjs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsTUFBTTs7QUFFTjs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBLHFCQUFxQjs7QUFFckI7O0FBRUE7O0FBRUE7O0FBRUEsb0JBQW9CLGtCQUFrQjs7QUFFdEM7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUEsS0FBSzs7QUFFTDs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQSxrQkFBa0IsZ0VBQVM7O0FBRTNCLG1CQUFtQiw4REFBTztBQUMxQixxQkFBcUIsOERBQU87O0FBRTVCLHdCQUF3Qiw4REFBTztBQUMvQjtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBLHdDQUF3QyxPQUFPOztBQUUvQzs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLDJDQUEyQyxRQUFROztBQUVuRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQSxRQUFROztBQUVSOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUEsMkNBQTJDLFFBQVE7O0FBRW5EO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUEsMkNBQTJDLFFBQVE7O0FBRW5EO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUEsMkNBQTJDLFFBQVE7O0FBRW5EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQSwyQ0FBMkMsUUFBUTs7QUFFbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUEsMkNBQTJDLFFBQVE7O0FBRW5EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBLDJDQUEyQyxRQUFROztBQUVuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBLDJDQUEyQyxRQUFROztBQUVuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQSwyQ0FBMkMsUUFBUTs7QUFFbkQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUEsMkNBQTJDLFFBQVE7O0FBRW5EO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBLFFBQVE7O0FBRVI7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQSwyQ0FBMkMsUUFBUTs7QUFFbkQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQSwyQ0FBMkMsUUFBUTs7QUFFbkQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQSwyQ0FBMkMsUUFBUTs7QUFFbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBLDJDQUEyQyxRQUFROztBQUVuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQSwyQ0FBMkMsUUFBUTs7QUFFbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUEsMkNBQTJDLFFBQVE7O0FBRW5EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUEsMkNBQTJDLFFBQVE7O0FBRW5EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBLDJDQUEyQyxRQUFROztBQUVuRDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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QTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7O0FBR0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7O0FBRUEsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7O0FBRUEsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7O0FBRUEsS0FBSzs7QUFFTDs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBLHNDQUFzQyxPQUFPOztBQUU3Qzs7QUFFQTs7QUFFQTtB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QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLFVBQVU7O0FBRVY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQSxRQUFROztBQUVSOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsVUFBVTs7QUFFVjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOzs7QUFHQTs7QUFFQTs7QUFFQSxVQUFVOztBQUVWOztBQUVBOzs7QUFHQSxTQUFTOztBQUVUOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsVUFBVTs7QUFFVjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBLEtBQUs7O0FBRUw7O0FBRUE7O0FBRUE7O0FBRUEsSUFBSTs7QUFFSjs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQSxHQUFHOztBQUVIOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBLElBQUk7O0FBRUo7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBLDBDQUEwQyxRQUFROztBQUVsRDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSzs7QUFFTDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSxJQUFJOztBQUVKOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQSxNQUFNOztBQUVOOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPOztBQUVQO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSxNQUFNOztBQUVOO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPOztBQUVQO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLDBDQUEwQyxPQUFPOztBQUVqRDs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUEsMENBQTBDLE9BQU87O0FBRWpEOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBLENBQUM7O0FBRW9CIiwiZmlsZSI6Ii4vbm9kZV9tb2R1bGVzL3RocmVlL2V4YW1wbGVzL2pzbS9sb2FkZXJzL1NWR0xvYWRlci5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG5cdEJ1ZmZlckdlb21ldHJ5LFxuXHRGaWxlTG9hZGVyLFxuXHRGbG9hdDMyQnVmZmVyQXR0cmlidXRlLFxuXHRMb2FkZXIsXG5cdE1hdHJpeDMsXG5cdFBhdGgsXG5cdFNoYXBlUGF0aCxcblx0VmVjdG9yMixcblx0VmVjdG9yM1xufSBmcm9tICcuLi8uLi8uLi9idWlsZC90aHJlZS5tb2R1bGUuanMnO1xuXG52YXIgU1ZHTG9hZGVyID0gZnVuY3Rpb24gKCBtYW5hZ2VyICkge1xuXG5cdExvYWRlci5jYWxsKCB0aGlzLCBtYW5hZ2VyICk7XG5cblx0Ly8gRGVmYXVsdCBkb3RzIHBlciBpbmNoXG5cdHRoaXMuZGVmYXVsdERQSSA9IDkwO1xuXG5cdC8vIEFjY2VwdGVkIHVuaXRzOiAnbW0nLCAnY20nLCAnaW4nLCAncHQnLCAncGMnLCAncHgnXG5cdHRoaXMuZGVmYXVsdFVuaXQgPSAncHgnO1xuXG59O1xuXG5TVkdMb2FkZXIucHJvdG90eXBlID0gT2JqZWN0LmFzc2lnbiggT2JqZWN0LmNyZWF0ZSggTG9hZGVyLnByb3RvdHlwZSApLCB7XG5cblx0Y29uc3RydWN0b3I6IFNWR0xvYWRlcixcblxuXHRsb2FkOiBmdW5jdGlvbiAoIHVybCwgb25Mb2FkLCBvblByb2dyZXNzLCBvbkVycm9yICkge1xuXG5cdFx0dmFyIHNjb3BlID0gdGhpcztcblxuXHRcdHZhciBsb2FkZXIgPSBuZXcgRmlsZUxvYWRlciggc2NvcGUubWFuYWdlciApO1xuXHRcdGxvYWRlci5zZXRQYXRoKCBzY29wZS5wYXRoICk7XG5cdFx0bG9hZGVyLnNldFJlcXVlc3RIZWFkZXIoIHNjb3BlLnJlcXVlc3RIZWFkZXIgKTtcblx0XHRsb2FkZXIuc2V0V2l0aENyZWRlbnRpYWxzKCBzY29wZS53aXRoQ3JlZGVudGlhbHMgKTtcblx0XHRsb2FkZXIubG9hZCggdXJsLCBmdW5jdGlvbiAoIHRleHQgKSB7XG5cblx0XHRcdHRyeSB7XG5cblx0XHRcdFx0b25Mb2FkKCBzY29wZS5wYXJzZSggdGV4dCApICk7XG5cblx0XHRcdH0gY2F0Y2ggKCBlICkge1xuXG5cdFx0XHRcdGlmICggb25FcnJvciApIHtcblxuXHRcdFx0XHRcdG9uRXJyb3IoIGUgKTtcblxuXHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0Y29uc29sZS5lcnJvciggZSApO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRzY29wZS5tYW5hZ2VyLml0ZW1FcnJvciggdXJsICk7XG5cblx0XHRcdH1cblxuXHRcdH0sIG9uUHJvZ3Jlc3MsIG9uRXJyb3IgKTtcblxuXHR9LFxuXG5cdHBhcnNlOiBmdW5jdGlvbiAoIHRleHQgKSB7XG5cblx0XHR2YXIgc2NvcGUgPSB0aGlzO1xuXG5cdFx0ZnVuY3Rpb24gcGFyc2VOb2RlKCBub2RlLCBzdHlsZSApIHtcblxuXHRcdFx0aWYgKCBub2RlLm5vZGVUeXBlICE9PSAxICkgcmV0dXJuO1xuXG5cdFx0XHR2YXIgdHJhbnNmb3JtID0gZ2V0Tm9kZVRyYW5zZm9ybSggbm9kZSApO1xuXG5cdFx0XHR2YXIgdHJhdmVyc2VDaGlsZE5vZGVzID0gdHJ1ZTtcblxuXHRcdFx0dmFyIHBhdGggPSBudWxsO1xuXG5cdFx0XHRzd2l0Y2ggKCBub2RlLm5vZGVOYW1lICkge1xuXG5cdFx0XHRcdGNhc2UgJ3N2Zyc6XG5cdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0Y2FzZSAnc3R5bGUnOlxuXHRcdFx0XHRcdHBhcnNlQ1NTU3R5bGVzaGVldCggbm9kZSApO1xuXHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdGNhc2UgJ2cnOlxuXHRcdFx0XHRcdHN0eWxlID0gcGFyc2VTdHlsZSggbm9kZSwgc3R5bGUgKTtcblx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRjYXNlICdwYXRoJzpcblx0XHRcdFx0XHRzdHlsZSA9IHBhcnNlU3R5bGUoIG5vZGUsIHN0eWxlICk7XG5cdFx0XHRcdFx0aWYgKCBub2RlLmhhc0F0dHJpYnV0ZSggJ2QnICkgKSBwYXRoID0gcGFyc2VQYXRoTm9kZSggbm9kZSApO1xuXHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdGNhc2UgJ3JlY3QnOlxuXHRcdFx0XHRcdHN0eWxlID0gcGFyc2VTdHlsZSggbm9kZSwgc3R5bGUgKTtcblx0XHRcdFx0XHRwYXRoID0gcGFyc2VSZWN0Tm9kZSggbm9kZSApO1xuXHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdGNhc2UgJ3BvbHlnb24nOlxuXHRcdFx0XHRcdHN0eWxlID0gcGFyc2VTdHlsZSggbm9kZSwgc3R5bGUgKTtcblx0XHRcdFx0XHRwYXRoID0gcGFyc2VQb2x5Z29uTm9kZSggbm9kZSApO1xuXHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdGNhc2UgJ3BvbHlsaW5lJzpcblx0XHRcdFx0XHRzdHlsZSA9IHBhcnNlU3R5bGUoIG5vZGUsIHN0eWxlICk7XG5cdFx0XHRcdFx0cGF0aCA9IHBhcnNlUG9seWxpbmVOb2RlKCBub2RlICk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0Y2FzZSAnY2lyY2xlJzpcblx0XHRcdFx0XHRzdHlsZSA9IHBhcnNlU3R5bGUoIG5vZGUsIHN0eWxlICk7XG5cdFx0XHRcdFx0cGF0aCA9IHBhcnNlQ2lyY2xlTm9kZSggbm9kZSApO1xuXHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdGNhc2UgJ2VsbGlwc2UnOlxuXHRcdFx0XHRcdHN0eWxlID0gcGFyc2VTdHlsZSggbm9kZSwgc3R5bGUgKTtcblx0XHRcdFx0XHRwYXRoID0gcGFyc2VFbGxpcHNlTm9kZSggbm9kZSApO1xuXHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdGNhc2UgJ2xpbmUnOlxuXHRcdFx0XHRcdHN0eWxlID0gcGFyc2VTdHlsZSggbm9kZSwgc3R5bGUgKTtcblx0XHRcdFx0XHRwYXRoID0gcGFyc2VMaW5lTm9kZSggbm9kZSApO1xuXHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdGNhc2UgJ2RlZnMnOlxuXHRcdFx0XHRcdHRyYXZlcnNlQ2hpbGROb2RlcyA9IGZhbHNlO1xuXHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdGNhc2UgJ3VzZSc6XG5cdFx0XHRcdFx0c3R5bGUgPSBwYXJzZVN0eWxlKCBub2RlLCBzdHlsZSApO1xuXHRcdFx0XHRcdHZhciB1c2VkTm9kZUlkID0gbm9kZS5ocmVmLmJhc2VWYWwuc3Vic3RyaW5nKCAxICk7XG5cdFx0XHRcdFx0dmFyIHVzZWROb2RlID0gbm9kZS52aWV3cG9ydEVsZW1lbnQuZ2V0RWxlbWVudEJ5SWQoIHVzZWROb2RlSWQgKTtcblx0XHRcdFx0XHRpZiAoIHVzZWROb2RlICkge1xuXG5cdFx0XHRcdFx0XHRwYXJzZU5vZGUoIHVzZWROb2RlLCBzdHlsZSApO1xuXG5cdFx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdFx0Y29uc29sZS53YXJuKCAnU1ZHTG9hZGVyOiBcXCd1c2Ugbm9kZVxcJyByZWZlcmVuY2VzIG5vbi1leGlzdGVudCBub2RlIGlkOiAnICsgdXNlZE5vZGVJZCApO1xuXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHQvLyBjb25zb2xlLmxvZyggbm9kZSApO1xuXG5cdFx0XHR9XG5cblx0XHRcdGlmICggcGF0aCApIHtcblxuXHRcdFx0XHRpZiAoIHN0eWxlLmZpbGwgIT09IHVuZGVmaW5lZCAmJiBzdHlsZS5maWxsICE9PSAnbm9uZScgKSB7XG5cblx0XHRcdFx0XHRwYXRoLmNvbG9yLnNldFN0eWxlKCBzdHlsZS5maWxsICk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdHRyYW5zZm9ybVBhdGgoIHBhdGgsIGN1cnJlbnRUcmFuc2Zvcm0gKTtcblxuXHRcdFx0XHRwYXRocy5wdXNoKCBwYXRoICk7XG5cblx0XHRcdFx0cGF0aC51c2VyRGF0YSA9IHsgbm9kZTogbm9kZSwgc3R5bGU6IHN0eWxlIH07XG5cblx0XHRcdH1cblxuXHRcdFx0aWYgKCB0cmF2ZXJzZUNoaWxkTm9kZXMgKSB7XG5cblx0XHRcdFx0dmFyIG5vZGVzID0gbm9kZS5jaGlsZE5vZGVzO1xuXG5cdFx0XHRcdGZvciAoIHZhciBpID0gMDsgaSA8IG5vZGVzLmxlbmd0aDsgaSArKyApIHtcblxuXHRcdFx0XHRcdHBhcnNlTm9kZSggbm9kZXNbIGkgXSwgc3R5bGUgKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdH1cblxuXHRcdFx0aWYgKCB0cmFuc2Zvcm0gKSB7XG5cblx0XHRcdFx0dHJhbnNmb3JtU3RhY2sucG9wKCk7XG5cblx0XHRcdFx0aWYgKCB0cmFuc2Zvcm1TdGFjay5sZW5ndGggPiAwICkge1xuXG5cdFx0XHRcdFx0Y3VycmVudFRyYW5zZm9ybS5jb3B5KCB0cmFuc2Zvcm1TdGFja1sgdHJhbnNmb3JtU3RhY2subGVuZ3RoIC0gMSBdICk7XG5cblx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdGN1cnJlbnRUcmFuc2Zvcm0uaWRlbnRpdHkoKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdH1cblxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIHBhcnNlUGF0aE5vZGUoIG5vZGUgKSB7XG5cblx0XHRcdHZhciBwYXRoID0gbmV3IFNoYXBlUGF0aCgpO1xuXG5cdFx0XHR2YXIgcG9pbnQgPSBuZXcgVmVjdG9yMigpO1xuXHRcdFx0dmFyIGNvbnRyb2wgPSBuZXcgVmVjdG9yMigpO1xuXG5cdFx0XHR2YXIgZmlyc3RQb2ludCA9IG5ldyBWZWN0b3IyKCk7XG5cdFx0XHR2YXIgaXNGaXJzdFBvaW50ID0gdHJ1ZTtcblx0XHRcdHZhciBkb1NldEZpcnN0UG9pbnQgPSBmYWxzZTtcblxuXHRcdFx0dmFyIGQgPSBub2RlLmdldEF0dHJpYnV0ZSggJ2QnICk7XG5cblx0XHRcdC8vIGNvbnNvbGUubG9nKCBkICk7XG5cblx0XHRcdHZhciBjb21tYW5kcyA9IGQubWF0Y2goIC9bYS1kZi16XVteYS1kZi16XSovaWcgKTtcblxuXHRcdFx0Zm9yICggdmFyIGkgPSAwLCBsID0gY29tbWFuZHMubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcblxuXHRcdFx0XHR2YXIgY29tbWFuZCA9IGNvbW1hbmRzWyBpIF07XG5cblx0XHRcdFx0dmFyIHR5cGUgPSBjb21tYW5kLmNoYXJBdCggMCApO1xuXHRcdFx0XHR2YXIgZGF0YSA9IGNvbW1hbmQuc3Vic3RyKCAxICkudHJpbSgpO1xuXG5cdFx0XHRcdGlmICggaXNGaXJzdFBvaW50ID09PSB0cnVlICkge1xuXG5cdFx0XHRcdFx0ZG9TZXRGaXJzdFBvaW50ID0gdHJ1ZTtcblx0XHRcdFx0XHRpc0ZpcnN0UG9pbnQgPSBmYWxzZTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdFx0c3dpdGNoICggdHlwZSApIHtcblxuXHRcdFx0XHRcdGNhc2UgJ00nOlxuXHRcdFx0XHRcdFx0dmFyIG51bWJlcnMgPSBwYXJzZUZsb2F0cyggZGF0YSApO1xuXHRcdFx0XHRcdFx0Zm9yICggdmFyIGogPSAwLCBqbCA9IG51bWJlcnMubGVuZ3RoOyBqIDwgamw7IGogKz0gMiApIHtcblxuXHRcdFx0XHRcdFx0XHRwb2ludC54ID0gbnVtYmVyc1sgaiArIDAgXTtcblx0XHRcdFx0XHRcdFx0cG9pbnQueSA9IG51bWJlcnNbIGogKyAxIF07XG5cdFx0XHRcdFx0XHRcdGNvbnRyb2wueCA9IHBvaW50Lng7XG5cdFx0XHRcdFx0XHRcdGNvbnRyb2wueSA9IHBvaW50Lnk7XG5cblx0XHRcdFx0XHRcdFx0aWYgKCBqID09PSAwICkge1xuXG5cdFx0XHRcdFx0XHRcdFx0cGF0aC5tb3ZlVG8oIHBvaW50LngsIHBvaW50LnkgKTtcblxuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0XHRcdFx0cGF0aC5saW5lVG8oIHBvaW50LngsIHBvaW50LnkgKTtcblxuXHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0aWYgKCBqID09PSAwICYmIGRvU2V0Rmlyc3RQb2ludCA9PT0gdHJ1ZSApIGZpcnN0UG9pbnQuY29weSggcG9pbnQgKTtcblxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdGNhc2UgJ0gnOlxuXHRcdFx0XHRcdFx0dmFyIG51bWJlcnMgPSBwYXJzZUZsb2F0cyggZGF0YSApO1xuXG5cdFx0XHRcdFx0XHRmb3IgKCB2YXIgaiA9IDAsIGpsID0gbnVtYmVycy5sZW5ndGg7IGogPCBqbDsgaiArKyApIHtcblxuXHRcdFx0XHRcdFx0XHRwb2ludC54ID0gbnVtYmVyc1sgaiBdO1xuXHRcdFx0XHRcdFx0XHRjb250cm9sLnggPSBwb2ludC54O1xuXHRcdFx0XHRcdFx0XHRjb250cm9sLnkgPSBwb2ludC55O1xuXHRcdFx0XHRcdFx0XHRwYXRoLmxpbmVUbyggcG9pbnQueCwgcG9pbnQueSApO1xuXG5cdFx0XHRcdFx0XHRcdGlmICggaiA9PT0gMCAmJiBkb1NldEZpcnN0UG9pbnQgPT09IHRydWUgKSBmaXJzdFBvaW50LmNvcHkoIHBvaW50ICk7XG5cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRjYXNlICdWJzpcblx0XHRcdFx0XHRcdHZhciBudW1iZXJzID0gcGFyc2VGbG9hdHMoIGRhdGEgKTtcblxuXHRcdFx0XHRcdFx0Zm9yICggdmFyIGogPSAwLCBqbCA9IG51bWJlcnMubGVuZ3RoOyBqIDwgamw7IGogKysgKSB7XG5cblx0XHRcdFx0XHRcdFx0cG9pbnQueSA9IG51bWJlcnNbIGogXTtcblx0XHRcdFx0XHRcdFx0Y29udHJvbC54ID0gcG9pbnQueDtcblx0XHRcdFx0XHRcdFx0Y29udHJvbC55ID0gcG9pbnQueTtcblx0XHRcdFx0XHRcdFx0cGF0aC5saW5lVG8oIHBvaW50LngsIHBvaW50LnkgKTtcblxuXHRcdFx0XHRcdFx0XHRpZiAoIGogPT09IDAgJiYgZG9TZXRGaXJzdFBvaW50ID09PSB0cnVlICkgZmlyc3RQb2ludC5jb3B5KCBwb2ludCApO1xuXG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0Y2FzZSAnTCc6XG5cdFx0XHRcdFx0XHR2YXIgbnVtYmVycyA9IHBhcnNlRmxvYXRzKCBkYXRhICk7XG5cblx0XHRcdFx0XHRcdGZvciAoIHZhciBqID0gMCwgamwgPSBudW1iZXJzLmxlbmd0aDsgaiA8IGpsOyBqICs9IDIgKSB7XG5cblx0XHRcdFx0XHRcdFx0cG9pbnQueCA9IG51bWJlcnNbIGogKyAwIF07XG5cdFx0XHRcdFx0XHRcdHBvaW50LnkgPSBudW1iZXJzWyBqICsgMSBdO1xuXHRcdFx0XHRcdFx0XHRjb250cm9sLnggPSBwb2ludC54O1xuXHRcdFx0XHRcdFx0XHRjb250cm9sLnkgPSBwb2ludC55O1xuXHRcdFx0XHRcdFx0XHRwYXRoLmxpbmVUbyggcG9pbnQueCwgcG9pbnQueSApO1xuXG5cdFx0XHRcdFx0XHRcdGlmICggaiA9PT0gMCAmJiBkb1NldEZpcnN0UG9pbnQgPT09IHRydWUgKSBmaXJzdFBvaW50LmNvcHkoIHBvaW50ICk7XG5cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRjYXNlICdDJzpcblx0XHRcdFx0XHRcdHZhciBudW1iZXJzID0gcGFyc2VGbG9hdHMoIGRhdGEgKTtcblxuXHRcdFx0XHRcdFx0Zm9yICggdmFyIGogPSAwLCBqbCA9IG51bWJlcnMubGVuZ3RoOyBqIDwgamw7IGogKz0gNiApIHtcblxuXHRcdFx0XHRcdFx0XHRwYXRoLmJlemllckN1cnZlVG8oXG5cdFx0XHRcdFx0XHRcdFx0bnVtYmVyc1sgaiArIDAgXSxcblx0XHRcdFx0XHRcdFx0XHRudW1iZXJzWyBqICsgMSBdLFxuXHRcdFx0XHRcdFx0XHRcdG51bWJlcnNbIGogKyAyIF0sXG5cdFx0XHRcdFx0XHRcdFx0bnVtYmVyc1sgaiArIDMgXSxcblx0XHRcdFx0XHRcdFx0XHRudW1iZXJzWyBqICsgNCBdLFxuXHRcdFx0XHRcdFx0XHRcdG51bWJlcnNbIGogKyA1IF1cblx0XHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdFx0Y29udHJvbC54ID0gbnVtYmVyc1sgaiArIDIgXTtcblx0XHRcdFx0XHRcdFx0Y29udHJvbC55ID0gbnVtYmVyc1sgaiArIDMgXTtcblx0XHRcdFx0XHRcdFx0cG9pbnQueCA9IG51bWJlcnNbIGogKyA0IF07XG5cdFx0XHRcdFx0XHRcdHBvaW50LnkgPSBudW1iZXJzWyBqICsgNSBdO1xuXG5cdFx0XHRcdFx0XHRcdGlmICggaiA9PT0gMCAmJiBkb1NldEZpcnN0UG9pbnQgPT09IHRydWUgKSBmaXJzdFBvaW50LmNvcHkoIHBvaW50ICk7XG5cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRjYXNlICdTJzpcblx0XHRcdFx0XHRcdHZhciBudW1iZXJzID0gcGFyc2VGbG9hdHMoIGRhdGEgKTtcblxuXHRcdFx0XHRcdFx0Zm9yICggdmFyIGogPSAwLCBqbCA9IG51bWJlcnMubGVuZ3RoOyBqIDwgamw7IGogKz0gNCApIHtcblxuXHRcdFx0XHRcdFx0XHRwYXRoLmJlemllckN1cnZlVG8oXG5cdFx0XHRcdFx0XHRcdFx0Z2V0UmVmbGVjdGlvbiggcG9pbnQueCwgY29udHJvbC54ICksXG5cdFx0XHRcdFx0XHRcdFx0Z2V0UmVmbGVjdGlvbiggcG9pbnQueSwgY29udHJvbC55ICksXG5cdFx0XHRcdFx0XHRcdFx0bnVtYmVyc1sgaiArIDAgXSxcblx0XHRcdFx0XHRcdFx0XHRudW1iZXJzWyBqICsgMSBdLFxuXHRcdFx0XHRcdFx0XHRcdG51bWJlcnNbIGogKyAyIF0sXG5cdFx0XHRcdFx0XHRcdFx0bnVtYmVyc1sgaiArIDMgXVxuXHRcdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0XHRjb250cm9sLnggPSBudW1iZXJzWyBqICsgMCBdO1xuXHRcdFx0XHRcdFx0XHRjb250cm9sLnkgPSBudW1iZXJzWyBqICsgMSBdO1xuXHRcdFx0XHRcdFx0XHRwb2ludC54ID0gbnVtYmVyc1sgaiArIDIgXTtcblx0XHRcdFx0XHRcdFx0cG9pbnQueSA9IG51bWJlcnNbIGogKyAzIF07XG5cblx0XHRcdFx0XHRcdFx0aWYgKCBqID09PSAwICYmIGRvU2V0Rmlyc3RQb2ludCA9PT0gdHJ1ZSApIGZpcnN0UG9pbnQuY29weSggcG9pbnQgKTtcblxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdGNhc2UgJ1EnOlxuXHRcdFx0XHRcdFx0dmFyIG51bWJlcnMgPSBwYXJzZUZsb2F0cyggZGF0YSApO1xuXG5cdFx0XHRcdFx0XHRmb3IgKCB2YXIgaiA9IDAsIGpsID0gbnVtYmVycy5sZW5ndGg7IGogPCBqbDsgaiArPSA0ICkge1xuXG5cdFx0XHRcdFx0XHRcdHBhdGgucXVhZHJhdGljQ3VydmVUbyhcblx0XHRcdFx0XHRcdFx0XHRudW1iZXJzWyBqICsgMCBdLFxuXHRcdFx0XHRcdFx0XHRcdG51bWJlcnNbIGogKyAxIF0sXG5cdFx0XHRcdFx0XHRcdFx0bnVtYmVyc1sgaiArIDIgXSxcblx0XHRcdFx0XHRcdFx0XHRudW1iZXJzWyBqICsgMyBdXG5cdFx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHRcdGNvbnRyb2wueCA9IG51bWJlcnNbIGogKyAwIF07XG5cdFx0XHRcdFx0XHRcdGNvbnRyb2wueSA9IG51bWJlcnNbIGogKyAxIF07XG5cdFx0XHRcdFx0XHRcdHBvaW50LnggPSBudW1iZXJzWyBqICsgMiBdO1xuXHRcdFx0XHRcdFx0XHRwb2ludC55ID0gbnVtYmVyc1sgaiArIDMgXTtcblxuXHRcdFx0XHRcdFx0XHRpZiAoIGogPT09IDAgJiYgZG9TZXRGaXJzdFBvaW50ID09PSB0cnVlICkgZmlyc3RQb2ludC5jb3B5KCBwb2ludCApO1xuXG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0Y2FzZSAnVCc6XG5cdFx0XHRcdFx0XHR2YXIgbnVtYmVycyA9IHBhcnNlRmxvYXRzKCBkYXRhICk7XG5cblx0XHRcdFx0XHRcdGZvciAoIHZhciBqID0gMCwgamwgPSBudW1iZXJzLmxlbmd0aDsgaiA8IGpsOyBqICs9IDIgKSB7XG5cblx0XHRcdFx0XHRcdFx0dmFyIHJ4ID0gZ2V0UmVmbGVjdGlvbiggcG9pbnQueCwgY29udHJvbC54ICk7XG5cdFx0XHRcdFx0XHRcdHZhciByeSA9IGdldFJlZmxlY3Rpb24oIHBvaW50LnksIGNvbnRyb2wueSApO1xuXHRcdFx0XHRcdFx0XHRwYXRoLnF1YWRyYXRpY0N1cnZlVG8oXG5cdFx0XHRcdFx0XHRcdFx0cngsXG5cdFx0XHRcdFx0XHRcdFx0cnksXG5cdFx0XHRcdFx0XHRcdFx0bnVtYmVyc1sgaiArIDAgXSxcblx0XHRcdFx0XHRcdFx0XHRudW1iZXJzWyBqICsgMSBdXG5cdFx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHRcdGNvbnRyb2wueCA9IHJ4O1xuXHRcdFx0XHRcdFx0XHRjb250cm9sLnkgPSByeTtcblx0XHRcdFx0XHRcdFx0cG9pbnQueCA9IG51bWJlcnNbIGogKyAwIF07XG5cdFx0XHRcdFx0XHRcdHBvaW50LnkgPSBudW1iZXJzWyBqICsgMSBdO1xuXG5cdFx0XHRcdFx0XHRcdGlmICggaiA9PT0gMCAmJiBkb1NldEZpcnN0UG9pbnQgPT09IHRydWUgKSBmaXJzdFBvaW50LmNvcHkoIHBvaW50ICk7XG5cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRjYXNlICdBJzpcblx0XHRcdFx0XHRcdHZhciBudW1iZXJzID0gcGFyc2VGbG9hdHMoIGRhdGEgKTtcblxuXHRcdFx0XHRcdFx0Zm9yICggdmFyIGogPSAwLCBqbCA9IG51bWJlcnMubGVuZ3RoOyBqIDwgamw7IGogKz0gNyApIHtcblxuXHRcdFx0XHRcdFx0XHQvLyBza2lwIGNvbW1hbmQgaWYgc3RhcnQgcG9pbnQgPT0gZW5kIHBvaW50XG5cdFx0XHRcdFx0XHRcdGlmICggbnVtYmVyc1sgaiArIDUgXSA9PSBwb2ludC54ICYmIG51bWJlcnNbIGogKyA2IF0gPT0gcG9pbnQueSApIGNvbnRpbnVlO1xuXG5cdFx0XHRcdFx0XHRcdHZhciBzdGFydCA9IHBvaW50LmNsb25lKCk7XG5cdFx0XHRcdFx0XHRcdHBvaW50LnggPSBudW1iZXJzWyBqICsgNSBdO1xuXHRcdFx0XHRcdFx0XHRwb2ludC55ID0gbnVtYmVyc1sgaiArIDYgXTtcblx0XHRcdFx0XHRcdFx0Y29udHJvbC54ID0gcG9pbnQueDtcblx0XHRcdFx0XHRcdFx0Y29udHJvbC55ID0gcG9pbnQueTtcblx0XHRcdFx0XHRcdFx0cGFyc2VBcmNDb21tYW5kKFxuXHRcdFx0XHRcdFx0XHRcdHBhdGgsIG51bWJlcnNbIGogXSwgbnVtYmVyc1sgaiArIDEgXSwgbnVtYmVyc1sgaiArIDIgXSwgbnVtYmVyc1sgaiArIDMgXSwgbnVtYmVyc1sgaiArIDQgXSwgc3RhcnQsIHBvaW50XG5cdFx0XHRcdFx0XHRcdCk7XG5cblx0XHRcdFx0XHRcdFx0aWYgKCBqID09PSAwICYmIGRvU2V0Rmlyc3RQb2ludCA9PT0gdHJ1ZSApIGZpcnN0UG9pbnQuY29weSggcG9pbnQgKTtcblxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdGNhc2UgJ20nOlxuXHRcdFx0XHRcdFx0dmFyIG51bWJlcnMgPSBwYXJzZUZsb2F0cyggZGF0YSApO1xuXG5cdFx0XHRcdFx0XHRmb3IgKCB2YXIgaiA9IDAsIGpsID0gbnVtYmVycy5sZW5ndGg7IGogPCBqbDsgaiArPSAyICkge1xuXG5cdFx0XHRcdFx0XHRcdHBvaW50LnggKz0gbnVtYmVyc1sgaiArIDAgXTtcblx0XHRcdFx0XHRcdFx0cG9pbnQueSArPSBudW1iZXJzWyBqICsgMSBdO1xuXHRcdFx0XHRcdFx0XHRjb250cm9sLnggPSBwb2ludC54O1xuXHRcdFx0XHRcdFx0XHRjb250cm9sLnkgPSBwb2ludC55O1xuXG5cdFx0XHRcdFx0XHRcdGlmICggaiA9PT0gMCApIHtcblxuXHRcdFx0XHRcdFx0XHRcdHBhdGgubW92ZVRvKCBwb2ludC54LCBwb2ludC55ICk7XG5cblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdFx0XHRcdHBhdGgubGluZVRvKCBwb2ludC54LCBwb2ludC55ICk7XG5cblx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdGlmICggaiA9PT0gMCAmJiBkb1NldEZpcnN0UG9pbnQgPT09IHRydWUgKSBmaXJzdFBvaW50LmNvcHkoIHBvaW50ICk7XG5cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRjYXNlICdoJzpcblx0XHRcdFx0XHRcdHZhciBudW1iZXJzID0gcGFyc2VGbG9hdHMoIGRhdGEgKTtcblxuXHRcdFx0XHRcdFx0Zm9yICggdmFyIGogPSAwLCBqbCA9IG51bWJlcnMubGVuZ3RoOyBqIDwgamw7IGogKysgKSB7XG5cblx0XHRcdFx0XHRcdFx0cG9pbnQueCArPSBudW1iZXJzWyBqIF07XG5cdFx0XHRcdFx0XHRcdGNvbnRyb2wueCA9IHBvaW50Lng7XG5cdFx0XHRcdFx0XHRcdGNvbnRyb2wueSA9IHBvaW50Lnk7XG5cdFx0XHRcdFx0XHRcdHBhdGgubGluZVRvKCBwb2ludC54LCBwb2ludC55ICk7XG5cblx0XHRcdFx0XHRcdFx0aWYgKCBqID09PSAwICYmIGRvU2V0Rmlyc3RQb2ludCA9PT0gdHJ1ZSApIGZpcnN0UG9pbnQuY29weSggcG9pbnQgKTtcblxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdGNhc2UgJ3YnOlxuXHRcdFx0XHRcdFx0dmFyIG51bWJlcnMgPSBwYXJzZUZsb2F0cyggZGF0YSApO1xuXG5cdFx0XHRcdFx0XHRmb3IgKCB2YXIgaiA9IDAsIGpsID0gbnVtYmVycy5sZW5ndGg7IGogPCBqbDsgaiArKyApIHtcblxuXHRcdFx0XHRcdFx0XHRwb2ludC55ICs9IG51bWJlcnNbIGogXTtcblx0XHRcdFx0XHRcdFx0Y29udHJvbC54ID0gcG9pbnQueDtcblx0XHRcdFx0XHRcdFx0Y29udHJvbC55ID0gcG9pbnQueTtcblx0XHRcdFx0XHRcdFx0cGF0aC5saW5lVG8oIHBvaW50LngsIHBvaW50LnkgKTtcblxuXHRcdFx0XHRcdFx0XHRpZiAoIGogPT09IDAgJiYgZG9TZXRGaXJzdFBvaW50ID09PSB0cnVlICkgZmlyc3RQb2ludC5jb3B5KCBwb2ludCApO1xuXG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0Y2FzZSAnbCc6XG5cdFx0XHRcdFx0XHR2YXIgbnVtYmVycyA9IHBhcnNlRmxvYXRzKCBkYXRhICk7XG5cblx0XHRcdFx0XHRcdGZvciAoIHZhciBqID0gMCwgamwgPSBudW1iZXJzLmxlbmd0aDsgaiA8IGpsOyBqICs9IDIgKSB7XG5cblx0XHRcdFx0XHRcdFx0cG9pbnQueCArPSBudW1iZXJzWyBqICsgMCBdO1xuXHRcdFx0XHRcdFx0XHRwb2ludC55ICs9IG51bWJlcnNbIGogKyAxIF07XG5cdFx0XHRcdFx0XHRcdGNvbnRyb2wueCA9IHBvaW50Lng7XG5cdFx0XHRcdFx0XHRcdGNvbnRyb2wueSA9IHBvaW50Lnk7XG5cdFx0XHRcdFx0XHRcdHBhdGgubGluZVRvKCBwb2ludC54LCBwb2ludC55ICk7XG5cblx0XHRcdFx0XHRcdFx0aWYgKCBqID09PSAwICYmIGRvU2V0Rmlyc3RQb2ludCA9PT0gdHJ1ZSApIGZpcnN0UG9pbnQuY29weSggcG9pbnQgKTtcblxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdGNhc2UgJ2MnOlxuXHRcdFx0XHRcdFx0dmFyIG51bWJlcnMgPSBwYXJzZUZsb2F0cyggZGF0YSApO1xuXG5cdFx0XHRcdFx0XHRmb3IgKCB2YXIgaiA9IDAsIGpsID0gbnVtYmVycy5sZW5ndGg7IGogPCBqbDsgaiArPSA2ICkge1xuXG5cdFx0XHRcdFx0XHRcdHBhdGguYmV6aWVyQ3VydmVUbyhcblx0XHRcdFx0XHRcdFx0XHRwb2ludC54ICsgbnVtYmVyc1sgaiArIDAgXSxcblx0XHRcdFx0XHRcdFx0XHRwb2ludC55ICsgbnVtYmVyc1sgaiArIDEgXSxcblx0XHRcdFx0XHRcdFx0XHRwb2ludC54ICsgbnVtYmVyc1sgaiArIDIgXSxcblx0XHRcdFx0XHRcdFx0XHRwb2ludC55ICsgbnVtYmVyc1sgaiArIDMgXSxcblx0XHRcdFx0XHRcdFx0XHRwb2ludC54ICsgbnVtYmVyc1sgaiArIDQgXSxcblx0XHRcdFx0XHRcdFx0XHRwb2ludC55ICsgbnVtYmVyc1sgaiArIDUgXVxuXHRcdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0XHRjb250cm9sLnggPSBwb2ludC54ICsgbnVtYmVyc1sgaiArIDIgXTtcblx0XHRcdFx0XHRcdFx0Y29udHJvbC55ID0gcG9pbnQueSArIG51bWJlcnNbIGogKyAzIF07XG5cdFx0XHRcdFx0XHRcdHBvaW50LnggKz0gbnVtYmVyc1sgaiArIDQgXTtcblx0XHRcdFx0XHRcdFx0cG9pbnQueSArPSBudW1iZXJzWyBqICsgNSBdO1xuXG5cdFx0XHRcdFx0XHRcdGlmICggaiA9PT0gMCAmJiBkb1NldEZpcnN0UG9pbnQgPT09IHRydWUgKSBmaXJzdFBvaW50LmNvcHkoIHBvaW50ICk7XG5cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRjYXNlICdzJzpcblx0XHRcdFx0XHRcdHZhciBudW1iZXJzID0gcGFyc2VGbG9hdHMoIGRhdGEgKTtcblxuXHRcdFx0XHRcdFx0Zm9yICggdmFyIGogPSAwLCBqbCA9IG51bWJlcnMubGVuZ3RoOyBqIDwgamw7IGogKz0gNCApIHtcblxuXHRcdFx0XHRcdFx0XHRwYXRoLmJlemllckN1cnZlVG8oXG5cdFx0XHRcdFx0XHRcdFx0Z2V0UmVmbGVjdGlvbiggcG9pbnQueCwgY29udHJvbC54ICksXG5cdFx0XHRcdFx0XHRcdFx0Z2V0UmVmbGVjdGlvbiggcG9pbnQueSwgY29udHJvbC55ICksXG5cdFx0XHRcdFx0XHRcdFx0cG9pbnQueCArIG51bWJlcnNbIGogKyAwIF0sXG5cdFx0XHRcdFx0XHRcdFx0cG9pbnQueSArIG51bWJlcnNbIGogKyAxIF0sXG5cdFx0XHRcdFx0XHRcdFx0cG9pbnQueCArIG51bWJlcnNbIGogKyAyIF0sXG5cdFx0XHRcdFx0XHRcdFx0cG9pbnQueSArIG51bWJlcnNbIGogKyAzIF1cblx0XHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdFx0Y29udHJvbC54ID0gcG9pbnQueCArIG51bWJlcnNbIGogKyAwIF07XG5cdFx0XHRcdFx0XHRcdGNvbnRyb2wueSA9IHBvaW50LnkgKyBudW1iZXJzWyBqICsgMSBdO1xuXHRcdFx0XHRcdFx0XHRwb2ludC54ICs9IG51bWJlcnNbIGogKyAyIF07XG5cdFx0XHRcdFx0XHRcdHBvaW50LnkgKz0gbnVtYmVyc1sgaiArIDMgXTtcblxuXHRcdFx0XHRcdFx0XHRpZiAoIGogPT09IDAgJiYgZG9TZXRGaXJzdFBvaW50ID09PSB0cnVlICkgZmlyc3RQb2ludC5jb3B5KCBwb2ludCApO1xuXG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0Y2FzZSAncSc6XG5cdFx0XHRcdFx0XHR2YXIgbnVtYmVycyA9IHBhcnNlRmxvYXRzKCBkYXRhICk7XG5cblx0XHRcdFx0XHRcdGZvciAoIHZhciBqID0gMCwgamwgPSBudW1iZXJzLmxlbmd0aDsgaiA8IGpsOyBqICs9IDQgKSB7XG5cblx0XHRcdFx0XHRcdFx0cGF0aC5xdWFkcmF0aWNDdXJ2ZVRvKFxuXHRcdFx0XHRcdFx0XHRcdHBvaW50LnggKyBudW1iZXJzWyBqICsgMCBdLFxuXHRcdFx0XHRcdFx0XHRcdHBvaW50LnkgKyBudW1iZXJzWyBqICsgMSBdLFxuXHRcdFx0XHRcdFx0XHRcdHBvaW50LnggKyBudW1iZXJzWyBqICsgMiBdLFxuXHRcdFx0XHRcdFx0XHRcdHBvaW50LnkgKyBudW1iZXJzWyBqICsgMyBdXG5cdFx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHRcdGNvbnRyb2wueCA9IHBvaW50LnggKyBudW1iZXJzWyBqICsgMCBdO1xuXHRcdFx0XHRcdFx0XHRjb250cm9sLnkgPSBwb2ludC55ICsgbnVtYmVyc1sgaiArIDEgXTtcblx0XHRcdFx0XHRcdFx0cG9pbnQueCArPSBudW1iZXJzWyBqICsgMiBdO1xuXHRcdFx0XHRcdFx0XHRwb2ludC55ICs9IG51bWJlcnNbIGogKyAzIF07XG5cblx0XHRcdFx0XHRcdFx0aWYgKCBqID09PSAwICYmIGRvU2V0Rmlyc3RQb2ludCA9PT0gdHJ1ZSApIGZpcnN0UG9pbnQuY29weSggcG9pbnQgKTtcblxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdGNhc2UgJ3QnOlxuXHRcdFx0XHRcdFx0dmFyIG51bWJlcnMgPSBwYXJzZUZsb2F0cyggZGF0YSApO1xuXG5cdFx0XHRcdFx0XHRmb3IgKCB2YXIgaiA9IDAsIGpsID0gbnVtYmVycy5sZW5ndGg7IGogPCBqbDsgaiArPSAyICkge1xuXG5cdFx0XHRcdFx0XHRcdHZhciByeCA9IGdldFJlZmxlY3Rpb24oIHBvaW50LngsIGNvbnRyb2wueCApO1xuXHRcdFx0XHRcdFx0XHR2YXIgcnkgPSBnZXRSZWZsZWN0aW9uKCBwb2ludC55LCBjb250cm9sLnkgKTtcblx0XHRcdFx0XHRcdFx0cGF0aC5xdWFkcmF0aWNDdXJ2ZVRvKFxuXHRcdFx0XHRcdFx0XHRcdHJ4LFxuXHRcdFx0XHRcdFx0XHRcdHJ5LFxuXHRcdFx0XHRcdFx0XHRcdHBvaW50LnggKyBudW1iZXJzWyBqICsgMCBdLFxuXHRcdFx0XHRcdFx0XHRcdHBvaW50LnkgKyBudW1iZXJzWyBqICsgMSBdXG5cdFx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHRcdGNvbnRyb2wueCA9IHJ4O1xuXHRcdFx0XHRcdFx0XHRjb250cm9sLnkgPSByeTtcblx0XHRcdFx0XHRcdFx0cG9pbnQueCA9IHBvaW50LnggKyBudW1iZXJzWyBqICsgMCBdO1xuXHRcdFx0XHRcdFx0XHRwb2ludC55ID0gcG9pbnQueSArIG51bWJlcnNbIGogKyAxIF07XG5cblx0XHRcdFx0XHRcdFx0aWYgKCBqID09PSAwICYmIGRvU2V0Rmlyc3RQb2ludCA9PT0gdHJ1ZSApIGZpcnN0UG9pbnQuY29weSggcG9pbnQgKTtcblxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdGNhc2UgJ2EnOlxuXHRcdFx0XHRcdFx0dmFyIG51bWJlcnMgPSBwYXJzZUZsb2F0cyggZGF0YSApO1xuXG5cdFx0XHRcdFx0XHRmb3IgKCB2YXIgaiA9IDAsIGpsID0gbnVtYmVycy5sZW5ndGg7IGogPCBqbDsgaiArPSA3ICkge1xuXG5cdFx0XHRcdFx0XHRcdC8vIHNraXAgY29tbWFuZCBpZiBubyBkaXNwbGFjZW1lbnRcblx0XHRcdFx0XHRcdFx0aWYgKCBudW1iZXJzWyBqICsgNSBdID09IDAgJiYgbnVtYmVyc1sgaiArIDYgXSA9PSAwICkgY29udGludWU7XG5cblx0XHRcdFx0XHRcdFx0dmFyIHN0YXJ0ID0gcG9pbnQuY2xvbmUoKTtcblx0XHRcdFx0XHRcdFx0cG9pbnQueCArPSBudW1iZXJzWyBqICsgNSBdO1xuXHRcdFx0XHRcdFx0XHRwb2ludC55ICs9IG51bWJlcnNbIGogKyA2IF07XG5cdFx0XHRcdFx0XHRcdGNvbnRyb2wueCA9IHBvaW50Lng7XG5cdFx0XHRcdFx0XHRcdGNvbnRyb2wueSA9IHBvaW50Lnk7XG5cdFx0XHRcdFx0XHRcdHBhcnNlQXJjQ29tbWFuZChcblx0XHRcdFx0XHRcdFx0XHRwYXRoLCBudW1iZXJzWyBqIF0sIG51bWJlcnNbIGogKyAxIF0sIG51bWJlcnNbIGogKyAyIF0sIG51bWJlcnNbIGogKyAzIF0sIG51bWJlcnNbIGogKyA0IF0sIHN0YXJ0LCBwb2ludFxuXHRcdFx0XHRcdFx0XHQpO1xuXG5cdFx0XHRcdFx0XHRcdGlmICggaiA9PT0gMCAmJiBkb1NldEZpcnN0UG9pbnQgPT09IHRydWUgKSBmaXJzdFBvaW50LmNvcHkoIHBvaW50ICk7XG5cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRjYXNlICdaJzpcblx0XHRcdFx0XHRjYXNlICd6Jzpcblx0XHRcdFx0XHRcdHBhdGguY3VycmVudFBhdGguYXV0b0Nsb3NlID0gdHJ1ZTtcblxuXHRcdFx0XHRcdFx0aWYgKCBwYXRoLmN1cnJlbnRQYXRoLmN1cnZlcy5sZW5ndGggPiAwICkge1xuXG5cdFx0XHRcdFx0XHRcdC8vIFJlc2V0IHBvaW50IHRvIGJlZ2lubmluZyBvZiBQYXRoXG5cdFx0XHRcdFx0XHRcdHBvaW50LmNvcHkoIGZpcnN0UG9pbnQgKTtcblx0XHRcdFx0XHRcdFx0cGF0aC5jdXJyZW50UGF0aC5jdXJyZW50UG9pbnQuY29weSggcG9pbnQgKTtcblx0XHRcdFx0XHRcdFx0aXNGaXJzdFBvaW50ID0gdHJ1ZTtcblxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0XHRjb25zb2xlLndhcm4oIGNvbW1hbmQgKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gY29uc29sZS5sb2coIHR5cGUsIHBhcnNlRmxvYXRzKCBkYXRhICksIHBhcnNlRmxvYXRzKCBkYXRhICkubGVuZ3RoICApXG5cblx0XHRcdFx0ZG9TZXRGaXJzdFBvaW50ID0gZmFsc2U7XG5cblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIHBhdGg7XG5cblx0XHR9XG5cblx0XHRmdW5jdGlvbiBwYXJzZUNTU1N0eWxlc2hlZXQoIG5vZGUgKSB7XG5cblx0XHRcdGlmICggISBub2RlLnNoZWV0IHx8ICEgbm9kZS5zaGVldC5jc3NSdWxlcyB8fCAhIG5vZGUuc2hlZXQuY3NzUnVsZXMubGVuZ3RoICkgcmV0dXJuO1xuXG5cdFx0XHRmb3IgKCB2YXIgaSA9IDA7IGkgPCBub2RlLnNoZWV0LmNzc1J1bGVzLmxlbmd0aDsgaSArKyApIHtcblxuXHRcdFx0XHR2YXIgc3R5bGVzaGVldCA9IG5vZGUuc2hlZXQuY3NzUnVsZXNbIGkgXTtcblxuXHRcdFx0XHRpZiAoIHN0eWxlc2hlZXQudHlwZSAhPT0gMSApIGNvbnRpbnVlO1xuXG5cdFx0XHRcdHZhciBzZWxlY3Rvckxpc3QgPSBzdHlsZXNoZWV0LnNlbGVjdG9yVGV4dFxuXHRcdFx0XHRcdC5zcGxpdCggLywvZ20gKVxuXHRcdFx0XHRcdC5maWx0ZXIoIEJvb2xlYW4gKVxuXHRcdFx0XHRcdC5tYXAoIGkgPT4gaS50cmltKCkgKTtcblxuXHRcdFx0XHRmb3IgKCB2YXIgaiA9IDA7IGogPCBzZWxlY3Rvckxpc3QubGVuZ3RoOyBqICsrICkge1xuXG5cdFx0XHRcdFx0c3R5bGVzaGVldHNbIHNlbGVjdG9yTGlzdFsgaiBdIF0gPSBPYmplY3QuYXNzaWduKFxuXHRcdFx0XHRcdFx0c3R5bGVzaGVldHNbIHNlbGVjdG9yTGlzdFsgaiBdIF0gfHwge30sXG5cdFx0XHRcdFx0XHRzdHlsZXNoZWV0LnN0eWxlXG5cdFx0XHRcdFx0KTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdH1cblxuXHRcdH1cblxuXHRcdC8qKlxuXHRcdCAqIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9TVkcvaW1wbG5vdGUuaHRtbCNBcmNJbXBsZW1lbnRhdGlvbk5vdGVzXG5cdFx0ICogaHR0cHM6Ly9tb3J0b3JheS5jb20vMjAxNy8wMi8xNi9yZW5kZXJpbmctYW4tc3ZnLWVsbGlwdGljYWwtYXJjLWFzLWJlemllci1jdXJ2ZXMvIEFwcGVuZGl4OiBFbmRwb2ludCB0byBjZW50ZXIgYXJjIGNvbnZlcnNpb25cblx0XHQgKiBGcm9tXG5cdFx0ICogcnggcnkgeC1heGlzLXJvdGF0aW9uIGxhcmdlLWFyYy1mbGFnIHN3ZWVwLWZsYWcgeCB5XG5cdFx0ICogVG9cblx0XHQgKiBhWCwgYVksIHhSYWRpdXMsIHlSYWRpdXMsIGFTdGFydEFuZ2xlLCBhRW5kQW5nbGUsIGFDbG9ja3dpc2UsIGFSb3RhdGlvblxuXHRcdCAqL1xuXG5cdFx0ZnVuY3Rpb24gcGFyc2VBcmNDb21tYW5kKCBwYXRoLCByeCwgcnksIHhfYXhpc19yb3RhdGlvbiwgbGFyZ2VfYXJjX2ZsYWcsIHN3ZWVwX2ZsYWcsIHN0YXJ0LCBlbmQgKSB7XG5cblx0XHRcdGlmICggcnggPT0gMCB8fCByeSA9PSAwICkge1xuXG5cdFx0XHRcdC8vIGRyYXcgYSBsaW5lIGlmIGVpdGhlciBvZiB0aGUgcmFkaWkgPT0gMFxuXHRcdFx0XHRwYXRoLmxpbmVUbyggZW5kLngsIGVuZC55ICk7XG5cdFx0XHRcdHJldHVybjtcblxuXHRcdFx0fVxuXG5cdFx0XHR4X2F4aXNfcm90YXRpb24gPSB4X2F4aXNfcm90YXRpb24gKiBNYXRoLlBJIC8gMTgwO1xuXG5cdFx0XHQvLyBFbnN1cmUgcmFkaWkgYXJlIHBvc2l0aXZlXG5cdFx0XHRyeCA9IE1hdGguYWJzKCByeCApO1xuXHRcdFx0cnkgPSBNYXRoLmFicyggcnkgKTtcblxuXHRcdFx0Ly8gQ29tcHV0ZSAoeDEnLCB5MScpXG5cdFx0XHR2YXIgZHgyID0gKCBzdGFydC54IC0gZW5kLnggKSAvIDIuMDtcblx0XHRcdHZhciBkeTIgPSAoIHN0YXJ0LnkgLSBlbmQueSApIC8gMi4wO1xuXHRcdFx0dmFyIHgxcCA9IE1hdGguY29zKCB4X2F4aXNfcm90YXRpb24gKSAqIGR4MiArIE1hdGguc2luKCB4X2F4aXNfcm90YXRpb24gKSAqIGR5Mjtcblx0XHRcdHZhciB5MXAgPSAtIE1hdGguc2luKCB4X2F4aXNfcm90YXRpb24gKSAqIGR4MiArIE1hdGguY29zKCB4X2F4aXNfcm90YXRpb24gKSAqIGR5MjtcblxuXHRcdFx0Ly8gQ29tcHV0ZSAoY3gnLCBjeScpXG5cdFx0XHR2YXIgcnhzID0gcnggKiByeDtcblx0XHRcdHZhciByeXMgPSByeSAqIHJ5O1xuXHRcdFx0dmFyIHgxcHMgPSB4MXAgKiB4MXA7XG5cdFx0XHR2YXIgeTFwcyA9IHkxcCAqIHkxcDtcblxuXHRcdFx0Ly8gRW5zdXJlIHJhZGlpIGFyZSBsYXJnZSBlbm91Z2hcblx0XHRcdHZhciBjciA9IHgxcHMgLyByeHMgKyB5MXBzIC8gcnlzO1xuXG5cdFx0XHRpZiAoIGNyID4gMSApIHtcblxuXHRcdFx0XHQvLyBzY2FsZSB1cCByeCxyeSBlcXVhbGx5IHNvIGNyID09IDFcblx0XHRcdFx0dmFyIHMgPSBNYXRoLnNxcnQoIGNyICk7XG5cdFx0XHRcdHJ4ID0gcyAqIHJ4O1xuXHRcdFx0XHRyeSA9IHMgKiByeTtcblx0XHRcdFx0cnhzID0gcnggKiByeDtcblx0XHRcdFx0cnlzID0gcnkgKiByeTtcblxuXHRcdFx0fVxuXG5cdFx0XHR2YXIgZHEgPSAoIHJ4cyAqIHkxcHMgKyByeXMgKiB4MXBzICk7XG5cdFx0XHR2YXIgcHEgPSAoIHJ4cyAqIHJ5cyAtIGRxICkgLyBkcTtcblx0XHRcdHZhciBxID0gTWF0aC5zcXJ0KCBNYXRoLm1heCggMCwgcHEgKSApO1xuXHRcdFx0aWYgKCBsYXJnZV9hcmNfZmxhZyA9PT0gc3dlZXBfZmxhZyApIHEgPSAtIHE7XG5cdFx0XHR2YXIgY3hwID0gcSAqIHJ4ICogeTFwIC8gcnk7XG5cdFx0XHR2YXIgY3lwID0gLSBxICogcnkgKiB4MXAgLyByeDtcblxuXHRcdFx0Ly8gU3RlcCAzOiBDb21wdXRlIChjeCwgY3kpIGZyb20gKGN4JywgY3knKVxuXHRcdFx0dmFyIGN4ID0gTWF0aC5jb3MoIHhfYXhpc19yb3RhdGlvbiApICogY3hwIC0gTWF0aC5zaW4oIHhfYXhpc19yb3RhdGlvbiApICogY3lwICsgKCBzdGFydC54ICsgZW5kLnggKSAvIDI7XG5cdFx0XHR2YXIgY3kgPSBNYXRoLnNpbiggeF9heGlzX3JvdGF0aW9uICkgKiBjeHAgKyBNYXRoLmNvcyggeF9heGlzX3JvdGF0aW9uICkgKiBjeXAgKyAoIHN0YXJ0LnkgKyBlbmQueSApIC8gMjtcblxuXHRcdFx0Ly8gU3RlcCA0OiBDb21wdXRlIM64MSBhbmQgzpTOuFxuXHRcdFx0dmFyIHRoZXRhID0gc3ZnQW5nbGUoIDEsIDAsICggeDFwIC0gY3hwICkgLyByeCwgKCB5MXAgLSBjeXAgKSAvIHJ5ICk7XG5cdFx0XHR2YXIgZGVsdGEgPSBzdmdBbmdsZSggKCB4MXAgLSBjeHAgKSAvIHJ4LCAoIHkxcCAtIGN5cCApIC8gcnksICggLSB4MXAgLSBjeHAgKSAvIHJ4LCAoIC0geTFwIC0gY3lwICkgLyByeSApICUgKCBNYXRoLlBJICogMiApO1xuXG5cdFx0XHRwYXRoLmN1cnJlbnRQYXRoLmFic2VsbGlwc2UoIGN4LCBjeSwgcngsIHJ5LCB0aGV0YSwgdGhldGEgKyBkZWx0YSwgc3dlZXBfZmxhZyA9PT0gMCwgeF9heGlzX3JvdGF0aW9uICk7XG5cblx0XHR9XG5cblx0XHRmdW5jdGlvbiBzdmdBbmdsZSggdXgsIHV5LCB2eCwgdnkgKSB7XG5cblx0XHRcdHZhciBkb3QgPSB1eCAqIHZ4ICsgdXkgKiB2eTtcblx0XHRcdHZhciBsZW4gPSBNYXRoLnNxcnQoIHV4ICogdXggKyB1eSAqIHV5ICkgKiBNYXRoLnNxcnQoIHZ4ICogdnggKyB2eSAqIHZ5ICk7XG5cdFx0XHR2YXIgYW5nID0gTWF0aC5hY29zKCBNYXRoLm1heCggLSAxLCBNYXRoLm1pbiggMSwgZG90IC8gbGVuICkgKSApOyAvLyBmbG9hdGluZyBwb2ludCBwcmVjaXNpb24sIHNsaWdodGx5IG92ZXIgdmFsdWVzIGFwcGVhclxuXHRcdFx0aWYgKCAoIHV4ICogdnkgLSB1eSAqIHZ4ICkgPCAwICkgYW5nID0gLSBhbmc7XG5cdFx0XHRyZXR1cm4gYW5nO1xuXG5cdFx0fVxuXG5cdFx0Lypcblx0XHQqIEFjY29yZGluZyB0byBodHRwczovL3d3dy53My5vcmcvVFIvU1ZHL3NoYXBlcy5odG1sI1JlY3RFbGVtZW50UlhBdHRyaWJ1dGVcblx0XHQqIHJvdW5kZWQgY29ybmVyIHNob3VsZCBiZSByZW5kZXJlZCB0byBlbGxpcHRpY2FsIGFyYywgYnV0IGJlemllciBjdXJ2ZSBkb2VzIHRoZSBqb2Igd2VsbCBlbm91Z2hcblx0XHQqL1xuXHRcdGZ1bmN0aW9uIHBhcnNlUmVjdE5vZGUoIG5vZGUgKSB7XG5cblx0XHRcdHZhciB4ID0gcGFyc2VGbG9hdFdpdGhVbml0cyggbm9kZS5nZXRBdHRyaWJ1dGUoICd4JyApIHx8IDAgKTtcblx0XHRcdHZhciB5ID0gcGFyc2VGbG9hdFdpdGhVbml0cyggbm9kZS5nZXRBdHRyaWJ1dGUoICd5JyApIHx8IDAgKTtcblx0XHRcdHZhciByeCA9IHBhcnNlRmxvYXRXaXRoVW5pdHMoIG5vZGUuZ2V0QXR0cmlidXRlKCAncngnICkgfHwgMCApO1xuXHRcdFx0dmFyIHJ5ID0gcGFyc2VGbG9hdFdpdGhVbml0cyggbm9kZS5nZXRBdHRyaWJ1dGUoICdyeScgKSB8fCAwICk7XG5cdFx0XHR2YXIgdyA9IHBhcnNlRmxvYXRXaXRoVW5pdHMoIG5vZGUuZ2V0QXR0cmlidXRlKCAnd2lkdGgnICkgKTtcblx0XHRcdHZhciBoID0gcGFyc2VGbG9hdFdpdGhVbml0cyggbm9kZS5nZXRBdHRyaWJ1dGUoICdoZWlnaHQnICkgKTtcblxuXHRcdFx0dmFyIHBhdGggPSBuZXcgU2hhcGVQYXRoKCk7XG5cdFx0XHRwYXRoLm1vdmVUbyggeCArIDIgKiByeCwgeSApO1xuXHRcdFx0cGF0aC5saW5lVG8oIHggKyB3IC0gMiAqIHJ4LCB5ICk7XG5cdFx0XHRpZiAoIHJ4ICE9PSAwIHx8IHJ5ICE9PSAwICkgcGF0aC5iZXppZXJDdXJ2ZVRvKCB4ICsgdywgeSwgeCArIHcsIHksIHggKyB3LCB5ICsgMiAqIHJ5ICk7XG5cdFx0XHRwYXRoLmxpbmVUbyggeCArIHcsIHkgKyBoIC0gMiAqIHJ5ICk7XG5cdFx0XHRpZiAoIHJ4ICE9PSAwIHx8IHJ5ICE9PSAwICkgcGF0aC5iZXppZXJDdXJ2ZVRvKCB4ICsgdywgeSArIGgsIHggKyB3LCB5ICsgaCwgeCArIHcgLSAyICogcngsIHkgKyBoICk7XG5cdFx0XHRwYXRoLmxpbmVUbyggeCArIDIgKiByeCwgeSArIGggKTtcblxuXHRcdFx0aWYgKCByeCAhPT0gMCB8fCByeSAhPT0gMCApIHtcblxuXHRcdFx0XHRwYXRoLmJlemllckN1cnZlVG8oIHgsIHkgKyBoLCB4LCB5ICsgaCwgeCwgeSArIGggLSAyICogcnkgKTtcblxuXHRcdFx0fVxuXG5cdFx0XHRwYXRoLmxpbmVUbyggeCwgeSArIDIgKiByeSApO1xuXG5cdFx0XHRpZiAoIHJ4ICE9PSAwIHx8IHJ5ICE9PSAwICkge1xuXG5cdFx0XHRcdHBhdGguYmV6aWVyQ3VydmVUbyggeCwgeSwgeCwgeSwgeCArIDIgKiByeCwgeSApO1xuXG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBwYXRoO1xuXG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gcGFyc2VQb2x5Z29uTm9kZSggbm9kZSApIHtcblxuXHRcdFx0ZnVuY3Rpb24gaXRlcmF0b3IoIG1hdGNoLCBhLCBiICkge1xuXG5cdFx0XHRcdHZhciB4ID0gcGFyc2VGbG9hdFdpdGhVbml0cyggYSApO1xuXHRcdFx0XHR2YXIgeSA9IHBhcnNlRmxvYXRXaXRoVW5pdHMoIGIgKTtcblxuXHRcdFx0XHRpZiAoIGluZGV4ID09PSAwICkge1xuXG5cdFx0XHRcdFx0cGF0aC5tb3ZlVG8oIHgsIHkgKTtcblxuXHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0cGF0aC5saW5lVG8oIHgsIHkgKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdFx0aW5kZXggKys7XG5cblx0XHRcdH1cblxuXHRcdFx0dmFyIHJlZ2V4ID0gLygtP1tcXGRcXC4/XSspWyx8XFxzXSgtP1tcXGRcXC4/XSspL2c7XG5cblx0XHRcdHZhciBwYXRoID0gbmV3IFNoYXBlUGF0aCgpO1xuXG5cdFx0XHR2YXIgaW5kZXggPSAwO1xuXG5cdFx0XHRub2RlLmdldEF0dHJpYnV0ZSggJ3BvaW50cycgKS5yZXBsYWNlKCByZWdleCwgaXRlcmF0b3IgKTtcblxuXHRcdFx0cGF0aC5jdXJyZW50UGF0aC5hdXRvQ2xvc2UgPSB0cnVlO1xuXG5cdFx0XHRyZXR1cm4gcGF0aDtcblxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIHBhcnNlUG9seWxpbmVOb2RlKCBub2RlICkge1xuXG5cdFx0XHRmdW5jdGlvbiBpdGVyYXRvciggbWF0Y2gsIGEsIGIgKSB7XG5cblx0XHRcdFx0dmFyIHggPSBwYXJzZUZsb2F0V2l0aFVuaXRzKCBhICk7XG5cdFx0XHRcdHZhciB5ID0gcGFyc2VGbG9hdFdpdGhVbml0cyggYiApO1xuXG5cdFx0XHRcdGlmICggaW5kZXggPT09IDAgKSB7XG5cblx0XHRcdFx0XHRwYXRoLm1vdmVUbyggeCwgeSApO1xuXG5cdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRwYXRoLmxpbmVUbyggeCwgeSApO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpbmRleCArKztcblxuXHRcdFx0fVxuXG5cdFx0XHR2YXIgcmVnZXggPSAvKC0/W1xcZFxcLj9dKylbLHxcXHNdKC0/W1xcZFxcLj9dKykvZztcblxuXHRcdFx0dmFyIHBhdGggPSBuZXcgU2hhcGVQYXRoKCk7XG5cblx0XHRcdHZhciBpbmRleCA9IDA7XG5cblx0XHRcdG5vZGUuZ2V0QXR0cmlidXRlKCAncG9pbnRzJyApLnJlcGxhY2UoIHJlZ2V4LCBpdGVyYXRvciApO1xuXG5cdFx0XHRwYXRoLmN1cnJlbnRQYXRoLmF1dG9DbG9zZSA9IGZhbHNlO1xuXG5cdFx0XHRyZXR1cm4gcGF0aDtcblxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIHBhcnNlQ2lyY2xlTm9kZSggbm9kZSApIHtcblxuXHRcdFx0dmFyIHggPSBwYXJzZUZsb2F0V2l0aFVuaXRzKCBub2RlLmdldEF0dHJpYnV0ZSggJ2N4JyApICk7XG5cdFx0XHR2YXIgeSA9IHBhcnNlRmxvYXRXaXRoVW5pdHMoIG5vZGUuZ2V0QXR0cmlidXRlKCAnY3knICkgKTtcblx0XHRcdHZhciByID0gcGFyc2VGbG9hdFdpdGhVbml0cyggbm9kZS5nZXRBdHRyaWJ1dGUoICdyJyApICk7XG5cblx0XHRcdHZhciBzdWJwYXRoID0gbmV3IFBhdGgoKTtcblx0XHRcdHN1YnBhdGguYWJzYXJjKCB4LCB5LCByLCAwLCBNYXRoLlBJICogMiApO1xuXG5cdFx0XHR2YXIgcGF0aCA9IG5ldyBTaGFwZVBhdGgoKTtcblx0XHRcdHBhdGguc3ViUGF0aHMucHVzaCggc3VicGF0aCApO1xuXG5cdFx0XHRyZXR1cm4gcGF0aDtcblxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIHBhcnNlRWxsaXBzZU5vZGUoIG5vZGUgKSB7XG5cblx0XHRcdHZhciB4ID0gcGFyc2VGbG9hdFdpdGhVbml0cyggbm9kZS5nZXRBdHRyaWJ1dGUoICdjeCcgKSApO1xuXHRcdFx0dmFyIHkgPSBwYXJzZUZsb2F0V2l0aFVuaXRzKCBub2RlLmdldEF0dHJpYnV0ZSggJ2N5JyApICk7XG5cdFx0XHR2YXIgcnggPSBwYXJzZUZsb2F0V2l0aFVuaXRzKCBub2RlLmdldEF0dHJpYnV0ZSggJ3J4JyApICk7XG5cdFx0XHR2YXIgcnkgPSBwYXJzZUZsb2F0V2l0aFVuaXRzKCBub2RlLmdldEF0dHJpYnV0ZSggJ3J5JyApICk7XG5cblx0XHRcdHZhciBzdWJwYXRoID0gbmV3IFBhdGgoKTtcblx0XHRcdHN1YnBhdGguYWJzZWxsaXBzZSggeCwgeSwgcngsIHJ5LCAwLCBNYXRoLlBJICogMiApO1xuXG5cdFx0XHR2YXIgcGF0aCA9IG5ldyBTaGFwZVBhdGgoKTtcblx0XHRcdHBhdGguc3ViUGF0aHMucHVzaCggc3VicGF0aCApO1xuXG5cdFx0XHRyZXR1cm4gcGF0aDtcblxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIHBhcnNlTGluZU5vZGUoIG5vZGUgKSB7XG5cblx0XHRcdHZhciB4MSA9IHBhcnNlRmxvYXRXaXRoVW5pdHMoIG5vZGUuZ2V0QXR0cmlidXRlKCAneDEnICkgKTtcblx0XHRcdHZhciB5MSA9IHBhcnNlRmxvYXRXaXRoVW5pdHMoIG5vZGUuZ2V0QXR0cmlidXRlKCAneTEnICkgKTtcblx0XHRcdHZhciB4MiA9IHBhcnNlRmxvYXRXaXRoVW5pdHMoIG5vZGUuZ2V0QXR0cmlidXRlKCAneDInICkgKTtcblx0XHRcdHZhciB5MiA9IHBhcnNlRmxvYXRXaXRoVW5pdHMoIG5vZGUuZ2V0QXR0cmlidXRlKCAneTInICkgKTtcblxuXHRcdFx0dmFyIHBhdGggPSBuZXcgU2hhcGVQYXRoKCk7XG5cdFx0XHRwYXRoLm1vdmVUbyggeDEsIHkxICk7XG5cdFx0XHRwYXRoLmxpbmVUbyggeDIsIHkyICk7XG5cdFx0XHRwYXRoLmN1cnJlbnRQYXRoLmF1dG9DbG9zZSA9IGZhbHNlO1xuXG5cdFx0XHRyZXR1cm4gcGF0aDtcblxuXHRcdH1cblxuXHRcdC8vXG5cblx0XHRmdW5jdGlvbiBwYXJzZVN0eWxlKCBub2RlLCBzdHlsZSApIHtcblxuXHRcdFx0c3R5bGUgPSBPYmplY3QuYXNzaWduKCB7fSwgc3R5bGUgKTsgLy8gY2xvbmUgc3R5bGVcblxuXHRcdFx0dmFyIHN0eWxlc2hlZXRTdHlsZXMgPSB7fTtcblxuXHRcdFx0aWYgKCBub2RlLmhhc0F0dHJpYnV0ZSggJ2NsYXNzJyApICkge1xuXG5cdFx0XHRcdHZhciBjbGFzc1NlbGVjdG9ycyA9IG5vZGUuZ2V0QXR0cmlidXRlKCAnY2xhc3MnIClcblx0XHRcdFx0XHQuc3BsaXQoIC9cXHMvIClcblx0XHRcdFx0XHQuZmlsdGVyKCBCb29sZWFuIClcblx0XHRcdFx0XHQubWFwKCBpID0+IGkudHJpbSgpICk7XG5cblx0XHRcdFx0Zm9yICggdmFyIGkgPSAwOyBpIDwgY2xhc3NTZWxlY3RvcnMubGVuZ3RoOyBpICsrICkge1xuXG5cdFx0XHRcdFx0c3R5bGVzaGVldFN0eWxlcyA9IE9iamVjdC5hc3NpZ24oIHN0eWxlc2hlZXRTdHlsZXMsIHN0eWxlc2hlZXRzWyAnLicgKyBjbGFzc1NlbGVjdG9yc1sgaSBdIF0gKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdH1cblxuXHRcdFx0aWYgKCBub2RlLmhhc0F0dHJpYnV0ZSggJ2lkJyApICkge1xuXG5cdFx0XHRcdHN0eWxlc2hlZXRTdHlsZXMgPSBPYmplY3QuYXNzaWduKCBzdHlsZXNoZWV0U3R5bGVzLCBzdHlsZXNoZWV0c1sgJyMnICsgbm9kZS5nZXRBdHRyaWJ1dGUoICdpZCcgKSBdICk7XG5cblx0XHRcdH1cblxuXHRcdFx0ZnVuY3Rpb24gYWRkU3R5bGUoIHN2Z05hbWUsIGpzTmFtZSwgYWRqdXN0RnVuY3Rpb24gKSB7XG5cblx0XHRcdFx0aWYgKCBhZGp1c3RGdW5jdGlvbiA9PT0gdW5kZWZpbmVkICkgYWRqdXN0RnVuY3Rpb24gPSBmdW5jdGlvbiBjb3B5KCB2ICkge1xuXG5cdFx0XHRcdFx0aWYgKCB2LnN0YXJ0c1dpdGgoICd1cmwnICkgKSBjb25zb2xlLndhcm4oICdTVkdMb2FkZXI6IHVybCBhY2Nlc3MgaW4gYXR0cmlidXRlcyBpcyBub3QgaW1wbGVtZW50ZWQuJyApO1xuXG5cdFx0XHRcdFx0cmV0dXJuIHY7XG5cblx0XHRcdFx0fTtcblxuXHRcdFx0XHRpZiAoIG5vZGUuaGFzQXR0cmlidXRlKCBzdmdOYW1lICkgKSBzdHlsZVsganNOYW1lIF0gPSBhZGp1c3RGdW5jdGlvbiggbm9kZS5nZXRBdHRyaWJ1dGUoIHN2Z05hbWUgKSApO1xuXHRcdFx0XHRpZiAoIHN0eWxlc2hlZXRTdHlsZXNbIHN2Z05hbWUgXSApIHN0eWxlWyBqc05hbWUgXSA9IGFkanVzdEZ1bmN0aW9uKCBzdHlsZXNoZWV0U3R5bGVzWyBzdmdOYW1lIF0gKTtcblx0XHRcdFx0aWYgKCBub2RlLnN0eWxlICYmIG5vZGUuc3R5bGVbIHN2Z05hbWUgXSAhPT0gJycgKSBzdHlsZVsganNOYW1lIF0gPSBhZGp1c3RGdW5jdGlvbiggbm9kZS5zdHlsZVsgc3ZnTmFtZSBdICk7XG5cblx0XHRcdH1cblxuXHRcdFx0ZnVuY3Rpb24gY2xhbXAoIHYgKSB7XG5cblx0XHRcdFx0cmV0dXJuIE1hdGgubWF4KCAwLCBNYXRoLm1pbiggMSwgcGFyc2VGbG9hdFdpdGhVbml0cyggdiApICkgKTtcblxuXHRcdFx0fVxuXG5cdFx0XHRmdW5jdGlvbiBwb3NpdGl2ZSggdiApIHtcblxuXHRcdFx0XHRyZXR1cm4gTWF0aC5tYXgoIDAsIHBhcnNlRmxvYXRXaXRoVW5pdHMoIHYgKSApO1xuXG5cdFx0XHR9XG5cblx0XHRcdGFkZFN0eWxlKCAnZmlsbCcsICdmaWxsJyApO1xuXHRcdFx0YWRkU3R5bGUoICdmaWxsLW9wYWNpdHknLCAnZmlsbE9wYWNpdHknLCBjbGFtcCApO1xuXHRcdFx0YWRkU3R5bGUoICdvcGFjaXR5JywgJ29wYWNpdHknLCBjbGFtcCApO1xuXHRcdFx0YWRkU3R5bGUoICdzdHJva2UnLCAnc3Ryb2tlJyApO1xuXHRcdFx0YWRkU3R5bGUoICdzdHJva2Utb3BhY2l0eScsICdzdHJva2VPcGFjaXR5JywgY2xhbXAgKTtcblx0XHRcdGFkZFN0eWxlKCAnc3Ryb2tlLXdpZHRoJywgJ3N0cm9rZVdpZHRoJywgcG9zaXRpdmUgKTtcblx0XHRcdGFkZFN0eWxlKCAnc3Ryb2tlLWxpbmVqb2luJywgJ3N0cm9rZUxpbmVKb2luJyApO1xuXHRcdFx0YWRkU3R5bGUoICdzdHJva2UtbGluZWNhcCcsICdzdHJva2VMaW5lQ2FwJyApO1xuXHRcdFx0YWRkU3R5bGUoICdzdHJva2UtbWl0ZXJsaW1pdCcsICdzdHJva2VNaXRlckxpbWl0JywgcG9zaXRpdmUgKTtcblx0XHRcdGFkZFN0eWxlKCAndmlzaWJpbGl0eScsICd2aXNpYmlsaXR5JyApO1xuXG5cdFx0XHRyZXR1cm4gc3R5bGU7XG5cblx0XHR9XG5cblx0XHQvLyBodHRwOi8vd3d3LnczLm9yZy9UUi9TVkcxMS9pbXBsbm90ZS5odG1sI1BhdGhFbGVtZW50SW1wbGVtZW50YXRpb25Ob3Rlc1xuXG5cdFx0ZnVuY3Rpb24gZ2V0UmVmbGVjdGlvbiggYSwgYiApIHtcblxuXHRcdFx0cmV0dXJuIGEgLSAoIGIgLSBhICk7XG5cblx0XHR9XG5cblx0XHQvLyBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9wcHZnL3N2Zy1udW1iZXJzIChNSVQgTGljZW5zZSlcblxuXHRcdGZ1bmN0aW9uIHBhcnNlRmxvYXRzKCBpbnB1dCApIHtcblxuXHRcdFx0aWYgKCB0eXBlb2YgaW5wdXQgIT09ICdzdHJpbmcnICkge1xuXG5cdFx0XHRcdHRocm93IG5ldyBUeXBlRXJyb3IoICdJbnZhbGlkIGlucHV0OiAnICsgdHlwZW9mIGlucHV0ICk7XG5cblx0XHRcdH1cblxuXHRcdFx0Ly8gQ2hhcmFjdGVyIGdyb3Vwc1xuXHRcdFx0dmFyIFJFID0ge1xuXHRcdFx0XHRTRVBBUkFUT1I6IC9bIFxcdFxcclxcblxcLC5cXC0rXS8sXG5cdFx0XHRcdFdISVRFU1BBQ0U6IC9bIFxcdFxcclxcbl0vLFxuXHRcdFx0XHRESUdJVDogL1tcXGRdLyxcblx0XHRcdFx0U0lHTjogL1stK10vLFxuXHRcdFx0XHRQT0lOVDogL1xcLi8sXG5cdFx0XHRcdENPTU1BOiAvLC8sXG5cdFx0XHRcdEVYUDogL2UvaVxuXHRcdFx0fTtcblxuXHRcdFx0Ly8gU3RhdGVzXG5cdFx0XHR2YXIgU0VQID0gMDtcblx0XHRcdHZhciBJTlQgPSAxO1xuXHRcdFx0dmFyIEZMT0FUID0gMjtcblx0XHRcdHZhciBFWFAgPSAzO1xuXG5cdFx0XHR2YXIgc3RhdGUgPSBTRVA7XG5cdFx0XHR2YXIgc2VlbkNvbW1hID0gdHJ1ZTtcblx0XHRcdHZhciByZXN1bHQgPSBbXSwgbnVtYmVyID0gJycsIGV4cG9uZW50ID0gJyc7XG5cblx0XHRcdGZ1bmN0aW9uIHRocm93U3ludGF4RXJyb3IoIGN1cnJlbnQsIGksIHBhcnRpYWwgKSB7XG5cblx0XHRcdFx0dmFyIGVycm9yID0gbmV3IFN5bnRheEVycm9yKCAnVW5leHBlY3RlZCBjaGFyYWN0ZXIgXCInICsgY3VycmVudCArICdcIiBhdCBpbmRleCAnICsgaSArICcuJyApO1xuXHRcdFx0XHRlcnJvci5wYXJ0aWFsID0gcGFydGlhbDtcblx0XHRcdFx0dGhyb3cgZXJyb3I7XG5cblx0XHRcdH1cblxuXHRcdFx0ZnVuY3Rpb24gbmV3TnVtYmVyKCkge1xuXG5cdFx0XHRcdGlmICggbnVtYmVyICE9PSAnJyApIHtcblxuXHRcdFx0XHRcdGlmICggZXhwb25lbnQgPT09ICcnICkgcmVzdWx0LnB1c2goIE51bWJlciggbnVtYmVyICkgKTtcblx0XHRcdFx0XHRlbHNlIHJlc3VsdC5wdXNoKCBOdW1iZXIoIG51bWJlciApICogTWF0aC5wb3coIDEwLCBOdW1iZXIoIGV4cG9uZW50ICkgKSApO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRudW1iZXIgPSAnJztcblx0XHRcdFx0ZXhwb25lbnQgPSAnJztcblxuXHRcdFx0fVxuXG5cdFx0XHR2YXIgY3VycmVudCwgaSA9IDAsIGxlbmd0aCA9IGlucHV0Lmxlbmd0aDtcblx0XHRcdGZvciAoIGkgPSAwOyBpIDwgbGVuZ3RoOyBpICsrICkge1xuXG5cdFx0XHRcdGN1cnJlbnQgPSBpbnB1dFsgaSBdO1xuXG5cdFx0XHRcdC8vIHBhcnNlIHVudGlsIG5leHQgbnVtYmVyXG5cdFx0XHRcdGlmICggc3RhdGUgPT09IFNFUCApIHtcblxuXHRcdFx0XHRcdC8vIGVhdCB3aGl0ZXNwYWNlXG5cdFx0XHRcdFx0aWYgKCBSRS5XSElURVNQQUNFLnRlc3QoIGN1cnJlbnQgKSApIHtcblxuXHRcdFx0XHRcdFx0Y29udGludWU7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBzdGFydCBuZXcgbnVtYmVyXG5cdFx0XHRcdFx0aWYgKCBSRS5ESUdJVC50ZXN0KCBjdXJyZW50ICkgfHwgUkUuU0lHTi50ZXN0KCBjdXJyZW50ICkgKSB7XG5cblx0XHRcdFx0XHRcdHN0YXRlID0gSU5UO1xuXHRcdFx0XHRcdFx0bnVtYmVyID0gY3VycmVudDtcblx0XHRcdFx0XHRcdGNvbnRpbnVlO1xuXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0aWYgKCBSRS5QT0lOVC50ZXN0KCBjdXJyZW50ICkgKSB7XG5cblx0XHRcdFx0XHRcdHN0YXRlID0gRkxPQVQ7XG5cdFx0XHRcdFx0XHRudW1iZXIgPSBjdXJyZW50O1xuXHRcdFx0XHRcdFx0Y29udGludWU7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyB0aHJvdyBvbiBkb3VibGUgY29tbWFzIChlLmcuIFwiMSwgLCAyXCIpXG5cdFx0XHRcdFx0aWYgKCBSRS5DT01NQS50ZXN0KCBjdXJyZW50ICkgKSB7XG5cblx0XHRcdFx0XHRcdGlmICggc2VlbkNvbW1hICkge1xuXG5cdFx0XHRcdFx0XHRcdHRocm93U3ludGF4RXJyb3IoIGN1cnJlbnQsIGksIHJlc3VsdCApO1xuXG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdHNlZW5Db21tYSA9IHRydWU7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIHBhcnNlIGludGVnZXIgcGFydFxuXHRcdFx0XHRpZiAoIHN0YXRlID09PSBJTlQgKSB7XG5cblx0XHRcdFx0XHRpZiAoIFJFLkRJR0lULnRlc3QoIGN1cnJlbnQgKSApIHtcblxuXHRcdFx0XHRcdFx0bnVtYmVyICs9IGN1cnJlbnQ7XG5cdFx0XHRcdFx0XHRjb250aW51ZTtcblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGlmICggUkUuUE9JTlQudGVzdCggY3VycmVudCApICkge1xuXG5cdFx0XHRcdFx0XHRudW1iZXIgKz0gY3VycmVudDtcblx0XHRcdFx0XHRcdHN0YXRlID0gRkxPQVQ7XG5cdFx0XHRcdFx0XHRjb250aW51ZTtcblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGlmICggUkUuRVhQLnRlc3QoIGN1cnJlbnQgKSApIHtcblxuXHRcdFx0XHRcdFx0c3RhdGUgPSBFWFA7XG5cdFx0XHRcdFx0XHRjb250aW51ZTtcblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIHRocm93IG9uIGRvdWJsZSBzaWducyAoXCItKzFcIiksIGJ1dCBub3Qgb24gc2lnbiBhcyBzZXBhcmF0b3IgKFwiLTEtMlwiKVxuXHRcdFx0XHRcdGlmICggUkUuU0lHTi50ZXN0KCBjdXJyZW50IClcblx0XHRcdFx0XHRcdFx0JiYgbnVtYmVyLmxlbmd0aCA9PT0gMVxuXHRcdFx0XHRcdFx0XHQmJiBSRS5TSUdOLnRlc3QoIG51bWJlclsgMCBdICkgKSB7XG5cblx0XHRcdFx0XHRcdHRocm93U3ludGF4RXJyb3IoIGN1cnJlbnQsIGksIHJlc3VsdCApO1xuXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBwYXJzZSBkZWNpbWFsIHBhcnRcblx0XHRcdFx0aWYgKCBzdGF0ZSA9PT0gRkxPQVQgKSB7XG5cblx0XHRcdFx0XHRpZiAoIFJFLkRJR0lULnRlc3QoIGN1cnJlbnQgKSApIHtcblxuXHRcdFx0XHRcdFx0bnVtYmVyICs9IGN1cnJlbnQ7XG5cdFx0XHRcdFx0XHRjb250aW51ZTtcblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGlmICggUkUuRVhQLnRlc3QoIGN1cnJlbnQgKSApIHtcblxuXHRcdFx0XHRcdFx0c3RhdGUgPSBFWFA7XG5cdFx0XHRcdFx0XHRjb250aW51ZTtcblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIHRocm93IG9uIGRvdWJsZSBkZWNpbWFsIHBvaW50cyAoZS5nLiBcIjEuLjJcIilcblx0XHRcdFx0XHRpZiAoIFJFLlBPSU5ULnRlc3QoIGN1cnJlbnQgKSAmJiBudW1iZXJbIG51bWJlci5sZW5ndGggLSAxIF0gPT09ICcuJyApIHtcblxuXHRcdFx0XHRcdFx0dGhyb3dTeW50YXhFcnJvciggY3VycmVudCwgaSwgcmVzdWx0ICk7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIHBhcnNlIGV4cG9uZW50IHBhcnRcblx0XHRcdFx0aWYgKCBzdGF0ZSA9PSBFWFAgKSB7XG5cblx0XHRcdFx0XHRpZiAoIFJFLkRJR0lULnRlc3QoIGN1cnJlbnQgKSApIHtcblxuXHRcdFx0XHRcdFx0ZXhwb25lbnQgKz0gY3VycmVudDtcblx0XHRcdFx0XHRcdGNvbnRpbnVlO1xuXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0aWYgKCBSRS5TSUdOLnRlc3QoIGN1cnJlbnQgKSApIHtcblxuXHRcdFx0XHRcdFx0aWYgKCBleHBvbmVudCA9PT0gJycgKSB7XG5cblx0XHRcdFx0XHRcdFx0ZXhwb25lbnQgKz0gY3VycmVudDtcblx0XHRcdFx0XHRcdFx0Y29udGludWU7XG5cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0aWYgKCBleHBvbmVudC5sZW5ndGggPT09IDEgJiYgUkUuU0lHTi50ZXN0KCBleHBvbmVudCApICkge1xuXG5cdFx0XHRcdFx0XHRcdHRocm93U3ludGF4RXJyb3IoIGN1cnJlbnQsIGksIHJlc3VsdCApO1xuXG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fVxuXG5cblx0XHRcdFx0Ly8gZW5kIG9mIG51bWJlclxuXHRcdFx0XHRpZiAoIFJFLldISVRFU1BBQ0UudGVzdCggY3VycmVudCApICkge1xuXG5cdFx0XHRcdFx0bmV3TnVtYmVyKCk7XG5cdFx0XHRcdFx0c3RhdGUgPSBTRVA7XG5cdFx0XHRcdFx0c2VlbkNvbW1hID0gZmFsc2U7XG5cblx0XHRcdFx0fSBlbHNlIGlmICggUkUuQ09NTUEudGVzdCggY3VycmVudCApICkge1xuXG5cdFx0XHRcdFx0bmV3TnVtYmVyKCk7XG5cdFx0XHRcdFx0c3RhdGUgPSBTRVA7XG5cdFx0XHRcdFx0c2VlbkNvbW1hID0gdHJ1ZTtcblxuXHRcdFx0XHR9IGVsc2UgaWYgKCBSRS5TSUdOLnRlc3QoIGN1cnJlbnQgKSApIHtcblxuXHRcdFx0XHRcdG5ld051bWJlcigpO1xuXHRcdFx0XHRcdHN0YXRlID0gSU5UO1xuXHRcdFx0XHRcdG51bWJlciA9IGN1cnJlbnQ7XG5cblx0XHRcdFx0fSBlbHNlIGlmICggUkUuUE9JTlQudGVzdCggY3VycmVudCApICkge1xuXG5cdFx0XHRcdFx0bmV3TnVtYmVyKCk7XG5cdFx0XHRcdFx0c3RhdGUgPSBGTE9BVDtcblx0XHRcdFx0XHRudW1iZXIgPSBjdXJyZW50O1xuXG5cdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHR0aHJvd1N5bnRheEVycm9yKCBjdXJyZW50LCBpLCByZXN1bHQgKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdH1cblxuXHRcdFx0Ly8gYWRkIHRoZSBsYXN0IG51bWJlciBmb3VuZCAoaWYgYW55KVxuXHRcdFx0bmV3TnVtYmVyKCk7XG5cblx0XHRcdHJldHVybiByZXN1bHQ7XG5cblx0XHR9XG5cblx0XHQvLyBVbml0c1xuXG5cdFx0dmFyIHVuaXRzID0gWyAnbW0nLCAnY20nLCAnaW4nLCAncHQnLCAncGMnLCAncHgnIF07XG5cblx0XHQvLyBDb252ZXJzaW9uOiBbIGZyb21Vbml0IF1bIHRvVW5pdCBdICgtMSBtZWFucyBkcGkgZGVwZW5kZW50KVxuXHRcdHZhciB1bml0Q29udmVyc2lvbiA9IHtcblxuXHRcdFx0J21tJzoge1xuXHRcdFx0XHQnbW0nOiAxLFxuXHRcdFx0XHQnY20nOiAwLjEsXG5cdFx0XHRcdCdpbic6IDEgLyAyNS40LFxuXHRcdFx0XHQncHQnOiA3MiAvIDI1LjQsXG5cdFx0XHRcdCdwYyc6IDYgLyAyNS40LFxuXHRcdFx0XHQncHgnOiAtIDFcblx0XHRcdH0sXG5cdFx0XHQnY20nOiB7XG5cdFx0XHRcdCdtbSc6IDEwLFxuXHRcdFx0XHQnY20nOiAxLFxuXHRcdFx0XHQnaW4nOiAxIC8gMi41NCxcblx0XHRcdFx0J3B0JzogNzIgLyAyLjU0LFxuXHRcdFx0XHQncGMnOiA2IC8gMi41NCxcblx0XHRcdFx0J3B4JzogLSAxXG5cdFx0XHR9LFxuXHRcdFx0J2luJzoge1xuXHRcdFx0XHQnbW0nOiAyNS40LFxuXHRcdFx0XHQnY20nOiAyLjU0LFxuXHRcdFx0XHQnaW4nOiAxLFxuXHRcdFx0XHQncHQnOiA3Mixcblx0XHRcdFx0J3BjJzogNixcblx0XHRcdFx0J3B4JzogLSAxXG5cdFx0XHR9LFxuXHRcdFx0J3B0Jzoge1xuXHRcdFx0XHQnbW0nOiAyNS40IC8gNzIsXG5cdFx0XHRcdCdjbSc6IDIuNTQgLyA3Mixcblx0XHRcdFx0J2luJzogMSAvIDcyLFxuXHRcdFx0XHQncHQnOiAxLFxuXHRcdFx0XHQncGMnOiA2IC8gNzIsXG5cdFx0XHRcdCdweCc6IC0gMVxuXHRcdFx0fSxcblx0XHRcdCdwYyc6IHtcblx0XHRcdFx0J21tJzogMjUuNCAvIDYsXG5cdFx0XHRcdCdjbSc6IDIuNTQgLyA2LFxuXHRcdFx0XHQnaW4nOiAxIC8gNixcblx0XHRcdFx0J3B0JzogNzIgLyA2LFxuXHRcdFx0XHQncGMnOiAxLFxuXHRcdFx0XHQncHgnOiAtIDFcblx0XHRcdH0sXG5cdFx0XHQncHgnOiB7XG5cdFx0XHRcdCdweCc6IDFcblx0XHRcdH1cblxuXHRcdH07XG5cblx0XHRmdW5jdGlvbiBwYXJzZUZsb2F0V2l0aFVuaXRzKCBzdHJpbmcgKSB7XG5cblx0XHRcdHZhciB0aGVVbml0ID0gJ3B4JztcblxuXHRcdFx0aWYgKCB0eXBlb2Ygc3RyaW5nID09PSAnc3RyaW5nJyB8fCBzdHJpbmcgaW5zdGFuY2VvZiBTdHJpbmcgKSB7XG5cblx0XHRcdFx0Zm9yICggdmFyIGkgPSAwLCBuID0gdW5pdHMubGVuZ3RoOyBpIDwgbjsgaSArKyApIHtcblxuXHRcdFx0XHRcdHZhciB1ID0gdW5pdHNbIGkgXTtcblxuXHRcdFx0XHRcdGlmICggc3RyaW5nLmVuZHNXaXRoKCB1ICkgKSB7XG5cblx0XHRcdFx0XHRcdHRoZVVuaXQgPSB1O1xuXHRcdFx0XHRcdFx0c3RyaW5nID0gc3RyaW5nLnN1YnN0cmluZyggMCwgc3RyaW5nLmxlbmd0aCAtIHUubGVuZ3RoICk7XG5cdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHR9XG5cblx0XHRcdH1cblxuXHRcdFx0dmFyIHNjYWxlID0gdW5kZWZpbmVkO1xuXG5cdFx0XHRpZiAoIHRoZVVuaXQgPT09ICdweCcgJiYgc2NvcGUuZGVmYXVsdFVuaXQgIT09ICdweCcgKSB7XG5cblx0XHRcdFx0Ly8gQ29udmVyc2lvbiBzY2FsZSBmcm9tICBwaXhlbHMgdG8gaW5jaGVzLCB0aGVuIHRvIGRlZmF1bHQgdW5pdHNcblxuXHRcdFx0XHRzY2FsZSA9IHVuaXRDb252ZXJzaW9uWyAnaW4nIF1bIHNjb3BlLmRlZmF1bHRVbml0IF0gLyBzY29wZS5kZWZhdWx0RFBJO1xuXG5cdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdHNjYWxlID0gdW5pdENvbnZlcnNpb25bIHRoZVVuaXQgXVsgc2NvcGUuZGVmYXVsdFVuaXQgXTtcblxuXHRcdFx0XHRpZiAoIHNjYWxlIDwgMCApIHtcblxuXHRcdFx0XHRcdC8vIENvbnZlcnNpb24gc2NhbGUgdG8gcGl4ZWxzXG5cblx0XHRcdFx0XHRzY2FsZSA9IHVuaXRDb252ZXJzaW9uWyB0aGVVbml0IF1bICdpbicgXSAqIHNjb3BlLmRlZmF1bHREUEk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBzY2FsZSAqIHBhcnNlRmxvYXQoIHN0cmluZyApO1xuXG5cdFx0fVxuXG5cdFx0Ly8gVHJhbnNmb3Jtc1xuXG5cdFx0ZnVuY3Rpb24gZ2V0Tm9kZVRyYW5zZm9ybSggbm9kZSApIHtcblxuXHRcdFx0aWYgKCAhICggbm9kZS5oYXNBdHRyaWJ1dGUoICd0cmFuc2Zvcm0nICkgfHwgKCBub2RlLm5vZGVOYW1lID09PSAndXNlJyAmJiAoIG5vZGUuaGFzQXR0cmlidXRlKCAneCcgKSB8fCBub2RlLmhhc0F0dHJpYnV0ZSggJ3knICkgKSApICkgKSB7XG5cblx0XHRcdFx0cmV0dXJuIG51bGw7XG5cblx0XHRcdH1cblxuXHRcdFx0dmFyIHRyYW5zZm9ybSA9IHBhcnNlTm9kZVRyYW5zZm9ybSggbm9kZSApO1xuXG5cdFx0XHRpZiAoIHRyYW5zZm9ybVN0YWNrLmxlbmd0aCA+IDAgKSB7XG5cblx0XHRcdFx0dHJhbnNmb3JtLnByZW11bHRpcGx5KCB0cmFuc2Zvcm1TdGFja1sgdHJhbnNmb3JtU3RhY2subGVuZ3RoIC0gMSBdICk7XG5cblx0XHRcdH1cblxuXHRcdFx0Y3VycmVudFRyYW5zZm9ybS5jb3B5KCB0cmFuc2Zvcm0gKTtcblx0XHRcdHRyYW5zZm9ybVN0YWNrLnB1c2goIHRyYW5zZm9ybSApO1xuXG5cdFx0XHRyZXR1cm4gdHJhbnNmb3JtO1xuXG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gcGFyc2VOb2RlVHJhbnNmb3JtKCBub2RlICkge1xuXG5cdFx0XHR2YXIgdHJhbnNmb3JtID0gbmV3IE1hdHJpeDMoKTtcblx0XHRcdHZhciBjdXJyZW50VHJhbnNmb3JtID0gdGVtcFRyYW5zZm9ybTA7XG5cblx0XHRcdGlmICggbm9kZS5ub2RlTmFtZSA9PT0gJ3VzZScgJiYgKCBub2RlLmhhc0F0dHJpYnV0ZSggJ3gnICkgfHwgbm9kZS5oYXNBdHRyaWJ1dGUoICd5JyApICkgKSB7XG5cblx0XHRcdFx0dmFyIHR4ID0gcGFyc2VGbG9hdFdpdGhVbml0cyggbm9kZS5nZXRBdHRyaWJ1dGUoICd4JyApICk7XG5cdFx0XHRcdHZhciB0eSA9IHBhcnNlRmxvYXRXaXRoVW5pdHMoIG5vZGUuZ2V0QXR0cmlidXRlKCAneScgKSApO1xuXG5cdFx0XHRcdHRyYW5zZm9ybS50cmFuc2xhdGUoIHR4LCB0eSApO1xuXG5cdFx0XHR9XG5cblx0XHRcdGlmICggbm9kZS5oYXNBdHRyaWJ1dGUoICd0cmFuc2Zvcm0nICkgKSB7XG5cblx0XHRcdFx0dmFyIHRyYW5zZm9ybXNUZXh0cyA9IG5vZGUuZ2V0QXR0cmlidXRlKCAndHJhbnNmb3JtJyApLnNwbGl0KCAnKScgKTtcblxuXHRcdFx0XHRmb3IgKCB2YXIgdEluZGV4ID0gdHJhbnNmb3Jtc1RleHRzLmxlbmd0aCAtIDE7IHRJbmRleCA+PSAwOyB0SW5kZXggLS0gKSB7XG5cblx0XHRcdFx0XHR2YXIgdHJhbnNmb3JtVGV4dCA9IHRyYW5zZm9ybXNUZXh0c1sgdEluZGV4IF0udHJpbSgpO1xuXG5cdFx0XHRcdFx0aWYgKCB0cmFuc2Zvcm1UZXh0ID09PSAnJyApIGNvbnRpbnVlO1xuXG5cdFx0XHRcdFx0dmFyIG9wZW5QYXJQb3MgPSB0cmFuc2Zvcm1UZXh0LmluZGV4T2YoICcoJyApO1xuXHRcdFx0XHRcdHZhciBjbG9zZVBhclBvcyA9IHRyYW5zZm9ybVRleHQubGVuZ3RoO1xuXG5cdFx0XHRcdFx0aWYgKCBvcGVuUGFyUG9zID4gMCAmJiBvcGVuUGFyUG9zIDwgY2xvc2VQYXJQb3MgKSB7XG5cblx0XHRcdFx0XHRcdHZhciB0cmFuc2Zvcm1UeXBlID0gdHJhbnNmb3JtVGV4dC5zdWJzdHIoIDAsIG9wZW5QYXJQb3MgKTtcblxuXHRcdFx0XHRcdFx0dmFyIGFycmF5ID0gcGFyc2VGbG9hdHMoIHRyYW5zZm9ybVRleHQuc3Vic3RyKCBvcGVuUGFyUG9zICsgMSwgY2xvc2VQYXJQb3MgLSBvcGVuUGFyUG9zIC0gMSApICk7XG5cblx0XHRcdFx0XHRcdGN1cnJlbnRUcmFuc2Zvcm0uaWRlbnRpdHkoKTtcblxuXHRcdFx0XHRcdFx0c3dpdGNoICggdHJhbnNmb3JtVHlwZSApIHtcblxuXHRcdFx0XHRcdFx0XHRjYXNlICd0cmFuc2xhdGUnOlxuXG5cdFx0XHRcdFx0XHRcdFx0aWYgKCBhcnJheS5sZW5ndGggPj0gMSApIHtcblxuXHRcdFx0XHRcdFx0XHRcdFx0dmFyIHR4ID0gYXJyYXlbIDAgXTtcblx0XHRcdFx0XHRcdFx0XHRcdHZhciB0eSA9IHR4O1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoIGFycmF5Lmxlbmd0aCA+PSAyICkge1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHR5ID0gYXJyYXlbIDEgXTtcblxuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdFx0XHRjdXJyZW50VHJhbnNmb3JtLnRyYW5zbGF0ZSggdHgsIHR5ICk7XG5cblx0XHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdFx0XHRjYXNlICdyb3RhdGUnOlxuXG5cdFx0XHRcdFx0XHRcdFx0aWYgKCBhcnJheS5sZW5ndGggPj0gMSApIHtcblxuXHRcdFx0XHRcdFx0XHRcdFx0dmFyIGFuZ2xlID0gMDtcblx0XHRcdFx0XHRcdFx0XHRcdHZhciBjeCA9IDA7XG5cdFx0XHRcdFx0XHRcdFx0XHR2YXIgY3kgPSAwO1xuXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBBbmdsZVxuXHRcdFx0XHRcdFx0XHRcdFx0YW5nbGUgPSAtIGFycmF5WyAwIF0gKiBNYXRoLlBJIC8gMTgwO1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoIGFycmF5Lmxlbmd0aCA+PSAzICkge1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vIENlbnRlciB4LCB5XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGN4ID0gYXJyYXlbIDEgXTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y3kgPSBhcnJheVsgMiBdO1xuXG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0XHRcdC8vIFJvdGF0ZSBhcm91bmQgY2VudGVyIChjeCwgY3kpXG5cdFx0XHRcdFx0XHRcdFx0XHR0ZW1wVHJhbnNmb3JtMS5pZGVudGl0eSgpLnRyYW5zbGF0ZSggLSBjeCwgLSBjeSApO1xuXHRcdFx0XHRcdFx0XHRcdFx0dGVtcFRyYW5zZm9ybTIuaWRlbnRpdHkoKS5yb3RhdGUoIGFuZ2xlICk7XG5cdFx0XHRcdFx0XHRcdFx0XHR0ZW1wVHJhbnNmb3JtMy5tdWx0aXBseU1hdHJpY2VzKCB0ZW1wVHJhbnNmb3JtMiwgdGVtcFRyYW5zZm9ybTEgKTtcblx0XHRcdFx0XHRcdFx0XHRcdHRlbXBUcmFuc2Zvcm0xLmlkZW50aXR5KCkudHJhbnNsYXRlKCBjeCwgY3kgKTtcblx0XHRcdFx0XHRcdFx0XHRcdGN1cnJlbnRUcmFuc2Zvcm0ubXVsdGlwbHlNYXRyaWNlcyggdGVtcFRyYW5zZm9ybTEsIHRlbXBUcmFuc2Zvcm0zICk7XG5cblx0XHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdFx0XHRjYXNlICdzY2FsZSc6XG5cblx0XHRcdFx0XHRcdFx0XHRpZiAoIGFycmF5Lmxlbmd0aCA+PSAxICkge1xuXG5cdFx0XHRcdFx0XHRcdFx0XHR2YXIgc2NhbGVYID0gYXJyYXlbIDAgXTtcblx0XHRcdFx0XHRcdFx0XHRcdHZhciBzY2FsZVkgPSBzY2FsZVg7XG5cblx0XHRcdFx0XHRcdFx0XHRcdGlmICggYXJyYXkubGVuZ3RoID49IDIgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0c2NhbGVZID0gYXJyYXlbIDEgXTtcblxuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdFx0XHRjdXJyZW50VHJhbnNmb3JtLnNjYWxlKCBzY2FsZVgsIHNjYWxlWSApO1xuXG5cdFx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRcdFx0Y2FzZSAnc2tld1gnOlxuXG5cdFx0XHRcdFx0XHRcdFx0aWYgKCBhcnJheS5sZW5ndGggPT09IDEgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHRcdGN1cnJlbnRUcmFuc2Zvcm0uc2V0KFxuXHRcdFx0XHRcdFx0XHRcdFx0XHQxLCBNYXRoLnRhbiggYXJyYXlbIDAgXSAqIE1hdGguUEkgLyAxODAgKSwgMCxcblx0XHRcdFx0XHRcdFx0XHRcdFx0MCwgMSwgMCxcblx0XHRcdFx0XHRcdFx0XHRcdFx0MCwgMCwgMVxuXHRcdFx0XHRcdFx0XHRcdFx0KTtcblxuXHRcdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0XHRcdGNhc2UgJ3NrZXdZJzpcblxuXHRcdFx0XHRcdFx0XHRcdGlmICggYXJyYXkubGVuZ3RoID09PSAxICkge1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRjdXJyZW50VHJhbnNmb3JtLnNldChcblx0XHRcdFx0XHRcdFx0XHRcdFx0MSwgMCwgMCxcblx0XHRcdFx0XHRcdFx0XHRcdFx0TWF0aC50YW4oIGFycmF5WyAwIF0gKiBNYXRoLlBJIC8gMTgwICksIDEsIDAsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdDAsIDAsIDFcblx0XHRcdFx0XHRcdFx0XHRcdCk7XG5cblx0XHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdFx0XHRjYXNlICdtYXRyaXgnOlxuXG5cdFx0XHRcdFx0XHRcdFx0aWYgKCBhcnJheS5sZW5ndGggPT09IDYgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHRcdGN1cnJlbnRUcmFuc2Zvcm0uc2V0KFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRhcnJheVsgMCBdLCBhcnJheVsgMiBdLCBhcnJheVsgNCBdLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRhcnJheVsgMSBdLCBhcnJheVsgMyBdLCBhcnJheVsgNSBdLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHQwLCAwLCAxXG5cdFx0XHRcdFx0XHRcdFx0XHQpO1xuXG5cdFx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdHRyYW5zZm9ybS5wcmVtdWx0aXBseSggY3VycmVudFRyYW5zZm9ybSApO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gdHJhbnNmb3JtO1xuXG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gdHJhbnNmb3JtUGF0aCggcGF0aCwgbSApIHtcblxuXHRcdFx0ZnVuY3Rpb24gdHJhbnNmVmVjMiggdjIgKSB7XG5cblx0XHRcdFx0dGVtcFYzLnNldCggdjIueCwgdjIueSwgMSApLmFwcGx5TWF0cml4MyggbSApO1xuXG5cdFx0XHRcdHYyLnNldCggdGVtcFYzLngsIHRlbXBWMy55ICk7XG5cblx0XHRcdH1cblxuXHRcdFx0dmFyIGlzUm90YXRlZCA9IGlzVHJhbnNmb3JtUm90YXRlZCggbSApO1xuXG5cdFx0XHR2YXIgc3ViUGF0aHMgPSBwYXRoLnN1YlBhdGhzO1xuXG5cdFx0XHRmb3IgKCB2YXIgaSA9IDAsIG4gPSBzdWJQYXRocy5sZW5ndGg7IGkgPCBuOyBpICsrICkge1xuXG5cdFx0XHRcdHZhciBzdWJQYXRoID0gc3ViUGF0aHNbIGkgXTtcblx0XHRcdFx0dmFyIGN1cnZlcyA9IHN1YlBhdGguY3VydmVzO1xuXG5cdFx0XHRcdGZvciAoIHZhciBqID0gMDsgaiA8IGN1cnZlcy5sZW5ndGg7IGogKysgKSB7XG5cblx0XHRcdFx0XHR2YXIgY3VydmUgPSBjdXJ2ZXNbIGogXTtcblxuXHRcdFx0XHRcdGlmICggY3VydmUuaXNMaW5lQ3VydmUgKSB7XG5cblx0XHRcdFx0XHRcdHRyYW5zZlZlYzIoIGN1cnZlLnYxICk7XG5cdFx0XHRcdFx0XHR0cmFuc2ZWZWMyKCBjdXJ2ZS52MiApO1xuXG5cdFx0XHRcdFx0fSBlbHNlIGlmICggY3VydmUuaXNDdWJpY0JlemllckN1cnZlICkge1xuXG5cdFx0XHRcdFx0XHR0cmFuc2ZWZWMyKCBjdXJ2ZS52MCApO1xuXHRcdFx0XHRcdFx0dHJhbnNmVmVjMiggY3VydmUudjEgKTtcblx0XHRcdFx0XHRcdHRyYW5zZlZlYzIoIGN1cnZlLnYyICk7XG5cdFx0XHRcdFx0XHR0cmFuc2ZWZWMyKCBjdXJ2ZS52MyApO1xuXG5cdFx0XHRcdFx0fSBlbHNlIGlmICggY3VydmUuaXNRdWFkcmF0aWNCZXppZXJDdXJ2ZSApIHtcblxuXHRcdFx0XHRcdFx0dHJhbnNmVmVjMiggY3VydmUudjAgKTtcblx0XHRcdFx0XHRcdHRyYW5zZlZlYzIoIGN1cnZlLnYxICk7XG5cdFx0XHRcdFx0XHR0cmFuc2ZWZWMyKCBjdXJ2ZS52MiApO1xuXG5cdFx0XHRcdFx0fSBlbHNlIGlmICggY3VydmUuaXNFbGxpcHNlQ3VydmUgKSB7XG5cblx0XHRcdFx0XHRcdGlmICggaXNSb3RhdGVkICkge1xuXG5cdFx0XHRcdFx0XHRcdGNvbnNvbGUud2FybiggJ1NWR0xvYWRlcjogRWxsaXB0aWMgYXJjIG9yIGVsbGlwc2Ugcm90YXRpb24gb3Igc2tld2luZyBpcyBub3QgaW1wbGVtZW50ZWQuJyApO1xuXG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdHRlbXBWMi5zZXQoIGN1cnZlLmFYLCBjdXJ2ZS5hWSApO1xuXHRcdFx0XHRcdFx0dHJhbnNmVmVjMiggdGVtcFYyICk7XG5cdFx0XHRcdFx0XHRjdXJ2ZS5hWCA9IHRlbXBWMi54O1xuXHRcdFx0XHRcdFx0Y3VydmUuYVkgPSB0ZW1wVjIueTtcblxuXHRcdFx0XHRcdFx0Y3VydmUueFJhZGl1cyAqPSBnZXRUcmFuc2Zvcm1TY2FsZVgoIG0gKTtcblx0XHRcdFx0XHRcdGN1cnZlLnlSYWRpdXMgKj0gZ2V0VHJhbnNmb3JtU2NhbGVZKCBtICk7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9XG5cblx0XHR9XG5cblx0XHRmdW5jdGlvbiBpc1RyYW5zZm9ybVJvdGF0ZWQoIG0gKSB7XG5cblx0XHRcdHJldHVybiBtLmVsZW1lbnRzWyAxIF0gIT09IDAgfHwgbS5lbGVtZW50c1sgMyBdICE9PSAwO1xuXG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gZ2V0VHJhbnNmb3JtU2NhbGVYKCBtICkge1xuXG5cdFx0XHR2YXIgdGUgPSBtLmVsZW1lbnRzO1xuXHRcdFx0cmV0dXJuIE1hdGguc3FydCggdGVbIDAgXSAqIHRlWyAwIF0gKyB0ZVsgMSBdICogdGVbIDEgXSApO1xuXG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gZ2V0VHJhbnNmb3JtU2NhbGVZKCBtICkge1xuXG5cdFx0XHR2YXIgdGUgPSBtLmVsZW1lbnRzO1xuXHRcdFx0cmV0dXJuIE1hdGguc3FydCggdGVbIDMgXSAqIHRlWyAzIF0gKyB0ZVsgNCBdICogdGVbIDQgXSApO1xuXG5cdFx0fVxuXG5cdFx0Ly9cblxuXHRcdHZhciBwYXRocyA9IFtdO1xuXHRcdHZhciBzdHlsZXNoZWV0cyA9IHt9O1xuXG5cdFx0dmFyIHRyYW5zZm9ybVN0YWNrID0gW107XG5cblx0XHR2YXIgdGVtcFRyYW5zZm9ybTAgPSBuZXcgTWF0cml4MygpO1xuXHRcdHZhciB0ZW1wVHJhbnNmb3JtMSA9IG5ldyBNYXRyaXgzKCk7XG5cdFx0dmFyIHRlbXBUcmFuc2Zvcm0yID0gbmV3IE1hdHJpeDMoKTtcblx0XHR2YXIgdGVtcFRyYW5zZm9ybTMgPSBuZXcgTWF0cml4MygpO1xuXHRcdHZhciB0ZW1wVjIgPSBuZXcgVmVjdG9yMigpO1xuXHRcdHZhciB0ZW1wVjMgPSBuZXcgVmVjdG9yMygpO1xuXG5cdFx0dmFyIGN1cnJlbnRUcmFuc2Zvcm0gPSBuZXcgTWF0cml4MygpO1xuXG5cdFx0dmFyIHhtbCA9IG5ldyBET01QYXJzZXIoKS5wYXJzZUZyb21TdHJpbmcoIHRleHQsICdpbWFnZS9zdmcreG1sJyApOyAvLyBhcHBsaWNhdGlvbi94bWxcblxuXHRcdHBhcnNlTm9kZSggeG1sLmRvY3VtZW50RWxlbWVudCwge1xuXHRcdFx0ZmlsbDogJyMwMDAnLFxuXHRcdFx0ZmlsbE9wYWNpdHk6IDEsXG5cdFx0XHRzdHJva2VPcGFjaXR5OiAxLFxuXHRcdFx0c3Ryb2tlV2lkdGg6IDEsXG5cdFx0XHRzdHJva2VMaW5lSm9pbjogJ21pdGVyJyxcblx0XHRcdHN0cm9rZUxpbmVDYXA6ICdidXR0Jyxcblx0XHRcdHN0cm9rZU1pdGVyTGltaXQ6IDRcblx0XHR9ICk7XG5cblx0XHR2YXIgZGF0YSA9IHsgcGF0aHM6IHBhdGhzLCB4bWw6IHhtbC5kb2N1bWVudEVsZW1lbnQgfTtcblxuXHRcdC8vIGNvbnNvbGUubG9nKCBwYXRocyApO1xuXHRcdHJldHVybiBkYXRhO1xuXG5cdH1cblxufSApO1xuXG5TVkdMb2FkZXIuZ2V0U3Ryb2tlU3R5bGUgPSBmdW5jdGlvbiAoIHdpZHRoLCBjb2xvciwgbGluZUpvaW4sIGxpbmVDYXAsIG1pdGVyTGltaXQgKSB7XG5cblx0Ly8gUGFyYW0gd2lkdGg6IFN0cm9rZSB3aWR0aFxuXHQvLyBQYXJhbSBjb2xvcjogQXMgcmV0dXJuZWQgYnkgVEhSRUUuQ29sb3IuZ2V0U3R5bGUoKVxuXHQvLyBQYXJhbSBsaW5lSm9pbjogT25lIG9mIFwicm91bmRcIiwgXCJiZXZlbFwiLCBcIm1pdGVyXCIgb3IgXCJtaXRlci1saW1pdFwiXG5cdC8vIFBhcmFtIGxpbmVDYXA6IE9uZSBvZiBcInJvdW5kXCIsIFwic3F1YXJlXCIgb3IgXCJidXR0XCJcblx0Ly8gUGFyYW0gbWl0ZXJMaW1pdDogTWF4aW11bSBqb2luIGxlbmd0aCwgaW4gbXVsdGlwbGVzIG9mIHRoZSBcIndpZHRoXCIgcGFyYW1ldGVyIChqb2luIGlzIHRydW5jYXRlZCBpZiBpdCBleGNlZWRzIHRoYXQgZGlzdGFuY2UpXG5cdC8vIFJldHVybnMgc3R5bGUgb2JqZWN0XG5cblx0d2lkdGggPSB3aWR0aCAhPT0gdW5kZWZpbmVkID8gd2lkdGggOiAxO1xuXHRjb2xvciA9IGNvbG9yICE9PSB1bmRlZmluZWQgPyBjb2xvciA6ICcjMDAwJztcblx0bGluZUpvaW4gPSBsaW5lSm9pbiAhPT0gdW5kZWZpbmVkID8gbGluZUpvaW4gOiAnbWl0ZXInO1xuXHRsaW5lQ2FwID0gbGluZUNhcCAhPT0gdW5kZWZpbmVkID8gbGluZUNhcCA6ICdidXR0Jztcblx0bWl0ZXJMaW1pdCA9IG1pdGVyTGltaXQgIT09IHVuZGVmaW5lZCA/IG1pdGVyTGltaXQgOiA0O1xuXG5cdHJldHVybiB7XG5cdFx0c3Ryb2tlQ29sb3I6IGNvbG9yLFxuXHRcdHN0cm9rZVdpZHRoOiB3aWR0aCxcblx0XHRzdHJva2VMaW5lSm9pbjogbGluZUpvaW4sXG5cdFx0c3Ryb2tlTGluZUNhcDogbGluZUNhcCxcblx0XHRzdHJva2VNaXRlckxpbWl0OiBtaXRlckxpbWl0XG5cdH07XG5cbn07XG5cblNWR0xvYWRlci5wb2ludHNUb1N0cm9rZSA9IGZ1bmN0aW9uICggcG9pbnRzLCBzdHlsZSwgYXJjRGl2aXNpb25zLCBtaW5EaXN0YW5jZSApIHtcblxuXHQvLyBHZW5lcmF0ZXMgYSBzdHJva2Ugd2l0aCBzb21lIHdpdGRoIGFyb3VuZCB0aGUgZ2l2ZW4gcGF0aC5cblx0Ly8gVGhlIHBhdGggY2FuIGJlIG9wZW4gb3IgY2xvc2VkIChsYXN0IHBvaW50IGVxdWFscyB0byBmaXJzdCBwb2ludClcblx0Ly8gUGFyYW0gcG9pbnRzOiBBcnJheSBvZiBWZWN0b3IyRCAodGhlIHBhdGgpLiBNaW5pbXVtIDIgcG9pbnRzLlxuXHQvLyBQYXJhbSBzdHlsZTogT2JqZWN0IHdpdGggU1ZHIHByb3BlcnRpZXMgYXMgcmV0dXJuZWQgYnkgU1ZHTG9hZGVyLmdldFN0cm9rZVN0eWxlKCksIG9yIFNWR0xvYWRlci5wYXJzZSgpIGluIHRoZSBwYXRoLnVzZXJEYXRhLnN0eWxlIG9iamVjdFxuXHQvLyBQYXJhbXMgYXJjRGl2aXNpb25zOiBBcmMgZGl2aXNpb25zIGZvciByb3VuZCBqb2lucyBhbmQgZW5kY2Fwcy4gKE9wdGlvbmFsKVxuXHQvLyBQYXJhbSBtaW5EaXN0YW5jZTogUG9pbnRzIGNsb3NlciB0byB0aGlzIGRpc3RhbmNlIHdpbGwgYmUgbWVyZ2VkLiAoT3B0aW9uYWwpXG5cdC8vIFJldHVybnMgQnVmZmVyR2VvbWV0cnkgd2l0aCBzdHJva2UgdHJpYW5nbGVzIChJbiBwbGFuZSB6ID0gMCkuIFVWIGNvb3JkaW5hdGVzIGFyZSBnZW5lcmF0ZWQgKCd1JyBhbG9uZyBwYXRoLiAndicgYWNyb3NzIGl0LCBmcm9tIGxlZnQgdG8gcmlnaHQpXG5cblx0dmFyIHZlcnRpY2VzID0gW107XG5cdHZhciBub3JtYWxzID0gW107XG5cdHZhciB1dnMgPSBbXTtcblxuXHRpZiAoIFNWR0xvYWRlci5wb2ludHNUb1N0cm9rZVdpdGhCdWZmZXJzKCBwb2ludHMsIHN0eWxlLCBhcmNEaXZpc2lvbnMsIG1pbkRpc3RhbmNlLCB2ZXJ0aWNlcywgbm9ybWFscywgdXZzICkgPT09IDAgKSB7XG5cblx0XHRyZXR1cm4gbnVsbDtcblxuXHR9XG5cblx0dmFyIGdlb21ldHJ5ID0gbmV3IEJ1ZmZlckdlb21ldHJ5KCk7XG5cdGdlb21ldHJ5LnNldEF0dHJpYnV0ZSggJ3Bvc2l0aW9uJywgbmV3IEZsb2F0MzJCdWZmZXJBdHRyaWJ1dGUoIHZlcnRpY2VzLCAzICkgKTtcblx0Z2VvbWV0cnkuc2V0QXR0cmlidXRlKCAnbm9ybWFsJywgbmV3IEZsb2F0MzJCdWZmZXJBdHRyaWJ1dGUoIG5vcm1hbHMsIDMgKSApO1xuXHRnZW9tZXRyeS5zZXRBdHRyaWJ1dGUoICd1dicsIG5ldyBGbG9hdDMyQnVmZmVyQXR0cmlidXRlKCB1dnMsIDIgKSApO1xuXG5cdHJldHVybiBnZW9tZXRyeTtcblxufTtcblxuU1ZHTG9hZGVyLnBvaW50c1RvU3Ryb2tlV2l0aEJ1ZmZlcnMgPSBmdW5jdGlvbiAoKSB7XG5cblx0dmFyIHRlbXBWMl8xID0gbmV3IFZlY3RvcjIoKTtcblx0dmFyIHRlbXBWMl8yID0gbmV3IFZlY3RvcjIoKTtcblx0dmFyIHRlbXBWMl8zID0gbmV3IFZlY3RvcjIoKTtcblx0dmFyIHRlbXBWMl80ID0gbmV3IFZlY3RvcjIoKTtcblx0dmFyIHRlbXBWMl81ID0gbmV3IFZlY3RvcjIoKTtcblx0dmFyIHRlbXBWMl82ID0gbmV3IFZlY3RvcjIoKTtcblx0dmFyIHRlbXBWMl83ID0gbmV3IFZlY3RvcjIoKTtcblx0dmFyIGxhc3RQb2ludEwgPSBuZXcgVmVjdG9yMigpO1xuXHR2YXIgbGFzdFBvaW50UiA9IG5ldyBWZWN0b3IyKCk7XG5cdHZhciBwb2ludDBMID0gbmV3IFZlY3RvcjIoKTtcblx0dmFyIHBvaW50MFIgPSBuZXcgVmVjdG9yMigpO1xuXHR2YXIgY3VycmVudFBvaW50TCA9IG5ldyBWZWN0b3IyKCk7XG5cdHZhciBjdXJyZW50UG9pbnRSID0gbmV3IFZlY3RvcjIoKTtcblx0dmFyIG5leHRQb2ludEwgPSBuZXcgVmVjdG9yMigpO1xuXHR2YXIgbmV4dFBvaW50UiA9IG5ldyBWZWN0b3IyKCk7XG5cdHZhciBpbm5lclBvaW50ID0gbmV3IFZlY3RvcjIoKTtcblx0dmFyIG91dGVyUG9pbnQgPSBuZXcgVmVjdG9yMigpO1xuXG5cdHJldHVybiBmdW5jdGlvbiAoIHBvaW50cywgc3R5bGUsIGFyY0RpdmlzaW9ucywgbWluRGlzdGFuY2UsIHZlcnRpY2VzLCBub3JtYWxzLCB1dnMsIHZlcnRleE9mZnNldCApIHtcblxuXHRcdC8vIFRoaXMgZnVuY3Rpb24gY2FuIGJlIGNhbGxlZCB0byB1cGRhdGUgZXhpc3RpbmcgYXJyYXlzIG9yIGJ1ZmZlcnMuXG5cdFx0Ly8gQWNjZXB0cyBzYW1lIHBhcmFtZXRlcnMgYXMgcG9pbnRzVG9TdHJva2UsIHBsdXMgdGhlIGJ1ZmZlcnMgYW5kIG9wdGlvbmFsIG9mZnNldC5cblx0XHQvLyBQYXJhbSB2ZXJ0ZXhPZmZzZXQ6IE9mZnNldCB2ZXJ0aWNlcyB0byBzdGFydCB3cml0aW5nIGluIHRoZSBidWZmZXJzICgzIGVsZW1lbnRzL3ZlcnRleCBmb3IgdmVydGljZXMgYW5kIG5vcm1hbHMsIGFuZCAyIGVsZW1lbnRzL3ZlcnRleCBmb3IgdXZzKVxuXHRcdC8vIFJldHVybnMgbnVtYmVyIG9mIHdyaXR0ZW4gdmVydGljZXMgLyBub3JtYWxzIC8gdXZzIHBhaXJzXG5cdFx0Ly8gaWYgJ3ZlcnRpY2VzJyBwYXJhbWV0ZXIgaXMgdW5kZWZpbmVkIG5vIHRyaWFuZ2xlcyB3aWxsIGJlIGdlbmVyYXRlZCwgYnV0IHRoZSByZXR1cm5lZCB2ZXJ0aWNlcyBjb3VudCB3aWxsIHN0aWxsIGJlIHZhbGlkICh1c2VmdWwgdG8gcHJlYWxsb2NhdGUgdGhlIGJ1ZmZlcnMpXG5cdFx0Ly8gJ25vcm1hbHMnIGFuZCAndXZzJyBidWZmZXJzIGFyZSBvcHRpb25hbFxuXG5cdFx0YXJjRGl2aXNpb25zID0gYXJjRGl2aXNpb25zICE9PSB1bmRlZmluZWQgPyBhcmNEaXZpc2lvbnMgOiAxMjtcblx0XHRtaW5EaXN0YW5jZSA9IG1pbkRpc3RhbmNlICE9PSB1bmRlZmluZWQgPyBtaW5EaXN0YW5jZSA6IDAuMDAxO1xuXHRcdHZlcnRleE9mZnNldCA9IHZlcnRleE9mZnNldCAhPT0gdW5kZWZpbmVkID8gdmVydGV4T2Zmc2V0IDogMDtcblxuXHRcdC8vIEZpcnN0IGVuc3VyZSB0aGVyZSBhcmUgbm8gZHVwbGljYXRlZCBwb2ludHNcblx0XHRwb2ludHMgPSByZW1vdmVEdXBsaWNhdGVkUG9pbnRzKCBwb2ludHMgKTtcblxuXHRcdHZhciBudW1Qb2ludHMgPSBwb2ludHMubGVuZ3RoO1xuXG5cdFx0aWYgKCBudW1Qb2ludHMgPCAyICkgcmV0dXJuIDA7XG5cblx0XHR2YXIgaXNDbG9zZWQgPSBwb2ludHNbIDAgXS5lcXVhbHMoIHBvaW50c1sgbnVtUG9pbnRzIC0gMSBdICk7XG5cblx0XHR2YXIgY3VycmVudFBvaW50O1xuXHRcdHZhciBwcmV2aW91c1BvaW50ID0gcG9pbnRzWyAwIF07XG5cdFx0dmFyIG5leHRQb2ludDtcblxuXHRcdHZhciBzdHJva2VXaWR0aDIgPSBzdHlsZS5zdHJva2VXaWR0aCAvIDI7XG5cblx0XHR2YXIgZGVsdGFVID0gMSAvICggbnVtUG9pbnRzIC0gMSApO1xuXHRcdHZhciB1MCA9IDA7XG5cblx0XHR2YXIgaW5uZXJTaWRlTW9kaWZpZWQ7XG5cdFx0dmFyIGpvaW5Jc09uTGVmdFNpZGU7XG5cdFx0dmFyIGlzTWl0ZXI7XG5cdFx0dmFyIGluaXRpYWxKb2luSXNPbkxlZnRTaWRlID0gZmFsc2U7XG5cblx0XHR2YXIgbnVtVmVydGljZXMgPSAwO1xuXHRcdHZhciBjdXJyZW50Q29vcmRpbmF0ZSA9IHZlcnRleE9mZnNldCAqIDM7XG5cdFx0dmFyIGN1cnJlbnRDb29yZGluYXRlVVYgPSB2ZXJ0ZXhPZmZzZXQgKiAyO1xuXG5cdFx0Ly8gR2V0IGluaXRpYWwgbGVmdCBhbmQgcmlnaHQgc3Ryb2tlIHBvaW50c1xuXHRcdGdldE5vcm1hbCggcG9pbnRzWyAwIF0sIHBvaW50c1sgMSBdLCB0ZW1wVjJfMSApLm11bHRpcGx5U2NhbGFyKCBzdHJva2VXaWR0aDIgKTtcblx0XHRsYXN0UG9pbnRMLmNvcHkoIHBvaW50c1sgMCBdICkuc3ViKCB0ZW1wVjJfMSApO1xuXHRcdGxhc3RQb2ludFIuY29weSggcG9pbnRzWyAwIF0gKS5hZGQoIHRlbXBWMl8xICk7XG5cdFx0cG9pbnQwTC5jb3B5KCBsYXN0UG9pbnRMICk7XG5cdFx0cG9pbnQwUi5jb3B5KCBsYXN0UG9pbnRSICk7XG5cblx0XHRmb3IgKCB2YXIgaVBvaW50ID0gMTsgaVBvaW50IDwgbnVtUG9pbnRzOyBpUG9pbnQgKysgKSB7XG5cblx0XHRcdGN1cnJlbnRQb2ludCA9IHBvaW50c1sgaVBvaW50IF07XG5cblx0XHRcdC8vIEdldCBuZXh0IHBvaW50XG5cdFx0XHRpZiAoIGlQb2ludCA9PT0gbnVtUG9pbnRzIC0gMSApIHtcblxuXHRcdFx0XHRpZiAoIGlzQ2xvc2VkICkge1xuXG5cdFx0XHRcdFx0Ly8gU2tpcCBkdXBsaWNhdGVkIGluaXRpYWwgcG9pbnRcblx0XHRcdFx0XHRuZXh0UG9pbnQgPSBwb2ludHNbIDEgXTtcblxuXHRcdFx0XHR9IGVsc2UgbmV4dFBvaW50ID0gdW5kZWZpbmVkO1xuXG5cdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdG5leHRQb2ludCA9IHBvaW50c1sgaVBvaW50ICsgMSBdO1xuXG5cdFx0XHR9XG5cblx0XHRcdC8vIE5vcm1hbCBvZiBwcmV2aW91cyBzZWdtZW50IGluIHRlbXBWMl8xXG5cdFx0XHR2YXIgbm9ybWFsMSA9IHRlbXBWMl8xO1xuXHRcdFx0Z2V0Tm9ybWFsKCBwcmV2aW91c1BvaW50LCBjdXJyZW50UG9pbnQsIG5vcm1hbDEgKTtcblxuXHRcdFx0dGVtcFYyXzMuY29weSggbm9ybWFsMSApLm11bHRpcGx5U2NhbGFyKCBzdHJva2VXaWR0aDIgKTtcblx0XHRcdGN1cnJlbnRQb2ludEwuY29weSggY3VycmVudFBvaW50ICkuc3ViKCB0ZW1wVjJfMyApO1xuXHRcdFx0Y3VycmVudFBvaW50Ui5jb3B5KCBjdXJyZW50UG9pbnQgKS5hZGQoIHRlbXBWMl8zICk7XG5cblx0XHRcdHZhciB1MSA9IHUwICsgZGVsdGFVO1xuXG5cdFx0XHRpbm5lclNpZGVNb2RpZmllZCA9IGZhbHNlO1xuXG5cdFx0XHRpZiAoIG5leHRQb2ludCAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRcdC8vIE5vcm1hbCBvZiBuZXh0IHNlZ21lbnQgaW4gdGVtcFYyXzJcblx0XHRcdFx0Z2V0Tm9ybWFsKCBjdXJyZW50UG9pbnQsIG5leHRQb2ludCwgdGVtcFYyXzIgKTtcblxuXHRcdFx0XHR0ZW1wVjJfMy5jb3B5KCB0ZW1wVjJfMiApLm11bHRpcGx5U2NhbGFyKCBzdHJva2VXaWR0aDIgKTtcblx0XHRcdFx0bmV4dFBvaW50TC5jb3B5KCBjdXJyZW50UG9pbnQgKS5zdWIoIHRlbXBWMl8zICk7XG5cdFx0XHRcdG5leHRQb2ludFIuY29weSggY3VycmVudFBvaW50ICkuYWRkKCB0ZW1wVjJfMyApO1xuXG5cdFx0XHRcdGpvaW5Jc09uTGVmdFNpZGUgPSB0cnVlO1xuXHRcdFx0XHR0ZW1wVjJfMy5zdWJWZWN0b3JzKCBuZXh0UG9pbnQsIHByZXZpb3VzUG9pbnQgKTtcblx0XHRcdFx0aWYgKCBub3JtYWwxLmRvdCggdGVtcFYyXzMgKSA8IDAgKSB7XG5cblx0XHRcdFx0XHRqb2luSXNPbkxlZnRTaWRlID0gZmFsc2U7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmICggaVBvaW50ID09PSAxICkgaW5pdGlhbEpvaW5Jc09uTGVmdFNpZGUgPSBqb2luSXNPbkxlZnRTaWRlO1xuXG5cdFx0XHRcdHRlbXBWMl8zLnN1YlZlY3RvcnMoIG5leHRQb2ludCwgY3VycmVudFBvaW50ICk7XG5cdFx0XHRcdHRlbXBWMl8zLm5vcm1hbGl6ZSgpO1xuXHRcdFx0XHR2YXIgZG90ID0gTWF0aC5hYnMoIG5vcm1hbDEuZG90KCB0ZW1wVjJfMyApICk7XG5cblx0XHRcdFx0Ly8gSWYgcGF0aCBpcyBzdHJhaWdodCwgZG9uJ3QgY3JlYXRlIGpvaW5cblx0XHRcdFx0aWYgKCBkb3QgIT09IDAgKSB7XG5cblx0XHRcdFx0XHQvLyBDb21wdXRlIGlubmVyIGFuZCBvdXRlciBzZWdtZW50IGludGVyc2VjdGlvbnNcblx0XHRcdFx0XHR2YXIgbWl0ZXJTaWRlID0gc3Ryb2tlV2lkdGgyIC8gZG90O1xuXHRcdFx0XHRcdHRlbXBWMl8zLm11bHRpcGx5U2NhbGFyKCAtIG1pdGVyU2lkZSApO1xuXHRcdFx0XHRcdHRlbXBWMl80LnN1YlZlY3RvcnMoIGN1cnJlbnRQb2ludCwgcHJldmlvdXNQb2ludCApO1xuXHRcdFx0XHRcdHRlbXBWMl81LmNvcHkoIHRlbXBWMl80ICkuc2V0TGVuZ3RoKCBtaXRlclNpZGUgKS5hZGQoIHRlbXBWMl8zICk7XG5cdFx0XHRcdFx0aW5uZXJQb2ludC5jb3B5KCB0ZW1wVjJfNSApLm5lZ2F0ZSgpO1xuXHRcdFx0XHRcdHZhciBtaXRlckxlbmd0aDIgPSB0ZW1wVjJfNS5sZW5ndGgoKTtcblx0XHRcdFx0XHR2YXIgc2VnbWVudExlbmd0aFByZXYgPSB0ZW1wVjJfNC5sZW5ndGgoKTtcblx0XHRcdFx0XHR0ZW1wVjJfNC5kaXZpZGVTY2FsYXIoIHNlZ21lbnRMZW5ndGhQcmV2ICk7XG5cdFx0XHRcdFx0dGVtcFYyXzYuc3ViVmVjdG9ycyggbmV4dFBvaW50LCBjdXJyZW50UG9pbnQgKTtcblx0XHRcdFx0XHR2YXIgc2VnbWVudExlbmd0aE5leHQgPSB0ZW1wVjJfNi5sZW5ndGgoKTtcblx0XHRcdFx0XHR0ZW1wVjJfNi5kaXZpZGVTY2FsYXIoIHNlZ21lbnRMZW5ndGhOZXh0ICk7XG5cdFx0XHRcdFx0Ly8gQ2hlY2sgdGhhdCBwcmV2aW91cyBhbmQgbmV4dCBzZWdtZW50cyBkb2Vzbid0IG92ZXJsYXAgd2l0aCB0aGUgaW5uZXJQb2ludCBvZiBpbnRlcnNlY3Rpb25cblx0XHRcdFx0XHRpZiAoIHRlbXBWMl80LmRvdCggaW5uZXJQb2ludCApIDwgc2VnbWVudExlbmd0aFByZXYgJiYgdGVtcFYyXzYuZG90KCBpbm5lclBvaW50ICkgPCBzZWdtZW50TGVuZ3RoTmV4dCApIHtcblxuXHRcdFx0XHRcdFx0aW5uZXJTaWRlTW9kaWZpZWQgPSB0cnVlO1xuXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0b3V0ZXJQb2ludC5jb3B5KCB0ZW1wVjJfNSApLmFkZCggY3VycmVudFBvaW50ICk7XG5cdFx0XHRcdFx0aW5uZXJQb2ludC5hZGQoIGN1cnJlbnRQb2ludCApO1xuXG5cdFx0XHRcdFx0aXNNaXRlciA9IGZhbHNlO1xuXG5cdFx0XHRcdFx0aWYgKCBpbm5lclNpZGVNb2RpZmllZCApIHtcblxuXHRcdFx0XHRcdFx0aWYgKCBqb2luSXNPbkxlZnRTaWRlICkge1xuXG5cdFx0XHRcdFx0XHRcdG5leHRQb2ludFIuY29weSggaW5uZXJQb2ludCApO1xuXHRcdFx0XHRcdFx0XHRjdXJyZW50UG9pbnRSLmNvcHkoIGlubmVyUG9pbnQgKTtcblxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdFx0XHRuZXh0UG9pbnRMLmNvcHkoIGlubmVyUG9pbnQgKTtcblx0XHRcdFx0XHRcdFx0Y3VycmVudFBvaW50TC5jb3B5KCBpbm5lclBvaW50ICk7XG5cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRcdC8vIFRoZSBzZWdtZW50IHRyaWFuZ2xlcyBhcmUgZ2VuZXJhdGVkIGhlcmUgaWYgdGhlcmUgd2FzIG92ZXJsYXBwaW5nXG5cblx0XHRcdFx0XHRcdG1ha2VTZWdtZW50VHJpYW5nbGVzKCk7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRzd2l0Y2ggKCBzdHlsZS5zdHJva2VMaW5lSm9pbiApIHtcblxuXHRcdFx0XHRcdFx0Y2FzZSAnYmV2ZWwnOlxuXG5cdFx0XHRcdFx0XHRcdG1ha2VTZWdtZW50V2l0aEJldmVsSm9pbiggam9pbklzT25MZWZ0U2lkZSwgaW5uZXJTaWRlTW9kaWZpZWQsIHUxICk7XG5cblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRcdGNhc2UgJ3JvdW5kJzpcblxuXHRcdFx0XHRcdFx0XHQvLyBTZWdtZW50IHRyaWFuZ2xlc1xuXG5cdFx0XHRcdFx0XHRcdGNyZWF0ZVNlZ21lbnRUcmlhbmdsZXNXaXRoTWlkZGxlU2VjdGlvbiggam9pbklzT25MZWZ0U2lkZSwgaW5uZXJTaWRlTW9kaWZpZWQgKTtcblxuXHRcdFx0XHRcdFx0XHQvLyBKb2luIHRyaWFuZ2xlc1xuXG5cdFx0XHRcdFx0XHRcdGlmICggam9pbklzT25MZWZ0U2lkZSApIHtcblxuXHRcdFx0XHRcdFx0XHRcdG1ha2VDaXJjdWxhclNlY3RvciggY3VycmVudFBvaW50LCBjdXJyZW50UG9pbnRMLCBuZXh0UG9pbnRMLCB1MSwgMCApO1xuXG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRcdFx0XHRtYWtlQ2lyY3VsYXJTZWN0b3IoIGN1cnJlbnRQb2ludCwgbmV4dFBvaW50UiwgY3VycmVudFBvaW50UiwgdTEsIDEgKTtcblxuXHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRcdGNhc2UgJ21pdGVyJzpcblx0XHRcdFx0XHRcdGNhc2UgJ21pdGVyLWNsaXAnOlxuXHRcdFx0XHRcdFx0ZGVmYXVsdDpcblxuXHRcdFx0XHRcdFx0XHR2YXIgbWl0ZXJGcmFjdGlvbiA9ICggc3Ryb2tlV2lkdGgyICogc3R5bGUuc3Ryb2tlTWl0ZXJMaW1pdCApIC8gbWl0ZXJMZW5ndGgyO1xuXG5cdFx0XHRcdFx0XHRcdGlmICggbWl0ZXJGcmFjdGlvbiA8IDEgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHQvLyBUaGUgam9pbiBtaXRlciBsZW5ndGggZXhjZWVkcyB0aGUgbWl0ZXIgbGltaXRcblxuXHRcdFx0XHRcdFx0XHRcdGlmICggc3R5bGUuc3Ryb2tlTGluZUpvaW4gIT09ICdtaXRlci1jbGlwJyApIHtcblxuXHRcdFx0XHRcdFx0XHRcdFx0bWFrZVNlZ21lbnRXaXRoQmV2ZWxKb2luKCBqb2luSXNPbkxlZnRTaWRlLCBpbm5lclNpZGVNb2RpZmllZCwgdTEgKTtcblx0XHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gU2VnbWVudCB0cmlhbmdsZXNcblxuXHRcdFx0XHRcdFx0XHRcdFx0Y3JlYXRlU2VnbWVudFRyaWFuZ2xlc1dpdGhNaWRkbGVTZWN0aW9uKCBqb2luSXNPbkxlZnRTaWRlLCBpbm5lclNpZGVNb2RpZmllZCApO1xuXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBNaXRlci1jbGlwIGpvaW4gdHJpYW5nbGVzXG5cblx0XHRcdFx0XHRcdFx0XHRcdGlmICggam9pbklzT25MZWZ0U2lkZSApIHtcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHR0ZW1wVjJfNi5zdWJWZWN0b3JzKCBvdXRlclBvaW50LCBjdXJyZW50UG9pbnRMICkubXVsdGlwbHlTY2FsYXIoIG1pdGVyRnJhY3Rpb24gKS5hZGQoIGN1cnJlbnRQb2ludEwgKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0dGVtcFYyXzcuc3ViVmVjdG9ycyggb3V0ZXJQb2ludCwgbmV4dFBvaW50TCApLm11bHRpcGx5U2NhbGFyKCBtaXRlckZyYWN0aW9uICkuYWRkKCBuZXh0UG9pbnRMICk7XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0YWRkVmVydGV4KCBjdXJyZW50UG9pbnRMLCB1MSwgMCApO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRhZGRWZXJ0ZXgoIHRlbXBWMl82LCB1MSwgMCApO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRhZGRWZXJ0ZXgoIGN1cnJlbnRQb2ludCwgdTEsIDAuNSApO1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGFkZFZlcnRleCggY3VycmVudFBvaW50LCB1MSwgMC41ICk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGFkZFZlcnRleCggdGVtcFYyXzYsIHUxLCAwICk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGFkZFZlcnRleCggdGVtcFYyXzcsIHUxLCAwICk7XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0YWRkVmVydGV4KCBjdXJyZW50UG9pbnQsIHUxLCAwLjUgKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0YWRkVmVydGV4KCB0ZW1wVjJfNywgdTEsIDAgKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0YWRkVmVydGV4KCBuZXh0UG9pbnRMLCB1MSwgMCApO1xuXG5cdFx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRlbXBWMl82LnN1YlZlY3RvcnMoIG91dGVyUG9pbnQsIGN1cnJlbnRQb2ludFIgKS5tdWx0aXBseVNjYWxhciggbWl0ZXJGcmFjdGlvbiApLmFkZCggY3VycmVudFBvaW50UiApO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR0ZW1wVjJfNy5zdWJWZWN0b3JzKCBvdXRlclBvaW50LCBuZXh0UG9pbnRSICkubXVsdGlwbHlTY2FsYXIoIG1pdGVyRnJhY3Rpb24gKS5hZGQoIG5leHRQb2ludFIgKTtcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRhZGRWZXJ0ZXgoIGN1cnJlbnRQb2ludFIsIHUxLCAxICk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGFkZFZlcnRleCggdGVtcFYyXzYsIHUxLCAxICk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGFkZFZlcnRleCggY3VycmVudFBvaW50LCB1MSwgMC41ICk7XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0YWRkVmVydGV4KCBjdXJyZW50UG9pbnQsIHUxLCAwLjUgKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0YWRkVmVydGV4KCB0ZW1wVjJfNiwgdTEsIDEgKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0YWRkVmVydGV4KCB0ZW1wVjJfNywgdTEsIDEgKTtcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRhZGRWZXJ0ZXgoIGN1cnJlbnRQb2ludCwgdTEsIDAuNSApO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRhZGRWZXJ0ZXgoIHRlbXBWMl83LCB1MSwgMSApO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRhZGRWZXJ0ZXgoIG5leHRQb2ludFIsIHUxLCAxICk7XG5cblx0XHRcdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0XHRcdFx0Ly8gTWl0ZXIgam9pbiBzZWdtZW50IHRyaWFuZ2xlc1xuXG5cdFx0XHRcdFx0XHRcdFx0aWYgKCBpbm5lclNpZGVNb2RpZmllZCApIHtcblxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gT3B0aW1pemVkIHNlZ21lbnQgKyBqb2luIHRyaWFuZ2xlc1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoIGpvaW5Jc09uTGVmdFNpZGUgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0YWRkVmVydGV4KCBsYXN0UG9pbnRSLCB1MCwgMSApO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRhZGRWZXJ0ZXgoIGxhc3RQb2ludEwsIHUwLCAwICk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGFkZFZlcnRleCggb3V0ZXJQb2ludCwgdTEsIDAgKTtcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRhZGRWZXJ0ZXgoIGxhc3RQb2ludFIsIHUwLCAxICk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGFkZFZlcnRleCggb3V0ZXJQb2ludCwgdTEsIDAgKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0YWRkVmVydGV4KCBpbm5lclBvaW50LCB1MSwgMSApO1xuXG5cdFx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGFkZFZlcnRleCggbGFzdFBvaW50UiwgdTAsIDEgKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0YWRkVmVydGV4KCBsYXN0UG9pbnRMLCB1MCwgMCApO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRhZGRWZXJ0ZXgoIG91dGVyUG9pbnQsIHUxLCAxICk7XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0YWRkVmVydGV4KCBsYXN0UG9pbnRMLCB1MCwgMCApO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRhZGRWZXJ0ZXgoIGlubmVyUG9pbnQsIHUxLCAwICk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGFkZFZlcnRleCggb3V0ZXJQb2ludCwgdTEsIDEgKTtcblxuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXG5cblx0XHRcdFx0XHRcdFx0XHRcdGlmICggam9pbklzT25MZWZ0U2lkZSApIHtcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRuZXh0UG9pbnRMLmNvcHkoIG91dGVyUG9pbnQgKTtcblxuXHRcdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRuZXh0UG9pbnRSLmNvcHkoIG91dGVyUG9pbnQgKTtcblxuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXG5cblx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBBZGQgZXh0cmEgbWl0ZXIgam9pbiB0cmlhbmdsZXNcblxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKCBqb2luSXNPbkxlZnRTaWRlICkge1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGFkZFZlcnRleCggY3VycmVudFBvaW50TCwgdTEsIDAgKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0YWRkVmVydGV4KCBvdXRlclBvaW50LCB1MSwgMCApO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRhZGRWZXJ0ZXgoIGN1cnJlbnRQb2ludCwgdTEsIDAuNSApO1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGFkZFZlcnRleCggY3VycmVudFBvaW50LCB1MSwgMC41ICk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGFkZFZlcnRleCggb3V0ZXJQb2ludCwgdTEsIDAgKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0YWRkVmVydGV4KCBuZXh0UG9pbnRMLCB1MSwgMCApO1xuXG5cdFx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGFkZFZlcnRleCggY3VycmVudFBvaW50UiwgdTEsIDEgKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0YWRkVmVydGV4KCBvdXRlclBvaW50LCB1MSwgMSApO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRhZGRWZXJ0ZXgoIGN1cnJlbnRQb2ludCwgdTEsIDAuNSApO1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGFkZFZlcnRleCggY3VycmVudFBvaW50LCB1MSwgMC41ICk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGFkZFZlcnRleCggb3V0ZXJQb2ludCwgdTEsIDEgKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0YWRkVmVydGV4KCBuZXh0UG9pbnRSLCB1MSwgMSApO1xuXG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0XHRpc01pdGVyID0gdHJ1ZTtcblxuXHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdC8vIFRoZSBzZWdtZW50IHRyaWFuZ2xlcyBhcmUgZ2VuZXJhdGVkIGhlcmUgd2hlbiB0d28gY29uc2VjdXRpdmUgcG9pbnRzIGFyZSBjb2xsaW5lYXJcblxuXHRcdFx0XHRcdG1ha2VTZWdtZW50VHJpYW5nbGVzKCk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdC8vIFRoZSBzZWdtZW50IHRyaWFuZ2xlcyBhcmUgZ2VuZXJhdGVkIGhlcmUgaWYgaXQgaXMgdGhlIGVuZGluZyBzZWdtZW50XG5cblx0XHRcdFx0bWFrZVNlZ21lbnRUcmlhbmdsZXMoKTtcblxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoICEgaXNDbG9zZWQgJiYgaVBvaW50ID09PSBudW1Qb2ludHMgLSAxICkge1xuXG5cdFx0XHRcdC8vIFN0YXJ0IGxpbmUgZW5kY2FwXG5cdFx0XHRcdGFkZENhcEdlb21ldHJ5KCBwb2ludHNbIDAgXSwgcG9pbnQwTCwgcG9pbnQwUiwgam9pbklzT25MZWZ0U2lkZSwgdHJ1ZSwgdTAgKTtcblxuXHRcdFx0fVxuXG5cdFx0XHQvLyBJbmNyZW1lbnQgbG9vcCB2YXJpYWJsZXNcblxuXHRcdFx0dTAgPSB1MTtcblxuXHRcdFx0cHJldmlvdXNQb2ludCA9IGN1cnJlbnRQb2ludDtcblxuXHRcdFx0bGFzdFBvaW50TC5jb3B5KCBuZXh0UG9pbnRMICk7XG5cdFx0XHRsYXN0UG9pbnRSLmNvcHkoIG5leHRQb2ludFIgKTtcblxuXHRcdH1cblxuXHRcdGlmICggISBpc0Nsb3NlZCApIHtcblxuXHRcdFx0Ly8gRW5kaW5nIGxpbmUgZW5kY2FwXG5cdFx0XHRhZGRDYXBHZW9tZXRyeSggY3VycmVudFBvaW50LCBjdXJyZW50UG9pbnRMLCBjdXJyZW50UG9pbnRSLCBqb2luSXNPbkxlZnRTaWRlLCBmYWxzZSwgdTEgKTtcblxuXHRcdH0gZWxzZSBpZiAoIGlubmVyU2lkZU1vZGlmaWVkICYmIHZlcnRpY2VzICkge1xuXG5cdFx0XHQvLyBNb2RpZnkgcGF0aCBmaXJzdCBzZWdtZW50IHZlcnRpY2VzIHRvIGFkanVzdCB0byB0aGUgc2VnbWVudHMgaW5uZXIgYW5kIG91dGVyIGludGVyc2VjdGlvbnNcblxuXHRcdFx0dmFyIGxhc3RPdXRlciA9IG91dGVyUG9pbnQ7XG5cdFx0XHR2YXIgbGFzdElubmVyID0gaW5uZXJQb2ludDtcblxuXHRcdFx0aWYgKCBpbml0aWFsSm9pbklzT25MZWZ0U2lkZSAhPT0gam9pbklzT25MZWZ0U2lkZSApIHtcblxuXHRcdFx0XHRsYXN0T3V0ZXIgPSBpbm5lclBvaW50O1xuXHRcdFx0XHRsYXN0SW5uZXIgPSBvdXRlclBvaW50O1xuXG5cdFx0XHR9XG5cblx0XHRcdGlmICggam9pbklzT25MZWZ0U2lkZSApIHtcblxuXHRcdFx0XHRpZiAoIGlzTWl0ZXIgfHwgaW5pdGlhbEpvaW5Jc09uTGVmdFNpZGUgKSB7XG5cblx0XHRcdFx0XHRsYXN0SW5uZXIudG9BcnJheSggdmVydGljZXMsIDAgKiAzICk7XG5cdFx0XHRcdFx0bGFzdElubmVyLnRvQXJyYXkoIHZlcnRpY2VzLCAzICogMyApO1xuXG5cdFx0XHRcdFx0aWYgKCBpc01pdGVyICkge1xuXG5cdFx0XHRcdFx0XHRsYXN0T3V0ZXIudG9BcnJheSggdmVydGljZXMsIDEgKiAzICk7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdGlmICggaXNNaXRlciB8fCAhIGluaXRpYWxKb2luSXNPbkxlZnRTaWRlICkge1xuXG5cdFx0XHRcdFx0bGFzdElubmVyLnRvQXJyYXkoIHZlcnRpY2VzLCAxICogMyApO1xuXHRcdFx0XHRcdGxhc3RJbm5lci50b0FycmF5KCB2ZXJ0aWNlcywgMyAqIDMgKTtcblxuXHRcdFx0XHRcdGlmICggaXNNaXRlciApIHtcblxuXHRcdFx0XHRcdFx0bGFzdE91dGVyLnRvQXJyYXkoIHZlcnRpY2VzLCAwICogMyApO1xuXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH1cblxuXHRcdFx0fVxuXG5cdFx0fVxuXG5cdFx0cmV0dXJuIG51bVZlcnRpY2VzO1xuXG5cdFx0Ly8gLS0gRW5kIG9mIGFsZ29yaXRobVxuXG5cdFx0Ly8gLS0gRnVuY3Rpb25zXG5cblx0XHRmdW5jdGlvbiBnZXROb3JtYWwoIHAxLCBwMiwgcmVzdWx0ICkge1xuXG5cdFx0XHRyZXN1bHQuc3ViVmVjdG9ycyggcDIsIHAxICk7XG5cdFx0XHRyZXR1cm4gcmVzdWx0LnNldCggLSByZXN1bHQueSwgcmVzdWx0LnggKS5ub3JtYWxpemUoKTtcblxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGFkZFZlcnRleCggcG9zaXRpb24sIHUsIHYgKSB7XG5cblx0XHRcdGlmICggdmVydGljZXMgKSB7XG5cblx0XHRcdFx0dmVydGljZXNbIGN1cnJlbnRDb29yZGluYXRlIF0gPSBwb3NpdGlvbi54O1xuXHRcdFx0XHR2ZXJ0aWNlc1sgY3VycmVudENvb3JkaW5hdGUgKyAxIF0gPSBwb3NpdGlvbi55O1xuXHRcdFx0XHR2ZXJ0aWNlc1sgY3VycmVudENvb3JkaW5hdGUgKyAyIF0gPSAwO1xuXG5cdFx0XHRcdGlmICggbm9ybWFscyApIHtcblxuXHRcdFx0XHRcdG5vcm1hbHNbIGN1cnJlbnRDb29yZGluYXRlIF0gPSAwO1xuXHRcdFx0XHRcdG5vcm1hbHNbIGN1cnJlbnRDb29yZGluYXRlICsgMSBdID0gMDtcblx0XHRcdFx0XHRub3JtYWxzWyBjdXJyZW50Q29vcmRpbmF0ZSArIDIgXSA9IDE7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdGN1cnJlbnRDb29yZGluYXRlICs9IDM7XG5cblx0XHRcdFx0aWYgKCB1dnMgKSB7XG5cblx0XHRcdFx0XHR1dnNbIGN1cnJlbnRDb29yZGluYXRlVVYgXSA9IHU7XG5cdFx0XHRcdFx0dXZzWyBjdXJyZW50Q29vcmRpbmF0ZVVWICsgMSBdID0gdjtcblxuXHRcdFx0XHRcdGN1cnJlbnRDb29yZGluYXRlVVYgKz0gMjtcblxuXHRcdFx0XHR9XG5cblx0XHRcdH1cblxuXHRcdFx0bnVtVmVydGljZXMgKz0gMztcblxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIG1ha2VDaXJjdWxhclNlY3RvciggY2VudGVyLCBwMSwgcDIsIHUsIHYgKSB7XG5cblx0XHRcdC8vIHBhcmFtIHAxLCBwMjogUG9pbnRzIGluIHRoZSBjaXJjbGUgYXJjLlxuXHRcdFx0Ly8gcDEgYW5kIHAyIGFyZSBpbiBjbG9ja3dpc2UgZGlyZWN0aW9uLlxuXG5cdFx0XHR0ZW1wVjJfMS5jb3B5KCBwMSApLnN1YiggY2VudGVyICkubm9ybWFsaXplKCk7XG5cdFx0XHR0ZW1wVjJfMi5jb3B5KCBwMiApLnN1YiggY2VudGVyICkubm9ybWFsaXplKCk7XG5cblx0XHRcdHZhciBhbmdsZSA9IE1hdGguUEk7XG5cdFx0XHR2YXIgZG90ID0gdGVtcFYyXzEuZG90KCB0ZW1wVjJfMiApO1xuXHRcdFx0aWYgKCBNYXRoLmFicyggZG90ICkgPCAxICkgYW5nbGUgPSBNYXRoLmFicyggTWF0aC5hY29zKCBkb3QgKSApO1xuXG5cdFx0XHRhbmdsZSAvPSBhcmNEaXZpc2lvbnM7XG5cblx0XHRcdHRlbXBWMl8zLmNvcHkoIHAxICk7XG5cblx0XHRcdGZvciAoIHZhciBpID0gMCwgaWwgPSBhcmNEaXZpc2lvbnMgLSAxOyBpIDwgaWw7IGkgKysgKSB7XG5cblx0XHRcdFx0dGVtcFYyXzQuY29weSggdGVtcFYyXzMgKS5yb3RhdGVBcm91bmQoIGNlbnRlciwgYW5nbGUgKTtcblxuXHRcdFx0XHRhZGRWZXJ0ZXgoIHRlbXBWMl8zLCB1LCB2ICk7XG5cdFx0XHRcdGFkZFZlcnRleCggdGVtcFYyXzQsIHUsIHYgKTtcblx0XHRcdFx0YWRkVmVydGV4KCBjZW50ZXIsIHUsIDAuNSApO1xuXG5cdFx0XHRcdHRlbXBWMl8zLmNvcHkoIHRlbXBWMl80ICk7XG5cblx0XHRcdH1cblxuXHRcdFx0YWRkVmVydGV4KCB0ZW1wVjJfNCwgdSwgdiApO1xuXHRcdFx0YWRkVmVydGV4KCBwMiwgdSwgdiApO1xuXHRcdFx0YWRkVmVydGV4KCBjZW50ZXIsIHUsIDAuNSApO1xuXG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gbWFrZVNlZ21lbnRUcmlhbmdsZXMoKSB7XG5cblx0XHRcdGFkZFZlcnRleCggbGFzdFBvaW50UiwgdTAsIDEgKTtcblx0XHRcdGFkZFZlcnRleCggbGFzdFBvaW50TCwgdTAsIDAgKTtcblx0XHRcdGFkZFZlcnRleCggY3VycmVudFBvaW50TCwgdTEsIDAgKTtcblxuXHRcdFx0YWRkVmVydGV4KCBsYXN0UG9pbnRSLCB1MCwgMSApO1xuXHRcdFx0YWRkVmVydGV4KCBjdXJyZW50UG9pbnRMLCB1MSwgMSApO1xuXHRcdFx0YWRkVmVydGV4KCBjdXJyZW50UG9pbnRSLCB1MSwgMCApO1xuXG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gbWFrZVNlZ21lbnRXaXRoQmV2ZWxKb2luKCBqb2luSXNPbkxlZnRTaWRlLCBpbm5lclNpZGVNb2RpZmllZCwgdSApIHtcblxuXHRcdFx0aWYgKCBpbm5lclNpZGVNb2RpZmllZCApIHtcblxuXHRcdFx0XHQvLyBPcHRpbWl6ZWQgc2VnbWVudCArIGJldmVsIHRyaWFuZ2xlc1xuXG5cdFx0XHRcdGlmICggam9pbklzT25MZWZ0U2lkZSApIHtcblxuXHRcdFx0XHRcdC8vIFBhdGggc2VnbWVudHMgdHJpYW5nbGVzXG5cblx0XHRcdFx0XHRhZGRWZXJ0ZXgoIGxhc3RQb2ludFIsIHUwLCAxICk7XG5cdFx0XHRcdFx0YWRkVmVydGV4KCBsYXN0UG9pbnRMLCB1MCwgMCApO1xuXHRcdFx0XHRcdGFkZFZlcnRleCggY3VycmVudFBvaW50TCwgdTEsIDAgKTtcblxuXHRcdFx0XHRcdGFkZFZlcnRleCggbGFzdFBvaW50UiwgdTAsIDEgKTtcblx0XHRcdFx0XHRhZGRWZXJ0ZXgoIGN1cnJlbnRQb2ludEwsIHUxLCAwICk7XG5cdFx0XHRcdFx0YWRkVmVydGV4KCBpbm5lclBvaW50LCB1MSwgMSApO1xuXG5cdFx0XHRcdFx0Ly8gQmV2ZWwgam9pbiB0cmlhbmdsZVxuXG5cdFx0XHRcdFx0YWRkVmVydGV4KCBjdXJyZW50UG9pbnRMLCB1LCAwICk7XG5cdFx0XHRcdFx0YWRkVmVydGV4KCBuZXh0UG9pbnRMLCB1LCAwICk7XG5cdFx0XHRcdFx0YWRkVmVydGV4KCBpbm5lclBvaW50LCB1LCAwLjUgKTtcblxuXHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0Ly8gUGF0aCBzZWdtZW50cyB0cmlhbmdsZXNcblxuXHRcdFx0XHRcdGFkZFZlcnRleCggbGFzdFBvaW50UiwgdTAsIDEgKTtcblx0XHRcdFx0XHRhZGRWZXJ0ZXgoIGxhc3RQb2ludEwsIHUwLCAwICk7XG5cdFx0XHRcdFx0YWRkVmVydGV4KCBjdXJyZW50UG9pbnRSLCB1MSwgMSApO1xuXG5cdFx0XHRcdFx0YWRkVmVydGV4KCBsYXN0UG9pbnRMLCB1MCwgMCApO1xuXHRcdFx0XHRcdGFkZFZlcnRleCggaW5uZXJQb2ludCwgdTEsIDAgKTtcblx0XHRcdFx0XHRhZGRWZXJ0ZXgoIGN1cnJlbnRQb2ludFIsIHUxLCAxICk7XG5cblx0XHRcdFx0XHQvLyBCZXZlbCBqb2luIHRyaWFuZ2xlXG5cblx0XHRcdFx0XHRhZGRWZXJ0ZXgoIGN1cnJlbnRQb2ludFIsIHUsIDEgKTtcblx0XHRcdFx0XHRhZGRWZXJ0ZXgoIG5leHRQb2ludFIsIHUsIDAgKTtcblx0XHRcdFx0XHRhZGRWZXJ0ZXgoIGlubmVyUG9pbnQsIHUsIDAuNSApO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHQvLyBCZXZlbCBqb2luIHRyaWFuZ2xlLiBUaGUgc2VnbWVudCB0cmlhbmdsZXMgYXJlIGRvbmUgaW4gdGhlIG1haW4gbG9vcFxuXG5cdFx0XHRcdGlmICggam9pbklzT25MZWZ0U2lkZSApIHtcblxuXHRcdFx0XHRcdGFkZFZlcnRleCggY3VycmVudFBvaW50TCwgdSwgMCApO1xuXHRcdFx0XHRcdGFkZFZlcnRleCggbmV4dFBvaW50TCwgdSwgMCApO1xuXHRcdFx0XHRcdGFkZFZlcnRleCggY3VycmVudFBvaW50LCB1LCAwLjUgKTtcblxuXHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0YWRkVmVydGV4KCBjdXJyZW50UG9pbnRSLCB1LCAxICk7XG5cdFx0XHRcdFx0YWRkVmVydGV4KCBuZXh0UG9pbnRSLCB1LCAwICk7XG5cdFx0XHRcdFx0YWRkVmVydGV4KCBjdXJyZW50UG9pbnQsIHUsIDAuNSApO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fVxuXG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gY3JlYXRlU2VnbWVudFRyaWFuZ2xlc1dpdGhNaWRkbGVTZWN0aW9uKCBqb2luSXNPbkxlZnRTaWRlLCBpbm5lclNpZGVNb2RpZmllZCApIHtcblxuXHRcdFx0aWYgKCBpbm5lclNpZGVNb2RpZmllZCApIHtcblxuXHRcdFx0XHRpZiAoIGpvaW5Jc09uTGVmdFNpZGUgKSB7XG5cblx0XHRcdFx0XHRhZGRWZXJ0ZXgoIGxhc3RQb2ludFIsIHUwLCAxICk7XG5cdFx0XHRcdFx0YWRkVmVydGV4KCBsYXN0UG9pbnRMLCB1MCwgMCApO1xuXHRcdFx0XHRcdGFkZFZlcnRleCggY3VycmVudFBvaW50TCwgdTEsIDAgKTtcblxuXHRcdFx0XHRcdGFkZFZlcnRleCggbGFzdFBvaW50UiwgdTAsIDEgKTtcblx0XHRcdFx0XHRhZGRWZXJ0ZXgoIGN1cnJlbnRQb2ludEwsIHUxLCAwICk7XG5cdFx0XHRcdFx0YWRkVmVydGV4KCBpbm5lclBvaW50LCB1MSwgMSApO1xuXG5cdFx0XHRcdFx0YWRkVmVydGV4KCBjdXJyZW50UG9pbnRMLCB1MCwgMCApO1xuXHRcdFx0XHRcdGFkZFZlcnRleCggY3VycmVudFBvaW50LCB1MSwgMC41ICk7XG5cdFx0XHRcdFx0YWRkVmVydGV4KCBpbm5lclBvaW50LCB1MSwgMSApO1xuXG5cdFx0XHRcdFx0YWRkVmVydGV4KCBjdXJyZW50UG9pbnQsIHUxLCAwLjUgKTtcblx0XHRcdFx0XHRhZGRWZXJ0ZXgoIG5leHRQb2ludEwsIHUwLCAwICk7XG5cdFx0XHRcdFx0YWRkVmVydGV4KCBpbm5lclBvaW50LCB1MSwgMSApO1xuXG5cdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRhZGRWZXJ0ZXgoIGxhc3RQb2ludFIsIHUwLCAxICk7XG5cdFx0XHRcdFx0YWRkVmVydGV4KCBsYXN0UG9pbnRMLCB1MCwgMCApO1xuXHRcdFx0XHRcdGFkZFZlcnRleCggY3VycmVudFBvaW50UiwgdTEsIDEgKTtcblxuXHRcdFx0XHRcdGFkZFZlcnRleCggbGFzdFBvaW50TCwgdTAsIDAgKTtcblx0XHRcdFx0XHRhZGRWZXJ0ZXgoIGlubmVyUG9pbnQsIHUxLCAwICk7XG5cdFx0XHRcdFx0YWRkVmVydGV4KCBjdXJyZW50UG9pbnRSLCB1MSwgMSApO1xuXG5cdFx0XHRcdFx0YWRkVmVydGV4KCBjdXJyZW50UG9pbnRSLCB1MCwgMSApO1xuXHRcdFx0XHRcdGFkZFZlcnRleCggaW5uZXJQb2ludCwgdTEsIDAgKTtcblx0XHRcdFx0XHRhZGRWZXJ0ZXgoIGN1cnJlbnRQb2ludCwgdTEsIDAuNSApO1xuXG5cdFx0XHRcdFx0YWRkVmVydGV4KCBjdXJyZW50UG9pbnQsIHUxLCAwLjUgKTtcblx0XHRcdFx0XHRhZGRWZXJ0ZXgoIGlubmVyUG9pbnQsIHUxLCAwICk7XG5cdFx0XHRcdFx0YWRkVmVydGV4KCBuZXh0UG9pbnRSLCB1MCwgMSApO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fVxuXG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gYWRkQ2FwR2VvbWV0cnkoIGNlbnRlciwgcDEsIHAyLCBqb2luSXNPbkxlZnRTaWRlLCBzdGFydCwgdSApIHtcblxuXHRcdFx0Ly8gcGFyYW0gY2VudGVyOiBFbmQgcG9pbnQgb2YgdGhlIHBhdGhcblx0XHRcdC8vIHBhcmFtIHAxLCBwMjogTGVmdCBhbmQgcmlnaHQgY2FwIHBvaW50c1xuXG5cdFx0XHRzd2l0Y2ggKCBzdHlsZS5zdHJva2VMaW5lQ2FwICkge1xuXG5cdFx0XHRcdGNhc2UgJ3JvdW5kJzpcblxuXHRcdFx0XHRcdGlmICggc3RhcnQgKSB7XG5cblx0XHRcdFx0XHRcdG1ha2VDaXJjdWxhclNlY3RvciggY2VudGVyLCBwMiwgcDEsIHUsIDAuNSApO1xuXG5cdFx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdFx0bWFrZUNpcmN1bGFyU2VjdG9yKCBjZW50ZXIsIHAxLCBwMiwgdSwgMC41ICk7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRjYXNlICdzcXVhcmUnOlxuXG5cdFx0XHRcdFx0aWYgKCBzdGFydCApIHtcblxuXHRcdFx0XHRcdFx0dGVtcFYyXzEuc3ViVmVjdG9ycyggcDEsIGNlbnRlciApO1xuXHRcdFx0XHRcdFx0dGVtcFYyXzIuc2V0KCB0ZW1wVjJfMS55LCAtIHRlbXBWMl8xLnggKTtcblxuXHRcdFx0XHRcdFx0dGVtcFYyXzMuYWRkVmVjdG9ycyggdGVtcFYyXzEsIHRlbXBWMl8yICkuYWRkKCBjZW50ZXIgKTtcblx0XHRcdFx0XHRcdHRlbXBWMl80LnN1YlZlY3RvcnMoIHRlbXBWMl8yLCB0ZW1wVjJfMSApLmFkZCggY2VudGVyICk7XG5cblx0XHRcdFx0XHRcdC8vIE1vZGlmeSBhbHJlYWR5IGV4aXN0aW5nIHZlcnRpY2VzXG5cdFx0XHRcdFx0XHRpZiAoIGpvaW5Jc09uTGVmdFNpZGUgKSB7XG5cblx0XHRcdFx0XHRcdFx0dGVtcFYyXzMudG9BcnJheSggdmVydGljZXMsIDEgKiAzICk7XG5cdFx0XHRcdFx0XHRcdHRlbXBWMl80LnRvQXJyYXkoIHZlcnRpY2VzLCAwICogMyApO1xuXHRcdFx0XHRcdFx0XHR0ZW1wVjJfNC50b0FycmF5KCB2ZXJ0aWNlcywgMyAqIDMgKTtcblxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdFx0XHR0ZW1wVjJfMy50b0FycmF5KCB2ZXJ0aWNlcywgMSAqIDMgKTtcblx0XHRcdFx0XHRcdFx0dGVtcFYyXzMudG9BcnJheSggdmVydGljZXMsIDMgKiAzICk7XG5cdFx0XHRcdFx0XHRcdHRlbXBWMl80LnRvQXJyYXkoIHZlcnRpY2VzLCAwICogMyApO1xuXG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0XHR0ZW1wVjJfMS5zdWJWZWN0b3JzKCBwMiwgY2VudGVyICk7XG5cdFx0XHRcdFx0XHR0ZW1wVjJfMi5zZXQoIHRlbXBWMl8xLnksIC0gdGVtcFYyXzEueCApO1xuXG5cdFx0XHRcdFx0XHR0ZW1wVjJfMy5hZGRWZWN0b3JzKCB0ZW1wVjJfMSwgdGVtcFYyXzIgKS5hZGQoIGNlbnRlciApO1xuXHRcdFx0XHRcdFx0dGVtcFYyXzQuc3ViVmVjdG9ycyggdGVtcFYyXzIsIHRlbXBWMl8xICkuYWRkKCBjZW50ZXIgKTtcblxuXHRcdFx0XHRcdFx0dmFyIHZsID0gdmVydGljZXMubGVuZ3RoO1xuXG5cdFx0XHRcdFx0XHQvLyBNb2RpZnkgYWxyZWFkeSBleGlzdGluZyB2ZXJ0aWNlc1xuXHRcdFx0XHRcdFx0aWYgKCBqb2luSXNPbkxlZnRTaWRlICkge1xuXG5cdFx0XHRcdFx0XHRcdHRlbXBWMl8zLnRvQXJyYXkoIHZlcnRpY2VzLCB2bCAtIDEgKiAzICk7XG5cdFx0XHRcdFx0XHRcdHRlbXBWMl80LnRvQXJyYXkoIHZlcnRpY2VzLCB2bCAtIDIgKiAzICk7XG5cdFx0XHRcdFx0XHRcdHRlbXBWMl80LnRvQXJyYXkoIHZlcnRpY2VzLCB2bCAtIDQgKiAzICk7XG5cblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRcdFx0dGVtcFYyXzMudG9BcnJheSggdmVydGljZXMsIHZsIC0gMiAqIDMgKTtcblx0XHRcdFx0XHRcdFx0dGVtcFYyXzQudG9BcnJheSggdmVydGljZXMsIHZsIC0gMSAqIDMgKTtcblx0XHRcdFx0XHRcdFx0dGVtcFYyXzQudG9BcnJheSggdmVydGljZXMsIHZsIC0gNCAqIDMgKTtcblxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0Y2FzZSAnYnV0dCc6XG5cdFx0XHRcdGRlZmF1bHQ6XG5cblx0XHRcdFx0XHQvLyBOb3RoaW5nIHRvIGRvIGhlcmVcblx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0fVxuXG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gcmVtb3ZlRHVwbGljYXRlZFBvaW50cyggcG9pbnRzICkge1xuXG5cdFx0XHQvLyBDcmVhdGVzIGEgbmV3IGFycmF5IGlmIG5lY2Vzc2FyeSB3aXRoIGR1cGxpY2F0ZWQgcG9pbnRzIHJlbW92ZWQuXG5cdFx0XHQvLyBUaGlzIGRvZXMgbm90IHJlbW92ZSBkdXBsaWNhdGVkIGluaXRpYWwgYW5kIGVuZGluZyBwb2ludHMgb2YgYSBjbG9zZWQgcGF0aC5cblxuXHRcdFx0dmFyIGR1cFBvaW50cyA9IGZhbHNlO1xuXHRcdFx0Zm9yICggdmFyIGkgPSAxLCBuID0gcG9pbnRzLmxlbmd0aCAtIDE7IGkgPCBuOyBpICsrICkge1xuXG5cdFx0XHRcdGlmICggcG9pbnRzWyBpIF0uZGlzdGFuY2VUbyggcG9pbnRzWyBpICsgMSBdICkgPCBtaW5EaXN0YW5jZSApIHtcblxuXHRcdFx0XHRcdGR1cFBvaW50cyA9IHRydWU7XG5cdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9XG5cblx0XHRcdGlmICggISBkdXBQb2ludHMgKSByZXR1cm4gcG9pbnRzO1xuXG5cdFx0XHR2YXIgbmV3UG9pbnRzID0gW107XG5cdFx0XHRuZXdQb2ludHMucHVzaCggcG9pbnRzWyAwIF0gKTtcblxuXHRcdFx0Zm9yICggdmFyIGkgPSAxLCBuID0gcG9pbnRzLmxlbmd0aCAtIDE7IGkgPCBuOyBpICsrICkge1xuXG5cdFx0XHRcdGlmICggcG9pbnRzWyBpIF0uZGlzdGFuY2VUbyggcG9pbnRzWyBpICsgMSBdICkgPj0gbWluRGlzdGFuY2UgKSB7XG5cblx0XHRcdFx0XHRuZXdQb2ludHMucHVzaCggcG9pbnRzWyBpIF0gKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdH1cblxuXHRcdFx0bmV3UG9pbnRzLnB1c2goIHBvaW50c1sgcG9pbnRzLmxlbmd0aCAtIDEgXSApO1xuXG5cdFx0XHRyZXR1cm4gbmV3UG9pbnRzO1xuXG5cdFx0fVxuXG5cdH07XG5cbn0oKTtcblxuZXhwb3J0IHsgU1ZHTG9hZGVyIH07XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/three/examples/jsm/loaders/SVGLoader.js\n");

/***/ }),

/***/ "./node_modules/three/examples/jsm/loaders/TGALoader.js":
/*!**************************************************************!*\
  !*** ./node_modules/three/examples/jsm/loaders/TGALoader.js ***!
  \**************************************************************/
/*! exports provided: TGALoader */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"TGALoader\", function() { return TGALoader; });\n/* harmony import */ var _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../build/three.module.js */ \"./node_modules/three/build/three.module.js\");\n\n\nvar TGALoader = function ( manager ) {\n\n\t_build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Loader\"].call( this, manager );\n\n};\n\nTGALoader.prototype = Object.assign( Object.create( _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Loader\"].prototype ), {\n\n\tconstructor: TGALoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar scope = this;\n\n\t\tvar texture = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Texture\"]();\n\n\t\tvar loader = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"FileLoader\"]( this.manager );\n\t\tloader.setResponseType( 'arraybuffer' );\n\t\tloader.setPath( this.path );\n\t\tloader.setWithCredentials( this.withCredentials );\n\n\t\tloader.load( url, function ( buffer ) {\n\n\t\t\ttexture.image = scope.parse( buffer );\n\t\t\ttexture.needsUpdate = true;\n\n\t\t\tif ( onLoad !== undefined ) {\n\n\t\t\t\tonLoad( texture );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t\treturn texture;\n\n\t},\n\n\tparse: function ( buffer ) {\n\n\t\t// reference from vthibault, https://github.com/vthibault/roBrowser/blob/master/src/Loaders/Targa.js\n\n\t\tfunction tgaCheckHeader( header ) {\n\n\t\t\tswitch ( header.image_type ) {\n\n\t\t\t\t// check indexed type\n\n\t\t\t\tcase TGA_TYPE_INDEXED:\n\t\t\t\tcase TGA_TYPE_RLE_INDEXED:\n\t\t\t\t\tif ( header.colormap_length > 256 || header.colormap_size !== 24 || header.colormap_type !== 1 ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.TGALoader: Invalid type colormap data for indexed type.' );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\t\t// check colormap type\n\n\t\t\t\tcase TGA_TYPE_RGB:\n\t\t\t\tcase TGA_TYPE_GREY:\n\t\t\t\tcase TGA_TYPE_RLE_RGB:\n\t\t\t\tcase TGA_TYPE_RLE_GREY:\n\t\t\t\t\tif ( header.colormap_type ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.TGALoader: Invalid type colormap data for colormap type.' );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\t\t// What the need of a file without data ?\n\n\t\t\t\tcase TGA_TYPE_NO_DATA:\n\t\t\t\t\tconsole.error( 'THREE.TGALoader: No data.' );\n\n\t\t\t\t\t// Invalid type ?\n\n\t\t\t\tdefault:\n\t\t\t\t\tconsole.error( 'THREE.TGALoader: Invalid type \"%s\".', header.image_type );\n\n\t\t\t}\n\n\t\t\t// check image width and height\n\n\t\t\tif ( header.width <= 0 || header.height <= 0 ) {\n\n\t\t\t\tconsole.error( 'THREE.TGALoader: Invalid image size.' );\n\n\t\t\t}\n\n\t\t\t// check image pixel size\n\n\t\t\tif ( header.pixel_size !== 8 && header.pixel_size !== 16 &&\n\t\t\t\theader.pixel_size !== 24 && header.pixel_size !== 32 ) {\n\n\t\t\t\tconsole.error( 'THREE.TGALoader: Invalid pixel size \"%s\".', header.pixel_size );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// parse tga image buffer\n\n\t\tfunction tgaParse( use_rle, use_pal, header, offset, data ) {\n\n\t\t\tvar pixel_data,\n\t\t\t\tpixel_size,\n\t\t\t\tpixel_total,\n\t\t\t\tpalettes;\n\n\t\t\tpixel_size = header.pixel_size >> 3;\n\t\t\tpixel_total = header.width * header.height * pixel_size;\n\n\t\t\t // read palettes\n\n\t\t\t if ( use_pal ) {\n\n\t\t\t\t palettes = data.subarray( offset, offset += header.colormap_length * ( header.colormap_size >> 3 ) );\n\n\t\t\t }\n\n\t\t\t // read RLE\n\n\t\t\t if ( use_rle ) {\n\n\t\t\t\t pixel_data = new Uint8Array( pixel_total );\n\n\t\t\t\tvar c, count, i;\n\t\t\t\tvar shift = 0;\n\t\t\t\tvar pixels = new Uint8Array( pixel_size );\n\n\t\t\t\twhile ( shift < pixel_total ) {\n\n\t\t\t\t\tc = data[ offset ++ ];\n\t\t\t\t\tcount = ( c & 0x7f ) + 1;\n\n\t\t\t\t\t// RLE pixels\n\n\t\t\t\t\tif ( c & 0x80 ) {\n\n\t\t\t\t\t\t// bind pixel tmp array\n\n\t\t\t\t\t\tfor ( i = 0; i < pixel_size; ++ i ) {\n\n\t\t\t\t\t\t\tpixels[ i ] = data[ offset ++ ];\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// copy pixel array\n\n\t\t\t\t\t\tfor ( i = 0; i < count; ++ i ) {\n\n\t\t\t\t\t\t\tpixel_data.set( pixels, shift + i * pixel_size );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tshift += pixel_size * count;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// raw pixels\n\n\t\t\t\t\t\tcount *= pixel_size;\n\n\t\t\t\t\t\tfor ( i = 0; i < count; ++ i ) {\n\n\t\t\t\t\t\t\tpixel_data[ shift + i ] = data[ offset ++ ];\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tshift += count;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t } else {\n\n\t\t\t\t// raw pixels\n\n\t\t\t\tpixel_data = data.subarray(\n\t\t\t\t\t offset, offset += ( use_pal ? header.width * header.height : pixel_total )\n\t\t\t\t);\n\n\t\t\t }\n\n\t\t\t return {\n\t\t\t\tpixel_data: pixel_data,\n\t\t\t\tpalettes: palettes\n\t\t\t };\n\n\t\t}\n\n\t\tfunction tgaGetImageData8bits( imageData, y_start, y_step, y_end, x_start, x_step, x_end, image, palettes ) {\n\n\t\t\tvar colormap = palettes;\n\t\t\tvar color, i = 0, x, y;\n\t\t\tvar width = header.width;\n\n\t\t\tfor ( y = y_start; y !== y_end; y += y_step ) {\n\n\t\t\t\tfor ( x = x_start; x !== x_end; x += x_step, i ++ ) {\n\n\t\t\t\t\tcolor = image[ i ];\n\t\t\t\t\timageData[ ( x + width * y ) * 4 + 3 ] = 255;\n\t\t\t\t\timageData[ ( x + width * y ) * 4 + 2 ] = colormap[ ( color * 3 ) + 0 ];\n\t\t\t\t\timageData[ ( x + width * y ) * 4 + 1 ] = colormap[ ( color * 3 ) + 1 ];\n\t\t\t\t\timageData[ ( x + width * y ) * 4 + 0 ] = colormap[ ( color * 3 ) + 2 ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn imageData;\n\n\t\t}\n\n\t\tfunction tgaGetImageData16bits( imageData, y_start, y_step, y_end, x_start, x_step, x_end, image ) {\n\n\t\t\tvar color, i = 0, x, y;\n\t\t\tvar width = header.width;\n\n\t\t\tfor ( y = y_start; y !== y_end; y += y_step ) {\n\n\t\t\t\tfor ( x = x_start; x !== x_end; x += x_step, i += 2 ) {\n\n\t\t\t\t\tcolor = image[ i + 0 ] + ( image[ i + 1 ] << 8 ); // Inversed ?\n\t\t\t\t\timageData[ ( x + width * y ) * 4 + 0 ] = ( color & 0x7C00 ) >> 7;\n\t\t\t\t\timageData[ ( x + width * y ) * 4 + 1 ] = ( color & 0x03E0 ) >> 2;\n\t\t\t\t\timageData[ ( x + width * y ) * 4 + 2 ] = ( color & 0x001F ) >> 3;\n\t\t\t\t\timageData[ ( x + width * y ) * 4 + 3 ] = ( color & 0x8000 ) ? 0 : 255;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn imageData;\n\n\t\t}\n\n\t\tfunction tgaGetImageData24bits( imageData, y_start, y_step, y_end, x_start, x_step, x_end, image ) {\n\n\t\t\tvar i = 0, x, y;\n\t\t\tvar width = header.width;\n\n\t\t\tfor ( y = y_start; y !== y_end; y += y_step ) {\n\n\t\t\t\tfor ( x = x_start; x !== x_end; x += x_step, i += 3 ) {\n\n\t\t\t\t\timageData[ ( x + width * y ) * 4 + 3 ] = 255;\n\t\t\t\t\timageData[ ( x + width * y ) * 4 + 2 ] = image[ i + 0 ];\n\t\t\t\t\timageData[ ( x + width * y ) * 4 + 1 ] = image[ i + 1 ];\n\t\t\t\t\timageData[ ( x + width * y ) * 4 + 0 ] = image[ i + 2 ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn imageData;\n\n\t\t}\n\n\t\tfunction tgaGetImageData32bits( imageData, y_start, y_step, y_end, x_start, x_step, x_end, image ) {\n\n\t\t\tvar i = 0, x, y;\n\t\t\tvar width = header.width;\n\n\t\t\tfor ( y = y_start; y !== y_end; y += y_step ) {\n\n\t\t\t\tfor ( x = x_start; x !== x_end; x += x_step, i += 4 ) {\n\n\t\t\t\t\timageData[ ( x + width * y ) * 4 + 2 ] = image[ i + 0 ];\n\t\t\t\t\timageData[ ( x + width * y ) * 4 + 1 ] = image[ i + 1 ];\n\t\t\t\t\timageData[ ( x + width * y ) * 4 + 0 ] = image[ i + 2 ];\n\t\t\t\t\timageData[ ( x + width * y ) * 4 + 3 ] = image[ i + 3 ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn imageData;\n\n\t\t}\n\n\t\tfunction tgaGetImageDataGrey8bits( imageData, y_start, y_step, y_end, x_start, x_step, x_end, image ) {\n\n\t\t\tvar color, i = 0, x, y;\n\t\t\tvar width = header.width;\n\n\t\t\tfor ( y = y_start; y !== y_end; y += y_step ) {\n\n\t\t\t\tfor ( x = x_start; x !== x_end; x += x_step, i ++ ) {\n\n\t\t\t\t\tcolor = image[ i ];\n\t\t\t\t\timageData[ ( x + width * y ) * 4 + 0 ] = color;\n\t\t\t\t\timageData[ ( x + width * y ) * 4 + 1 ] = color;\n\t\t\t\t\timageData[ ( x + width * y ) * 4 + 2 ] = color;\n\t\t\t\t\timageData[ ( x + width * y ) * 4 + 3 ] = 255;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn imageData;\n\n\t\t}\n\n\t\tfunction tgaGetImageDataGrey16bits( imageData, y_start, y_step, y_end, x_start, x_step, x_end, image ) {\n\n\t\t\tvar i = 0, x, y;\n\t\t\tvar width = header.width;\n\n\t\t\tfor ( y = y_start; y !== y_end; y += y_step ) {\n\n\t\t\t\tfor ( x = x_start; x !== x_end; x += x_step, i += 2 ) {\n\n\t\t\t\t\timageData[ ( x + width * y ) * 4 + 0 ] = image[ i + 0 ];\n\t\t\t\t\timageData[ ( x + width * y ) * 4 + 1 ] = image[ i + 0 ];\n\t\t\t\t\timageData[ ( x + width * y ) * 4 + 2 ] = image[ i + 0 ];\n\t\t\t\t\timageData[ ( x + width * y ) * 4 + 3 ] = image[ i + 1 ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn imageData;\n\n\t\t}\n\n\t\tfunction getTgaRGBA( data, width, height, image, palette ) {\n\n\t\t\tvar x_start,\n\t\t\t\ty_start,\n\t\t\t\tx_step,\n\t\t\t\ty_step,\n\t\t\t\tx_end,\n\t\t\t\ty_end;\n\n\t\t\tswitch ( ( header.flags & TGA_ORIGIN_MASK ) >> TGA_ORIGIN_SHIFT ) {\n\n\t\t\t\tdefault:\n\t\t\t\tcase TGA_ORIGIN_UL:\n\t\t\t\t\tx_start = 0;\n\t\t\t\t\tx_step = 1;\n\t\t\t\t\tx_end = width;\n\t\t\t\t\ty_start = 0;\n\t\t\t\t\ty_step = 1;\n\t\t\t\t\ty_end = height;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase TGA_ORIGIN_BL:\n\t\t\t\t\tx_start = 0;\n\t\t\t\t\tx_step = 1;\n\t\t\t\t\tx_end = width;\n\t\t\t\t\ty_start = height - 1;\n\t\t\t\t\ty_step = - 1;\n\t\t\t\t\ty_end = - 1;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase TGA_ORIGIN_UR:\n\t\t\t\t\tx_start = width - 1;\n\t\t\t\t\tx_step = - 1;\n\t\t\t\t\tx_end = - 1;\n\t\t\t\t\ty_start = 0;\n\t\t\t\t\ty_step = 1;\n\t\t\t\t\ty_end = height;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase TGA_ORIGIN_BR:\n\t\t\t\t\tx_start = width - 1;\n\t\t\t\t\tx_step = - 1;\n\t\t\t\t\tx_end = - 1;\n\t\t\t\t\ty_start = height - 1;\n\t\t\t\t\ty_step = - 1;\n\t\t\t\t\ty_end = - 1;\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tif ( use_grey ) {\n\n\t\t\t\tswitch ( header.pixel_size ) {\n\n\t\t\t\t\tcase 8:\n\t\t\t\t\t\ttgaGetImageDataGrey8bits( data, y_start, y_step, y_end, x_start, x_step, x_end, image );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 16:\n\t\t\t\t\t\ttgaGetImageDataGrey16bits( data, y_start, y_step, y_end, x_start, x_step, x_end, image );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tconsole.error( 'THREE.TGALoader: Format not supported.' );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tswitch ( header.pixel_size ) {\n\n\t\t\t\t\tcase 8:\n\t\t\t\t\t\ttgaGetImageData8bits( data, y_start, y_step, y_end, x_start, x_step, x_end, image, palette );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 16:\n\t\t\t\t\t\ttgaGetImageData16bits( data, y_start, y_step, y_end, x_start, x_step, x_end, image );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 24:\n\t\t\t\t\t\ttgaGetImageData24bits( data, y_start, y_step, y_end, x_start, x_step, x_end, image );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 32:\n\t\t\t\t\t\ttgaGetImageData32bits( data, y_start, y_step, y_end, x_start, x_step, x_end, image );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tconsole.error( 'THREE.TGALoader: Format not supported.' );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// Load image data according to specific method\n\t\t\t// var func = 'tgaGetImageData' + (use_grey ? 'Grey' : '') + (header.pixel_size) + 'bits';\n\t\t\t// func(data, y_start, y_step, y_end, x_start, x_step, x_end, width, image, palette );\n\t\t\treturn data;\n\n\t\t}\n\n\t\t// TGA constants\n\n\t\tvar TGA_TYPE_NO_DATA = 0,\n\t\t\tTGA_TYPE_INDEXED = 1,\n\t\t\tTGA_TYPE_RGB = 2,\n\t\t\tTGA_TYPE_GREY = 3,\n\t\t\tTGA_TYPE_RLE_INDEXED = 9,\n\t\t\tTGA_TYPE_RLE_RGB = 10,\n\t\t\tTGA_TYPE_RLE_GREY = 11,\n\n\t\t\tTGA_ORIGIN_MASK = 0x30,\n\t\t\tTGA_ORIGIN_SHIFT = 0x04,\n\t\t\tTGA_ORIGIN_BL = 0x00,\n\t\t\tTGA_ORIGIN_BR = 0x01,\n\t\t\tTGA_ORIGIN_UL = 0x02,\n\t\t\tTGA_ORIGIN_UR = 0x03;\n\n\t\tif ( buffer.length < 19 ) console.error( 'THREE.TGALoader: Not enough data to contain header.' );\n\n\t\tvar content = new Uint8Array( buffer ),\n\t\t\toffset = 0,\n\t\t\theader = {\n\t\t\t\tid_length: content[ offset ++ ],\n\t\t\t\tcolormap_type: content[ offset ++ ],\n\t\t\t\timage_type: content[ offset ++ ],\n\t\t\t\tcolormap_index: content[ offset ++ ] | content[ offset ++ ] << 8,\n\t\t\t\tcolormap_length: content[ offset ++ ] | content[ offset ++ ] << 8,\n\t\t\t\tcolormap_size: content[ offset ++ ],\n\t\t\t\torigin: [\n\t\t\t\t\tcontent[ offset ++ ] | content[ offset ++ ] << 8,\n\t\t\t\t\tcontent[ offset ++ ] | content[ offset ++ ] << 8\n\t\t\t\t],\n\t\t\t\twidth: content[ offset ++ ] | content[ offset ++ ] << 8,\n\t\t\t\theight: content[ offset ++ ] | content[ offset ++ ] << 8,\n\t\t\t\tpixel_size: content[ offset ++ ],\n\t\t\t\tflags: content[ offset ++ ]\n\t\t\t};\n\n\t\t// check tga if it is valid format\n\n\t\ttgaCheckHeader( header );\n\n\t\tif ( header.id_length + offset > buffer.length ) {\n\n\t\t\tconsole.error( 'THREE.TGALoader: No data.' );\n\n\t\t}\n\n\t\t// skip the needn't data\n\n\t\toffset += header.id_length;\n\n\t\t// get targa information about RLE compression and palette\n\n\t\tvar use_rle = false,\n\t\t\tuse_pal = false,\n\t\t\tuse_grey = false;\n\n\t\tswitch ( header.image_type ) {\n\n\t\t\tcase TGA_TYPE_RLE_INDEXED:\n\t\t\t\tuse_rle = true;\n\t\t\t\tuse_pal = true;\n\t\t\t\tbreak;\n\n\t\t\tcase TGA_TYPE_INDEXED:\n\t\t\t\tuse_pal = true;\n\t\t\t\tbreak;\n\n\t\t\tcase TGA_TYPE_RLE_RGB:\n\t\t\t\tuse_rle = true;\n\t\t\t\tbreak;\n\n\t\t\tcase TGA_TYPE_RGB:\n\t\t\t\tbreak;\n\n\t\t\tcase TGA_TYPE_RLE_GREY:\n\t\t\t\tuse_rle = true;\n\t\t\t\tuse_grey = true;\n\t\t\t\tbreak;\n\n\t\t\tcase TGA_TYPE_GREY:\n\t\t\t\tuse_grey = true;\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\t//\n\n\t\tvar useOffscreen = typeof OffscreenCanvas !== 'undefined';\n\n\t\tvar canvas = useOffscreen ? new OffscreenCanvas( header.width, header.height ) : document.createElement( 'canvas' );\n\t\tcanvas.width = header.width;\n\t\tcanvas.height = header.height;\n\n\t\tvar context = canvas.getContext( '2d' );\n\t\tvar imageData = context.createImageData( header.width, header.height );\n\n\t\tvar result = tgaParse( use_rle, use_pal, header, offset, content );\n\t\tgetTgaRGBA( imageData.data, header.width, header.height, result.pixel_data, result.palettes );\n\n\t\tcontext.putImageData( imageData, 0, 0 );\n\n\t\treturn canvas;\n\n\t}\n\n} );\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL3RocmVlL2V4YW1wbGVzL2pzbS9sb2FkZXJzL1RHQUxvYWRlci5qcz85ZmU3Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUl3Qzs7QUFFeEM7O0FBRUEsQ0FBQyw2REFBTTs7QUFFUDs7QUFFQSxvREFBb0QsNkRBQU07O0FBRTFEOztBQUVBOztBQUVBOztBQUVBLG9CQUFvQiw4REFBTzs7QUFFM0IsbUJBQW1CLGlFQUFVO0FBQzdCO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBLEdBQUc7O0FBRUg7O0FBRUEsRUFBRTs7QUFFRjs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBLGtCQUFrQixnQkFBZ0I7O0FBRWxDOztBQUVBOztBQUVBOztBQUVBLGtCQUFrQixXQUFXOztBQUU3Qjs7QUFFQTs7QUFFQTs7QUFFQSxNQUFNOztBQUVOOztBQUVBOztBQUVBLGtCQUFrQixXQUFXOztBQUU3Qjs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQSxLQUFLOztBQUVMOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEscUJBQXFCLGFBQWE7O0FBRWxDLHNCQUFzQixhQUFhOztBQUVuQztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUEscUJBQXFCLGFBQWE7O0FBRWxDLHNCQUFzQixhQUFhOztBQUVuQyxzREFBc0Q7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQSxxQkFBcUIsYUFBYTs7QUFFbEMsc0JBQXNCLGFBQWE7O0FBRW5DO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUEscUJBQXFCLGFBQWE7O0FBRWxDLHNCQUFzQixhQUFhOztBQUVuQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBLHFCQUFxQixhQUFhOztBQUVsQyxzQkFBc0IsYUFBYTs7QUFFbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBLHFCQUFxQixhQUFhOztBQUVsQyxzQkFBc0IsYUFBYTs7QUFFbkM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSxJQUFJOztBQUVKOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBLENBQUM7O0FBRW9CIiwiZmlsZSI6Ii4vbm9kZV9tb2R1bGVzL3RocmVlL2V4YW1wbGVzL2pzbS9sb2FkZXJzL1RHQUxvYWRlci5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG5cdEZpbGVMb2FkZXIsXG5cdExvYWRlcixcblx0VGV4dHVyZVxufSBmcm9tICcuLi8uLi8uLi9idWlsZC90aHJlZS5tb2R1bGUuanMnO1xuXG52YXIgVEdBTG9hZGVyID0gZnVuY3Rpb24gKCBtYW5hZ2VyICkge1xuXG5cdExvYWRlci5jYWxsKCB0aGlzLCBtYW5hZ2VyICk7XG5cbn07XG5cblRHQUxvYWRlci5wcm90b3R5cGUgPSBPYmplY3QuYXNzaWduKCBPYmplY3QuY3JlYXRlKCBMb2FkZXIucHJvdG90eXBlICksIHtcblxuXHRjb25zdHJ1Y3RvcjogVEdBTG9hZGVyLFxuXG5cdGxvYWQ6IGZ1bmN0aW9uICggdXJsLCBvbkxvYWQsIG9uUHJvZ3Jlc3MsIG9uRXJyb3IgKSB7XG5cblx0XHR2YXIgc2NvcGUgPSB0aGlzO1xuXG5cdFx0dmFyIHRleHR1cmUgPSBuZXcgVGV4dHVyZSgpO1xuXG5cdFx0dmFyIGxvYWRlciA9IG5ldyBGaWxlTG9hZGVyKCB0aGlzLm1hbmFnZXIgKTtcblx0XHRsb2FkZXIuc2V0UmVzcG9uc2VUeXBlKCAnYXJyYXlidWZmZXInICk7XG5cdFx0bG9hZGVyLnNldFBhdGgoIHRoaXMucGF0aCApO1xuXHRcdGxvYWRlci5zZXRXaXRoQ3JlZGVudGlhbHMoIHRoaXMud2l0aENyZWRlbnRpYWxzICk7XG5cblx0XHRsb2FkZXIubG9hZCggdXJsLCBmdW5jdGlvbiAoIGJ1ZmZlciApIHtcblxuXHRcdFx0dGV4dHVyZS5pbWFnZSA9IHNjb3BlLnBhcnNlKCBidWZmZXIgKTtcblx0XHRcdHRleHR1cmUubmVlZHNVcGRhdGUgPSB0cnVlO1xuXG5cdFx0XHRpZiAoIG9uTG9hZCAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRcdG9uTG9hZCggdGV4dHVyZSApO1xuXG5cdFx0XHR9XG5cblx0XHR9LCBvblByb2dyZXNzLCBvbkVycm9yICk7XG5cblx0XHRyZXR1cm4gdGV4dHVyZTtcblxuXHR9LFxuXG5cdHBhcnNlOiBmdW5jdGlvbiAoIGJ1ZmZlciApIHtcblxuXHRcdC8vIHJlZmVyZW5jZSBmcm9tIHZ0aGliYXVsdCwgaHR0cHM6Ly9naXRodWIuY29tL3Z0aGliYXVsdC9yb0Jyb3dzZXIvYmxvYi9tYXN0ZXIvc3JjL0xvYWRlcnMvVGFyZ2EuanNcblxuXHRcdGZ1bmN0aW9uIHRnYUNoZWNrSGVhZGVyKCBoZWFkZXIgKSB7XG5cblx0XHRcdHN3aXRjaCAoIGhlYWRlci5pbWFnZV90eXBlICkge1xuXG5cdFx0XHRcdC8vIGNoZWNrIGluZGV4ZWQgdHlwZVxuXG5cdFx0XHRcdGNhc2UgVEdBX1RZUEVfSU5ERVhFRDpcblx0XHRcdFx0Y2FzZSBUR0FfVFlQRV9STEVfSU5ERVhFRDpcblx0XHRcdFx0XHRpZiAoIGhlYWRlci5jb2xvcm1hcF9sZW5ndGggPiAyNTYgfHwgaGVhZGVyLmNvbG9ybWFwX3NpemUgIT09IDI0IHx8IGhlYWRlci5jb2xvcm1hcF90eXBlICE9PSAxICkge1xuXG5cdFx0XHRcdFx0XHRjb25zb2xlLmVycm9yKCAnVEhSRUUuVEdBTG9hZGVyOiBJbnZhbGlkIHR5cGUgY29sb3JtYXAgZGF0YSBmb3IgaW5kZXhlZCB0eXBlLicgKTtcblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0Ly8gY2hlY2sgY29sb3JtYXAgdHlwZVxuXG5cdFx0XHRcdGNhc2UgVEdBX1RZUEVfUkdCOlxuXHRcdFx0XHRjYXNlIFRHQV9UWVBFX0dSRVk6XG5cdFx0XHRcdGNhc2UgVEdBX1RZUEVfUkxFX1JHQjpcblx0XHRcdFx0Y2FzZSBUR0FfVFlQRV9STEVfR1JFWTpcblx0XHRcdFx0XHRpZiAoIGhlYWRlci5jb2xvcm1hcF90eXBlICkge1xuXG5cdFx0XHRcdFx0XHRjb25zb2xlLmVycm9yKCAnVEhSRUUuVEdBTG9hZGVyOiBJbnZhbGlkIHR5cGUgY29sb3JtYXAgZGF0YSBmb3IgY29sb3JtYXAgdHlwZS4nICk7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdC8vIFdoYXQgdGhlIG5lZWQgb2YgYSBmaWxlIHdpdGhvdXQgZGF0YSA/XG5cblx0XHRcdFx0Y2FzZSBUR0FfVFlQRV9OT19EQVRBOlxuXHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoICdUSFJFRS5UR0FMb2FkZXI6IE5vIGRhdGEuJyApO1xuXG5cdFx0XHRcdFx0Ly8gSW52YWxpZCB0eXBlID9cblxuXHRcdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoICdUSFJFRS5UR0FMb2FkZXI6IEludmFsaWQgdHlwZSBcIiVzXCIuJywgaGVhZGVyLmltYWdlX3R5cGUgKTtcblxuXHRcdFx0fVxuXG5cdFx0XHQvLyBjaGVjayBpbWFnZSB3aWR0aCBhbmQgaGVpZ2h0XG5cblx0XHRcdGlmICggaGVhZGVyLndpZHRoIDw9IDAgfHwgaGVhZGVyLmhlaWdodCA8PSAwICkge1xuXG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IoICdUSFJFRS5UR0FMb2FkZXI6IEludmFsaWQgaW1hZ2Ugc2l6ZS4nICk7XG5cblx0XHRcdH1cblxuXHRcdFx0Ly8gY2hlY2sgaW1hZ2UgcGl4ZWwgc2l6ZVxuXG5cdFx0XHRpZiAoIGhlYWRlci5waXhlbF9zaXplICE9PSA4ICYmIGhlYWRlci5waXhlbF9zaXplICE9PSAxNiAmJlxuXHRcdFx0XHRoZWFkZXIucGl4ZWxfc2l6ZSAhPT0gMjQgJiYgaGVhZGVyLnBpeGVsX3NpemUgIT09IDMyICkge1xuXG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IoICdUSFJFRS5UR0FMb2FkZXI6IEludmFsaWQgcGl4ZWwgc2l6ZSBcIiVzXCIuJywgaGVhZGVyLnBpeGVsX3NpemUgKTtcblxuXHRcdFx0fVxuXG5cdFx0fVxuXG5cdFx0Ly8gcGFyc2UgdGdhIGltYWdlIGJ1ZmZlclxuXG5cdFx0ZnVuY3Rpb24gdGdhUGFyc2UoIHVzZV9ybGUsIHVzZV9wYWwsIGhlYWRlciwgb2Zmc2V0LCBkYXRhICkge1xuXG5cdFx0XHR2YXIgcGl4ZWxfZGF0YSxcblx0XHRcdFx0cGl4ZWxfc2l6ZSxcblx0XHRcdFx0cGl4ZWxfdG90YWwsXG5cdFx0XHRcdHBhbGV0dGVzO1xuXG5cdFx0XHRwaXhlbF9zaXplID0gaGVhZGVyLnBpeGVsX3NpemUgPj4gMztcblx0XHRcdHBpeGVsX3RvdGFsID0gaGVhZGVyLndpZHRoICogaGVhZGVyLmhlaWdodCAqIHBpeGVsX3NpemU7XG5cblx0XHRcdCAvLyByZWFkIHBhbGV0dGVzXG5cblx0XHRcdCBpZiAoIHVzZV9wYWwgKSB7XG5cblx0XHRcdFx0IHBhbGV0dGVzID0gZGF0YS5zdWJhcnJheSggb2Zmc2V0LCBvZmZzZXQgKz0gaGVhZGVyLmNvbG9ybWFwX2xlbmd0aCAqICggaGVhZGVyLmNvbG9ybWFwX3NpemUgPj4gMyApICk7XG5cblx0XHRcdCB9XG5cblx0XHRcdCAvLyByZWFkIFJMRVxuXG5cdFx0XHQgaWYgKCB1c2VfcmxlICkge1xuXG5cdFx0XHRcdCBwaXhlbF9kYXRhID0gbmV3IFVpbnQ4QXJyYXkoIHBpeGVsX3RvdGFsICk7XG5cblx0XHRcdFx0dmFyIGMsIGNvdW50LCBpO1xuXHRcdFx0XHR2YXIgc2hpZnQgPSAwO1xuXHRcdFx0XHR2YXIgcGl4ZWxzID0gbmV3IFVpbnQ4QXJyYXkoIHBpeGVsX3NpemUgKTtcblxuXHRcdFx0XHR3aGlsZSAoIHNoaWZ0IDwgcGl4ZWxfdG90YWwgKSB7XG5cblx0XHRcdFx0XHRjID0gZGF0YVsgb2Zmc2V0ICsrIF07XG5cdFx0XHRcdFx0Y291bnQgPSAoIGMgJiAweDdmICkgKyAxO1xuXG5cdFx0XHRcdFx0Ly8gUkxFIHBpeGVsc1xuXG5cdFx0XHRcdFx0aWYgKCBjICYgMHg4MCApIHtcblxuXHRcdFx0XHRcdFx0Ly8gYmluZCBwaXhlbCB0bXAgYXJyYXlcblxuXHRcdFx0XHRcdFx0Zm9yICggaSA9IDA7IGkgPCBwaXhlbF9zaXplOyArKyBpICkge1xuXG5cdFx0XHRcdFx0XHRcdHBpeGVsc1sgaSBdID0gZGF0YVsgb2Zmc2V0ICsrIF07XG5cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0Ly8gY29weSBwaXhlbCBhcnJheVxuXG5cdFx0XHRcdFx0XHRmb3IgKCBpID0gMDsgaSA8IGNvdW50OyArKyBpICkge1xuXG5cdFx0XHRcdFx0XHRcdHBpeGVsX2RhdGEuc2V0KCBwaXhlbHMsIHNoaWZ0ICsgaSAqIHBpeGVsX3NpemUgKTtcblxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRzaGlmdCArPSBwaXhlbF9zaXplICogY291bnQ7XG5cblx0XHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0XHQvLyByYXcgcGl4ZWxzXG5cblx0XHRcdFx0XHRcdGNvdW50ICo9IHBpeGVsX3NpemU7XG5cblx0XHRcdFx0XHRcdGZvciAoIGkgPSAwOyBpIDwgY291bnQ7ICsrIGkgKSB7XG5cblx0XHRcdFx0XHRcdFx0cGl4ZWxfZGF0YVsgc2hpZnQgKyBpIF0gPSBkYXRhWyBvZmZzZXQgKysgXTtcblxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRzaGlmdCArPSBjb3VudDtcblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHR9XG5cblx0XHRcdCB9IGVsc2Uge1xuXG5cdFx0XHRcdC8vIHJhdyBwaXhlbHNcblxuXHRcdFx0XHRwaXhlbF9kYXRhID0gZGF0YS5zdWJhcnJheShcblx0XHRcdFx0XHQgb2Zmc2V0LCBvZmZzZXQgKz0gKCB1c2VfcGFsID8gaGVhZGVyLndpZHRoICogaGVhZGVyLmhlaWdodCA6IHBpeGVsX3RvdGFsIClcblx0XHRcdFx0KTtcblxuXHRcdFx0IH1cblxuXHRcdFx0IHJldHVybiB7XG5cdFx0XHRcdHBpeGVsX2RhdGE6IHBpeGVsX2RhdGEsXG5cdFx0XHRcdHBhbGV0dGVzOiBwYWxldHRlc1xuXHRcdFx0IH07XG5cblx0XHR9XG5cblx0XHRmdW5jdGlvbiB0Z2FHZXRJbWFnZURhdGE4Yml0cyggaW1hZ2VEYXRhLCB5X3N0YXJ0LCB5X3N0ZXAsIHlfZW5kLCB4X3N0YXJ0LCB4X3N0ZXAsIHhfZW5kLCBpbWFnZSwgcGFsZXR0ZXMgKSB7XG5cblx0XHRcdHZhciBjb2xvcm1hcCA9IHBhbGV0dGVzO1xuXHRcdFx0dmFyIGNvbG9yLCBpID0gMCwgeCwgeTtcblx0XHRcdHZhciB3aWR0aCA9IGhlYWRlci53aWR0aDtcblxuXHRcdFx0Zm9yICggeSA9IHlfc3RhcnQ7IHkgIT09IHlfZW5kOyB5ICs9IHlfc3RlcCApIHtcblxuXHRcdFx0XHRmb3IgKCB4ID0geF9zdGFydDsgeCAhPT0geF9lbmQ7IHggKz0geF9zdGVwLCBpICsrICkge1xuXG5cdFx0XHRcdFx0Y29sb3IgPSBpbWFnZVsgaSBdO1xuXHRcdFx0XHRcdGltYWdlRGF0YVsgKCB4ICsgd2lkdGggKiB5ICkgKiA0ICsgMyBdID0gMjU1O1xuXHRcdFx0XHRcdGltYWdlRGF0YVsgKCB4ICsgd2lkdGggKiB5ICkgKiA0ICsgMiBdID0gY29sb3JtYXBbICggY29sb3IgKiAzICkgKyAwIF07XG5cdFx0XHRcdFx0aW1hZ2VEYXRhWyAoIHggKyB3aWR0aCAqIHkgKSAqIDQgKyAxIF0gPSBjb2xvcm1hcFsgKCBjb2xvciAqIDMgKSArIDEgXTtcblx0XHRcdFx0XHRpbWFnZURhdGFbICggeCArIHdpZHRoICogeSApICogNCArIDAgXSA9IGNvbG9ybWFwWyAoIGNvbG9yICogMyApICsgMiBdO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gaW1hZ2VEYXRhO1xuXG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gdGdhR2V0SW1hZ2VEYXRhMTZiaXRzKCBpbWFnZURhdGEsIHlfc3RhcnQsIHlfc3RlcCwgeV9lbmQsIHhfc3RhcnQsIHhfc3RlcCwgeF9lbmQsIGltYWdlICkge1xuXG5cdFx0XHR2YXIgY29sb3IsIGkgPSAwLCB4LCB5O1xuXHRcdFx0dmFyIHdpZHRoID0gaGVhZGVyLndpZHRoO1xuXG5cdFx0XHRmb3IgKCB5ID0geV9zdGFydDsgeSAhPT0geV9lbmQ7IHkgKz0geV9zdGVwICkge1xuXG5cdFx0XHRcdGZvciAoIHggPSB4X3N0YXJ0OyB4ICE9PSB4X2VuZDsgeCArPSB4X3N0ZXAsIGkgKz0gMiApIHtcblxuXHRcdFx0XHRcdGNvbG9yID0gaW1hZ2VbIGkgKyAwIF0gKyAoIGltYWdlWyBpICsgMSBdIDw8IDggKTsgLy8gSW52ZXJzZWQgP1xuXHRcdFx0XHRcdGltYWdlRGF0YVsgKCB4ICsgd2lkdGggKiB5ICkgKiA0ICsgMCBdID0gKCBjb2xvciAmIDB4N0MwMCApID4+IDc7XG5cdFx0XHRcdFx0aW1hZ2VEYXRhWyAoIHggKyB3aWR0aCAqIHkgKSAqIDQgKyAxIF0gPSAoIGNvbG9yICYgMHgwM0UwICkgPj4gMjtcblx0XHRcdFx0XHRpbWFnZURhdGFbICggeCArIHdpZHRoICogeSApICogNCArIDIgXSA9ICggY29sb3IgJiAweDAwMUYgKSA+PiAzO1xuXHRcdFx0XHRcdGltYWdlRGF0YVsgKCB4ICsgd2lkdGggKiB5ICkgKiA0ICsgMyBdID0gKCBjb2xvciAmIDB4ODAwMCApID8gMCA6IDI1NTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGltYWdlRGF0YTtcblxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIHRnYUdldEltYWdlRGF0YTI0Yml0cyggaW1hZ2VEYXRhLCB5X3N0YXJ0LCB5X3N0ZXAsIHlfZW5kLCB4X3N0YXJ0LCB4X3N0ZXAsIHhfZW5kLCBpbWFnZSApIHtcblxuXHRcdFx0dmFyIGkgPSAwLCB4LCB5O1xuXHRcdFx0dmFyIHdpZHRoID0gaGVhZGVyLndpZHRoO1xuXG5cdFx0XHRmb3IgKCB5ID0geV9zdGFydDsgeSAhPT0geV9lbmQ7IHkgKz0geV9zdGVwICkge1xuXG5cdFx0XHRcdGZvciAoIHggPSB4X3N0YXJ0OyB4ICE9PSB4X2VuZDsgeCArPSB4X3N0ZXAsIGkgKz0gMyApIHtcblxuXHRcdFx0XHRcdGltYWdlRGF0YVsgKCB4ICsgd2lkdGggKiB5ICkgKiA0ICsgMyBdID0gMjU1O1xuXHRcdFx0XHRcdGltYWdlRGF0YVsgKCB4ICsgd2lkdGggKiB5ICkgKiA0ICsgMiBdID0gaW1hZ2VbIGkgKyAwIF07XG5cdFx0XHRcdFx0aW1hZ2VEYXRhWyAoIHggKyB3aWR0aCAqIHkgKSAqIDQgKyAxIF0gPSBpbWFnZVsgaSArIDEgXTtcblx0XHRcdFx0XHRpbWFnZURhdGFbICggeCArIHdpZHRoICogeSApICogNCArIDAgXSA9IGltYWdlWyBpICsgMiBdO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gaW1hZ2VEYXRhO1xuXG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gdGdhR2V0SW1hZ2VEYXRhMzJiaXRzKCBpbWFnZURhdGEsIHlfc3RhcnQsIHlfc3RlcCwgeV9lbmQsIHhfc3RhcnQsIHhfc3RlcCwgeF9lbmQsIGltYWdlICkge1xuXG5cdFx0XHR2YXIgaSA9IDAsIHgsIHk7XG5cdFx0XHR2YXIgd2lkdGggPSBoZWFkZXIud2lkdGg7XG5cblx0XHRcdGZvciAoIHkgPSB5X3N0YXJ0OyB5ICE9PSB5X2VuZDsgeSArPSB5X3N0ZXAgKSB7XG5cblx0XHRcdFx0Zm9yICggeCA9IHhfc3RhcnQ7IHggIT09IHhfZW5kOyB4ICs9IHhfc3RlcCwgaSArPSA0ICkge1xuXG5cdFx0XHRcdFx0aW1hZ2VEYXRhWyAoIHggKyB3aWR0aCAqIHkgKSAqIDQgKyAyIF0gPSBpbWFnZVsgaSArIDAgXTtcblx0XHRcdFx0XHRpbWFnZURhdGFbICggeCArIHdpZHRoICogeSApICogNCArIDEgXSA9IGltYWdlWyBpICsgMSBdO1xuXHRcdFx0XHRcdGltYWdlRGF0YVsgKCB4ICsgd2lkdGggKiB5ICkgKiA0ICsgMCBdID0gaW1hZ2VbIGkgKyAyIF07XG5cdFx0XHRcdFx0aW1hZ2VEYXRhWyAoIHggKyB3aWR0aCAqIHkgKSAqIDQgKyAzIF0gPSBpbWFnZVsgaSArIDMgXTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGltYWdlRGF0YTtcblxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIHRnYUdldEltYWdlRGF0YUdyZXk4Yml0cyggaW1hZ2VEYXRhLCB5X3N0YXJ0LCB5X3N0ZXAsIHlfZW5kLCB4X3N0YXJ0LCB4X3N0ZXAsIHhfZW5kLCBpbWFnZSApIHtcblxuXHRcdFx0dmFyIGNvbG9yLCBpID0gMCwgeCwgeTtcblx0XHRcdHZhciB3aWR0aCA9IGhlYWRlci53aWR0aDtcblxuXHRcdFx0Zm9yICggeSA9IHlfc3RhcnQ7IHkgIT09IHlfZW5kOyB5ICs9IHlfc3RlcCApIHtcblxuXHRcdFx0XHRmb3IgKCB4ID0geF9zdGFydDsgeCAhPT0geF9lbmQ7IHggKz0geF9zdGVwLCBpICsrICkge1xuXG5cdFx0XHRcdFx0Y29sb3IgPSBpbWFnZVsgaSBdO1xuXHRcdFx0XHRcdGltYWdlRGF0YVsgKCB4ICsgd2lkdGggKiB5ICkgKiA0ICsgMCBdID0gY29sb3I7XG5cdFx0XHRcdFx0aW1hZ2VEYXRhWyAoIHggKyB3aWR0aCAqIHkgKSAqIDQgKyAxIF0gPSBjb2xvcjtcblx0XHRcdFx0XHRpbWFnZURhdGFbICggeCArIHdpZHRoICogeSApICogNCArIDIgXSA9IGNvbG9yO1xuXHRcdFx0XHRcdGltYWdlRGF0YVsgKCB4ICsgd2lkdGggKiB5ICkgKiA0ICsgMyBdID0gMjU1O1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gaW1hZ2VEYXRhO1xuXG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gdGdhR2V0SW1hZ2VEYXRhR3JleTE2Yml0cyggaW1hZ2VEYXRhLCB5X3N0YXJ0LCB5X3N0ZXAsIHlfZW5kLCB4X3N0YXJ0LCB4X3N0ZXAsIHhfZW5kLCBpbWFnZSApIHtcblxuXHRcdFx0dmFyIGkgPSAwLCB4LCB5O1xuXHRcdFx0dmFyIHdpZHRoID0gaGVhZGVyLndpZHRoO1xuXG5cdFx0XHRmb3IgKCB5ID0geV9zdGFydDsgeSAhPT0geV9lbmQ7IHkgKz0geV9zdGVwICkge1xuXG5cdFx0XHRcdGZvciAoIHggPSB4X3N0YXJ0OyB4ICE9PSB4X2VuZDsgeCArPSB4X3N0ZXAsIGkgKz0gMiApIHtcblxuXHRcdFx0XHRcdGltYWdlRGF0YVsgKCB4ICsgd2lkdGggKiB5ICkgKiA0ICsgMCBdID0gaW1hZ2VbIGkgKyAwIF07XG5cdFx0XHRcdFx0aW1hZ2VEYXRhWyAoIHggKyB3aWR0aCAqIHkgKSAqIDQgKyAxIF0gPSBpbWFnZVsgaSArIDAgXTtcblx0XHRcdFx0XHRpbWFnZURhdGFbICggeCArIHdpZHRoICogeSApICogNCArIDIgXSA9IGltYWdlWyBpICsgMCBdO1xuXHRcdFx0XHRcdGltYWdlRGF0YVsgKCB4ICsgd2lkdGggKiB5ICkgKiA0ICsgMyBdID0gaW1hZ2VbIGkgKyAxIF07XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBpbWFnZURhdGE7XG5cblx0XHR9XG5cblx0XHRmdW5jdGlvbiBnZXRUZ2FSR0JBKCBkYXRhLCB3aWR0aCwgaGVpZ2h0LCBpbWFnZSwgcGFsZXR0ZSApIHtcblxuXHRcdFx0dmFyIHhfc3RhcnQsXG5cdFx0XHRcdHlfc3RhcnQsXG5cdFx0XHRcdHhfc3RlcCxcblx0XHRcdFx0eV9zdGVwLFxuXHRcdFx0XHR4X2VuZCxcblx0XHRcdFx0eV9lbmQ7XG5cblx0XHRcdHN3aXRjaCAoICggaGVhZGVyLmZsYWdzICYgVEdBX09SSUdJTl9NQVNLICkgPj4gVEdBX09SSUdJTl9TSElGVCApIHtcblxuXHRcdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRjYXNlIFRHQV9PUklHSU5fVUw6XG5cdFx0XHRcdFx0eF9zdGFydCA9IDA7XG5cdFx0XHRcdFx0eF9zdGVwID0gMTtcblx0XHRcdFx0XHR4X2VuZCA9IHdpZHRoO1xuXHRcdFx0XHRcdHlfc3RhcnQgPSAwO1xuXHRcdFx0XHRcdHlfc3RlcCA9IDE7XG5cdFx0XHRcdFx0eV9lbmQgPSBoZWlnaHQ7XG5cdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0Y2FzZSBUR0FfT1JJR0lOX0JMOlxuXHRcdFx0XHRcdHhfc3RhcnQgPSAwO1xuXHRcdFx0XHRcdHhfc3RlcCA9IDE7XG5cdFx0XHRcdFx0eF9lbmQgPSB3aWR0aDtcblx0XHRcdFx0XHR5X3N0YXJ0ID0gaGVpZ2h0IC0gMTtcblx0XHRcdFx0XHR5X3N0ZXAgPSAtIDE7XG5cdFx0XHRcdFx0eV9lbmQgPSAtIDE7XG5cdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0Y2FzZSBUR0FfT1JJR0lOX1VSOlxuXHRcdFx0XHRcdHhfc3RhcnQgPSB3aWR0aCAtIDE7XG5cdFx0XHRcdFx0eF9zdGVwID0gLSAxO1xuXHRcdFx0XHRcdHhfZW5kID0gLSAxO1xuXHRcdFx0XHRcdHlfc3RhcnQgPSAwO1xuXHRcdFx0XHRcdHlfc3RlcCA9IDE7XG5cdFx0XHRcdFx0eV9lbmQgPSBoZWlnaHQ7XG5cdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0Y2FzZSBUR0FfT1JJR0lOX0JSOlxuXHRcdFx0XHRcdHhfc3RhcnQgPSB3aWR0aCAtIDE7XG5cdFx0XHRcdFx0eF9zdGVwID0gLSAxO1xuXHRcdFx0XHRcdHhfZW5kID0gLSAxO1xuXHRcdFx0XHRcdHlfc3RhcnQgPSBoZWlnaHQgLSAxO1xuXHRcdFx0XHRcdHlfc3RlcCA9IC0gMTtcblx0XHRcdFx0XHR5X2VuZCA9IC0gMTtcblx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIHVzZV9ncmV5ICkge1xuXG5cdFx0XHRcdHN3aXRjaCAoIGhlYWRlci5waXhlbF9zaXplICkge1xuXG5cdFx0XHRcdFx0Y2FzZSA4OlxuXHRcdFx0XHRcdFx0dGdhR2V0SW1hZ2VEYXRhR3JleThiaXRzKCBkYXRhLCB5X3N0YXJ0LCB5X3N0ZXAsIHlfZW5kLCB4X3N0YXJ0LCB4X3N0ZXAsIHhfZW5kLCBpbWFnZSApO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRjYXNlIDE2OlxuXHRcdFx0XHRcdFx0dGdhR2V0SW1hZ2VEYXRhR3JleTE2Yml0cyggZGF0YSwgeV9zdGFydCwgeV9zdGVwLCB5X2VuZCwgeF9zdGFydCwgeF9zdGVwLCB4X2VuZCwgaW1hZ2UgKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoICdUSFJFRS5UR0FMb2FkZXI6IEZvcm1hdCBub3Qgc3VwcG9ydGVkLicgKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRzd2l0Y2ggKCBoZWFkZXIucGl4ZWxfc2l6ZSApIHtcblxuXHRcdFx0XHRcdGNhc2UgODpcblx0XHRcdFx0XHRcdHRnYUdldEltYWdlRGF0YThiaXRzKCBkYXRhLCB5X3N0YXJ0LCB5X3N0ZXAsIHlfZW5kLCB4X3N0YXJ0LCB4X3N0ZXAsIHhfZW5kLCBpbWFnZSwgcGFsZXR0ZSApO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRjYXNlIDE2OlxuXHRcdFx0XHRcdFx0dGdhR2V0SW1hZ2VEYXRhMTZiaXRzKCBkYXRhLCB5X3N0YXJ0LCB5X3N0ZXAsIHlfZW5kLCB4X3N0YXJ0LCB4X3N0ZXAsIHhfZW5kLCBpbWFnZSApO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRjYXNlIDI0OlxuXHRcdFx0XHRcdFx0dGdhR2V0SW1hZ2VEYXRhMjRiaXRzKCBkYXRhLCB5X3N0YXJ0LCB5X3N0ZXAsIHlfZW5kLCB4X3N0YXJ0LCB4X3N0ZXAsIHhfZW5kLCBpbWFnZSApO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRjYXNlIDMyOlxuXHRcdFx0XHRcdFx0dGdhR2V0SW1hZ2VEYXRhMzJiaXRzKCBkYXRhLCB5X3N0YXJ0LCB5X3N0ZXAsIHlfZW5kLCB4X3N0YXJ0LCB4X3N0ZXAsIHhfZW5kLCBpbWFnZSApO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRcdFx0Y29uc29sZS5lcnJvciggJ1RIUkVFLlRHQUxvYWRlcjogRm9ybWF0IG5vdCBzdXBwb3J0ZWQuJyApO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9XG5cblx0XHRcdC8vIExvYWQgaW1hZ2UgZGF0YSBhY2NvcmRpbmcgdG8gc3BlY2lmaWMgbWV0aG9kXG5cdFx0XHQvLyB2YXIgZnVuYyA9ICd0Z2FHZXRJbWFnZURhdGEnICsgKHVzZV9ncmV5ID8gJ0dyZXknIDogJycpICsgKGhlYWRlci5waXhlbF9zaXplKSArICdiaXRzJztcblx0XHRcdC8vIGZ1bmMoZGF0YSwgeV9zdGFydCwgeV9zdGVwLCB5X2VuZCwgeF9zdGFydCwgeF9zdGVwLCB4X2VuZCwgd2lkdGgsIGltYWdlLCBwYWxldHRlICk7XG5cdFx0XHRyZXR1cm4gZGF0YTtcblxuXHRcdH1cblxuXHRcdC8vIFRHQSBjb25zdGFudHNcblxuXHRcdHZhciBUR0FfVFlQRV9OT19EQVRBID0gMCxcblx0XHRcdFRHQV9UWVBFX0lOREVYRUQgPSAxLFxuXHRcdFx0VEdBX1RZUEVfUkdCID0gMixcblx0XHRcdFRHQV9UWVBFX0dSRVkgPSAzLFxuXHRcdFx0VEdBX1RZUEVfUkxFX0lOREVYRUQgPSA5LFxuXHRcdFx0VEdBX1RZUEVfUkxFX1JHQiA9IDEwLFxuXHRcdFx0VEdBX1RZUEVfUkxFX0dSRVkgPSAxMSxcblxuXHRcdFx0VEdBX09SSUdJTl9NQVNLID0gMHgzMCxcblx0XHRcdFRHQV9PUklHSU5fU0hJRlQgPSAweDA0LFxuXHRcdFx0VEdBX09SSUdJTl9CTCA9IDB4MDAsXG5cdFx0XHRUR0FfT1JJR0lOX0JSID0gMHgwMSxcblx0XHRcdFRHQV9PUklHSU5fVUwgPSAweDAyLFxuXHRcdFx0VEdBX09SSUdJTl9VUiA9IDB4MDM7XG5cblx0XHRpZiAoIGJ1ZmZlci5sZW5ndGggPCAxOSApIGNvbnNvbGUuZXJyb3IoICdUSFJFRS5UR0FMb2FkZXI6IE5vdCBlbm91Z2ggZGF0YSB0byBjb250YWluIGhlYWRlci4nICk7XG5cblx0XHR2YXIgY29udGVudCA9IG5ldyBVaW50OEFycmF5KCBidWZmZXIgKSxcblx0XHRcdG9mZnNldCA9IDAsXG5cdFx0XHRoZWFkZXIgPSB7XG5cdFx0XHRcdGlkX2xlbmd0aDogY29udGVudFsgb2Zmc2V0ICsrIF0sXG5cdFx0XHRcdGNvbG9ybWFwX3R5cGU6IGNvbnRlbnRbIG9mZnNldCArKyBdLFxuXHRcdFx0XHRpbWFnZV90eXBlOiBjb250ZW50WyBvZmZzZXQgKysgXSxcblx0XHRcdFx0Y29sb3JtYXBfaW5kZXg6IGNvbnRlbnRbIG9mZnNldCArKyBdIHwgY29udGVudFsgb2Zmc2V0ICsrIF0gPDwgOCxcblx0XHRcdFx0Y29sb3JtYXBfbGVuZ3RoOiBjb250ZW50WyBvZmZzZXQgKysgXSB8IGNvbnRlbnRbIG9mZnNldCArKyBdIDw8IDgsXG5cdFx0XHRcdGNvbG9ybWFwX3NpemU6IGNvbnRlbnRbIG9mZnNldCArKyBdLFxuXHRcdFx0XHRvcmlnaW46IFtcblx0XHRcdFx0XHRjb250ZW50WyBvZmZzZXQgKysgXSB8IGNvbnRlbnRbIG9mZnNldCArKyBdIDw8IDgsXG5cdFx0XHRcdFx0Y29udGVudFsgb2Zmc2V0ICsrIF0gfCBjb250ZW50WyBvZmZzZXQgKysgXSA8PCA4XG5cdFx0XHRcdF0sXG5cdFx0XHRcdHdpZHRoOiBjb250ZW50WyBvZmZzZXQgKysgXSB8IGNvbnRlbnRbIG9mZnNldCArKyBdIDw8IDgsXG5cdFx0XHRcdGhlaWdodDogY29udGVudFsgb2Zmc2V0ICsrIF0gfCBjb250ZW50WyBvZmZzZXQgKysgXSA8PCA4LFxuXHRcdFx0XHRwaXhlbF9zaXplOiBjb250ZW50WyBvZmZzZXQgKysgXSxcblx0XHRcdFx0ZmxhZ3M6IGNvbnRlbnRbIG9mZnNldCArKyBdXG5cdFx0XHR9O1xuXG5cdFx0Ly8gY2hlY2sgdGdhIGlmIGl0IGlzIHZhbGlkIGZvcm1hdFxuXG5cdFx0dGdhQ2hlY2tIZWFkZXIoIGhlYWRlciApO1xuXG5cdFx0aWYgKCBoZWFkZXIuaWRfbGVuZ3RoICsgb2Zmc2V0ID4gYnVmZmVyLmxlbmd0aCApIHtcblxuXHRcdFx0Y29uc29sZS5lcnJvciggJ1RIUkVFLlRHQUxvYWRlcjogTm8gZGF0YS4nICk7XG5cblx0XHR9XG5cblx0XHQvLyBza2lwIHRoZSBuZWVkbid0IGRhdGFcblxuXHRcdG9mZnNldCArPSBoZWFkZXIuaWRfbGVuZ3RoO1xuXG5cdFx0Ly8gZ2V0IHRhcmdhIGluZm9ybWF0aW9uIGFib3V0IFJMRSBjb21wcmVzc2lvbiBhbmQgcGFsZXR0ZVxuXG5cdFx0dmFyIHVzZV9ybGUgPSBmYWxzZSxcblx0XHRcdHVzZV9wYWwgPSBmYWxzZSxcblx0XHRcdHVzZV9ncmV5ID0gZmFsc2U7XG5cblx0XHRzd2l0Y2ggKCBoZWFkZXIuaW1hZ2VfdHlwZSApIHtcblxuXHRcdFx0Y2FzZSBUR0FfVFlQRV9STEVfSU5ERVhFRDpcblx0XHRcdFx0dXNlX3JsZSA9IHRydWU7XG5cdFx0XHRcdHVzZV9wYWwgPSB0cnVlO1xuXHRcdFx0XHRicmVhaztcblxuXHRcdFx0Y2FzZSBUR0FfVFlQRV9JTkRFWEVEOlxuXHRcdFx0XHR1c2VfcGFsID0gdHJ1ZTtcblx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdGNhc2UgVEdBX1RZUEVfUkxFX1JHQjpcblx0XHRcdFx0dXNlX3JsZSA9IHRydWU7XG5cdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRjYXNlIFRHQV9UWVBFX1JHQjpcblx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdGNhc2UgVEdBX1RZUEVfUkxFX0dSRVk6XG5cdFx0XHRcdHVzZV9ybGUgPSB0cnVlO1xuXHRcdFx0XHR1c2VfZ3JleSA9IHRydWU7XG5cdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRjYXNlIFRHQV9UWVBFX0dSRVk6XG5cdFx0XHRcdHVzZV9ncmV5ID0gdHJ1ZTtcblx0XHRcdFx0YnJlYWs7XG5cblx0XHR9XG5cblx0XHQvL1xuXG5cdFx0dmFyIHVzZU9mZnNjcmVlbiA9IHR5cGVvZiBPZmZzY3JlZW5DYW52YXMgIT09ICd1bmRlZmluZWQnO1xuXG5cdFx0dmFyIGNhbnZhcyA9IHVzZU9mZnNjcmVlbiA/IG5ldyBPZmZzY3JlZW5DYW52YXMoIGhlYWRlci53aWR0aCwgaGVhZGVyLmhlaWdodCApIDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ2NhbnZhcycgKTtcblx0XHRjYW52YXMud2lkdGggPSBoZWFkZXIud2lkdGg7XG5cdFx0Y2FudmFzLmhlaWdodCA9IGhlYWRlci5oZWlnaHQ7XG5cblx0XHR2YXIgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCAnMmQnICk7XG5cdFx0dmFyIGltYWdlRGF0YSA9IGNvbnRleHQuY3JlYXRlSW1hZ2VEYXRhKCBoZWFkZXIud2lkdGgsIGhlYWRlci5oZWlnaHQgKTtcblxuXHRcdHZhciByZXN1bHQgPSB0Z2FQYXJzZSggdXNlX3JsZSwgdXNlX3BhbCwgaGVhZGVyLCBvZmZzZXQsIGNvbnRlbnQgKTtcblx0XHRnZXRUZ2FSR0JBKCBpbWFnZURhdGEuZGF0YSwgaGVhZGVyLndpZHRoLCBoZWFkZXIuaGVpZ2h0LCByZXN1bHQucGl4ZWxfZGF0YSwgcmVzdWx0LnBhbGV0dGVzICk7XG5cblx0XHRjb250ZXh0LnB1dEltYWdlRGF0YSggaW1hZ2VEYXRhLCAwLCAwICk7XG5cblx0XHRyZXR1cm4gY2FudmFzO1xuXG5cdH1cblxufSApO1xuXG5leHBvcnQgeyBUR0FMb2FkZXIgfTtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/three/examples/jsm/loaders/TGALoader.js\n");

/***/ }),

/***/ "./node_modules/three/examples/jsm/loaders/VRMLLoader.js":
/*!***************************************************************!*\
  !*** ./node_modules/three/examples/jsm/loaders/VRMLLoader.js ***!
  \***************************************************************/
/*! exports provided: VRMLLoader */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"VRMLLoader\", function() { return VRMLLoader; });\n/* harmony import */ var _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../build/three.module.js */ \"./node_modules/three/build/three.module.js\");\n/* harmony import */ var _libs_chevrotain_module_min_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../libs/chevrotain.module.min.js */ \"./node_modules/three/examples/jsm/libs/chevrotain.module.min.js\");\n\n\n\nvar VRMLLoader = ( function () {\n\n\t// dependency check\n\n\tif ( typeof _libs_chevrotain_module_min_js__WEBPACK_IMPORTED_MODULE_1__[\"chevrotain\"] === 'undefined' ) { // eslint-disable-line no-undef\n\n\t\tthrow Error( 'THREE.VRMLLoader: External library chevrotain.min.js required.' );\n\n\t}\n\n\t// class definitions\n\n\tfunction VRMLLoader( manager ) {\n\n\t\t_build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Loader\"].call( this, manager );\n\n\t}\n\n\tVRMLLoader.prototype = Object.assign( Object.create( _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Loader\"].prototype ), {\n\n\t\tconstructor: VRMLLoader,\n\n\t\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\t\tvar scope = this;\n\n\t\t\tvar path = ( scope.path === '' ) ? _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"LoaderUtils\"].extractUrlBase( url ) : scope.path;\n\n\t\t\tvar loader = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"FileLoader\"]( scope.manager );\n\t\t\tloader.setPath( scope.path );\n\t\t\tloader.setRequestHeader( scope.requestHeader );\n\t\t\tloader.setWithCredentials( scope.withCredentials );\n\t\t\tloader.load( url, function ( text ) {\n\n\t\t\t\ttry {\n\n\t\t\t\t\tonLoad( scope.parse( text, path ) );\n\n\t\t\t\t} catch ( e ) {\n\n\t\t\t\t\tif ( onError ) {\n\n\t\t\t\t\t\tonError( e );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconsole.error( e );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t\t}\n\n\t\t\t}, onProgress, onError );\n\n\t\t},\n\n\t\tparse: function ( data, path ) {\n\n\t\t\tvar nodeMap = {};\n\n\t\t\tfunction generateVRMLTree( data ) {\n\n\t\t\t\t// create lexer, parser and visitor\n\n\t\t\t\tvar tokenData = createTokens();\n\n\t\t\t\tvar lexer = new VRMLLexer( tokenData.tokens );\n\t\t\t\tvar parser = new VRMLParser( tokenData.tokenVocabulary );\n\t\t\t\tvar visitor = createVisitor( parser.getBaseCstVisitorConstructor() );\n\n\t\t\t\t// lexing\n\n\t\t\t\tvar lexingResult = lexer.lex( data );\n\t\t\t\tparser.input = lexingResult.tokens;\n\n\t\t\t\t// parsing\n\n\t\t\t\tvar cstOutput = parser.vrml();\n\n\t\t\t\tif ( parser.errors.length > 0 ) {\n\n\t\t\t\t\tconsole.error( parser.errors );\n\n\t\t\t\t\tthrow Error( 'THREE.VRMLLoader: Parsing errors detected.' );\n\n\t\t\t\t}\n\n\t\t\t\t// actions\n\n\t\t\t\tvar ast = visitor.visit( cstOutput );\n\n\t\t\t\treturn ast;\n\n\t\t\t}\n\n\t\t\tfunction createTokens() {\n\n\t\t\t\tvar createToken = _libs_chevrotain_module_min_js__WEBPACK_IMPORTED_MODULE_1__[\"chevrotain\"].createToken; // eslint-disable-line no-undef\n\n\t\t\t\t// from http://gun.teipir.gr/VRML-amgem/spec/part1/concepts.html#SyntaxBasics\n\n\t\t\t\tvar RouteIdentifier = createToken( { name: 'RouteIdentifier', pattern: /[^\\x30-\\x39\\0-\\x20\\x22\\x27\\x23\\x2b\\x2c\\x2d\\x2e\\x5b\\x5d\\x5c\\x7b\\x7d][^\\0-\\x20\\x22\\x27\\x23\\x2b\\x2c\\x2d\\x2e\\x5b\\x5d\\x5c\\x7b\\x7d]*[\\.][^\\x30-\\x39\\0-\\x20\\x22\\x27\\x23\\x2b\\x2c\\x2d\\x2e\\x5b\\x5d\\x5c\\x7b\\x7d][^\\0-\\x20\\x22\\x27\\x23\\x2b\\x2c\\x2d\\x2e\\x5b\\x5d\\x5c\\x7b\\x7d]*/ } );\n\t\t\t\tvar Identifier = createToken( { name: 'Identifier', pattern: /[^\\x30-\\x39\\0-\\x20\\x22\\x27\\x23\\x2b\\x2c\\x2d\\x2e\\x5b\\x5d\\x5c\\x7b\\x7d][^\\0-\\x20\\x22\\x27\\x23\\x2b\\x2c\\x2d\\x2e\\x5b\\x5d\\x5c\\x7b\\x7d]*/, longer_alt: RouteIdentifier } );\n\n\t\t\t\t// from http://gun.teipir.gr/VRML-amgem/spec/part1/nodesRef.html\n\n\t\t\t\tvar nodeTypes = [\n\t\t\t\t\t'Anchor', 'Billboard', 'Collision', 'Group', 'Transform', // grouping nodes\n\t\t\t\t\t'Inline', 'LOD', 'Switch', // special groups\n\t\t\t\t\t'AudioClip', 'DirectionalLight', 'PointLight', 'Script', 'Shape', 'Sound', 'SpotLight', 'WorldInfo', // common nodes\n\t\t\t\t\t'CylinderSensor', 'PlaneSensor', 'ProximitySensor', 'SphereSensor', 'TimeSensor', 'TouchSensor', 'VisibilitySensor', // sensors\n\t\t\t\t\t'Box', 'Cone', 'Cylinder', 'ElevationGrid', 'Extrusion', 'IndexedFaceSet', 'IndexedLineSet', 'PointSet', 'Sphere', // geometries\n\t\t\t\t\t'Color', 'Coordinate', 'Normal', 'TextureCoordinate', // geometric properties\n\t\t\t\t\t'Appearance', 'FontStyle', 'ImageTexture', 'Material', 'MovieTexture', 'PixelTexture', 'TextureTransform', // appearance\n\t\t\t\t\t'ColorInterpolator', 'CoordinateInterpolator', 'NormalInterpolator', 'OrientationInterpolator', 'PositionInterpolator', 'ScalarInterpolator', // interpolators\n\t\t\t\t\t'Background', 'Fog', 'NavigationInfo', 'Viewpoint', // bindable nodes\n\t\t\t\t\t'Text' // Text must be placed at the end of the regex so there are no matches for TextureTransform and TextureCoordinate\n\t\t\t\t];\n\n\t\t\t\t//\n\n\t\t\t\tvar Version = createToken( {\n\t\t\t\t\tname: 'Version',\n\t\t\t\t\tpattern: /#VRML.*/,\n\t\t\t\t\tlonger_alt: Identifier\n\t\t\t\t} );\n\n\t\t\t\tvar NodeName = createToken( {\n\t\t\t\t\tname: 'NodeName',\n\t\t\t\t\tpattern: new RegExp( nodeTypes.join( '|' ) ),\n\t\t\t\t\tlonger_alt: Identifier\n\t\t\t\t} );\n\n\t\t\t\tvar DEF = createToken( {\n\t\t\t\t\tname: 'DEF',\n\t\t\t\t\tpattern: /DEF/,\n\t\t\t\t\tlonger_alt: Identifier\n\t\t\t\t} );\n\n\t\t\t\tvar USE = createToken( {\n\t\t\t\t\tname: 'USE',\n\t\t\t\t\tpattern: /USE/,\n\t\t\t\t\tlonger_alt: Identifier\n\t\t\t\t} );\n\n\t\t\t\tvar ROUTE = createToken( {\n\t\t\t\t\tname: 'ROUTE',\n\t\t\t\t\tpattern: /ROUTE/,\n\t\t\t\t\tlonger_alt: Identifier\n\t\t\t\t} );\n\n\t\t\t\tvar TO = createToken( {\n\t\t\t\t\tname: 'TO',\n\t\t\t\t\tpattern: /TO/,\n\t\t\t\t\tlonger_alt: Identifier\n\t\t\t\t} );\n\n\t\t\t\t//\n\n\t\t\t\tvar StringLiteral = createToken( { name: 'StringLiteral', pattern: /\"(:?[^\\\\\"\\n\\r]+|\\\\(:?[bfnrtv\"\\\\/]|u[0-9a-fA-F]{4}))*\"/ } );\n\t\t\t\tvar HexLiteral = createToken( { name: 'HexLiteral', pattern: /0[xX][0-9a-fA-F]+/ } );\n\t\t\t\tvar NumberLiteral = createToken( { name: 'NumberLiteral', pattern: /[-+]?[0-9]*\\.?[0-9]+([eE][-+]?[0-9]+)?/ } );\n\t\t\t\tvar TrueLiteral = createToken( { name: 'TrueLiteral', pattern: /TRUE/ } );\n\t\t\t\tvar FalseLiteral = createToken( { name: 'FalseLiteral', pattern: /FALSE/ } );\n\t\t\t\tvar NullLiteral = createToken( { name: 'NullLiteral', pattern: /NULL/ } );\n\t\t\t\tvar LSquare = createToken( { name: 'LSquare', pattern: /\\[/ } );\n\t\t\t\tvar RSquare = createToken( { name: 'RSquare', pattern: /]/ } );\n\t\t\t\tvar LCurly = createToken( { name: 'LCurly', pattern: /{/ } );\n\t\t\t\tvar RCurly = createToken( { name: 'RCurly', pattern: /}/ } );\n\t\t\t\tvar Comment = createToken( {\n\t\t\t\t\tname: 'Comment',\n\t\t\t\t\tpattern: /#.*/,\n\t\t\t\t\tgroup: _libs_chevrotain_module_min_js__WEBPACK_IMPORTED_MODULE_1__[\"chevrotain\"].Lexer.SKIPPED // eslint-disable-line no-undef\n\t\t\t\t} );\n\n\t\t\t\t// commas, blanks, tabs, newlines and carriage returns are whitespace characters wherever they appear outside of string fields\n\n\t\t\t\tvar WhiteSpace = createToken( {\n\t\t\t\t\tname: 'WhiteSpace',\n\t\t\t\t\tpattern: /[ ,\\s]/,\n\t\t\t\t\tgroup: _libs_chevrotain_module_min_js__WEBPACK_IMPORTED_MODULE_1__[\"chevrotain\"].Lexer.SKIPPED // eslint-disable-line no-undef\n\t\t\t\t} );\n\n\t\t\t\tvar tokens = [\n\t\t\t\t\tWhiteSpace,\n\t\t\t\t\t// keywords appear before the Identifier\n\t\t\t\t\tNodeName,\n\t\t\t\t\tDEF,\n\t\t\t\t\tUSE,\n\t\t\t\t\tROUTE,\n\t\t\t\t\tTO,\n\t\t\t\t\tTrueLiteral,\n\t\t\t\t\tFalseLiteral,\n\t\t\t\t\tNullLiteral,\n\t\t\t\t\t// the Identifier must appear after the keywords because all keywords are valid identifiers\n\t\t\t\t\tVersion,\n\t\t\t\t\tIdentifier,\n\t\t\t\t\tRouteIdentifier,\n\t\t\t\t\tStringLiteral,\n\t\t\t\t\tHexLiteral,\n\t\t\t\t\tNumberLiteral,\n\t\t\t\t\tLSquare,\n\t\t\t\t\tRSquare,\n\t\t\t\t\tLCurly,\n\t\t\t\t\tRCurly,\n\t\t\t\t\tComment\n\t\t\t\t];\n\n\t\t\t\tvar tokenVocabulary = {};\n\n\t\t\t\tfor ( var i = 0, l = tokens.length; i < l; i ++ ) {\n\n\t\t\t\t\tvar token = tokens[ i ];\n\n\t\t\t\t\ttokenVocabulary[ token.name ] = token;\n\n\t\t\t\t}\n\n\t\t\t\treturn { tokens: tokens, tokenVocabulary: tokenVocabulary };\n\n\t\t\t}\n\n\n\t\t\tfunction createVisitor( BaseVRMLVisitor ) {\n\n\t\t\t\t// the visitor is created dynmaically based on the given base class\n\n\t\t\t\tfunction VRMLToASTVisitor() {\n\n\t\t\t\t\tBaseVRMLVisitor.call( this );\n\n\t\t\t\t\tthis.validateVisitor();\n\n\t\t\t\t}\n\n\t\t\t\tVRMLToASTVisitor.prototype = Object.assign( Object.create( BaseVRMLVisitor.prototype ), {\n\n\t\t\t\t\tconstructor: VRMLToASTVisitor,\n\n\t\t\t\t\tvrml: function ( ctx ) {\n\n\t\t\t\t\t\tvar data = {\n\t\t\t\t\t\t\tversion: this.visit( ctx.version ),\n\t\t\t\t\t\t\tnodes: [],\n\t\t\t\t\t\t\troutes: []\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tfor ( var i = 0, l = ctx.node.length; i < l; i ++ ) {\n\n\t\t\t\t\t\t\tvar node = ctx.node[ i ];\n\n\t\t\t\t\t\t\tdata.nodes.push( this.visit( node ) );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( ctx.route ) {\n\n\t\t\t\t\t\t\tfor ( var i = 0, l = ctx.route.length; i < l; i ++ ) {\n\n\t\t\t\t\t\t\t\tvar route = ctx.route[ i ];\n\n\t\t\t\t\t\t\t\tdata.routes.push( this.visit( route ) );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn data;\n\n\t\t\t\t\t},\n\n\t\t\t\t\tversion: function ( ctx ) {\n\n\t\t\t\t\t\treturn ctx.Version[ 0 ].image;\n\n\t\t\t\t\t},\n\n\t\t\t\t\tnode: function ( ctx ) {\n\n\t\t\t\t\t\tvar data = {\n\t\t\t\t\t\t\tname: ctx.NodeName[ 0 ].image,\n\t\t\t\t\t\t\tfields: []\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tif ( ctx.field ) {\n\n\t\t\t\t\t\t\tfor ( var i = 0, l = ctx.field.length; i < l; i ++ ) {\n\n\t\t\t\t\t\t\t\tvar field = ctx.field[ i ];\n\n\t\t\t\t\t\t\t\tdata.fields.push( this.visit( field ) );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// DEF\n\n\t\t\t\t\t\tif ( ctx.def ) {\n\n\t\t\t\t\t\t\tdata.DEF = this.visit( ctx.def[ 0 ] );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn data;\n\n\t\t\t\t\t},\n\n\t\t\t\t\tfield: function ( ctx ) {\n\n\t\t\t\t\t\tvar data = {\n\t\t\t\t\t\t\tname: ctx.Identifier[ 0 ].image,\n\t\t\t\t\t\t\ttype: null,\n\t\t\t\t\t\t\tvalues: null\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tvar result;\n\n\t\t\t\t\t\t// SFValue\n\n\t\t\t\t\t\tif ( ctx.singleFieldValue ) {\n\n\t\t\t\t\t\t\tresult = this.visit( ctx.singleFieldValue[ 0 ] );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// MFValue\n\n\t\t\t\t\t\tif ( ctx.multiFieldValue ) {\n\n\t\t\t\t\t\t\tresult = this.visit( ctx.multiFieldValue[ 0 ] );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tdata.type = result.type;\n\t\t\t\t\t\tdata.values = result.values;\n\n\t\t\t\t\t\treturn data;\n\n\t\t\t\t\t},\n\n\t\t\t\t\tdef: function ( ctx ) {\n\n\t\t\t\t\t\treturn ( ctx.Identifier || ctx.NodeName )[ 0 ].image;\n\n\t\t\t\t\t},\n\n\t\t\t\t\tuse: function ( ctx ) {\n\n\t\t\t\t\t\treturn { USE: ( ctx.Identifier || ctx.NodeName )[ 0 ].image };\n\n\t\t\t\t\t},\n\n\t\t\t\t\tsingleFieldValue: function ( ctx ) {\n\n\t\t\t\t\t\treturn processField( this, ctx );\n\n\t\t\t\t\t},\n\n\t\t\t\t\tmultiFieldValue: function ( ctx ) {\n\n\t\t\t\t\t\treturn processField( this, ctx );\n\n\t\t\t\t\t},\n\n\t\t\t\t\troute: function ( ctx ) {\n\n\t\t\t\t\t\tvar data = {\n\t\t\t\t\t\t\tFROM: ctx.RouteIdentifier[ 0 ].image,\n\t\t\t\t\t\t\tTO: ctx.RouteIdentifier[ 1 ].image\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\treturn data;\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t\tfunction processField( scope, ctx ) {\n\n\t\t\t\t\tvar field = {\n\t\t\t\t\t\ttype: null,\n\t\t\t\t\t\tvalues: []\n\t\t\t\t\t};\n\n\t\t\t\t\tif ( ctx.node ) {\n\n\t\t\t\t\t\tfield.type = 'node';\n\n\t\t\t\t\t\tfor ( var i = 0, l = ctx.node.length; i < l; i ++ ) {\n\n\t\t\t\t\t\t\tvar node = ctx.node[ i ];\n\n\t\t\t\t\t\t\tfield.values.push( scope.visit( node ) );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( ctx.use ) {\n\n\t\t\t\t\t\tfield.type = 'use';\n\n\t\t\t\t\t\tfor ( var i = 0, l = ctx.use.length; i < l; i ++ ) {\n\n\t\t\t\t\t\t\tvar use = ctx.use[ i ];\n\n\t\t\t\t\t\t\tfield.values.push( scope.visit( use ) );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( ctx.StringLiteral ) {\n\n\t\t\t\t\t\tfield.type = 'string';\n\n\t\t\t\t\t\tfor ( var i = 0, l = ctx.StringLiteral.length; i < l; i ++ ) {\n\n\t\t\t\t\t\t\tvar stringLiteral = ctx.StringLiteral[ i ];\n\n\t\t\t\t\t\t\tfield.values.push( stringLiteral.image.replace( /'|\"/g, '' ) );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( ctx.NumberLiteral ) {\n\n\t\t\t\t\t\tfield.type = 'number';\n\n\t\t\t\t\t\tfor ( var i = 0, l = ctx.NumberLiteral.length; i < l; i ++ ) {\n\n\t\t\t\t\t\t\tvar numberLiteral = ctx.NumberLiteral[ i ];\n\n\t\t\t\t\t\t\tfield.values.push( parseFloat( numberLiteral.image ) );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( ctx.HexLiteral ) {\n\n\t\t\t\t\t\tfield.type = 'hex';\n\n\t\t\t\t\t\tfor ( var i = 0, l = ctx.HexLiteral.length; i < l; i ++ ) {\n\n\t\t\t\t\t\t\tvar hexLiteral = ctx.HexLiteral[ i ];\n\n\t\t\t\t\t\t\tfield.values.push( hexLiteral.image );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( ctx.TrueLiteral ) {\n\n\t\t\t\t\t\tfield.type = 'boolean';\n\n\t\t\t\t\t\tfor ( var i = 0, l = ctx.TrueLiteral.length; i < l; i ++ ) {\n\n\t\t\t\t\t\t\tvar trueLiteral = ctx.TrueLiteral[ i ];\n\n\t\t\t\t\t\t\tif ( trueLiteral.image === 'TRUE' ) field.values.push( true );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( ctx.FalseLiteral ) {\n\n\t\t\t\t\t\tfield.type = 'boolean';\n\n\t\t\t\t\t\tfor ( var i = 0, l = ctx.FalseLiteral.length; i < l; i ++ ) {\n\n\t\t\t\t\t\t\tvar falseLiteral = ctx.FalseLiteral[ i ];\n\n\t\t\t\t\t\t\tif ( falseLiteral.image === 'FALSE' ) field.values.push( false );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( ctx.NullLiteral ) {\n\n\t\t\t\t\t\tfield.type = 'null';\n\n\t\t\t\t\t\tctx.NullLiteral.forEach( function () {\n\n\t\t\t\t\t\t\tfield.values.push( null );\n\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t}\n\n\t\t\t\t\treturn field;\n\n\t\t\t\t}\n\n\t\t\t\treturn new VRMLToASTVisitor();\n\n\t\t\t}\n\n\t\t\tfunction parseTree( tree ) {\n\n\t\t\t\t// console.log( JSON.stringify( tree, null, 2 ) );\n\n\t\t\t\tvar nodes = tree.nodes;\n\t\t\t\tvar scene = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Scene\"]();\n\n\t\t\t\t// first iteration: build nodemap based on DEF statements\n\n\t\t\t\tfor ( var i = 0, l = nodes.length; i < l; i ++ ) {\n\n\t\t\t\t\tvar node = nodes[ i ];\n\n\t\t\t\t\tbuildNodeMap( node );\n\n\t\t\t\t}\n\n\t\t\t\t// second iteration: build nodes\n\n\t\t\t\tfor ( var i = 0, l = nodes.length; i < l; i ++ ) {\n\n\t\t\t\t\tvar node = nodes[ i ];\n\t\t\t\t\tvar object = getNode( node );\n\n\t\t\t\t\tif ( object instanceof _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Object3D\"] ) scene.add( object );\n\n\t\t\t\t\tif ( node.name === 'WorldInfo' ) scene.userData.worldInfo = object;\n\n\t\t\t\t}\n\n\t\t\t\treturn scene;\n\n\t\t\t}\n\n\t\t\tfunction buildNodeMap( node ) {\n\n\t\t\t\tif ( node.DEF ) {\n\n\t\t\t\t\tnodeMap[ node.DEF ] = node;\n\n\t\t\t\t}\n\n\t\t\t\tvar fields = node.fields;\n\n\t\t\t\tfor ( var i = 0, l = fields.length; i < l; i ++ ) {\n\n\t\t\t\t\tvar field = fields[ i ];\n\n\t\t\t\t\tif ( field.type === 'node' ) {\n\n\t\t\t\t\t\tvar fieldValues = field.values;\n\n\t\t\t\t\t\tfor ( var j = 0, jl = fieldValues.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\t\tbuildNodeMap( fieldValues[ j ] );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tfunction getNode( node ) {\n\n\t\t\t\t// handle case where a node refers to a different one\n\n\t\t\t\tif ( node.USE ) {\n\n\t\t\t\t\treturn resolveUSE( node.USE );\n\n\t\t\t\t}\n\n\t\t\t\tif ( node.build !== undefined ) return node.build;\n\n\t\t\t\tnode.build = buildNode( node );\n\n\t\t\t\treturn node.build;\n\n\t\t\t}\n\n\t\t\t// node builder\n\n\t\t\tfunction buildNode( node ) {\n\n\t\t\t\tvar nodeName = node.name;\n\t\t\t\tvar build;\n\n\t\t\t\tswitch ( nodeName ) {\n\n\t\t\t\t\tcase 'Group':\n\t\t\t\t\tcase 'Transform':\n\t\t\t\t\tcase 'Collision':\n\t\t\t\t\t\tbuild = buildGroupingNode( node );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'Background':\n\t\t\t\t\t\tbuild = buildBackgroundNode( node );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'Shape':\n\t\t\t\t\t\tbuild = buildShapeNode( node );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'Appearance':\n\t\t\t\t\t\tbuild = buildAppearanceNode( node );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'Material':\n\t\t\t\t\t\tbuild = buildMaterialNode( node );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'ImageTexture':\n\t\t\t\t\t\tbuild = buildImageTextureNode( node );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'PixelTexture':\n\t\t\t\t\t\tbuild = buildPixelTextureNode( node );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'TextureTransform':\n\t\t\t\t\t\tbuild = buildTextureTransformNode( node );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'IndexedFaceSet':\n\t\t\t\t\t\tbuild = buildIndexedFaceSetNode( node );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'IndexedLineSet':\n\t\t\t\t\t\tbuild = buildIndexedLineSetNode( node );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'PointSet':\n\t\t\t\t\t\tbuild = buildPointSetNode( node );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'Box':\n\t\t\t\t\t\tbuild = buildBoxNode( node );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'Cone':\n\t\t\t\t\t\tbuild = buildConeNode( node );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'Cylinder':\n\t\t\t\t\t\tbuild = buildCylinderNode( node );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'Sphere':\n\t\t\t\t\t\tbuild = buildSphereNode( node );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'ElevationGrid':\n\t\t\t\t\t\tbuild = buildElevationGridNode( node );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'Extrusion':\n\t\t\t\t\t\tbuild = buildExtrusionNode( node );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'Color':\n\t\t\t\t\tcase 'Coordinate':\n\t\t\t\t\tcase 'Normal':\n\t\t\t\t\tcase 'TextureCoordinate':\n\t\t\t\t\t\tbuild = buildGeometricNode( node );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'WorldInfo':\n\t\t\t\t\t\tbuild = buildWorldInfoNode( node );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'Anchor':\n\t\t\t\t\tcase 'Billboard':\n\n\t\t\t\t\tcase 'Inline':\n\t\t\t\t\tcase 'LOD':\n\t\t\t\t\tcase 'Switch':\n\n\t\t\t\t\tcase 'AudioClip':\n\t\t\t\t\tcase 'DirectionalLight':\n\t\t\t\t\tcase 'PointLight':\n\t\t\t\t\tcase 'Script':\n\t\t\t\t\tcase 'Sound':\n\t\t\t\t\tcase 'SpotLight':\n\n\t\t\t\t\tcase 'CylinderSensor':\n\t\t\t\t\tcase 'PlaneSensor':\n\t\t\t\t\tcase 'ProximitySensor':\n\t\t\t\t\tcase 'SphereSensor':\n\t\t\t\t\tcase 'TimeSensor':\n\t\t\t\t\tcase 'TouchSensor':\n\t\t\t\t\tcase 'VisibilitySensor':\n\n\t\t\t\t\tcase 'Text':\n\n\t\t\t\t\tcase 'FontStyle':\n\t\t\t\t\tcase 'MovieTexture':\n\n\t\t\t\t\tcase 'ColorInterpolator':\n\t\t\t\t\tcase 'CoordinateInterpolator':\n\t\t\t\t\tcase 'NormalInterpolator':\n\t\t\t\t\tcase 'OrientationInterpolator':\n\t\t\t\t\tcase 'PositionInterpolator':\n\t\t\t\t\tcase 'ScalarInterpolator':\n\n\t\t\t\t\tcase 'Fog':\n\t\t\t\t\tcase 'NavigationInfo':\n\t\t\t\t\tcase 'Viewpoint':\n\t\t\t\t\t\t// node not supported yet\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tconsole.warn( 'THREE.VRMLLoader: Unknown node:', nodeName );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\tif ( build !== undefined && node.DEF !== undefined && build.hasOwnProperty( 'name' ) === true ) {\n\n\t\t\t\t\tbuild.name = node.DEF;\n\n\t\t\t\t}\n\n\t\t\t\treturn build;\n\n\t\t\t}\n\n\t\t\tfunction buildGroupingNode( node ) {\n\n\t\t\t\tvar object = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Group\"]();\n\n\t\t\t\t//\n\n\t\t\t\tvar fields = node.fields;\n\n\t\t\t\tfor ( var i = 0, l = fields.length; i < l; i ++ ) {\n\n\t\t\t\t\tvar field = fields[ i ];\n\t\t\t\t\tvar fieldName = field.name;\n\t\t\t\t\tvar fieldValues = field.values;\n\n\t\t\t\t\tswitch ( fieldName ) {\n\n\t\t\t\t\t\tcase 'bboxCenter':\n\t\t\t\t\t\t\t// field not supported\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'bboxSize':\n\t\t\t\t\t\t\t// field not supported\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'center':\n\t\t\t\t\t\t\t// field not supported\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'children':\n\t\t\t\t\t\t\tparseFieldChildren( fieldValues, object );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'collide':\n\t\t\t\t\t\t\t// field not supported\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'rotation':\n\t\t\t\t\t\t\tvar axis = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector3\"]( fieldValues[ 0 ], fieldValues[ 1 ], fieldValues[ 2 ] );\n\t\t\t\t\t\t\tvar angle = fieldValues[ 3 ];\n\t\t\t\t\t\t\tobject.quaternion.setFromAxisAngle( axis, angle );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'scale':\n\t\t\t\t\t\t\tobject.scale.set( fieldValues[ 0 ], fieldValues[ 1 ], fieldValues[ 2 ] );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'scaleOrientation':\n\t\t\t\t\t\t\t// field not supported\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'translation':\n\t\t\t\t\t\t\tobject.position.set( fieldValues[ 0 ], fieldValues[ 1 ], fieldValues[ 2 ] );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'proxy':\n\t\t\t\t\t\t\t// field not supported\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tconsole.warn( 'THREE.VRMLLoader: Unknown field:', fieldName );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\treturn object;\n\n\t\t\t}\n\n\t\t\tfunction buildBackgroundNode( node ) {\n\n\t\t\t\tvar group = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Group\"]();\n\n\t\t\t\tvar groundAngle, groundColor;\n\t\t\t\tvar skyAngle, skyColor;\n\n\t\t\t\tvar fields = node.fields;\n\n\t\t\t\tfor ( var i = 0, l = fields.length; i < l; i ++ ) {\n\n\t\t\t\t\tvar field = fields[ i ];\n\t\t\t\t\tvar fieldName = field.name;\n\t\t\t\t\tvar fieldValues = field.values;\n\n\t\t\t\t\tswitch ( fieldName ) {\n\n\t\t\t\t\t\tcase 'groundAngle':\n\t\t\t\t\t\t\tgroundAngle = fieldValues;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'groundColor':\n\t\t\t\t\t\t\tgroundColor = fieldValues;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'backUrl':\n\t\t\t\t\t\t\t// field not supported\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'bottomUrl':\n\t\t\t\t\t\t\t// field not supported\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'frontUrl':\n\t\t\t\t\t\t\t// field not supported\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'leftUrl':\n\t\t\t\t\t\t\t// field not supported\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'rightUrl':\n\t\t\t\t\t\t\t// field not supported\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'topUrl':\n\t\t\t\t\t\t\t// field not supported\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'skyAngle':\n\t\t\t\t\t\t\tskyAngle = fieldValues;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'skyColor':\n\t\t\t\t\t\t\tskyColor = fieldValues;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tconsole.warn( 'THREE.VRMLLoader: Unknown field:', fieldName );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tvar radius = 10000;\n\n\t\t\t\t// sky\n\n\t\t\t\tif ( skyColor ) {\n\n\t\t\t\t\tvar skyGeometry = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"SphereGeometry\"]( radius, 32, 16 );\n\t\t\t\t\tvar skyMaterial = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"MeshBasicMaterial\"]( { fog: false, side: _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"BackSide\"], depthWrite: false, depthTest: false } );\n\n\t\t\t\t\tif ( skyColor.length > 3 ) {\n\n\t\t\t\t\t\tpaintFaces( skyGeometry, radius, skyAngle, toColorArray( skyColor ), true );\n\t\t\t\t\t\tskyMaterial.vertexColors = true;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tskyMaterial.color.setRGB( skyColor[ 0 ], skyColor[ 1 ], skyColor[ 2 ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tvar sky = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Mesh\"]( skyGeometry, skyMaterial );\n\t\t\t\t\tgroup.add( sky );\n\n\t\t\t\t}\n\n\t\t\t\t// ground\n\n\t\t\t\tif ( groundColor ) {\n\n\t\t\t\t\tif ( groundColor.length > 0 ) {\n\n\t\t\t\t\t\tvar groundGeometry = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"SphereGeometry\"]( radius, 32, 16, 0, 2 * Math.PI, 0.5 * Math.PI, 1.5 * Math.PI );\n\t\t\t\t\t\tvar groundMaterial = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"MeshBasicMaterial\"]( { fog: false, side: _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"BackSide\"], vertexColors: true, depthWrite: false, depthTest: false } );\n\n\t\t\t\t\t\tpaintFaces( groundGeometry, radius, groundAngle, toColorArray( groundColor ), false );\n\n\t\t\t\t\t\tvar ground = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Mesh\"]( groundGeometry, groundMaterial );\n\t\t\t\t\t\tgroup.add( ground );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// render background group first\n\n\t\t\t\tgroup.renderOrder = - Infinity;\n\n\t\t\t\treturn group;\n\n\t\t\t}\n\n\t\t\tfunction buildShapeNode( node ) {\n\n\t\t\t\tvar fields = node.fields;\n\n\t\t\t\t// if the appearance field is NULL or unspecified, lighting is off and the unlit object color is (0, 0, 0)\n\n\t\t\t\tvar material = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"MeshBasicMaterial\"]( { color: 0x000000 } );\n\t\t\t\tvar geometry;\n\n\t\t\t\tfor ( var i = 0, l = fields.length; i < l; i ++ ) {\n\n\t\t\t\t\tvar field = fields[ i ];\n\t\t\t\t\tvar fieldName = field.name;\n\t\t\t\t\tvar fieldValues = field.values;\n\n\t\t\t\t\tswitch ( fieldName ) {\n\n\t\t\t\t\t\tcase 'appearance':\n\t\t\t\t\t\t\tif ( fieldValues[ 0 ] !== null ) {\n\n\t\t\t\t\t\t\t\tmaterial = getNode( fieldValues[ 0 ] );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'geometry':\n\t\t\t\t\t\t\tif ( fieldValues[ 0 ] !== null ) {\n\n\t\t\t\t\t\t\t\tgeometry = getNode( fieldValues[ 0 ] );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tconsole.warn( 'THREE.VRMLLoader: Unknown field:', fieldName );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// build 3D object\n\n\t\t\t\tvar object;\n\n\t\t\t\tif ( geometry && geometry.attributes.position ) {\n\n\t\t\t\t\tvar type = geometry._type;\n\n\t\t\t\t\tif ( type === 'points' ) { // points\n\n\t\t\t\t\t\tvar pointsMaterial = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"PointsMaterial\"]( { color: 0xffffff } );\n\n\t\t\t\t\t\tif ( geometry.attributes.color !== undefined ) {\n\n\t\t\t\t\t\t\tpointsMaterial.vertexColors = true;\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// if the color field is NULL and there is a material defined for the appearance affecting this PointSet, then use the emissiveColor of the material to draw the points\n\n\t\t\t\t\t\t\tif ( material.isMeshPhongMaterial ) {\n\n\t\t\t\t\t\t\t\tpointsMaterial.color.copy( material.emissive );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tobject = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Points\"]( geometry, pointsMaterial );\n\n\t\t\t\t\t} else if ( type === 'line' ) { // lines\n\n\t\t\t\t\t\tvar lineMaterial = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"LineBasicMaterial\"]( { color: 0xffffff } );\n\n\t\t\t\t\t\tif ( geometry.attributes.color !== undefined ) {\n\n\t\t\t\t\t\t\tlineMaterial.vertexColors = true;\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// if the color field is NULL and there is a material defined for the appearance affecting this IndexedLineSet, then use the emissiveColor of the material to draw the lines\n\n\t\t\t\t\t\t\tif ( material.isMeshPhongMaterial ) {\n\n\t\t\t\t\t\t\t\tlineMaterial.color.copy( material.emissive );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tobject = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"LineSegments\"]( geometry, lineMaterial );\n\n\t\t\t\t\t} else { // consider meshes\n\n\t\t\t\t\t\t// check \"solid\" hint (it's placed in the geometry but affects the material)\n\n\t\t\t\t\t\tif ( geometry._solid !== undefined ) {\n\n\t\t\t\t\t\t\tmaterial.side = ( geometry._solid ) ? _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"FrontSide\"] : _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"DoubleSide\"];\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// check for vertex colors\n\n\t\t\t\t\t\tif ( geometry.attributes.color !== undefined ) {\n\n\t\t\t\t\t\t\tmaterial.vertexColors = true;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tobject = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Mesh\"]( geometry, material );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tobject = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Object3D\"]();\n\n\t\t\t\t\t// if the geometry field is NULL or no vertices are defined the object is not drawn\n\n\t\t\t\t\tobject.visible = false;\n\n\t\t\t\t}\n\n\t\t\t\treturn object;\n\n\t\t\t}\n\n\t\t\tfunction buildAppearanceNode( node ) {\n\n\t\t\t\tvar material = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"MeshPhongMaterial\"]();\n\t\t\t\tvar transformData;\n\n\t\t\t\tvar fields = node.fields;\n\n\t\t\t\tfor ( var i = 0, l = fields.length; i < l; i ++ ) {\n\n\t\t\t\t\tvar field = fields[ i ];\n\t\t\t\t\tvar fieldName = field.name;\n\t\t\t\t\tvar fieldValues = field.values;\n\n\t\t\t\t\tswitch ( fieldName ) {\n\n\t\t\t\t\t\tcase 'material':\n\t\t\t\t\t\t\tif ( fieldValues[ 0 ] !== null ) {\n\n\t\t\t\t\t\t\t\tvar materialData = getNode( fieldValues[ 0 ] );\n\n\t\t\t\t\t\t\t\tif ( materialData.diffuseColor ) material.color.copy( materialData.diffuseColor );\n\t\t\t\t\t\t\t\tif ( materialData.emissiveColor ) material.emissive.copy( materialData.emissiveColor );\n\t\t\t\t\t\t\t\tif ( materialData.shininess ) material.shininess = materialData.shininess;\n\t\t\t\t\t\t\t\tif ( materialData.specularColor ) material.specular.copy( materialData.specularColor );\n\t\t\t\t\t\t\t\tif ( materialData.transparency ) material.opacity = 1 - materialData.transparency;\n\t\t\t\t\t\t\t\tif ( materialData.transparency > 0 ) material.transparent = true;\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t// if the material field is NULL or unspecified, lighting is off and the unlit object color is (0, 0, 0)\n\n\t\t\t\t\t\t\t\tmaterial = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"MeshBasicMaterial\"]( { color: 0x000000 } );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'texture':\n\t\t\t\t\t\t\tvar textureNode = fieldValues[ 0 ];\n\t\t\t\t\t\t\tif ( textureNode !== null ) {\n\n\t\t\t\t\t\t\t\tif ( textureNode.name === 'ImageTexture' || textureNode.name === 'PixelTexture' ) {\n\n\t\t\t\t\t\t\t\t\tmaterial.map = getNode( textureNode );\n\n\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t// MovieTexture not supported yet\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'textureTransform':\n\t\t\t\t\t\t\tif ( fieldValues[ 0 ] !== null ) {\n\n\t\t\t\t\t\t\t\ttransformData = getNode( fieldValues[ 0 ] );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tconsole.warn( 'THREE.VRMLLoader: Unknown field:', fieldName );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// only apply texture transform data if a texture was defined\n\n\t\t\t\tif ( material.map ) {\n\n\t\t\t\t\t// respect VRML lighting model\n\n\t\t\t\t\tif ( material.map.__type ) {\n\n\t\t\t\t\t\tswitch ( material.map.__type ) {\n\n\t\t\t\t\t\t\tcase TEXTURE_TYPE.INTENSITY_ALPHA:\n\t\t\t\t\t\t\t\tmaterial.opacity = 1; // ignore transparency\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase TEXTURE_TYPE.RGB:\n\t\t\t\t\t\t\t\tmaterial.color.set( 0xffffff ); // ignore material color\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase TEXTURE_TYPE.RGBA:\n\t\t\t\t\t\t\t\tmaterial.color.set( 0xffffff ); // ignore material color\n\t\t\t\t\t\t\t\tmaterial.opacity = 1; // ignore transparency\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tdelete material.map.__type;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// apply texture transform\n\n\t\t\t\t\tif ( transformData ) {\n\n\t\t\t\t\t\tmaterial.map.center.copy( transformData.center );\n\t\t\t\t\t\tmaterial.map.rotation = transformData.rotation;\n\t\t\t\t\t\tmaterial.map.repeat.copy( transformData.scale );\n\t\t\t\t\t\tmaterial.map.offset.copy( transformData.translation );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\treturn material;\n\n\t\t\t}\n\n\t\t\tfunction buildMaterialNode( node ) {\n\n\t\t\t\tvar materialData = {};\n\n\t\t\t\tvar fields = node.fields;\n\n\t\t\t\tfor ( var i = 0, l = fields.length; i < l; i ++ ) {\n\n\t\t\t\t\tvar field = fields[ i ];\n\t\t\t\t\tvar fieldName = field.name;\n\t\t\t\t\tvar fieldValues = field.values;\n\n\t\t\t\t\tswitch ( fieldName ) {\n\n\t\t\t\t\t\tcase 'ambientIntensity':\n\t\t\t\t\t\t\t// field not supported\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'diffuseColor':\n\t\t\t\t\t\t\tmaterialData.diffuseColor = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Color\"]( fieldValues[ 0 ], fieldValues[ 1 ], fieldValues[ 2 ] );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'emissiveColor':\n\t\t\t\t\t\t\tmaterialData.emissiveColor = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Color\"]( fieldValues[ 0 ], fieldValues[ 1 ], fieldValues[ 2 ] );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'shininess':\n\t\t\t\t\t\t\tmaterialData.shininess = fieldValues[ 0 ];\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'specularColor':\n\t\t\t\t\t\t\tmaterialData.emissiveColor = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Color\"]( fieldValues[ 0 ], fieldValues[ 1 ], fieldValues[ 2 ] );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'transparency':\n\t\t\t\t\t\t\tmaterialData.transparency = fieldValues[ 0 ];\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tconsole.warn( 'THREE.VRMLLoader: Unknown field:', fieldName );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\treturn materialData;\n\n\t\t\t}\n\n\t\t\tfunction parseHexColor( hex, textureType, color ) {\n\n\t\t\t\tswitch ( textureType ) {\n\n\t\t\t\t\tcase TEXTURE_TYPE.INTENSITY:\n\t\t\t\t\t\t// Intensity texture: A one-component image specifies one-byte hexadecimal or integer values representing the intensity of the image\n\t\t\t\t\t\tvar value = parseInt( hex );\n\t\t\t\t\t\tcolor.r = value;\n\t\t\t\t\t\tcolor.g = value;\n\t\t\t\t\t\tcolor.b = value;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase TEXTURE_TYPE.INTENSITY_ALPHA:\n\t\t\t\t\t\t// Intensity+Alpha texture: A two-component image specifies the intensity in the first (high) byte and the alpha opacity in the second (low) byte.\n\t\t\t\t\t\tvar value = parseInt( '0x' + hex.substring( 2, 4 ) );\n\t\t\t\t\t\tcolor.r = value;\n\t\t\t\t\t\tcolor.g = value;\n\t\t\t\t\t\tcolor.b = value;\n\t\t\t\t\t\tcolor.a = parseInt( '0x' + hex.substring( 4, 6 ) );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase TEXTURE_TYPE.RGB:\n\t\t\t\t\t\t// RGB texture: Pixels in a three-component image specify the red component in the first (high) byte, followed by the green and blue components\n\t\t\t\t\t\tcolor.r = parseInt( '0x' + hex.substring( 2, 4 ) );\n\t\t\t\t\t\tcolor.g = parseInt( '0x' + hex.substring( 4, 6 ) );\n\t\t\t\t\t\tcolor.b = parseInt( '0x' + hex.substring( 6, 8 ) );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase TEXTURE_TYPE.RGBA:\n\t\t\t\t\t\t// RGBA texture: Four-component images specify the alpha opacity byte after red/green/blue\n\t\t\t\t\t\tcolor.r = parseInt( '0x' + hex.substring( 2, 4 ) );\n\t\t\t\t\t\tcolor.g = parseInt( '0x' + hex.substring( 4, 6 ) );\n\t\t\t\t\t\tcolor.b = parseInt( '0x' + hex.substring( 6, 8 ) );\n\t\t\t\t\t\tcolor.a = parseInt( '0x' + hex.substring( 8, 10 ) );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfunction getTextureType( num_components ) {\n\n\t\t\t\tvar type;\n\n\t\t\t\tswitch ( num_components ) {\n\n\t\t\t\t\tcase 1:\n\t\t\t\t\t\ttype = TEXTURE_TYPE.INTENSITY;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\ttype = TEXTURE_TYPE.INTENSITY_ALPHA;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 3:\n\t\t\t\t\t\ttype = TEXTURE_TYPE.RGB;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 4:\n\t\t\t\t\t\ttype = TEXTURE_TYPE.RGBA;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t}\n\n\t\t\t\treturn type;\n\n\t\t\t}\n\n\t\t\tfunction buildPixelTextureNode( node ) {\n\n\t\t\t\tvar texture;\n\t\t\t\tvar wrapS = _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"RepeatWrapping\"];\n\t\t\t\tvar wrapT = _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"RepeatWrapping\"];\n\n\t\t\t\tvar fields = node.fields;\n\n\t\t\t\tfor ( var i = 0, l = fields.length; i < l; i ++ ) {\n\n\t\t\t\t\tvar field = fields[ i ];\n\t\t\t\t\tvar fieldName = field.name;\n\t\t\t\t\tvar fieldValues = field.values;\n\n\t\t\t\t\tswitch ( fieldName ) {\n\n\t\t\t\t\t\tcase 'image':\n\t\t\t\t\t\t\tvar width = fieldValues[ 0 ];\n\t\t\t\t\t\t\tvar height = fieldValues[ 1 ];\n\t\t\t\t\t\t\tvar num_components = fieldValues[ 2 ];\n\n\t\t\t\t\t\t\tvar useAlpha = ( num_components === 2 || num_components === 4 );\n\t\t\t\t\t\t\tvar textureType = getTextureType( num_components );\n\n\t\t\t\t\t\t\tvar size = ( ( useAlpha === true ) ? 4 : 3 ) * ( width * height );\n\t\t\t\t\t\t\tvar data = new Uint8Array( size );\n\n\t\t\t\t\t\t\tvar color = { r: 0, g: 0, b: 0, a: 0 };\n\n\t\t\t\t\t\t\tfor ( var j = 3, k = 0, jl = fieldValues.length; j < jl; j ++, k ++ ) {\n\n\t\t\t\t\t\t\t\tparseHexColor( fieldValues[ j ], textureType, color );\n\n\t\t\t\t\t\t\t\tif ( useAlpha === true ) {\n\n\t\t\t\t\t\t\t\t\tvar stride = k * 4;\n\n\t\t\t\t\t\t\t\t\tdata[ stride + 0 ] = color.r;\n\t\t\t\t\t\t\t\t\tdata[ stride + 1 ] = color.g;\n\t\t\t\t\t\t\t\t\tdata[ stride + 2 ] = color.b;\n\t\t\t\t\t\t\t\t\tdata[ stride + 3 ] = color.a;\n\n\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\tvar stride = k * 3;\n\n\t\t\t\t\t\t\t\t\tdata[ stride + 0 ] = color.r;\n\t\t\t\t\t\t\t\t\tdata[ stride + 1 ] = color.g;\n\t\t\t\t\t\t\t\t\tdata[ stride + 2 ] = color.b;\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\ttexture = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"DataTexture\"]( data, width, height, ( useAlpha === true ) ? _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"RGBAFormat\"] : _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"RGBFormat\"] );\n\t\t\t\t\t\t\ttexture.__type = textureType; // needed for material modifications\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'repeatS':\n\t\t\t\t\t\t\tif ( fieldValues[ 0 ] === false ) wrapS = _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"ClampToEdgeWrapping\"];\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'repeatT':\n\t\t\t\t\t\t\tif ( fieldValues[ 0 ] === false ) wrapT = _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"ClampToEdgeWrapping\"];\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tconsole.warn( 'THREE.VRMLLoader: Unknown field:', fieldName );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( texture ) {\n\n\t\t\t\t\ttexture.wrapS = wrapS;\n\t\t\t\t\ttexture.wrapT = wrapT;\n\n\t\t\t\t}\n\n\t\t\t\treturn texture;\n\n\t\t\t}\n\n\t\t\tfunction buildImageTextureNode( node ) {\n\n\t\t\t\tvar texture;\n\t\t\t\tvar wrapS = _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"RepeatWrapping\"];\n\t\t\t\tvar wrapT = _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"RepeatWrapping\"];\n\n\t\t\t\tvar fields = node.fields;\n\n\t\t\t\tfor ( var i = 0, l = fields.length; i < l; i ++ ) {\n\n\t\t\t\t\tvar field = fields[ i ];\n\t\t\t\t\tvar fieldName = field.name;\n\t\t\t\t\tvar fieldValues = field.values;\n\n\t\t\t\t\tswitch ( fieldName ) {\n\n\t\t\t\t\t\tcase 'url':\n\t\t\t\t\t\t\tvar url = fieldValues[ 0 ];\n\t\t\t\t\t\t\tif ( url ) texture = textureLoader.load( url );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'repeatS':\n\t\t\t\t\t\t\tif ( fieldValues[ 0 ] === false ) wrapS = _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"ClampToEdgeWrapping\"];\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'repeatT':\n\t\t\t\t\t\t\tif ( fieldValues[ 0 ] === false ) wrapT = _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"ClampToEdgeWrapping\"];\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tconsole.warn( 'THREE.VRMLLoader: Unknown field:', fieldName );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( texture ) {\n\n\t\t\t\t\ttexture.wrapS = wrapS;\n\t\t\t\t\ttexture.wrapT = wrapT;\n\n\t\t\t\t}\n\n\t\t\t\treturn texture;\n\n\t\t\t}\n\n\t\t\tfunction buildTextureTransformNode( node ) {\n\n\t\t\t\tvar transformData = {\n\t\t\t\t\tcenter: new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector2\"](),\n\t\t\t\t\trotation: new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector2\"](),\n\t\t\t\t\tscale: new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector2\"](),\n\t\t\t\t\ttranslation: new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector2\"]()\n\t\t\t\t};\n\n\t\t\t\tvar fields = node.fields;\n\n\t\t\t\tfor ( var i = 0, l = fields.length; i < l; i ++ ) {\n\n\t\t\t\t\tvar field = fields[ i ];\n\t\t\t\t\tvar fieldName = field.name;\n\t\t\t\t\tvar fieldValues = field.values;\n\n\t\t\t\t\tswitch ( fieldName ) {\n\n\t\t\t\t\t\tcase 'center':\n\t\t\t\t\t\t\ttransformData.center.set( fieldValues[ 0 ], fieldValues[ 1 ] );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'rotation':\n\t\t\t\t\t\t\ttransformData.rotation = fieldValues[ 0 ];\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'scale':\n\t\t\t\t\t\t\ttransformData.scale.set( fieldValues[ 0 ], fieldValues[ 1 ] );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'translation':\n\t\t\t\t\t\t\ttransformData.translation.set( fieldValues[ 0 ], fieldValues[ 1 ] );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tconsole.warn( 'THREE.VRMLLoader: Unknown field:', fieldName );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\treturn transformData;\n\n\t\t\t}\n\n\t\t\tfunction buildGeometricNode( node ) {\n\n\t\t\t\treturn node.fields[ 0 ].values;\n\n\t\t\t}\n\n\t\t\tfunction buildWorldInfoNode( node ) {\n\n\t\t\t\tvar worldInfo = {};\n\n\t\t\t\tvar fields = node.fields;\n\n\t\t\t\tfor ( var i = 0, l = fields.length; i < l; i ++ ) {\n\n\t\t\t\t\tvar field = fields[ i ];\n\t\t\t\t\tvar fieldName = field.name;\n\t\t\t\t\tvar fieldValues = field.values;\n\n\t\t\t\t\tswitch ( fieldName ) {\n\n\t\t\t\t\t\tcase 'title':\n\t\t\t\t\t\t\tworldInfo.title = fieldValues[ 0 ];\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'info':\n\t\t\t\t\t\t\tworldInfo.info = fieldValues;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tconsole.warn( 'THREE.VRMLLoader: Unknown field:', fieldName );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\treturn worldInfo;\n\n\t\t\t}\n\n\t\t\tfunction buildIndexedFaceSetNode( node ) {\n\n\t\t\t\tvar color, coord, normal, texCoord;\n\t\t\t\tvar ccw = true, solid = true, creaseAngle = 0;\n\t\t\t\tvar colorIndex, coordIndex, normalIndex, texCoordIndex;\n\t\t\t\tvar colorPerVertex = true, normalPerVertex = true;\n\n\t\t\t\tvar fields = node.fields;\n\n\t\t\t\tfor ( var i = 0, l = fields.length; i < l; i ++ ) {\n\n\t\t\t\t\tvar field = fields[ i ];\n\t\t\t\t\tvar fieldName = field.name;\n\t\t\t\t\tvar fieldValues = field.values;\n\n\t\t\t\t\tswitch ( fieldName ) {\n\n\t\t\t\t\t\tcase 'color':\n\t\t\t\t\t\t\tvar colorNode = fieldValues[ 0 ];\n\n\t\t\t\t\t\t\tif ( colorNode !== null ) {\n\n\t\t\t\t\t\t\t\tcolor = getNode( colorNode );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'coord':\n\t\t\t\t\t\t\tvar coordNode = fieldValues[ 0 ];\n\n\t\t\t\t\t\t\tif ( coordNode !== null ) {\n\n\t\t\t\t\t\t\t\tcoord = getNode( coordNode );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'normal':\n\t\t\t\t\t\t\tvar normalNode = fieldValues[ 0 ];\n\n\t\t\t\t\t\t\tif ( normalNode !== null ) {\n\n\t\t\t\t\t\t\t\tnormal = getNode( normalNode );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'texCoord':\n\t\t\t\t\t\t\tvar texCoordNode = fieldValues[ 0 ];\n\n\t\t\t\t\t\t\tif ( texCoordNode !== null ) {\n\n\t\t\t\t\t\t\t\ttexCoord = getNode( texCoordNode );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'ccw':\n\t\t\t\t\t\t\tccw = fieldValues[ 0 ];\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'colorIndex':\n\t\t\t\t\t\t\tcolorIndex = fieldValues;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'colorPerVertex':\n\t\t\t\t\t\t\tcolorPerVertex = fieldValues[ 0 ];\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'convex':\n\t\t\t\t\t\t\t// field not supported\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'coordIndex':\n\t\t\t\t\t\t\tcoordIndex = fieldValues;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'creaseAngle':\n\t\t\t\t\t\t\tcreaseAngle = fieldValues[ 0 ];\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'normalIndex':\n\t\t\t\t\t\t\tnormalIndex = fieldValues;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'normalPerVertex':\n\t\t\t\t\t\t\tnormalPerVertex = fieldValues[ 0 ];\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'solid':\n\t\t\t\t\t\t\tsolid = fieldValues[ 0 ];\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'texCoordIndex':\n\t\t\t\t\t\t\ttexCoordIndex = fieldValues;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tconsole.warn( 'THREE.VRMLLoader: Unknown field:', fieldName );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( coordIndex === undefined ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.VRMLLoader: Missing coordIndex.' );\n\n\t\t\t\t\treturn new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"BufferGeometry\"](); // handle VRML files with incomplete geometry definition\n\n\t\t\t\t}\n\n\t\t\t\tvar triangulatedCoordIndex = triangulateFaceIndex( coordIndex, ccw );\n\n\t\t\t\tvar positionAttribute;\n\t\t\t\tvar colorAttribute;\n\t\t\t\tvar normalAttribute;\n\t\t\t\tvar uvAttribute;\n\n\t\t\t\tif ( color ) {\n\n\t\t\t\t\tif ( colorPerVertex === true ) {\n\n\t\t\t\t\t\tif ( colorIndex && colorIndex.length > 0 ) {\n\n\t\t\t\t\t\t\t// if the colorIndex field is not empty, then it is used to choose colors for each vertex of the IndexedFaceSet.\n\n\t\t\t\t\t\t\tvar triangulatedColorIndex = triangulateFaceIndex( colorIndex, ccw );\n\t\t\t\t\t\t\tcolorAttribute = computeAttributeFromIndexedData( triangulatedCoordIndex, triangulatedColorIndex, color, 3 );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// if the colorIndex field is empty, then the coordIndex field is used to choose colors from the Color node\n\n\t\t\t\t\t\t\tcolorAttribute = toNonIndexedAttribute( triangulatedCoordIndex, new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Float32BufferAttribute\"]( color, 3 ) );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( colorIndex && colorIndex.length > 0 ) {\n\n\t\t\t\t\t\t\t// if the colorIndex field is not empty, then they are used to choose one color for each face of the IndexedFaceSet\n\n\t\t\t\t\t\t\tvar flattenFaceColors = flattenData( color, colorIndex );\n\t\t\t\t\t\t\tvar triangulatedFaceColors = triangulateFaceData( flattenFaceColors, coordIndex );\n\t\t\t\t\t\t\tcolorAttribute = computeAttributeFromFaceData( triangulatedCoordIndex, triangulatedFaceColors );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// if the colorIndex field is empty, then the color are applied to each face of the IndexedFaceSet in order\n\n\t\t\t\t\t\t\tvar triangulatedFaceColors = triangulateFaceData( color, coordIndex );\n\t\t\t\t\t\t\tcolorAttribute = computeAttributeFromFaceData( triangulatedCoordIndex, triangulatedFaceColors );\n\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( normal ) {\n\n\t\t\t\t\tif ( normalPerVertex === true ) {\n\n\t\t\t\t\t\t// consider vertex normals\n\n\t\t\t\t\t\tif ( normalIndex && normalIndex.length > 0 ) {\n\n\t\t\t\t\t\t\t// if the normalIndex field is not empty, then it is used to choose normals for each vertex of the IndexedFaceSet.\n\n\t\t\t\t\t\t\tvar triangulatedNormalIndex = triangulateFaceIndex( normalIndex, ccw );\n\t\t\t\t\t\t\tnormalAttribute = computeAttributeFromIndexedData( triangulatedCoordIndex, triangulatedNormalIndex, normal, 3 );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// if the normalIndex field is empty, then the coordIndex field is used to choose normals from the Normal node\n\n\t\t\t\t\t\t\tnormalAttribute = toNonIndexedAttribute( triangulatedCoordIndex, new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Float32BufferAttribute\"]( normal, 3 ) );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// consider face normals\n\n\t\t\t\t\t\tif ( normalIndex && normalIndex.length > 0 ) {\n\n\t\t\t\t\t\t\t// if the normalIndex field is not empty, then they are used to choose one normal for each face of the IndexedFaceSet\n\n\t\t\t\t\t\t\tvar flattenFaceNormals = flattenData( normal, normalIndex );\n\t\t\t\t\t\t\tvar triangulatedFaceNormals = triangulateFaceData( flattenFaceNormals, coordIndex );\n\t\t\t\t\t\t\tnormalAttribute = computeAttributeFromFaceData( triangulatedCoordIndex, triangulatedFaceNormals );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// if the normalIndex field is empty, then the normals are applied to each face of the IndexedFaceSet in order\n\n\t\t\t\t\t\t\tvar triangulatedFaceNormals = triangulateFaceData( normal, coordIndex );\n\t\t\t\t\t\t\tnormalAttribute = computeAttributeFromFaceData( triangulatedCoordIndex, triangulatedFaceNormals );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// if the normal field is NULL, then the loader should automatically generate normals, using creaseAngle to determine if and how normals are smoothed across shared vertices\n\n\t\t\t\t\tnormalAttribute = computeNormalAttribute( triangulatedCoordIndex, coord, creaseAngle );\n\n\t\t\t\t}\n\n\t\t\t\tif ( texCoord ) {\n\n\t\t\t\t\t// texture coordinates are always defined on vertex level\n\n\t\t\t\t\tif ( texCoordIndex && texCoordIndex.length > 0 ) {\n\n\t\t\t\t\t\t// if the texCoordIndex field is not empty, then it is used to choose texture coordinates for each vertex of the IndexedFaceSet.\n\n\t\t\t\t\t\tvar triangulatedTexCoordIndex = triangulateFaceIndex( texCoordIndex, ccw );\n\t\t\t\t\t\tuvAttribute = computeAttributeFromIndexedData( triangulatedCoordIndex, triangulatedTexCoordIndex, texCoord, 2 );\n\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// if the texCoordIndex field is empty, then the coordIndex array is used to choose texture coordinates from the TextureCoordinate node\n\n\t\t\t\t\t\tuvAttribute = toNonIndexedAttribute( triangulatedCoordIndex, new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Float32BufferAttribute\"]( texCoord, 2 ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tvar geometry = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"BufferGeometry\"]();\n\t\t\t\tpositionAttribute = toNonIndexedAttribute( triangulatedCoordIndex, new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Float32BufferAttribute\"]( coord, 3 ) );\n\n\t\t\t\tgeometry.setAttribute( 'position', positionAttribute );\n\t\t\t\tgeometry.setAttribute( 'normal', normalAttribute );\n\n\t\t\t\t// optional attributes\n\n\t\t\t\tif ( colorAttribute ) geometry.setAttribute( 'color', colorAttribute );\n\t\t\t\tif ( uvAttribute ) geometry.setAttribute( 'uv', uvAttribute );\n\n\t\t\t\t// \"solid\" influences the material so let's store it for later use\n\n\t\t\t\tgeometry._solid = solid;\n\t\t\t\tgeometry._type = 'mesh';\n\n\t\t\t\treturn geometry;\n\n\t\t\t}\n\n\t\t\tfunction buildIndexedLineSetNode( node ) {\n\n\t\t\t\tvar color, coord;\n\t\t\t\tvar colorIndex, coordIndex;\n\t\t\t\tvar colorPerVertex = true;\n\n\t\t\t\tvar fields = node.fields;\n\n\t\t\t\tfor ( var i = 0, l = fields.length; i < l; i ++ ) {\n\n\t\t\t\t\tvar field = fields[ i ];\n\t\t\t\t\tvar fieldName = field.name;\n\t\t\t\t\tvar fieldValues = field.values;\n\n\t\t\t\t\tswitch ( fieldName ) {\n\n\t\t\t\t\t\tcase 'color':\n\t\t\t\t\t\t\tvar colorNode = fieldValues[ 0 ];\n\n\t\t\t\t\t\t\tif ( colorNode !== null ) {\n\n\t\t\t\t\t\t\t\tcolor = getNode( colorNode );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'coord':\n\t\t\t\t\t\t\tvar coordNode = fieldValues[ 0 ];\n\n\t\t\t\t\t\t\tif ( coordNode !== null ) {\n\n\t\t\t\t\t\t\t\tcoord = getNode( coordNode );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'colorIndex':\n\t\t\t\t\t\t\tcolorIndex = fieldValues;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'colorPerVertex':\n\t\t\t\t\t\t\tcolorPerVertex = fieldValues[ 0 ];\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'coordIndex':\n\t\t\t\t\t\t\tcoordIndex = fieldValues;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tconsole.warn( 'THREE.VRMLLoader: Unknown field:', fieldName );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// build lines\n\n\t\t\t\tvar colorAttribute;\n\n\t\t\t\tvar expandedLineIndex = expandLineIndex( coordIndex ); // create an index for three.js's linesegment primitive\n\n\t\t\t\tif ( color ) {\n\n\t\t\t\t\tif ( colorPerVertex === true ) {\n\n\t\t\t\t\t\tif ( colorIndex.length > 0 ) {\n\n\t\t\t\t\t\t\t// if the colorIndex field is not empty, then one color is used for each polyline of the IndexedLineSet.\n\n\t\t\t\t\t\t\tvar expandedColorIndex = expandLineIndex( colorIndex ); // compute colors for each line segment (rendering primitve)\n\t\t\t\t\t\t\tcolorAttribute = computeAttributeFromIndexedData( expandedLineIndex, expandedColorIndex, color, 3 ); // compute data on vertex level\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// if the colorIndex field is empty, then the colors are applied to each polyline of the IndexedLineSet in order.\n\n\t\t\t\t\t\t\tcolorAttribute = toNonIndexedAttribute( expandedLineIndex, new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Float32BufferAttribute\"]( color, 3 ) );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( colorIndex.length > 0 ) {\n\n\t\t\t\t\t\t\t// if the colorIndex field is not empty, then colors are applied to each vertex of the IndexedLineSet\n\n\t\t\t\t\t\t\tvar flattenLineColors = flattenData( color, colorIndex ); // compute colors for each VRML primitve\n\t\t\t\t\t\t\tvar expandedLineColors = expandLineData( flattenLineColors, coordIndex ); // compute colors for each line segment (rendering primitve)\n\t\t\t\t\t\t\tcolorAttribute = computeAttributeFromLineData( expandedLineIndex, expandedLineColors ); // compute data on vertex level\n\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// if the colorIndex field is empty, then the coordIndex field is used to choose colors from the Color node\n\n\t\t\t\t\t\t\tvar expandedLineColors = expandLineData( color, coordIndex ); // compute colors for each line segment (rendering primitve)\n\t\t\t\t\t\t\tcolorAttribute = computeAttributeFromLineData( expandedLineIndex, expandedLineColors ); // compute data on vertex level\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t//\n\n\t\t\t\tvar geometry = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"BufferGeometry\"]();\n\n\t\t\t\tvar positionAttribute = toNonIndexedAttribute( expandedLineIndex, new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Float32BufferAttribute\"]( coord, 3 ) );\n\t\t\t\tgeometry.setAttribute( 'position', positionAttribute );\n\n\t\t\t\tif ( colorAttribute ) geometry.setAttribute( 'color', colorAttribute );\n\n\t\t\t\tgeometry._type = 'line';\n\n\t\t\t\treturn geometry;\n\n\t\t\t}\n\n\t\t\tfunction buildPointSetNode( node ) {\n\n\t\t\t\tvar geometry;\n\t\t\t\tvar color, coord;\n\n\t\t\t\tvar fields = node.fields;\n\n\t\t\t\tfor ( var i = 0, l = fields.length; i < l; i ++ ) {\n\n\t\t\t\t\tvar field = fields[ i ];\n\t\t\t\t\tvar fieldName = field.name;\n\t\t\t\t\tvar fieldValues = field.values;\n\n\t\t\t\t\tswitch ( fieldName ) {\n\n\t\t\t\t\t\tcase 'color':\n\t\t\t\t\t\t\tvar colorNode = fieldValues[ 0 ];\n\n\t\t\t\t\t\t\tif ( colorNode !== null ) {\n\n\t\t\t\t\t\t\t\tcolor = getNode( colorNode );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'coord':\n\t\t\t\t\t\t\tvar coordNode = fieldValues[ 0 ];\n\n\t\t\t\t\t\t\tif ( coordNode !== null ) {\n\n\t\t\t\t\t\t\t\tcoord = getNode( coordNode );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tbreak;\n\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tconsole.warn( 'THREE.VRMLLoader: Unknown field:', fieldName );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tvar geometry = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"BufferGeometry\"]();\n\n\t\t\t\tgeometry.setAttribute( 'position', new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Float32BufferAttribute\"]( coord, 3 ) );\n\t\t\t\tif ( color ) geometry.setAttribute( 'color', new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Float32BufferAttribute\"]( color, 3 ) );\n\n\t\t\t\tgeometry._type = 'points';\n\n\t\t\t\treturn geometry;\n\n\t\t\t}\n\n\t\t\tfunction buildBoxNode( node ) {\n\n\t\t\t\tvar size = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector3\"]( 2, 2, 2 );\n\n\t\t\t\tvar fields = node.fields;\n\n\t\t\t\tfor ( var i = 0, l = fields.length; i < l; i ++ ) {\n\n\t\t\t\t\tvar field = fields[ i ];\n\t\t\t\t\tvar fieldName = field.name;\n\t\t\t\t\tvar fieldValues = field.values;\n\n\t\t\t\t\tswitch ( fieldName ) {\n\n\t\t\t\t\t\tcase 'size':\n\t\t\t\t\t\t\tsize.x = fieldValues[ 0 ];\n\t\t\t\t\t\t\tsize.y = fieldValues[ 1 ];\n\t\t\t\t\t\t\tsize.z = fieldValues[ 2 ];\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tconsole.warn( 'THREE.VRMLLoader: Unknown field:', fieldName );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tvar geometry = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"BoxGeometry\"]( size.x, size.y, size.z );\n\n\t\t\t\treturn geometry;\n\n\t\t\t}\n\n\t\t\tfunction buildConeNode( node ) {\n\n\t\t\t\tvar radius = 1, height = 2, openEnded = false;\n\n\t\t\t\tvar fields = node.fields;\n\n\t\t\t\tfor ( var i = 0, l = fields.length; i < l; i ++ ) {\n\n\t\t\t\t\tvar field = fields[ i ];\n\t\t\t\t\tvar fieldName = field.name;\n\t\t\t\t\tvar fieldValues = field.values;\n\n\t\t\t\t\tswitch ( fieldName ) {\n\n\t\t\t\t\t\tcase 'bottom':\n\t\t\t\t\t\t\topenEnded = ! fieldValues[ 0 ];\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'bottomRadius':\n\t\t\t\t\t\t\tradius = fieldValues[ 0 ];\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'height':\n\t\t\t\t\t\t\theight = fieldValues[ 0 ];\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'side':\n\t\t\t\t\t\t\t// field not supported\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tconsole.warn( 'THREE.VRMLLoader: Unknown field:', fieldName );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tvar geometry = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"ConeGeometry\"]( radius, height, 16, 1, openEnded );\n\n\t\t\t\treturn geometry;\n\n\t\t\t}\n\n\t\t\tfunction buildCylinderNode( node ) {\n\n\t\t\t\tvar radius = 1, height = 2;\n\n\t\t\t\tvar fields = node.fields;\n\n\t\t\t\tfor ( var i = 0, l = fields.length; i < l; i ++ ) {\n\n\t\t\t\t\tvar field = fields[ i ];\n\t\t\t\t\tvar fieldName = field.name;\n\t\t\t\t\tvar fieldValues = field.values;\n\n\t\t\t\t\tswitch ( fieldName ) {\n\n\t\t\t\t\t\tcase 'bottom':\n\t\t\t\t\t\t\t// field not supported\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'radius':\n\t\t\t\t\t\t\tradius = fieldValues[ 0 ];\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'height':\n\t\t\t\t\t\t\theight = fieldValues[ 0 ];\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'side':\n\t\t\t\t\t\t\t// field not supported\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'top':\n\t\t\t\t\t\t\t// field not supported\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tconsole.warn( 'THREE.VRMLLoader: Unknown field:', fieldName );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tvar geometry = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"CylinderGeometry\"]( radius, radius, height, 16, 1 );\n\n\t\t\t\treturn geometry;\n\n\t\t\t}\n\n\t\t\tfunction buildSphereNode( node ) {\n\n\t\t\t\tvar radius = 1;\n\n\t\t\t\tvar fields = node.fields;\n\n\t\t\t\tfor ( var i = 0, l = fields.length; i < l; i ++ ) {\n\n\t\t\t\t\tvar field = fields[ i ];\n\t\t\t\t\tvar fieldName = field.name;\n\t\t\t\t\tvar fieldValues = field.values;\n\n\t\t\t\t\tswitch ( fieldName ) {\n\n\t\t\t\t\t\tcase 'radius':\n\t\t\t\t\t\t\tradius = fieldValues[ 0 ];\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tconsole.warn( 'THREE.VRMLLoader: Unknown field:', fieldName );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tvar geometry = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"SphereGeometry\"]( radius, 16, 16 );\n\n\t\t\t\treturn geometry;\n\n\t\t\t}\n\n\t\t\tfunction buildElevationGridNode( node ) {\n\n\t\t\t\tvar color;\n\t\t\t\tvar normal;\n\t\t\t\tvar texCoord;\n\t\t\t\tvar height;\n\n\t\t\t\tvar colorPerVertex = true;\n\t\t\t\tvar normalPerVertex = true;\n\t\t\t\tvar solid = true;\n\t\t\t\tvar ccw = true;\n\t\t\t\tvar creaseAngle = 0;\n\t\t\t\tvar xDimension = 2;\n\t\t\t\tvar zDimension = 2;\n\t\t\t\tvar xSpacing = 1;\n\t\t\t\tvar zSpacing = 1;\n\n\t\t\t\tvar fields = node.fields;\n\n\t\t\t\tfor ( var i = 0, l = fields.length; i < l; i ++ ) {\n\n\t\t\t\t\tvar field = fields[ i ];\n\t\t\t\t\tvar fieldName = field.name;\n\t\t\t\t\tvar fieldValues = field.values;\n\n\t\t\t\t\tswitch ( fieldName ) {\n\n\t\t\t\t\t\tcase 'color':\n\t\t\t\t\t\t\tvar colorNode = fieldValues[ 0 ];\n\n\t\t\t\t\t\t\tif ( colorNode !== null ) {\n\n\t\t\t\t\t\t\t\tcolor = getNode( colorNode );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'normal':\n\t\t\t\t\t\t\tvar normalNode = fieldValues[ 0 ];\n\n\t\t\t\t\t\t\tif ( normalNode !== null ) {\n\n\t\t\t\t\t\t\t\tnormal = getNode( normalNode );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'texCoord':\n\t\t\t\t\t\t\tvar texCoordNode = fieldValues[ 0 ];\n\n\t\t\t\t\t\t\tif ( texCoordNode !== null ) {\n\n\t\t\t\t\t\t\t\ttexCoord = getNode( texCoordNode );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'height':\n\t\t\t\t\t\t\theight = fieldValues;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'ccw':\n\t\t\t\t\t\t\tccw = fieldValues[ 0 ];\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'colorPerVertex':\n\t\t\t\t\t\t\tcolorPerVertex = fieldValues[ 0 ];\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'creaseAngle':\n\t\t\t\t\t\t\tcreaseAngle = fieldValues[ 0 ];\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'normalPerVertex':\n\t\t\t\t\t\t\tnormalPerVertex = fieldValues[ 0 ];\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'solid':\n\t\t\t\t\t\t\tsolid = fieldValues[ 0 ];\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'xDimension':\n\t\t\t\t\t\t\txDimension = fieldValues[ 0 ];\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'xSpacing':\n\t\t\t\t\t\t\txSpacing = fieldValues[ 0 ];\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'zDimension':\n\t\t\t\t\t\t\tzDimension = fieldValues[ 0 ];\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'zSpacing':\n\t\t\t\t\t\t\tzSpacing = fieldValues[ 0 ];\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tconsole.warn( 'THREE.VRMLLoader: Unknown field:', fieldName );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// vertex data\n\n\t\t\t\tvar vertices = [];\n\t\t\t\tvar normals = [];\n\t\t\t\tvar colors = [];\n\t\t\t\tvar uvs = [];\n\n\t\t\t\tfor ( var i = 0; i < zDimension; i ++ ) {\n\n\t\t\t\t\tfor ( var j = 0; j < xDimension; j ++ ) {\n\n\t\t\t\t\t\t// compute a row major index\n\n\t\t\t\t\t\tvar index = ( i * xDimension ) + j;\n\n\t\t\t\t\t\t// vertices\n\n\t\t\t\t\t\tvar x = xSpacing * i;\n\t\t\t\t\t\tvar y = height[ index ];\n\t\t\t\t\t\tvar z = zSpacing * j;\n\n\t\t\t\t\t\tvertices.push( x, y, z );\n\n\t\t\t\t\t\t// colors\n\n\t\t\t\t\t\tif ( color && colorPerVertex === true ) {\n\n\t\t\t\t\t\t\tvar r = color[ index * 3 + 0 ];\n\t\t\t\t\t\t\tvar g = color[ index * 3 + 1 ];\n\t\t\t\t\t\t\tvar b = color[ index * 3 + 2 ];\n\n\t\t\t\t\t\t\tcolors.push( r, g, b );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// normals\n\n\t\t\t\t\t\tif ( normal && normalPerVertex === true ) {\n\n\t\t\t\t\t\t\tvar xn = normal[ index * 3 + 0 ];\n\t\t\t\t\t\t\tvar yn = normal[ index * 3 + 1 ];\n\t\t\t\t\t\t\tvar zn = normal[ index * 3 + 2 ];\n\n\t\t\t\t\t\t\tnormals.push( xn, yn, zn );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// uvs\n\n\t\t\t\t\t\tif ( texCoord ) {\n\n\t\t\t\t\t\t\tvar s = texCoord[ index * 2 + 0 ];\n\t\t\t\t\t\t\tvar t = texCoord[ index * 2 + 1 ];\n\n\t\t\t\t\t\t\tuvs.push( s, t );\n\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tuvs.push( i / ( xDimension - 1 ), j / ( zDimension - 1 ) );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// indices\n\n\t\t\t\tvar indices = [];\n\n\t\t\t\tfor ( var i = 0; i < xDimension - 1; i ++ ) {\n\n\t\t\t\t\tfor ( var j = 0; j < zDimension - 1; j ++ ) {\n\n\t\t\t\t\t\t// from https://tecfa.unige.ch/guides/vrml/vrml97/spec/part1/nodesRef.html#ElevationGrid\n\n\t\t\t\t\t\tvar a = i + j * xDimension;\n\t\t\t\t\t\tvar b = i + ( j + 1 ) * xDimension;\n\t\t\t\t\t\tvar c = ( i + 1 ) + ( j + 1 ) * xDimension;\n\t\t\t\t\t\tvar d = ( i + 1 ) + j * xDimension;\n\n\t\t\t\t\t\t// faces\n\n\t\t\t\t\t\tif ( ccw === true ) {\n\n\t\t\t\t\t\t\tindices.push( a, c, b );\n\t\t\t\t\t\t\tindices.push( c, a, d );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tindices.push( a, b, c );\n\t\t\t\t\t\t\tindices.push( c, d, a );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t//\n\n\t\t\t\tvar positionAttribute = toNonIndexedAttribute( indices, new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Float32BufferAttribute\"]( vertices, 3 ) );\n\t\t\t\tvar uvAttribute = toNonIndexedAttribute( indices, new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Float32BufferAttribute\"]( uvs, 2 ) );\n\t\t\t\tvar colorAttribute;\n\t\t\t\tvar normalAttribute;\n\n\t\t\t\t// color attribute\n\n\t\t\t\tif ( color ) {\n\n\t\t\t\t\tif ( colorPerVertex === false ) {\n\n\t\t\t\t\t\tfor ( var i = 0; i < xDimension - 1; i ++ ) {\n\n\t\t\t\t\t\t\tfor ( var j = 0; j < zDimension - 1; j ++ ) {\n\n\t\t\t\t\t\t\t\tvar index = i + j * ( xDimension - 1 );\n\n\t\t\t\t\t\t\t\tvar r = color[ index * 3 + 0 ];\n\t\t\t\t\t\t\t\tvar g = color[ index * 3 + 1 ];\n\t\t\t\t\t\t\t\tvar b = color[ index * 3 + 2 ];\n\n\t\t\t\t\t\t\t\t// one color per quad\n\n\t\t\t\t\t\t\t\tcolors.push( r, g, b ); colors.push( r, g, b ); colors.push( r, g, b );\n\t\t\t\t\t\t\t\tcolors.push( r, g, b ); colors.push( r, g, b ); colors.push( r, g, b );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcolorAttribute = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Float32BufferAttribute\"]( colors, 3 );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tcolorAttribute = toNonIndexedAttribute( indices, new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Float32BufferAttribute\"]( colors, 3 ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// normal attribute\n\n\t\t\t\tif ( normal ) {\n\n\t\t\t\t\tif ( normalPerVertex === false ) {\n\n\t\t\t\t\t\tfor ( var i = 0; i < xDimension - 1; i ++ ) {\n\n\t\t\t\t\t\t\tfor ( var j = 0; j < zDimension - 1; j ++ ) {\n\n\t\t\t\t\t\t\t\tvar index = i + j * ( xDimension - 1 );\n\n\t\t\t\t\t\t\t\tvar xn = normal[ index * 3 + 0 ];\n\t\t\t\t\t\t\t\tvar yn = normal[ index * 3 + 1 ];\n\t\t\t\t\t\t\t\tvar zn = normal[ index * 3 + 2 ];\n\n\t\t\t\t\t\t\t\t// one normal per quad\n\n\t\t\t\t\t\t\t\tnormals.push( xn, yn, zn ); normals.push( xn, yn, zn ); normals.push( xn, yn, zn );\n\t\t\t\t\t\t\t\tnormals.push( xn, yn, zn ); normals.push( xn, yn, zn ); normals.push( xn, yn, zn );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tnormalAttribute = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Float32BufferAttribute\"]( normals, 3 );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tnormalAttribute = toNonIndexedAttribute( indices, new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Float32BufferAttribute\"]( normals, 3 ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tnormalAttribute = computeNormalAttribute( indices, vertices, creaseAngle );\n\n\t\t\t\t}\n\n\t\t\t\t// build geometry\n\n\t\t\t\tvar geometry = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"BufferGeometry\"]();\n\t\t\t\tgeometry.setAttribute( 'position', positionAttribute );\n\t\t\t\tgeometry.setAttribute( 'normal', normalAttribute );\n\t\t\t\tgeometry.setAttribute( 'uv', uvAttribute );\n\n\t\t\t\tif ( colorAttribute ) geometry.setAttribute( 'color', colorAttribute );\n\n\t\t\t\t// \"solid\" influences the material so let's store it for later use\n\n\t\t\t\tgeometry._solid = solid;\n\t\t\t\tgeometry._type = 'mesh';\n\n\t\t\t\treturn geometry;\n\n\t\t\t}\n\n\t\t\tfunction buildExtrusionNode( node ) {\n\n\t\t\t\tvar crossSection = [ 1, 1, 1, - 1, - 1, - 1, - 1, 1, 1, 1 ];\n\t\t\t\tvar spine = [ 0, 0, 0, 0, 1, 0 ];\n\t\t\t\tvar scale;\n\t\t\t\tvar orientation;\n\n\t\t\t\tvar beginCap = true;\n\t\t\t\tvar ccw = true;\n\t\t\t\tvar creaseAngle = 0;\n\t\t\t\tvar endCap = true;\n\t\t\t\tvar solid = true;\n\n\t\t\t\tvar fields = node.fields;\n\n\t\t\t\tfor ( var i = 0, l = fields.length; i < l; i ++ ) {\n\n\t\t\t\t\tvar field = fields[ i ];\n\t\t\t\t\tvar fieldName = field.name;\n\t\t\t\t\tvar fieldValues = field.values;\n\n\t\t\t\t\tswitch ( fieldName ) {\n\n\t\t\t\t\t\tcase 'beginCap':\n\t\t\t\t\t\t\tbeginCap = fieldValues[ 0 ];\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'ccw':\n\t\t\t\t\t\t\tccw = fieldValues[ 0 ];\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'convex':\n\t\t\t\t\t\t\t// field not supported\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'creaseAngle':\n\t\t\t\t\t\t\tcreaseAngle = fieldValues[ 0 ];\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'crossSection':\n\t\t\t\t\t\t\tcrossSection = fieldValues;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'endCap':\n\t\t\t\t\t\t\tendCap = fieldValues[ 0 ];\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'orientation':\n\t\t\t\t\t\t\torientation = fieldValues;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'scale':\n\t\t\t\t\t\t\tscale = fieldValues;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'solid':\n\t\t\t\t\t\t\tsolid = fieldValues[ 0 ];\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'spine':\n\t\t\t\t\t\t\tspine = fieldValues; // only extrusion along the Y-axis are supported so far\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tconsole.warn( 'THREE.VRMLLoader: Unknown field:', fieldName );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tvar crossSectionClosed = ( crossSection[ 0 ] === crossSection[ crossSection.length - 2 ] && crossSection[ 1 ] === crossSection[ crossSection.length - 1 ] );\n\n\t\t\t\t// vertices\n\n\t\t\t\tvar vertices = [];\n\t\t\t\tvar spineVector = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector3\"]();\n\t\t\t\tvar scaling = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector3\"]();\n\n\t\t\t\tvar axis = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector3\"]();\n\t\t\t\tvar vertex = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector3\"]();\n\t\t\t\tvar quaternion = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Quaternion\"]();\n\n\t\t\t\tfor ( var i = 0, j = 0, o = 0, il = spine.length; i < il; i += 3, j += 2, o += 4 ) {\n\n\t\t\t\t\tspineVector.fromArray( spine, i );\n\n\t\t\t\t\tscaling.x = scale ? scale[ j + 0 ] : 1;\n\t\t\t\t\tscaling.y = 1;\n\t\t\t\t\tscaling.z = scale ? scale[ j + 1 ] : 1;\n\n\t\t\t\t\taxis.x = orientation ? orientation[ o + 0 ] : 0;\n\t\t\t\t\taxis.y = orientation ? orientation[ o + 1 ] : 0;\n\t\t\t\t\taxis.z = orientation ? orientation[ o + 2 ] : 1;\n\t\t\t\t\tvar angle = orientation ? orientation[ o + 3 ] : 0;\n\n\t\t\t\t\tfor ( var k = 0, kl = crossSection.length; k < kl; k += 2 ) {\n\n\t\t\t\t\t\tvertex.x = crossSection[ k + 0 ];\n\t\t\t\t\t\tvertex.y = 0;\n\t\t\t\t\t\tvertex.z = crossSection[ k + 1 ];\n\n\t\t\t\t\t\t// scale\n\n\t\t\t\t\t\tvertex.multiply( scaling );\n\n\t\t\t\t\t\t// rotate\n\n\t\t\t\t\t\tquaternion.setFromAxisAngle( axis, angle );\n\t\t\t\t\t\tvertex.applyQuaternion( quaternion );\n\n\t\t\t\t\t\t// translate\n\n\t\t\t\t\t\tvertex.add( spineVector );\n\n\t\t\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// indices\n\n\t\t\t\tvar indices = [];\n\n\t\t\t\tvar spineCount = spine.length / 3;\n\t\t\t\tvar crossSectionCount = crossSection.length / 2;\n\n\t\t\t\tfor ( var i = 0; i < spineCount - 1; i ++ ) {\n\n\t\t\t\t\tfor ( var j = 0; j < crossSectionCount - 1; j ++ ) {\n\n\t\t\t\t\t\tvar a = j + i * crossSectionCount;\n\t\t\t\t\t\tvar b = ( j + 1 ) + i * crossSectionCount;\n\t\t\t\t\t\tvar c = j + ( i + 1 ) * crossSectionCount;\n\t\t\t\t\t\tvar d = ( j + 1 ) + ( i + 1 ) * crossSectionCount;\n\n\t\t\t\t\t\tif ( ( j === crossSectionCount - 2 ) && ( crossSectionClosed === true ) ) {\n\n\t\t\t\t\t\t\tb = i * crossSectionCount;\n\t\t\t\t\t\t\td = ( i + 1 ) * crossSectionCount;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( ccw === true ) {\n\n\t\t\t\t\t\t\tindices.push( a, b, c );\n\t\t\t\t\t\t\tindices.push( c, b, d );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tindices.push( a, c, b );\n\t\t\t\t\t\t\tindices.push( c, d, b );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// triangulate cap\n\n\t\t\t\tif ( beginCap === true || endCap === true ) {\n\n\t\t\t\t\tvar contour = [];\n\n\t\t\t\t\tfor ( var i = 0, l = crossSection.length; i < l; i += 2 ) {\n\n\t\t\t\t\t\tcontour.push( new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector2\"]( crossSection[ i ], crossSection[ i + 1 ] ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tvar faces = _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"ShapeUtils\"].triangulateShape( contour, [] );\n\t\t\t\t\tvar capIndices = [];\n\n\t\t\t\t\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\n\n\t\t\t\t\t\tvar face = faces[ i ];\n\n\t\t\t\t\t\tcapIndices.push( face[ 0 ], face[ 1 ], face[ 2 ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// begin cap\n\n\t\t\t\t\tif ( beginCap === true ) {\n\n\t\t\t\t\t\tfor ( var i = 0, l = capIndices.length; i < l; i += 3 ) {\n\n\t\t\t\t\t\t\tif ( ccw === true ) {\n\n\t\t\t\t\t\t\t\tindices.push( capIndices[ i + 0 ], capIndices[ i + 1 ], capIndices[ i + 2 ] );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tindices.push( capIndices[ i + 0 ], capIndices[ i + 2 ], capIndices[ i + 1 ] );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// end cap\n\n\t\t\t\t\tif ( endCap === true ) {\n\n\t\t\t\t\t\tvar indexOffset = crossSectionCount * ( spineCount - 1 ); // references to the first vertex of the last cross section\n\n\t\t\t\t\t\tfor ( var i = 0, l = capIndices.length; i < l; i += 3 ) {\n\n\t\t\t\t\t\t\tif ( ccw === true ) {\n\n\t\t\t\t\t\t\t\tindices.push( indexOffset + capIndices[ i + 0 ], indexOffset + capIndices[ i + 2 ], indexOffset + capIndices[ i + 1 ] );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tindices.push( indexOffset + capIndices[ i + 0 ], indexOffset + capIndices[ i + 1 ], indexOffset + capIndices[ i + 2 ] );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tvar positionAttribute = toNonIndexedAttribute( indices, new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Float32BufferAttribute\"]( vertices, 3 ) );\n\t\t\t\tvar normalAttribute = computeNormalAttribute( indices, vertices, creaseAngle );\n\n\t\t\t\tvar geometry = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"BufferGeometry\"]();\n\t\t\t\tgeometry.setAttribute( 'position', positionAttribute );\n\t\t\t\tgeometry.setAttribute( 'normal', normalAttribute );\n\t\t\t\t// no uvs yet\n\n\t\t\t\t// \"solid\" influences the material so let's store it for later use\n\n\t\t\t\tgeometry._solid = solid;\n\t\t\t\tgeometry._type = 'mesh';\n\n\t\t\t\treturn geometry;\n\n\t\t\t}\n\n\t\t\t// helper functions\n\n\t\t\tfunction resolveUSE( identifier ) {\n\n\t\t\t\tvar node = nodeMap[ identifier ];\n\t\t\t\tvar build = getNode( node );\n\n\t\t\t\t// because the same 3D objects can have different transformations, it's necessary to clone them.\n\t\t\t\t// materials can be influenced by the geometry (e.g. vertex normals). cloning is necessary to avoid\n\t\t\t\t// any side effects\n\n\t\t\t\treturn ( build.isObject3D || build.isMaterial ) ? build.clone() : build;\n\n\t\t\t}\n\n\t\t\tfunction parseFieldChildren( children, owner ) {\n\n\t\t\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\t\t\tvar object = getNode( children[ i ] );\n\n\t\t\t\t\tif ( object instanceof _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Object3D\"] ) owner.add( object );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfunction triangulateFaceIndex( index, ccw ) {\n\n\t\t\t\tvar indices = [];\n\n\t\t\t\t// since face defintions can have more than three vertices, it's necessary to\n\t\t\t\t// perform a simple triangulation\n\n\t\t\t\tvar start = 0;\n\n\t\t\t\tfor ( var i = 0, l = index.length; i < l; i ++ ) {\n\n\t\t\t\t\tvar i1 = index[ start ];\n\t\t\t\t\tvar i2 = index[ i + ( ccw ? 1 : 2 ) ];\n\t\t\t\t\tvar i3 = index[ i + ( ccw ? 2 : 1 ) ];\n\n\t\t\t\t\tindices.push( i1, i2, i3 );\n\n\t\t\t\t\t// an index of -1 indicates that the current face has ended and the next one begins\n\n\t\t\t\t\tif ( index[ i + 3 ] === - 1 || i + 3 >= l ) {\n\n\t\t\t\t\t\ti += 3;\n\t\t\t\t\t\tstart = i + 1;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\treturn indices;\n\n\t\t\t}\n\n\t\t\tfunction triangulateFaceData( data, index ) {\n\n\t\t\t\tvar triangulatedData = [];\n\n\t\t\t\tvar start = 0;\n\n\t\t\t\tfor ( var i = 0, l = index.length; i < l; i ++ ) {\n\n\t\t\t\t\tvar stride = start * 3;\n\n\t\t\t\t\tvar x = data[ stride ];\n\t\t\t\t\tvar y = data[ stride + 1 ];\n\t\t\t\t\tvar z = data[ stride + 2 ];\n\n\t\t\t\t\ttriangulatedData.push( x, y, z );\n\n\t\t\t\t\t// an index of -1 indicates that the current face has ended and the next one begins\n\n\t\t\t\t\tif ( index[ i + 3 ] === - 1 || i + 3 >= l ) {\n\n\t\t\t\t\t\ti += 3;\n\t\t\t\t\t\tstart ++;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\treturn triangulatedData;\n\n\t\t\t}\n\n\t\t\tfunction flattenData( data, index ) {\n\n\t\t\t\tvar flattenData = [];\n\n\t\t\t\tfor ( var i = 0, l = index.length; i < l; i ++ ) {\n\n\t\t\t\t\tvar i1 = index[ i ];\n\n\t\t\t\t\tvar stride = i1 * 3;\n\n\t\t\t\t\tvar x = data[ stride ];\n\t\t\t\t\tvar y = data[ stride + 1 ];\n\t\t\t\t\tvar z = data[ stride + 2 ];\n\n\t\t\t\t\tflattenData.push( x, y, z );\n\n\t\t\t\t}\n\n\t\t\t\treturn flattenData;\n\n\t\t\t}\n\n\t\t\tfunction expandLineIndex( index ) {\n\n\t\t\t\tvar indices = [];\n\n\t\t\t\tfor ( var i = 0, l = index.length; i < l; i ++ ) {\n\n\t\t\t\t\tvar i1 = index[ i ];\n\t\t\t\t\tvar i2 = index[ i + 1 ];\n\n\t\t\t\t\tindices.push( i1, i2 );\n\n\t\t\t\t\t// an index of -1 indicates that the current line has ended and the next one begins\n\n\t\t\t\t\tif ( index[ i + 2 ] === - 1 || i + 2 >= l ) {\n\n\t\t\t\t\t\ti += 2;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\treturn indices;\n\n\t\t\t}\n\n\t\t\tfunction expandLineData( data, index ) {\n\n\t\t\t\tvar triangulatedData = [];\n\n\t\t\t\tvar start = 0;\n\n\t\t\t\tfor ( var i = 0, l = index.length; i < l; i ++ ) {\n\n\t\t\t\t\tvar stride = start * 3;\n\n\t\t\t\t\tvar x = data[ stride ];\n\t\t\t\t\tvar y = data[ stride + 1 ];\n\t\t\t\t\tvar z = data[ stride + 2 ];\n\n\t\t\t\t\ttriangulatedData.push( x, y, z );\n\n\t\t\t\t\t// an index of -1 indicates that the current line has ended and the next one begins\n\n\t\t\t\t\tif ( index[ i + 2 ] === - 1 || i + 2 >= l ) {\n\n\t\t\t\t\t\ti += 2;\n\t\t\t\t\t\tstart ++;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\treturn triangulatedData;\n\n\t\t\t}\n\n\t\t\tvar vA = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector3\"]();\n\t\t\tvar vB = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector3\"]();\n\t\t\tvar vC = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector3\"]();\n\n\t\t\tvar uvA = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector2\"]();\n\t\t\tvar uvB = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector2\"]();\n\t\t\tvar uvC = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector2\"]();\n\n\t\t\tfunction computeAttributeFromIndexedData( coordIndex, index, data, itemSize ) {\n\n\t\t\t\tvar array = [];\n\n\t\t\t\t// we use the coordIndex.length as delimiter since normalIndex must contain at least as many indices\n\n\t\t\t\tfor ( var i = 0, l = coordIndex.length; i < l; i += 3 ) {\n\n\t\t\t\t\tvar a = index[ i ];\n\t\t\t\t\tvar b = index[ i + 1 ];\n\t\t\t\t\tvar c = index[ i + 2 ];\n\n\t\t\t\t\tif ( itemSize === 2 ) {\n\n\t\t\t\t\t\tuvA.fromArray( data, a * itemSize );\n\t\t\t\t\t\tuvB.fromArray( data, b * itemSize );\n\t\t\t\t\t\tuvC.fromArray( data, c * itemSize );\n\n\t\t\t\t\t\tarray.push( uvA.x, uvA.y );\n\t\t\t\t\t\tarray.push( uvB.x, uvB.y );\n\t\t\t\t\t\tarray.push( uvC.x, uvC.y );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tvA.fromArray( data, a * itemSize );\n\t\t\t\t\t\tvB.fromArray( data, b * itemSize );\n\t\t\t\t\t\tvC.fromArray( data, c * itemSize );\n\n\t\t\t\t\t\tarray.push( vA.x, vA.y, vA.z );\n\t\t\t\t\t\tarray.push( vB.x, vB.y, vB.z );\n\t\t\t\t\t\tarray.push( vC.x, vC.y, vC.z );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\treturn new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Float32BufferAttribute\"]( array, itemSize );\n\n\t\t\t}\n\n\t\t\tfunction computeAttributeFromFaceData( index, faceData ) {\n\n\t\t\t\tvar array = [];\n\n\t\t\t\tfor ( var i = 0, j = 0, l = index.length; i < l; i += 3, j ++ ) {\n\n\t\t\t\t\tvA.fromArray( faceData, j * 3 );\n\n\t\t\t\t\tarray.push( vA.x, vA.y, vA.z );\n\t\t\t\t\tarray.push( vA.x, vA.y, vA.z );\n\t\t\t\t\tarray.push( vA.x, vA.y, vA.z );\n\n\t\t\t\t}\n\n\t\t\t\treturn new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Float32BufferAttribute\"]( array, 3 );\n\n\t\t\t}\n\n\t\t\tfunction computeAttributeFromLineData( index, lineData ) {\n\n\t\t\t\tvar array = [];\n\n\t\t\t\tfor ( var i = 0, j = 0, l = index.length; i < l; i += 2, j ++ ) {\n\n\t\t\t\t\tvA.fromArray( lineData, j * 3 );\n\n\t\t\t\t\tarray.push( vA.x, vA.y, vA.z );\n\t\t\t\t\tarray.push( vA.x, vA.y, vA.z );\n\n\t\t\t\t}\n\n\t\t\t\treturn new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Float32BufferAttribute\"]( array, 3 );\n\n\t\t\t}\n\n\t\t\tfunction toNonIndexedAttribute( indices, attribute ) {\n\n\t\t\t\tvar array = attribute.array;\n\t\t\t\tvar itemSize = attribute.itemSize;\n\n\t\t\t\tvar array2 = new array.constructor( indices.length * itemSize );\n\n\t\t\t\tvar index = 0, index2 = 0;\n\n\t\t\t\tfor ( var i = 0, l = indices.length; i < l; i ++ ) {\n\n\t\t\t\t\tindex = indices[ i ] * itemSize;\n\n\t\t\t\t\tfor ( var j = 0; j < itemSize; j ++ ) {\n\n\t\t\t\t\t\tarray2[ index2 ++ ] = array[ index ++ ];\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\treturn new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Float32BufferAttribute\"]( array2, itemSize );\n\n\t\t\t}\n\n\t\t\tvar ab = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector3\"]();\n\t\t\tvar cb = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector3\"]();\n\n\t\t\tfunction computeNormalAttribute( index, coord, creaseAngle ) {\n\n\t\t\t\tvar faces = [];\n\t\t\t\tvar vertexNormals = {};\n\n\t\t\t\t// prepare face and raw vertex normals\n\n\t\t\t\tfor ( var i = 0, l = index.length; i < l; i += 3 ) {\n\n\t\t\t\t\tvar a = index[ i ];\n\t\t\t\t\tvar b = index[ i + 1 ];\n\t\t\t\t\tvar c = index[ i + 2 ];\n\n\t\t\t\t\tvar face = new Face( a, b, c );\n\n\t\t\t\t\tvA.fromArray( coord, a * 3 );\n\t\t\t\t\tvB.fromArray( coord, b * 3 );\n\t\t\t\t\tvC.fromArray( coord, c * 3 );\n\n\t\t\t\t\tcb.subVectors( vC, vB );\n\t\t\t\t\tab.subVectors( vA, vB );\n\t\t\t\t\tcb.cross( ab );\n\n\t\t\t\t\tcb.normalize();\n\n\t\t\t\t\tface.normal.copy( cb );\n\n\t\t\t\t\tif ( vertexNormals[ a ] === undefined ) vertexNormals[ a ] = [];\n\t\t\t\t\tif ( vertexNormals[ b ] === undefined ) vertexNormals[ b ] = [];\n\t\t\t\t\tif ( vertexNormals[ c ] === undefined ) vertexNormals[ c ] = [];\n\n\t\t\t\t\tvertexNormals[ a ].push( face.normal );\n\t\t\t\t\tvertexNormals[ b ].push( face.normal );\n\t\t\t\t\tvertexNormals[ c ].push( face.normal );\n\n\t\t\t\t\tfaces.push( face );\n\n\t\t\t\t}\n\n\t\t\t\t// compute vertex normals and build final geometry\n\n\t\t\t\tvar normals = [];\n\n\t\t\t\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\n\n\t\t\t\t\tvar face = faces[ i ];\n\n\t\t\t\t\tvar nA = weightedNormal( vertexNormals[ face.a ], face.normal, creaseAngle );\n\t\t\t\t\tvar nB = weightedNormal( vertexNormals[ face.b ], face.normal, creaseAngle );\n\t\t\t\t\tvar nC = weightedNormal( vertexNormals[ face.c ], face.normal, creaseAngle );\n\n\t\t\t\t\tvA.fromArray( coord, face.a * 3 );\n\t\t\t\t\tvB.fromArray( coord, face.b * 3 );\n\t\t\t\t\tvC.fromArray( coord, face.c * 3 );\n\n\t\t\t\t\tnormals.push( nA.x, nA.y, nA.z );\n\t\t\t\t\tnormals.push( nB.x, nB.y, nB.z );\n\t\t\t\t\tnormals.push( nC.x, nC.y, nC.z );\n\n\t\t\t\t}\n\n\t\t\t\treturn new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Float32BufferAttribute\"]( normals, 3 );\n\n\t\t\t}\n\n\t\t\tfunction weightedNormal( normals, vector, creaseAngle ) {\n\n\t\t\t\tvar normal = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector3\"]();\n\n\t\t\t\tif ( creaseAngle === 0 ) {\n\n\t\t\t\t\tnormal.copy( vector );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tfor ( var i = 0, l = normals.length; i < l; i ++ ) {\n\n\t\t\t\t\t\tif ( normals[ i ].angleTo( vector ) < creaseAngle ) {\n\n\t\t\t\t\t\t\tnormal.add( normals[ i ] );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\treturn normal.normalize();\n\n\t\t\t}\n\n\t\t\tfunction toColorArray( colors ) {\n\n\t\t\t\tvar array = [];\n\n\t\t\t\tfor ( var i = 0, l = colors.length; i < l; i += 3 ) {\n\n\t\t\t\t\tarray.push( new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Color\"]( colors[ i ], colors[ i + 1 ], colors[ i + 2 ] ) );\n\n\t\t\t\t}\n\n\t\t\t\treturn array;\n\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * Vertically paints the faces interpolating between the\n\t\t\t * specified colors at the specified angels. This is used for the Background\n\t\t\t * node, but could be applied to other nodes with multiple faces as well.\n\t\t\t *\n\t\t\t * When used with the Background node, default is directionIsDown is true if\n\t\t\t * interpolating the skyColor down from the Zenith. When interpolationg up from\n\t\t\t * the Nadir i.e. interpolating the groundColor, the directionIsDown is false.\n\t\t\t *\n\t\t\t * The first angle is never specified, it is the Zenith (0 rad). Angles are specified\n\t\t\t * in radians. The geometry is thought a sphere, but could be anything. The color interpolation\n\t\t\t * is linear along the Y axis in any case.\n\t\t\t *\n\t\t\t * You must specify one more color than you have angles at the beginning of the colors array.\n\t\t\t * This is the color of the Zenith (the top of the shape).\n\t\t\t *\n\t\t\t * @param {BufferGeometry} geometry\n\t\t\t * @param {number} radius\n\t\t\t * @param {array} angles\n\t\t\t * @param {array} colors\n\t\t\t * @param {boolean} topDown - Whether to work top down or bottom up.\n\t\t\t */\n\t\t\tfunction paintFaces( geometry, radius, angles, colors, topDown ) {\n\n\t\t\t\t// compute threshold values\n\n\t\t\t\tvar thresholds = [];\n\t\t\t\tvar startAngle = ( topDown === true ) ? 0 : Math.PI;\n\n\t\t\t\tfor ( var i = 0, l = colors.length; i < l; i ++ ) {\n\n\t\t\t\t\tvar angle = ( i === 0 ) ? 0 : angles[ i - 1 ];\n\t\t\t\t\tangle = ( topDown === true ) ? angle : ( startAngle - angle );\n\n\t\t\t\t\tvar point = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector3\"]();\n\t\t\t\t\tpoint.setFromSphericalCoords( radius, angle, 0 );\n\n\t\t\t\t\tthresholds.push( point );\n\n\t\t\t\t}\n\n\t\t\t\t// generate vertex colors\n\n\t\t\t\tvar indices = geometry.index;\n\t\t\t\tvar positionAttribute = geometry.attributes.position;\n\t\t\t\tvar colorAttribute = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"BufferAttribute\"]( new Float32Array( geometry.attributes.position.count * 3 ), 3 );\n\n\t\t\t\tvar position = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector3\"]();\n\t\t\t\tvar color = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Color\"]();\n\n\t\t\t\tfor ( var i = 0; i < indices.count; i ++ ) {\n\n\t\t\t\t\tvar index = indices.getX( i );\n\t\t\t\t\tposition.fromBufferAttribute( positionAttribute, index );\n\n\t\t\t\t\tvar thresholdIndexA, thresholdIndexB;\n\t\t\t\t\tvar t = 1;\n\n\t\t\t\t\tfor ( var j = 1; j < thresholds.length; j ++ ) {\n\n\t\t\t\t\t\tthresholdIndexA = j - 1;\n\t\t\t\t\t\tthresholdIndexB = j;\n\n\t\t\t\t\t\tvar thresholdA = thresholds[ thresholdIndexA ];\n\t\t\t\t\t\tvar thresholdB = thresholds[ thresholdIndexB ];\n\n\t\t\t\t\t\tif ( topDown === true ) {\n\n\t\t\t\t\t\t\t// interpolation for sky color\n\n\t\t\t\t\t\t\tif ( position.y <= thresholdA.y && position.y > thresholdB.y ) {\n\n\t\t\t\t\t\t\t\tt = Math.abs( thresholdA.y - position.y ) / Math.abs( thresholdA.y - thresholdB.y );\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// interpolation for ground color\n\n\t\t\t\t\t\t\tif ( position.y >= thresholdA.y && position.y < thresholdB.y ) {\n\n\t\t\t\t\t\t\t\tt = Math.abs( thresholdA.y - position.y ) / Math.abs( thresholdA.y - thresholdB.y );\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tvar colorA = colors[ thresholdIndexA ];\n\t\t\t\t\tvar colorB = colors[ thresholdIndexB ];\n\n\t\t\t\t\tcolor.copy( colorA ).lerp( colorB, t );\n\n\t\t\t\t\tcolorAttribute.setXYZ( index, color.r, color.g, color.b );\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.setAttribute( 'color', colorAttribute );\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\tvar textureLoader = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"TextureLoader\"]( this.manager );\n\t\t\ttextureLoader.setPath( this.resourcePath || path ).setCrossOrigin( this.crossOrigin );\n\n\t\t\t// check version (only 2.0 is supported)\n\n\t\t\tif ( data.indexOf( '#VRML V2.0' ) === - 1 ) {\n\n\t\t\t\tthrow Error( 'THREE.VRMLLexer: Version of VRML asset not supported.' );\n\n\t\t\t}\n\n\t\t\t// create JSON representing the tree structure of the VRML asset\n\n\t\t\tvar tree = generateVRMLTree( data );\n\n\t\t\t// parse the tree structure to a three.js scene\n\n\t\t\tvar scene = parseTree( tree );\n\n\t\t\treturn scene;\n\n\t\t}\n\n\t} );\n\n\tfunction VRMLLexer( tokens ) {\n\n\t\tthis.lexer = new _libs_chevrotain_module_min_js__WEBPACK_IMPORTED_MODULE_1__[\"chevrotain\"].Lexer( tokens ); // eslint-disable-line no-undef\n\n\t}\n\n\tVRMLLexer.prototype = {\n\n\t\tconstructor: VRMLLexer,\n\n\t\tlex: function ( inputText ) {\n\n\t\t\tvar lexingResult = this.lexer.tokenize( inputText );\n\n\t\t\tif ( lexingResult.errors.length > 0 ) {\n\n\t\t\t\tconsole.error( lexingResult.errors );\n\n\t\t\t\tthrow Error( 'THREE.VRMLLexer: Lexing errors detected.' );\n\n\t\t\t}\n\n\t\t\treturn lexingResult;\n\n\t\t}\n\n\t};\n\n\tfunction VRMLParser( tokenVocabulary ) {\n\n\t\t_libs_chevrotain_module_min_js__WEBPACK_IMPORTED_MODULE_1__[\"chevrotain\"].Parser.call( this, tokenVocabulary ); // eslint-disable-line no-undef\n\n\t\tvar $ = this;\n\n\t\tvar Version = tokenVocabulary[ 'Version' ];\n\t\tvar LCurly = tokenVocabulary[ 'LCurly' ];\n\t\tvar RCurly = tokenVocabulary[ 'RCurly' ];\n\t\tvar LSquare = tokenVocabulary[ 'LSquare' ];\n\t\tvar RSquare = tokenVocabulary[ 'RSquare' ];\n\t\tvar Identifier = tokenVocabulary[ 'Identifier' ];\n\t\tvar RouteIdentifier = tokenVocabulary[ 'RouteIdentifier' ];\n\t\tvar StringLiteral = tokenVocabulary[ 'StringLiteral' ];\n\t\tvar HexLiteral = tokenVocabulary[ 'HexLiteral' ];\n\t\tvar NumberLiteral = tokenVocabulary[ 'NumberLiteral' ];\n\t\tvar TrueLiteral = tokenVocabulary[ 'TrueLiteral' ];\n\t\tvar FalseLiteral = tokenVocabulary[ 'FalseLiteral' ];\n\t\tvar NullLiteral = tokenVocabulary[ 'NullLiteral' ];\n\t\tvar DEF = tokenVocabulary[ 'DEF' ];\n\t\tvar USE = tokenVocabulary[ 'USE' ];\n\t\tvar ROUTE = tokenVocabulary[ 'ROUTE' ];\n\t\tvar TO = tokenVocabulary[ 'TO' ];\n\t\tvar NodeName = tokenVocabulary[ 'NodeName' ];\n\n\t\t$.RULE( 'vrml', function () {\n\n\t\t\t$.SUBRULE( $.version );\n\t\t\t$.AT_LEAST_ONE( function () {\n\n\t\t\t\t$.SUBRULE( $.node );\n\n\t\t\t} );\n\t\t\t$.MANY( function () {\n\n\t\t\t\t$.SUBRULE( $.route );\n\n\t\t\t} );\n\n\t\t} );\n\n\t\t$.RULE( 'version', function () {\n\n\t\t\t$.CONSUME( Version );\n\n\t\t} );\n\n\t\t$.RULE( 'node', function () {\n\n\t\t\t$.OPTION( function () {\n\n\t\t\t\t$.SUBRULE( $.def );\n\n\t\t\t} );\n\n\t\t\t$.CONSUME( NodeName );\n\t\t\t$.CONSUME( LCurly );\n\t\t\t$.MANY( function () {\n\n\t\t\t\t$.SUBRULE( $.field );\n\n\t\t\t} );\n\t\t\t$.CONSUME( RCurly );\n\n\t\t} );\n\n\t\t$.RULE( 'field', function () {\n\n\t\t\t$.CONSUME( Identifier );\n\n\t\t\t$.OR2( [\n\t\t\t\t{ ALT: function () {\n\n\t\t\t\t\t$.SUBRULE( $.singleFieldValue );\n\n\t\t\t\t} },\n\t\t\t\t{ ALT: function () {\n\n\t\t\t\t\t$.SUBRULE( $.multiFieldValue );\n\n\t\t\t\t} }\n\t\t\t] );\n\n\t\t} );\n\n\t\t$.RULE( 'def', function () {\n\n\t\t\t$.CONSUME( DEF );\n\t\t\t$.OR( [\n\t\t\t\t{ ALT: function () {\n\n\t\t\t\t\t$.CONSUME( Identifier );\n\n\t\t\t\t} },\n\t\t\t\t{ ALT: function () {\n\n\t\t\t\t\t$.CONSUME( NodeName );\n\n\t\t\t\t} }\n\t\t\t] );\n\n\t\t} );\n\n\t\t$.RULE( 'use', function () {\n\n\t\t\t$.CONSUME( USE );\n\t\t\t$.OR( [\n\t\t\t\t{ ALT: function () {\n\n\t\t\t\t\t$.CONSUME( Identifier );\n\n\t\t\t\t} },\n\t\t\t\t{ ALT: function () {\n\n\t\t\t\t\t$.CONSUME( NodeName );\n\n\t\t\t\t} }\n\t\t\t] );\n\n\t\t} );\n\n\t\t$.RULE( 'singleFieldValue', function () {\n\n\t\t\t$.AT_LEAST_ONE( function () {\n\n\t\t\t\t$.OR( [\n\t\t\t\t\t{ ALT: function () {\n\n\t\t\t\t\t\t$.SUBRULE( $.node );\n\n\t\t\t\t\t} },\n\t\t\t\t\t{ ALT: function () {\n\n\t\t\t\t\t\t$.SUBRULE( $.use );\n\n\t\t\t\t\t} },\n\t\t\t\t\t{ ALT: function () {\n\n\t\t\t\t\t\t$.CONSUME( StringLiteral );\n\n\t\t\t\t\t} },\n\t\t\t\t\t{ ALT: function () {\n\n\t\t\t\t\t\t$.CONSUME( HexLiteral );\n\n\t\t\t\t\t} },\n\t\t\t\t\t{ ALT: function () {\n\n\t\t\t\t\t\t$.CONSUME( NumberLiteral );\n\n\t\t\t\t\t} },\n\t\t\t\t\t{ ALT: function () {\n\n\t\t\t\t\t\t$.CONSUME( TrueLiteral );\n\n\t\t\t\t\t} },\n\t\t\t\t\t{ ALT: function () {\n\n\t\t\t\t\t\t$.CONSUME( FalseLiteral );\n\n\t\t\t\t\t} },\n\t\t\t\t\t{ ALT: function () {\n\n\t\t\t\t\t\t$.CONSUME( NullLiteral );\n\n\t\t\t\t\t} }\n\t\t\t\t] );\n\n\n\t\t\t} );\n\n\t\t} );\n\n\t\t$.RULE( 'multiFieldValue', function () {\n\n\t\t\t$.CONSUME( LSquare );\n\t\t\t$.MANY( function () {\n\n\t\t\t\t$.OR( [\n\t\t\t\t\t{ ALT: function () {\n\n\t\t\t\t\t\t$.SUBRULE( $.node );\n\n\t\t\t\t\t} },\n\t\t\t\t\t{ ALT: function () {\n\n\t\t\t\t\t\t$.SUBRULE( $.use );\n\n\t\t\t\t\t} },\n\t\t\t\t\t{ ALT: function () {\n\n\t\t\t\t\t\t$.CONSUME( StringLiteral );\n\n\t\t\t\t\t} },\n\t\t\t\t\t{ ALT: function () {\n\n\t\t\t\t\t\t$.CONSUME( HexLiteral );\n\n\t\t\t\t\t} },\n\t\t\t\t\t{ ALT: function () {\n\n\t\t\t\t\t\t$.CONSUME( NumberLiteral );\n\n\t\t\t\t\t} },\n\t\t\t\t\t{ ALT: function () {\n\n\t\t\t\t\t\t$.CONSUME( NullLiteral );\n\n\t\t\t\t\t} }\n\t\t\t\t] );\n\n\t\t\t} );\n\t\t\t$.CONSUME( RSquare );\n\n\t\t} );\n\n\t\t$.RULE( 'route', function () {\n\n\t\t\t$.CONSUME( ROUTE );\n\t\t\t$.CONSUME( RouteIdentifier );\n\t\t\t$.CONSUME( TO );\n\t\t\t$.CONSUME2( RouteIdentifier );\n\n\t\t} );\n\n\t\tthis.performSelfAnalysis();\n\n\t}\n\n\tVRMLParser.prototype = Object.create( _libs_chevrotain_module_min_js__WEBPACK_IMPORTED_MODULE_1__[\"chevrotain\"].Parser.prototype ); // eslint-disable-line no-undef\n\tVRMLParser.prototype.constructor = VRMLParser;\n\n\tfunction Face( a, b, c ) {\n\n\t\tthis.a = a;\n\t\tthis.b = b;\n\t\tthis.c = c;\n\t\tthis.normal = new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__[\"Vector3\"]();\n\n\t}\n\n\tvar TEXTURE_TYPE = {\n\t\tINTENSITY: 1,\n\t\tINTENSITY_ALPHA: 2,\n\t\tRGB: 3,\n\t\tRGBA: 4\n\t};\n\n\treturn VRMLLoader;\n\n} )();\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL3RocmVlL2V4YW1wbGVzL2pzbS9sb2FkZXJzL1ZSTUxMb2FkZXIuanM/ZjdjZiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQW1Dd0M7QUFDc0I7O0FBRTlEOztBQUVBOztBQUVBLGFBQWEseUVBQVUsb0JBQW9COztBQUUzQzs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQSxFQUFFLDZEQUFNOztBQUVSOztBQUVBLHNEQUFzRCw2REFBTTs7QUFFNUQ7O0FBRUE7O0FBRUE7O0FBRUEsc0NBQXNDLGtFQUFXOztBQUVqRCxvQkFBb0IsaUVBQVU7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUEsS0FBSzs7QUFFTDs7QUFFQTs7QUFFQSxNQUFNOztBQUVOOztBQUVBOztBQUVBOztBQUVBOztBQUVBLElBQUk7O0FBRUosR0FBRzs7QUFFSDs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQSxzQkFBc0IseUVBQVUsYUFBYTs7QUFFN0M7O0FBRUEsd0NBQXdDLHVTQUF1UztBQUMvVSxtQ0FBbUMsNkxBQTZMOztBQUVoTzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7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O0FBRXZEOztBQUVBOztBQUVBOzs7QUFHQTs7QUFFQTs7O0FBR0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQSxxQkFBcUIsNERBQUs7O0FBRTFCOztBQUVBOztBQUVBLHVDQUF1QyxPQUFPOztBQUU5QztBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHNCQUFzQiw4REFBTztBQUM3QjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFF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O0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBLHVCQUF1QixtRUFBWTs7QUFFbkM7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUEsdUNBQXVDLE9BQU87O0FBRTlDO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQSx1QkFBdUIsdUVBQWdCOztBQUV2Qzs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQSx1Q0FBdUMsT0FBTzs7QUFFOUM7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUEsdUJBQXVCLHFFQUFjOztBQUVyQzs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsdUNBQXVDLE9BQU87O0FBRTlDO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLG9CQUFv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LHNDQUFzQzs7QUFFbEQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUEsSUFBSTtBQUNKOztBQUVBOztBQUVBLElBQUk7O0FBRUosR0FBRzs7QUFFSDs7QUFFQTs7QUFFQSxHQUFHOztBQUVIOztBQUVBOztBQUVBOztBQUVBLElBQUk7O0FBRUo7QUFDQTtBQUNBOztBQUVBOztBQUVBLElBQUk7QUFDSjs7QUFFQSxHQUFHOztBQUVIOztBQUVBOztBQUVBO0FBQ0EsS0FBSzs7QUFFTDs7QUFFQSxLQUFLLEVBQUU7QUFDUCxLQUFLOztBQUVMOztBQUVBLEtBQUs7QUFDTDs7QUFFQSxHQUFHOztBQUVIOztBQUVBO0FBQ0E7QUFDQSxLQUFLOztBQUVMOztBQUVBLEtBQUssRUFBRTtBQUNQLEtBQUs7O0FBRUw7O0FBRUEsS0FBSztBQUNMOztBQUVBLEdBQUc7O0FBRUg7O0FBRUE7QUFDQTtBQUNBLEtBQUs7O0FBRUw7O0FBRUEsS0FBSyxFQUFFO0FBQ1AsS0FBSzs7QUFFTDs7QUFFQSxLQUFLO0FBQ0w7O0FBRUEsR0FBRzs7QUFFSDs7QUFFQTs7QUFFQTtBQUNBLE1BQU07O0FBRU47O0FBRUEsTUFBTSxFQUFFO0FBQ1IsTUFBTTs7QUFFTjs7QUFFQSxNQUFNLEVBQUU7QUFDUixNQUFNOztBQUVOOztBQUVBLE1BQU0sRUFBRTtBQUNSLE1BQU07O0FBRU47O0FBRUEsTUFBTSxFQUFFO0FBQ1IsTUFBTTs7QUFFTjs7QUFFQSxNQUFNLEVBQUU7QUFDUixNQUFNOztBQUVOOztBQUVBLE1BQU0sRUFBRTtBQUNSLE1BQU07O0FBRU47O0FBRUEsTUFBTSxFQUFFO0FBQ1IsTUFBTTs7QUFFTjs7QUFFQSxNQUFNO0FBQ047OztBQUdBLElBQUk7O0FBRUosR0FBRzs7QUFFSDs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsTUFBTTs7QUFFTjs7QUFFQSxNQUFNLEVBQUU7QUFDUixNQUFNOztBQUVOOztBQUVBLE1BQU0sRUFBRTtBQUNSLE1BQU07O0FBRU47O0FBRUEsTUFBTSxFQUFFO0FBQ1IsTUFBTTs7QUFFTjs7QUFFQSxNQUFNLEVBQUU7QUFDUixNQUFNOztBQUVOOztBQUVBLE1BQU0sRUFBRTtBQUNSLE1BQU07O0FBRU47O0FBRUEsTUFBTTtBQUNOOztBQUVBLElBQUk7QUFDSjs7QUFFQSxHQUFHOztBQUVIOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLEdBQUc7O0FBRUg7O0FBRUE7O0FBRUEsdUNBQXVDLHlFQUFVLG9CQUFvQjtBQUNyRTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsOERBQU87O0FBRTNCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSxDQUFDOztBQUVxQiIsImZpbGUiOiIuL25vZGVfbW9kdWxlcy90aHJlZS9leGFtcGxlcy9qc20vbG9hZGVycy9WUk1MTG9hZGVyLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcblx0QmFja1NpZGUsXG5cdEJveEdlb21ldHJ5LFxuXHRCdWZmZXJBdHRyaWJ1dGUsXG5cdEJ1ZmZlckdlb21ldHJ5LFxuXHRDbGFtcFRvRWRnZVdyYXBwaW5nLFxuXHRDb2xvcixcblx0Q29uZUdlb21ldHJ5LFxuXHRDeWxpbmRlckdlb21ldHJ5LFxuXHREYXRhVGV4dHVyZSxcblx0RG91YmxlU2lkZSxcblx0RmlsZUxvYWRlcixcblx0RmxvYXQzMkJ1ZmZlckF0dHJpYnV0ZSxcblx0RnJvbnRTaWRlLFxuXHRHcm91cCxcblx0TGluZUJhc2ljTWF0ZXJpYWwsXG5cdExpbmVTZWdtZW50cyxcblx0TG9hZGVyLFxuXHRMb2FkZXJVdGlscyxcblx0TWVzaCxcblx0TWVzaEJhc2ljTWF0ZXJpYWwsXG5cdE1lc2hQaG9uZ01hdGVyaWFsLFxuXHRPYmplY3QzRCxcblx0UG9pbnRzLFxuXHRQb2ludHNNYXRlcmlhbCxcblx0UXVhdGVybmlvbixcblx0UkdCQUZvcm1hdCxcblx0UkdCRm9ybWF0LFxuXHRSZXBlYXRXcmFwcGluZyxcblx0U2NlbmUsXG5cdFNoYXBlVXRpbHMsXG5cdFNwaGVyZUdlb21ldHJ5LFxuXHRUZXh0dXJlTG9hZGVyLFxuXHRWZWN0b3IyLFxuXHRWZWN0b3IzXG59IGZyb20gJy4uLy4uLy4uL2J1aWxkL3RocmVlLm1vZHVsZS5qcyc7XG5pbXBvcnQgeyBjaGV2cm90YWluIH0gZnJvbSAnLi4vbGlicy9jaGV2cm90YWluLm1vZHVsZS5taW4uanMnO1xuXG52YXIgVlJNTExvYWRlciA9ICggZnVuY3Rpb24gKCkge1xuXG5cdC8vIGRlcGVuZGVuY3kgY2hlY2tcblxuXHRpZiAoIHR5cGVvZiBjaGV2cm90YWluID09PSAndW5kZWZpbmVkJyApIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bmRlZlxuXG5cdFx0dGhyb3cgRXJyb3IoICdUSFJFRS5WUk1MTG9hZGVyOiBFeHRlcm5hbCBsaWJyYXJ5IGNoZXZyb3RhaW4ubWluLmpzIHJlcXVpcmVkLicgKTtcblxuXHR9XG5cblx0Ly8gY2xhc3MgZGVmaW5pdGlvbnNcblxuXHRmdW5jdGlvbiBWUk1MTG9hZGVyKCBtYW5hZ2VyICkge1xuXG5cdFx0TG9hZGVyLmNhbGwoIHRoaXMsIG1hbmFnZXIgKTtcblxuXHR9XG5cblx0VlJNTExvYWRlci5wcm90b3R5cGUgPSBPYmplY3QuYXNzaWduKCBPYmplY3QuY3JlYXRlKCBMb2FkZXIucHJvdG90eXBlICksIHtcblxuXHRcdGNvbnN0cnVjdG9yOiBWUk1MTG9hZGVyLFxuXG5cdFx0bG9hZDogZnVuY3Rpb24gKCB1cmwsIG9uTG9hZCwgb25Qcm9ncmVzcywgb25FcnJvciApIHtcblxuXHRcdFx0dmFyIHNjb3BlID0gdGhpcztcblxuXHRcdFx0dmFyIHBhdGggPSAoIHNjb3BlLnBhdGggPT09ICcnICkgPyBMb2FkZXJVdGlscy5leHRyYWN0VXJsQmFzZSggdXJsICkgOiBzY29wZS5wYXRoO1xuXG5cdFx0XHR2YXIgbG9hZGVyID0gbmV3IEZpbGVMb2FkZXIoIHNjb3BlLm1hbmFnZXIgKTtcblx0XHRcdGxvYWRlci5zZXRQYXRoKCBzY29wZS5wYXRoICk7XG5cdFx0XHRsb2FkZXIuc2V0UmVxdWVzdEhlYWRlciggc2NvcGUucmVxdWVzdEhlYWRlciApO1xuXHRcdFx0bG9hZGVyLnNldFdpdGhDcmVkZW50aWFscyggc2NvcGUud2l0aENyZWRlbnRpYWxzICk7XG5cdFx0XHRsb2FkZXIubG9hZCggdXJsLCBmdW5jdGlvbiAoIHRleHQgKSB7XG5cblx0XHRcdFx0dHJ5IHtcblxuXHRcdFx0XHRcdG9uTG9hZCggc2NvcGUucGFyc2UoIHRleHQsIHBhdGggKSApO1xuXG5cdFx0XHRcdH0gY2F0Y2ggKCBlICkge1xuXG5cdFx0XHRcdFx0aWYgKCBvbkVycm9yICkge1xuXG5cdFx0XHRcdFx0XHRvbkVycm9yKCBlICk7XG5cblx0XHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0XHRjb25zb2xlLmVycm9yKCBlICk7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRzY29wZS5tYW5hZ2VyLml0ZW1FcnJvciggdXJsICk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9LCBvblByb2dyZXNzLCBvbkVycm9yICk7XG5cblx0XHR9LFxuXG5cdFx0cGFyc2U6IGZ1bmN0aW9uICggZGF0YSwgcGF0aCApIHtcblxuXHRcdFx0dmFyIG5vZGVNYXAgPSB7fTtcblxuXHRcdFx0ZnVuY3Rpb24gZ2VuZXJhdGVWUk1MVHJlZSggZGF0YSApIHtcblxuXHRcdFx0XHQvLyBjcmVhdGUgbGV4ZXIsIHBhcnNlciBhbmQgdmlzaXRvclxuXG5cdFx0XHRcdHZhciB0b2tlbkRhdGEgPSBjcmVhdGVUb2tlbnMoKTtcblxuXHRcdFx0XHR2YXIgbGV4ZXIgPSBuZXcgVlJNTExleGVyKCB0b2tlbkRhdGEudG9rZW5zICk7XG5cdFx0XHRcdHZhciBwYXJzZXIgPSBuZXcgVlJNTFBhcnNlciggdG9rZW5EYXRhLnRva2VuVm9jYWJ1bGFyeSApO1xuXHRcdFx0XHR2YXIgdmlzaXRvciA9IGNyZWF0ZVZpc2l0b3IoIHBhcnNlci5nZXRCYXNlQ3N0VmlzaXRvckNvbnN0cnVjdG9yKCkgKTtcblxuXHRcdFx0XHQvLyBsZXhpbmdcblxuXHRcdFx0XHR2YXIgbGV4aW5nUmVzdWx0ID0gbGV4ZXIubGV4KCBkYXRhICk7XG5cdFx0XHRcdHBhcnNlci5pbnB1dCA9IGxleGluZ1Jlc3VsdC50b2tlbnM7XG5cblx0XHRcdFx0Ly8gcGFyc2luZ1xuXG5cdFx0XHRcdHZhciBjc3RPdXRwdXQgPSBwYXJzZXIudnJtbCgpO1xuXG5cdFx0XHRcdGlmICggcGFyc2VyLmVycm9ycy5sZW5ndGggPiAwICkge1xuXG5cdFx0XHRcdFx0Y29uc29sZS5lcnJvciggcGFyc2VyLmVycm9ycyApO1xuXG5cdFx0XHRcdFx0dGhyb3cgRXJyb3IoICdUSFJFRS5WUk1MTG9hZGVyOiBQYXJzaW5nIGVycm9ycyBkZXRlY3RlZC4nICk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIGFjdGlvbnNcblxuXHRcdFx0XHR2YXIgYXN0ID0gdmlzaXRvci52aXNpdCggY3N0T3V0cHV0ICk7XG5cblx0XHRcdFx0cmV0dXJuIGFzdDtcblxuXHRcdFx0fVxuXG5cdFx0XHRmdW5jdGlvbiBjcmVhdGVUb2tlbnMoKSB7XG5cblx0XHRcdFx0dmFyIGNyZWF0ZVRva2VuID0gY2hldnJvdGFpbi5jcmVhdGVUb2tlbjsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bmRlZlxuXG5cdFx0XHRcdC8vIGZyb20gaHR0cDovL2d1bi50ZWlwaXIuZ3IvVlJNTC1hbWdlbS9zcGVjL3BhcnQxL2NvbmNlcHRzLmh0bWwjU3ludGF4QmFzaWNzXG5cblx0XHRcdFx0dmFyIFJvdXRlSWRlbnRpZmllciA9IGNyZWF0ZVRva2VuKCB7IG5hbWU6ICdSb3V0ZUlkZW50aWZpZXInLCBwYXR0ZXJuOiAvW15cXHgzMC1cXHgzOVxcMC1cXHgyMFxceDIyXFx4MjdcXHgyM1xceDJiXFx4MmNcXHgyZFxceDJlXFx4NWJcXHg1ZFxceDVjXFx4N2JcXHg3ZF1bXlxcMC1cXHgyMFxceDIyXFx4MjdcXHgyM1xceDJiXFx4MmNcXHgyZFxceDJlXFx4NWJcXHg1ZFxceDVjXFx4N2JcXHg3ZF0qW1xcLl1bXlxceDMwLVxceDM5XFwwLVxceDIwXFx4MjJcXHgyN1xceDIzXFx4MmJcXHgyY1xceDJkXFx4MmVcXHg1YlxceDVkXFx4NWNcXHg3YlxceDdkXVteXFwwLVxceDIwXFx4MjJcXHgyN1xceDIzXFx4MmJcXHgyY1xceDJkXFx4MmVcXHg1YlxceDVkXFx4NWNcXHg3YlxceDdkXSovIH0gKTtcblx0XHRcdFx0dmFyIElkZW50aWZpZXIgPSBjcmVhdGVUb2tlbiggeyBuYW1lOiAnSWRlbnRpZmllcicsIHBhdHRlcm46IC9bXlxceDMwLVxceDM5XFwwLVxceDIwXFx4MjJcXHgyN1xceDIzXFx4MmJcXHgyY1xceDJkXFx4MmVcXHg1YlxceDVkXFx4NWNcXHg3YlxceDdkXVteXFwwLVxceDIwXFx4MjJcXHgyN1xceDIzXFx4MmJcXHgyY1xceDJkXFx4MmVcXHg1YlxceDVkXFx4NWNcXHg3YlxceDdkXSovLCBsb25nZXJfYWx0OiBSb3V0ZUlkZW50aWZpZXIgfSApO1xuXG5cdFx0XHRcdC8vIGZyb20gaHR0cDovL2d1bi50ZWlwaXIuZ3IvVlJNTC1hbWdlbS9zcGVjL3BhcnQxL25vZGVzUmVmLmh0bWxcblxuXHRcdFx0XHR2YXIgbm9kZVR5cGVzID0gW1xuXHRcdFx0XHRcdCdBbmNob3InLCAnQmlsbGJvYXJkJywgJ0NvbGxpc2lvbicsICdHcm91cCcsICdUcmFuc2Zvcm0nLCAvLyBncm91cGluZyBub2Rlc1xuXHRcdFx0XHRcdCdJbmxpbmUnLCAnTE9EJywgJ1N3aXRjaCcsIC8vIHNwZWNpYWwgZ3JvdXBzXG5cdFx0XHRcdFx0J0F1ZGlvQ2xpcCcsICdEaXJlY3Rpb25hbExpZ2h0JywgJ1BvaW50TGlnaHQnLCAnU2NyaXB0JywgJ1NoYXBlJywgJ1NvdW5kJywgJ1Nwb3RMaWdodCcsICdXb3JsZEluZm8nLCAvLyBjb21tb24gbm9kZXNcblx0XHRcdFx0XHQnQ3lsaW5kZXJTZW5zb3InLCAnUGxhbmVTZW5zb3InLCAnUHJveGltaXR5U2Vuc29yJywgJ1NwaGVyZVNlbnNvcicsICdUaW1lU2Vuc29yJywgJ1RvdWNoU2Vuc29yJywgJ1Zpc2liaWxpdHlTZW5zb3InLCAvLyBzZW5zb3JzXG5cdFx0XHRcdFx0J0JveCcsICdDb25lJywgJ0N5bGluZGVyJywgJ0VsZXZhdGlvbkdyaWQnLCAnRXh0cnVzaW9uJywgJ0luZGV4ZWRGYWNlU2V0JywgJ0luZGV4ZWRMaW5lU2V0JywgJ1BvaW50U2V0JywgJ1NwaGVyZScsIC8vIGdlb21ldHJpZXNcblx0XHRcdFx0XHQnQ29sb3InLCAnQ29vcmRpbmF0ZScsICdOb3JtYWwnLCAnVGV4dHVyZUNvb3JkaW5hdGUnLCAvLyBnZW9tZXRyaWMgcHJvcGVydGllc1xuXHRcdFx0XHRcdCdBcHBlYXJhbmNlJywgJ0ZvbnRTdHlsZScsICdJbWFnZVRleHR1cmUnLCAnTWF0ZXJpYWwnLCAnTW92aWVUZXh0dXJlJywgJ1BpeGVsVGV4dHVyZScsICdUZXh0dXJlVHJhbnNmb3JtJywgLy8gYXBwZWFyYW5jZVxuXHRcdFx0XHRcdCdDb2xvckludGVycG9sYXRvcicsICdDb29yZGluYXRlSW50ZXJwb2xhdG9yJywgJ05vcm1hbEludGVycG9sYXRvcicsICdPcmllbnRhdGlvbkludGVycG9sYXRvcicsICdQb3NpdGlvbkludGVycG9sYXRvcicsICdTY2FsYXJJbnRlcnBvbGF0b3InLCAvLyBpbnRlcnBvbGF0b3JzXG5cdFx0XHRcdFx0J0JhY2tncm91bmQnLCAnRm9nJywgJ05hdmlnYXRpb25JbmZvJywgJ1ZpZXdwb2ludCcsIC8vIGJpbmRhYmxlIG5vZGVzXG5cdFx0XHRcdFx0J1RleHQnIC8vIFRleHQgbXVzdCBiZSBwbGFjZWQgYXQgdGhlIGVuZCBvZiB0aGUgcmVnZXggc28gdGhlcmUgYXJlIG5vIG1hdGNoZXMgZm9yIFRleHR1cmVUcmFuc2Zvcm0gYW5kIFRleHR1cmVDb29yZGluYXRlXG5cdFx0XHRcdF07XG5cblx0XHRcdFx0Ly9cblxuXHRcdFx0XHR2YXIgVmVyc2lvbiA9IGNyZWF0ZVRva2VuKCB7XG5cdFx0XHRcdFx0bmFtZTogJ1ZlcnNpb24nLFxuXHRcdFx0XHRcdHBhdHRlcm46IC8jVlJNTC4qLyxcblx0XHRcdFx0XHRsb25nZXJfYWx0OiBJZGVudGlmaWVyXG5cdFx0XHRcdH0gKTtcblxuXHRcdFx0XHR2YXIgTm9kZU5hbWUgPSBjcmVhdGVUb2tlbigge1xuXHRcdFx0XHRcdG5hbWU6ICdOb2RlTmFtZScsXG5cdFx0XHRcdFx0cGF0dGVybjogbmV3IFJlZ0V4cCggbm9kZVR5cGVzLmpvaW4oICd8JyApICksXG5cdFx0XHRcdFx0bG9uZ2VyX2FsdDogSWRlbnRpZmllclxuXHRcdFx0XHR9ICk7XG5cblx0XHRcdFx0dmFyIERFRiA9IGNyZWF0ZVRva2VuKCB7XG5cdFx0XHRcdFx0bmFtZTogJ0RFRicsXG5cdFx0XHRcdFx0cGF0dGVybjogL0RFRi8sXG5cdFx0XHRcdFx0bG9uZ2VyX2FsdDogSWRlbnRpZmllclxuXHRcdFx0XHR9ICk7XG5cblx0XHRcdFx0dmFyIFVTRSA9IGNyZWF0ZVRva2VuKCB7XG5cdFx0XHRcdFx0bmFtZTogJ1VTRScsXG5cdFx0XHRcdFx0cGF0dGVybjogL1VTRS8sXG5cdFx0XHRcdFx0bG9uZ2VyX2FsdDogSWRlbnRpZmllclxuXHRcdFx0XHR9ICk7XG5cblx0XHRcdFx0dmFyIFJPVVRFID0gY3JlYXRlVG9rZW4oIHtcblx0XHRcdFx0XHRuYW1lOiAnUk9VVEUnLFxuXHRcdFx0XHRcdHBhdHRlcm46IC9ST1VURS8sXG5cdFx0XHRcdFx0bG9uZ2VyX2FsdDogSWRlbnRpZmllclxuXHRcdFx0XHR9ICk7XG5cblx0XHRcdFx0dmFyIFRPID0gY3JlYXRlVG9rZW4oIHtcblx0XHRcdFx0XHRuYW1lOiAnVE8nLFxuXHRcdFx0XHRcdHBhdHRlcm46IC9UTy8sXG5cdFx0XHRcdFx0bG9uZ2VyX2FsdDogSWRlbnRpZmllclxuXHRcdFx0XHR9ICk7XG5cblx0XHRcdFx0Ly9cblxuXHRcdFx0XHR2YXIgU3RyaW5nTGl0ZXJhbCA9IGNyZWF0ZVRva2VuKCB7IG5hbWU6ICdTdHJpbmdMaXRlcmFsJywgcGF0dGVybjogL1wiKDo/W15cXFxcXCJcXG5cXHJdK3xcXFxcKDo/W2JmbnJ0dlwiXFxcXC9dfHVbMC05YS1mQS1GXXs0fSkpKlwiLyB9ICk7XG5cdFx0XHRcdHZhciBIZXhMaXRlcmFsID0gY3JlYXRlVG9rZW4oIHsgbmFtZTogJ0hleExpdGVyYWwnLCBwYXR0ZXJuOiAvMFt4WF1bMC05YS1mQS1GXSsvIH0gKTtcblx0XHRcdFx0dmFyIE51bWJlckxpdGVyYWwgPSBjcmVhdGVUb2tlbiggeyBuYW1lOiAnTnVtYmVyTGl0ZXJhbCcsIHBhdHRlcm46IC9bLStdP1swLTldKlxcLj9bMC05XSsoW2VFXVstK10/WzAtOV0rKT8vIH0gKTtcblx0XHRcdFx0dmFyIFRydWVMaXRlcmFsID0gY3JlYXRlVG9rZW4oIHsgbmFtZTogJ1RydWVMaXRlcmFsJywgcGF0dGVybjogL1RSVUUvIH0gKTtcblx0XHRcdFx0dmFyIEZhbHNlTGl0ZXJhbCA9IGNyZWF0ZVRva2VuKCB7IG5hbWU6ICdGYWxzZUxpdGVyYWwnLCBwYXR0ZXJuOiAvRkFMU0UvIH0gKTtcblx0XHRcdFx0dmFyIE51bGxMaXRlcmFsID0gY3JlYXRlVG9rZW4oIHsgbmFtZTogJ051bGxMaXRlcmFsJywgcGF0dGVybjogL05VTEwvIH0gKTtcblx0XHRcdFx0dmFyIExTcXVhcmUgPSBjcmVhdGVUb2tlbiggeyBuYW1lOiAnTFNxdWFyZScsIHBhdHRlcm46IC9cXFsvIH0gKTtcblx0XHRcdFx0dmFyIFJTcXVhcmUgPSBjcmVhdGVUb2tlbiggeyBuYW1lOiAnUlNxdWFyZScsIHBhdHRlcm46IC9dLyB9ICk7XG5cdFx0XHRcdHZhciBMQ3VybHkgPSBjcmVhdGVUb2tlbiggeyBuYW1lOiAnTEN1cmx5JywgcGF0dGVybjogL3svIH0gKTtcblx0XHRcdFx0dmFyIFJDdXJseSA9IGNyZWF0ZVRva2VuKCB7IG5hbWU6ICdSQ3VybHknLCBwYXR0ZXJuOiAvfS8gfSApO1xuXHRcdFx0XHR2YXIgQ29tbWVudCA9IGNyZWF0ZVRva2VuKCB7XG5cdFx0XHRcdFx0bmFtZTogJ0NvbW1lbnQnLFxuXHRcdFx0XHRcdHBhdHRlcm46IC8jLiovLFxuXHRcdFx0XHRcdGdyb3VwOiBjaGV2cm90YWluLkxleGVyLlNLSVBQRUQgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bmRlZlxuXHRcdFx0XHR9ICk7XG5cblx0XHRcdFx0Ly8gY29tbWFzLCBibGFua3MsIHRhYnMsIG5ld2xpbmVzIGFuZCBjYXJyaWFnZSByZXR1cm5zIGFyZSB3aGl0ZXNwYWNlIGNoYXJhY3RlcnMgd2hlcmV2ZXIgdGhleSBhcHBlYXIgb3V0c2lkZSBvZiBzdHJpbmcgZmllbGRzXG5cblx0XHRcdFx0dmFyIFdoaXRlU3BhY2UgPSBjcmVhdGVUb2tlbigge1xuXHRcdFx0XHRcdG5hbWU6ICdXaGl0ZVNwYWNlJyxcblx0XHRcdFx0XHRwYXR0ZXJuOiAvWyAsXFxzXS8sXG5cdFx0XHRcdFx0Z3JvdXA6IGNoZXZyb3RhaW4uTGV4ZXIuU0tJUFBFRCAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVuZGVmXG5cdFx0XHRcdH0gKTtcblxuXHRcdFx0XHR2YXIgdG9rZW5zID0gW1xuXHRcdFx0XHRcdFdoaXRlU3BhY2UsXG5cdFx0XHRcdFx0Ly8ga2V5d29yZHMgYXBwZWFyIGJlZm9yZSB0aGUgSWRlbnRpZmllclxuXHRcdFx0XHRcdE5vZGVOYW1lLFxuXHRcdFx0XHRcdERFRixcblx0XHRcdFx0XHRVU0UsXG5cdFx0XHRcdFx0Uk9VVEUsXG5cdFx0XHRcdFx0VE8sXG5cdFx0XHRcdFx0VHJ1ZUxpdGVyYWwsXG5cdFx0XHRcdFx0RmFsc2VMaXRlcmFsLFxuXHRcdFx0XHRcdE51bGxMaXRlcmFsLFxuXHRcdFx0XHRcdC8vIHRoZSBJZGVudGlmaWVyIG11c3QgYXBwZWFyIGFmdGVyIHRoZSBrZXl3b3JkcyBiZWNhdXNlIGFsbCBrZXl3b3JkcyBhcmUgdmFsaWQgaWRlbnRpZmllcnNcblx0XHRcdFx0XHRWZXJzaW9uLFxuXHRcdFx0XHRcdElkZW50aWZpZXIsXG5cdFx0XHRcdFx0Um91dGVJZGVudGlmaWVyLFxuXHRcdFx0XHRcdFN0cmluZ0xpdGVyYWwsXG5cdFx0XHRcdFx0SGV4TGl0ZXJhbCxcblx0XHRcdFx0XHROdW1iZXJMaXRlcmFsLFxuXHRcdFx0XHRcdExTcXVhcmUsXG5cdFx0XHRcdFx0UlNxdWFyZSxcblx0XHRcdFx0XHRMQ3VybHksXG5cdFx0XHRcdFx0UkN1cmx5LFxuXHRcdFx0XHRcdENvbW1lbnRcblx0XHRcdFx0XTtcblxuXHRcdFx0XHR2YXIgdG9rZW5Wb2NhYnVsYXJ5ID0ge307XG5cblx0XHRcdFx0Zm9yICggdmFyIGkgPSAwLCBsID0gdG9rZW5zLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG5cblx0XHRcdFx0XHR2YXIgdG9rZW4gPSB0b2tlbnNbIGkgXTtcblxuXHRcdFx0XHRcdHRva2VuVm9jYWJ1bGFyeVsgdG9rZW4ubmFtZSBdID0gdG9rZW47XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiB7IHRva2VuczogdG9rZW5zLCB0b2tlblZvY2FidWxhcnk6IHRva2VuVm9jYWJ1bGFyeSB9O1xuXG5cdFx0XHR9XG5cblxuXHRcdFx0ZnVuY3Rpb24gY3JlYXRlVmlzaXRvciggQmFzZVZSTUxWaXNpdG9yICkge1xuXG5cdFx0XHRcdC8vIHRoZSB2aXNpdG9yIGlzIGNyZWF0ZWQgZHlubWFpY2FsbHkgYmFzZWQgb24gdGhlIGdpdmVuIGJhc2UgY2xhc3NcblxuXHRcdFx0XHRmdW5jdGlvbiBWUk1MVG9BU1RWaXNpdG9yKCkge1xuXG5cdFx0XHRcdFx0QmFzZVZSTUxWaXNpdG9yLmNhbGwoIHRoaXMgKTtcblxuXHRcdFx0XHRcdHRoaXMudmFsaWRhdGVWaXNpdG9yKCk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdFZSTUxUb0FTVFZpc2l0b3IucHJvdG90eXBlID0gT2JqZWN0LmFzc2lnbiggT2JqZWN0LmNyZWF0ZSggQmFzZVZSTUxWaXNpdG9yLnByb3RvdHlwZSApLCB7XG5cblx0XHRcdFx0XHRjb25zdHJ1Y3RvcjogVlJNTFRvQVNUVmlzaXRvcixcblxuXHRcdFx0XHRcdHZybWw6IGZ1bmN0aW9uICggY3R4ICkge1xuXG5cdFx0XHRcdFx0XHR2YXIgZGF0YSA9IHtcblx0XHRcdFx0XHRcdFx0dmVyc2lvbjogdGhpcy52aXNpdCggY3R4LnZlcnNpb24gKSxcblx0XHRcdFx0XHRcdFx0bm9kZXM6IFtdLFxuXHRcdFx0XHRcdFx0XHRyb3V0ZXM6IFtdXG5cdFx0XHRcdFx0XHR9O1xuXG5cdFx0XHRcdFx0XHRmb3IgKCB2YXIgaSA9IDAsIGwgPSBjdHgubm9kZS5sZW5ndGg7IGkgPCBsOyBpICsrICkge1xuXG5cdFx0XHRcdFx0XHRcdHZhciBub2RlID0gY3R4Lm5vZGVbIGkgXTtcblxuXHRcdFx0XHRcdFx0XHRkYXRhLm5vZGVzLnB1c2goIHRoaXMudmlzaXQoIG5vZGUgKSApO1xuXG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdGlmICggY3R4LnJvdXRlICkge1xuXG5cdFx0XHRcdFx0XHRcdGZvciAoIHZhciBpID0gMCwgbCA9IGN0eC5yb3V0ZS5sZW5ndGg7IGkgPCBsOyBpICsrICkge1xuXG5cdFx0XHRcdFx0XHRcdFx0dmFyIHJvdXRlID0gY3R4LnJvdXRlWyBpIF07XG5cblx0XHRcdFx0XHRcdFx0XHRkYXRhLnJvdXRlcy5wdXNoKCB0aGlzLnZpc2l0KCByb3V0ZSApICk7XG5cblx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdHJldHVybiBkYXRhO1xuXG5cdFx0XHRcdFx0fSxcblxuXHRcdFx0XHRcdHZlcnNpb246IGZ1bmN0aW9uICggY3R4ICkge1xuXG5cdFx0XHRcdFx0XHRyZXR1cm4gY3R4LlZlcnNpb25bIDAgXS5pbWFnZTtcblxuXHRcdFx0XHRcdH0sXG5cblx0XHRcdFx0XHRub2RlOiBmdW5jdGlvbiAoIGN0eCApIHtcblxuXHRcdFx0XHRcdFx0dmFyIGRhdGEgPSB7XG5cdFx0XHRcdFx0XHRcdG5hbWU6IGN0eC5Ob2RlTmFtZVsgMCBdLmltYWdlLFxuXHRcdFx0XHRcdFx0XHRmaWVsZHM6IFtdXG5cdFx0XHRcdFx0XHR9O1xuXG5cdFx0XHRcdFx0XHRpZiAoIGN0eC5maWVsZCApIHtcblxuXHRcdFx0XHRcdFx0XHRmb3IgKCB2YXIgaSA9IDAsIGwgPSBjdHguZmllbGQubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcblxuXHRcdFx0XHRcdFx0XHRcdHZhciBmaWVsZCA9IGN0eC5maWVsZFsgaSBdO1xuXG5cdFx0XHRcdFx0XHRcdFx0ZGF0YS5maWVsZHMucHVzaCggdGhpcy52aXNpdCggZmllbGQgKSApO1xuXG5cdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHQvLyBERUZcblxuXHRcdFx0XHRcdFx0aWYgKCBjdHguZGVmICkge1xuXG5cdFx0XHRcdFx0XHRcdGRhdGEuREVGID0gdGhpcy52aXNpdCggY3R4LmRlZlsgMCBdICk7XG5cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0cmV0dXJuIGRhdGE7XG5cblx0XHRcdFx0XHR9LFxuXG5cdFx0XHRcdFx0ZmllbGQ6IGZ1bmN0aW9uICggY3R4ICkge1xuXG5cdFx0XHRcdFx0XHR2YXIgZGF0YSA9IHtcblx0XHRcdFx0XHRcdFx0bmFtZTogY3R4LklkZW50aWZpZXJbIDAgXS5pbWFnZSxcblx0XHRcdFx0XHRcdFx0dHlwZTogbnVsbCxcblx0XHRcdFx0XHRcdFx0dmFsdWVzOiBudWxsXG5cdFx0XHRcdFx0XHR9O1xuXG5cdFx0XHRcdFx0XHR2YXIgcmVzdWx0O1xuXG5cdFx0XHRcdFx0XHQvLyBTRlZhbHVlXG5cblx0XHRcdFx0XHRcdGlmICggY3R4LnNpbmdsZUZpZWxkVmFsdWUgKSB7XG5cblx0XHRcdFx0XHRcdFx0cmVzdWx0ID0gdGhpcy52aXNpdCggY3R4LnNpbmdsZUZpZWxkVmFsdWVbIDAgXSApO1xuXG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdC8vIE1GVmFsdWVcblxuXHRcdFx0XHRcdFx0aWYgKCBjdHgubXVsdGlGaWVsZFZhbHVlICkge1xuXG5cdFx0XHRcdFx0XHRcdHJlc3VsdCA9IHRoaXMudmlzaXQoIGN0eC5tdWx0aUZpZWxkVmFsdWVbIDAgXSApO1xuXG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdGRhdGEudHlwZSA9IHJlc3VsdC50eXBlO1xuXHRcdFx0XHRcdFx0ZGF0YS52YWx1ZXMgPSByZXN1bHQudmFsdWVzO1xuXG5cdFx0XHRcdFx0XHRyZXR1cm4gZGF0YTtcblxuXHRcdFx0XHRcdH0sXG5cblx0XHRcdFx0XHRkZWY6IGZ1bmN0aW9uICggY3R4ICkge1xuXG5cdFx0XHRcdFx0XHRyZXR1cm4gKCBjdHguSWRlbnRpZmllciB8fCBjdHguTm9kZU5hbWUgKVsgMCBdLmltYWdlO1xuXG5cdFx0XHRcdFx0fSxcblxuXHRcdFx0XHRcdHVzZTogZnVuY3Rpb24gKCBjdHggKSB7XG5cblx0XHRcdFx0XHRcdHJldHVybiB7IFVTRTogKCBjdHguSWRlbnRpZmllciB8fCBjdHguTm9kZU5hbWUgKVsgMCBdLmltYWdlIH07XG5cblx0XHRcdFx0XHR9LFxuXG5cdFx0XHRcdFx0c2luZ2xlRmllbGRWYWx1ZTogZnVuY3Rpb24gKCBjdHggKSB7XG5cblx0XHRcdFx0XHRcdHJldHVybiBwcm9jZXNzRmllbGQoIHRoaXMsIGN0eCApO1xuXG5cdFx0XHRcdFx0fSxcblxuXHRcdFx0XHRcdG11bHRpRmllbGRWYWx1ZTogZnVuY3Rpb24gKCBjdHggKSB7XG5cblx0XHRcdFx0XHRcdHJldHVybiBwcm9jZXNzRmllbGQoIHRoaXMsIGN0eCApO1xuXG5cdFx0XHRcdFx0fSxcblxuXHRcdFx0XHRcdHJvdXRlOiBmdW5jdGlvbiAoIGN0eCApIHtcblxuXHRcdFx0XHRcdFx0dmFyIGRhdGEgPSB7XG5cdFx0XHRcdFx0XHRcdEZST006IGN0eC5Sb3V0ZUlkZW50aWZpZXJbIDAgXS5pbWFnZSxcblx0XHRcdFx0XHRcdFx0VE86IGN0eC5Sb3V0ZUlkZW50aWZpZXJbIDEgXS5pbWFnZVxuXHRcdFx0XHRcdFx0fTtcblxuXHRcdFx0XHRcdFx0cmV0dXJuIGRhdGE7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fSApO1xuXG5cdFx0XHRcdGZ1bmN0aW9uIHByb2Nlc3NGaWVsZCggc2NvcGUsIGN0eCApIHtcblxuXHRcdFx0XHRcdHZhciBmaWVsZCA9IHtcblx0XHRcdFx0XHRcdHR5cGU6IG51bGwsXG5cdFx0XHRcdFx0XHR2YWx1ZXM6IFtdXG5cdFx0XHRcdFx0fTtcblxuXHRcdFx0XHRcdGlmICggY3R4Lm5vZGUgKSB7XG5cblx0XHRcdFx0XHRcdGZpZWxkLnR5cGUgPSAnbm9kZSc7XG5cblx0XHRcdFx0XHRcdGZvciAoIHZhciBpID0gMCwgbCA9IGN0eC5ub2RlLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG5cblx0XHRcdFx0XHRcdFx0dmFyIG5vZGUgPSBjdHgubm9kZVsgaSBdO1xuXG5cdFx0XHRcdFx0XHRcdGZpZWxkLnZhbHVlcy5wdXNoKCBzY29wZS52aXNpdCggbm9kZSApICk7XG5cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGlmICggY3R4LnVzZSApIHtcblxuXHRcdFx0XHRcdFx0ZmllbGQudHlwZSA9ICd1c2UnO1xuXG5cdFx0XHRcdFx0XHRmb3IgKCB2YXIgaSA9IDAsIGwgPSBjdHgudXNlLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG5cblx0XHRcdFx0XHRcdFx0dmFyIHVzZSA9IGN0eC51c2VbIGkgXTtcblxuXHRcdFx0XHRcdFx0XHRmaWVsZC52YWx1ZXMucHVzaCggc2NvcGUudmlzaXQoIHVzZSApICk7XG5cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGlmICggY3R4LlN0cmluZ0xpdGVyYWwgKSB7XG5cblx0XHRcdFx0XHRcdGZpZWxkLnR5cGUgPSAnc3RyaW5nJztcblxuXHRcdFx0XHRcdFx0Zm9yICggdmFyIGkgPSAwLCBsID0gY3R4LlN0cmluZ0xpdGVyYWwubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcblxuXHRcdFx0XHRcdFx0XHR2YXIgc3RyaW5nTGl0ZXJhbCA9IGN0eC5TdHJpbmdMaXRlcmFsWyBpIF07XG5cblx0XHRcdFx0XHRcdFx0ZmllbGQudmFsdWVzLnB1c2goIHN0cmluZ0xpdGVyYWwuaW1hZ2UucmVwbGFjZSggLyd8XCIvZywgJycgKSApO1xuXG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpZiAoIGN0eC5OdW1iZXJMaXRlcmFsICkge1xuXG5cdFx0XHRcdFx0XHRmaWVsZC50eXBlID0gJ251bWJlcic7XG5cblx0XHRcdFx0XHRcdGZvciAoIHZhciBpID0gMCwgbCA9IGN0eC5OdW1iZXJMaXRlcmFsLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG5cblx0XHRcdFx0XHRcdFx0dmFyIG51bWJlckxpdGVyYWwgPSBjdHguTnVtYmVyTGl0ZXJhbFsgaSBdO1xuXG5cdFx0XHRcdFx0XHRcdGZpZWxkLnZhbHVlcy5wdXNoKCBwYXJzZUZsb2F0KCBudW1iZXJMaXRlcmFsLmltYWdlICkgKTtcblxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0aWYgKCBjdHguSGV4TGl0ZXJhbCApIHtcblxuXHRcdFx0XHRcdFx0ZmllbGQudHlwZSA9ICdoZXgnO1xuXG5cdFx0XHRcdFx0XHRmb3IgKCB2YXIgaSA9IDAsIGwgPSBjdHguSGV4TGl0ZXJhbC5sZW5ndGg7IGkgPCBsOyBpICsrICkge1xuXG5cdFx0XHRcdFx0XHRcdHZhciBoZXhMaXRlcmFsID0gY3R4LkhleExpdGVyYWxbIGkgXTtcblxuXHRcdFx0XHRcdFx0XHRmaWVsZC52YWx1ZXMucHVzaCggaGV4TGl0ZXJhbC5pbWFnZSApO1xuXG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpZiAoIGN0eC5UcnVlTGl0ZXJhbCApIHtcblxuXHRcdFx0XHRcdFx0ZmllbGQudHlwZSA9ICdib29sZWFuJztcblxuXHRcdFx0XHRcdFx0Zm9yICggdmFyIGkgPSAwLCBsID0gY3R4LlRydWVMaXRlcmFsLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG5cblx0XHRcdFx0XHRcdFx0dmFyIHRydWVMaXRlcmFsID0gY3R4LlRydWVMaXRlcmFsWyBpIF07XG5cblx0XHRcdFx0XHRcdFx0aWYgKCB0cnVlTGl0ZXJhbC5pbWFnZSA9PT0gJ1RSVUUnICkgZmllbGQudmFsdWVzLnB1c2goIHRydWUgKTtcblxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0aWYgKCBjdHguRmFsc2VMaXRlcmFsICkge1xuXG5cdFx0XHRcdFx0XHRmaWVsZC50eXBlID0gJ2Jvb2xlYW4nO1xuXG5cdFx0XHRcdFx0XHRmb3IgKCB2YXIgaSA9IDAsIGwgPSBjdHguRmFsc2VMaXRlcmFsLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG5cblx0XHRcdFx0XHRcdFx0dmFyIGZhbHNlTGl0ZXJhbCA9IGN0eC5GYWxzZUxpdGVyYWxbIGkgXTtcblxuXHRcdFx0XHRcdFx0XHRpZiAoIGZhbHNlTGl0ZXJhbC5pbWFnZSA9PT0gJ0ZBTFNFJyApIGZpZWxkLnZhbHVlcy5wdXNoKCBmYWxzZSApO1xuXG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpZiAoIGN0eC5OdWxsTGl0ZXJhbCApIHtcblxuXHRcdFx0XHRcdFx0ZmllbGQudHlwZSA9ICdudWxsJztcblxuXHRcdFx0XHRcdFx0Y3R4Lk51bGxMaXRlcmFsLmZvckVhY2goIGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0XHRcdFx0XHRmaWVsZC52YWx1ZXMucHVzaCggbnVsbCApO1xuXG5cdFx0XHRcdFx0XHR9ICk7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRyZXR1cm4gZmllbGQ7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiBuZXcgVlJNTFRvQVNUVmlzaXRvcigpO1xuXG5cdFx0XHR9XG5cblx0XHRcdGZ1bmN0aW9uIHBhcnNlVHJlZSggdHJlZSApIHtcblxuXHRcdFx0XHQvLyBjb25zb2xlLmxvZyggSlNPTi5zdHJpbmdpZnkoIHRyZWUsIG51bGwsIDIgKSApO1xuXG5cdFx0XHRcdHZhciBub2RlcyA9IHRyZWUubm9kZXM7XG5cdFx0XHRcdHZhciBzY2VuZSA9IG5ldyBTY2VuZSgpO1xuXG5cdFx0XHRcdC8vIGZpcnN0IGl0ZXJhdGlvbjogYnVpbGQgbm9kZW1hcCBiYXNlZCBvbiBERUYgc3RhdGVtZW50c1xuXG5cdFx0XHRcdGZvciAoIHZhciBpID0gMCwgbCA9IG5vZGVzLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG5cblx0XHRcdFx0XHR2YXIgbm9kZSA9IG5vZGVzWyBpIF07XG5cblx0XHRcdFx0XHRidWlsZE5vZGVNYXAoIG5vZGUgKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gc2Vjb25kIGl0ZXJhdGlvbjogYnVpbGQgbm9kZXNcblxuXHRcdFx0XHRmb3IgKCB2YXIgaSA9IDAsIGwgPSBub2Rlcy5sZW5ndGg7IGkgPCBsOyBpICsrICkge1xuXG5cdFx0XHRcdFx0dmFyIG5vZGUgPSBub2Rlc1sgaSBdO1xuXHRcdFx0XHRcdHZhciBvYmplY3QgPSBnZXROb2RlKCBub2RlICk7XG5cblx0XHRcdFx0XHRpZiAoIG9iamVjdCBpbnN0YW5jZW9mIE9iamVjdDNEICkgc2NlbmUuYWRkKCBvYmplY3QgKTtcblxuXHRcdFx0XHRcdGlmICggbm9kZS5uYW1lID09PSAnV29ybGRJbmZvJyApIHNjZW5lLnVzZXJEYXRhLndvcmxkSW5mbyA9IG9iamVjdDtcblxuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIHNjZW5lO1xuXG5cdFx0XHR9XG5cblx0XHRcdGZ1bmN0aW9uIGJ1aWxkTm9kZU1hcCggbm9kZSApIHtcblxuXHRcdFx0XHRpZiAoIG5vZGUuREVGICkge1xuXG5cdFx0XHRcdFx0bm9kZU1hcFsgbm9kZS5ERUYgXSA9IG5vZGU7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdHZhciBmaWVsZHMgPSBub2RlLmZpZWxkcztcblxuXHRcdFx0XHRmb3IgKCB2YXIgaSA9IDAsIGwgPSBmaWVsZHMubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcblxuXHRcdFx0XHRcdHZhciBmaWVsZCA9IGZpZWxkc1sgaSBdO1xuXG5cdFx0XHRcdFx0aWYgKCBmaWVsZC50eXBlID09PSAnbm9kZScgKSB7XG5cblx0XHRcdFx0XHRcdHZhciBmaWVsZFZhbHVlcyA9IGZpZWxkLnZhbHVlcztcblxuXHRcdFx0XHRcdFx0Zm9yICggdmFyIGogPSAwLCBqbCA9IGZpZWxkVmFsdWVzLmxlbmd0aDsgaiA8IGpsOyBqICsrICkge1xuXG5cdFx0XHRcdFx0XHRcdGJ1aWxkTm9kZU1hcCggZmllbGRWYWx1ZXNbIGogXSApO1xuXG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHR9XG5cblxuXHRcdFx0XHR9XG5cblx0XHRcdH1cblxuXG5cdFx0XHRmdW5jdGlvbiBnZXROb2RlKCBub2RlICkge1xuXG5cdFx0XHRcdC8vIGhhbmRsZSBjYXNlIHdoZXJlIGEgbm9kZSByZWZlcnMgdG8gYSBkaWZmZXJlbnQgb25lXG5cblx0XHRcdFx0aWYgKCBub2RlLlVTRSApIHtcblxuXHRcdFx0XHRcdHJldHVybiByZXNvbHZlVVNFKCBub2RlLlVTRSApO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoIG5vZGUuYnVpbGQgIT09IHVuZGVmaW5lZCApIHJldHVybiBub2RlLmJ1aWxkO1xuXG5cdFx0XHRcdG5vZGUuYnVpbGQgPSBidWlsZE5vZGUoIG5vZGUgKTtcblxuXHRcdFx0XHRyZXR1cm4gbm9kZS5idWlsZDtcblxuXHRcdFx0fVxuXG5cdFx0XHQvLyBub2RlIGJ1aWxkZXJcblxuXHRcdFx0ZnVuY3Rpb24gYnVpbGROb2RlKCBub2RlICkge1xuXG5cdFx0XHRcdHZhciBub2RlTmFtZSA9IG5vZGUubmFtZTtcblx0XHRcdFx0dmFyIGJ1aWxkO1xuXG5cdFx0XHRcdHN3aXRjaCAoIG5vZGVOYW1lICkge1xuXG5cdFx0XHRcdFx0Y2FzZSAnR3JvdXAnOlxuXHRcdFx0XHRcdGNhc2UgJ1RyYW5zZm9ybSc6XG5cdFx0XHRcdFx0Y2FzZSAnQ29sbGlzaW9uJzpcblx0XHRcdFx0XHRcdGJ1aWxkID0gYnVpbGRHcm91cGluZ05vZGUoIG5vZGUgKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0Y2FzZSAnQmFja2dyb3VuZCc6XG5cdFx0XHRcdFx0XHRidWlsZCA9IGJ1aWxkQmFja2dyb3VuZE5vZGUoIG5vZGUgKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0Y2FzZSAnU2hhcGUnOlxuXHRcdFx0XHRcdFx0YnVpbGQgPSBidWlsZFNoYXBlTm9kZSggbm9kZSApO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRjYXNlICdBcHBlYXJhbmNlJzpcblx0XHRcdFx0XHRcdGJ1aWxkID0gYnVpbGRBcHBlYXJhbmNlTm9kZSggbm9kZSApO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRjYXNlICdNYXRlcmlhbCc6XG5cdFx0XHRcdFx0XHRidWlsZCA9IGJ1aWxkTWF0ZXJpYWxOb2RlKCBub2RlICk7XG5cdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdGNhc2UgJ0ltYWdlVGV4dHVyZSc6XG5cdFx0XHRcdFx0XHRidWlsZCA9IGJ1aWxkSW1hZ2VUZXh0dXJlTm9kZSggbm9kZSApO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRjYXNlICdQaXhlbFRleHR1cmUnOlxuXHRcdFx0XHRcdFx0YnVpbGQgPSBidWlsZFBpeGVsVGV4dHVyZU5vZGUoIG5vZGUgKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0Y2FzZSAnVGV4dHVyZVRyYW5zZm9ybSc6XG5cdFx0XHRcdFx0XHRidWlsZCA9IGJ1aWxkVGV4dHVyZVRyYW5zZm9ybU5vZGUoIG5vZGUgKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0Y2FzZSAnSW5kZXhlZEZhY2VTZXQnOlxuXHRcdFx0XHRcdFx0YnVpbGQgPSBidWlsZEluZGV4ZWRGYWNlU2V0Tm9kZSggbm9kZSApO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRjYXNlICdJbmRleGVkTGluZVNldCc6XG5cdFx0XHRcdFx0XHRidWlsZCA9IGJ1aWxkSW5kZXhlZExpbmVTZXROb2RlKCBub2RlICk7XG5cdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdGNhc2UgJ1BvaW50U2V0Jzpcblx0XHRcdFx0XHRcdGJ1aWxkID0gYnVpbGRQb2ludFNldE5vZGUoIG5vZGUgKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0Y2FzZSAnQm94Jzpcblx0XHRcdFx0XHRcdGJ1aWxkID0gYnVpbGRCb3hOb2RlKCBub2RlICk7XG5cdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdGNhc2UgJ0NvbmUnOlxuXHRcdFx0XHRcdFx0YnVpbGQgPSBidWlsZENvbmVOb2RlKCBub2RlICk7XG5cdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdGNhc2UgJ0N5bGluZGVyJzpcblx0XHRcdFx0XHRcdGJ1aWxkID0gYnVpbGRDeWxpbmRlck5vZGUoIG5vZGUgKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0Y2FzZSAnU3BoZXJlJzpcblx0XHRcdFx0XHRcdGJ1aWxkID0gYnVpbGRTcGhlcmVOb2RlKCBub2RlICk7XG5cdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdGNhc2UgJ0VsZXZhdGlvbkdyaWQnOlxuXHRcdFx0XHRcdFx0YnVpbGQgPSBidWlsZEVsZXZhdGlvbkdyaWROb2RlKCBub2RlICk7XG5cdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdGNhc2UgJ0V4dHJ1c2lvbic6XG5cdFx0XHRcdFx0XHRidWlsZCA9IGJ1aWxkRXh0cnVzaW9uTm9kZSggbm9kZSApO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRjYXNlICdDb2xvcic6XG5cdFx0XHRcdFx0Y2FzZSAnQ29vcmRpbmF0ZSc6XG5cdFx0XHRcdFx0Y2FzZSAnTm9ybWFsJzpcblx0XHRcdFx0XHRjYXNlICdUZXh0dXJlQ29vcmRpbmF0ZSc6XG5cdFx0XHRcdFx0XHRidWlsZCA9IGJ1aWxkR2VvbWV0cmljTm9kZSggbm9kZSApO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRjYXNlICdXb3JsZEluZm8nOlxuXHRcdFx0XHRcdFx0YnVpbGQgPSBidWlsZFdvcmxkSW5mb05vZGUoIG5vZGUgKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0Y2FzZSAnQW5jaG9yJzpcblx0XHRcdFx0XHRjYXNlICdCaWxsYm9hcmQnOlxuXG5cdFx0XHRcdFx0Y2FzZSAnSW5saW5lJzpcblx0XHRcdFx0XHRjYXNlICdMT0QnOlxuXHRcdFx0XHRcdGNhc2UgJ1N3aXRjaCc6XG5cblx0XHRcdFx0XHRjYXNlICdBdWRpb0NsaXAnOlxuXHRcdFx0XHRcdGNhc2UgJ0RpcmVjdGlvbmFsTGlnaHQnOlxuXHRcdFx0XHRcdGNhc2UgJ1BvaW50TGlnaHQnOlxuXHRcdFx0XHRcdGNhc2UgJ1NjcmlwdCc6XG5cdFx0XHRcdFx0Y2FzZSAnU291bmQnOlxuXHRcdFx0XHRcdGNhc2UgJ1Nwb3RMaWdodCc6XG5cblx0XHRcdFx0XHRjYXNlICdDeWxpbmRlclNlbnNvcic6XG5cdFx0XHRcdFx0Y2FzZSAnUGxhbmVTZW5zb3InOlxuXHRcdFx0XHRcdGNhc2UgJ1Byb3hpbWl0eVNlbnNvcic6XG5cdFx0XHRcdFx0Y2FzZSAnU3BoZXJlU2Vuc29yJzpcblx0XHRcdFx0XHRjYXNlICdUaW1lU2Vuc29yJzpcblx0XHRcdFx0XHRjYXNlICdUb3VjaFNlbnNvcic6XG5cdFx0XHRcdFx0Y2FzZSAnVmlzaWJpbGl0eVNlbnNvcic6XG5cblx0XHRcdFx0XHRjYXNlICdUZXh0JzpcblxuXHRcdFx0XHRcdGNhc2UgJ0ZvbnRTdHlsZSc6XG5cdFx0XHRcdFx0Y2FzZSAnTW92aWVUZXh0dXJlJzpcblxuXHRcdFx0XHRcdGNhc2UgJ0NvbG9ySW50ZXJwb2xhdG9yJzpcblx0XHRcdFx0XHRjYXNlICdDb29yZGluYXRlSW50ZXJwb2xhdG9yJzpcblx0XHRcdFx0XHRjYXNlICdOb3JtYWxJbnRlcnBvbGF0b3InOlxuXHRcdFx0XHRcdGNhc2UgJ09yaWVudGF0aW9uSW50ZXJwb2xhdG9yJzpcblx0XHRcdFx0XHRjYXNlICdQb3NpdGlvbkludGVycG9sYXRvcic6XG5cdFx0XHRcdFx0Y2FzZSAnU2NhbGFySW50ZXJwb2xhdG9yJzpcblxuXHRcdFx0XHRcdGNhc2UgJ0ZvZyc6XG5cdFx0XHRcdFx0Y2FzZSAnTmF2aWdhdGlvbkluZm8nOlxuXHRcdFx0XHRcdGNhc2UgJ1ZpZXdwb2ludCc6XG5cdFx0XHRcdFx0XHQvLyBub2RlIG5vdCBzdXBwb3J0ZWQgeWV0XG5cdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0XHRjb25zb2xlLndhcm4oICdUSFJFRS5WUk1MTG9hZGVyOiBVbmtub3duIG5vZGU6Jywgbm9kZU5hbWUgKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoIGJ1aWxkICE9PSB1bmRlZmluZWQgJiYgbm9kZS5ERUYgIT09IHVuZGVmaW5lZCAmJiBidWlsZC5oYXNPd25Qcm9wZXJ0eSggJ25hbWUnICkgPT09IHRydWUgKSB7XG5cblx0XHRcdFx0XHRidWlsZC5uYW1lID0gbm9kZS5ERUY7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiBidWlsZDtcblxuXHRcdFx0fVxuXG5cdFx0XHRmdW5jdGlvbiBidWlsZEdyb3VwaW5nTm9kZSggbm9kZSApIHtcblxuXHRcdFx0XHR2YXIgb2JqZWN0ID0gbmV3IEdyb3VwKCk7XG5cblx0XHRcdFx0Ly9cblxuXHRcdFx0XHR2YXIgZmllbGRzID0gbm9kZS5maWVsZHM7XG5cblx0XHRcdFx0Zm9yICggdmFyIGkgPSAwLCBsID0gZmllbGRzLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG5cblx0XHRcdFx0XHR2YXIgZmllbGQgPSBmaWVsZHNbIGkgXTtcblx0XHRcdFx0XHR2YXIgZmllbGROYW1lID0gZmllbGQubmFtZTtcblx0XHRcdFx0XHR2YXIgZmllbGRWYWx1ZXMgPSBmaWVsZC52YWx1ZXM7XG5cblx0XHRcdFx0XHRzd2l0Y2ggKCBmaWVsZE5hbWUgKSB7XG5cblx0XHRcdFx0XHRcdGNhc2UgJ2Jib3hDZW50ZXInOlxuXHRcdFx0XHRcdFx0XHQvLyBmaWVsZCBub3Qgc3VwcG9ydGVkXG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0XHRjYXNlICdiYm94U2l6ZSc6XG5cdFx0XHRcdFx0XHRcdC8vIGZpZWxkIG5vdCBzdXBwb3J0ZWRcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRcdGNhc2UgJ2NlbnRlcic6XG5cdFx0XHRcdFx0XHRcdC8vIGZpZWxkIG5vdCBzdXBwb3J0ZWRcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRcdGNhc2UgJ2NoaWxkcmVuJzpcblx0XHRcdFx0XHRcdFx0cGFyc2VGaWVsZENoaWxkcmVuKCBmaWVsZFZhbHVlcywgb2JqZWN0ICk7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0XHRjYXNlICdjb2xsaWRlJzpcblx0XHRcdFx0XHRcdFx0Ly8gZmllbGQgbm90IHN1cHBvcnRlZFxuXHRcdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdFx0Y2FzZSAncm90YXRpb24nOlxuXHRcdFx0XHRcdFx0XHR2YXIgYXhpcyA9IG5ldyBWZWN0b3IzKCBmaWVsZFZhbHVlc1sgMCBdLCBmaWVsZFZhbHVlc1sgMSBdLCBmaWVsZFZhbHVlc1sgMiBdICk7XG5cdFx0XHRcdFx0XHRcdHZhciBhbmdsZSA9IGZpZWxkVmFsdWVzWyAzIF07XG5cdFx0XHRcdFx0XHRcdG9iamVjdC5xdWF0ZXJuaW9uLnNldEZyb21BeGlzQW5nbGUoIGF4aXMsIGFuZ2xlICk7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0XHRjYXNlICdzY2FsZSc6XG5cdFx0XHRcdFx0XHRcdG9iamVjdC5zY2FsZS5zZXQoIGZpZWxkVmFsdWVzWyAwIF0sIGZpZWxkVmFsdWVzWyAxIF0sIGZpZWxkVmFsdWVzWyAyIF0gKTtcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRcdGNhc2UgJ3NjYWxlT3JpZW50YXRpb24nOlxuXHRcdFx0XHRcdFx0XHQvLyBmaWVsZCBub3Qgc3VwcG9ydGVkXG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0XHRjYXNlICd0cmFuc2xhdGlvbic6XG5cdFx0XHRcdFx0XHRcdG9iamVjdC5wb3NpdGlvbi5zZXQoIGZpZWxkVmFsdWVzWyAwIF0sIGZpZWxkVmFsdWVzWyAxIF0sIGZpZWxkVmFsdWVzWyAyIF0gKTtcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRcdGNhc2UgJ3Byb3h5Jzpcblx0XHRcdFx0XHRcdFx0Ly8gZmllbGQgbm90IHN1cHBvcnRlZFxuXHRcdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHRcdFx0Y29uc29sZS53YXJuKCAnVEhSRUUuVlJNTExvYWRlcjogVW5rbm93biBmaWVsZDonLCBmaWVsZE5hbWUgKTtcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiBvYmplY3Q7XG5cblx0XHRcdH1cblxuXHRcdFx0ZnVuY3Rpb24gYnVpbGRCYWNrZ3JvdW5kTm9kZSggbm9kZSApIHtcblxuXHRcdFx0XHR2YXIgZ3JvdXAgPSBuZXcgR3JvdXAoKTtcblxuXHRcdFx0XHR2YXIgZ3JvdW5kQW5nbGUsIGdyb3VuZENvbG9yO1xuXHRcdFx0XHR2YXIgc2t5QW5nbGUsIHNreUNvbG9yO1xuXG5cdFx0XHRcdHZhciBmaWVsZHMgPSBub2RlLmZpZWxkcztcblxuXHRcdFx0XHRmb3IgKCB2YXIgaSA9IDAsIGwgPSBmaWVsZHMubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcblxuXHRcdFx0XHRcdHZhciBmaWVsZCA9IGZpZWxkc1sgaSBdO1xuXHRcdFx0XHRcdHZhciBmaWVsZE5hbWUgPSBmaWVsZC5uYW1lO1xuXHRcdFx0XHRcdHZhciBmaWVsZFZhbHVlcyA9IGZpZWxkLnZhbHVlcztcblxuXHRcdFx0XHRcdHN3aXRjaCAoIGZpZWxkTmFtZSApIHtcblxuXHRcdFx0XHRcdFx0Y2FzZSAnZ3JvdW5kQW5nbGUnOlxuXHRcdFx0XHRcdFx0XHRncm91bmRBbmdsZSA9IGZpZWxkVmFsdWVzO1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdFx0Y2FzZSAnZ3JvdW5kQ29sb3InOlxuXHRcdFx0XHRcdFx0XHRncm91bmRDb2xvciA9IGZpZWxkVmFsdWVzO1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdFx0Y2FzZSAnYmFja1VybCc6XG5cdFx0XHRcdFx0XHRcdC8vIGZpZWxkIG5vdCBzdXBwb3J0ZWRcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRcdGNhc2UgJ2JvdHRvbVVybCc6XG5cdFx0XHRcdFx0XHRcdC8vIGZpZWxkIG5vdCBzdXBwb3J0ZWRcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRcdGNhc2UgJ2Zyb250VXJsJzpcblx0XHRcdFx0XHRcdFx0Ly8gZmllbGQgbm90IHN1cHBvcnRlZFxuXHRcdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdFx0Y2FzZSAnbGVmdFVybCc6XG5cdFx0XHRcdFx0XHRcdC8vIGZpZWxkIG5vdCBzdXBwb3J0ZWRcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRcdGNhc2UgJ3JpZ2h0VXJsJzpcblx0XHRcdFx0XHRcdFx0Ly8gZmllbGQgbm90IHN1cHBvcnRlZFxuXHRcdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdFx0Y2FzZSAndG9wVXJsJzpcblx0XHRcdFx0XHRcdFx0Ly8gZmllbGQgbm90IHN1cHBvcnRlZFxuXHRcdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdFx0Y2FzZSAnc2t5QW5nbGUnOlxuXHRcdFx0XHRcdFx0XHRza3lBbmdsZSA9IGZpZWxkVmFsdWVzO1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdFx0Y2FzZSAnc2t5Q29sb3InOlxuXHRcdFx0XHRcdFx0XHRza3lDb2xvciA9IGZpZWxkVmFsdWVzO1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHRcdFx0Y29uc29sZS53YXJuKCAnVEhSRUUuVlJNTExvYWRlcjogVW5rbm93biBmaWVsZDonLCBmaWVsZE5hbWUgKTtcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdHZhciByYWRpdXMgPSAxMDAwMDtcblxuXHRcdFx0XHQvLyBza3lcblxuXHRcdFx0XHRpZiAoIHNreUNvbG9yICkge1xuXG5cdFx0XHRcdFx0dmFyIHNreUdlb21ldHJ5ID0gbmV3IFNwaGVyZUdlb21ldHJ5KCByYWRpdXMsIDMyLCAxNiApO1xuXHRcdFx0XHRcdHZhciBza3lNYXRlcmlhbCA9IG5ldyBNZXNoQmFzaWNNYXRlcmlhbCggeyBmb2c6IGZhbHNlLCBzaWRlOiBCYWNrU2lkZSwgZGVwdGhXcml0ZTogZmFsc2UsIGRlcHRoVGVzdDogZmFsc2UgfSApO1xuXG5cdFx0XHRcdFx0aWYgKCBza3lDb2xvci5sZW5ndGggPiAzICkge1xuXG5cdFx0XHRcdFx0XHRwYWludEZhY2VzKCBza3lHZW9tZXRyeSwgcmFkaXVzLCBza3lBbmdsZSwgdG9Db2xvckFycmF5KCBza3lDb2xvciApLCB0cnVlICk7XG5cdFx0XHRcdFx0XHRza3lNYXRlcmlhbC52ZXJ0ZXhDb2xvcnMgPSB0cnVlO1xuXG5cdFx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdFx0c2t5TWF0ZXJpYWwuY29sb3Iuc2V0UkdCKCBza3lDb2xvclsgMCBdLCBza3lDb2xvclsgMSBdLCBza3lDb2xvclsgMiBdICk7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHR2YXIgc2t5ID0gbmV3IE1lc2goIHNreUdlb21ldHJ5LCBza3lNYXRlcmlhbCApO1xuXHRcdFx0XHRcdGdyb3VwLmFkZCggc2t5ICk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIGdyb3VuZFxuXG5cdFx0XHRcdGlmICggZ3JvdW5kQ29sb3IgKSB7XG5cblx0XHRcdFx0XHRpZiAoIGdyb3VuZENvbG9yLmxlbmd0aCA+IDAgKSB7XG5cblx0XHRcdFx0XHRcdHZhciBncm91bmRHZW9tZXRyeSA9IG5ldyBTcGhlcmVHZW9tZXRyeSggcmFkaXVzLCAzMiwgMTYsIDAsIDIgKiBNYXRoLlBJLCAwLjUgKiBNYXRoLlBJLCAxLjUgKiBNYXRoLlBJICk7XG5cdFx0XHRcdFx0XHR2YXIgZ3JvdW5kTWF0ZXJpYWwgPSBuZXcgTWVzaEJhc2ljTWF0ZXJpYWwoIHsgZm9nOiBmYWxzZSwgc2lkZTogQmFja1NpZGUsIHZlcnRleENvbG9yczogdHJ1ZSwgZGVwdGhXcml0ZTogZmFsc2UsIGRlcHRoVGVzdDogZmFsc2UgfSApO1xuXG5cdFx0XHRcdFx0XHRwYWludEZhY2VzKCBncm91bmRHZW9tZXRyeSwgcmFkaXVzLCBncm91bmRBbmdsZSwgdG9Db2xvckFycmF5KCBncm91bmRDb2xvciApLCBmYWxzZSApO1xuXG5cdFx0XHRcdFx0XHR2YXIgZ3JvdW5kID0gbmV3IE1lc2goIGdyb3VuZEdlb21ldHJ5LCBncm91bmRNYXRlcmlhbCApO1xuXHRcdFx0XHRcdFx0Z3JvdXAuYWRkKCBncm91bmQgKTtcblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gcmVuZGVyIGJhY2tncm91bmQgZ3JvdXAgZmlyc3RcblxuXHRcdFx0XHRncm91cC5yZW5kZXJPcmRlciA9IC0gSW5maW5pdHk7XG5cblx0XHRcdFx0cmV0dXJuIGdyb3VwO1xuXG5cdFx0XHR9XG5cblx0XHRcdGZ1bmN0aW9uIGJ1aWxkU2hhcGVOb2RlKCBub2RlICkge1xuXG5cdFx0XHRcdHZhciBmaWVsZHMgPSBub2RlLmZpZWxkcztcblxuXHRcdFx0XHQvLyBpZiB0aGUgYXBwZWFyYW5jZSBmaWVsZCBpcyBOVUxMIG9yIHVuc3BlY2lmaWVkLCBsaWdodGluZyBpcyBvZmYgYW5kIHRoZSB1bmxpdCBvYmplY3QgY29sb3IgaXMgKDAsIDAsIDApXG5cblx0XHRcdFx0dmFyIG1hdGVyaWFsID0gbmV3IE1lc2hCYXNpY01hdGVyaWFsKCB7IGNvbG9yOiAweDAwMDAwMCB9ICk7XG5cdFx0XHRcdHZhciBnZW9tZXRyeTtcblxuXHRcdFx0XHRmb3IgKCB2YXIgaSA9IDAsIGwgPSBmaWVsZHMubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcblxuXHRcdFx0XHRcdHZhciBmaWVsZCA9IGZpZWxkc1sgaSBdO1xuXHRcdFx0XHRcdHZhciBmaWVsZE5hbWUgPSBmaWVsZC5uYW1lO1xuXHRcdFx0XHRcdHZhciBmaWVsZFZhbHVlcyA9IGZpZWxkLnZhbHVlcztcblxuXHRcdFx0XHRcdHN3aXRjaCAoIGZpZWxkTmFtZSApIHtcblxuXHRcdFx0XHRcdFx0Y2FzZSAnYXBwZWFyYW5jZSc6XG5cdFx0XHRcdFx0XHRcdGlmICggZmllbGRWYWx1ZXNbIDAgXSAhPT0gbnVsbCApIHtcblxuXHRcdFx0XHRcdFx0XHRcdG1hdGVyaWFsID0gZ2V0Tm9kZSggZmllbGRWYWx1ZXNbIDAgXSApO1xuXG5cdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdFx0Y2FzZSAnZ2VvbWV0cnknOlxuXHRcdFx0XHRcdFx0XHRpZiAoIGZpZWxkVmFsdWVzWyAwIF0gIT09IG51bGwgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHRnZW9tZXRyeSA9IGdldE5vZGUoIGZpZWxkVmFsdWVzWyAwIF0gKTtcblxuXHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0XHRcdGNvbnNvbGUud2FybiggJ1RIUkVFLlZSTUxMb2FkZXI6IFVua25vd24gZmllbGQ6JywgZmllbGROYW1lICk7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBidWlsZCAzRCBvYmplY3RcblxuXHRcdFx0XHR2YXIgb2JqZWN0O1xuXG5cdFx0XHRcdGlmICggZ2VvbWV0cnkgJiYgZ2VvbWV0cnkuYXR0cmlidXRlcy5wb3NpdGlvbiApIHtcblxuXHRcdFx0XHRcdHZhciB0eXBlID0gZ2VvbWV0cnkuX3R5cGU7XG5cblx0XHRcdFx0XHRpZiAoIHR5cGUgPT09ICdwb2ludHMnICkgeyAvLyBwb2ludHNcblxuXHRcdFx0XHRcdFx0dmFyIHBvaW50c01hdGVyaWFsID0gbmV3IFBvaW50c01hdGVyaWFsKCB7IGNvbG9yOiAweGZmZmZmZiB9ICk7XG5cblx0XHRcdFx0XHRcdGlmICggZ2VvbWV0cnkuYXR0cmlidXRlcy5jb2xvciAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRcdFx0XHRcdHBvaW50c01hdGVyaWFsLnZlcnRleENvbG9ycyA9IHRydWU7XG5cblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRcdFx0Ly8gaWYgdGhlIGNvbG9yIGZpZWxkIGlzIE5VTEwgYW5kIHRoZXJlIGlzIGEgbWF0ZXJpYWwgZGVmaW5lZCBmb3IgdGhlIGFwcGVhcmFuY2UgYWZmZWN0aW5nIHRoaXMgUG9pbnRTZXQsIHRoZW4gdXNlIHRoZSBlbWlzc2l2ZUNvbG9yIG9mIHRoZSBtYXRlcmlhbCB0byBkcmF3IHRoZSBwb2ludHNcblxuXHRcdFx0XHRcdFx0XHRpZiAoIG1hdGVyaWFsLmlzTWVzaFBob25nTWF0ZXJpYWwgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHRwb2ludHNNYXRlcmlhbC5jb2xvci5jb3B5KCBtYXRlcmlhbC5lbWlzc2l2ZSApO1xuXG5cdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRvYmplY3QgPSBuZXcgUG9pbnRzKCBnZW9tZXRyeSwgcG9pbnRzTWF0ZXJpYWwgKTtcblxuXHRcdFx0XHRcdH0gZWxzZSBpZiAoIHR5cGUgPT09ICdsaW5lJyApIHsgLy8gbGluZXNcblxuXHRcdFx0XHRcdFx0dmFyIGxpbmVNYXRlcmlhbCA9IG5ldyBMaW5lQmFzaWNNYXRlcmlhbCggeyBjb2xvcjogMHhmZmZmZmYgfSApO1xuXG5cdFx0XHRcdFx0XHRpZiAoIGdlb21ldHJ5LmF0dHJpYnV0ZXMuY29sb3IgIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0XHRcdFx0XHRsaW5lTWF0ZXJpYWwudmVydGV4Q29sb3JzID0gdHJ1ZTtcblxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdFx0XHQvLyBpZiB0aGUgY29sb3IgZmllbGQgaXMgTlVMTCBhbmQgdGhlcmUgaXMgYSBtYXRlcmlhbCBkZWZpbmVkIGZvciB0aGUgYXBwZWFyYW5jZSBhZmZlY3RpbmcgdGhpcyBJbmRleGVkTGluZVNldCwgdGhlbiB1c2UgdGhlIGVtaXNzaXZlQ29sb3Igb2YgdGhlIG1hdGVyaWFsIHRvIGRyYXcgdGhlIGxpbmVzXG5cblx0XHRcdFx0XHRcdFx0aWYgKCBtYXRlcmlhbC5pc01lc2hQaG9uZ01hdGVyaWFsICkge1xuXG5cdFx0XHRcdFx0XHRcdFx0bGluZU1hdGVyaWFsLmNvbG9yLmNvcHkoIG1hdGVyaWFsLmVtaXNzaXZlICk7XG5cblx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdG9iamVjdCA9IG5ldyBMaW5lU2VnbWVudHMoIGdlb21ldHJ5LCBsaW5lTWF0ZXJpYWwgKTtcblxuXHRcdFx0XHRcdH0gZWxzZSB7IC8vIGNvbnNpZGVyIG1lc2hlc1xuXG5cdFx0XHRcdFx0XHQvLyBjaGVjayBcInNvbGlkXCIgaGludCAoaXQncyBwbGFjZWQgaW4gdGhlIGdlb21ldHJ5IGJ1dCBhZmZlY3RzIHRoZSBtYXRlcmlhbClcblxuXHRcdFx0XHRcdFx0aWYgKCBnZW9tZXRyeS5fc29saWQgIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0XHRcdFx0XHRtYXRlcmlhbC5zaWRlID0gKCBnZW9tZXRyeS5fc29saWQgKSA/IEZyb250U2lkZSA6IERvdWJsZVNpZGU7XG5cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0Ly8gY2hlY2sgZm9yIHZlcnRleCBjb2xvcnNcblxuXHRcdFx0XHRcdFx0aWYgKCBnZW9tZXRyeS5hdHRyaWJ1dGVzLmNvbG9yICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0XHRcdFx0bWF0ZXJpYWwudmVydGV4Q29sb3JzID0gdHJ1ZTtcblxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRvYmplY3QgPSBuZXcgTWVzaCggZ2VvbWV0cnksIG1hdGVyaWFsICk7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdG9iamVjdCA9IG5ldyBPYmplY3QzRCgpO1xuXG5cdFx0XHRcdFx0Ly8gaWYgdGhlIGdlb21ldHJ5IGZpZWxkIGlzIE5VTEwgb3Igbm8gdmVydGljZXMgYXJlIGRlZmluZWQgdGhlIG9iamVjdCBpcyBub3QgZHJhd25cblxuXHRcdFx0XHRcdG9iamVjdC52aXNpYmxlID0gZmFsc2U7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiBvYmplY3Q7XG5cblx0XHRcdH1cblxuXHRcdFx0ZnVuY3Rpb24gYnVpbGRBcHBlYXJhbmNlTm9kZSggbm9kZSApIHtcblxuXHRcdFx0XHR2YXIgbWF0ZXJpYWwgPSBuZXcgTWVzaFBob25nTWF0ZXJpYWwoKTtcblx0XHRcdFx0dmFyIHRyYW5zZm9ybURhdGE7XG5cblx0XHRcdFx0dmFyIGZpZWxkcyA9IG5vZGUuZmllbGRzO1xuXG5cdFx0XHRcdGZvciAoIHZhciBpID0gMCwgbCA9IGZpZWxkcy5sZW5ndGg7IGkgPCBsOyBpICsrICkge1xuXG5cdFx0XHRcdFx0dmFyIGZpZWxkID0gZmllbGRzWyBpIF07XG5cdFx0XHRcdFx0dmFyIGZpZWxkTmFtZSA9IGZpZWxkLm5hbWU7XG5cdFx0XHRcdFx0dmFyIGZpZWxkVmFsdWVzID0gZmllbGQudmFsdWVzO1xuXG5cdFx0XHRcdFx0c3dpdGNoICggZmllbGROYW1lICkge1xuXG5cdFx0XHRcdFx0XHRjYXNlICdtYXRlcmlhbCc6XG5cdFx0XHRcdFx0XHRcdGlmICggZmllbGRWYWx1ZXNbIDAgXSAhPT0gbnVsbCApIHtcblxuXHRcdFx0XHRcdFx0XHRcdHZhciBtYXRlcmlhbERhdGEgPSBnZXROb2RlKCBmaWVsZFZhbHVlc1sgMCBdICk7XG5cblx0XHRcdFx0XHRcdFx0XHRpZiAoIG1hdGVyaWFsRGF0YS5kaWZmdXNlQ29sb3IgKSBtYXRlcmlhbC5jb2xvci5jb3B5KCBtYXRlcmlhbERhdGEuZGlmZnVzZUNvbG9yICk7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKCBtYXRlcmlhbERhdGEuZW1pc3NpdmVDb2xvciApIG1hdGVyaWFsLmVtaXNzaXZlLmNvcHkoIG1hdGVyaWFsRGF0YS5lbWlzc2l2ZUNvbG9yICk7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKCBtYXRlcmlhbERhdGEuc2hpbmluZXNzICkgbWF0ZXJpYWwuc2hpbmluZXNzID0gbWF0ZXJpYWxEYXRhLnNoaW5pbmVzcztcblx0XHRcdFx0XHRcdFx0XHRpZiAoIG1hdGVyaWFsRGF0YS5zcGVjdWxhckNvbG9yICkgbWF0ZXJpYWwuc3BlY3VsYXIuY29weSggbWF0ZXJpYWxEYXRhLnNwZWN1bGFyQ29sb3IgKTtcblx0XHRcdFx0XHRcdFx0XHRpZiAoIG1hdGVyaWFsRGF0YS50cmFuc3BhcmVuY3kgKSBtYXRlcmlhbC5vcGFjaXR5ID0gMSAtIG1hdGVyaWFsRGF0YS50cmFuc3BhcmVuY3k7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKCBtYXRlcmlhbERhdGEudHJhbnNwYXJlbmN5ID4gMCApIG1hdGVyaWFsLnRyYW5zcGFyZW50ID0gdHJ1ZTtcblxuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0XHRcdFx0Ly8gaWYgdGhlIG1hdGVyaWFsIGZpZWxkIGlzIE5VTEwgb3IgdW5zcGVjaWZpZWQsIGxpZ2h0aW5nIGlzIG9mZiBhbmQgdGhlIHVubGl0IG9iamVjdCBjb2xvciBpcyAoMCwgMCwgMClcblxuXHRcdFx0XHRcdFx0XHRcdG1hdGVyaWFsID0gbmV3IE1lc2hCYXNpY01hdGVyaWFsKCB7IGNvbG9yOiAweDAwMDAwMCB9ICk7XG5cblx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0XHRjYXNlICd0ZXh0dXJlJzpcblx0XHRcdFx0XHRcdFx0dmFyIHRleHR1cmVOb2RlID0gZmllbGRWYWx1ZXNbIDAgXTtcblx0XHRcdFx0XHRcdFx0aWYgKCB0ZXh0dXJlTm9kZSAhPT0gbnVsbCApIHtcblxuXHRcdFx0XHRcdFx0XHRcdGlmICggdGV4dHVyZU5vZGUubmFtZSA9PT0gJ0ltYWdlVGV4dHVyZScgfHwgdGV4dHVyZU5vZGUubmFtZSA9PT0gJ1BpeGVsVGV4dHVyZScgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHRcdG1hdGVyaWFsLm1hcCA9IGdldE5vZGUoIHRleHR1cmVOb2RlICk7XG5cblx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBNb3ZpZVRleHR1cmUgbm90IHN1cHBvcnRlZCB5ZXRcblxuXHRcdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRcdGNhc2UgJ3RleHR1cmVUcmFuc2Zvcm0nOlxuXHRcdFx0XHRcdFx0XHRpZiAoIGZpZWxkVmFsdWVzWyAwIF0gIT09IG51bGwgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHR0cmFuc2Zvcm1EYXRhID0gZ2V0Tm9kZSggZmllbGRWYWx1ZXNbIDAgXSApO1xuXG5cdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHRcdFx0Y29uc29sZS53YXJuKCAnVEhSRUUuVlJNTExvYWRlcjogVW5rbm93biBmaWVsZDonLCBmaWVsZE5hbWUgKTtcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIG9ubHkgYXBwbHkgdGV4dHVyZSB0cmFuc2Zvcm0gZGF0YSBpZiBhIHRleHR1cmUgd2FzIGRlZmluZWRcblxuXHRcdFx0XHRpZiAoIG1hdGVyaWFsLm1hcCApIHtcblxuXHRcdFx0XHRcdC8vIHJlc3BlY3QgVlJNTCBsaWdodGluZyBtb2RlbFxuXG5cdFx0XHRcdFx0aWYgKCBtYXRlcmlhbC5tYXAuX190eXBlICkge1xuXG5cdFx0XHRcdFx0XHRzd2l0Y2ggKCBtYXRlcmlhbC5tYXAuX190eXBlICkge1xuXG5cdFx0XHRcdFx0XHRcdGNhc2UgVEVYVFVSRV9UWVBFLklOVEVOU0lUWV9BTFBIQTpcblx0XHRcdFx0XHRcdFx0XHRtYXRlcmlhbC5vcGFjaXR5ID0gMTsgLy8gaWdub3JlIHRyYW5zcGFyZW5jeVxuXHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0XHRcdGNhc2UgVEVYVFVSRV9UWVBFLlJHQjpcblx0XHRcdFx0XHRcdFx0XHRtYXRlcmlhbC5jb2xvci5zZXQoIDB4ZmZmZmZmICk7IC8vIGlnbm9yZSBtYXRlcmlhbCBjb2xvclxuXHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0XHRcdGNhc2UgVEVYVFVSRV9UWVBFLlJHQkE6XG5cdFx0XHRcdFx0XHRcdFx0bWF0ZXJpYWwuY29sb3Iuc2V0KCAweGZmZmZmZiApOyAvLyBpZ25vcmUgbWF0ZXJpYWwgY29sb3Jcblx0XHRcdFx0XHRcdFx0XHRtYXRlcmlhbC5vcGFjaXR5ID0gMTsgLy8gaWdub3JlIHRyYW5zcGFyZW5jeVxuXHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0XHRcdGRlZmF1bHQ6XG5cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0ZGVsZXRlIG1hdGVyaWFsLm1hcC5fX3R5cGU7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBhcHBseSB0ZXh0dXJlIHRyYW5zZm9ybVxuXG5cdFx0XHRcdFx0aWYgKCB0cmFuc2Zvcm1EYXRhICkge1xuXG5cdFx0XHRcdFx0XHRtYXRlcmlhbC5tYXAuY2VudGVyLmNvcHkoIHRyYW5zZm9ybURhdGEuY2VudGVyICk7XG5cdFx0XHRcdFx0XHRtYXRlcmlhbC5tYXAucm90YXRpb24gPSB0cmFuc2Zvcm1EYXRhLnJvdGF0aW9uO1xuXHRcdFx0XHRcdFx0bWF0ZXJpYWwubWFwLnJlcGVhdC5jb3B5KCB0cmFuc2Zvcm1EYXRhLnNjYWxlICk7XG5cdFx0XHRcdFx0XHRtYXRlcmlhbC5tYXAub2Zmc2V0LmNvcHkoIHRyYW5zZm9ybURhdGEudHJhbnNsYXRpb24gKTtcblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIG1hdGVyaWFsO1xuXG5cdFx0XHR9XG5cblx0XHRcdGZ1bmN0aW9uIGJ1aWxkTWF0ZXJpYWxOb2RlKCBub2RlICkge1xuXG5cdFx0XHRcdHZhciBtYXRlcmlhbERhdGEgPSB7fTtcblxuXHRcdFx0XHR2YXIgZmllbGRzID0gbm9kZS5maWVsZHM7XG5cblx0XHRcdFx0Zm9yICggdmFyIGkgPSAwLCBsID0gZmllbGRzLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG5cblx0XHRcdFx0XHR2YXIgZmllbGQgPSBmaWVsZHNbIGkgXTtcblx0XHRcdFx0XHR2YXIgZmllbGROYW1lID0gZmllbGQubmFtZTtcblx0XHRcdFx0XHR2YXIgZmllbGRWYWx1ZXMgPSBmaWVsZC52YWx1ZXM7XG5cblx0XHRcdFx0XHRzd2l0Y2ggKCBmaWVsZE5hbWUgKSB7XG5cblx0XHRcdFx0XHRcdGNhc2UgJ2FtYmllbnRJbnRlbnNpdHknOlxuXHRcdFx0XHRcdFx0XHQvLyBmaWVsZCBub3Qgc3VwcG9ydGVkXG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0XHRjYXNlICdkaWZmdXNlQ29sb3InOlxuXHRcdFx0XHRcdFx0XHRtYXRlcmlhbERhdGEuZGlmZnVzZUNvbG9yID0gbmV3IENvbG9yKCBmaWVsZFZhbHVlc1sgMCBdLCBmaWVsZFZhbHVlc1sgMSBdLCBmaWVsZFZhbHVlc1sgMiBdICk7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0XHRjYXNlICdlbWlzc2l2ZUNvbG9yJzpcblx0XHRcdFx0XHRcdFx0bWF0ZXJpYWxEYXRhLmVtaXNzaXZlQ29sb3IgPSBuZXcgQ29sb3IoIGZpZWxkVmFsdWVzWyAwIF0sIGZpZWxkVmFsdWVzWyAxIF0sIGZpZWxkVmFsdWVzWyAyIF0gKTtcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRcdGNhc2UgJ3NoaW5pbmVzcyc6XG5cdFx0XHRcdFx0XHRcdG1hdGVyaWFsRGF0YS5zaGluaW5lc3MgPSBmaWVsZFZhbHVlc1sgMCBdO1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdFx0Y2FzZSAnc3BlY3VsYXJDb2xvcic6XG5cdFx0XHRcdFx0XHRcdG1hdGVyaWFsRGF0YS5lbWlzc2l2ZUNvbG9yID0gbmV3IENvbG9yKCBmaWVsZFZhbHVlc1sgMCBdLCBmaWVsZFZhbHVlc1sgMSBdLCBmaWVsZFZhbHVlc1sgMiBdICk7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0XHRjYXNlICd0cmFuc3BhcmVuY3knOlxuXHRcdFx0XHRcdFx0XHRtYXRlcmlhbERhdGEudHJhbnNwYXJlbmN5ID0gZmllbGRWYWx1ZXNbIDAgXTtcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0XHRcdGNvbnNvbGUud2FybiggJ1RIUkVFLlZSTUxMb2FkZXI6IFVua25vd24gZmllbGQ6JywgZmllbGROYW1lICk7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gbWF0ZXJpYWxEYXRhO1xuXG5cdFx0XHR9XG5cblx0XHRcdGZ1bmN0aW9uIHBhcnNlSGV4Q29sb3IoIGhleCwgdGV4dHVyZVR5cGUsIGNvbG9yICkge1xuXG5cdFx0XHRcdHN3aXRjaCAoIHRleHR1cmVUeXBlICkge1xuXG5cdFx0XHRcdFx0Y2FzZSBURVhUVVJFX1RZUEUuSU5URU5TSVRZOlxuXHRcdFx0XHRcdFx0Ly8gSW50ZW5zaXR5IHRleHR1cmU6IEEgb25lLWNvbXBvbmVudCBpbWFnZSBzcGVjaWZpZXMgb25lLWJ5dGUgaGV4YWRlY2ltYWwgb3IgaW50ZWdlciB2YWx1ZXMgcmVwcmVzZW50aW5nIHRoZSBpbnRlbnNpdHkgb2YgdGhlIGltYWdlXG5cdFx0XHRcdFx0XHR2YXIgdmFsdWUgPSBwYXJzZUludCggaGV4ICk7XG5cdFx0XHRcdFx0XHRjb2xvci5yID0gdmFsdWU7XG5cdFx0XHRcdFx0XHRjb2xvci5nID0gdmFsdWU7XG5cdFx0XHRcdFx0XHRjb2xvci5iID0gdmFsdWU7XG5cdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdGNhc2UgVEVYVFVSRV9UWVBFLklOVEVOU0lUWV9BTFBIQTpcblx0XHRcdFx0XHRcdC8vIEludGVuc2l0eStBbHBoYSB0ZXh0dXJlOiBBIHR3by1jb21wb25lbnQgaW1hZ2Ugc3BlY2lmaWVzIHRoZSBpbnRlbnNpdHkgaW4gdGhlIGZpcnN0IChoaWdoKSBieXRlIGFuZCB0aGUgYWxwaGEgb3BhY2l0eSBpbiB0aGUgc2Vjb25kIChsb3cpIGJ5dGUuXG5cdFx0XHRcdFx0XHR2YXIgdmFsdWUgPSBwYXJzZUludCggJzB4JyArIGhleC5zdWJzdHJpbmcoIDIsIDQgKSApO1xuXHRcdFx0XHRcdFx0Y29sb3IuciA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0Y29sb3IuZyA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0Y29sb3IuYiA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0Y29sb3IuYSA9IHBhcnNlSW50KCAnMHgnICsgaGV4LnN1YnN0cmluZyggNCwgNiApICk7XG5cdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdGNhc2UgVEVYVFVSRV9UWVBFLlJHQjpcblx0XHRcdFx0XHRcdC8vIFJHQiB0ZXh0dXJlOiBQaXhlbHMgaW4gYSB0aHJlZS1jb21wb25lbnQgaW1hZ2Ugc3BlY2lmeSB0aGUgcmVkIGNvbXBvbmVudCBpbiB0aGUgZmlyc3QgKGhpZ2gpIGJ5dGUsIGZvbGxvd2VkIGJ5IHRoZSBncmVlbiBhbmQgYmx1ZSBjb21wb25lbnRzXG5cdFx0XHRcdFx0XHRjb2xvci5yID0gcGFyc2VJbnQoICcweCcgKyBoZXguc3Vic3RyaW5nKCAyLCA0ICkgKTtcblx0XHRcdFx0XHRcdGNvbG9yLmcgPSBwYXJzZUludCggJzB4JyArIGhleC5zdWJzdHJpbmcoIDQsIDYgKSApO1xuXHRcdFx0XHRcdFx0Y29sb3IuYiA9IHBhcnNlSW50KCAnMHgnICsgaGV4LnN1YnN0cmluZyggNiwgOCApICk7XG5cdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdGNhc2UgVEVYVFVSRV9UWVBFLlJHQkE6XG5cdFx0XHRcdFx0XHQvLyBSR0JBIHRleHR1cmU6IEZvdXItY29tcG9uZW50IGltYWdlcyBzcGVjaWZ5IHRoZSBhbHBoYSBvcGFjaXR5IGJ5dGUgYWZ0ZXIgcmVkL2dyZWVuL2JsdWVcblx0XHRcdFx0XHRcdGNvbG9yLnIgPSBwYXJzZUludCggJzB4JyArIGhleC5zdWJzdHJpbmcoIDIsIDQgKSApO1xuXHRcdFx0XHRcdFx0Y29sb3IuZyA9IHBhcnNlSW50KCAnMHgnICsgaGV4LnN1YnN0cmluZyggNCwgNiApICk7XG5cdFx0XHRcdFx0XHRjb2xvci5iID0gcGFyc2VJbnQoICcweCcgKyBoZXguc3Vic3RyaW5nKCA2LCA4ICkgKTtcblx0XHRcdFx0XHRcdGNvbG9yLmEgPSBwYXJzZUludCggJzB4JyArIGhleC5zdWJzdHJpbmcoIDgsIDEwICkgKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0ZGVmYXVsdDpcblxuXHRcdFx0XHR9XG5cblx0XHRcdH1cblxuXHRcdFx0ZnVuY3Rpb24gZ2V0VGV4dHVyZVR5cGUoIG51bV9jb21wb25lbnRzICkge1xuXG5cdFx0XHRcdHZhciB0eXBlO1xuXG5cdFx0XHRcdHN3aXRjaCAoIG51bV9jb21wb25lbnRzICkge1xuXG5cdFx0XHRcdFx0Y2FzZSAxOlxuXHRcdFx0XHRcdFx0dHlwZSA9IFRFWFRVUkVfVFlQRS5JTlRFTlNJVFk7XG5cdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdGNhc2UgMjpcblx0XHRcdFx0XHRcdHR5cGUgPSBURVhUVVJFX1RZUEUuSU5URU5TSVRZX0FMUEhBO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRjYXNlIDM6XG5cdFx0XHRcdFx0XHR0eXBlID0gVEVYVFVSRV9UWVBFLlJHQjtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0Y2FzZSA0OlxuXHRcdFx0XHRcdFx0dHlwZSA9IFRFWFRVUkVfVFlQRS5SR0JBO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRkZWZhdWx0OlxuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gdHlwZTtcblxuXHRcdFx0fVxuXG5cdFx0XHRmdW5jdGlvbiBidWlsZFBpeGVsVGV4dHVyZU5vZGUoIG5vZGUgKSB7XG5cblx0XHRcdFx0dmFyIHRleHR1cmU7XG5cdFx0XHRcdHZhciB3cmFwUyA9IFJlcGVhdFdyYXBwaW5nO1xuXHRcdFx0XHR2YXIgd3JhcFQgPSBSZXBlYXRXcmFwcGluZztcblxuXHRcdFx0XHR2YXIgZmllbGRzID0gbm9kZS5maWVsZHM7XG5cblx0XHRcdFx0Zm9yICggdmFyIGkgPSAwLCBsID0gZmllbGRzLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG5cblx0XHRcdFx0XHR2YXIgZmllbGQgPSBmaWVsZHNbIGkgXTtcblx0XHRcdFx0XHR2YXIgZmllbGROYW1lID0gZmllbGQubmFtZTtcblx0XHRcdFx0XHR2YXIgZmllbGRWYWx1ZXMgPSBmaWVsZC52YWx1ZXM7XG5cblx0XHRcdFx0XHRzd2l0Y2ggKCBmaWVsZE5hbWUgKSB7XG5cblx0XHRcdFx0XHRcdGNhc2UgJ2ltYWdlJzpcblx0XHRcdFx0XHRcdFx0dmFyIHdpZHRoID0gZmllbGRWYWx1ZXNbIDAgXTtcblx0XHRcdFx0XHRcdFx0dmFyIGhlaWdodCA9IGZpZWxkVmFsdWVzWyAxIF07XG5cdFx0XHRcdFx0XHRcdHZhciBudW1fY29tcG9uZW50cyA9IGZpZWxkVmFsdWVzWyAyIF07XG5cblx0XHRcdFx0XHRcdFx0dmFyIHVzZUFscGhhID0gKCBudW1fY29tcG9uZW50cyA9PT0gMiB8fCBudW1fY29tcG9uZW50cyA9PT0gNCApO1xuXHRcdFx0XHRcdFx0XHR2YXIgdGV4dHVyZVR5cGUgPSBnZXRUZXh0dXJlVHlwZSggbnVtX2NvbXBvbmVudHMgKTtcblxuXHRcdFx0XHRcdFx0XHR2YXIgc2l6ZSA9ICggKCB1c2VBbHBoYSA9PT0gdHJ1ZSApID8gNCA6IDMgKSAqICggd2lkdGggKiBoZWlnaHQgKTtcblx0XHRcdFx0XHRcdFx0dmFyIGRhdGEgPSBuZXcgVWludDhBcnJheSggc2l6ZSApO1xuXG5cdFx0XHRcdFx0XHRcdHZhciBjb2xvciA9IHsgcjogMCwgZzogMCwgYjogMCwgYTogMCB9O1xuXG5cdFx0XHRcdFx0XHRcdGZvciAoIHZhciBqID0gMywgayA9IDAsIGpsID0gZmllbGRWYWx1ZXMubGVuZ3RoOyBqIDwgamw7IGogKyssIGsgKysgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHRwYXJzZUhleENvbG9yKCBmaWVsZFZhbHVlc1sgaiBdLCB0ZXh0dXJlVHlwZSwgY29sb3IgKTtcblxuXHRcdFx0XHRcdFx0XHRcdGlmICggdXNlQWxwaGEgPT09IHRydWUgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHRcdHZhciBzdHJpZGUgPSBrICogNDtcblxuXHRcdFx0XHRcdFx0XHRcdFx0ZGF0YVsgc3RyaWRlICsgMCBdID0gY29sb3Iucjtcblx0XHRcdFx0XHRcdFx0XHRcdGRhdGFbIHN0cmlkZSArIDEgXSA9IGNvbG9yLmc7XG5cdFx0XHRcdFx0XHRcdFx0XHRkYXRhWyBzdHJpZGUgKyAyIF0gPSBjb2xvci5iO1xuXHRcdFx0XHRcdFx0XHRcdFx0ZGF0YVsgc3RyaWRlICsgMyBdID0gY29sb3IuYTtcblxuXHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRcdFx0XHRcdHZhciBzdHJpZGUgPSBrICogMztcblxuXHRcdFx0XHRcdFx0XHRcdFx0ZGF0YVsgc3RyaWRlICsgMCBdID0gY29sb3Iucjtcblx0XHRcdFx0XHRcdFx0XHRcdGRhdGFbIHN0cmlkZSArIDEgXSA9IGNvbG9yLmc7XG5cdFx0XHRcdFx0XHRcdFx0XHRkYXRhWyBzdHJpZGUgKyAyIF0gPSBjb2xvci5iO1xuXG5cdFx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHR0ZXh0dXJlID0gbmV3IERhdGFUZXh0dXJlKCBkYXRhLCB3aWR0aCwgaGVpZ2h0LCAoIHVzZUFscGhhID09PSB0cnVlICkgPyBSR0JBRm9ybWF0IDogUkdCRm9ybWF0ICk7XG5cdFx0XHRcdFx0XHRcdHRleHR1cmUuX190eXBlID0gdGV4dHVyZVR5cGU7IC8vIG5lZWRlZCBmb3IgbWF0ZXJpYWwgbW9kaWZpY2F0aW9uc1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdFx0Y2FzZSAncmVwZWF0Uyc6XG5cdFx0XHRcdFx0XHRcdGlmICggZmllbGRWYWx1ZXNbIDAgXSA9PT0gZmFsc2UgKSB3cmFwUyA9IENsYW1wVG9FZGdlV3JhcHBpbmc7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0XHRjYXNlICdyZXBlYXRUJzpcblx0XHRcdFx0XHRcdFx0aWYgKCBmaWVsZFZhbHVlc1sgMCBdID09PSBmYWxzZSApIHdyYXBUID0gQ2xhbXBUb0VkZ2VXcmFwcGluZztcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0XHRcdGNvbnNvbGUud2FybiggJ1RIUkVFLlZSTUxMb2FkZXI6IFVua25vd24gZmllbGQ6JywgZmllbGROYW1lICk7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoIHRleHR1cmUgKSB7XG5cblx0XHRcdFx0XHR0ZXh0dXJlLndyYXBTID0gd3JhcFM7XG5cdFx0XHRcdFx0dGV4dHVyZS53cmFwVCA9IHdyYXBUO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gdGV4dHVyZTtcblxuXHRcdFx0fVxuXG5cdFx0XHRmdW5jdGlvbiBidWlsZEltYWdlVGV4dHVyZU5vZGUoIG5vZGUgKSB7XG5cblx0XHRcdFx0dmFyIHRleHR1cmU7XG5cdFx0XHRcdHZhciB3cmFwUyA9IFJlcGVhdFdyYXBwaW5nO1xuXHRcdFx0XHR2YXIgd3JhcFQgPSBSZXBlYXRXcmFwcGluZztcblxuXHRcdFx0XHR2YXIgZmllbGRzID0gbm9kZS5maWVsZHM7XG5cblx0XHRcdFx0Zm9yICggdmFyIGkgPSAwLCBsID0gZmllbGRzLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG5cblx0XHRcdFx0XHR2YXIgZmllbGQgPSBmaWVsZHNbIGkgXTtcblx0XHRcdFx0XHR2YXIgZmllbGROYW1lID0gZmllbGQubmFtZTtcblx0XHRcdFx0XHR2YXIgZmllbGRWYWx1ZXMgPSBmaWVsZC52YWx1ZXM7XG5cblx0XHRcdFx0XHRzd2l0Y2ggKCBmaWVsZE5hbWUgKSB7XG5cblx0XHRcdFx0XHRcdGNhc2UgJ3VybCc6XG5cdFx0XHRcdFx0XHRcdHZhciB1cmwgPSBmaWVsZFZhbHVlc1sgMCBdO1xuXHRcdFx0XHRcdFx0XHRpZiAoIHVybCApIHRleHR1cmUgPSB0ZXh0dXJlTG9hZGVyLmxvYWQoIHVybCApO1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdFx0Y2FzZSAncmVwZWF0Uyc6XG5cdFx0XHRcdFx0XHRcdGlmICggZmllbGRWYWx1ZXNbIDAgXSA9PT0gZmFsc2UgKSB3cmFwUyA9IENsYW1wVG9FZGdlV3JhcHBpbmc7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0XHRjYXNlICdyZXBlYXRUJzpcblx0XHRcdFx0XHRcdFx0aWYgKCBmaWVsZFZhbHVlc1sgMCBdID09PSBmYWxzZSApIHdyYXBUID0gQ2xhbXBUb0VkZ2VXcmFwcGluZztcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0XHRcdGNvbnNvbGUud2FybiggJ1RIUkVFLlZSTUxMb2FkZXI6IFVua25vd24gZmllbGQ6JywgZmllbGROYW1lICk7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoIHRleHR1cmUgKSB7XG5cblx0XHRcdFx0XHR0ZXh0dXJlLndyYXBTID0gd3JhcFM7XG5cdFx0XHRcdFx0dGV4dHVyZS53cmFwVCA9IHdyYXBUO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gdGV4dHVyZTtcblxuXHRcdFx0fVxuXG5cdFx0XHRmdW5jdGlvbiBidWlsZFRleHR1cmVUcmFuc2Zvcm1Ob2RlKCBub2RlICkge1xuXG5cdFx0XHRcdHZhciB0cmFuc2Zvcm1EYXRhID0ge1xuXHRcdFx0XHRcdGNlbnRlcjogbmV3IFZlY3RvcjIoKSxcblx0XHRcdFx0XHRyb3RhdGlvbjogbmV3IFZlY3RvcjIoKSxcblx0XHRcdFx0XHRzY2FsZTogbmV3IFZlY3RvcjIoKSxcblx0XHRcdFx0XHR0cmFuc2xhdGlvbjogbmV3IFZlY3RvcjIoKVxuXHRcdFx0XHR9O1xuXG5cdFx0XHRcdHZhciBmaWVsZHMgPSBub2RlLmZpZWxkcztcblxuXHRcdFx0XHRmb3IgKCB2YXIgaSA9IDAsIGwgPSBmaWVsZHMubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcblxuXHRcdFx0XHRcdHZhciBmaWVsZCA9IGZpZWxkc1sgaSBdO1xuXHRcdFx0XHRcdHZhciBmaWVsZE5hbWUgPSBmaWVsZC5uYW1lO1xuXHRcdFx0XHRcdHZhciBmaWVsZFZhbHVlcyA9IGZpZWxkLnZhbHVlcztcblxuXHRcdFx0XHRcdHN3aXRjaCAoIGZpZWxkTmFtZSApIHtcblxuXHRcdFx0XHRcdFx0Y2FzZSAnY2VudGVyJzpcblx0XHRcdFx0XHRcdFx0dHJhbnNmb3JtRGF0YS5jZW50ZXIuc2V0KCBmaWVsZFZhbHVlc1sgMCBdLCBmaWVsZFZhbHVlc1sgMSBdICk7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0XHRjYXNlICdyb3RhdGlvbic6XG5cdFx0XHRcdFx0XHRcdHRyYW5zZm9ybURhdGEucm90YXRpb24gPSBmaWVsZFZhbHVlc1sgMCBdO1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdFx0Y2FzZSAnc2NhbGUnOlxuXHRcdFx0XHRcdFx0XHR0cmFuc2Zvcm1EYXRhLnNjYWxlLnNldCggZmllbGRWYWx1ZXNbIDAgXSwgZmllbGRWYWx1ZXNbIDEgXSApO1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdFx0Y2FzZSAndHJhbnNsYXRpb24nOlxuXHRcdFx0XHRcdFx0XHR0cmFuc2Zvcm1EYXRhLnRyYW5zbGF0aW9uLnNldCggZmllbGRWYWx1ZXNbIDAgXSwgZmllbGRWYWx1ZXNbIDEgXSApO1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHRcdFx0Y29uc29sZS53YXJuKCAnVEhSRUUuVlJNTExvYWRlcjogVW5rbm93biBmaWVsZDonLCBmaWVsZE5hbWUgKTtcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiB0cmFuc2Zvcm1EYXRhO1xuXG5cdFx0XHR9XG5cblx0XHRcdGZ1bmN0aW9uIGJ1aWxkR2VvbWV0cmljTm9kZSggbm9kZSApIHtcblxuXHRcdFx0XHRyZXR1cm4gbm9kZS5maWVsZHNbIDAgXS52YWx1ZXM7XG5cblx0XHRcdH1cblxuXHRcdFx0ZnVuY3Rpb24gYnVpbGRXb3JsZEluZm9Ob2RlKCBub2RlICkge1xuXG5cdFx0XHRcdHZhciB3b3JsZEluZm8gPSB7fTtcblxuXHRcdFx0XHR2YXIgZmllbGRzID0gbm9kZS5maWVsZHM7XG5cblx0XHRcdFx0Zm9yICggdmFyIGkgPSAwLCBsID0gZmllbGRzLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG5cblx0XHRcdFx0XHR2YXIgZmllbGQgPSBmaWVsZHNbIGkgXTtcblx0XHRcdFx0XHR2YXIgZmllbGROYW1lID0gZmllbGQubmFtZTtcblx0XHRcdFx0XHR2YXIgZmllbGRWYWx1ZXMgPSBmaWVsZC52YWx1ZXM7XG5cblx0XHRcdFx0XHRzd2l0Y2ggKCBmaWVsZE5hbWUgKSB7XG5cblx0XHRcdFx0XHRcdGNhc2UgJ3RpdGxlJzpcblx0XHRcdFx0XHRcdFx0d29ybGRJbmZvLnRpdGxlID0gZmllbGRWYWx1ZXNbIDAgXTtcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRcdGNhc2UgJ2luZm8nOlxuXHRcdFx0XHRcdFx0XHR3b3JsZEluZm8uaW5mbyA9IGZpZWxkVmFsdWVzO1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHRcdFx0Y29uc29sZS53YXJuKCAnVEhSRUUuVlJNTExvYWRlcjogVW5rbm93biBmaWVsZDonLCBmaWVsZE5hbWUgKTtcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiB3b3JsZEluZm87XG5cblx0XHRcdH1cblxuXHRcdFx0ZnVuY3Rpb24gYnVpbGRJbmRleGVkRmFjZVNldE5vZGUoIG5vZGUgKSB7XG5cblx0XHRcdFx0dmFyIGNvbG9yLCBjb29yZCwgbm9ybWFsLCB0ZXhDb29yZDtcblx0XHRcdFx0dmFyIGNjdyA9IHRydWUsIHNvbGlkID0gdHJ1ZSwgY3JlYXNlQW5nbGUgPSAwO1xuXHRcdFx0XHR2YXIgY29sb3JJbmRleCwgY29vcmRJbmRleCwgbm9ybWFsSW5kZXgsIHRleENvb3JkSW5kZXg7XG5cdFx0XHRcdHZhciBjb2xvclBlclZlcnRleCA9IHRydWUsIG5vcm1hbFBlclZlcnRleCA9IHRydWU7XG5cblx0XHRcdFx0dmFyIGZpZWxkcyA9IG5vZGUuZmllbGRzO1xuXG5cdFx0XHRcdGZvciAoIHZhciBpID0gMCwgbCA9IGZpZWxkcy5sZW5ndGg7IGkgPCBsOyBpICsrICkge1xuXG5cdFx0XHRcdFx0dmFyIGZpZWxkID0gZmllbGRzWyBpIF07XG5cdFx0XHRcdFx0dmFyIGZpZWxkTmFtZSA9IGZpZWxkLm5hbWU7XG5cdFx0XHRcdFx0dmFyIGZpZWxkVmFsdWVzID0gZmllbGQudmFsdWVzO1xuXG5cdFx0XHRcdFx0c3dpdGNoICggZmllbGROYW1lICkge1xuXG5cdFx0XHRcdFx0XHRjYXNlICdjb2xvcic6XG5cdFx0XHRcdFx0XHRcdHZhciBjb2xvck5vZGUgPSBmaWVsZFZhbHVlc1sgMCBdO1xuXG5cdFx0XHRcdFx0XHRcdGlmICggY29sb3JOb2RlICE9PSBudWxsICkge1xuXG5cdFx0XHRcdFx0XHRcdFx0Y29sb3IgPSBnZXROb2RlKCBjb2xvck5vZGUgKTtcblxuXHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRcdGNhc2UgJ2Nvb3JkJzpcblx0XHRcdFx0XHRcdFx0dmFyIGNvb3JkTm9kZSA9IGZpZWxkVmFsdWVzWyAwIF07XG5cblx0XHRcdFx0XHRcdFx0aWYgKCBjb29yZE5vZGUgIT09IG51bGwgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHRjb29yZCA9IGdldE5vZGUoIGNvb3JkTm9kZSApO1xuXG5cdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdFx0Y2FzZSAnbm9ybWFsJzpcblx0XHRcdFx0XHRcdFx0dmFyIG5vcm1hbE5vZGUgPSBmaWVsZFZhbHVlc1sgMCBdO1xuXG5cdFx0XHRcdFx0XHRcdGlmICggbm9ybWFsTm9kZSAhPT0gbnVsbCApIHtcblxuXHRcdFx0XHRcdFx0XHRcdG5vcm1hbCA9IGdldE5vZGUoIG5vcm1hbE5vZGUgKTtcblxuXHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRcdGNhc2UgJ3RleENvb3JkJzpcblx0XHRcdFx0XHRcdFx0dmFyIHRleENvb3JkTm9kZSA9IGZpZWxkVmFsdWVzWyAwIF07XG5cblx0XHRcdFx0XHRcdFx0aWYgKCB0ZXhDb29yZE5vZGUgIT09IG51bGwgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHR0ZXhDb29yZCA9IGdldE5vZGUoIHRleENvb3JkTm9kZSApO1xuXG5cdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdFx0Y2FzZSAnY2N3Jzpcblx0XHRcdFx0XHRcdFx0Y2N3ID0gZmllbGRWYWx1ZXNbIDAgXTtcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRcdGNhc2UgJ2NvbG9ySW5kZXgnOlxuXHRcdFx0XHRcdFx0XHRjb2xvckluZGV4ID0gZmllbGRWYWx1ZXM7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0XHRjYXNlICdjb2xvclBlclZlcnRleCc6XG5cdFx0XHRcdFx0XHRcdGNvbG9yUGVyVmVydGV4ID0gZmllbGRWYWx1ZXNbIDAgXTtcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRcdGNhc2UgJ2NvbnZleCc6XG5cdFx0XHRcdFx0XHRcdC8vIGZpZWxkIG5vdCBzdXBwb3J0ZWRcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRcdGNhc2UgJ2Nvb3JkSW5kZXgnOlxuXHRcdFx0XHRcdFx0XHRjb29yZEluZGV4ID0gZmllbGRWYWx1ZXM7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0XHRjYXNlICdjcmVhc2VBbmdsZSc6XG5cdFx0XHRcdFx0XHRcdGNyZWFzZUFuZ2xlID0gZmllbGRWYWx1ZXNbIDAgXTtcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRcdGNhc2UgJ25vcm1hbEluZGV4Jzpcblx0XHRcdFx0XHRcdFx0bm9ybWFsSW5kZXggPSBmaWVsZFZhbHVlcztcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRcdGNhc2UgJ25vcm1hbFBlclZlcnRleCc6XG5cdFx0XHRcdFx0XHRcdG5vcm1hbFBlclZlcnRleCA9IGZpZWxkVmFsdWVzWyAwIF07XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0XHRjYXNlICdzb2xpZCc6XG5cdFx0XHRcdFx0XHRcdHNvbGlkID0gZmllbGRWYWx1ZXNbIDAgXTtcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRcdGNhc2UgJ3RleENvb3JkSW5kZXgnOlxuXHRcdFx0XHRcdFx0XHR0ZXhDb29yZEluZGV4ID0gZmllbGRWYWx1ZXM7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRcdFx0XHRjb25zb2xlLndhcm4oICdUSFJFRS5WUk1MTG9hZGVyOiBVbmtub3duIGZpZWxkOicsIGZpZWxkTmFtZSApO1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKCBjb29yZEluZGV4ID09PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0XHRjb25zb2xlLndhcm4oICdUSFJFRS5WUk1MTG9hZGVyOiBNaXNzaW5nIGNvb3JkSW5kZXguJyApO1xuXG5cdFx0XHRcdFx0cmV0dXJuIG5ldyBCdWZmZXJHZW9tZXRyeSgpOyAvLyBoYW5kbGUgVlJNTCBmaWxlcyB3aXRoIGluY29tcGxldGUgZ2VvbWV0cnkgZGVmaW5pdGlvblxuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHR2YXIgdHJpYW5ndWxhdGVkQ29vcmRJbmRleCA9IHRyaWFuZ3VsYXRlRmFjZUluZGV4KCBjb29yZEluZGV4LCBjY3cgKTtcblxuXHRcdFx0XHR2YXIgcG9zaXRpb25BdHRyaWJ1dGU7XG5cdFx0XHRcdHZhciBjb2xvckF0dHJpYnV0ZTtcblx0XHRcdFx0dmFyIG5vcm1hbEF0dHJpYnV0ZTtcblx0XHRcdFx0dmFyIHV2QXR0cmlidXRlO1xuXG5cdFx0XHRcdGlmICggY29sb3IgKSB7XG5cblx0XHRcdFx0XHRpZiAoIGNvbG9yUGVyVmVydGV4ID09PSB0cnVlICkge1xuXG5cdFx0XHRcdFx0XHRpZiAoIGNvbG9ySW5kZXggJiYgY29sb3JJbmRleC5sZW5ndGggPiAwICkge1xuXG5cdFx0XHRcdFx0XHRcdC8vIGlmIHRoZSBjb2xvckluZGV4IGZpZWxkIGlzIG5vdCBlbXB0eSwgdGhlbiBpdCBpcyB1c2VkIHRvIGNob29zZSBjb2xvcnMgZm9yIGVhY2ggdmVydGV4IG9mIHRoZSBJbmRleGVkRmFjZVNldC5cblxuXHRcdFx0XHRcdFx0XHR2YXIgdHJpYW5ndWxhdGVkQ29sb3JJbmRleCA9IHRyaWFuZ3VsYXRlRmFjZUluZGV4KCBjb2xvckluZGV4LCBjY3cgKTtcblx0XHRcdFx0XHRcdFx0Y29sb3JBdHRyaWJ1dGUgPSBjb21wdXRlQXR0cmlidXRlRnJvbUluZGV4ZWREYXRhKCB0cmlhbmd1bGF0ZWRDb29yZEluZGV4LCB0cmlhbmd1bGF0ZWRDb2xvckluZGV4LCBjb2xvciwgMyApO1xuXG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0XHRcdC8vIGlmIHRoZSBjb2xvckluZGV4IGZpZWxkIGlzIGVtcHR5LCB0aGVuIHRoZSBjb29yZEluZGV4IGZpZWxkIGlzIHVzZWQgdG8gY2hvb3NlIGNvbG9ycyBmcm9tIHRoZSBDb2xvciBub2RlXG5cblx0XHRcdFx0XHRcdFx0Y29sb3JBdHRyaWJ1dGUgPSB0b05vbkluZGV4ZWRBdHRyaWJ1dGUoIHRyaWFuZ3VsYXRlZENvb3JkSW5kZXgsIG5ldyBGbG9hdDMyQnVmZmVyQXR0cmlidXRlKCBjb2xvciwgMyApICk7XG5cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRcdGlmICggY29sb3JJbmRleCAmJiBjb2xvckluZGV4Lmxlbmd0aCA+IDAgKSB7XG5cblx0XHRcdFx0XHRcdFx0Ly8gaWYgdGhlIGNvbG9ySW5kZXggZmllbGQgaXMgbm90IGVtcHR5LCB0aGVuIHRoZXkgYXJlIHVzZWQgdG8gY2hvb3NlIG9uZSBjb2xvciBmb3IgZWFjaCBmYWNlIG9mIHRoZSBJbmRleGVkRmFjZVNldFxuXG5cdFx0XHRcdFx0XHRcdHZhciBmbGF0dGVuRmFjZUNvbG9ycyA9IGZsYXR0ZW5EYXRhKCBjb2xvciwgY29sb3JJbmRleCApO1xuXHRcdFx0XHRcdFx0XHR2YXIgdHJpYW5ndWxhdGVkRmFjZUNvbG9ycyA9IHRyaWFuZ3VsYXRlRmFjZURhdGEoIGZsYXR0ZW5GYWNlQ29sb3JzLCBjb29yZEluZGV4ICk7XG5cdFx0XHRcdFx0XHRcdGNvbG9yQXR0cmlidXRlID0gY29tcHV0ZUF0dHJpYnV0ZUZyb21GYWNlRGF0YSggdHJpYW5ndWxhdGVkQ29vcmRJbmRleCwgdHJpYW5ndWxhdGVkRmFjZUNvbG9ycyApO1xuXG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0XHRcdC8vIGlmIHRoZSBjb2xvckluZGV4IGZpZWxkIGlzIGVtcHR5LCB0aGVuIHRoZSBjb2xvciBhcmUgYXBwbGllZCB0byBlYWNoIGZhY2Ugb2YgdGhlIEluZGV4ZWRGYWNlU2V0IGluIG9yZGVyXG5cblx0XHRcdFx0XHRcdFx0dmFyIHRyaWFuZ3VsYXRlZEZhY2VDb2xvcnMgPSB0cmlhbmd1bGF0ZUZhY2VEYXRhKCBjb2xvciwgY29vcmRJbmRleCApO1xuXHRcdFx0XHRcdFx0XHRjb2xvckF0dHJpYnV0ZSA9IGNvbXB1dGVBdHRyaWJ1dGVGcm9tRmFjZURhdGEoIHRyaWFuZ3VsYXRlZENvb3JkSW5kZXgsIHRyaWFuZ3VsYXRlZEZhY2VDb2xvcnMgKTtcblxuXG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmICggbm9ybWFsICkge1xuXG5cdFx0XHRcdFx0aWYgKCBub3JtYWxQZXJWZXJ0ZXggPT09IHRydWUgKSB7XG5cblx0XHRcdFx0XHRcdC8vIGNvbnNpZGVyIHZlcnRleCBub3JtYWxzXG5cblx0XHRcdFx0XHRcdGlmICggbm9ybWFsSW5kZXggJiYgbm9ybWFsSW5kZXgubGVuZ3RoID4gMCApIHtcblxuXHRcdFx0XHRcdFx0XHQvLyBpZiB0aGUgbm9ybWFsSW5kZXggZmllbGQgaXMgbm90IGVtcHR5LCB0aGVuIGl0IGlzIHVzZWQgdG8gY2hvb3NlIG5vcm1hbHMgZm9yIGVhY2ggdmVydGV4IG9mIHRoZSBJbmRleGVkRmFjZVNldC5cblxuXHRcdFx0XHRcdFx0XHR2YXIgdHJpYW5ndWxhdGVkTm9ybWFsSW5kZXggPSB0cmlhbmd1bGF0ZUZhY2VJbmRleCggbm9ybWFsSW5kZXgsIGNjdyApO1xuXHRcdFx0XHRcdFx0XHRub3JtYWxBdHRyaWJ1dGUgPSBjb21wdXRlQXR0cmlidXRlRnJvbUluZGV4ZWREYXRhKCB0cmlhbmd1bGF0ZWRDb29yZEluZGV4LCB0cmlhbmd1bGF0ZWROb3JtYWxJbmRleCwgbm9ybWFsLCAzICk7XG5cblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRcdFx0Ly8gaWYgdGhlIG5vcm1hbEluZGV4IGZpZWxkIGlzIGVtcHR5LCB0aGVuIHRoZSBjb29yZEluZGV4IGZpZWxkIGlzIHVzZWQgdG8gY2hvb3NlIG5vcm1hbHMgZnJvbSB0aGUgTm9ybWFsIG5vZGVcblxuXHRcdFx0XHRcdFx0XHRub3JtYWxBdHRyaWJ1dGUgPSB0b05vbkluZGV4ZWRBdHRyaWJ1dGUoIHRyaWFuZ3VsYXRlZENvb3JkSW5kZXgsIG5ldyBGbG9hdDMyQnVmZmVyQXR0cmlidXRlKCBub3JtYWwsIDMgKSApO1xuXG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0XHQvLyBjb25zaWRlciBmYWNlIG5vcm1hbHNcblxuXHRcdFx0XHRcdFx0aWYgKCBub3JtYWxJbmRleCAmJiBub3JtYWxJbmRleC5sZW5ndGggPiAwICkge1xuXG5cdFx0XHRcdFx0XHRcdC8vIGlmIHRoZSBub3JtYWxJbmRleCBmaWVsZCBpcyBub3QgZW1wdHksIHRoZW4gdGhleSBhcmUgdXNlZCB0byBjaG9vc2Ugb25lIG5vcm1hbCBmb3IgZWFjaCBmYWNlIG9mIHRoZSBJbmRleGVkRmFjZVNldFxuXG5cdFx0XHRcdFx0XHRcdHZhciBmbGF0dGVuRmFjZU5vcm1hbHMgPSBmbGF0dGVuRGF0YSggbm9ybWFsLCBub3JtYWxJbmRleCApO1xuXHRcdFx0XHRcdFx0XHR2YXIgdHJpYW5ndWxhdGVkRmFjZU5vcm1hbHMgPSB0cmlhbmd1bGF0ZUZhY2VEYXRhKCBmbGF0dGVuRmFjZU5vcm1hbHMsIGNvb3JkSW5kZXggKTtcblx0XHRcdFx0XHRcdFx0bm9ybWFsQXR0cmlidXRlID0gY29tcHV0ZUF0dHJpYnV0ZUZyb21GYWNlRGF0YSggdHJpYW5ndWxhdGVkQ29vcmRJbmRleCwgdHJpYW5ndWxhdGVkRmFjZU5vcm1hbHMgKTtcblxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdFx0XHQvLyBpZiB0aGUgbm9ybWFsSW5kZXggZmllbGQgaXMgZW1wdHksIHRoZW4gdGhlIG5vcm1hbHMgYXJlIGFwcGxpZWQgdG8gZWFjaCBmYWNlIG9mIHRoZSBJbmRleGVkRmFjZVNldCBpbiBvcmRlclxuXG5cdFx0XHRcdFx0XHRcdHZhciB0cmlhbmd1bGF0ZWRGYWNlTm9ybWFscyA9IHRyaWFuZ3VsYXRlRmFjZURhdGEoIG5vcm1hbCwgY29vcmRJbmRleCApO1xuXHRcdFx0XHRcdFx0XHRub3JtYWxBdHRyaWJ1dGUgPSBjb21wdXRlQXR0cmlidXRlRnJvbUZhY2VEYXRhKCB0cmlhbmd1bGF0ZWRDb29yZEluZGV4LCB0cmlhbmd1bGF0ZWRGYWNlTm9ybWFscyApO1xuXG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdC8vIGlmIHRoZSBub3JtYWwgZmllbGQgaXMgTlVMTCwgdGhlbiB0aGUgbG9hZGVyIHNob3VsZCBhdXRvbWF0aWNhbGx5IGdlbmVyYXRlIG5vcm1hbHMsIHVzaW5nIGNyZWFzZUFuZ2xlIHRvIGRldGVybWluZSBpZiBhbmQgaG93IG5vcm1hbHMgYXJlIHNtb290aGVkIGFjcm9zcyBzaGFyZWQgdmVydGljZXNcblxuXHRcdFx0XHRcdG5vcm1hbEF0dHJpYnV0ZSA9IGNvbXB1dGVOb3JtYWxBdHRyaWJ1dGUoIHRyaWFuZ3VsYXRlZENvb3JkSW5kZXgsIGNvb3JkLCBjcmVhc2VBbmdsZSApO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoIHRleENvb3JkICkge1xuXG5cdFx0XHRcdFx0Ly8gdGV4dHVyZSBjb29yZGluYXRlcyBhcmUgYWx3YXlzIGRlZmluZWQgb24gdmVydGV4IGxldmVsXG5cblx0XHRcdFx0XHRpZiAoIHRleENvb3JkSW5kZXggJiYgdGV4Q29vcmRJbmRleC5sZW5ndGggPiAwICkge1xuXG5cdFx0XHRcdFx0XHQvLyBpZiB0aGUgdGV4Q29vcmRJbmRleCBmaWVsZCBpcyBub3QgZW1wdHksIHRoZW4gaXQgaXMgdXNlZCB0byBjaG9vc2UgdGV4dHVyZSBjb29yZGluYXRlcyBmb3IgZWFjaCB2ZXJ0ZXggb2YgdGhlIEluZGV4ZWRGYWNlU2V0LlxuXG5cdFx0XHRcdFx0XHR2YXIgdHJpYW5ndWxhdGVkVGV4Q29vcmRJbmRleCA9IHRyaWFuZ3VsYXRlRmFjZUluZGV4KCB0ZXhDb29yZEluZGV4LCBjY3cgKTtcblx0XHRcdFx0XHRcdHV2QXR0cmlidXRlID0gY29tcHV0ZUF0dHJpYnV0ZUZyb21JbmRleGVkRGF0YSggdHJpYW5ndWxhdGVkQ29vcmRJbmRleCwgdHJpYW5ndWxhdGVkVGV4Q29vcmRJbmRleCwgdGV4Q29vcmQsIDIgKTtcblxuXG5cdFx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdFx0Ly8gaWYgdGhlIHRleENvb3JkSW5kZXggZmllbGQgaXMgZW1wdHksIHRoZW4gdGhlIGNvb3JkSW5kZXggYXJyYXkgaXMgdXNlZCB0byBjaG9vc2UgdGV4dHVyZSBjb29yZGluYXRlcyBmcm9tIHRoZSBUZXh0dXJlQ29vcmRpbmF0ZSBub2RlXG5cblx0XHRcdFx0XHRcdHV2QXR0cmlidXRlID0gdG9Ob25JbmRleGVkQXR0cmlidXRlKCB0cmlhbmd1bGF0ZWRDb29yZEluZGV4LCBuZXcgRmxvYXQzMkJ1ZmZlckF0dHJpYnV0ZSggdGV4Q29vcmQsIDIgKSApO1xuXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHR2YXIgZ2VvbWV0cnkgPSBuZXcgQnVmZmVyR2VvbWV0cnkoKTtcblx0XHRcdFx0cG9zaXRpb25BdHRyaWJ1dGUgPSB0b05vbkluZGV4ZWRBdHRyaWJ1dGUoIHRyaWFuZ3VsYXRlZENvb3JkSW5kZXgsIG5ldyBGbG9hdDMyQnVmZmVyQXR0cmlidXRlKCBjb29yZCwgMyApICk7XG5cblx0XHRcdFx0Z2VvbWV0cnkuc2V0QXR0cmlidXRlKCAncG9zaXRpb24nLCBwb3NpdGlvbkF0dHJpYnV0ZSApO1xuXHRcdFx0XHRnZW9tZXRyeS5zZXRBdHRyaWJ1dGUoICdub3JtYWwnLCBub3JtYWxBdHRyaWJ1dGUgKTtcblxuXHRcdFx0XHQvLyBvcHRpb25hbCBhdHRyaWJ1dGVzXG5cblx0XHRcdFx0aWYgKCBjb2xvckF0dHJpYnV0ZSApIGdlb21ldHJ5LnNldEF0dHJpYnV0ZSggJ2NvbG9yJywgY29sb3JBdHRyaWJ1dGUgKTtcblx0XHRcdFx0aWYgKCB1dkF0dHJpYnV0ZSApIGdlb21ldHJ5LnNldEF0dHJpYnV0ZSggJ3V2JywgdXZBdHRyaWJ1dGUgKTtcblxuXHRcdFx0XHQvLyBcInNvbGlkXCIgaW5mbHVlbmNlcyB0aGUgbWF0ZXJpYWwgc28gbGV0J3Mgc3RvcmUgaXQgZm9yIGxhdGVyIHVzZVxuXG5cdFx0XHRcdGdlb21ldHJ5Ll9zb2xpZCA9IHNvbGlkO1xuXHRcdFx0XHRnZW9tZXRyeS5fdHlwZSA9ICdtZXNoJztcblxuXHRcdFx0XHRyZXR1cm4gZ2VvbWV0cnk7XG5cblx0XHRcdH1cblxuXHRcdFx0ZnVuY3Rpb24gYnVpbGRJbmRleGVkTGluZVNldE5vZGUoIG5vZGUgKSB7XG5cblx0XHRcdFx0dmFyIGNvbG9yLCBjb29yZDtcblx0XHRcdFx0dmFyIGNvbG9ySW5kZXgsIGNvb3JkSW5kZXg7XG5cdFx0XHRcdHZhciBjb2xvclBlclZlcnRleCA9IHRydWU7XG5cblx0XHRcdFx0dmFyIGZpZWxkcyA9IG5vZGUuZmllbGRzO1xuXG5cdFx0XHRcdGZvciAoIHZhciBpID0gMCwgbCA9IGZpZWxkcy5sZW5ndGg7IGkgPCBsOyBpICsrICkge1xuXG5cdFx0XHRcdFx0dmFyIGZpZWxkID0gZmllbGRzWyBpIF07XG5cdFx0XHRcdFx0dmFyIGZpZWxkTmFtZSA9IGZpZWxkLm5hbWU7XG5cdFx0XHRcdFx0dmFyIGZpZWxkVmFsdWVzID0gZmllbGQudmFsdWVzO1xuXG5cdFx0XHRcdFx0c3dpdGNoICggZmllbGROYW1lICkge1xuXG5cdFx0XHRcdFx0XHRjYXNlICdjb2xvcic6XG5cdFx0XHRcdFx0XHRcdHZhciBjb2xvck5vZGUgPSBmaWVsZFZhbHVlc1sgMCBdO1xuXG5cdFx0XHRcdFx0XHRcdGlmICggY29sb3JOb2RlICE9PSBudWxsICkge1xuXG5cdFx0XHRcdFx0XHRcdFx0Y29sb3IgPSBnZXROb2RlKCBjb2xvck5vZGUgKTtcblxuXHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRcdGNhc2UgJ2Nvb3JkJzpcblx0XHRcdFx0XHRcdFx0dmFyIGNvb3JkTm9kZSA9IGZpZWxkVmFsdWVzWyAwIF07XG5cblx0XHRcdFx0XHRcdFx0aWYgKCBjb29yZE5vZGUgIT09IG51bGwgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHRjb29yZCA9IGdldE5vZGUoIGNvb3JkTm9kZSApO1xuXG5cdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdFx0Y2FzZSAnY29sb3JJbmRleCc6XG5cdFx0XHRcdFx0XHRcdGNvbG9ySW5kZXggPSBmaWVsZFZhbHVlcztcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRcdGNhc2UgJ2NvbG9yUGVyVmVydGV4Jzpcblx0XHRcdFx0XHRcdFx0Y29sb3JQZXJWZXJ0ZXggPSBmaWVsZFZhbHVlc1sgMCBdO1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdFx0Y2FzZSAnY29vcmRJbmRleCc6XG5cdFx0XHRcdFx0XHRcdGNvb3JkSW5kZXggPSBmaWVsZFZhbHVlcztcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0XHRcdGNvbnNvbGUud2FybiggJ1RIUkVFLlZSTUxMb2FkZXI6IFVua25vd24gZmllbGQ6JywgZmllbGROYW1lICk7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBidWlsZCBsaW5lc1xuXG5cdFx0XHRcdHZhciBjb2xvckF0dHJpYnV0ZTtcblxuXHRcdFx0XHR2YXIgZXhwYW5kZWRMaW5lSW5kZXggPSBleHBhbmRMaW5lSW5kZXgoIGNvb3JkSW5kZXggKTsgLy8gY3JlYXRlIGFuIGluZGV4IGZvciB0aHJlZS5qcydzIGxpbmVzZWdtZW50IHByaW1pdGl2ZVxuXG5cdFx0XHRcdGlmICggY29sb3IgKSB7XG5cblx0XHRcdFx0XHRpZiAoIGNvbG9yUGVyVmVydGV4ID09PSB0cnVlICkge1xuXG5cdFx0XHRcdFx0XHRpZiAoIGNvbG9ySW5kZXgubGVuZ3RoID4gMCApIHtcblxuXHRcdFx0XHRcdFx0XHQvLyBpZiB0aGUgY29sb3JJbmRleCBmaWVsZCBpcyBub3QgZW1wdHksIHRoZW4gb25lIGNvbG9yIGlzIHVzZWQgZm9yIGVhY2ggcG9seWxpbmUgb2YgdGhlIEluZGV4ZWRMaW5lU2V0LlxuXG5cdFx0XHRcdFx0XHRcdHZhciBleHBhbmRlZENvbG9ySW5kZXggPSBleHBhbmRMaW5lSW5kZXgoIGNvbG9ySW5kZXggKTsgLy8gY29tcHV0ZSBjb2xvcnMgZm9yIGVhY2ggbGluZSBzZWdtZW50IChyZW5kZXJpbmcgcHJpbWl0dmUpXG5cdFx0XHRcdFx0XHRcdGNvbG9yQXR0cmlidXRlID0gY29tcHV0ZUF0dHJpYnV0ZUZyb21JbmRleGVkRGF0YSggZXhwYW5kZWRMaW5lSW5kZXgsIGV4cGFuZGVkQ29sb3JJbmRleCwgY29sb3IsIDMgKTsgLy8gY29tcHV0ZSBkYXRhIG9uIHZlcnRleCBsZXZlbFxuXG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0XHRcdC8vIGlmIHRoZSBjb2xvckluZGV4IGZpZWxkIGlzIGVtcHR5LCB0aGVuIHRoZSBjb2xvcnMgYXJlIGFwcGxpZWQgdG8gZWFjaCBwb2x5bGluZSBvZiB0aGUgSW5kZXhlZExpbmVTZXQgaW4gb3JkZXIuXG5cblx0XHRcdFx0XHRcdFx0Y29sb3JBdHRyaWJ1dGUgPSB0b05vbkluZGV4ZWRBdHRyaWJ1dGUoIGV4cGFuZGVkTGluZUluZGV4LCBuZXcgRmxvYXQzMkJ1ZmZlckF0dHJpYnV0ZSggY29sb3IsIDMgKSApO1xuXG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0XHRpZiAoIGNvbG9ySW5kZXgubGVuZ3RoID4gMCApIHtcblxuXHRcdFx0XHRcdFx0XHQvLyBpZiB0aGUgY29sb3JJbmRleCBmaWVsZCBpcyBub3QgZW1wdHksIHRoZW4gY29sb3JzIGFyZSBhcHBsaWVkIHRvIGVhY2ggdmVydGV4IG9mIHRoZSBJbmRleGVkTGluZVNldFxuXG5cdFx0XHRcdFx0XHRcdHZhciBmbGF0dGVuTGluZUNvbG9ycyA9IGZsYXR0ZW5EYXRhKCBjb2xvciwgY29sb3JJbmRleCApOyAvLyBjb21wdXRlIGNvbG9ycyBmb3IgZWFjaCBWUk1MIHByaW1pdHZlXG5cdFx0XHRcdFx0XHRcdHZhciBleHBhbmRlZExpbmVDb2xvcnMgPSBleHBhbmRMaW5lRGF0YSggZmxhdHRlbkxpbmVDb2xvcnMsIGNvb3JkSW5kZXggKTsgLy8gY29tcHV0ZSBjb2xvcnMgZm9yIGVhY2ggbGluZSBzZWdtZW50IChyZW5kZXJpbmcgcHJpbWl0dmUpXG5cdFx0XHRcdFx0XHRcdGNvbG9yQXR0cmlidXRlID0gY29tcHV0ZUF0dHJpYnV0ZUZyb21MaW5lRGF0YSggZXhwYW5kZWRMaW5lSW5kZXgsIGV4cGFuZGVkTGluZUNvbG9ycyApOyAvLyBjb21wdXRlIGRhdGEgb24gdmVydGV4IGxldmVsXG5cblxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdFx0XHQvLyBpZiB0aGUgY29sb3JJbmRleCBmaWVsZCBpcyBlbXB0eSwgdGhlbiB0aGUgY29vcmRJbmRleCBmaWVsZCBpcyB1c2VkIHRvIGNob29zZSBjb2xvcnMgZnJvbSB0aGUgQ29sb3Igbm9kZVxuXG5cdFx0XHRcdFx0XHRcdHZhciBleHBhbmRlZExpbmVDb2xvcnMgPSBleHBhbmRMaW5lRGF0YSggY29sb3IsIGNvb3JkSW5kZXggKTsgLy8gY29tcHV0ZSBjb2xvcnMgZm9yIGVhY2ggbGluZSBzZWdtZW50IChyZW5kZXJpbmcgcHJpbWl0dmUpXG5cdFx0XHRcdFx0XHRcdGNvbG9yQXR0cmlidXRlID0gY29tcHV0ZUF0dHJpYnV0ZUZyb21MaW5lRGF0YSggZXhwYW5kZWRMaW5lSW5kZXgsIGV4cGFuZGVkTGluZUNvbG9ycyApOyAvLyBjb21wdXRlIGRhdGEgb24gdmVydGV4IGxldmVsXG5cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly9cblxuXHRcdFx0XHR2YXIgZ2VvbWV0cnkgPSBuZXcgQnVmZmVyR2VvbWV0cnkoKTtcblxuXHRcdFx0XHR2YXIgcG9zaXRpb25BdHRyaWJ1dGUgPSB0b05vbkluZGV4ZWRBdHRyaWJ1dGUoIGV4cGFuZGVkTGluZUluZGV4LCBuZXcgRmxvYXQzMkJ1ZmZlckF0dHJpYnV0ZSggY29vcmQsIDMgKSApO1xuXHRcdFx0XHRnZW9tZXRyeS5zZXRBdHRyaWJ1dGUoICdwb3NpdGlvbicsIHBvc2l0aW9uQXR0cmlidXRlICk7XG5cblx0XHRcdFx0aWYgKCBjb2xvckF0dHJpYnV0ZSApIGdlb21ldHJ5LnNldEF0dHJpYnV0ZSggJ2NvbG9yJywgY29sb3JBdHRyaWJ1dGUgKTtcblxuXHRcdFx0XHRnZW9tZXRyeS5fdHlwZSA9ICdsaW5lJztcblxuXHRcdFx0XHRyZXR1cm4gZ2VvbWV0cnk7XG5cblx0XHRcdH1cblxuXHRcdFx0ZnVuY3Rpb24gYnVpbGRQb2ludFNldE5vZGUoIG5vZGUgKSB7XG5cblx0XHRcdFx0dmFyIGdlb21ldHJ5O1xuXHRcdFx0XHR2YXIgY29sb3IsIGNvb3JkO1xuXG5cdFx0XHRcdHZhciBmaWVsZHMgPSBub2RlLmZpZWxkcztcblxuXHRcdFx0XHRmb3IgKCB2YXIgaSA9IDAsIGwgPSBmaWVsZHMubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcblxuXHRcdFx0XHRcdHZhciBmaWVsZCA9IGZpZWxkc1sgaSBdO1xuXHRcdFx0XHRcdHZhciBmaWVsZE5hbWUgPSBmaWVsZC5uYW1lO1xuXHRcdFx0XHRcdHZhciBmaWVsZFZhbHVlcyA9IGZpZWxkLnZhbHVlcztcblxuXHRcdFx0XHRcdHN3aXRjaCAoIGZpZWxkTmFtZSApIHtcblxuXHRcdFx0XHRcdFx0Y2FzZSAnY29sb3InOlxuXHRcdFx0XHRcdFx0XHR2YXIgY29sb3JOb2RlID0gZmllbGRWYWx1ZXNbIDAgXTtcblxuXHRcdFx0XHRcdFx0XHRpZiAoIGNvbG9yTm9kZSAhPT0gbnVsbCApIHtcblxuXHRcdFx0XHRcdFx0XHRcdGNvbG9yID0gZ2V0Tm9kZSggY29sb3JOb2RlICk7XG5cblx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0XHRjYXNlICdjb29yZCc6XG5cdFx0XHRcdFx0XHRcdHZhciBjb29yZE5vZGUgPSBmaWVsZFZhbHVlc1sgMCBdO1xuXG5cdFx0XHRcdFx0XHRcdGlmICggY29vcmROb2RlICE9PSBudWxsICkge1xuXG5cdFx0XHRcdFx0XHRcdFx0Y29vcmQgPSBnZXROb2RlKCBjb29yZE5vZGUgKTtcblxuXHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cblxuXHRcdFx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHRcdFx0Y29uc29sZS53YXJuKCAnVEhSRUUuVlJNTExvYWRlcjogVW5rbm93biBmaWVsZDonLCBmaWVsZE5hbWUgKTtcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdHZhciBnZW9tZXRyeSA9IG5ldyBCdWZmZXJHZW9tZXRyeSgpO1xuXG5cdFx0XHRcdGdlb21ldHJ5LnNldEF0dHJpYnV0ZSggJ3Bvc2l0aW9uJywgbmV3IEZsb2F0MzJCdWZmZXJBdHRyaWJ1dGUoIGNvb3JkLCAzICkgKTtcblx0XHRcdFx0aWYgKCBjb2xvciApIGdlb21ldHJ5LnNldEF0dHJpYnV0ZSggJ2NvbG9yJywgbmV3IEZsb2F0MzJCdWZmZXJBdHRyaWJ1dGUoIGNvbG9yLCAzICkgKTtcblxuXHRcdFx0XHRnZW9tZXRyeS5fdHlwZSA9ICdwb2ludHMnO1xuXG5cdFx0XHRcdHJldHVybiBnZW9tZXRyeTtcblxuXHRcdFx0fVxuXG5cdFx0XHRmdW5jdGlvbiBidWlsZEJveE5vZGUoIG5vZGUgKSB7XG5cblx0XHRcdFx0dmFyIHNpemUgPSBuZXcgVmVjdG9yMyggMiwgMiwgMiApO1xuXG5cdFx0XHRcdHZhciBmaWVsZHMgPSBub2RlLmZpZWxkcztcblxuXHRcdFx0XHRmb3IgKCB2YXIgaSA9IDAsIGwgPSBmaWVsZHMubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcblxuXHRcdFx0XHRcdHZhciBmaWVsZCA9IGZpZWxkc1sgaSBdO1xuXHRcdFx0XHRcdHZhciBmaWVsZE5hbWUgPSBmaWVsZC5uYW1lO1xuXHRcdFx0XHRcdHZhciBmaWVsZFZhbHVlcyA9IGZpZWxkLnZhbHVlcztcblxuXHRcdFx0XHRcdHN3aXRjaCAoIGZpZWxkTmFtZSApIHtcblxuXHRcdFx0XHRcdFx0Y2FzZSAnc2l6ZSc6XG5cdFx0XHRcdFx0XHRcdHNpemUueCA9IGZpZWxkVmFsdWVzWyAwIF07XG5cdFx0XHRcdFx0XHRcdHNpemUueSA9IGZpZWxkVmFsdWVzWyAxIF07XG5cdFx0XHRcdFx0XHRcdHNpemUueiA9IGZpZWxkVmFsdWVzWyAyIF07XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRcdFx0XHRjb25zb2xlLndhcm4oICdUSFJFRS5WUk1MTG9hZGVyOiBVbmtub3duIGZpZWxkOicsIGZpZWxkTmFtZSApO1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHR9XG5cblx0XHRcdFx0dmFyIGdlb21ldHJ5ID0gbmV3IEJveEdlb21ldHJ5KCBzaXplLngsIHNpemUueSwgc2l6ZS56ICk7XG5cblx0XHRcdFx0cmV0dXJuIGdlb21ldHJ5O1xuXG5cdFx0XHR9XG5cblx0XHRcdGZ1bmN0aW9uIGJ1aWxkQ29uZU5vZGUoIG5vZGUgKSB7XG5cblx0XHRcdFx0dmFyIHJhZGl1cyA9IDEsIGhlaWdodCA9IDIsIG9wZW5FbmRlZCA9IGZhbHNlO1xuXG5cdFx0XHRcdHZhciBmaWVsZHMgPSBub2RlLmZpZWxkcztcblxuXHRcdFx0XHRmb3IgKCB2YXIgaSA9IDAsIGwgPSBmaWVsZHMubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcblxuXHRcdFx0XHRcdHZhciBmaWVsZCA9IGZpZWxkc1sgaSBdO1xuXHRcdFx0XHRcdHZhciBmaWVsZE5hbWUgPSBmaWVsZC5uYW1lO1xuXHRcdFx0XHRcdHZhciBmaWVsZFZhbHVlcyA9IGZpZWxkLnZhbHVlcztcblxuXHRcdFx0XHRcdHN3aXRjaCAoIGZpZWxkTmFtZSApIHtcblxuXHRcdFx0XHRcdFx0Y2FzZSAnYm90dG9tJzpcblx0XHRcdFx0XHRcdFx0b3BlbkVuZGVkID0gISBmaWVsZFZhbHVlc1sgMCBdO1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdFx0Y2FzZSAnYm90dG9tUmFkaXVzJzpcblx0XHRcdFx0XHRcdFx0cmFkaXVzID0gZmllbGRWYWx1ZXNbIDAgXTtcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRcdGNhc2UgJ2hlaWdodCc6XG5cdFx0XHRcdFx0XHRcdGhlaWdodCA9IGZpZWxkVmFsdWVzWyAwIF07XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0XHRjYXNlICdzaWRlJzpcblx0XHRcdFx0XHRcdFx0Ly8gZmllbGQgbm90IHN1cHBvcnRlZFxuXHRcdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHRcdFx0Y29uc29sZS53YXJuKCAnVEhSRUUuVlJNTExvYWRlcjogVW5rbm93biBmaWVsZDonLCBmaWVsZE5hbWUgKTtcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdHZhciBnZW9tZXRyeSA9IG5ldyBDb25lR2VvbWV0cnkoIHJhZGl1cywgaGVpZ2h0LCAxNiwgMSwgb3BlbkVuZGVkICk7XG5cblx0XHRcdFx0cmV0dXJuIGdlb21ldHJ5O1xuXG5cdFx0XHR9XG5cblx0XHRcdGZ1bmN0aW9uIGJ1aWxkQ3lsaW5kZXJOb2RlKCBub2RlICkge1xuXG5cdFx0XHRcdHZhciByYWRpdXMgPSAxLCBoZWlnaHQgPSAyO1xuXG5cdFx0XHRcdHZhciBmaWVsZHMgPSBub2RlLmZpZWxkcztcblxuXHRcdFx0XHRmb3IgKCB2YXIgaSA9IDAsIGwgPSBmaWVsZHMubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcblxuXHRcdFx0XHRcdHZhciBmaWVsZCA9IGZpZWxkc1sgaSBdO1xuXHRcdFx0XHRcdHZhciBmaWVsZE5hbWUgPSBmaWVsZC5uYW1lO1xuXHRcdFx0XHRcdHZhciBmaWVsZFZhbHVlcyA9IGZpZWxkLnZhbHVlcztcblxuXHRcdFx0XHRcdHN3aXRjaCAoIGZpZWxkTmFtZSApIHtcblxuXHRcdFx0XHRcdFx0Y2FzZSAnYm90dG9tJzpcblx0XHRcdFx0XHRcdFx0Ly8gZmllbGQgbm90IHN1cHBvcnRlZFxuXHRcdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdFx0Y2FzZSAncmFkaXVzJzpcblx0XHRcdFx0XHRcdFx0cmFkaXVzID0gZmllbGRWYWx1ZXNbIDAgXTtcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRcdGNhc2UgJ2hlaWdodCc6XG5cdFx0XHRcdFx0XHRcdGhlaWdodCA9IGZpZWxkVmFsdWVzWyAwIF07XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0XHRjYXNlICdzaWRlJzpcblx0XHRcdFx0XHRcdFx0Ly8gZmllbGQgbm90IHN1cHBvcnRlZFxuXHRcdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdFx0Y2FzZSAndG9wJzpcblx0XHRcdFx0XHRcdFx0Ly8gZmllbGQgbm90IHN1cHBvcnRlZFxuXHRcdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHRcdFx0Y29uc29sZS53YXJuKCAnVEhSRUUuVlJNTExvYWRlcjogVW5rbm93biBmaWVsZDonLCBmaWVsZE5hbWUgKTtcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdHZhciBnZW9tZXRyeSA9IG5ldyBDeWxpbmRlckdlb21ldHJ5KCByYWRpdXMsIHJhZGl1cywgaGVpZ2h0LCAxNiwgMSApO1xuXG5cdFx0XHRcdHJldHVybiBnZW9tZXRyeTtcblxuXHRcdFx0fVxuXG5cdFx0XHRmdW5jdGlvbiBidWlsZFNwaGVyZU5vZGUoIG5vZGUgKSB7XG5cblx0XHRcdFx0dmFyIHJhZGl1cyA9IDE7XG5cblx0XHRcdFx0dmFyIGZpZWxkcyA9IG5vZGUuZmllbGRzO1xuXG5cdFx0XHRcdGZvciAoIHZhciBpID0gMCwgbCA9IGZpZWxkcy5sZW5ndGg7IGkgPCBsOyBpICsrICkge1xuXG5cdFx0XHRcdFx0dmFyIGZpZWxkID0gZmllbGRzWyBpIF07XG5cdFx0XHRcdFx0dmFyIGZpZWxkTmFtZSA9IGZpZWxkLm5hbWU7XG5cdFx0XHRcdFx0dmFyIGZpZWxkVmFsdWVzID0gZmllbGQudmFsdWVzO1xuXG5cdFx0XHRcdFx0c3dpdGNoICggZmllbGROYW1lICkge1xuXG5cdFx0XHRcdFx0XHRjYXNlICdyYWRpdXMnOlxuXHRcdFx0XHRcdFx0XHRyYWRpdXMgPSBmaWVsZFZhbHVlc1sgMCBdO1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHRcdFx0Y29uc29sZS53YXJuKCAnVEhSRUUuVlJNTExvYWRlcjogVW5rbm93biBmaWVsZDonLCBmaWVsZE5hbWUgKTtcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdHZhciBnZW9tZXRyeSA9IG5ldyBTcGhlcmVHZW9tZXRyeSggcmFkaXVzLCAxNiwgMTYgKTtcblxuXHRcdFx0XHRyZXR1cm4gZ2VvbWV0cnk7XG5cblx0XHRcdH1cblxuXHRcdFx0ZnVuY3Rpb24gYnVpbGRFbGV2YXRpb25HcmlkTm9kZSggbm9kZSApIHtcblxuXHRcdFx0XHR2YXIgY29sb3I7XG5cdFx0XHRcdHZhciBub3JtYWw7XG5cdFx0XHRcdHZhciB0ZXhDb29yZDtcblx0XHRcdFx0dmFyIGhlaWdodDtcblxuXHRcdFx0XHR2YXIgY29sb3JQZXJWZXJ0ZXggPSB0cnVlO1xuXHRcdFx0XHR2YXIgbm9ybWFsUGVyVmVydGV4ID0gdHJ1ZTtcblx0XHRcdFx0dmFyIHNvbGlkID0gdHJ1ZTtcblx0XHRcdFx0dmFyIGNjdyA9IHRydWU7XG5cdFx0XHRcdHZhciBjcmVhc2VBbmdsZSA9IDA7XG5cdFx0XHRcdHZhciB4RGltZW5zaW9uID0gMjtcblx0XHRcdFx0dmFyIHpEaW1lbnNpb24gPSAyO1xuXHRcdFx0XHR2YXIgeFNwYWNpbmcgPSAxO1xuXHRcdFx0XHR2YXIgelNwYWNpbmcgPSAxO1xuXG5cdFx0XHRcdHZhciBmaWVsZHMgPSBub2RlLmZpZWxkcztcblxuXHRcdFx0XHRmb3IgKCB2YXIgaSA9IDAsIGwgPSBmaWVsZHMubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcblxuXHRcdFx0XHRcdHZhciBmaWVsZCA9IGZpZWxkc1sgaSBdO1xuXHRcdFx0XHRcdHZhciBmaWVsZE5hbWUgPSBmaWVsZC5uYW1lO1xuXHRcdFx0XHRcdHZhciBmaWVsZFZhbHVlcyA9IGZpZWxkLnZhbHVlcztcblxuXHRcdFx0XHRcdHN3aXRjaCAoIGZpZWxkTmFtZSApIHtcblxuXHRcdFx0XHRcdFx0Y2FzZSAnY29sb3InOlxuXHRcdFx0XHRcdFx0XHR2YXIgY29sb3JOb2RlID0gZmllbGRWYWx1ZXNbIDAgXTtcblxuXHRcdFx0XHRcdFx0XHRpZiAoIGNvbG9yTm9kZSAhPT0gbnVsbCApIHtcblxuXHRcdFx0XHRcdFx0XHRcdGNvbG9yID0gZ2V0Tm9kZSggY29sb3JOb2RlICk7XG5cblx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0XHRjYXNlICdub3JtYWwnOlxuXHRcdFx0XHRcdFx0XHR2YXIgbm9ybWFsTm9kZSA9IGZpZWxkVmFsdWVzWyAwIF07XG5cblx0XHRcdFx0XHRcdFx0aWYgKCBub3JtYWxOb2RlICE9PSBudWxsICkge1xuXG5cdFx0XHRcdFx0XHRcdFx0bm9ybWFsID0gZ2V0Tm9kZSggbm9ybWFsTm9kZSApO1xuXG5cdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdFx0Y2FzZSAndGV4Q29vcmQnOlxuXHRcdFx0XHRcdFx0XHR2YXIgdGV4Q29vcmROb2RlID0gZmllbGRWYWx1ZXNbIDAgXTtcblxuXHRcdFx0XHRcdFx0XHRpZiAoIHRleENvb3JkTm9kZSAhPT0gbnVsbCApIHtcblxuXHRcdFx0XHRcdFx0XHRcdHRleENvb3JkID0gZ2V0Tm9kZSggdGV4Q29vcmROb2RlICk7XG5cblx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0XHRjYXNlICdoZWlnaHQnOlxuXHRcdFx0XHRcdFx0XHRoZWlnaHQgPSBmaWVsZFZhbHVlcztcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRcdGNhc2UgJ2Njdyc6XG5cdFx0XHRcdFx0XHRcdGNjdyA9IGZpZWxkVmFsdWVzWyAwIF07XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0XHRjYXNlICdjb2xvclBlclZlcnRleCc6XG5cdFx0XHRcdFx0XHRcdGNvbG9yUGVyVmVydGV4ID0gZmllbGRWYWx1ZXNbIDAgXTtcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRcdGNhc2UgJ2NyZWFzZUFuZ2xlJzpcblx0XHRcdFx0XHRcdFx0Y3JlYXNlQW5nbGUgPSBmaWVsZFZhbHVlc1sgMCBdO1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdFx0Y2FzZSAnbm9ybWFsUGVyVmVydGV4Jzpcblx0XHRcdFx0XHRcdFx0bm9ybWFsUGVyVmVydGV4ID0gZmllbGRWYWx1ZXNbIDAgXTtcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRcdGNhc2UgJ3NvbGlkJzpcblx0XHRcdFx0XHRcdFx0c29saWQgPSBmaWVsZFZhbHVlc1sgMCBdO1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdFx0Y2FzZSAneERpbWVuc2lvbic6XG5cdFx0XHRcdFx0XHRcdHhEaW1lbnNpb24gPSBmaWVsZFZhbHVlc1sgMCBdO1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdFx0Y2FzZSAneFNwYWNpbmcnOlxuXHRcdFx0XHRcdFx0XHR4U3BhY2luZyA9IGZpZWxkVmFsdWVzWyAwIF07XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0XHRjYXNlICd6RGltZW5zaW9uJzpcblx0XHRcdFx0XHRcdFx0ekRpbWVuc2lvbiA9IGZpZWxkVmFsdWVzWyAwIF07XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0XHRjYXNlICd6U3BhY2luZyc6XG5cdFx0XHRcdFx0XHRcdHpTcGFjaW5nID0gZmllbGRWYWx1ZXNbIDAgXTtcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0XHRcdGNvbnNvbGUud2FybiggJ1RIUkVFLlZSTUxMb2FkZXI6IFVua25vd24gZmllbGQ6JywgZmllbGROYW1lICk7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyB2ZXJ0ZXggZGF0YVxuXG5cdFx0XHRcdHZhciB2ZXJ0aWNlcyA9IFtdO1xuXHRcdFx0XHR2YXIgbm9ybWFscyA9IFtdO1xuXHRcdFx0XHR2YXIgY29sb3JzID0gW107XG5cdFx0XHRcdHZhciB1dnMgPSBbXTtcblxuXHRcdFx0XHRmb3IgKCB2YXIgaSA9IDA7IGkgPCB6RGltZW5zaW9uOyBpICsrICkge1xuXG5cdFx0XHRcdFx0Zm9yICggdmFyIGogPSAwOyBqIDwgeERpbWVuc2lvbjsgaiArKyApIHtcblxuXHRcdFx0XHRcdFx0Ly8gY29tcHV0ZSBhIHJvdyBtYWpvciBpbmRleFxuXG5cdFx0XHRcdFx0XHR2YXIgaW5kZXggPSAoIGkgKiB4RGltZW5zaW9uICkgKyBqO1xuXG5cdFx0XHRcdFx0XHQvLyB2ZXJ0aWNlc1xuXG5cdFx0XHRcdFx0XHR2YXIgeCA9IHhTcGFjaW5nICogaTtcblx0XHRcdFx0XHRcdHZhciB5ID0gaGVpZ2h0WyBpbmRleCBdO1xuXHRcdFx0XHRcdFx0dmFyIHogPSB6U3BhY2luZyAqIGo7XG5cblx0XHRcdFx0XHRcdHZlcnRpY2VzLnB1c2goIHgsIHksIHogKTtcblxuXHRcdFx0XHRcdFx0Ly8gY29sb3JzXG5cblx0XHRcdFx0XHRcdGlmICggY29sb3IgJiYgY29sb3JQZXJWZXJ0ZXggPT09IHRydWUgKSB7XG5cblx0XHRcdFx0XHRcdFx0dmFyIHIgPSBjb2xvclsgaW5kZXggKiAzICsgMCBdO1xuXHRcdFx0XHRcdFx0XHR2YXIgZyA9IGNvbG9yWyBpbmRleCAqIDMgKyAxIF07XG5cdFx0XHRcdFx0XHRcdHZhciBiID0gY29sb3JbIGluZGV4ICogMyArIDIgXTtcblxuXHRcdFx0XHRcdFx0XHRjb2xvcnMucHVzaCggciwgZywgYiApO1xuXG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdC8vIG5vcm1hbHNcblxuXHRcdFx0XHRcdFx0aWYgKCBub3JtYWwgJiYgbm9ybWFsUGVyVmVydGV4ID09PSB0cnVlICkge1xuXG5cdFx0XHRcdFx0XHRcdHZhciB4biA9IG5vcm1hbFsgaW5kZXggKiAzICsgMCBdO1xuXHRcdFx0XHRcdFx0XHR2YXIgeW4gPSBub3JtYWxbIGluZGV4ICogMyArIDEgXTtcblx0XHRcdFx0XHRcdFx0dmFyIHpuID0gbm9ybWFsWyBpbmRleCAqIDMgKyAyIF07XG5cblx0XHRcdFx0XHRcdFx0bm9ybWFscy5wdXNoKCB4biwgeW4sIHpuICk7XG5cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0Ly8gdXZzXG5cblx0XHRcdFx0XHRcdGlmICggdGV4Q29vcmQgKSB7XG5cblx0XHRcdFx0XHRcdFx0dmFyIHMgPSB0ZXhDb29yZFsgaW5kZXggKiAyICsgMCBdO1xuXHRcdFx0XHRcdFx0XHR2YXIgdCA9IHRleENvb3JkWyBpbmRleCAqIDIgKyAxIF07XG5cblx0XHRcdFx0XHRcdFx0dXZzLnB1c2goIHMsIHQgKTtcblxuXG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0XHRcdHV2cy5wdXNoKCBpIC8gKCB4RGltZW5zaW9uIC0gMSApLCBqIC8gKCB6RGltZW5zaW9uIC0gMSApICk7XG5cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gaW5kaWNlc1xuXG5cdFx0XHRcdHZhciBpbmRpY2VzID0gW107XG5cblx0XHRcdFx0Zm9yICggdmFyIGkgPSAwOyBpIDwgeERpbWVuc2lvbiAtIDE7IGkgKysgKSB7XG5cblx0XHRcdFx0XHRmb3IgKCB2YXIgaiA9IDA7IGogPCB6RGltZW5zaW9uIC0gMTsgaiArKyApIHtcblxuXHRcdFx0XHRcdFx0Ly8gZnJvbSBodHRwczovL3RlY2ZhLnVuaWdlLmNoL2d1aWRlcy92cm1sL3ZybWw5Ny9zcGVjL3BhcnQxL25vZGVzUmVmLmh0bWwjRWxldmF0aW9uR3JpZFxuXG5cdFx0XHRcdFx0XHR2YXIgYSA9IGkgKyBqICogeERpbWVuc2lvbjtcblx0XHRcdFx0XHRcdHZhciBiID0gaSArICggaiArIDEgKSAqIHhEaW1lbnNpb247XG5cdFx0XHRcdFx0XHR2YXIgYyA9ICggaSArIDEgKSArICggaiArIDEgKSAqIHhEaW1lbnNpb247XG5cdFx0XHRcdFx0XHR2YXIgZCA9ICggaSArIDEgKSArIGogKiB4RGltZW5zaW9uO1xuXG5cdFx0XHRcdFx0XHQvLyBmYWNlc1xuXG5cdFx0XHRcdFx0XHRpZiAoIGNjdyA9PT0gdHJ1ZSApIHtcblxuXHRcdFx0XHRcdFx0XHRpbmRpY2VzLnB1c2goIGEsIGMsIGIgKTtcblx0XHRcdFx0XHRcdFx0aW5kaWNlcy5wdXNoKCBjLCBhLCBkICk7XG5cblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRcdFx0aW5kaWNlcy5wdXNoKCBhLCBiLCBjICk7XG5cdFx0XHRcdFx0XHRcdGluZGljZXMucHVzaCggYywgZCwgYSApO1xuXG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vXG5cblx0XHRcdFx0dmFyIHBvc2l0aW9uQXR0cmlidXRlID0gdG9Ob25JbmRleGVkQXR0cmlidXRlKCBpbmRpY2VzLCBuZXcgRmxvYXQzMkJ1ZmZlckF0dHJpYnV0ZSggdmVydGljZXMsIDMgKSApO1xuXHRcdFx0XHR2YXIgdXZBdHRyaWJ1dGUgPSB0b05vbkluZGV4ZWRBdHRyaWJ1dGUoIGluZGljZXMsIG5ldyBGbG9hdDMyQnVmZmVyQXR0cmlidXRlKCB1dnMsIDIgKSApO1xuXHRcdFx0XHR2YXIgY29sb3JBdHRyaWJ1dGU7XG5cdFx0XHRcdHZhciBub3JtYWxBdHRyaWJ1dGU7XG5cblx0XHRcdFx0Ly8gY29sb3IgYXR0cmlidXRlXG5cblx0XHRcdFx0aWYgKCBjb2xvciApIHtcblxuXHRcdFx0XHRcdGlmICggY29sb3JQZXJWZXJ0ZXggPT09IGZhbHNlICkge1xuXG5cdFx0XHRcdFx0XHRmb3IgKCB2YXIgaSA9IDA7IGkgPCB4RGltZW5zaW9uIC0gMTsgaSArKyApIHtcblxuXHRcdFx0XHRcdFx0XHRmb3IgKCB2YXIgaiA9IDA7IGogPCB6RGltZW5zaW9uIC0gMTsgaiArKyApIHtcblxuXHRcdFx0XHRcdFx0XHRcdHZhciBpbmRleCA9IGkgKyBqICogKCB4RGltZW5zaW9uIC0gMSApO1xuXG5cdFx0XHRcdFx0XHRcdFx0dmFyIHIgPSBjb2xvclsgaW5kZXggKiAzICsgMCBdO1xuXHRcdFx0XHRcdFx0XHRcdHZhciBnID0gY29sb3JbIGluZGV4ICogMyArIDEgXTtcblx0XHRcdFx0XHRcdFx0XHR2YXIgYiA9IGNvbG9yWyBpbmRleCAqIDMgKyAyIF07XG5cblx0XHRcdFx0XHRcdFx0XHQvLyBvbmUgY29sb3IgcGVyIHF1YWRcblxuXHRcdFx0XHRcdFx0XHRcdGNvbG9ycy5wdXNoKCByLCBnLCBiICk7IGNvbG9ycy5wdXNoKCByLCBnLCBiICk7IGNvbG9ycy5wdXNoKCByLCBnLCBiICk7XG5cdFx0XHRcdFx0XHRcdFx0Y29sb3JzLnB1c2goIHIsIGcsIGIgKTsgY29sb3JzLnB1c2goIHIsIGcsIGIgKTsgY29sb3JzLnB1c2goIHIsIGcsIGIgKTtcblxuXHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0Y29sb3JBdHRyaWJ1dGUgPSBuZXcgRmxvYXQzMkJ1ZmZlckF0dHJpYnV0ZSggY29sb3JzLCAzICk7XG5cblx0XHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0XHRjb2xvckF0dHJpYnV0ZSA9IHRvTm9uSW5kZXhlZEF0dHJpYnV0ZSggaW5kaWNlcywgbmV3IEZsb2F0MzJCdWZmZXJBdHRyaWJ1dGUoIGNvbG9ycywgMyApICk7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIG5vcm1hbCBhdHRyaWJ1dGVcblxuXHRcdFx0XHRpZiAoIG5vcm1hbCApIHtcblxuXHRcdFx0XHRcdGlmICggbm9ybWFsUGVyVmVydGV4ID09PSBmYWxzZSApIHtcblxuXHRcdFx0XHRcdFx0Zm9yICggdmFyIGkgPSAwOyBpIDwgeERpbWVuc2lvbiAtIDE7IGkgKysgKSB7XG5cblx0XHRcdFx0XHRcdFx0Zm9yICggdmFyIGogPSAwOyBqIDwgekRpbWVuc2lvbiAtIDE7IGogKysgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHR2YXIgaW5kZXggPSBpICsgaiAqICggeERpbWVuc2lvbiAtIDEgKTtcblxuXHRcdFx0XHRcdFx0XHRcdHZhciB4biA9IG5vcm1hbFsgaW5kZXggKiAzICsgMCBdO1xuXHRcdFx0XHRcdFx0XHRcdHZhciB5biA9IG5vcm1hbFsgaW5kZXggKiAzICsgMSBdO1xuXHRcdFx0XHRcdFx0XHRcdHZhciB6biA9IG5vcm1hbFsgaW5kZXggKiAzICsgMiBdO1xuXG5cdFx0XHRcdFx0XHRcdFx0Ly8gb25lIG5vcm1hbCBwZXIgcXVhZFxuXG5cdFx0XHRcdFx0XHRcdFx0bm9ybWFscy5wdXNoKCB4biwgeW4sIHpuICk7IG5vcm1hbHMucHVzaCggeG4sIHluLCB6biApOyBub3JtYWxzLnB1c2goIHhuLCB5biwgem4gKTtcblx0XHRcdFx0XHRcdFx0XHRub3JtYWxzLnB1c2goIHhuLCB5biwgem4gKTsgbm9ybWFscy5wdXNoKCB4biwgeW4sIHpuICk7IG5vcm1hbHMucHVzaCggeG4sIHluLCB6biApO1xuXG5cdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRub3JtYWxBdHRyaWJ1dGUgPSBuZXcgRmxvYXQzMkJ1ZmZlckF0dHJpYnV0ZSggbm9ybWFscywgMyApO1xuXG5cdFx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdFx0bm9ybWFsQXR0cmlidXRlID0gdG9Ob25JbmRleGVkQXR0cmlidXRlKCBpbmRpY2VzLCBuZXcgRmxvYXQzMkJ1ZmZlckF0dHJpYnV0ZSggbm9ybWFscywgMyApICk7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdG5vcm1hbEF0dHJpYnV0ZSA9IGNvbXB1dGVOb3JtYWxBdHRyaWJ1dGUoIGluZGljZXMsIHZlcnRpY2VzLCBjcmVhc2VBbmdsZSApO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBidWlsZCBnZW9tZXRyeVxuXG5cdFx0XHRcdHZhciBnZW9tZXRyeSA9IG5ldyBCdWZmZXJHZW9tZXRyeSgpO1xuXHRcdFx0XHRnZW9tZXRyeS5zZXRBdHRyaWJ1dGUoICdwb3NpdGlvbicsIHBvc2l0aW9uQXR0cmlidXRlICk7XG5cdFx0XHRcdGdlb21ldHJ5LnNldEF0dHJpYnV0ZSggJ25vcm1hbCcsIG5vcm1hbEF0dHJpYnV0ZSApO1xuXHRcdFx0XHRnZW9tZXRyeS5zZXRBdHRyaWJ1dGUoICd1dicsIHV2QXR0cmlidXRlICk7XG5cblx0XHRcdFx0aWYgKCBjb2xvckF0dHJpYnV0ZSApIGdlb21ldHJ5LnNldEF0dHJpYnV0ZSggJ2NvbG9yJywgY29sb3JBdHRyaWJ1dGUgKTtcblxuXHRcdFx0XHQvLyBcInNvbGlkXCIgaW5mbHVlbmNlcyB0aGUgbWF0ZXJpYWwgc28gbGV0J3Mgc3RvcmUgaXQgZm9yIGxhdGVyIHVzZVxuXG5cdFx0XHRcdGdlb21ldHJ5Ll9zb2xpZCA9IHNvbGlkO1xuXHRcdFx0XHRnZW9tZXRyeS5fdHlwZSA9ICdtZXNoJztcblxuXHRcdFx0XHRyZXR1cm4gZ2VvbWV0cnk7XG5cblx0XHRcdH1cblxuXHRcdFx0ZnVuY3Rpb24gYnVpbGRFeHRydXNpb25Ob2RlKCBub2RlICkge1xuXG5cdFx0XHRcdHZhciBjcm9zc1NlY3Rpb24gPSBbIDEsIDEsIDEsIC0gMSwgLSAxLCAtIDEsIC0gMSwgMSwgMSwgMSBdO1xuXHRcdFx0XHR2YXIgc3BpbmUgPSBbIDAsIDAsIDAsIDAsIDEsIDAgXTtcblx0XHRcdFx0dmFyIHNjYWxlO1xuXHRcdFx0XHR2YXIgb3JpZW50YXRpb247XG5cblx0XHRcdFx0dmFyIGJlZ2luQ2FwID0gdHJ1ZTtcblx0XHRcdFx0dmFyIGNjdyA9IHRydWU7XG5cdFx0XHRcdHZhciBjcmVhc2VBbmdsZSA9IDA7XG5cdFx0XHRcdHZhciBlbmRDYXAgPSB0cnVlO1xuXHRcdFx0XHR2YXIgc29saWQgPSB0cnVlO1xuXG5cdFx0XHRcdHZhciBmaWVsZHMgPSBub2RlLmZpZWxkcztcblxuXHRcdFx0XHRmb3IgKCB2YXIgaSA9IDAsIGwgPSBmaWVsZHMubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcblxuXHRcdFx0XHRcdHZhciBmaWVsZCA9IGZpZWxkc1sgaSBdO1xuXHRcdFx0XHRcdHZhciBmaWVsZE5hbWUgPSBmaWVsZC5uYW1lO1xuXHRcdFx0XHRcdHZhciBmaWVsZFZhbHVlcyA9IGZpZWxkLnZhbHVlcztcblxuXHRcdFx0XHRcdHN3aXRjaCAoIGZpZWxkTmFtZSApIHtcblxuXHRcdFx0XHRcdFx0Y2FzZSAnYmVnaW5DYXAnOlxuXHRcdFx0XHRcdFx0XHRiZWdpbkNhcCA9IGZpZWxkVmFsdWVzWyAwIF07XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0XHRjYXNlICdjY3cnOlxuXHRcdFx0XHRcdFx0XHRjY3cgPSBmaWVsZFZhbHVlc1sgMCBdO1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdFx0Y2FzZSAnY29udmV4Jzpcblx0XHRcdFx0XHRcdFx0Ly8gZmllbGQgbm90IHN1cHBvcnRlZFxuXHRcdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdFx0Y2FzZSAnY3JlYXNlQW5nbGUnOlxuXHRcdFx0XHRcdFx0XHRjcmVhc2VBbmdsZSA9IGZpZWxkVmFsdWVzWyAwIF07XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0XHRjYXNlICdjcm9zc1NlY3Rpb24nOlxuXHRcdFx0XHRcdFx0XHRjcm9zc1NlY3Rpb24gPSBmaWVsZFZhbHVlcztcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRcdGNhc2UgJ2VuZENhcCc6XG5cdFx0XHRcdFx0XHRcdGVuZENhcCA9IGZpZWxkVmFsdWVzWyAwIF07XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0XHRjYXNlICdvcmllbnRhdGlvbic6XG5cdFx0XHRcdFx0XHRcdG9yaWVudGF0aW9uID0gZmllbGRWYWx1ZXM7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0XHRjYXNlICdzY2FsZSc6XG5cdFx0XHRcdFx0XHRcdHNjYWxlID0gZmllbGRWYWx1ZXM7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0XHRjYXNlICdzb2xpZCc6XG5cdFx0XHRcdFx0XHRcdHNvbGlkID0gZmllbGRWYWx1ZXNbIDAgXTtcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRcdGNhc2UgJ3NwaW5lJzpcblx0XHRcdFx0XHRcdFx0c3BpbmUgPSBmaWVsZFZhbHVlczsgLy8gb25seSBleHRydXNpb24gYWxvbmcgdGhlIFktYXhpcyBhcmUgc3VwcG9ydGVkIHNvIGZhclxuXHRcdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHRcdFx0Y29uc29sZS53YXJuKCAnVEhSRUUuVlJNTExvYWRlcjogVW5rbm93biBmaWVsZDonLCBmaWVsZE5hbWUgKTtcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdHZhciBjcm9zc1NlY3Rpb25DbG9zZWQgPSAoIGNyb3NzU2VjdGlvblsgMCBdID09PSBjcm9zc1NlY3Rpb25bIGNyb3NzU2VjdGlvbi5sZW5ndGggLSAyIF0gJiYgY3Jvc3NTZWN0aW9uWyAxIF0gPT09IGNyb3NzU2VjdGlvblsgY3Jvc3NTZWN0aW9uLmxlbmd0aCAtIDEgXSApO1xuXG5cdFx0XHRcdC8vIHZlcnRpY2VzXG5cblx0XHRcdFx0dmFyIHZlcnRpY2VzID0gW107XG5cdFx0XHRcdHZhciBzcGluZVZlY3RvciA9IG5ldyBWZWN0b3IzKCk7XG5cdFx0XHRcdHZhciBzY2FsaW5nID0gbmV3IFZlY3RvcjMoKTtcblxuXHRcdFx0XHR2YXIgYXhpcyA9IG5ldyBWZWN0b3IzKCk7XG5cdFx0XHRcdHZhciB2ZXJ0ZXggPSBuZXcgVmVjdG9yMygpO1xuXHRcdFx0XHR2YXIgcXVhdGVybmlvbiA9IG5ldyBRdWF0ZXJuaW9uKCk7XG5cblx0XHRcdFx0Zm9yICggdmFyIGkgPSAwLCBqID0gMCwgbyA9IDAsIGlsID0gc3BpbmUubGVuZ3RoOyBpIDwgaWw7IGkgKz0gMywgaiArPSAyLCBvICs9IDQgKSB7XG5cblx0XHRcdFx0XHRzcGluZVZlY3Rvci5mcm9tQXJyYXkoIHNwaW5lLCBpICk7XG5cblx0XHRcdFx0XHRzY2FsaW5nLnggPSBzY2FsZSA/IHNjYWxlWyBqICsgMCBdIDogMTtcblx0XHRcdFx0XHRzY2FsaW5nLnkgPSAxO1xuXHRcdFx0XHRcdHNjYWxpbmcueiA9IHNjYWxlID8gc2NhbGVbIGogKyAxIF0gOiAxO1xuXG5cdFx0XHRcdFx0YXhpcy54ID0gb3JpZW50YXRpb24gPyBvcmllbnRhdGlvblsgbyArIDAgXSA6IDA7XG5cdFx0XHRcdFx0YXhpcy55ID0gb3JpZW50YXRpb24gPyBvcmllbnRhdGlvblsgbyArIDEgXSA6IDA7XG5cdFx0XHRcdFx0YXhpcy56ID0gb3JpZW50YXRpb24gPyBvcmllbnRhdGlvblsgbyArIDIgXSA6IDE7XG5cdFx0XHRcdFx0dmFyIGFuZ2xlID0gb3JpZW50YXRpb24gPyBvcmllbnRhdGlvblsgbyArIDMgXSA6IDA7XG5cblx0XHRcdFx0XHRmb3IgKCB2YXIgayA9IDAsIGtsID0gY3Jvc3NTZWN0aW9uLmxlbmd0aDsgayA8IGtsOyBrICs9IDIgKSB7XG5cblx0XHRcdFx0XHRcdHZlcnRleC54ID0gY3Jvc3NTZWN0aW9uWyBrICsgMCBdO1xuXHRcdFx0XHRcdFx0dmVydGV4LnkgPSAwO1xuXHRcdFx0XHRcdFx0dmVydGV4LnogPSBjcm9zc1NlY3Rpb25bIGsgKyAxIF07XG5cblx0XHRcdFx0XHRcdC8vIHNjYWxlXG5cblx0XHRcdFx0XHRcdHZlcnRleC5tdWx0aXBseSggc2NhbGluZyApO1xuXG5cdFx0XHRcdFx0XHQvLyByb3RhdGVcblxuXHRcdFx0XHRcdFx0cXVhdGVybmlvbi5zZXRGcm9tQXhpc0FuZ2xlKCBheGlzLCBhbmdsZSApO1xuXHRcdFx0XHRcdFx0dmVydGV4LmFwcGx5UXVhdGVybmlvbiggcXVhdGVybmlvbiApO1xuXG5cdFx0XHRcdFx0XHQvLyB0cmFuc2xhdGVcblxuXHRcdFx0XHRcdFx0dmVydGV4LmFkZCggc3BpbmVWZWN0b3IgKTtcblxuXHRcdFx0XHRcdFx0dmVydGljZXMucHVzaCggdmVydGV4LngsIHZlcnRleC55LCB2ZXJ0ZXgueiApO1xuXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBpbmRpY2VzXG5cblx0XHRcdFx0dmFyIGluZGljZXMgPSBbXTtcblxuXHRcdFx0XHR2YXIgc3BpbmVDb3VudCA9IHNwaW5lLmxlbmd0aCAvIDM7XG5cdFx0XHRcdHZhciBjcm9zc1NlY3Rpb25Db3VudCA9IGNyb3NzU2VjdGlvbi5sZW5ndGggLyAyO1xuXG5cdFx0XHRcdGZvciAoIHZhciBpID0gMDsgaSA8IHNwaW5lQ291bnQgLSAxOyBpICsrICkge1xuXG5cdFx0XHRcdFx0Zm9yICggdmFyIGogPSAwOyBqIDwgY3Jvc3NTZWN0aW9uQ291bnQgLSAxOyBqICsrICkge1xuXG5cdFx0XHRcdFx0XHR2YXIgYSA9IGogKyBpICogY3Jvc3NTZWN0aW9uQ291bnQ7XG5cdFx0XHRcdFx0XHR2YXIgYiA9ICggaiArIDEgKSArIGkgKiBjcm9zc1NlY3Rpb25Db3VudDtcblx0XHRcdFx0XHRcdHZhciBjID0gaiArICggaSArIDEgKSAqIGNyb3NzU2VjdGlvbkNvdW50O1xuXHRcdFx0XHRcdFx0dmFyIGQgPSAoIGogKyAxICkgKyAoIGkgKyAxICkgKiBjcm9zc1NlY3Rpb25Db3VudDtcblxuXHRcdFx0XHRcdFx0aWYgKCAoIGogPT09IGNyb3NzU2VjdGlvbkNvdW50IC0gMiApICYmICggY3Jvc3NTZWN0aW9uQ2xvc2VkID09PSB0cnVlICkgKSB7XG5cblx0XHRcdFx0XHRcdFx0YiA9IGkgKiBjcm9zc1NlY3Rpb25Db3VudDtcblx0XHRcdFx0XHRcdFx0ZCA9ICggaSArIDEgKSAqIGNyb3NzU2VjdGlvbkNvdW50O1xuXG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdGlmICggY2N3ID09PSB0cnVlICkge1xuXG5cdFx0XHRcdFx0XHRcdGluZGljZXMucHVzaCggYSwgYiwgYyApO1xuXHRcdFx0XHRcdFx0XHRpbmRpY2VzLnB1c2goIGMsIGIsIGQgKTtcblxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdFx0XHRpbmRpY2VzLnB1c2goIGEsIGMsIGIgKTtcblx0XHRcdFx0XHRcdFx0aW5kaWNlcy5wdXNoKCBjLCBkLCBiICk7XG5cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gdHJpYW5ndWxhdGUgY2FwXG5cblx0XHRcdFx0aWYgKCBiZWdpbkNhcCA9PT0gdHJ1ZSB8fCBlbmRDYXAgPT09IHRydWUgKSB7XG5cblx0XHRcdFx0XHR2YXIgY29udG91ciA9IFtdO1xuXG5cdFx0XHRcdFx0Zm9yICggdmFyIGkgPSAwLCBsID0gY3Jvc3NTZWN0aW9uLmxlbmd0aDsgaSA8IGw7IGkgKz0gMiApIHtcblxuXHRcdFx0XHRcdFx0Y29udG91ci5wdXNoKCBuZXcgVmVjdG9yMiggY3Jvc3NTZWN0aW9uWyBpIF0sIGNyb3NzU2VjdGlvblsgaSArIDEgXSApICk7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHR2YXIgZmFjZXMgPSBTaGFwZVV0aWxzLnRyaWFuZ3VsYXRlU2hhcGUoIGNvbnRvdXIsIFtdICk7XG5cdFx0XHRcdFx0dmFyIGNhcEluZGljZXMgPSBbXTtcblxuXHRcdFx0XHRcdGZvciAoIHZhciBpID0gMCwgbCA9IGZhY2VzLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG5cblx0XHRcdFx0XHRcdHZhciBmYWNlID0gZmFjZXNbIGkgXTtcblxuXHRcdFx0XHRcdFx0Y2FwSW5kaWNlcy5wdXNoKCBmYWNlWyAwIF0sIGZhY2VbIDEgXSwgZmFjZVsgMiBdICk7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBiZWdpbiBjYXBcblxuXHRcdFx0XHRcdGlmICggYmVnaW5DYXAgPT09IHRydWUgKSB7XG5cblx0XHRcdFx0XHRcdGZvciAoIHZhciBpID0gMCwgbCA9IGNhcEluZGljZXMubGVuZ3RoOyBpIDwgbDsgaSArPSAzICkge1xuXG5cdFx0XHRcdFx0XHRcdGlmICggY2N3ID09PSB0cnVlICkge1xuXG5cdFx0XHRcdFx0XHRcdFx0aW5kaWNlcy5wdXNoKCBjYXBJbmRpY2VzWyBpICsgMCBdLCBjYXBJbmRpY2VzWyBpICsgMSBdLCBjYXBJbmRpY2VzWyBpICsgMiBdICk7XG5cblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdFx0XHRcdGluZGljZXMucHVzaCggY2FwSW5kaWNlc1sgaSArIDAgXSwgY2FwSW5kaWNlc1sgaSArIDIgXSwgY2FwSW5kaWNlc1sgaSArIDEgXSApO1xuXG5cdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8gZW5kIGNhcFxuXG5cdFx0XHRcdFx0aWYgKCBlbmRDYXAgPT09IHRydWUgKSB7XG5cblx0XHRcdFx0XHRcdHZhciBpbmRleE9mZnNldCA9IGNyb3NzU2VjdGlvbkNvdW50ICogKCBzcGluZUNvdW50IC0gMSApOyAvLyByZWZlcmVuY2VzIHRvIHRoZSBmaXJzdCB2ZXJ0ZXggb2YgdGhlIGxhc3QgY3Jvc3Mgc2VjdGlvblxuXG5cdFx0XHRcdFx0XHRmb3IgKCB2YXIgaSA9IDAsIGwgPSBjYXBJbmRpY2VzLmxlbmd0aDsgaSA8IGw7IGkgKz0gMyApIHtcblxuXHRcdFx0XHRcdFx0XHRpZiAoIGNjdyA9PT0gdHJ1ZSApIHtcblxuXHRcdFx0XHRcdFx0XHRcdGluZGljZXMucHVzaCggaW5kZXhPZmZzZXQgKyBjYXBJbmRpY2VzWyBpICsgMCBdLCBpbmRleE9mZnNldCArIGNhcEluZGljZXNbIGkgKyAyIF0sIGluZGV4T2Zmc2V0ICsgY2FwSW5kaWNlc1sgaSArIDEgXSApO1xuXG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRcdFx0XHRpbmRpY2VzLnB1c2goIGluZGV4T2Zmc2V0ICsgY2FwSW5kaWNlc1sgaSArIDAgXSwgaW5kZXhPZmZzZXQgKyBjYXBJbmRpY2VzWyBpICsgMSBdLCBpbmRleE9mZnNldCArIGNhcEluZGljZXNbIGkgKyAyIF0gKTtcblxuXHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHR9XG5cblx0XHRcdFx0dmFyIHBvc2l0aW9uQXR0cmlidXRlID0gdG9Ob25JbmRleGVkQXR0cmlidXRlKCBpbmRpY2VzLCBuZXcgRmxvYXQzMkJ1ZmZlckF0dHJpYnV0ZSggdmVydGljZXMsIDMgKSApO1xuXHRcdFx0XHR2YXIgbm9ybWFsQXR0cmlidXRlID0gY29tcHV0ZU5vcm1hbEF0dHJpYnV0ZSggaW5kaWNlcywgdmVydGljZXMsIGNyZWFzZUFuZ2xlICk7XG5cblx0XHRcdFx0dmFyIGdlb21ldHJ5ID0gbmV3IEJ1ZmZlckdlb21ldHJ5KCk7XG5cdFx0XHRcdGdlb21ldHJ5LnNldEF0dHJpYnV0ZSggJ3Bvc2l0aW9uJywgcG9zaXRpb25BdHRyaWJ1dGUgKTtcblx0XHRcdFx0Z2VvbWV0cnkuc2V0QXR0cmlidXRlKCAnbm9ybWFsJywgbm9ybWFsQXR0cmlidXRlICk7XG5cdFx0XHRcdC8vIG5vIHV2cyB5ZXRcblxuXHRcdFx0XHQvLyBcInNvbGlkXCIgaW5mbHVlbmNlcyB0aGUgbWF0ZXJpYWwgc28gbGV0J3Mgc3RvcmUgaXQgZm9yIGxhdGVyIHVzZVxuXG5cdFx0XHRcdGdlb21ldHJ5Ll9zb2xpZCA9IHNvbGlkO1xuXHRcdFx0XHRnZW9tZXRyeS5fdHlwZSA9ICdtZXNoJztcblxuXHRcdFx0XHRyZXR1cm4gZ2VvbWV0cnk7XG5cblx0XHRcdH1cblxuXHRcdFx0Ly8gaGVscGVyIGZ1bmN0aW9uc1xuXG5cdFx0XHRmdW5jdGlvbiByZXNvbHZlVVNFKCBpZGVudGlmaWVyICkge1xuXG5cdFx0XHRcdHZhciBub2RlID0gbm9kZU1hcFsgaWRlbnRpZmllciBdO1xuXHRcdFx0XHR2YXIgYnVpbGQgPSBnZXROb2RlKCBub2RlICk7XG5cblx0XHRcdFx0Ly8gYmVjYXVzZSB0aGUgc2FtZSAzRCBvYmplY3RzIGNhbiBoYXZlIGRpZmZlcmVudCB0cmFuc2Zvcm1hdGlvbnMsIGl0J3MgbmVjZXNzYXJ5IHRvIGNsb25lIHRoZW0uXG5cdFx0XHRcdC8vIG1hdGVyaWFscyBjYW4gYmUgaW5mbHVlbmNlZCBieSB0aGUgZ2VvbWV0cnkgKGUuZy4gdmVydGV4IG5vcm1hbHMpLiBjbG9uaW5nIGlzIG5lY2Vzc2FyeSB0byBhdm9pZFxuXHRcdFx0XHQvLyBhbnkgc2lkZSBlZmZlY3RzXG5cblx0XHRcdFx0cmV0dXJuICggYnVpbGQuaXNPYmplY3QzRCB8fCBidWlsZC5pc01hdGVyaWFsICkgPyBidWlsZC5jbG9uZSgpIDogYnVpbGQ7XG5cblx0XHRcdH1cblxuXHRcdFx0ZnVuY3Rpb24gcGFyc2VGaWVsZENoaWxkcmVuKCBjaGlsZHJlbiwgb3duZXIgKSB7XG5cblx0XHRcdFx0Zm9yICggdmFyIGkgPSAwLCBsID0gY2hpbGRyZW4ubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcblxuXHRcdFx0XHRcdHZhciBvYmplY3QgPSBnZXROb2RlKCBjaGlsZHJlblsgaSBdICk7XG5cblx0XHRcdFx0XHRpZiAoIG9iamVjdCBpbnN0YW5jZW9mIE9iamVjdDNEICkgb3duZXIuYWRkKCBvYmplY3QgKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdH1cblxuXHRcdFx0ZnVuY3Rpb24gdHJpYW5ndWxhdGVGYWNlSW5kZXgoIGluZGV4LCBjY3cgKSB7XG5cblx0XHRcdFx0dmFyIGluZGljZXMgPSBbXTtcblxuXHRcdFx0XHQvLyBzaW5jZSBmYWNlIGRlZmludGlvbnMgY2FuIGhhdmUgbW9yZSB0aGFuIHRocmVlIHZlcnRpY2VzLCBpdCdzIG5lY2Vzc2FyeSB0b1xuXHRcdFx0XHQvLyBwZXJmb3JtIGEgc2ltcGxlIHRyaWFuZ3VsYXRpb25cblxuXHRcdFx0XHR2YXIgc3RhcnQgPSAwO1xuXG5cdFx0XHRcdGZvciAoIHZhciBpID0gMCwgbCA9IGluZGV4Lmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG5cblx0XHRcdFx0XHR2YXIgaTEgPSBpbmRleFsgc3RhcnQgXTtcblx0XHRcdFx0XHR2YXIgaTIgPSBpbmRleFsgaSArICggY2N3ID8gMSA6IDIgKSBdO1xuXHRcdFx0XHRcdHZhciBpMyA9IGluZGV4WyBpICsgKCBjY3cgPyAyIDogMSApIF07XG5cblx0XHRcdFx0XHRpbmRpY2VzLnB1c2goIGkxLCBpMiwgaTMgKTtcblxuXHRcdFx0XHRcdC8vIGFuIGluZGV4IG9mIC0xIGluZGljYXRlcyB0aGF0IHRoZSBjdXJyZW50IGZhY2UgaGFzIGVuZGVkIGFuZCB0aGUgbmV4dCBvbmUgYmVnaW5zXG5cblx0XHRcdFx0XHRpZiAoIGluZGV4WyBpICsgMyBdID09PSAtIDEgfHwgaSArIDMgPj0gbCApIHtcblxuXHRcdFx0XHRcdFx0aSArPSAzO1xuXHRcdFx0XHRcdFx0c3RhcnQgPSBpICsgMTtcblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIGluZGljZXM7XG5cblx0XHRcdH1cblxuXHRcdFx0ZnVuY3Rpb24gdHJpYW5ndWxhdGVGYWNlRGF0YSggZGF0YSwgaW5kZXggKSB7XG5cblx0XHRcdFx0dmFyIHRyaWFuZ3VsYXRlZERhdGEgPSBbXTtcblxuXHRcdFx0XHR2YXIgc3RhcnQgPSAwO1xuXG5cdFx0XHRcdGZvciAoIHZhciBpID0gMCwgbCA9IGluZGV4Lmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG5cblx0XHRcdFx0XHR2YXIgc3RyaWRlID0gc3RhcnQgKiAzO1xuXG5cdFx0XHRcdFx0dmFyIHggPSBkYXRhWyBzdHJpZGUgXTtcblx0XHRcdFx0XHR2YXIgeSA9IGRhdGFbIHN0cmlkZSArIDEgXTtcblx0XHRcdFx0XHR2YXIgeiA9IGRhdGFbIHN0cmlkZSArIDIgXTtcblxuXHRcdFx0XHRcdHRyaWFuZ3VsYXRlZERhdGEucHVzaCggeCwgeSwgeiApO1xuXG5cdFx0XHRcdFx0Ly8gYW4gaW5kZXggb2YgLTEgaW5kaWNhdGVzIHRoYXQgdGhlIGN1cnJlbnQgZmFjZSBoYXMgZW5kZWQgYW5kIHRoZSBuZXh0IG9uZSBiZWdpbnNcblxuXHRcdFx0XHRcdGlmICggaW5kZXhbIGkgKyAzIF0gPT09IC0gMSB8fCBpICsgMyA+PSBsICkge1xuXG5cdFx0XHRcdFx0XHRpICs9IDM7XG5cdFx0XHRcdFx0XHRzdGFydCArKztcblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIHRyaWFuZ3VsYXRlZERhdGE7XG5cblx0XHRcdH1cblxuXHRcdFx0ZnVuY3Rpb24gZmxhdHRlbkRhdGEoIGRhdGEsIGluZGV4ICkge1xuXG5cdFx0XHRcdHZhciBmbGF0dGVuRGF0YSA9IFtdO1xuXG5cdFx0XHRcdGZvciAoIHZhciBpID0gMCwgbCA9IGluZGV4Lmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG5cblx0XHRcdFx0XHR2YXIgaTEgPSBpbmRleFsgaSBdO1xuXG5cdFx0XHRcdFx0dmFyIHN0cmlkZSA9IGkxICogMztcblxuXHRcdFx0XHRcdHZhciB4ID0gZGF0YVsgc3RyaWRlIF07XG5cdFx0XHRcdFx0dmFyIHkgPSBkYXRhWyBzdHJpZGUgKyAxIF07XG5cdFx0XHRcdFx0dmFyIHogPSBkYXRhWyBzdHJpZGUgKyAyIF07XG5cblx0XHRcdFx0XHRmbGF0dGVuRGF0YS5wdXNoKCB4LCB5LCB6ICk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiBmbGF0dGVuRGF0YTtcblxuXHRcdFx0fVxuXG5cdFx0XHRmdW5jdGlvbiBleHBhbmRMaW5lSW5kZXgoIGluZGV4ICkge1xuXG5cdFx0XHRcdHZhciBpbmRpY2VzID0gW107XG5cblx0XHRcdFx0Zm9yICggdmFyIGkgPSAwLCBsID0gaW5kZXgubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcblxuXHRcdFx0XHRcdHZhciBpMSA9IGluZGV4WyBpIF07XG5cdFx0XHRcdFx0dmFyIGkyID0gaW5kZXhbIGkgKyAxIF07XG5cblx0XHRcdFx0XHRpbmRpY2VzLnB1c2goIGkxLCBpMiApO1xuXG5cdFx0XHRcdFx0Ly8gYW4gaW5kZXggb2YgLTEgaW5kaWNhdGVzIHRoYXQgdGhlIGN1cnJlbnQgbGluZSBoYXMgZW5kZWQgYW5kIHRoZSBuZXh0IG9uZSBiZWdpbnNcblxuXHRcdFx0XHRcdGlmICggaW5kZXhbIGkgKyAyIF0gPT09IC0gMSB8fCBpICsgMiA+PSBsICkge1xuXG5cdFx0XHRcdFx0XHRpICs9IDI7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiBpbmRpY2VzO1xuXG5cdFx0XHR9XG5cblx0XHRcdGZ1bmN0aW9uIGV4cGFuZExpbmVEYXRhKCBkYXRhLCBpbmRleCApIHtcblxuXHRcdFx0XHR2YXIgdHJpYW5ndWxhdGVkRGF0YSA9IFtdO1xuXG5cdFx0XHRcdHZhciBzdGFydCA9IDA7XG5cblx0XHRcdFx0Zm9yICggdmFyIGkgPSAwLCBsID0gaW5kZXgubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcblxuXHRcdFx0XHRcdHZhciBzdHJpZGUgPSBzdGFydCAqIDM7XG5cblx0XHRcdFx0XHR2YXIgeCA9IGRhdGFbIHN0cmlkZSBdO1xuXHRcdFx0XHRcdHZhciB5ID0gZGF0YVsgc3RyaWRlICsgMSBdO1xuXHRcdFx0XHRcdHZhciB6ID0gZGF0YVsgc3RyaWRlICsgMiBdO1xuXG5cdFx0XHRcdFx0dHJpYW5ndWxhdGVkRGF0YS5wdXNoKCB4LCB5LCB6ICk7XG5cblx0XHRcdFx0XHQvLyBhbiBpbmRleCBvZiAtMSBpbmRpY2F0ZXMgdGhhdCB0aGUgY3VycmVudCBsaW5lIGhhcyBlbmRlZCBhbmQgdGhlIG5leHQgb25lIGJlZ2luc1xuXG5cdFx0XHRcdFx0aWYgKCBpbmRleFsgaSArIDIgXSA9PT0gLSAxIHx8IGkgKyAyID49IGwgKSB7XG5cblx0XHRcdFx0XHRcdGkgKz0gMjtcblx0XHRcdFx0XHRcdHN0YXJ0ICsrO1xuXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gdHJpYW5ndWxhdGVkRGF0YTtcblxuXHRcdFx0fVxuXG5cdFx0XHR2YXIgdkEgPSBuZXcgVmVjdG9yMygpO1xuXHRcdFx0dmFyIHZCID0gbmV3IFZlY3RvcjMoKTtcblx0XHRcdHZhciB2QyA9IG5ldyBWZWN0b3IzKCk7XG5cblx0XHRcdHZhciB1dkEgPSBuZXcgVmVjdG9yMigpO1xuXHRcdFx0dmFyIHV2QiA9IG5ldyBWZWN0b3IyKCk7XG5cdFx0XHR2YXIgdXZDID0gbmV3IFZlY3RvcjIoKTtcblxuXHRcdFx0ZnVuY3Rpb24gY29tcHV0ZUF0dHJpYnV0ZUZyb21JbmRleGVkRGF0YSggY29vcmRJbmRleCwgaW5kZXgsIGRhdGEsIGl0ZW1TaXplICkge1xuXG5cdFx0XHRcdHZhciBhcnJheSA9IFtdO1xuXG5cdFx0XHRcdC8vIHdlIHVzZSB0aGUgY29vcmRJbmRleC5sZW5ndGggYXMgZGVsaW1pdGVyIHNpbmNlIG5vcm1hbEluZGV4IG11c3QgY29udGFpbiBhdCBsZWFzdCBhcyBtYW55IGluZGljZXNcblxuXHRcdFx0XHRmb3IgKCB2YXIgaSA9IDAsIGwgPSBjb29yZEluZGV4Lmxlbmd0aDsgaSA8IGw7IGkgKz0gMyApIHtcblxuXHRcdFx0XHRcdHZhciBhID0gaW5kZXhbIGkgXTtcblx0XHRcdFx0XHR2YXIgYiA9IGluZGV4WyBpICsgMSBdO1xuXHRcdFx0XHRcdHZhciBjID0gaW5kZXhbIGkgKyAyIF07XG5cblx0XHRcdFx0XHRpZiAoIGl0ZW1TaXplID09PSAyICkge1xuXG5cdFx0XHRcdFx0XHR1dkEuZnJvbUFycmF5KCBkYXRhLCBhICogaXRlbVNpemUgKTtcblx0XHRcdFx0XHRcdHV2Qi5mcm9tQXJyYXkoIGRhdGEsIGIgKiBpdGVtU2l6ZSApO1xuXHRcdFx0XHRcdFx0dXZDLmZyb21BcnJheSggZGF0YSwgYyAqIGl0ZW1TaXplICk7XG5cblx0XHRcdFx0XHRcdGFycmF5LnB1c2goIHV2QS54LCB1dkEueSApO1xuXHRcdFx0XHRcdFx0YXJyYXkucHVzaCggdXZCLngsIHV2Qi55ICk7XG5cdFx0XHRcdFx0XHRhcnJheS5wdXNoKCB1dkMueCwgdXZDLnkgKTtcblxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRcdHZBLmZyb21BcnJheSggZGF0YSwgYSAqIGl0ZW1TaXplICk7XG5cdFx0XHRcdFx0XHR2Qi5mcm9tQXJyYXkoIGRhdGEsIGIgKiBpdGVtU2l6ZSApO1xuXHRcdFx0XHRcdFx0dkMuZnJvbUFycmF5KCBkYXRhLCBjICogaXRlbVNpemUgKTtcblxuXHRcdFx0XHRcdFx0YXJyYXkucHVzaCggdkEueCwgdkEueSwgdkEueiApO1xuXHRcdFx0XHRcdFx0YXJyYXkucHVzaCggdkIueCwgdkIueSwgdkIueiApO1xuXHRcdFx0XHRcdFx0YXJyYXkucHVzaCggdkMueCwgdkMueSwgdkMueiApO1xuXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gbmV3IEZsb2F0MzJCdWZmZXJBdHRyaWJ1dGUoIGFycmF5LCBpdGVtU2l6ZSApO1xuXG5cdFx0XHR9XG5cblx0XHRcdGZ1bmN0aW9uIGNvbXB1dGVBdHRyaWJ1dGVGcm9tRmFjZURhdGEoIGluZGV4LCBmYWNlRGF0YSApIHtcblxuXHRcdFx0XHR2YXIgYXJyYXkgPSBbXTtcblxuXHRcdFx0XHRmb3IgKCB2YXIgaSA9IDAsIGogPSAwLCBsID0gaW5kZXgubGVuZ3RoOyBpIDwgbDsgaSArPSAzLCBqICsrICkge1xuXG5cdFx0XHRcdFx0dkEuZnJvbUFycmF5KCBmYWNlRGF0YSwgaiAqIDMgKTtcblxuXHRcdFx0XHRcdGFycmF5LnB1c2goIHZBLngsIHZBLnksIHZBLnogKTtcblx0XHRcdFx0XHRhcnJheS5wdXNoKCB2QS54LCB2QS55LCB2QS56ICk7XG5cdFx0XHRcdFx0YXJyYXkucHVzaCggdkEueCwgdkEueSwgdkEueiApO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gbmV3IEZsb2F0MzJCdWZmZXJBdHRyaWJ1dGUoIGFycmF5LCAzICk7XG5cblx0XHRcdH1cblxuXHRcdFx0ZnVuY3Rpb24gY29tcHV0ZUF0dHJpYnV0ZUZyb21MaW5lRGF0YSggaW5kZXgsIGxpbmVEYXRhICkge1xuXG5cdFx0XHRcdHZhciBhcnJheSA9IFtdO1xuXG5cdFx0XHRcdGZvciAoIHZhciBpID0gMCwgaiA9IDAsIGwgPSBpbmRleC5sZW5ndGg7IGkgPCBsOyBpICs9IDIsIGogKysgKSB7XG5cblx0XHRcdFx0XHR2QS5mcm9tQXJyYXkoIGxpbmVEYXRhLCBqICogMyApO1xuXG5cdFx0XHRcdFx0YXJyYXkucHVzaCggdkEueCwgdkEueSwgdkEueiApO1xuXHRcdFx0XHRcdGFycmF5LnB1c2goIHZBLngsIHZBLnksIHZBLnogKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIG5ldyBGbG9hdDMyQnVmZmVyQXR0cmlidXRlKCBhcnJheSwgMyApO1xuXG5cdFx0XHR9XG5cblx0XHRcdGZ1bmN0aW9uIHRvTm9uSW5kZXhlZEF0dHJpYnV0ZSggaW5kaWNlcywgYXR0cmlidXRlICkge1xuXG5cdFx0XHRcdHZhciBhcnJheSA9IGF0dHJpYnV0ZS5hcnJheTtcblx0XHRcdFx0dmFyIGl0ZW1TaXplID0gYXR0cmlidXRlLml0ZW1TaXplO1xuXG5cdFx0XHRcdHZhciBhcnJheTIgPSBuZXcgYXJyYXkuY29uc3RydWN0b3IoIGluZGljZXMubGVuZ3RoICogaXRlbVNpemUgKTtcblxuXHRcdFx0XHR2YXIgaW5kZXggPSAwLCBpbmRleDIgPSAwO1xuXG5cdFx0XHRcdGZvciAoIHZhciBpID0gMCwgbCA9IGluZGljZXMubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcblxuXHRcdFx0XHRcdGluZGV4ID0gaW5kaWNlc1sgaSBdICogaXRlbVNpemU7XG5cblx0XHRcdFx0XHRmb3IgKCB2YXIgaiA9IDA7IGogPCBpdGVtU2l6ZTsgaiArKyApIHtcblxuXHRcdFx0XHRcdFx0YXJyYXkyWyBpbmRleDIgKysgXSA9IGFycmF5WyBpbmRleCArKyBdO1xuXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gbmV3IEZsb2F0MzJCdWZmZXJBdHRyaWJ1dGUoIGFycmF5MiwgaXRlbVNpemUgKTtcblxuXHRcdFx0fVxuXG5cdFx0XHR2YXIgYWIgPSBuZXcgVmVjdG9yMygpO1xuXHRcdFx0dmFyIGNiID0gbmV3IFZlY3RvcjMoKTtcblxuXHRcdFx0ZnVuY3Rpb24gY29tcHV0ZU5vcm1hbEF0dHJpYnV0ZSggaW5kZXgsIGNvb3JkLCBjcmVhc2VBbmdsZSApIHtcblxuXHRcdFx0XHR2YXIgZmFjZXMgPSBbXTtcblx0XHRcdFx0dmFyIHZlcnRleE5vcm1hbHMgPSB7fTtcblxuXHRcdFx0XHQvLyBwcmVwYXJlIGZhY2UgYW5kIHJhdyB2ZXJ0ZXggbm9ybWFsc1xuXG5cdFx0XHRcdGZvciAoIHZhciBpID0gMCwgbCA9IGluZGV4Lmxlbmd0aDsgaSA8IGw7IGkgKz0gMyApIHtcblxuXHRcdFx0XHRcdHZhciBhID0gaW5kZXhbIGkgXTtcblx0XHRcdFx0XHR2YXIgYiA9IGluZGV4WyBpICsgMSBdO1xuXHRcdFx0XHRcdHZhciBjID0gaW5kZXhbIGkgKyAyIF07XG5cblx0XHRcdFx0XHR2YXIgZmFjZSA9IG5ldyBGYWNlKCBhLCBiLCBjICk7XG5cblx0XHRcdFx0XHR2QS5mcm9tQXJyYXkoIGNvb3JkLCBhICogMyApO1xuXHRcdFx0XHRcdHZCLmZyb21BcnJheSggY29vcmQsIGIgKiAzICk7XG5cdFx0XHRcdFx0dkMuZnJvbUFycmF5KCBjb29yZCwgYyAqIDMgKTtcblxuXHRcdFx0XHRcdGNiLnN1YlZlY3RvcnMoIHZDLCB2QiApO1xuXHRcdFx0XHRcdGFiLnN1YlZlY3RvcnMoIHZBLCB2QiApO1xuXHRcdFx0XHRcdGNiLmNyb3NzKCBhYiApO1xuXG5cdFx0XHRcdFx0Y2Iubm9ybWFsaXplKCk7XG5cblx0XHRcdFx0XHRmYWNlLm5vcm1hbC5jb3B5KCBjYiApO1xuXG5cdFx0XHRcdFx0aWYgKCB2ZXJ0ZXhOb3JtYWxzWyBhIF0gPT09IHVuZGVmaW5lZCApIHZlcnRleE5vcm1hbHNbIGEgXSA9IFtdO1xuXHRcdFx0XHRcdGlmICggdmVydGV4Tm9ybWFsc1sgYiBdID09PSB1bmRlZmluZWQgKSB2ZXJ0ZXhOb3JtYWxzWyBiIF0gPSBbXTtcblx0XHRcdFx0XHRpZiAoIHZlcnRleE5vcm1hbHNbIGMgXSA9PT0gdW5kZWZpbmVkICkgdmVydGV4Tm9ybWFsc1sgYyBdID0gW107XG5cblx0XHRcdFx0XHR2ZXJ0ZXhOb3JtYWxzWyBhIF0ucHVzaCggZmFjZS5ub3JtYWwgKTtcblx0XHRcdFx0XHR2ZXJ0ZXhOb3JtYWxzWyBiIF0ucHVzaCggZmFjZS5ub3JtYWwgKTtcblx0XHRcdFx0XHR2ZXJ0ZXhOb3JtYWxzWyBjIF0ucHVzaCggZmFjZS5ub3JtYWwgKTtcblxuXHRcdFx0XHRcdGZhY2VzLnB1c2goIGZhY2UgKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gY29tcHV0ZSB2ZXJ0ZXggbm9ybWFscyBhbmQgYnVpbGQgZmluYWwgZ2VvbWV0cnlcblxuXHRcdFx0XHR2YXIgbm9ybWFscyA9IFtdO1xuXG5cdFx0XHRcdGZvciAoIHZhciBpID0gMCwgbCA9IGZhY2VzLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG5cblx0XHRcdFx0XHR2YXIgZmFjZSA9IGZhY2VzWyBpIF07XG5cblx0XHRcdFx0XHR2YXIgbkEgPSB3ZWlnaHRlZE5vcm1hbCggdmVydGV4Tm9ybWFsc1sgZmFjZS5hIF0sIGZhY2Uubm9ybWFsLCBjcmVhc2VBbmdsZSApO1xuXHRcdFx0XHRcdHZhciBuQiA9IHdlaWdodGVkTm9ybWFsKCB2ZXJ0ZXhOb3JtYWxzWyBmYWNlLmIgXSwgZmFjZS5ub3JtYWwsIGNyZWFzZUFuZ2xlICk7XG5cdFx0XHRcdFx0dmFyIG5DID0gd2VpZ2h0ZWROb3JtYWwoIHZlcnRleE5vcm1hbHNbIGZhY2UuYyBdLCBmYWNlLm5vcm1hbCwgY3JlYXNlQW5nbGUgKTtcblxuXHRcdFx0XHRcdHZBLmZyb21BcnJheSggY29vcmQsIGZhY2UuYSAqIDMgKTtcblx0XHRcdFx0XHR2Qi5mcm9tQXJyYXkoIGNvb3JkLCBmYWNlLmIgKiAzICk7XG5cdFx0XHRcdFx0dkMuZnJvbUFycmF5KCBjb29yZCwgZmFjZS5jICogMyApO1xuXG5cdFx0XHRcdFx0bm9ybWFscy5wdXNoKCBuQS54LCBuQS55LCBuQS56ICk7XG5cdFx0XHRcdFx0bm9ybWFscy5wdXNoKCBuQi54LCBuQi55LCBuQi56ICk7XG5cdFx0XHRcdFx0bm9ybWFscy5wdXNoKCBuQy54LCBuQy55LCBuQy56ICk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiBuZXcgRmxvYXQzMkJ1ZmZlckF0dHJpYnV0ZSggbm9ybWFscywgMyApO1xuXG5cdFx0XHR9XG5cblx0XHRcdGZ1bmN0aW9uIHdlaWdodGVkTm9ybWFsKCBub3JtYWxzLCB2ZWN0b3IsIGNyZWFzZUFuZ2xlICkge1xuXG5cdFx0XHRcdHZhciBub3JtYWwgPSBuZXcgVmVjdG9yMygpO1xuXG5cdFx0XHRcdGlmICggY3JlYXNlQW5nbGUgPT09IDAgKSB7XG5cblx0XHRcdFx0XHRub3JtYWwuY29weSggdmVjdG9yICk7XG5cblx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdGZvciAoIHZhciBpID0gMCwgbCA9IG5vcm1hbHMubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcblxuXHRcdFx0XHRcdFx0aWYgKCBub3JtYWxzWyBpIF0uYW5nbGVUbyggdmVjdG9yICkgPCBjcmVhc2VBbmdsZSApIHtcblxuXHRcdFx0XHRcdFx0XHRub3JtYWwuYWRkKCBub3JtYWxzWyBpIF0gKTtcblxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gbm9ybWFsLm5vcm1hbGl6ZSgpO1xuXG5cdFx0XHR9XG5cblx0XHRcdGZ1bmN0aW9uIHRvQ29sb3JBcnJheSggY29sb3JzICkge1xuXG5cdFx0XHRcdHZhciBhcnJheSA9IFtdO1xuXG5cdFx0XHRcdGZvciAoIHZhciBpID0gMCwgbCA9IGNvbG9ycy5sZW5ndGg7IGkgPCBsOyBpICs9IDMgKSB7XG5cblx0XHRcdFx0XHRhcnJheS5wdXNoKCBuZXcgQ29sb3IoIGNvbG9yc1sgaSBdLCBjb2xvcnNbIGkgKyAxIF0sIGNvbG9yc1sgaSArIDIgXSApICk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiBhcnJheTtcblxuXHRcdFx0fVxuXG5cdFx0XHQvKipcblx0XHRcdCAqIFZlcnRpY2FsbHkgcGFpbnRzIHRoZSBmYWNlcyBpbnRlcnBvbGF0aW5nIGJldHdlZW4gdGhlXG5cdFx0XHQgKiBzcGVjaWZpZWQgY29sb3JzIGF0IHRoZSBzcGVjaWZpZWQgYW5nZWxzLiBUaGlzIGlzIHVzZWQgZm9yIHRoZSBCYWNrZ3JvdW5kXG5cdFx0XHQgKiBub2RlLCBidXQgY291bGQgYmUgYXBwbGllZCB0byBvdGhlciBub2RlcyB3aXRoIG11bHRpcGxlIGZhY2VzIGFzIHdlbGwuXG5cdFx0XHQgKlxuXHRcdFx0ICogV2hlbiB1c2VkIHdpdGggdGhlIEJhY2tncm91bmQgbm9kZSwgZGVmYXVsdCBpcyBkaXJlY3Rpb25Jc0Rvd24gaXMgdHJ1ZSBpZlxuXHRcdFx0ICogaW50ZXJwb2xhdGluZyB0aGUgc2t5Q29sb3IgZG93biBmcm9tIHRoZSBaZW5pdGguIFdoZW4gaW50ZXJwb2xhdGlvbmcgdXAgZnJvbVxuXHRcdFx0ICogdGhlIE5hZGlyIGkuZS4gaW50ZXJwb2xhdGluZyB0aGUgZ3JvdW5kQ29sb3IsIHRoZSBkaXJlY3Rpb25Jc0Rvd24gaXMgZmFsc2UuXG5cdFx0XHQgKlxuXHRcdFx0ICogVGhlIGZpcnN0IGFuZ2xlIGlzIG5ldmVyIHNwZWNpZmllZCwgaXQgaXMgdGhlIFplbml0aCAoMCByYWQpLiBBbmdsZXMgYXJlIHNwZWNpZmllZFxuXHRcdFx0ICogaW4gcmFkaWFucy4gVGhlIGdlb21ldHJ5IGlzIHRob3VnaHQgYSBzcGhlcmUsIGJ1dCBjb3VsZCBiZSBhbnl0aGluZy4gVGhlIGNvbG9yIGludGVycG9sYXRpb25cblx0XHRcdCAqIGlzIGxpbmVhciBhbG9uZyB0aGUgWSBheGlzIGluIGFueSBjYXNlLlxuXHRcdFx0ICpcblx0XHRcdCAqIFlvdSBtdXN0IHNwZWNpZnkgb25lIG1vcmUgY29sb3IgdGhhbiB5b3UgaGF2ZSBhbmdsZXMgYXQgdGhlIGJlZ2lubmluZyBvZiB0aGUgY29sb3JzIGFycmF5LlxuXHRcdFx0ICogVGhpcyBpcyB0aGUgY29sb3Igb2YgdGhlIFplbml0aCAodGhlIHRvcCBvZiB0aGUgc2hhcGUpLlxuXHRcdFx0ICpcblx0XHRcdCAqIEBwYXJhbSB7QnVmZmVyR2VvbWV0cnl9IGdlb21ldHJ5XG5cdFx0XHQgKiBAcGFyYW0ge251bWJlcn0gcmFkaXVzXG5cdFx0XHQgKiBAcGFyYW0ge2FycmF5fSBhbmdsZXNcblx0XHRcdCAqIEBwYXJhbSB7YXJyYXl9IGNvbG9yc1xuXHRcdFx0ICogQHBhcmFtIHtib29sZWFufSB0b3BEb3duIC0gV2hldGhlciB0byB3b3JrIHRvcCBkb3duIG9yIGJvdHRvbSB1cC5cblx0XHRcdCAqL1xuXHRcdFx0ZnVuY3Rpb24gcGFpbnRGYWNlcyggZ2VvbWV0cnksIHJhZGl1cywgYW5nbGVzLCBjb2xvcnMsIHRvcERvd24gKSB7XG5cblx0XHRcdFx0Ly8gY29tcHV0ZSB0aHJlc2hvbGQgdmFsdWVzXG5cblx0XHRcdFx0dmFyIHRocmVzaG9sZHMgPSBbXTtcblx0XHRcdFx0dmFyIHN0YXJ0QW5nbGUgPSAoIHRvcERvd24gPT09IHRydWUgKSA/IDAgOiBNYXRoLlBJO1xuXG5cdFx0XHRcdGZvciAoIHZhciBpID0gMCwgbCA9IGNvbG9ycy5sZW5ndGg7IGkgPCBsOyBpICsrICkge1xuXG5cdFx0XHRcdFx0dmFyIGFuZ2xlID0gKCBpID09PSAwICkgPyAwIDogYW5nbGVzWyBpIC0gMSBdO1xuXHRcdFx0XHRcdGFuZ2xlID0gKCB0b3BEb3duID09PSB0cnVlICkgPyBhbmdsZSA6ICggc3RhcnRBbmdsZSAtIGFuZ2xlICk7XG5cblx0XHRcdFx0XHR2YXIgcG9pbnQgPSBuZXcgVmVjdG9yMygpO1xuXHRcdFx0XHRcdHBvaW50LnNldEZyb21TcGhlcmljYWxDb29yZHMoIHJhZGl1cywgYW5nbGUsIDAgKTtcblxuXHRcdFx0XHRcdHRocmVzaG9sZHMucHVzaCggcG9pbnQgKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gZ2VuZXJhdGUgdmVydGV4IGNvbG9yc1xuXG5cdFx0XHRcdHZhciBpbmRpY2VzID0gZ2VvbWV0cnkuaW5kZXg7XG5cdFx0XHRcdHZhciBwb3NpdGlvbkF0dHJpYnV0ZSA9IGdlb21ldHJ5LmF0dHJpYnV0ZXMucG9zaXRpb247XG5cdFx0XHRcdHZhciBjb2xvckF0dHJpYnV0ZSA9IG5ldyBCdWZmZXJBdHRyaWJ1dGUoIG5ldyBGbG9hdDMyQXJyYXkoIGdlb21ldHJ5LmF0dHJpYnV0ZXMucG9zaXRpb24uY291bnQgKiAzICksIDMgKTtcblxuXHRcdFx0XHR2YXIgcG9zaXRpb24gPSBuZXcgVmVjdG9yMygpO1xuXHRcdFx0XHR2YXIgY29sb3IgPSBuZXcgQ29sb3IoKTtcblxuXHRcdFx0XHRmb3IgKCB2YXIgaSA9IDA7IGkgPCBpbmRpY2VzLmNvdW50OyBpICsrICkge1xuXG5cdFx0XHRcdFx0dmFyIGluZGV4ID0gaW5kaWNlcy5nZXRYKCBpICk7XG5cdFx0XHRcdFx0cG9zaXRpb24uZnJvbUJ1ZmZlckF0dHJpYnV0ZSggcG9zaXRpb25BdHRyaWJ1dGUsIGluZGV4ICk7XG5cblx0XHRcdFx0XHR2YXIgdGhyZXNob2xkSW5kZXhBLCB0aHJlc2hvbGRJbmRleEI7XG5cdFx0XHRcdFx0dmFyIHQgPSAxO1xuXG5cdFx0XHRcdFx0Zm9yICggdmFyIGogPSAxOyBqIDwgdGhyZXNob2xkcy5sZW5ndGg7IGogKysgKSB7XG5cblx0XHRcdFx0XHRcdHRocmVzaG9sZEluZGV4QSA9IGogLSAxO1xuXHRcdFx0XHRcdFx0dGhyZXNob2xkSW5kZXhCID0gajtcblxuXHRcdFx0XHRcdFx0dmFyIHRocmVzaG9sZEEgPSB0aHJlc2hvbGRzWyB0aHJlc2hvbGRJbmRleEEgXTtcblx0XHRcdFx0XHRcdHZhciB0aHJlc2hvbGRCID0gdGhyZXNob2xkc1sgdGhyZXNob2xkSW5kZXhCIF07XG5cblx0XHRcdFx0XHRcdGlmICggdG9wRG93biA9PT0gdHJ1ZSApIHtcblxuXHRcdFx0XHRcdFx0XHQvLyBpbnRlcnBvbGF0aW9uIGZvciBza3kgY29sb3JcblxuXHRcdFx0XHRcdFx0XHRpZiAoIHBvc2l0aW9uLnkgPD0gdGhyZXNob2xkQS55ICYmIHBvc2l0aW9uLnkgPiB0aHJlc2hvbGRCLnkgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHR0ID0gTWF0aC5hYnMoIHRocmVzaG9sZEEueSAtIHBvc2l0aW9uLnkgKSAvIE1hdGguYWJzKCB0aHJlc2hvbGRBLnkgLSB0aHJlc2hvbGRCLnkgKTtcblxuXHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdFx0XHQvLyBpbnRlcnBvbGF0aW9uIGZvciBncm91bmQgY29sb3JcblxuXHRcdFx0XHRcdFx0XHRpZiAoIHBvc2l0aW9uLnkgPj0gdGhyZXNob2xkQS55ICYmIHBvc2l0aW9uLnkgPCB0aHJlc2hvbGRCLnkgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHR0ID0gTWF0aC5hYnMoIHRocmVzaG9sZEEueSAtIHBvc2l0aW9uLnkgKSAvIE1hdGguYWJzKCB0aHJlc2hvbGRBLnkgLSB0aHJlc2hvbGRCLnkgKTtcblxuXHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0dmFyIGNvbG9yQSA9IGNvbG9yc1sgdGhyZXNob2xkSW5kZXhBIF07XG5cdFx0XHRcdFx0dmFyIGNvbG9yQiA9IGNvbG9yc1sgdGhyZXNob2xkSW5kZXhCIF07XG5cblx0XHRcdFx0XHRjb2xvci5jb3B5KCBjb2xvckEgKS5sZXJwKCBjb2xvckIsIHQgKTtcblxuXHRcdFx0XHRcdGNvbG9yQXR0cmlidXRlLnNldFhZWiggaW5kZXgsIGNvbG9yLnIsIGNvbG9yLmcsIGNvbG9yLmIgKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Z2VvbWV0cnkuc2V0QXR0cmlidXRlKCAnY29sb3InLCBjb2xvckF0dHJpYnV0ZSApO1xuXG5cdFx0XHR9XG5cblx0XHRcdC8vXG5cblx0XHRcdHZhciB0ZXh0dXJlTG9hZGVyID0gbmV3IFRleHR1cmVMb2FkZXIoIHRoaXMubWFuYWdlciApO1xuXHRcdFx0dGV4dHVyZUxvYWRlci5zZXRQYXRoKCB0aGlzLnJlc291cmNlUGF0aCB8fCBwYXRoICkuc2V0Q3Jvc3NPcmlnaW4oIHRoaXMuY3Jvc3NPcmlnaW4gKTtcblxuXHRcdFx0Ly8gY2hlY2sgdmVyc2lvbiAob25seSAyLjAgaXMgc3VwcG9ydGVkKVxuXG5cdFx0XHRpZiAoIGRhdGEuaW5kZXhPZiggJyNWUk1MIFYyLjAnICkgPT09IC0gMSApIHtcblxuXHRcdFx0XHR0aHJvdyBFcnJvciggJ1RIUkVFLlZSTUxMZXhlcjogVmVyc2lvbiBvZiBWUk1MIGFzc2V0IG5vdCBzdXBwb3J0ZWQuJyApO1xuXG5cdFx0XHR9XG5cblx0XHRcdC8vIGNyZWF0ZSBKU09OIHJlcHJlc2VudGluZyB0aGUgdHJlZSBzdHJ1Y3R1cmUgb2YgdGhlIFZSTUwgYXNzZXRcblxuXHRcdFx0dmFyIHRyZWUgPSBnZW5lcmF0ZVZSTUxUcmVlKCBkYXRhICk7XG5cblx0XHRcdC8vIHBhcnNlIHRoZSB0cmVlIHN0cnVjdHVyZSB0byBhIHRocmVlLmpzIHNjZW5lXG5cblx0XHRcdHZhciBzY2VuZSA9IHBhcnNlVHJlZSggdHJlZSApO1xuXG5cdFx0XHRyZXR1cm4gc2NlbmU7XG5cblx0XHR9XG5cblx0fSApO1xuXG5cdGZ1bmN0aW9uIFZSTUxMZXhlciggdG9rZW5zICkge1xuXG5cdFx0dGhpcy5sZXhlciA9IG5ldyBjaGV2cm90YWluLkxleGVyKCB0b2tlbnMgKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bmRlZlxuXG5cdH1cblxuXHRWUk1MTGV4ZXIucHJvdG90eXBlID0ge1xuXG5cdFx0Y29uc3RydWN0b3I6IFZSTUxMZXhlcixcblxuXHRcdGxleDogZnVuY3Rpb24gKCBpbnB1dFRleHQgKSB7XG5cblx0XHRcdHZhciBsZXhpbmdSZXN1bHQgPSB0aGlzLmxleGVyLnRva2VuaXplKCBpbnB1dFRleHQgKTtcblxuXHRcdFx0aWYgKCBsZXhpbmdSZXN1bHQuZXJyb3JzLmxlbmd0aCA+IDAgKSB7XG5cblx0XHRcdFx0Y29uc29sZS5lcnJvciggbGV4aW5nUmVzdWx0LmVycm9ycyApO1xuXG5cdFx0XHRcdHRocm93IEVycm9yKCAnVEhSRUUuVlJNTExleGVyOiBMZXhpbmcgZXJyb3JzIGRldGVjdGVkLicgKTtcblxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gbGV4aW5nUmVzdWx0O1xuXG5cdFx0fVxuXG5cdH07XG5cblx0ZnVuY3Rpb24gVlJNTFBhcnNlciggdG9rZW5Wb2NhYnVsYXJ5ICkge1xuXG5cdFx0Y2hldnJvdGFpbi5QYXJzZXIuY2FsbCggdGhpcywgdG9rZW5Wb2NhYnVsYXJ5ICk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW5kZWZcblxuXHRcdHZhciAkID0gdGhpcztcblxuXHRcdHZhciBWZXJzaW9uID0gdG9rZW5Wb2NhYnVsYXJ5WyAnVmVyc2lvbicgXTtcblx0XHR2YXIgTEN1cmx5ID0gdG9rZW5Wb2NhYnVsYXJ5WyAnTEN1cmx5JyBdO1xuXHRcdHZhciBSQ3VybHkgPSB0b2tlblZvY2FidWxhcnlbICdSQ3VybHknIF07XG5cdFx0dmFyIExTcXVhcmUgPSB0b2tlblZvY2FidWxhcnlbICdMU3F1YXJlJyBdO1xuXHRcdHZhciBSU3F1YXJlID0gdG9rZW5Wb2NhYnVsYXJ5WyAnUlNxdWFyZScgXTtcblx0XHR2YXIgSWRlbnRpZmllciA9IHRva2VuVm9jYWJ1bGFyeVsgJ0lkZW50aWZpZXInIF07XG5cdFx0dmFyIFJvdXRlSWRlbnRpZmllciA9IHRva2VuVm9jYWJ1bGFyeVsgJ1JvdXRlSWRlbnRpZmllcicgXTtcblx0XHR2YXIgU3RyaW5nTGl0ZXJhbCA9IHRva2VuVm9jYWJ1bGFyeVsgJ1N0cmluZ0xpdGVyYWwnIF07XG5cdFx0dmFyIEhleExpdGVyYWwgPSB0b2tlblZvY2FidWxhcnlbICdIZXhMaXRlcmFsJyBdO1xuXHRcdHZhciBOdW1iZXJMaXRlcmFsID0gdG9rZW5Wb2NhYnVsYXJ5WyAnTnVtYmVyTGl0ZXJhbCcgXTtcblx0XHR2YXIgVHJ1ZUxpdGVyYWwgPSB0b2tlblZvY2FidWxhcnlbICdUcnVlTGl0ZXJhbCcgXTtcblx0XHR2YXIgRmFsc2VMaXRlcmFsID0gdG9rZW5Wb2NhYnVsYXJ5WyAnRmFsc2VMaXRlcmFsJyBdO1xuXHRcdHZhciBOdWxsTGl0ZXJhbCA9IHRva2VuVm9jYWJ1bGFyeVsgJ051bGxMaXRlcmFsJyBdO1xuXHRcdHZhciBERUYgPSB0b2tlblZvY2FidWxhcnlbICdERUYnIF07XG5cdFx0dmFyIFVTRSA9IHRva2VuVm9jYWJ1bGFyeVsgJ1VTRScgXTtcblx0XHR2YXIgUk9VVEUgPSB0b2tlblZvY2FidWxhcnlbICdST1VURScgXTtcblx0XHR2YXIgVE8gPSB0b2tlblZvY2FidWxhcnlbICdUTycgXTtcblx0XHR2YXIgTm9kZU5hbWUgPSB0b2tlblZvY2FidWxhcnlbICdOb2RlTmFtZScgXTtcblxuXHRcdCQuUlVMRSggJ3ZybWwnLCBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdCQuU1VCUlVMRSggJC52ZXJzaW9uICk7XG5cdFx0XHQkLkFUX0xFQVNUX09ORSggZnVuY3Rpb24gKCkge1xuXG5cdFx0XHRcdCQuU1VCUlVMRSggJC5ub2RlICk7XG5cblx0XHRcdH0gKTtcblx0XHRcdCQuTUFOWSggZnVuY3Rpb24gKCkge1xuXG5cdFx0XHRcdCQuU1VCUlVMRSggJC5yb3V0ZSApO1xuXG5cdFx0XHR9ICk7XG5cblx0XHR9ICk7XG5cblx0XHQkLlJVTEUoICd2ZXJzaW9uJywgZnVuY3Rpb24gKCkge1xuXG5cdFx0XHQkLkNPTlNVTUUoIFZlcnNpb24gKTtcblxuXHRcdH0gKTtcblxuXHRcdCQuUlVMRSggJ25vZGUnLCBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdCQuT1BUSU9OKCBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdFx0JC5TVUJSVUxFKCAkLmRlZiApO1xuXG5cdFx0XHR9ICk7XG5cblx0XHRcdCQuQ09OU1VNRSggTm9kZU5hbWUgKTtcblx0XHRcdCQuQ09OU1VNRSggTEN1cmx5ICk7XG5cdFx0XHQkLk1BTlkoIGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0XHQkLlNVQlJVTEUoICQuZmllbGQgKTtcblxuXHRcdFx0fSApO1xuXHRcdFx0JC5DT05TVU1FKCBSQ3VybHkgKTtcblxuXHRcdH0gKTtcblxuXHRcdCQuUlVMRSggJ2ZpZWxkJywgZnVuY3Rpb24gKCkge1xuXG5cdFx0XHQkLkNPTlNVTUUoIElkZW50aWZpZXIgKTtcblxuXHRcdFx0JC5PUjIoIFtcblx0XHRcdFx0eyBBTFQ6IGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0XHRcdCQuU1VCUlVMRSggJC5zaW5nbGVGaWVsZFZhbHVlICk7XG5cblx0XHRcdFx0fSB9LFxuXHRcdFx0XHR7IEFMVDogZnVuY3Rpb24gKCkge1xuXG5cdFx0XHRcdFx0JC5TVUJSVUxFKCAkLm11bHRpRmllbGRWYWx1ZSApO1xuXG5cdFx0XHRcdH0gfVxuXHRcdFx0XSApO1xuXG5cdFx0fSApO1xuXG5cdFx0JC5SVUxFKCAnZGVmJywgZnVuY3Rpb24gKCkge1xuXG5cdFx0XHQkLkNPTlNVTUUoIERFRiApO1xuXHRcdFx0JC5PUiggW1xuXHRcdFx0XHR7IEFMVDogZnVuY3Rpb24gKCkge1xuXG5cdFx0XHRcdFx0JC5DT05TVU1FKCBJZGVudGlmaWVyICk7XG5cblx0XHRcdFx0fSB9LFxuXHRcdFx0XHR7IEFMVDogZnVuY3Rpb24gKCkge1xuXG5cdFx0XHRcdFx0JC5DT05TVU1FKCBOb2RlTmFtZSApO1xuXG5cdFx0XHRcdH0gfVxuXHRcdFx0XSApO1xuXG5cdFx0fSApO1xuXG5cdFx0JC5SVUxFKCAndXNlJywgZnVuY3Rpb24gKCkge1xuXG5cdFx0XHQkLkNPTlNVTUUoIFVTRSApO1xuXHRcdFx0JC5PUiggW1xuXHRcdFx0XHR7IEFMVDogZnVuY3Rpb24gKCkge1xuXG5cdFx0XHRcdFx0JC5DT05TVU1FKCBJZGVudGlmaWVyICk7XG5cblx0XHRcdFx0fSB9LFxuXHRcdFx0XHR7IEFMVDogZnVuY3Rpb24gKCkge1xuXG5cdFx0XHRcdFx0JC5DT05TVU1FKCBOb2RlTmFtZSApO1xuXG5cdFx0XHRcdH0gfVxuXHRcdFx0XSApO1xuXG5cdFx0fSApO1xuXG5cdFx0JC5SVUxFKCAnc2luZ2xlRmllbGRWYWx1ZScsIGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0JC5BVF9MRUFTVF9PTkUoIGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0XHQkLk9SKCBbXG5cdFx0XHRcdFx0eyBBTFQ6IGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0XHRcdFx0JC5TVUJSVUxFKCAkLm5vZGUgKTtcblxuXHRcdFx0XHRcdH0gfSxcblx0XHRcdFx0XHR7IEFMVDogZnVuY3Rpb24gKCkge1xuXG5cdFx0XHRcdFx0XHQkLlNVQlJVTEUoICQudXNlICk7XG5cblx0XHRcdFx0XHR9IH0sXG5cdFx0XHRcdFx0eyBBTFQ6IGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0XHRcdFx0JC5DT05TVU1FKCBTdHJpbmdMaXRlcmFsICk7XG5cblx0XHRcdFx0XHR9IH0sXG5cdFx0XHRcdFx0eyBBTFQ6IGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0XHRcdFx0JC5DT05TVU1FKCBIZXhMaXRlcmFsICk7XG5cblx0XHRcdFx0XHR9IH0sXG5cdFx0XHRcdFx0eyBBTFQ6IGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0XHRcdFx0JC5DT05TVU1FKCBOdW1iZXJMaXRlcmFsICk7XG5cblx0XHRcdFx0XHR9IH0sXG5cdFx0XHRcdFx0eyBBTFQ6IGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0XHRcdFx0JC5DT05TVU1FKCBUcnVlTGl0ZXJhbCApO1xuXG5cdFx0XHRcdFx0fSB9LFxuXHRcdFx0XHRcdHsgQUxUOiBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdFx0XHRcdCQuQ09OU1VNRSggRmFsc2VMaXRlcmFsICk7XG5cblx0XHRcdFx0XHR9IH0sXG5cdFx0XHRcdFx0eyBBTFQ6IGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0XHRcdFx0JC5DT05TVU1FKCBOdWxsTGl0ZXJhbCApO1xuXG5cdFx0XHRcdFx0fSB9XG5cdFx0XHRcdF0gKTtcblxuXG5cdFx0XHR9ICk7XG5cblx0XHR9ICk7XG5cblx0XHQkLlJVTEUoICdtdWx0aUZpZWxkVmFsdWUnLCBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdCQuQ09OU1VNRSggTFNxdWFyZSApO1xuXHRcdFx0JC5NQU5ZKCBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdFx0JC5PUiggW1xuXHRcdFx0XHRcdHsgQUxUOiBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdFx0XHRcdCQuU1VCUlVMRSggJC5ub2RlICk7XG5cblx0XHRcdFx0XHR9IH0sXG5cdFx0XHRcdFx0eyBBTFQ6IGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0XHRcdFx0JC5TVUJSVUxFKCAkLnVzZSApO1xuXG5cdFx0XHRcdFx0fSB9LFxuXHRcdFx0XHRcdHsgQUxUOiBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdFx0XHRcdCQuQ09OU1VNRSggU3RyaW5nTGl0ZXJhbCApO1xuXG5cdFx0XHRcdFx0fSB9LFxuXHRcdFx0XHRcdHsgQUxUOiBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdFx0XHRcdCQuQ09OU1VNRSggSGV4TGl0ZXJhbCApO1xuXG5cdFx0XHRcdFx0fSB9LFxuXHRcdFx0XHRcdHsgQUxUOiBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdFx0XHRcdCQuQ09OU1VNRSggTnVtYmVyTGl0ZXJhbCApO1xuXG5cdFx0XHRcdFx0fSB9LFxuXHRcdFx0XHRcdHsgQUxUOiBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdFx0XHRcdCQuQ09OU1VNRSggTnVsbExpdGVyYWwgKTtcblxuXHRcdFx0XHRcdH0gfVxuXHRcdFx0XHRdICk7XG5cblx0XHRcdH0gKTtcblx0XHRcdCQuQ09OU1VNRSggUlNxdWFyZSApO1xuXG5cdFx0fSApO1xuXG5cdFx0JC5SVUxFKCAncm91dGUnLCBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdCQuQ09OU1VNRSggUk9VVEUgKTtcblx0XHRcdCQuQ09OU1VNRSggUm91dGVJZGVudGlmaWVyICk7XG5cdFx0XHQkLkNPTlNVTUUoIFRPICk7XG5cdFx0XHQkLkNPTlNVTUUyKCBSb3V0ZUlkZW50aWZpZXIgKTtcblxuXHRcdH0gKTtcblxuXHRcdHRoaXMucGVyZm9ybVNlbGZBbmFseXNpcygpO1xuXG5cdH1cblxuXHRWUk1MUGFyc2VyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIGNoZXZyb3RhaW4uUGFyc2VyLnByb3RvdHlwZSApOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVuZGVmXG5cdFZSTUxQYXJzZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gVlJNTFBhcnNlcjtcblxuXHRmdW5jdGlvbiBGYWNlKCBhLCBiLCBjICkge1xuXG5cdFx0dGhpcy5hID0gYTtcblx0XHR0aGlzLmIgPSBiO1xuXHRcdHRoaXMuYyA9IGM7XG5cdFx0dGhpcy5ub3JtYWwgPSBuZXcgVmVjdG9yMygpO1xuXG5cdH1cblxuXHR2YXIgVEVYVFVSRV9UWVBFID0ge1xuXHRcdElOVEVOU0lUWTogMSxcblx0XHRJTlRFTlNJVFlfQUxQSEE6IDIsXG5cdFx0UkdCOiAzLFxuXHRcdFJHQkE6IDRcblx0fTtcblxuXHRyZXR1cm4gVlJNTExvYWRlcjtcblxufSApKCk7XG5cbmV4cG9ydCB7IFZSTUxMb2FkZXIgfTtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/three/examples/jsm/loaders/VRMLLoader.js\n");

/***/ })

}]);